<html>
<head>
<title>2453.ebdb135eb902bf82e103.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #bcbec4;}
.s1 { color: #6aab73;}
.s2 { color: #2aacb8;}
.s3 { color: #cf8e6d;}
.ln { color: #4b5059; font-weight: normal; font-style: normal; }
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
2453.ebdb135eb902bf82e103.js.map</font>
</center></td></tr></table>
<pre><a name="l1"><span class="ln">1    </span></a><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;file&quot;</span><span class="s0">:</span><span class="s1">&quot;2453.ebdb135eb902bf82e103.js?v=ebdb135eb902bf82e103&quot;</span><span class="s0">,</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;;;;;;;;;;;;AAG8B;;AAE9B;AACsD;AACtD,+BAA+B,qEAAM;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,yCAAyC,qEAAM;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,+BAA+B,qEAAM;AACrC,sCAAsC,yEAAc;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,gCAAgC,qEAAM;AACtC;AACA;AACA;AACA,wBAAwB,6EAAW;AACnC;AACA,CAAC;AACD,wCAAwC,qEAAM;AAC9C;AACA;AACA;AACA,wBAAwB,6EAAW;AACnC,sCAAsC,cAAc;AACpD,CAAC;AACD,kCAAkC,qEAAM;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,iCAAiC,qEAAM;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAUC;;;;;;;;;;;;AChH4B;;AAE9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,qEAAM;AACV;AACA;AACA;AACA;AACA;;AAIE;;;;;;;;;;;;;;;;;AChB4B;AAGA;AAKA;AAqBA;;AAE9B;AACA;AACA,0BAA0B,qEAAM;AAChC,sBAAsB,gBAAgB,KAAK;AAC3C;AACA,GAAG;AACH;AACA,2BAA2B,qEAAM;AACjC,KAAK;AACL,UAAU;AACV,gBAAgB,m1CAAm1C;AACn2C,kBAAkB,85BAA85B;AACh7B;AACA,mCAAmC,qEAAM;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,wDAAwD;AACvF,4BAA4B,qCAAqC;AACjE;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,8FAA8F;AAC7H,4BAA4B,yEAAyE;AACrG;AACA;AACA;AACA,+BAA+B,2FAA2F;AAC1H,4BAA4B,uFAAuF;AACnH;AACA;AACA;AACA,+BAA+B,2FAA2F;AAC1H,4BAA4B,uFAAuF;AACnH;AACA;AACA;AACA,+BAA+B,2FAA2F;AAC1H,4BAA4B,iDAAiD;AAC7E;AACA;AACA;AACA,+BAA+B,2FAA2F;AAC1H,4BAA4B,iDAAiD;AAC7E;AACA;AACA;AACA,+BAA+B,gGAAgG;AAC/H,4BAA4B,iDAAiD;AAC7E;AACA;AACA;AACA,+BAA+B,0GAA0G;AACzI,4BAA4B,2DAA2D;AACvF;AACA;AACA;AACA,+BAA+B,iGAAiG;AAChI,4BAA4B,2FAA2F;AACvH;AACA;AACA;AACA,wCAAwC,kGAAkG;AAC1I;AACA;AACA,wCAAwC,oFAAoF;AAC5H;AACA;AACA,wCAAwC,sFAAsF;AAC9H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,+EAA+E;AACjH;AACA;AACA;AACA;AACA;AACA,kCAAkC,4FAA4F;AAC9H;AACA;AACA,kCAAkC,yDAAyD;AAC3F;AACA;AACA,kCAAkC,yDAAyD;AAC3F;AACA;AACA,kCAAkC,8DAA8D;AAChG;AACA;AACA,kCAAkC,2DAA2D;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,uHAAuH;AACrI,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,uGAAuG;AACrH,cAAc;AACd;AACA;AACA;AACA,8CAA8C,uGAAuG;AACrJ;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,cAAc,8BAA8B,IAAI,QAAQ,IAAI,8BAA8B,IAAI,8BAA8B,kIAAkI,MAAM,KAAK,WAAW,IAAI,WAAW,IAAI,2VAA2V,oBAAoB,0TAA0T,qDAAqD,mCAAmC,IAAI,aAAa,IAAI,YAAY,IAAI,sCAAsC,IAAI,iBAAiB,IAAI,iBAAiB,IAAI,YAAY,IAAI,YAAY,IAAI,YAAY,IAAI,YAAY,IAAI,YAAY,sCAAsC,aAAa,IAAI,aAAa,qBAAqB,aAAa,IAAI,aAAa,IAAI,aAAa,IAAI,aAAa,IAAI,aAAa,IAAI,aAAa,IAAI,aAAa,IAAI,aAAa,IAAI,iBAAiB,IAAI,iBAAiB,IAAI,iBAAiB,IAAI,0IAA0I,IAAI,+CAA+C,IAAI,iBAAiB,IAAI,iBAAiB,IAAI,iBAAiB,IAAI,iBAAiB,yHAAyH,QAAQ,sBAAsB,yBAAyB,IAAI,YAAY,qBAAqB,YAAY,IAAI,YAAY,uIAAuI,OAAO,iBAAiB,QAAQ,iBAAiB,QAAQ,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,QAAQ,KAAK,2BAA2B,IAAI,2BAA2B,IAAI,aAAa,IAAI,8CAA8C,8KAA8K,kBAAkB,IAAI,2BAA2B,IAAI,aAAa,IAAI,aAAa,IAAI,kBAAkB,IAAI,kBAAkB,IAAI,kBAAkB,IAAI,kBAAkB,IAAI,qFAAqF,IAAI,aAAa,wEAAwE,8VAA8V,IAAI,8VAA8V,IAAI,8VAA8V,IAAI,cAAc,IAAI,2WAA2W,IAAI,cAAc,IAAI,2WAA2W,IAAI,cAAc,IAAI,cAAc,IAAI,2WAA2W,IAAI,8VAA8V,IAAI,cAAc,qBAAqB,cAAc,sCAAsC,kBAAkB,IAAI,kBAAkB,IAAI,kBAAkB,IAAI,kBAAkB,IAAI,kBAAkB,IAAI,2BAA2B,IAAI,YAAY,IAAI,YAAY,IAAI,YAAY,IAAI,YAAY,IAAI,YAAY,sCAAsC,oCAAoC,2HAA2H,cAAc,qBAAqB,cAAc,sCAAsC,cAAc,qBAAqB,aAAa,IAAI,aAAa,IAAI,kBAAkB,IAAI,kBAAkB,IAAI,YAAY,IAAI,YAAY,IAAI,YAAY,IAAI,kBAAkB,iCAAiC,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,uCAAuC,YAAY,IAAI,YAAY,IAAI,aAAa,IAAI,aAAa,IAAI,aAAa,IAAI,aAAa;AACthN,sBAAsB,oPAAoP;AAC1Q,gCAAgC,qEAAM;AACtC;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA,KAAK;AACL,2BAA2B,qEAAM;AACjC;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,qEAAM;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,qEAAM;AACZ,iEAAiE;AACjE;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,kCAAkC,qEAAM;AACxC;AACA;AACA,UAAU;AACV;AACA;AACA,OAAO;AACP;AACA,gCAAgC,qEAAM;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,6BAA6B,qEAAM;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,6BAA6B,qEAAM;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,4BAA4B,qEAAM;AAClC;AACA;AACA,OAAO;AACP;AACA,8BAA8B,qEAAM;AACpC;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,OAAO;AACP;AACA,4BAA4B,qEAAM;AAClC;AACA,OAAO;AACP;AACA,iCAAiC,qEAAM;AACvC;AACA;AACA,OAAO;AACP;AACA,qCAAqC,qEAAM;AAC3C;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,oCAAoC,qEAAM;AAC1C;AACA;AACA;AACA,OAAO;AACP;AACA,kCAAkC,qEAAM;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,4BAA4B,qEAAM;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,kBAAkB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA,gBAAgB;AAChB;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,OAAO;AACP;AACA,2BAA2B,qEAAM;AACjC;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,OAAO;AACP;AACA,6BAA6B,qEAAM;AACnC;AACA,OAAO;AACP;AACA,gCAAgC,qEAAM;AACtC;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,OAAO;AACP;AACA,qCAAqC,qEAAM;AAC3C;AACA;AACA,UAAU;AACV;AACA;AACA,OAAO;AACP,4DAA4D;AAC5D,gCAAgC,qEAAM;AACtC;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,OAAO;AACP;AACA,iCAAiC,qEAAM;AACvC;AACA,OAAO;AACP;AACA,sCAAsC,qEAAM;AAC5C;AACA,OAAO;AACP,iBAAiB,0BAA0B;AAC3C,qCAAqC,qEAAM;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,2FAA2F,qBAAqB,uJAAuJ,uBAAuB,oCAAoC,2PAA2P,mOAAmO,0BAA0B,6HAA6H,gBAAgB,eAAe,wFAAwF,0BAA0B,6CAA6C,oLAAoL;AACzyC,oBAAoB,yBAAyB,uCAAuC,iBAAiB,mCAAmC,iBAAiB,mCAAmC,UAAU,yCAAyC,aAAa,6CAA6C,YAAY,yCAAyC,eAAe;AAC7W;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,EAAE,qEAAM;AACR;AACA;AACA;AACA,CAAC;AACD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,yEAAe;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,uBAAuB,sEAAW;AAClC,6BAA6B,4EAAiB;AAC9C,2BAA2B,0EAAe;AAC1C,uBAAuB,sEAAW;AAClC,6BAA6B,4EAAiB;AAC9C,2BAA2B,0EAAe;AAC1C;AACA;AACA;AACA;AACA,iBAAiB,yEAAU;AAC3B;AACA;AACA;AACA;AACA;AACA,IAAI,qEAAM;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mEAAmE,UAAU,eAAe,aAAa,YAAY,mCAAmC;AACxJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf,oBAAoB;AACpB;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,wCAAwC;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,8DAA8D;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,WAAW,yEAAU;AACrB;AACA;AACA;AACA,IAAI,oEAAK;AACT;AACA;AACA;AACA,YAAY,oBAAoB;AAChC;AACA;AACA;AACA;AACA,IAAI,8DAAG,wBAAwB,wBAAwB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,oBAAoB;AAChC;AACA,0BAA0B,2EAAY,cAAc,yEAAU;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,0BAA0B,2EAAY,YAAY,yEAAU;AAC5D,qDAAqD;AACrD,kDAAkD;AAClD;AACA;AACA,MAAM;AACN,MAAM,8DAAG;AACT;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,2EAAY,YAAY,yEAAU;AAC5D;AACA,qDAAqD;AACrD,kDAAkD;AAClD;AACA;AACA;AACA;AACA,MAAM;AACN,MAAM,8DAAG;AACT;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,2EAAY,YAAY,yEAAU;AAC9D;AACA;AACA,MAAM;AACN,MAAM,8DAAG;AACT;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN,MAAM,8DAAG;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,0EAAW;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,yEAAU;AACrB;AACA;;AAEA;AACA,gCAAgC,qEAAM;AACtC,cAAc;AACd,YAAY;AACZ;;AAEA;AACA,YAAY;AACZ;AACA;;AAEA;AACA,cAAc;AACd;;AAEA;AACA;AACA;AACA,cAAc;AACd;;AAEA;AACA;AACA;AACA,cAAc;AACd;;AAEA;AACA,YAAY;AACZ,cAAc;AACd;;AAEA;AACA,YAAY;AACZ;;AAEA;AACA,YAAY;AACZ;;AAEA;AACA,YAAY;AACZ,cAAc;AACd;;AAEA;AACA,YAAY;AACZ;AACA;;AAEA;AACA,cAAc;AACd,YAAY;AACZ;;AAEA;AACA,YAAY;AACZ;AACA;;AAEA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA,cAAc;AACd,YAAY;AACZ;;AAEA;AACA;AACA,cAAc;AACd,YAAY;AACZ;;AAEA;AACA,YAAY;AACZ;AACA;;AAEA;AACA,YAAY;AACZ,cAAc;AACd;;AAEA;AACA,YAAY;AACZ,cAAc;AACd;;AAEA;AACA,YAAY;AACZ,cAAc;AACd;;AAEA;AACA;AACA;;AAEA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA,cAAc;AACd,YAAY;AACZ;AACA;AACA,cAAc;AACd,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AAC4B;;AAE5B;AACsD;AACtD;AACA;AACA;AACA;AACA;AACA,gCAAgC,qEAAM;AACtC,SAAS,uEAAQ;AACjB,CAAC;AACD,gCAAgC,qEAAM;AACtC;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,6EAAW;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,gBAAgB;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,CAAC;AACD,sCAAsC,qEAAM;AAC5C,6DAA6D,kBAAkB,oEAAoE;AACnJ,CAAC;AACD,gCAAgC,qEAAM;AACtC;AACA,sBAAsB,0EAAW,gBAAgB,wEAAS;AAC1D,iFAAiF;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ,UAAU,wBAAwB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,CAAC;AACD,+BAA+B,qEAAM;AACrC;AACA;AACA,oCAAoC,yEAAc;AAClD,2CAA2C,4EAAa;AACxD;AACA;AACA,8BAA8B,qEAAM;AACpC;AACA;AACA;AACA;AACA,gCAAgC,qEAAM;AACtC;AACA;AACA;AACA,gCAAgC,qEAAM;AACtC;AACA;AACA;AACA,gCAAgC,qEAAM;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,yBAAyB,2EAAgB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,gCAAgC,qEAAM;AACtC;AACA;AACA;AACA,EAAE,qEAAM;AACR;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,yCAAyC,qEAAM;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,GAAG;AACH,CAAC;AACD,+CAA+C,qEAAM;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC,gDAAgD,SAAS;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,0EAAW;AAC1B;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,oBAAoB,mBAAmB;AACvC,IAAI;AACJ,oBAAoB,gBAAgB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,gFAAiB;AACvB,MAAM;AACN,MAAM,wEAAS;AACf;AACA;AACA,gCAAgC,uEAAQ;AACxC;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,gBAAgB,gBAAgB,GAAG;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,yCAAyC,qEAAM;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,mBAAmB;AACvC,IAAI;AACJ,oBAAoB,gBAAgB;AACpC;AACA;AACA;AACA,eAAe,0EAAW;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,uEAAQ;AACxC;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,gBAAgB,uBAAuB,GAAG;AAChD;AACA;AACA;AACA,CAAC;AACD,gCAAgC,qEAAM;AACtC;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,8BAA8B,qEAAM;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,eAAe;AACvB;AACA;AACA;AACA;AACA,CAAC;AACD,oCAAoC,qEAAM;AAC1C;AACA,CAAC;AACD,qCAAqC,qEAAM;AAC3C,eAAe,0EAAW;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,+BAA+B,qEAAM;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,uCAAuC,qEAAM;AAC7C;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,YAAY,yEAAU;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,uEAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,uEAAQ;AACpB;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,0CAA0C,qEAAM;AAChD,EAAE,gFAAkB;AACpB,CAAC;AACD,yCAAyC,qEAAM;AAC/C;AACA;AACA;AACA;AACA,CAAC;AACD,yCAAyC,qEAAM;AAC/C;AACA;AACA;AACA;AACA,CAAC;AACD,sCAAsC,qEAAM;AAC5C;AACA;AACA;AACA;AACA,CAAC;AACD,sCAAsC,qEAAM;AAC5C;AACA,CAAC;AACD,4CAA4C,qEAAM;AAClD;AACA,CAAC;AACD,2CAA2C,qEAAM;AACjD;AACA,CAAC;AACD,2CAA2C,qEAAM;AACjD;AACA;AACA;AACA,CAAC;AACD,kCAAkC,qEAAM;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,mCAAmC,qEAAM;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,EAAE,qEAAM;AACR;AACA,YAAY,kDAAkD;AAC9D,+CAA+C,4EAAa;AAC5D,gCAAgC,yEAAc;AAC9C,oBAAoB,kBAAkB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,qEAAM;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,qEAAM;AACR;AACA,sBAAsB,wFAAyB,UAAU,wEAAS;AAClE;AACA;AACA;AACA,kGAAkG,0EAAW,UAAU,wEAAS;AAChI;AACA;AACA;AACA,EAAE,qEAAM;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,qEAAM;AACR;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,EAAE,qEAAM;AACR;AACA,YAAY,kDAAkD;AAC9D,gCAAgC,yEAAc;AAC9C,oBAAoB,kBAAkB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,qEAAM;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,qEAAM;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,qEAAM;AACR;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,+BAA+B,qEAAM;AACrC;AACA;AACA;AACA;AACA,KAAK;AACL,2BAA2B,qEAAM;AACjC;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,4BAA4B,qEAAM;AAClC;AACA,KAAK;AACL,8BAA8B,qEAAM;AACpC;AACA,KAAK;AACL,6BAA6B,qEAAM;AACnC;AACA,KAAK;AACL,gCAAgC,qEAAM;AACtC;AACA,KAAK;AACL,6BAA6B,qEAAM;AACnC;AACA,KAAK;AACL,+BAA+B,qEAAM;AACrC;AACA,KAAK;AACL,8BAA8B,qEAAM;AACpC;AACA,KAAK;AACL,iCAAiC,qEAAM;AACvC;AACA,KAAK;AACL,8BAA8B,qEAAM;AACpC;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,wBAAwB,qEAAM;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,yEAAU;AACtB,GAAG;AACH,6BAA6B,qEAAM;AACnC;AACA;AACA,MAAM;AACN;AACA;AACA,GAAG;AACH,gCAAgC,qEAAM;AACtC;AACA;AACA;AACA,6BAA6B,qEAAM;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,IAAI,qEAAM;AACV;AACA;AACA,GAAG;AACH,0BAA0B,qEAAM;AAChC,oBAAoB,yEAAc;AAClC,mBAAmB,yEAAc;AACjC,oBAAoB,yEAAc;AAClC,mBAAmB,yEAAc;AACjC;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,iCAAiC,qEAAM;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH,iCAAiC,qEAAM;AACvC;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH,8BAA8B,qEAAM,oBAAoB,6CAA6C;AACrG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,2BAA2B,qEAAM,oBAAoB,6CAA6C;AAClG;AACA,GAAG;AACH,2BAA2B,qEAAM;AACjC;AACA,GAAG;AACH,iCAAiC,qEAAM;AACvC;AACA,GAAG;AACH,oCAAoC,qEAAM;AAC1C;AACA;AACA;AACA,yBAAyB,uCAAuC;AAChE;AACA;AACA,GAAG;AACH,mCAAmC,qEAAM;AACzC;AACA;AACA;AACA,GAAG;AACH,oCAAoC,qEAAM;AAC1C;AACA;AACA;AACA,GAAG;AACH,mCAAmC,qEAAM;AACzC;AACA,sBAAsB,yEAAc;AACpC,GAAG;AACH,kCAAkC,qEAAM;AACxC;AACA,GAAG;AACH,6BAA6B,qEAAM;AACnC,aAAa;AACb,GAAG;AACH;AACA,+BAA+B,qEAAM;AACrC;AACA;AACA;AACA,eAAe,0EAAW;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,yEAAU;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,uEAAQ;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,kCAAkC,qEAAM;AACxC;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,+BAA+B,qEAAM;AACrC;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,gCAAgC,qEAAM;AACtC;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA,UAAU,yBAAyB;AACnC,gBAAgB,yEAAc;AAC9B,qBAAqB,uEAAQ;AAC7B,sCAAsC,wFAAyB,UAAU,yEAAU,MAAM,wEAAa;AACtG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,yEAAc;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAM;AACN,kCAAkC,qEAAM;AACxC,UAAU,uEAAuE;AACjF,mBAAmB,wEAAa;AAChC,kBAAkB,yEAAU;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,uEAAQ;AACd,yCAAyC,mCAAmC;AAC5E,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,OAAO,GAAG,YAAY,IAAI,SAAS,yEAAc,wCAAwC,IAAI,iBAAiB,IAAI,OAAO;AACvI;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,4CAA4C,qEAAM;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,yEAAc;AACjC;AACA,gBAAgB,yEAAc;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,iCAAiC,qEAAM;AACvC;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,yEAAc;AAChC;AACA;AACA;AACA,CAAC;AACD,sCAAsC,qEAAM;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,CAAC;AACD,8BAA8B,qEAAM;AACpC,EAAE,sFAAuB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,uCAAuC,qEAAM;AAC7C;AACA;AACA,GAAG;AACH,CAAC;AACD,uCAAuC,qEAAM;AAC7C;AACA;AACA;AACA;AACA,aAAa,yEAAc;AAC3B,KAAK;AACL;AACA;AACA;AACA;AACA,aAAa,yEAAc;AAC3B,KAAK;AACL;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,wEAAa,eAAe,YAAY;AAC1D;AACA;AACA,qBAAqB,wEAAa;AAClC,wBAAwB,yEAAc;AACtC;AACA,IAAI,8DAAG,UAAU,aAAa,IAAI,YAAY;AAC9C;AACA;AACA;AACA;AACA,qEAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,qEAAM;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,qEAAM;AACR;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAM;AACN,2BAA2B,qEAAM;AACjC,UAAU,0BAA0B,EAAE,yEAAU;AAChD;AACA;AACA;AACA,qBAAqB,oDAAM;AAC3B;AACA,6CAA6C,oDAAM,mDAAmD,oDAAM;AAC5G;AACA;AACA,EAAE,8DAAG;AACL,qEAAqE,GAAG,OAAO,oDAAM,SAAS,GAAG;AACjG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,qEAAM;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,oCAAoC;AACpE;AACA,UAAU;AACV,UAAU,8DAAG;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,8DAAG;AACL,EAAE,8DAAG;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,cAAc;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,+EAAgB;AAClB;AACA;AACA;AACA;AACA;AACA,EAAE,8DAAG;AACL,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,wEAAa;AACrD,gCAAgC,uEAAQ,yBAAyB,wFAAyB,cAAc,yEAAU,MAAM,wEAAa;AACrI;AACA;AACA,0CAA0C,yEAAc;AACxD;AACA;AACA;AACA,QAAQ;AACR,4CAA4C,yEAAc;AAC1D;AACA;AACA;AACA,QAAQ;AACR,4CAA4C,yEAAc;AAC1D;AACA;AACA;AACA,0CAA0C,yEAAc;AACxD;AACA;AACA;AACA,QAAQ;AACR,4CAA4C,yEAAc;AAC1D;AACA;AACA;AACA,QAAQ;AACR,mDAAmD,yEAAc;AACjE;AACA;AACA;AACA,QAAQ;AACR;AACA,qDAAqD,yEAAc;AACnE;AACA;AACA;AACA;AACA;AACA,8CAA8C,yEAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,8DAAG;AACL;AACA;AACA,qEAAM;AACN,4CAA4C,qEAAM;AAClD;AACA;AACA;AACA,4BAA4B,wEAAa;AACzC;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,0BAA0B,wEAAa;AACvC;AACA;AACA;AACA;AACA;AACA,oBAAoB,uEAAQ,4BAA4B,wFAAyB,oBAAoB,yEAAU,MAAM,wEAAa;AAClI,4CAA4C,yEAAc;AAC1D,gCAAgC,yEAAc;AAC9C,gBAAgB,yEAAc;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,yEAAc;AACnC;AACA;AACA;AACA;AACA,mBAAmB,yEAAc;AACjC;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,iBAAiB,wEAAa;AAC9B;AACA,6BAA6B,wEAAa;AAC1C,mBAAmB,yEAAc;AACjC,qBAAqB,yEAAc;AACnC;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,SAAS,yEAAc;AACvB;AACA,qEAAM;AACN,qCAAqC,qEAAM;AAC3C;AACA;AACA;AACA;AACA;AACA,uBAAuB,uEAAQ,sBAAsB,wFAAyB,cAAc,yEAAU,MAAM,wEAAa;AACzH,iBAAiB,wEAAa;AAC9B;AACA;AACA;AACA,qCAAqC,yEAAc;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,yEAAc,4CAA4C,yEAAc;AAC3G;AACA;AACA;AACA;AACA,IAAI;AACJ,mCAAmC,yEAAc,kEAAkE,yEAAc;AACjI;AACA;AACA;AACA;AACA,IAAI;AACJ,qBAAqB,wEAAa;AAClC,mBAAmB,wEAAa,wBAAwB,yEAAc;AACtE;AACA;AACA,mCAAmC,yEAAc,uCAAuC,yEAAc;AACtG;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,wBAAwB,wEAAa;AACrC;AACA;AACA;AACA;AACA;AACA,EAAE,8DAAG;AACL,WAAW,iBAAiB,GAAG,gBAAgB,GAAG,iBAAiB,GAAG,gBAAgB,GAAG,gBAAgB,GAAG,iBAAiB,GAAG,YAAY;AAC5I;AACA;AACA,CAAC;AACD,wCAAwC,qEAAM;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,qEAAM;AAC5C;AACA,GAAG;AACH;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,wEAAa;AAC/B;AACA,MAAM,yEAAc;AACpB;AACA;AACA;AACA,kBAAkB,wEAAa;AAC/B;AACA,WAAW,yEAAc;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,0CAA0C,qEAAM;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,yEAAc;AACrC,qBAAqB,yEAAc;AACnC,wBAAwB,yEAAc;AACtC,OAAO;AACP,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,yEAAc;AACzC;AACA;AACA;AACA;AACA,yBAAyB,yEAAc;AACvC;AACA;AACA;AACA;AACA,4BAA4B,yEAAc;AAC1C,YAAY;AACZ,2BAA2B,yEAAc;AACzC,yBAAyB,yEAAc;AACvC,4BAA4B,yEAAc;AAC1C;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,EAAE,8DAAG;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,wBAAwB,qEAAM;AAC9B;AACA;AACA;AACA;AACA;AACA,MAAM,yEAAS,GAAG,YAAY,kBAAkB;AAChD;AACA,GAAG;AACH;AAGE&quot;</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/mermaid/dist/chunks/mermaid.core/chunk-D6G4REZN.mjs&quot;</span><span class="s0">,</span><span class="s1">&quot;webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/mermaid/dist/chunks/mermaid.core/chunk-XZIHB7SX.mjs&quot;</span><span class="s0">,</span><span class="s1">&quot;webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/mermaid/dist/chunks/mermaid.core/sequenceDiagram-X6HHIX6F.mjs&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import {</span><span class="s3">\n  </span><span class="s1">__name,</span><span class="s3">\n  </span><span class="s1">lineBreakRegex</span><span class="s3">\n</span><span class="s1">} from </span><span class="s3">\&quot;</span><span class="s1">./chunk-YTJNT7DU.mjs</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n\n</span><span class="s1">// src/diagrams/common/svgDrawCommon.ts</span><span class="s3">\n</span><span class="s1">import { sanitizeUrl } from </span><span class="s3">\&quot;</span><span class="s1">@braintree/sanitize-url</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">var drawRect = /* @__PURE__ */ __name((element, rectData) =&gt; {</span><span class="s3">\n  </span><span class="s1">const rectElement = element.append(</span><span class="s3">\&quot;</span><span class="s1">rect</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">rectElement.attr(</span><span class="s3">\&quot;</span><span class="s1">x</span><span class="s3">\&quot;</span><span class="s1">, rectData.x);</span><span class="s3">\n  </span><span class="s1">rectElement.attr(</span><span class="s3">\&quot;</span><span class="s1">y</span><span class="s3">\&quot;</span><span class="s1">, rectData.y);</span><span class="s3">\n  </span><span class="s1">rectElement.attr(</span><span class="s3">\&quot;</span><span class="s1">fill</span><span class="s3">\&quot;</span><span class="s1">, rectData.fill);</span><span class="s3">\n  </span><span class="s1">rectElement.attr(</span><span class="s3">\&quot;</span><span class="s1">stroke</span><span class="s3">\&quot;</span><span class="s1">, rectData.stroke);</span><span class="s3">\n  </span><span class="s1">rectElement.attr(</span><span class="s3">\&quot;</span><span class="s1">width</span><span class="s3">\&quot;</span><span class="s1">, rectData.width);</span><span class="s3">\n  </span><span class="s1">rectElement.attr(</span><span class="s3">\&quot;</span><span class="s1">height</span><span class="s3">\&quot;</span><span class="s1">, rectData.height);</span><span class="s3">\n  </span><span class="s1">if (rectData.name) {</span><span class="s3">\n    </span><span class="s1">rectElement.attr(</span><span class="s3">\&quot;</span><span class="s1">name</span><span class="s3">\&quot;</span><span class="s1">, rectData.name);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (rectData.rx) {</span><span class="s3">\n    </span><span class="s1">rectElement.attr(</span><span class="s3">\&quot;</span><span class="s1">rx</span><span class="s3">\&quot;</span><span class="s1">, rectData.rx);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (rectData.ry) {</span><span class="s3">\n    </span><span class="s1">rectElement.attr(</span><span class="s3">\&quot;</span><span class="s1">ry</span><span class="s3">\&quot;</span><span class="s1">, rectData.ry);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (rectData.attrs !== void 0) {</span><span class="s3">\n    </span><span class="s1">for (const attrKey in rectData.attrs) {</span><span class="s3">\n      </span><span class="s1">rectElement.attr(attrKey, rectData.attrs[attrKey]);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (rectData.class) {</span><span class="s3">\n    </span><span class="s1">rectElement.attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, rectData.class);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return rectElement;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">drawRect</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var drawBackgroundRect = /* @__PURE__ */ __name((element, bounds) =&gt; {</span><span class="s3">\n  </span><span class="s1">const rectData = {</span><span class="s3">\n    </span><span class="s1">x: bounds.startx,</span><span class="s3">\n    </span><span class="s1">y: bounds.starty,</span><span class="s3">\n    </span><span class="s1">width: bounds.stopx - bounds.startx,</span><span class="s3">\n    </span><span class="s1">height: bounds.stopy - bounds.starty,</span><span class="s3">\n    </span><span class="s1">fill: bounds.fill,</span><span class="s3">\n    </span><span class="s1">stroke: bounds.stroke,</span><span class="s3">\n    </span><span class="s1">class: </span><span class="s3">\&quot;</span><span class="s1">rect</span><span class="s3">\&quot;\n  </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">const rectElement = drawRect(element, rectData);</span><span class="s3">\n  </span><span class="s1">rectElement.lower();</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">drawBackgroundRect</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var drawText = /* @__PURE__ */ __name((element, textData) =&gt; {</span><span class="s3">\n  </span><span class="s1">const nText = textData.text.replace(lineBreakRegex, </span><span class="s3">\&quot; \&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const textElem = element.append(</span><span class="s3">\&quot;</span><span class="s1">text</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">textElem.attr(</span><span class="s3">\&quot;</span><span class="s1">x</span><span class="s3">\&quot;</span><span class="s1">, textData.x);</span><span class="s3">\n  </span><span class="s1">textElem.attr(</span><span class="s3">\&quot;</span><span class="s1">y</span><span class="s3">\&quot;</span><span class="s1">, textData.y);</span><span class="s3">\n  </span><span class="s1">textElem.attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">legend</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">textElem.style(</span><span class="s3">\&quot;</span><span class="s1">text-anchor</span><span class="s3">\&quot;</span><span class="s1">, textData.anchor);</span><span class="s3">\n  </span><span class="s1">if (textData.class) {</span><span class="s3">\n    </span><span class="s1">textElem.attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, textData.class);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">const tspan = textElem.append(</span><span class="s3">\&quot;</span><span class="s1">tspan</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">tspan.attr(</span><span class="s3">\&quot;</span><span class="s1">x</span><span class="s3">\&quot;</span><span class="s1">, textData.x + textData.textMargin * 2);</span><span class="s3">\n  </span><span class="s1">tspan.text(nText);</span><span class="s3">\n  </span><span class="s1">return textElem;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">drawText</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var drawImage = /* @__PURE__ */ __name((elem, x, y, link) =&gt; {</span><span class="s3">\n  </span><span class="s1">const imageElement = elem.append(</span><span class="s3">\&quot;</span><span class="s1">image</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">imageElement.attr(</span><span class="s3">\&quot;</span><span class="s1">x</span><span class="s3">\&quot;</span><span class="s1">, x);</span><span class="s3">\n  </span><span class="s1">imageElement.attr(</span><span class="s3">\&quot;</span><span class="s1">y</span><span class="s3">\&quot;</span><span class="s1">, y);</span><span class="s3">\n  </span><span class="s1">const sanitizedLink = sanitizeUrl(link);</span><span class="s3">\n  </span><span class="s1">imageElement.attr(</span><span class="s3">\&quot;</span><span class="s1">xlink:href</span><span class="s3">\&quot;</span><span class="s1">, sanitizedLink);</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">drawImage</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var drawEmbeddedImage = /* @__PURE__ */ __name((element, x, y, link) =&gt; {</span><span class="s3">\n  </span><span class="s1">const imageElement = element.append(</span><span class="s3">\&quot;</span><span class="s1">use</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">imageElement.attr(</span><span class="s3">\&quot;</span><span class="s1">x</span><span class="s3">\&quot;</span><span class="s1">, x);</span><span class="s3">\n  </span><span class="s1">imageElement.attr(</span><span class="s3">\&quot;</span><span class="s1">y</span><span class="s3">\&quot;</span><span class="s1">, y);</span><span class="s3">\n  </span><span class="s1">const sanitizedLink = sanitizeUrl(link);</span><span class="s3">\n  </span><span class="s1">imageElement.attr(</span><span class="s3">\&quot;</span><span class="s1">xlink:href</span><span class="s3">\&quot;</span><span class="s1">, `#${sanitizedLink}`);</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">drawEmbeddedImage</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var getNoteRect = /* @__PURE__ */ __name(() =&gt; {</span><span class="s3">\n  </span><span class="s1">const noteRectData = {</span><span class="s3">\n    </span><span class="s1">x: 0,</span><span class="s3">\n    </span><span class="s1">y: 0,</span><span class="s3">\n    </span><span class="s1">width: 100,</span><span class="s3">\n    </span><span class="s1">height: 100,</span><span class="s3">\n    </span><span class="s1">fill: </span><span class="s3">\&quot;</span><span class="s1">#EDF2AE</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n    </span><span class="s1">stroke: </span><span class="s3">\&quot;</span><span class="s1">#666</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n    </span><span class="s1">anchor: </span><span class="s3">\&quot;</span><span class="s1">start</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n    </span><span class="s1">rx: 0,</span><span class="s3">\n    </span><span class="s1">ry: 0</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">return noteRectData;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">getNoteRect</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var getTextObj = /* @__PURE__ */ __name(() =&gt; {</span><span class="s3">\n  </span><span class="s1">const testObject = {</span><span class="s3">\n    </span><span class="s1">x: 0,</span><span class="s3">\n    </span><span class="s1">y: 0,</span><span class="s3">\n    </span><span class="s1">width: 100,</span><span class="s3">\n    </span><span class="s1">height: 100,</span><span class="s3">\n    \&quot;</span><span class="s1">text-anchor</span><span class="s3">\&quot;</span><span class="s1">: </span><span class="s3">\&quot;</span><span class="s1">start</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n    </span><span class="s1">style: </span><span class="s3">\&quot;</span><span class="s1">#666</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n    </span><span class="s1">textMargin: 0,</span><span class="s3">\n    </span><span class="s1">rx: 0,</span><span class="s3">\n    </span><span class="s1">ry: 0,</span><span class="s3">\n    </span><span class="s1">tspan: true</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">return testObject;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">getTextObj</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n\n</span><span class="s1">export {</span><span class="s3">\n  </span><span class="s1">drawRect,</span><span class="s3">\n  </span><span class="s1">drawBackgroundRect,</span><span class="s3">\n  </span><span class="s1">drawText,</span><span class="s3">\n  </span><span class="s1">drawImage,</span><span class="s3">\n  </span><span class="s1">drawEmbeddedImage,</span><span class="s3">\n  </span><span class="s1">getNoteRect,</span><span class="s3">\n  </span><span class="s1">getTextObj</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">,</span><span class="s1">&quot;import {</span><span class="s3">\n  </span><span class="s1">__name</span><span class="s3">\n</span><span class="s1">} from </span><span class="s3">\&quot;</span><span class="s1">./chunk-YTJNT7DU.mjs</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n\n</span><span class="s1">// src/utils/imperativeState.ts</span><span class="s3">\n</span><span class="s1">var ImperativeState = class {</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* @param init - Function that creates the default state.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">constructor(init) {</span><span class="s3">\n    </span><span class="s1">this.init = init;</span><span class="s3">\n    </span><span class="s1">this.records = this.init();</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">static {</span><span class="s3">\n    </span><span class="s1">__name(this, </span><span class="s3">\&quot;</span><span class="s1">ImperativeState</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">reset() {</span><span class="s3">\n    </span><span class="s1">this.records = this.init();</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n\n</span><span class="s1">export {</span><span class="s3">\n  </span><span class="s1">ImperativeState</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">,</span><span class="s1">&quot;import {</span><span class="s3">\n  </span><span class="s1">drawBackgroundRect,</span><span class="s3">\n  </span><span class="s1">drawEmbeddedImage,</span><span class="s3">\n  </span><span class="s1">drawImage,</span><span class="s3">\n  </span><span class="s1">drawRect,</span><span class="s3">\n  </span><span class="s1">getNoteRect,</span><span class="s3">\n  </span><span class="s1">getTextObj</span><span class="s3">\n</span><span class="s1">} from </span><span class="s3">\&quot;</span><span class="s1">./chunk-D6G4REZN.mjs</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">ImperativeState</span><span class="s3">\n</span><span class="s1">} from </span><span class="s3">\&quot;</span><span class="s1">./chunk-XZIHB7SX.mjs</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">ZERO_WIDTH_SPACE,</span><span class="s3">\n  </span><span class="s1">parseFontSize,</span><span class="s3">\n  </span><span class="s1">utils_default</span><span class="s3">\n</span><span class="s1">} from </span><span class="s3">\&quot;</span><span class="s1">./chunk-O4NI6UNU.mjs</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">__name,</span><span class="s3">\n  </span><span class="s1">assignWithDepth_default,</span><span class="s3">\n  </span><span class="s1">calculateMathMLDimensions,</span><span class="s3">\n  </span><span class="s1">clear,</span><span class="s3">\n  </span><span class="s1">common_default,</span><span class="s3">\n  </span><span class="s1">configureSvgSize,</span><span class="s3">\n  </span><span class="s1">getAccDescription,</span><span class="s3">\n  </span><span class="s1">getAccTitle,</span><span class="s3">\n  </span><span class="s1">getConfig,</span><span class="s3">\n  </span><span class="s1">getConfig2,</span><span class="s3">\n  </span><span class="s1">getDiagramTitle,</span><span class="s3">\n  </span><span class="s1">hasKatex,</span><span class="s3">\n  </span><span class="s1">log,</span><span class="s3">\n  </span><span class="s1">renderKatex,</span><span class="s3">\n  </span><span class="s1">sanitizeText,</span><span class="s3">\n  </span><span class="s1">setAccDescription,</span><span class="s3">\n  </span><span class="s1">setAccTitle,</span><span class="s3">\n  </span><span class="s1">setConfig2 as setConfig,</span><span class="s3">\n  </span><span class="s1">setDiagramTitle</span><span class="s3">\n</span><span class="s1">} from </span><span class="s3">\&quot;</span><span class="s1">./chunk-YTJNT7DU.mjs</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n\n</span><span class="s1">// src/diagrams/sequence/parser/sequenceDiagram.jison</span><span class="s3">\n</span><span class="s1">var parser = function() {</span><span class="s3">\n  </span><span class="s1">var o = /* @__PURE__ */ __name(function(k, v, o2, l) {</span><span class="s3">\n    </span><span class="s1">for (o2 = o2 || {}, l = k.length; l--; o2[k[l]] = v) ;</span><span class="s3">\n    </span><span class="s1">return o2;</span><span class="s3">\n  </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">o</span><span class="s3">\&quot;</span><span class="s1">), $V0 = [1, 2], $V1 = [1, 3], $V2 = [1, 4], $V3 = [2, 4], $V4 = [1, 9], $V5 = [1, 11], $V6 = [1, 13], $V7 = [1, 14], $V8 = [1, 16], $V9 = [1, 17], $Va = [1, 18], $Vb = [1, 24], $Vc = [1, 25], $Vd = [1, 26], $Ve = [1, 27], $Vf = [1, 28], $Vg = [1, 29], $Vh = [1, 30], $Vi = [1, 31], $Vj = [1, 32], $Vk = [1, 33], $Vl = [1, 34], $Vm = [1, 35], $Vn = [1, 36], $Vo = [1, 37], $Vp = [1, 38], $Vq = [1, 39], $Vr = [1, 41], $Vs = [1, 42], $Vt = [1, 43], $Vu = [1, 44], $Vv = [1, 45], $Vw = [1, 46], $Vx = [1, 4, 5, 13, 14, 16, 18, 21, 23, 29, 30, 31, 33, 35, 36, 37, 38, 39, 41, 43, 44, 46, 47, 48, 49, 50, 52, 53, 54, 59, 60, 61, 62, 70], $Vy = [4, 5, 16, 50, 52, 53], $Vz = [4, 5, 13, 14, 16, 18, 21, 23, 29, 30, 31, 33, 35, 36, 37, 38, 39, 41, 43, 44, 46, 50, 52, 53, 54, 59, 60, 61, 62, 70], $VA = [4, 5, 13, 14, 16, 18, 21, 23, 29, 30, 31, 33, 35, 36, 37, 38, 39, 41, 43, 44, 46, 49, 50, 52, 53, 54, 59, 60, 61, 62, 70], $VB = [4, 5, 13, 14, 16, 18, 21, 23, 29, 30, 31, 33, 35, 36, 37, 38, 39, 41, 43, 44, 46, 48, 50, 52, 53, 54, 59, 60, 61, 62, 70], $VC = [4, 5, 13, 14, 16, 18, 21, 23, 29, 30, 31, 33, 35, 36, 37, 38, 39, 41, 43, 44, 46, 47, 50, 52, 53, 54, 59, 60, 61, 62, 70], $VD = [68, 69, 70], $VE = [1, 122];</span><span class="s3">\n  </span><span class="s1">var parser2 = {</span><span class="s3">\n    </span><span class="s1">trace: /* @__PURE__ */ __name(function trace() {</span><span class="s3">\n    </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">trace</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n    </span><span class="s1">yy: {},</span><span class="s3">\n    </span><span class="s1">symbols_: { </span><span class="s3">\&quot;</span><span class="s1">error</span><span class="s3">\&quot;</span><span class="s1">: 2, </span><span class="s3">\&quot;</span><span class="s1">start</span><span class="s3">\&quot;</span><span class="s1">: 3, </span><span class="s3">\&quot;</span><span class="s1">SPACE</span><span class="s3">\&quot;</span><span class="s1">: 4, </span><span class="s3">\&quot;</span><span class="s1">NEWLINE</span><span class="s3">\&quot;</span><span class="s1">: 5, </span><span class="s3">\&quot;</span><span class="s1">SD</span><span class="s3">\&quot;</span><span class="s1">: 6, </span><span class="s3">\&quot;</span><span class="s1">document</span><span class="s3">\&quot;</span><span class="s1">: 7, </span><span class="s3">\&quot;</span><span class="s1">line</span><span class="s3">\&quot;</span><span class="s1">: 8, </span><span class="s3">\&quot;</span><span class="s1">statement</span><span class="s3">\&quot;</span><span class="s1">: 9, </span><span class="s3">\&quot;</span><span class="s1">box_section</span><span class="s3">\&quot;</span><span class="s1">: 10, </span><span class="s3">\&quot;</span><span class="s1">box_line</span><span class="s3">\&quot;</span><span class="s1">: 11, </span><span class="s3">\&quot;</span><span class="s1">participant_statement</span><span class="s3">\&quot;</span><span class="s1">: 12, </span><span class="s3">\&quot;</span><span class="s1">create</span><span class="s3">\&quot;</span><span class="s1">: 13, </span><span class="s3">\&quot;</span><span class="s1">box</span><span class="s3">\&quot;</span><span class="s1">: 14, </span><span class="s3">\&quot;</span><span class="s1">restOfLine</span><span class="s3">\&quot;</span><span class="s1">: 15, </span><span class="s3">\&quot;</span><span class="s1">end</span><span class="s3">\&quot;</span><span class="s1">: 16, </span><span class="s3">\&quot;</span><span class="s1">signal</span><span class="s3">\&quot;</span><span class="s1">: 17, </span><span class="s3">\&quot;</span><span class="s1">autonumber</span><span class="s3">\&quot;</span><span class="s1">: 18, </span><span class="s3">\&quot;</span><span class="s1">NUM</span><span class="s3">\&quot;</span><span class="s1">: 19, </span><span class="s3">\&quot;</span><span class="s1">off</span><span class="s3">\&quot;</span><span class="s1">: 20, </span><span class="s3">\&quot;</span><span class="s1">activate</span><span class="s3">\&quot;</span><span class="s1">: 21, </span><span class="s3">\&quot;</span><span class="s1">actor</span><span class="s3">\&quot;</span><span class="s1">: 22, </span><span class="s3">\&quot;</span><span class="s1">deactivate</span><span class="s3">\&quot;</span><span class="s1">: 23, </span><span class="s3">\&quot;</span><span class="s1">note_statement</span><span class="s3">\&quot;</span><span class="s1">: 24, </span><span class="s3">\&quot;</span><span class="s1">links_statement</span><span class="s3">\&quot;</span><span class="s1">: 25, </span><span class="s3">\&quot;</span><span class="s1">link_statement</span><span class="s3">\&quot;</span><span class="s1">: 26, </span><span class="s3">\&quot;</span><span class="s1">properties_statement</span><span class="s3">\&quot;</span><span class="s1">: 27, </span><span class="s3">\&quot;</span><span class="s1">details_statement</span><span class="s3">\&quot;</span><span class="s1">: 28, </span><span class="s3">\&quot;</span><span class="s1">title</span><span class="s3">\&quot;</span><span class="s1">: 29, </span><span class="s3">\&quot;</span><span class="s1">legacy_title</span><span class="s3">\&quot;</span><span class="s1">: 30, </span><span class="s3">\&quot;</span><span class="s1">acc_title</span><span class="s3">\&quot;</span><span class="s1">: 31, </span><span class="s3">\&quot;</span><span class="s1">acc_title_value</span><span class="s3">\&quot;</span><span class="s1">: 32, </span><span class="s3">\&quot;</span><span class="s1">acc_descr</span><span class="s3">\&quot;</span><span class="s1">: 33, </span><span class="s3">\&quot;</span><span class="s1">acc_descr_value</span><span class="s3">\&quot;</span><span class="s1">: 34, </span><span class="s3">\&quot;</span><span class="s1">acc_descr_multiline_value</span><span class="s3">\&quot;</span><span class="s1">: 35, </span><span class="s3">\&quot;</span><span class="s1">loop</span><span class="s3">\&quot;</span><span class="s1">: 36, </span><span class="s3">\&quot;</span><span class="s1">rect</span><span class="s3">\&quot;</span><span class="s1">: 37, </span><span class="s3">\&quot;</span><span class="s1">opt</span><span class="s3">\&quot;</span><span class="s1">: 38, </span><span class="s3">\&quot;</span><span class="s1">alt</span><span class="s3">\&quot;</span><span class="s1">: 39, </span><span class="s3">\&quot;</span><span class="s1">else_sections</span><span class="s3">\&quot;</span><span class="s1">: 40, </span><span class="s3">\&quot;</span><span class="s1">par</span><span class="s3">\&quot;</span><span class="s1">: 41, </span><span class="s3">\&quot;</span><span class="s1">par_sections</span><span class="s3">\&quot;</span><span class="s1">: 42, </span><span class="s3">\&quot;</span><span class="s1">par_over</span><span class="s3">\&quot;</span><span class="s1">: 43, </span><span class="s3">\&quot;</span><span class="s1">critical</span><span class="s3">\&quot;</span><span class="s1">: 44, </span><span class="s3">\&quot;</span><span class="s1">option_sections</span><span class="s3">\&quot;</span><span class="s1">: 45, </span><span class="s3">\&quot;</span><span class="s1">break</span><span class="s3">\&quot;</span><span class="s1">: 46, </span><span class="s3">\&quot;</span><span class="s1">option</span><span class="s3">\&quot;</span><span class="s1">: 47, </span><span class="s3">\&quot;</span><span class="s1">and</span><span class="s3">\&quot;</span><span class="s1">: 48, </span><span class="s3">\&quot;</span><span class="s1">else</span><span class="s3">\&quot;</span><span class="s1">: 49, </span><span class="s3">\&quot;</span><span class="s1">participant</span><span class="s3">\&quot;</span><span class="s1">: 50, </span><span class="s3">\&quot;</span><span class="s1">AS</span><span class="s3">\&quot;</span><span class="s1">: 51, </span><span class="s3">\&quot;</span><span class="s1">participant_actor</span><span class="s3">\&quot;</span><span class="s1">: 52, </span><span class="s3">\&quot;</span><span class="s1">destroy</span><span class="s3">\&quot;</span><span class="s1">: 53, </span><span class="s3">\&quot;</span><span class="s1">note</span><span class="s3">\&quot;</span><span class="s1">: 54, </span><span class="s3">\&quot;</span><span class="s1">placement</span><span class="s3">\&quot;</span><span class="s1">: 55, </span><span class="s3">\&quot;</span><span class="s1">text2</span><span class="s3">\&quot;</span><span class="s1">: 56, </span><span class="s3">\&quot;</span><span class="s1">over</span><span class="s3">\&quot;</span><span class="s1">: 57, </span><span class="s3">\&quot;</span><span class="s1">actor_pair</span><span class="s3">\&quot;</span><span class="s1">: 58, </span><span class="s3">\&quot;</span><span class="s1">links</span><span class="s3">\&quot;</span><span class="s1">: 59, </span><span class="s3">\&quot;</span><span class="s1">link</span><span class="s3">\&quot;</span><span class="s1">: 60, </span><span class="s3">\&quot;</span><span class="s1">properties</span><span class="s3">\&quot;</span><span class="s1">: 61, </span><span class="s3">\&quot;</span><span class="s1">details</span><span class="s3">\&quot;</span><span class="s1">: 62, </span><span class="s3">\&quot;</span><span class="s1">spaceList</span><span class="s3">\&quot;</span><span class="s1">: 63, </span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">: 64, </span><span class="s3">\&quot;</span><span class="s1">left_of</span><span class="s3">\&quot;</span><span class="s1">: 65, </span><span class="s3">\&quot;</span><span class="s1">right_of</span><span class="s3">\&quot;</span><span class="s1">: 66, </span><span class="s3">\&quot;</span><span class="s1">signaltype</span><span class="s3">\&quot;</span><span class="s1">: 67, </span><span class="s3">\&quot;</span><span class="s1">+</span><span class="s3">\&quot;</span><span class="s1">: 68, </span><span class="s3">\&quot;</span><span class="s1">-</span><span class="s3">\&quot;</span><span class="s1">: 69, </span><span class="s3">\&quot;</span><span class="s1">ACTOR</span><span class="s3">\&quot;</span><span class="s1">: 70, </span><span class="s3">\&quot;</span><span class="s1">SOLID_OPEN_ARROW</span><span class="s3">\&quot;</span><span class="s1">: 71, </span><span class="s3">\&quot;</span><span class="s1">DOTTED_OPEN_ARROW</span><span class="s3">\&quot;</span><span class="s1">: 72, </span><span class="s3">\&quot;</span><span class="s1">SOLID_ARROW</span><span class="s3">\&quot;</span><span class="s1">: 73, </span><span class="s3">\&quot;</span><span class="s1">BIDIRECTIONAL_SOLID_ARROW</span><span class="s3">\&quot;</span><span class="s1">: 74, </span><span class="s3">\&quot;</span><span class="s1">DOTTED_ARROW</span><span class="s3">\&quot;</span><span class="s1">: 75, </span><span class="s3">\&quot;</span><span class="s1">BIDIRECTIONAL_DOTTED_ARROW</span><span class="s3">\&quot;</span><span class="s1">: 76, </span><span class="s3">\&quot;</span><span class="s1">SOLID_CROSS</span><span class="s3">\&quot;</span><span class="s1">: 77, </span><span class="s3">\&quot;</span><span class="s1">DOTTED_CROSS</span><span class="s3">\&quot;</span><span class="s1">: 78, </span><span class="s3">\&quot;</span><span class="s1">SOLID_POINT</span><span class="s3">\&quot;</span><span class="s1">: 79, </span><span class="s3">\&quot;</span><span class="s1">DOTTED_POINT</span><span class="s3">\&quot;</span><span class="s1">: 80, </span><span class="s3">\&quot;</span><span class="s1">TXT</span><span class="s3">\&quot;</span><span class="s1">: 81, </span><span class="s3">\&quot;</span><span class="s1">$accept</span><span class="s3">\&quot;</span><span class="s1">: 0, </span><span class="s3">\&quot;</span><span class="s1">$end</span><span class="s3">\&quot;</span><span class="s1">: 1 },</span><span class="s3">\n    </span><span class="s1">terminals_: { 2: </span><span class="s3">\&quot;</span><span class="s1">error</span><span class="s3">\&quot;</span><span class="s1">, 4: </span><span class="s3">\&quot;</span><span class="s1">SPACE</span><span class="s3">\&quot;</span><span class="s1">, 5: </span><span class="s3">\&quot;</span><span class="s1">NEWLINE</span><span class="s3">\&quot;</span><span class="s1">, 6: </span><span class="s3">\&quot;</span><span class="s1">SD</span><span class="s3">\&quot;</span><span class="s1">, 13: </span><span class="s3">\&quot;</span><span class="s1">create</span><span class="s3">\&quot;</span><span class="s1">, 14: </span><span class="s3">\&quot;</span><span class="s1">box</span><span class="s3">\&quot;</span><span class="s1">, 15: </span><span class="s3">\&quot;</span><span class="s1">restOfLine</span><span class="s3">\&quot;</span><span class="s1">, 16: </span><span class="s3">\&quot;</span><span class="s1">end</span><span class="s3">\&quot;</span><span class="s1">, 18: </span><span class="s3">\&quot;</span><span class="s1">autonumber</span><span class="s3">\&quot;</span><span class="s1">, 19: </span><span class="s3">\&quot;</span><span class="s1">NUM</span><span class="s3">\&quot;</span><span class="s1">, 20: </span><span class="s3">\&quot;</span><span class="s1">off</span><span class="s3">\&quot;</span><span class="s1">, 21: </span><span class="s3">\&quot;</span><span class="s1">activate</span><span class="s3">\&quot;</span><span class="s1">, 23: </span><span class="s3">\&quot;</span><span class="s1">deactivate</span><span class="s3">\&quot;</span><span class="s1">, 29: </span><span class="s3">\&quot;</span><span class="s1">title</span><span class="s3">\&quot;</span><span class="s1">, 30: </span><span class="s3">\&quot;</span><span class="s1">legacy_title</span><span class="s3">\&quot;</span><span class="s1">, 31: </span><span class="s3">\&quot;</span><span class="s1">acc_title</span><span class="s3">\&quot;</span><span class="s1">, 32: </span><span class="s3">\&quot;</span><span class="s1">acc_title_value</span><span class="s3">\&quot;</span><span class="s1">, 33: </span><span class="s3">\&quot;</span><span class="s1">acc_descr</span><span class="s3">\&quot;</span><span class="s1">, 34: </span><span class="s3">\&quot;</span><span class="s1">acc_descr_value</span><span class="s3">\&quot;</span><span class="s1">, 35: </span><span class="s3">\&quot;</span><span class="s1">acc_descr_multiline_value</span><span class="s3">\&quot;</span><span class="s1">, 36: </span><span class="s3">\&quot;</span><span class="s1">loop</span><span class="s3">\&quot;</span><span class="s1">, 37: </span><span class="s3">\&quot;</span><span class="s1">rect</span><span class="s3">\&quot;</span><span class="s1">, 38: </span><span class="s3">\&quot;</span><span class="s1">opt</span><span class="s3">\&quot;</span><span class="s1">, 39: </span><span class="s3">\&quot;</span><span class="s1">alt</span><span class="s3">\&quot;</span><span class="s1">, 41: </span><span class="s3">\&quot;</span><span class="s1">par</span><span class="s3">\&quot;</span><span class="s1">, 43: </span><span class="s3">\&quot;</span><span class="s1">par_over</span><span class="s3">\&quot;</span><span class="s1">, 44: </span><span class="s3">\&quot;</span><span class="s1">critical</span><span class="s3">\&quot;</span><span class="s1">, 46: </span><span class="s3">\&quot;</span><span class="s1">break</span><span class="s3">\&quot;</span><span class="s1">, 47: </span><span class="s3">\&quot;</span><span class="s1">option</span><span class="s3">\&quot;</span><span class="s1">, 48: </span><span class="s3">\&quot;</span><span class="s1">and</span><span class="s3">\&quot;</span><span class="s1">, 49: </span><span class="s3">\&quot;</span><span class="s1">else</span><span class="s3">\&quot;</span><span class="s1">, 50: </span><span class="s3">\&quot;</span><span class="s1">participant</span><span class="s3">\&quot;</span><span class="s1">, 51: </span><span class="s3">\&quot;</span><span class="s1">AS</span><span class="s3">\&quot;</span><span class="s1">, 52: </span><span class="s3">\&quot;</span><span class="s1">participant_actor</span><span class="s3">\&quot;</span><span class="s1">, 53: </span><span class="s3">\&quot;</span><span class="s1">destroy</span><span class="s3">\&quot;</span><span class="s1">, 54: </span><span class="s3">\&quot;</span><span class="s1">note</span><span class="s3">\&quot;</span><span class="s1">, 57: </span><span class="s3">\&quot;</span><span class="s1">over</span><span class="s3">\&quot;</span><span class="s1">, 59: </span><span class="s3">\&quot;</span><span class="s1">links</span><span class="s3">\&quot;</span><span class="s1">, 60: </span><span class="s3">\&quot;</span><span class="s1">link</span><span class="s3">\&quot;</span><span class="s1">, 61: </span><span class="s3">\&quot;</span><span class="s1">properties</span><span class="s3">\&quot;</span><span class="s1">, 62: </span><span class="s3">\&quot;</span><span class="s1">details</span><span class="s3">\&quot;</span><span class="s1">, 64: </span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">, 65: </span><span class="s3">\&quot;</span><span class="s1">left_of</span><span class="s3">\&quot;</span><span class="s1">, 66: </span><span class="s3">\&quot;</span><span class="s1">right_of</span><span class="s3">\&quot;</span><span class="s1">, 68: </span><span class="s3">\&quot;</span><span class="s1">+</span><span class="s3">\&quot;</span><span class="s1">, 69: </span><span class="s3">\&quot;</span><span class="s1">-</span><span class="s3">\&quot;</span><span class="s1">, 70: </span><span class="s3">\&quot;</span><span class="s1">ACTOR</span><span class="s3">\&quot;</span><span class="s1">, 71: </span><span class="s3">\&quot;</span><span class="s1">SOLID_OPEN_ARROW</span><span class="s3">\&quot;</span><span class="s1">, 72: </span><span class="s3">\&quot;</span><span class="s1">DOTTED_OPEN_ARROW</span><span class="s3">\&quot;</span><span class="s1">, 73: </span><span class="s3">\&quot;</span><span class="s1">SOLID_ARROW</span><span class="s3">\&quot;</span><span class="s1">, 74: </span><span class="s3">\&quot;</span><span class="s1">BIDIRECTIONAL_SOLID_ARROW</span><span class="s3">\&quot;</span><span class="s1">, 75: </span><span class="s3">\&quot;</span><span class="s1">DOTTED_ARROW</span><span class="s3">\&quot;</span><span class="s1">, 76: </span><span class="s3">\&quot;</span><span class="s1">BIDIRECTIONAL_DOTTED_ARROW</span><span class="s3">\&quot;</span><span class="s1">, 77: </span><span class="s3">\&quot;</span><span class="s1">SOLID_CROSS</span><span class="s3">\&quot;</span><span class="s1">, 78: </span><span class="s3">\&quot;</span><span class="s1">DOTTED_CROSS</span><span class="s3">\&quot;</span><span class="s1">, 79: </span><span class="s3">\&quot;</span><span class="s1">SOLID_POINT</span><span class="s3">\&quot;</span><span class="s1">, 80: </span><span class="s3">\&quot;</span><span class="s1">DOTTED_POINT</span><span class="s3">\&quot;</span><span class="s1">, 81: </span><span class="s3">\&quot;</span><span class="s1">TXT</span><span class="s3">\&quot; </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">productions_: [0, [3, 2], [3, 2], [3, 2], [7, 0], [7, 2], [8, 2], [8, 1], [8, 1], [10, 0], [10, 2], [11, 2], [11, 1], [11, 1], [9, 1], [9, 2], [9, 4], [9, 2], [9, 4], [9, 3], [9, 3], [9, 2], [9, 3], [9, 3], [9, 2], [9, 2], [9, 2], [9, 2], [9, 2], [9, 1], [9, 1], [9, 2], [9, 2], [9, 1], [9, 4], [9, 4], [9, 4], [9, 4], [9, 4], [9, 4], [9, 4], [9, 4], [45, 1], [45, 4], [42, 1], [42, 4], [40, 1], [40, 4], [12, 5], [12, 3], [12, 5], [12, 3], [12, 3], [24, 4], [24, 4], [25, 3], [26, 3], [27, 3], [28, 3], [63, 2], [63, 1], [58, 3], [58, 1], [55, 1], [55, 1], [17, 5], [17, 5], [17, 4], [22, 1], [67, 1], [67, 1], [67, 1], [67, 1], [67, 1], [67, 1], [67, 1], [67, 1], [67, 1], [67, 1], [56, 1]],</span><span class="s3">\n    </span><span class="s1">performAction: /* @__PURE__ */ __name(function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$) {</span><span class="s3">\n      </span><span class="s1">var $0 = $$.length - 1;</span><span class="s3">\n      </span><span class="s1">switch (yystate) {</span><span class="s3">\n        </span><span class="s1">case 3:</span><span class="s3">\n          </span><span class="s1">yy.apply($$[$0]);</span><span class="s3">\n          </span><span class="s1">return $$[$0];</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 4:</span><span class="s3">\n        </span><span class="s1">case 9:</span><span class="s3">\n          </span><span class="s1">this.$ = [];</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 5:</span><span class="s3">\n        </span><span class="s1">case 10:</span><span class="s3">\n          </span><span class="s1">$$[$0 - 1].push($$[$0]);</span><span class="s3">\n          </span><span class="s1">this.$ = $$[$0 - 1];</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 6:</span><span class="s3">\n        </span><span class="s1">case 7:</span><span class="s3">\n        </span><span class="s1">case 11:</span><span class="s3">\n        </span><span class="s1">case 12:</span><span class="s3">\n          </span><span class="s1">this.$ = $$[$0];</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 8:</span><span class="s3">\n        </span><span class="s1">case 13:</span><span class="s3">\n          </span><span class="s1">this.$ = [];</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 15:</span><span class="s3">\n          </span><span class="s1">$$[$0].type = </span><span class="s3">\&quot;</span><span class="s1">createParticipant</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n          </span><span class="s1">this.$ = $$[$0];</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 16:</span><span class="s3">\n          </span><span class="s1">$$[$0 - 1].unshift({ type: </span><span class="s3">\&quot;</span><span class="s1">boxStart</span><span class="s3">\&quot;</span><span class="s1">, boxData: yy.parseBoxData($$[$0 - 2]) });</span><span class="s3">\n          </span><span class="s1">$$[$0 - 1].push({ type: </span><span class="s3">\&quot;</span><span class="s1">boxEnd</span><span class="s3">\&quot;</span><span class="s1">, boxText: $$[$0 - 2] });</span><span class="s3">\n          </span><span class="s1">this.$ = $$[$0 - 1];</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 18:</span><span class="s3">\n          </span><span class="s1">this.$ = { type: </span><span class="s3">\&quot;</span><span class="s1">sequenceIndex</span><span class="s3">\&quot;</span><span class="s1">, sequenceIndex: Number($$[$0 - 2]), sequenceIndexStep: Number($$[$0 - 1]), sequenceVisible: true, signalType: yy.LINETYPE.AUTONUMBER };</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 19:</span><span class="s3">\n          </span><span class="s1">this.$ = { type: </span><span class="s3">\&quot;</span><span class="s1">sequenceIndex</span><span class="s3">\&quot;</span><span class="s1">, sequenceIndex: Number($$[$0 - 1]), sequenceIndexStep: 1, sequenceVisible: true, signalType: yy.LINETYPE.AUTONUMBER };</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 20:</span><span class="s3">\n          </span><span class="s1">this.$ = { type: </span><span class="s3">\&quot;</span><span class="s1">sequenceIndex</span><span class="s3">\&quot;</span><span class="s1">, sequenceVisible: false, signalType: yy.LINETYPE.AUTONUMBER };</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 21:</span><span class="s3">\n          </span><span class="s1">this.$ = { type: </span><span class="s3">\&quot;</span><span class="s1">sequenceIndex</span><span class="s3">\&quot;</span><span class="s1">, sequenceVisible: true, signalType: yy.LINETYPE.AUTONUMBER };</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 22:</span><span class="s3">\n          </span><span class="s1">this.$ = { type: </span><span class="s3">\&quot;</span><span class="s1">activeStart</span><span class="s3">\&quot;</span><span class="s1">, signalType: yy.LINETYPE.ACTIVE_START, actor: $$[$0 - 1].actor };</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 23:</span><span class="s3">\n          </span><span class="s1">this.$ = { type: </span><span class="s3">\&quot;</span><span class="s1">activeEnd</span><span class="s3">\&quot;</span><span class="s1">, signalType: yy.LINETYPE.ACTIVE_END, actor: $$[$0 - 1].actor };</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 29:</span><span class="s3">\n          </span><span class="s1">yy.setDiagramTitle($$[$0].substring(6));</span><span class="s3">\n          </span><span class="s1">this.$ = $$[$0].substring(6);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 30:</span><span class="s3">\n          </span><span class="s1">yy.setDiagramTitle($$[$0].substring(7));</span><span class="s3">\n          </span><span class="s1">this.$ = $$[$0].substring(7);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 31:</span><span class="s3">\n          </span><span class="s1">this.$ = $$[$0].trim();</span><span class="s3">\n          </span><span class="s1">yy.setAccTitle(this.$);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 32:</span><span class="s3">\n        </span><span class="s1">case 33:</span><span class="s3">\n          </span><span class="s1">this.$ = $$[$0].trim();</span><span class="s3">\n          </span><span class="s1">yy.setAccDescription(this.$);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 34:</span><span class="s3">\n          </span><span class="s1">$$[$0 - 1].unshift({ type: </span><span class="s3">\&quot;</span><span class="s1">loopStart</span><span class="s3">\&quot;</span><span class="s1">, loopText: yy.parseMessage($$[$0 - 2]), signalType: yy.LINETYPE.LOOP_START });</span><span class="s3">\n          </span><span class="s1">$$[$0 - 1].push({ type: </span><span class="s3">\&quot;</span><span class="s1">loopEnd</span><span class="s3">\&quot;</span><span class="s1">, loopText: $$[$0 - 2], signalType: yy.LINETYPE.LOOP_END });</span><span class="s3">\n          </span><span class="s1">this.$ = $$[$0 - 1];</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 35:</span><span class="s3">\n          </span><span class="s1">$$[$0 - 1].unshift({ type: </span><span class="s3">\&quot;</span><span class="s1">rectStart</span><span class="s3">\&quot;</span><span class="s1">, color: yy.parseMessage($$[$0 - 2]), signalType: yy.LINETYPE.RECT_START });</span><span class="s3">\n          </span><span class="s1">$$[$0 - 1].push({ type: </span><span class="s3">\&quot;</span><span class="s1">rectEnd</span><span class="s3">\&quot;</span><span class="s1">, color: yy.parseMessage($$[$0 - 2]), signalType: yy.LINETYPE.RECT_END });</span><span class="s3">\n          </span><span class="s1">this.$ = $$[$0 - 1];</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 36:</span><span class="s3">\n          </span><span class="s1">$$[$0 - 1].unshift({ type: </span><span class="s3">\&quot;</span><span class="s1">optStart</span><span class="s3">\&quot;</span><span class="s1">, optText: yy.parseMessage($$[$0 - 2]), signalType: yy.LINETYPE.OPT_START });</span><span class="s3">\n          </span><span class="s1">$$[$0 - 1].push({ type: </span><span class="s3">\&quot;</span><span class="s1">optEnd</span><span class="s3">\&quot;</span><span class="s1">, optText: yy.parseMessage($$[$0 - 2]), signalType: yy.LINETYPE.OPT_END });</span><span class="s3">\n          </span><span class="s1">this.$ = $$[$0 - 1];</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 37:</span><span class="s3">\n          </span><span class="s1">$$[$0 - 1].unshift({ type: </span><span class="s3">\&quot;</span><span class="s1">altStart</span><span class="s3">\&quot;</span><span class="s1">, altText: yy.parseMessage($$[$0 - 2]), signalType: yy.LINETYPE.ALT_START });</span><span class="s3">\n          </span><span class="s1">$$[$0 - 1].push({ type: </span><span class="s3">\&quot;</span><span class="s1">altEnd</span><span class="s3">\&quot;</span><span class="s1">, signalType: yy.LINETYPE.ALT_END });</span><span class="s3">\n          </span><span class="s1">this.$ = $$[$0 - 1];</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 38:</span><span class="s3">\n          </span><span class="s1">$$[$0 - 1].unshift({ type: </span><span class="s3">\&quot;</span><span class="s1">parStart</span><span class="s3">\&quot;</span><span class="s1">, parText: yy.parseMessage($$[$0 - 2]), signalType: yy.LINETYPE.PAR_START });</span><span class="s3">\n          </span><span class="s1">$$[$0 - 1].push({ type: </span><span class="s3">\&quot;</span><span class="s1">parEnd</span><span class="s3">\&quot;</span><span class="s1">, signalType: yy.LINETYPE.PAR_END });</span><span class="s3">\n          </span><span class="s1">this.$ = $$[$0 - 1];</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 39:</span><span class="s3">\n          </span><span class="s1">$$[$0 - 1].unshift({ type: </span><span class="s3">\&quot;</span><span class="s1">parStart</span><span class="s3">\&quot;</span><span class="s1">, parText: yy.parseMessage($$[$0 - 2]), signalType: yy.LINETYPE.PAR_OVER_START });</span><span class="s3">\n          </span><span class="s1">$$[$0 - 1].push({ type: </span><span class="s3">\&quot;</span><span class="s1">parEnd</span><span class="s3">\&quot;</span><span class="s1">, signalType: yy.LINETYPE.PAR_END });</span><span class="s3">\n          </span><span class="s1">this.$ = $$[$0 - 1];</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 40:</span><span class="s3">\n          </span><span class="s1">$$[$0 - 1].unshift({ type: </span><span class="s3">\&quot;</span><span class="s1">criticalStart</span><span class="s3">\&quot;</span><span class="s1">, criticalText: yy.parseMessage($$[$0 - 2]), signalType: yy.LINETYPE.CRITICAL_START });</span><span class="s3">\n          </span><span class="s1">$$[$0 - 1].push({ type: </span><span class="s3">\&quot;</span><span class="s1">criticalEnd</span><span class="s3">\&quot;</span><span class="s1">, signalType: yy.LINETYPE.CRITICAL_END });</span><span class="s3">\n          </span><span class="s1">this.$ = $$[$0 - 1];</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 41:</span><span class="s3">\n          </span><span class="s1">$$[$0 - 1].unshift({ type: </span><span class="s3">\&quot;</span><span class="s1">breakStart</span><span class="s3">\&quot;</span><span class="s1">, breakText: yy.parseMessage($$[$0 - 2]), signalType: yy.LINETYPE.BREAK_START });</span><span class="s3">\n          </span><span class="s1">$$[$0 - 1].push({ type: </span><span class="s3">\&quot;</span><span class="s1">breakEnd</span><span class="s3">\&quot;</span><span class="s1">, optText: yy.parseMessage($$[$0 - 2]), signalType: yy.LINETYPE.BREAK_END });</span><span class="s3">\n          </span><span class="s1">this.$ = $$[$0 - 1];</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 43:</span><span class="s3">\n          </span><span class="s1">this.$ = $$[$0 - 3].concat([{ type: </span><span class="s3">\&quot;</span><span class="s1">option</span><span class="s3">\&quot;</span><span class="s1">, optionText: yy.parseMessage($$[$0 - 1]), signalType: yy.LINETYPE.CRITICAL_OPTION }, $$[$0]]);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 45:</span><span class="s3">\n          </span><span class="s1">this.$ = $$[$0 - 3].concat([{ type: </span><span class="s3">\&quot;</span><span class="s1">and</span><span class="s3">\&quot;</span><span class="s1">, parText: yy.parseMessage($$[$0 - 1]), signalType: yy.LINETYPE.PAR_AND }, $$[$0]]);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 47:</span><span class="s3">\n          </span><span class="s1">this.$ = $$[$0 - 3].concat([{ type: </span><span class="s3">\&quot;</span><span class="s1">else</span><span class="s3">\&quot;</span><span class="s1">, altText: yy.parseMessage($$[$0 - 1]), signalType: yy.LINETYPE.ALT_ELSE }, $$[$0]]);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 48:</span><span class="s3">\n          </span><span class="s1">$$[$0 - 3].draw = </span><span class="s3">\&quot;</span><span class="s1">participant</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n          </span><span class="s1">$$[$0 - 3].type = </span><span class="s3">\&quot;</span><span class="s1">addParticipant</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n          </span><span class="s1">$$[$0 - 3].description = yy.parseMessage($$[$0 - 1]);</span><span class="s3">\n          </span><span class="s1">this.$ = $$[$0 - 3];</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 49:</span><span class="s3">\n          </span><span class="s1">$$[$0 - 1].draw = </span><span class="s3">\&quot;</span><span class="s1">participant</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n          </span><span class="s1">$$[$0 - 1].type = </span><span class="s3">\&quot;</span><span class="s1">addParticipant</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n          </span><span class="s1">this.$ = $$[$0 - 1];</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 50:</span><span class="s3">\n          </span><span class="s1">$$[$0 - 3].draw = </span><span class="s3">\&quot;</span><span class="s1">actor</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n          </span><span class="s1">$$[$0 - 3].type = </span><span class="s3">\&quot;</span><span class="s1">addParticipant</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n          </span><span class="s1">$$[$0 - 3].description = yy.parseMessage($$[$0 - 1]);</span><span class="s3">\n          </span><span class="s1">this.$ = $$[$0 - 3];</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 51:</span><span class="s3">\n          </span><span class="s1">$$[$0 - 1].draw = </span><span class="s3">\&quot;</span><span class="s1">actor</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n          </span><span class="s1">$$[$0 - 1].type = </span><span class="s3">\&quot;</span><span class="s1">addParticipant</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n          </span><span class="s1">this.$ = $$[$0 - 1];</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 52:</span><span class="s3">\n          </span><span class="s1">$$[$0 - 1].type = </span><span class="s3">\&quot;</span><span class="s1">destroyParticipant</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n          </span><span class="s1">this.$ = $$[$0 - 1];</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 53:</span><span class="s3">\n          </span><span class="s1">this.$ = [$$[$0 - 1], { type: </span><span class="s3">\&quot;</span><span class="s1">addNote</span><span class="s3">\&quot;</span><span class="s1">, placement: $$[$0 - 2], actor: $$[$0 - 1].actor, text: $$[$0] }];</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 54:</span><span class="s3">\n          </span><span class="s1">$$[$0 - 2] = [].concat($$[$0 - 1], $$[$0 - 1]).slice(0, 2);</span><span class="s3">\n          </span><span class="s1">$$[$0 - 2][0] = $$[$0 - 2][0].actor;</span><span class="s3">\n          </span><span class="s1">$$[$0 - 2][1] = $$[$0 - 2][1].actor;</span><span class="s3">\n          </span><span class="s1">this.$ = [$$[$0 - 1], { type: </span><span class="s3">\&quot;</span><span class="s1">addNote</span><span class="s3">\&quot;</span><span class="s1">, placement: yy.PLACEMENT.OVER, actor: $$[$0 - 2].slice(0, 2), text: $$[$0] }];</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 55:</span><span class="s3">\n          </span><span class="s1">this.$ = [$$[$0 - 1], { type: </span><span class="s3">\&quot;</span><span class="s1">addLinks</span><span class="s3">\&quot;</span><span class="s1">, actor: $$[$0 - 1].actor, text: $$[$0] }];</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 56:</span><span class="s3">\n          </span><span class="s1">this.$ = [$$[$0 - 1], { type: </span><span class="s3">\&quot;</span><span class="s1">addALink</span><span class="s3">\&quot;</span><span class="s1">, actor: $$[$0 - 1].actor, text: $$[$0] }];</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 57:</span><span class="s3">\n          </span><span class="s1">this.$ = [$$[$0 - 1], { type: </span><span class="s3">\&quot;</span><span class="s1">addProperties</span><span class="s3">\&quot;</span><span class="s1">, actor: $$[$0 - 1].actor, text: $$[$0] }];</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 58:</span><span class="s3">\n          </span><span class="s1">this.$ = [$$[$0 - 1], { type: </span><span class="s3">\&quot;</span><span class="s1">addDetails</span><span class="s3">\&quot;</span><span class="s1">, actor: $$[$0 - 1].actor, text: $$[$0] }];</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 61:</span><span class="s3">\n          </span><span class="s1">this.$ = [$$[$0 - 2], $$[$0]];</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 62:</span><span class="s3">\n          </span><span class="s1">this.$ = $$[$0];</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 63:</span><span class="s3">\n          </span><span class="s1">this.$ = yy.PLACEMENT.LEFTOF;</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 64:</span><span class="s3">\n          </span><span class="s1">this.$ = yy.PLACEMENT.RIGHTOF;</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 65:</span><span class="s3">\n          </span><span class="s1">this.$ = [</span><span class="s3">\n            </span><span class="s1">$$[$0 - 4],</span><span class="s3">\n            </span><span class="s1">$$[$0 - 1],</span><span class="s3">\n            </span><span class="s1">{ type: </span><span class="s3">\&quot;</span><span class="s1">addMessage</span><span class="s3">\&quot;</span><span class="s1">, from: $$[$0 - 4].actor, to: $$[$0 - 1].actor, signalType: $$[$0 - 3], msg: $$[$0], activate: true },</span><span class="s3">\n            </span><span class="s1">{ type: </span><span class="s3">\&quot;</span><span class="s1">activeStart</span><span class="s3">\&quot;</span><span class="s1">, signalType: yy.LINETYPE.ACTIVE_START, actor: $$[$0 - 1].actor }</span><span class="s3">\n          </span><span class="s1">];</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 66:</span><span class="s3">\n          </span><span class="s1">this.$ = [</span><span class="s3">\n            </span><span class="s1">$$[$0 - 4],</span><span class="s3">\n            </span><span class="s1">$$[$0 - 1],</span><span class="s3">\n            </span><span class="s1">{ type: </span><span class="s3">\&quot;</span><span class="s1">addMessage</span><span class="s3">\&quot;</span><span class="s1">, from: $$[$0 - 4].actor, to: $$[$0 - 1].actor, signalType: $$[$0 - 3], msg: $$[$0] },</span><span class="s3">\n            </span><span class="s1">{ type: </span><span class="s3">\&quot;</span><span class="s1">activeEnd</span><span class="s3">\&quot;</span><span class="s1">, signalType: yy.LINETYPE.ACTIVE_END, actor: $$[$0 - 4].actor }</span><span class="s3">\n          </span><span class="s1">];</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 67:</span><span class="s3">\n          </span><span class="s1">this.$ = [$$[$0 - 3], $$[$0 - 1], { type: </span><span class="s3">\&quot;</span><span class="s1">addMessage</span><span class="s3">\&quot;</span><span class="s1">, from: $$[$0 - 3].actor, to: $$[$0 - 1].actor, signalType: $$[$0 - 2], msg: $$[$0] }];</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 68:</span><span class="s3">\n          </span><span class="s1">this.$ = { type: </span><span class="s3">\&quot;</span><span class="s1">addParticipant</span><span class="s3">\&quot;</span><span class="s1">, actor: $$[$0] };</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 69:</span><span class="s3">\n          </span><span class="s1">this.$ = yy.LINETYPE.SOLID_OPEN;</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 70:</span><span class="s3">\n          </span><span class="s1">this.$ = yy.LINETYPE.DOTTED_OPEN;</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 71:</span><span class="s3">\n          </span><span class="s1">this.$ = yy.LINETYPE.SOLID;</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 72:</span><span class="s3">\n          </span><span class="s1">this.$ = yy.LINETYPE.BIDIRECTIONAL_SOLID;</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 73:</span><span class="s3">\n          </span><span class="s1">this.$ = yy.LINETYPE.DOTTED;</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 74:</span><span class="s3">\n          </span><span class="s1">this.$ = yy.LINETYPE.BIDIRECTIONAL_DOTTED;</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 75:</span><span class="s3">\n          </span><span class="s1">this.$ = yy.LINETYPE.SOLID_CROSS;</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 76:</span><span class="s3">\n          </span><span class="s1">this.$ = yy.LINETYPE.DOTTED_CROSS;</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 77:</span><span class="s3">\n          </span><span class="s1">this.$ = yy.LINETYPE.SOLID_POINT;</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 78:</span><span class="s3">\n          </span><span class="s1">this.$ = yy.LINETYPE.DOTTED_POINT;</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 79:</span><span class="s3">\n          </span><span class="s1">this.$ = yy.parseMessage($$[$0].trim().substring(1));</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">anonymous</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n    </span><span class="s1">table: [{ 3: 1, 4: $V0, 5: $V1, 6: $V2 }, { 1: [3] }, { 3: 5, 4: $V0, 5: $V1, 6: $V2 }, { 3: 6, 4: $V0, 5: $V1, 6: $V2 }, o([1, 4, 5, 13, 14, 18, 21, 23, 29, 30, 31, 33, 35, 36, 37, 38, 39, 41, 43, 44, 46, 50, 52, 53, 54, 59, 60, 61, 62, 70], $V3, { 7: 7 }), { 1: [2, 1] }, { 1: [2, 2] }, { 1: [2, 3], 4: $V4, 5: $V5, 8: 8, 9: 10, 12: 12, 13: $V6, 14: $V7, 17: 15, 18: $V8, 21: $V9, 22: 40, 23: $Va, 24: 19, 25: 20, 26: 21, 27: 22, 28: 23, 29: $Vb, 30: $Vc, 31: $Vd, 33: $Ve, 35: $Vf, 36: $Vg, 37: $Vh, 38: $Vi, 39: $Vj, 41: $Vk, 43: $Vl, 44: $Vm, 46: $Vn, 50: $Vo, 52: $Vp, 53: $Vq, 54: $Vr, 59: $Vs, 60: $Vt, 61: $Vu, 62: $Vv, 70: $Vw }, o($Vx, [2, 5]), { 9: 47, 12: 12, 13: $V6, 14: $V7, 17: 15, 18: $V8, 21: $V9, 22: 40, 23: $Va, 24: 19, 25: 20, 26: 21, 27: 22, 28: 23, 29: $Vb, 30: $Vc, 31: $Vd, 33: $Ve, 35: $Vf, 36: $Vg, 37: $Vh, 38: $Vi, 39: $Vj, 41: $Vk, 43: $Vl, 44: $Vm, 46: $Vn, 50: $Vo, 52: $Vp, 53: $Vq, 54: $Vr, 59: $Vs, 60: $Vt, 61: $Vu, 62: $Vv, 70: $Vw }, o($Vx, [2, 7]), o($Vx, [2, 8]), o($Vx, [2, 14]), { 12: 48, 50: $Vo, 52: $Vp, 53: $Vq }, { 15: [1, 49] }, { 5: [1, 50] }, { 5: [1, 53], 19: [1, 51], 20: [1, 52] }, { 22: 54, 70: $Vw }, { 22: 55, 70: $Vw }, { 5: [1, 56] }, { 5: [1, 57] }, { 5: [1, 58] }, { 5: [1, 59] }, { 5: [1, 60] }, o($Vx, [2, 29]), o($Vx, [2, 30]), { 32: [1, 61] }, { 34: [1, 62] }, o($Vx, [2, 33]), { 15: [1, 63] }, { 15: [1, 64] }, { 15: [1, 65] }, { 15: [1, 66] }, { 15: [1, 67] }, { 15: [1, 68] }, { 15: [1, 69] }, { 15: [1, 70] }, { 22: 71, 70: $Vw }, { 22: 72, 70: $Vw }, { 22: 73, 70: $Vw }, { 67: 74, 71: [1, 75], 72: [1, 76], 73: [1, 77], 74: [1, 78], 75: [1, 79], 76: [1, 80], 77: [1, 81], 78: [1, 82], 79: [1, 83], 80: [1, 84] }, { 55: 85, 57: [1, 86], 65: [1, 87], 66: [1, 88] }, { 22: 89, 70: $Vw }, { 22: 90, 70: $Vw }, { 22: 91, 70: $Vw }, { 22: 92, 70: $Vw }, o([5, 51, 64, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81], [2, 68]), o($Vx, [2, 6]), o($Vx, [2, 15]), o($Vy, [2, 9], { 10: 93 }), o($Vx, [2, 17]), { 5: [1, 95], 19: [1, 94] }, { 5: [1, 96] }, o($Vx, [2, 21]), { 5: [1, 97] }, { 5: [1, 98] }, o($Vx, [2, 24]), o($Vx, [2, 25]), o($Vx, [2, 26]), o($Vx, [2, 27]), o($Vx, [2, 28]), o($Vx, [2, 31]), o($Vx, [2, 32]), o($Vz, $V3, { 7: 99 }), o($Vz, $V3, { 7: 100 }), o($Vz, $V3, { 7: 101 }), o($VA, $V3, { 40: 102, 7: 103 }), o($VB, $V3, { 42: 104, 7: 105 }), o($VB, $V3, { 7: 105, 42: 106 }), o($VC, $V3, { 45: 107, 7: 108 }), o($Vz, $V3, { 7: 109 }), { 5: [1, 111], 51: [1, 110] }, { 5: [1, 113], 51: [1, 112] }, { 5: [1, 114] }, { 22: 117, 68: [1, 115], 69: [1, 116], 70: $Vw }, o($VD, [2, 69]), o($VD, [2, 70]), o($VD, [2, 71]), o($VD, [2, 72]), o($VD, [2, 73]), o($VD, [2, 74]), o($VD, [2, 75]), o($VD, [2, 76]), o($VD, [2, 77]), o($VD, [2, 78]), { 22: 118, 70: $Vw }, { 22: 120, 58: 119, 70: $Vw }, { 70: [2, 63] }, { 70: [2, 64] }, { 56: 121, 81: $VE }, { 56: 123, 81: $VE }, { 56: 124, 81: $VE }, { 56: 125, 81: $VE }, { 4: [1, 128], 5: [1, 130], 11: 127, 12: 129, 16: [1, 126], 50: $Vo, 52: $Vp, 53: $Vq }, { 5: [1, 131] }, o($Vx, [2, 19]), o($Vx, [2, 20]), o($Vx, [2, 22]), o($Vx, [2, 23]), { 4: $V4, 5: $V5, 8: 8, 9: 10, 12: 12, 13: $V6, 14: $V7, 16: [1, 132], 17: 15, 18: $V8, 21: $V9, 22: 40, 23: $Va, 24: 19, 25: 20, 26: 21, 27: 22, 28: 23, 29: $Vb, 30: $Vc, 31: $Vd, 33: $Ve, 35: $Vf, 36: $Vg, 37: $Vh, 38: $Vi, 39: $Vj, 41: $Vk, 43: $Vl, 44: $Vm, 46: $Vn, 50: $Vo, 52: $Vp, 53: $Vq, 54: $Vr, 59: $Vs, 60: $Vt, 61: $Vu, 62: $Vv, 70: $Vw }, { 4: $V4, 5: $V5, 8: 8, 9: 10, 12: 12, 13: $V6, 14: $V7, 16: [1, 133], 17: 15, 18: $V8, 21: $V9, 22: 40, 23: $Va, 24: 19, 25: 20, 26: 21, 27: 22, 28: 23, 29: $Vb, 30: $Vc, 31: $Vd, 33: $Ve, 35: $Vf, 36: $Vg, 37: $Vh, 38: $Vi, 39: $Vj, 41: $Vk, 43: $Vl, 44: $Vm, 46: $Vn, 50: $Vo, 52: $Vp, 53: $Vq, 54: $Vr, 59: $Vs, 60: $Vt, 61: $Vu, 62: $Vv, 70: $Vw }, { 4: $V4, 5: $V5, 8: 8, 9: 10, 12: 12, 13: $V6, 14: $V7, 16: [1, 134], 17: 15, 18: $V8, 21: $V9, 22: 40, 23: $Va, 24: 19, 25: 20, 26: 21, 27: 22, 28: 23, 29: $Vb, 30: $Vc, 31: $Vd, 33: $Ve, 35: $Vf, 36: $Vg, 37: $Vh, 38: $Vi, 39: $Vj, 41: $Vk, 43: $Vl, 44: $Vm, 46: $Vn, 50: $Vo, 52: $Vp, 53: $Vq, 54: $Vr, 59: $Vs, 60: $Vt, 61: $Vu, 62: $Vv, 70: $Vw }, { 16: [1, 135] }, { 4: $V4, 5: $V5, 8: 8, 9: 10, 12: 12, 13: $V6, 14: $V7, 16: [2, 46], 17: 15, 18: $V8, 21: $V9, 22: 40, 23: $Va, 24: 19, 25: 20, 26: 21, 27: 22, 28: 23, 29: $Vb, 30: $Vc, 31: $Vd, 33: $Ve, 35: $Vf, 36: $Vg, 37: $Vh, 38: $Vi, 39: $Vj, 41: $Vk, 43: $Vl, 44: $Vm, 46: $Vn, 49: [1, 136], 50: $Vo, 52: $Vp, 53: $Vq, 54: $Vr, 59: $Vs, 60: $Vt, 61: $Vu, 62: $Vv, 70: $Vw }, { 16: [1, 137] }, { 4: $V4, 5: $V5, 8: 8, 9: 10, 12: 12, 13: $V6, 14: $V7, 16: [2, 44], 17: 15, 18: $V8, 21: $V9, 22: 40, 23: $Va, 24: 19, 25: 20, 26: 21, 27: 22, 28: 23, 29: $Vb, 30: $Vc, 31: $Vd, 33: $Ve, 35: $Vf, 36: $Vg, 37: $Vh, 38: $Vi, 39: $Vj, 41: $Vk, 43: $Vl, 44: $Vm, 46: $Vn, 48: [1, 138], 50: $Vo, 52: $Vp, 53: $Vq, 54: $Vr, 59: $Vs, 60: $Vt, 61: $Vu, 62: $Vv, 70: $Vw }, { 16: [1, 139] }, { 16: [1, 140] }, { 4: $V4, 5: $V5, 8: 8, 9: 10, 12: 12, 13: $V6, 14: $V7, 16: [2, 42], 17: 15, 18: $V8, 21: $V9, 22: 40, 23: $Va, 24: 19, 25: 20, 26: 21, 27: 22, 28: 23, 29: $Vb, 30: $Vc, 31: $Vd, 33: $Ve, 35: $Vf, 36: $Vg, 37: $Vh, 38: $Vi, 39: $Vj, 41: $Vk, 43: $Vl, 44: $Vm, 46: $Vn, 47: [1, 141], 50: $Vo, 52: $Vp, 53: $Vq, 54: $Vr, 59: $Vs, 60: $Vt, 61: $Vu, 62: $Vv, 70: $Vw }, { 4: $V4, 5: $V5, 8: 8, 9: 10, 12: 12, 13: $V6, 14: $V7, 16: [1, 142], 17: 15, 18: $V8, 21: $V9, 22: 40, 23: $Va, 24: 19, 25: 20, 26: 21, 27: 22, 28: 23, 29: $Vb, 30: $Vc, 31: $Vd, 33: $Ve, 35: $Vf, 36: $Vg, 37: $Vh, 38: $Vi, 39: $Vj, 41: $Vk, 43: $Vl, 44: $Vm, 46: $Vn, 50: $Vo, 52: $Vp, 53: $Vq, 54: $Vr, 59: $Vs, 60: $Vt, 61: $Vu, 62: $Vv, 70: $Vw }, { 15: [1, 143] }, o($Vx, [2, 49]), { 15: [1, 144] }, o($Vx, [2, 51]), o($Vx, [2, 52]), { 22: 145, 70: $Vw }, { 22: 146, 70: $Vw }, { 56: 147, 81: $VE }, { 56: 148, 81: $VE }, { 56: 149, 81: $VE }, { 64: [1, 150], 81: [2, 62] }, { 5: [2, 55] }, { 5: [2, 79] }, { 5: [2, 56] }, { 5: [2, 57] }, { 5: [2, 58] }, o($Vx, [2, 16]), o($Vy, [2, 10]), { 12: 151, 50: $Vo, 52: $Vp, 53: $Vq }, o($Vy, [2, 12]), o($Vy, [2, 13]), o($Vx, [2, 18]), o($Vx, [2, 34]), o($Vx, [2, 35]), o($Vx, [2, 36]), o($Vx, [2, 37]), { 15: [1, 152] }, o($Vx, [2, 38]), { 15: [1, 153] }, o($Vx, [2, 39]), o($Vx, [2, 40]), { 15: [1, 154] }, o($Vx, [2, 41]), { 5: [1, 155] }, { 5: [1, 156] }, { 56: 157, 81: $VE }, { 56: 158, 81: $VE }, { 5: [2, 67] }, { 5: [2, 53] }, { 5: [2, 54] }, { 22: 159, 70: $Vw }, o($Vy, [2, 11]), o($VA, $V3, { 7: 103, 40: 160 }), o($VB, $V3, { 7: 105, 42: 161 }), o($VC, $V3, { 7: 108, 45: 162 }), o($Vx, [2, 48]), o($Vx, [2, 50]), { 5: [2, 65] }, { 5: [2, 66] }, { 81: [2, 61] }, { 16: [2, 47] }, { 16: [2, 45] }, { 16: [2, 43] }],</span><span class="s3">\n    </span><span class="s1">defaultActions: { 5: [2, 1], 6: [2, 2], 87: [2, 63], 88: [2, 64], 121: [2, 55], 122: [2, 79], 123: [2, 56], 124: [2, 57], 125: [2, 58], 147: [2, 67], 148: [2, 53], 149: [2, 54], 157: [2, 65], 158: [2, 66], 159: [2, 61], 160: [2, 47], 161: [2, 45], 162: [2, 43] },</span><span class="s3">\n    </span><span class="s1">parseError: /* @__PURE__ */ __name(function parseError(str, hash) {</span><span class="s3">\n      </span><span class="s1">if (hash.recoverable) {</span><span class="s3">\n        </span><span class="s1">this.trace(str);</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">var error = new Error(str);</span><span class="s3">\n        </span><span class="s1">error.hash = hash;</span><span class="s3">\n        </span><span class="s1">throw error;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">parseError</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n    </span><span class="s1">parse: /* @__PURE__ */ __name(function parse(input) {</span><span class="s3">\n      </span><span class="s1">var self = this, stack = [0], tstack = [], vstack = [null], lstack = [], table = this.table, yytext = </span><span class="s3">\&quot;\&quot;</span><span class="s1">, yylineno = 0, yyleng = 0, recovering = 0, TERROR = 2, EOF = 1;</span><span class="s3">\n      </span><span class="s1">var args = lstack.slice.call(arguments, 1);</span><span class="s3">\n      </span><span class="s1">var lexer2 = Object.create(this.lexer);</span><span class="s3">\n      </span><span class="s1">var sharedState = { yy: {} };</span><span class="s3">\n      </span><span class="s1">for (var k in this.yy) {</span><span class="s3">\n        </span><span class="s1">if (Object.prototype.hasOwnProperty.call(this.yy, k)) {</span><span class="s3">\n          </span><span class="s1">sharedState.yy[k] = this.yy[k];</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">lexer2.setInput(input, sharedState.yy);</span><span class="s3">\n      </span><span class="s1">sharedState.yy.lexer = lexer2;</span><span class="s3">\n      </span><span class="s1">sharedState.yy.parser = this;</span><span class="s3">\n      </span><span class="s1">if (typeof lexer2.yylloc == </span><span class="s3">\&quot;</span><span class="s1">undefined</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n        </span><span class="s1">lexer2.yylloc = {};</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">var yyloc = lexer2.yylloc;</span><span class="s3">\n      </span><span class="s1">lstack.push(yyloc);</span><span class="s3">\n      </span><span class="s1">var ranges = lexer2.options &amp;&amp; lexer2.options.ranges;</span><span class="s3">\n      </span><span class="s1">if (typeof sharedState.yy.parseError === </span><span class="s3">\&quot;</span><span class="s1">function</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n        </span><span class="s1">this.parseError = sharedState.yy.parseError;</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">this.parseError = Object.getPrototypeOf(this).parseError;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">function popStack(n) {</span><span class="s3">\n        </span><span class="s1">stack.length = stack.length - 2 * n;</span><span class="s3">\n        </span><span class="s1">vstack.length = vstack.length - n;</span><span class="s3">\n        </span><span class="s1">lstack.length = lstack.length - n;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">__name(popStack, </span><span class="s3">\&quot;</span><span class="s1">popStack</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">function lex() {</span><span class="s3">\n        </span><span class="s1">var token;</span><span class="s3">\n        </span><span class="s1">token = tstack.pop() || lexer2.lex() || EOF;</span><span class="s3">\n        </span><span class="s1">if (typeof token !== </span><span class="s3">\&quot;</span><span class="s1">number</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n          </span><span class="s1">if (token instanceof Array) {</span><span class="s3">\n            </span><span class="s1">tstack = token;</span><span class="s3">\n            </span><span class="s1">token = tstack.pop();</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">token = self.symbols_[token] || token;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">return token;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">__name(lex, </span><span class="s3">\&quot;</span><span class="s1">lex</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">var symbol, preErrorSymbol, state, action, a, r, yyval = {}, p, len, newState, expected;</span><span class="s3">\n      </span><span class="s1">while (true) {</span><span class="s3">\n        </span><span class="s1">state = stack[stack.length - 1];</span><span class="s3">\n        </span><span class="s1">if (this.defaultActions[state]) {</span><span class="s3">\n          </span><span class="s1">action = this.defaultActions[state];</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">if (symbol === null || typeof symbol == </span><span class="s3">\&quot;</span><span class="s1">undefined</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n            </span><span class="s1">symbol = lex();</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">action = table[state] &amp;&amp; table[state][symbol];</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">if (typeof action === </span><span class="s3">\&quot;</span><span class="s1">undefined</span><span class="s3">\&quot; </span><span class="s1">|| !action.length || !action[0]) {</span><span class="s3">\n          </span><span class="s1">var errStr = </span><span class="s3">\&quot;\&quot;</span><span class="s1">;</span><span class="s3">\n          </span><span class="s1">expected = [];</span><span class="s3">\n          </span><span class="s1">for (p in table[state]) {</span><span class="s3">\n            </span><span class="s1">if (this.terminals_[p] &amp;&amp; p &gt; TERROR) {</span><span class="s3">\n              </span><span class="s1">expected.push(</span><span class="s3">\&quot;</span><span class="s1">'</span><span class="s3">\&quot; </span><span class="s1">+ this.terminals_[p] + </span><span class="s3">\&quot;</span><span class="s1">'</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">if (lexer2.showPosition) {</span><span class="s3">\n            </span><span class="s1">errStr = </span><span class="s3">\&quot;</span><span class="s1">Parse error on line </span><span class="s3">\&quot; </span><span class="s1">+ (yylineno + 1) + </span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\\</span><span class="s1">n</span><span class="s3">\&quot; </span><span class="s1">+ lexer2.showPosition() + </span><span class="s3">\&quot;\\</span><span class="s1">nExpecting </span><span class="s3">\&quot; </span><span class="s1">+ expected.join(</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">) + </span><span class="s3">\&quot;</span><span class="s1">, got '</span><span class="s3">\&quot; </span><span class="s1">+ (this.terminals_[symbol] || symbol) + </span><span class="s3">\&quot;</span><span class="s1">'</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n          </span><span class="s1">} else {</span><span class="s3">\n            </span><span class="s1">errStr = </span><span class="s3">\&quot;</span><span class="s1">Parse error on line </span><span class="s3">\&quot; </span><span class="s1">+ (yylineno + 1) + </span><span class="s3">\&quot;</span><span class="s1">: Unexpected </span><span class="s3">\&quot; </span><span class="s1">+ (symbol == EOF ? </span><span class="s3">\&quot;</span><span class="s1">end of input</span><span class="s3">\&quot; </span><span class="s1">: </span><span class="s3">\&quot;</span><span class="s1">'</span><span class="s3">\&quot; </span><span class="s1">+ (this.terminals_[symbol] || symbol) + </span><span class="s3">\&quot;</span><span class="s1">'</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">this.parseError(errStr, {</span><span class="s3">\n            </span><span class="s1">text: lexer2.match,</span><span class="s3">\n            </span><span class="s1">token: this.terminals_[symbol] || symbol,</span><span class="s3">\n            </span><span class="s1">line: lexer2.yylineno,</span><span class="s3">\n            </span><span class="s1">loc: yyloc,</span><span class="s3">\n            </span><span class="s1">expected</span><span class="s3">\n          </span><span class="s1">});</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">if (action[0] instanceof Array &amp;&amp; action.length &gt; 1) {</span><span class="s3">\n          </span><span class="s1">throw new Error(</span><span class="s3">\&quot;</span><span class="s1">Parse Error: multiple actions possible at state: </span><span class="s3">\&quot; </span><span class="s1">+ state + </span><span class="s3">\&quot;</span><span class="s1">, token: </span><span class="s3">\&quot; </span><span class="s1">+ symbol);</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">switch (action[0]) {</span><span class="s3">\n          </span><span class="s1">case 1:</span><span class="s3">\n            </span><span class="s1">stack.push(symbol);</span><span class="s3">\n            </span><span class="s1">vstack.push(lexer2.yytext);</span><span class="s3">\n            </span><span class="s1">lstack.push(lexer2.yylloc);</span><span class="s3">\n            </span><span class="s1">stack.push(action[1]);</span><span class="s3">\n            </span><span class="s1">symbol = null;</span><span class="s3">\n            </span><span class="s1">if (!preErrorSymbol) {</span><span class="s3">\n              </span><span class="s1">yyleng = lexer2.yyleng;</span><span class="s3">\n              </span><span class="s1">yytext = lexer2.yytext;</span><span class="s3">\n              </span><span class="s1">yylineno = lexer2.yylineno;</span><span class="s3">\n              </span><span class="s1">yyloc = lexer2.yylloc;</span><span class="s3">\n              </span><span class="s1">if (recovering &gt; 0) {</span><span class="s3">\n                </span><span class="s1">recovering--;</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">} else {</span><span class="s3">\n              </span><span class="s1">symbol = preErrorSymbol;</span><span class="s3">\n              </span><span class="s1">preErrorSymbol = null;</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 2:</span><span class="s3">\n            </span><span class="s1">len = this.productions_[action[1]][1];</span><span class="s3">\n            </span><span class="s1">yyval.$ = vstack[vstack.length - len];</span><span class="s3">\n            </span><span class="s1">yyval._$ = {</span><span class="s3">\n              </span><span class="s1">first_line: lstack[lstack.length - (len || 1)].first_line,</span><span class="s3">\n              </span><span class="s1">last_line: lstack[lstack.length - 1].last_line,</span><span class="s3">\n              </span><span class="s1">first_column: lstack[lstack.length - (len || 1)].first_column,</span><span class="s3">\n              </span><span class="s1">last_column: lstack[lstack.length - 1].last_column</span><span class="s3">\n            </span><span class="s1">};</span><span class="s3">\n            </span><span class="s1">if (ranges) {</span><span class="s3">\n              </span><span class="s1">yyval._$.range = [</span><span class="s3">\n                </span><span class="s1">lstack[lstack.length - (len || 1)].range[0],</span><span class="s3">\n                </span><span class="s1">lstack[lstack.length - 1].range[1]</span><span class="s3">\n              </span><span class="s1">];</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">r = this.performAction.apply(yyval, [</span><span class="s3">\n              </span><span class="s1">yytext,</span><span class="s3">\n              </span><span class="s1">yyleng,</span><span class="s3">\n              </span><span class="s1">yylineno,</span><span class="s3">\n              </span><span class="s1">sharedState.yy,</span><span class="s3">\n              </span><span class="s1">action[1],</span><span class="s3">\n              </span><span class="s1">vstack,</span><span class="s3">\n              </span><span class="s1">lstack</span><span class="s3">\n            </span><span class="s1">].concat(args));</span><span class="s3">\n            </span><span class="s1">if (typeof r !== </span><span class="s3">\&quot;</span><span class="s1">undefined</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n              </span><span class="s1">return r;</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">if (len) {</span><span class="s3">\n              </span><span class="s1">stack = stack.slice(0, -1 * len * 2);</span><span class="s3">\n              </span><span class="s1">vstack = vstack.slice(0, -1 * len);</span><span class="s3">\n              </span><span class="s1">lstack = lstack.slice(0, -1 * len);</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">stack.push(this.productions_[action[1]][0]);</span><span class="s3">\n            </span><span class="s1">vstack.push(yyval.$);</span><span class="s3">\n            </span><span class="s1">lstack.push(yyval._$);</span><span class="s3">\n            </span><span class="s1">newState = table[stack[stack.length - 2]][stack[stack.length - 1]];</span><span class="s3">\n            </span><span class="s1">stack.push(newState);</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 3:</span><span class="s3">\n            </span><span class="s1">return true;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">return true;</span><span class="s3">\n    </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">parse</span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">var lexer = /* @__PURE__ */ function() {</span><span class="s3">\n    </span><span class="s1">var lexer2 = {</span><span class="s3">\n      </span><span class="s1">EOF: 1,</span><span class="s3">\n      </span><span class="s1">parseError: /* @__PURE__ */ __name(function parseError(str, hash) {</span><span class="s3">\n        </span><span class="s1">if (this.yy.parser) {</span><span class="s3">\n          </span><span class="s1">this.yy.parser.parseError(str, hash);</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">throw new Error(str);</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">parseError</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">// resets the lexer, sets new input</span><span class="s3">\n      </span><span class="s1">setInput: /* @__PURE__ */ __name(function(input, yy) {</span><span class="s3">\n        </span><span class="s1">this.yy = yy || this.yy || {};</span><span class="s3">\n        </span><span class="s1">this._input = input;</span><span class="s3">\n        </span><span class="s1">this._more = this._backtrack = this.done = false;</span><span class="s3">\n        </span><span class="s1">this.yylineno = this.yyleng = 0;</span><span class="s3">\n        </span><span class="s1">this.yytext = this.matched = this.match = </span><span class="s3">\&quot;\&quot;</span><span class="s1">;</span><span class="s3">\n        </span><span class="s1">this.conditionStack = [</span><span class="s3">\&quot;</span><span class="s1">INITIAL</span><span class="s3">\&quot;</span><span class="s1">];</span><span class="s3">\n        </span><span class="s1">this.yylloc = {</span><span class="s3">\n          </span><span class="s1">first_line: 1,</span><span class="s3">\n          </span><span class="s1">first_column: 0,</span><span class="s3">\n          </span><span class="s1">last_line: 1,</span><span class="s3">\n          </span><span class="s1">last_column: 0</span><span class="s3">\n        </span><span class="s1">};</span><span class="s3">\n        </span><span class="s1">if (this.options.ranges) {</span><span class="s3">\n          </span><span class="s1">this.yylloc.range = [0, 0];</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">this.offset = 0;</span><span class="s3">\n        </span><span class="s1">return this;</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">setInput</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">// consumes and returns one char from the input</span><span class="s3">\n      </span><span class="s1">input: /* @__PURE__ */ __name(function() {</span><span class="s3">\n        </span><span class="s1">var ch = this._input[0];</span><span class="s3">\n        </span><span class="s1">this.yytext += ch;</span><span class="s3">\n        </span><span class="s1">this.yyleng++;</span><span class="s3">\n        </span><span class="s1">this.offset++;</span><span class="s3">\n        </span><span class="s1">this.match += ch;</span><span class="s3">\n        </span><span class="s1">this.matched += ch;</span><span class="s3">\n        </span><span class="s1">var lines = ch.match(/(?:</span><span class="s3">\\</span><span class="s1">r</span><span class="s3">\\</span><span class="s1">n?|</span><span class="s3">\\</span><span class="s1">n).*/g);</span><span class="s3">\n        </span><span class="s1">if (lines) {</span><span class="s3">\n          </span><span class="s1">this.yylineno++;</span><span class="s3">\n          </span><span class="s1">this.yylloc.last_line++;</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">this.yylloc.last_column++;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">if (this.options.ranges) {</span><span class="s3">\n          </span><span class="s1">this.yylloc.range[1]++;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">this._input = this._input.slice(1);</span><span class="s3">\n        </span><span class="s1">return ch;</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">input</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">// unshifts one char (or a string) into the input</span><span class="s3">\n      </span><span class="s1">unput: /* @__PURE__ */ __name(function(ch) {</span><span class="s3">\n        </span><span class="s1">var len = ch.length;</span><span class="s3">\n        </span><span class="s1">var lines = ch.split(/(?:</span><span class="s3">\\</span><span class="s1">r</span><span class="s3">\\</span><span class="s1">n?|</span><span class="s3">\\</span><span class="s1">n)/g);</span><span class="s3">\n        </span><span class="s1">this._input = ch + this._input;</span><span class="s3">\n        </span><span class="s1">this.yytext = this.yytext.substr(0, this.yytext.length - len);</span><span class="s3">\n        </span><span class="s1">this.offset -= len;</span><span class="s3">\n        </span><span class="s1">var oldLines = this.match.split(/(?:</span><span class="s3">\\</span><span class="s1">r</span><span class="s3">\\</span><span class="s1">n?|</span><span class="s3">\\</span><span class="s1">n)/g);</span><span class="s3">\n        </span><span class="s1">this.match = this.match.substr(0, this.match.length - 1);</span><span class="s3">\n        </span><span class="s1">this.matched = this.matched.substr(0, this.matched.length - 1);</span><span class="s3">\n        </span><span class="s1">if (lines.length - 1) {</span><span class="s3">\n          </span><span class="s1">this.yylineno -= lines.length - 1;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">var r = this.yylloc.range;</span><span class="s3">\n        </span><span class="s1">this.yylloc = {</span><span class="s3">\n          </span><span class="s1">first_line: this.yylloc.first_line,</span><span class="s3">\n          </span><span class="s1">last_line: this.yylineno + 1,</span><span class="s3">\n          </span><span class="s1">first_column: this.yylloc.first_column,</span><span class="s3">\n          </span><span class="s1">last_column: lines ? (lines.length === oldLines.length ? this.yylloc.first_column : 0) + oldLines[oldLines.length - lines.length].length - lines[0].length : this.yylloc.first_column - len</span><span class="s3">\n        </span><span class="s1">};</span><span class="s3">\n        </span><span class="s1">if (this.options.ranges) {</span><span class="s3">\n          </span><span class="s1">this.yylloc.range = [r[0], r[0] + this.yyleng - len];</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">this.yyleng = this.yytext.length;</span><span class="s3">\n        </span><span class="s1">return this;</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">unput</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">// When called from action, caches matched text and appends it on next action</span><span class="s3">\n      </span><span class="s1">more: /* @__PURE__ */ __name(function() {</span><span class="s3">\n        </span><span class="s1">this._more = true;</span><span class="s3">\n        </span><span class="s1">return this;</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">more</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">// When called from action, signals the lexer that this rule fails to match the input, so the next matching rule (regex) should be tested instead.</span><span class="s3">\n      </span><span class="s1">reject: /* @__PURE__ */ __name(function() {</span><span class="s3">\n        </span><span class="s1">if (this.options.backtrack_lexer) {</span><span class="s3">\n          </span><span class="s1">this._backtrack = true;</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">return this.parseError(</span><span class="s3">\&quot;</span><span class="s1">Lexical error on line </span><span class="s3">\&quot; </span><span class="s1">+ (this.yylineno + 1) + </span><span class="s3">\&quot;</span><span class="s1">. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).</span><span class="s3">\\</span><span class="s1">n</span><span class="s3">\&quot; </span><span class="s1">+ this.showPosition(), {</span><span class="s3">\n            </span><span class="s1">text: </span><span class="s3">\&quot;\&quot;</span><span class="s1">,</span><span class="s3">\n            </span><span class="s1">token: null,</span><span class="s3">\n            </span><span class="s1">line: this.yylineno</span><span class="s3">\n          </span><span class="s1">});</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">return this;</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">reject</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">// retain first n characters of the match</span><span class="s3">\n      </span><span class="s1">less: /* @__PURE__ */ __name(function(n) {</span><span class="s3">\n        </span><span class="s1">this.unput(this.match.slice(n));</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">less</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">// displays already matched input, i.e. for error messages</span><span class="s3">\n      </span><span class="s1">pastInput: /* @__PURE__ */ __name(function() {</span><span class="s3">\n        </span><span class="s1">var past = this.matched.substr(0, this.matched.length - this.match.length);</span><span class="s3">\n        </span><span class="s1">return (past.length &gt; 20 ? </span><span class="s3">\&quot;</span><span class="s1">...</span><span class="s3">\&quot; </span><span class="s1">: </span><span class="s3">\&quot;\&quot;</span><span class="s1">) + past.substr(-20).replace(/</span><span class="s3">\\</span><span class="s1">n/g, </span><span class="s3">\&quot;\&quot;</span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">pastInput</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">// displays upcoming input, i.e. for error messages</span><span class="s3">\n      </span><span class="s1">upcomingInput: /* @__PURE__ */ __name(function() {</span><span class="s3">\n        </span><span class="s1">var next = this.match;</span><span class="s3">\n        </span><span class="s1">if (next.length &lt; 20) {</span><span class="s3">\n          </span><span class="s1">next += this._input.substr(0, 20 - next.length);</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">return (next.substr(0, 20) + (next.length &gt; 20 ? </span><span class="s3">\&quot;</span><span class="s1">...</span><span class="s3">\&quot; </span><span class="s1">: </span><span class="s3">\&quot;\&quot;</span><span class="s1">)).replace(/</span><span class="s3">\\</span><span class="s1">n/g, </span><span class="s3">\&quot;\&quot;</span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">upcomingInput</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">// displays the character position where the lexing error occurred, i.e. for error messages</span><span class="s3">\n      </span><span class="s1">showPosition: /* @__PURE__ */ __name(function() {</span><span class="s3">\n        </span><span class="s1">var pre = this.pastInput();</span><span class="s3">\n        </span><span class="s1">var c = new Array(pre.length + 1).join(</span><span class="s3">\&quot;</span><span class="s1">-</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n        </span><span class="s1">return pre + this.upcomingInput() + </span><span class="s3">\&quot;\\</span><span class="s1">n</span><span class="s3">\&quot; </span><span class="s1">+ c + </span><span class="s3">\&quot;</span><span class="s1">^</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">showPosition</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">// test the lexed token: return FALSE when not a match, otherwise return token</span><span class="s3">\n      </span><span class="s1">test_match: /* @__PURE__ */ __name(function(match, indexed_rule) {</span><span class="s3">\n        </span><span class="s1">var token, lines, backup;</span><span class="s3">\n        </span><span class="s1">if (this.options.backtrack_lexer) {</span><span class="s3">\n          </span><span class="s1">backup = {</span><span class="s3">\n            </span><span class="s1">yylineno: this.yylineno,</span><span class="s3">\n            </span><span class="s1">yylloc: {</span><span class="s3">\n              </span><span class="s1">first_line: this.yylloc.first_line,</span><span class="s3">\n              </span><span class="s1">last_line: this.last_line,</span><span class="s3">\n              </span><span class="s1">first_column: this.yylloc.first_column,</span><span class="s3">\n              </span><span class="s1">last_column: this.yylloc.last_column</span><span class="s3">\n            </span><span class="s1">},</span><span class="s3">\n            </span><span class="s1">yytext: this.yytext,</span><span class="s3">\n            </span><span class="s1">match: this.match,</span><span class="s3">\n            </span><span class="s1">matches: this.matches,</span><span class="s3">\n            </span><span class="s1">matched: this.matched,</span><span class="s3">\n            </span><span class="s1">yyleng: this.yyleng,</span><span class="s3">\n            </span><span class="s1">offset: this.offset,</span><span class="s3">\n            </span><span class="s1">_more: this._more,</span><span class="s3">\n            </span><span class="s1">_input: this._input,</span><span class="s3">\n            </span><span class="s1">yy: this.yy,</span><span class="s3">\n            </span><span class="s1">conditionStack: this.conditionStack.slice(0),</span><span class="s3">\n            </span><span class="s1">done: this.done</span><span class="s3">\n          </span><span class="s1">};</span><span class="s3">\n          </span><span class="s1">if (this.options.ranges) {</span><span class="s3">\n            </span><span class="s1">backup.yylloc.range = this.yylloc.range.slice(0);</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">lines = match[0].match(/(?:</span><span class="s3">\\</span><span class="s1">r</span><span class="s3">\\</span><span class="s1">n?|</span><span class="s3">\\</span><span class="s1">n).*/g);</span><span class="s3">\n        </span><span class="s1">if (lines) {</span><span class="s3">\n          </span><span class="s1">this.yylineno += lines.length;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">this.yylloc = {</span><span class="s3">\n          </span><span class="s1">first_line: this.yylloc.last_line,</span><span class="s3">\n          </span><span class="s1">last_line: this.yylineno + 1,</span><span class="s3">\n          </span><span class="s1">first_column: this.yylloc.last_column,</span><span class="s3">\n          </span><span class="s1">last_column: lines ? lines[lines.length - 1].length - lines[lines.length - 1].match(/</span><span class="s3">\\</span><span class="s1">r?</span><span class="s3">\\</span><span class="s1">n?/)[0].length : this.yylloc.last_column + match[0].length</span><span class="s3">\n        </span><span class="s1">};</span><span class="s3">\n        </span><span class="s1">this.yytext += match[0];</span><span class="s3">\n        </span><span class="s1">this.match += match[0];</span><span class="s3">\n        </span><span class="s1">this.matches = match;</span><span class="s3">\n        </span><span class="s1">this.yyleng = this.yytext.length;</span><span class="s3">\n        </span><span class="s1">if (this.options.ranges) {</span><span class="s3">\n          </span><span class="s1">this.yylloc.range = [this.offset, this.offset += this.yyleng];</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">this._more = false;</span><span class="s3">\n        </span><span class="s1">this._backtrack = false;</span><span class="s3">\n        </span><span class="s1">this._input = this._input.slice(match[0].length);</span><span class="s3">\n        </span><span class="s1">this.matched += match[0];</span><span class="s3">\n        </span><span class="s1">token = this.performAction.call(this, this.yy, this, indexed_rule, this.conditionStack[this.conditionStack.length - 1]);</span><span class="s3">\n        </span><span class="s1">if (this.done &amp;&amp; this._input) {</span><span class="s3">\n          </span><span class="s1">this.done = false;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">if (token) {</span><span class="s3">\n          </span><span class="s1">return token;</span><span class="s3">\n        </span><span class="s1">} else if (this._backtrack) {</span><span class="s3">\n          </span><span class="s1">for (var k in backup) {</span><span class="s3">\n            </span><span class="s1">this[k] = backup[k];</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">return false;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">return false;</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">test_match</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">// return next match in input</span><span class="s3">\n      </span><span class="s1">next: /* @__PURE__ */ __name(function() {</span><span class="s3">\n        </span><span class="s1">if (this.done) {</span><span class="s3">\n          </span><span class="s1">return this.EOF;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">if (!this._input) {</span><span class="s3">\n          </span><span class="s1">this.done = true;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">var token, match, tempMatch, index;</span><span class="s3">\n        </span><span class="s1">if (!this._more) {</span><span class="s3">\n          </span><span class="s1">this.yytext = </span><span class="s3">\&quot;\&quot;</span><span class="s1">;</span><span class="s3">\n          </span><span class="s1">this.match = </span><span class="s3">\&quot;\&quot;</span><span class="s1">;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">var rules = this._currentRules();</span><span class="s3">\n        </span><span class="s1">for (var i = 0; i &lt; rules.length; i++) {</span><span class="s3">\n          </span><span class="s1">tempMatch = this._input.match(this.rules[rules[i]]);</span><span class="s3">\n          </span><span class="s1">if (tempMatch &amp;&amp; (!match || tempMatch[0].length &gt; match[0].length)) {</span><span class="s3">\n            </span><span class="s1">match = tempMatch;</span><span class="s3">\n            </span><span class="s1">index = i;</span><span class="s3">\n            </span><span class="s1">if (this.options.backtrack_lexer) {</span><span class="s3">\n              </span><span class="s1">token = this.test_match(tempMatch, rules[i]);</span><span class="s3">\n              </span><span class="s1">if (token !== false) {</span><span class="s3">\n                </span><span class="s1">return token;</span><span class="s3">\n              </span><span class="s1">} else if (this._backtrack) {</span><span class="s3">\n                </span><span class="s1">match = false;</span><span class="s3">\n                </span><span class="s1">continue;</span><span class="s3">\n              </span><span class="s1">} else {</span><span class="s3">\n                </span><span class="s1">return false;</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">} else if (!this.options.flex) {</span><span class="s3">\n              </span><span class="s1">break;</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">if (match) {</span><span class="s3">\n          </span><span class="s1">token = this.test_match(match, rules[index]);</span><span class="s3">\n          </span><span class="s1">if (token !== false) {</span><span class="s3">\n            </span><span class="s1">return token;</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">return false;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">if (this._input === </span><span class="s3">\&quot;\&quot;</span><span class="s1">) {</span><span class="s3">\n          </span><span class="s1">return this.EOF;</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">return this.parseError(</span><span class="s3">\&quot;</span><span class="s1">Lexical error on line </span><span class="s3">\&quot; </span><span class="s1">+ (this.yylineno + 1) + </span><span class="s3">\&quot;</span><span class="s1">. Unrecognized text.</span><span class="s3">\\</span><span class="s1">n</span><span class="s3">\&quot; </span><span class="s1">+ this.showPosition(), {</span><span class="s3">\n            </span><span class="s1">text: </span><span class="s3">\&quot;\&quot;</span><span class="s1">,</span><span class="s3">\n            </span><span class="s1">token: null,</span><span class="s3">\n            </span><span class="s1">line: this.yylineno</span><span class="s3">\n          </span><span class="s1">});</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">next</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">// return next match that has a token</span><span class="s3">\n      </span><span class="s1">lex: /* @__PURE__ */ __name(function lex() {</span><span class="s3">\n        </span><span class="s1">var r = this.next();</span><span class="s3">\n        </span><span class="s1">if (r) {</span><span class="s3">\n          </span><span class="s1">return r;</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">return this.lex();</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">lex</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">// activates a new lexer condition state (pushes the new lexer condition state onto the condition stack)</span><span class="s3">\n      </span><span class="s1">begin: /* @__PURE__ */ __name(function begin(condition) {</span><span class="s3">\n        </span><span class="s1">this.conditionStack.push(condition);</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">begin</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">// pop the previously active lexer condition state off the condition stack</span><span class="s3">\n      </span><span class="s1">popState: /* @__PURE__ */ __name(function popState() {</span><span class="s3">\n        </span><span class="s1">var n = this.conditionStack.length - 1;</span><span class="s3">\n        </span><span class="s1">if (n &gt; 0) {</span><span class="s3">\n          </span><span class="s1">return this.conditionStack.pop();</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">return this.conditionStack[0];</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">popState</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">// produce the lexer rule set which is active for the currently active lexer condition state</span><span class="s3">\n      </span><span class="s1">_currentRules: /* @__PURE__ */ __name(function _currentRules() {</span><span class="s3">\n        </span><span class="s1">if (this.conditionStack.length &amp;&amp; this.conditionStack[this.conditionStack.length - 1]) {</span><span class="s3">\n          </span><span class="s1">return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">return this.conditions[</span><span class="s3">\&quot;</span><span class="s1">INITIAL</span><span class="s3">\&quot;</span><span class="s1">].rules;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">_currentRules</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">// return the currently active lexer condition state; when an index argument is provided it produces the N-th previous condition state, if available</span><span class="s3">\n      </span><span class="s1">topState: /* @__PURE__ */ __name(function topState(n) {</span><span class="s3">\n        </span><span class="s1">n = this.conditionStack.length - 1 - Math.abs(n || 0);</span><span class="s3">\n        </span><span class="s1">if (n &gt;= 0) {</span><span class="s3">\n          </span><span class="s1">return this.conditionStack[n];</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">INITIAL</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">topState</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">// alias for begin(condition)</span><span class="s3">\n      </span><span class="s1">pushState: /* @__PURE__ */ __name(function pushState(condition) {</span><span class="s3">\n        </span><span class="s1">this.begin(condition);</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">pushState</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">// return the number of states currently on the stack</span><span class="s3">\n      </span><span class="s1">stateStackSize: /* @__PURE__ */ __name(function stateStackSize() {</span><span class="s3">\n        </span><span class="s1">return this.conditionStack.length;</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">stateStackSize</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">options: { </span><span class="s3">\&quot;</span><span class="s1">case-insensitive</span><span class="s3">\&quot;</span><span class="s1">: true },</span><span class="s3">\n      </span><span class="s1">performAction: /* @__PURE__ */ __name(function anonymous(yy, yy_, $avoiding_name_collisions, YY_START) {</span><span class="s3">\n        </span><span class="s1">var YYSTATE = YY_START;</span><span class="s3">\n        </span><span class="s1">switch ($avoiding_name_collisions) {</span><span class="s3">\n          </span><span class="s1">case 0:</span><span class="s3">\n            </span><span class="s1">return 5;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 1:</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 2:</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 3:</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 4:</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 5:</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 6:</span><span class="s3">\n            </span><span class="s1">return 19;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 7:</span><span class="s3">\n            </span><span class="s1">this.begin(</span><span class="s3">\&quot;</span><span class="s1">LINE</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 14;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 8:</span><span class="s3">\n            </span><span class="s1">this.begin(</span><span class="s3">\&quot;</span><span class="s1">ID</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 50;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 9:</span><span class="s3">\n            </span><span class="s1">this.begin(</span><span class="s3">\&quot;</span><span class="s1">ID</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 52;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 10:</span><span class="s3">\n            </span><span class="s1">return 13;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 11:</span><span class="s3">\n            </span><span class="s1">this.begin(</span><span class="s3">\&quot;</span><span class="s1">ID</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 53;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 12:</span><span class="s3">\n            </span><span class="s1">yy_.yytext = yy_.yytext.trim();</span><span class="s3">\n            </span><span class="s1">this.begin(</span><span class="s3">\&quot;</span><span class="s1">ALIAS</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 70;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 13:</span><span class="s3">\n            </span><span class="s1">this.popState();</span><span class="s3">\n            </span><span class="s1">this.popState();</span><span class="s3">\n            </span><span class="s1">this.begin(</span><span class="s3">\&quot;</span><span class="s1">LINE</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 51;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 14:</span><span class="s3">\n            </span><span class="s1">this.popState();</span><span class="s3">\n            </span><span class="s1">this.popState();</span><span class="s3">\n            </span><span class="s1">return 5;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 15:</span><span class="s3">\n            </span><span class="s1">this.begin(</span><span class="s3">\&quot;</span><span class="s1">LINE</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 36;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 16:</span><span class="s3">\n            </span><span class="s1">this.begin(</span><span class="s3">\&quot;</span><span class="s1">LINE</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 37;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 17:</span><span class="s3">\n            </span><span class="s1">this.begin(</span><span class="s3">\&quot;</span><span class="s1">LINE</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 38;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 18:</span><span class="s3">\n            </span><span class="s1">this.begin(</span><span class="s3">\&quot;</span><span class="s1">LINE</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 39;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 19:</span><span class="s3">\n            </span><span class="s1">this.begin(</span><span class="s3">\&quot;</span><span class="s1">LINE</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 49;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 20:</span><span class="s3">\n            </span><span class="s1">this.begin(</span><span class="s3">\&quot;</span><span class="s1">LINE</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 41;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 21:</span><span class="s3">\n            </span><span class="s1">this.begin(</span><span class="s3">\&quot;</span><span class="s1">LINE</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 43;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 22:</span><span class="s3">\n            </span><span class="s1">this.begin(</span><span class="s3">\&quot;</span><span class="s1">LINE</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 48;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 23:</span><span class="s3">\n            </span><span class="s1">this.begin(</span><span class="s3">\&quot;</span><span class="s1">LINE</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 44;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 24:</span><span class="s3">\n            </span><span class="s1">this.begin(</span><span class="s3">\&quot;</span><span class="s1">LINE</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 47;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 25:</span><span class="s3">\n            </span><span class="s1">this.begin(</span><span class="s3">\&quot;</span><span class="s1">LINE</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 46;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 26:</span><span class="s3">\n            </span><span class="s1">this.popState();</span><span class="s3">\n            </span><span class="s1">return 15;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 27:</span><span class="s3">\n            </span><span class="s1">return 16;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 28:</span><span class="s3">\n            </span><span class="s1">return 65;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 29:</span><span class="s3">\n            </span><span class="s1">return 66;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 30:</span><span class="s3">\n            </span><span class="s1">return 59;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 31:</span><span class="s3">\n            </span><span class="s1">return 60;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 32:</span><span class="s3">\n            </span><span class="s1">return 61;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 33:</span><span class="s3">\n            </span><span class="s1">return 62;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 34:</span><span class="s3">\n            </span><span class="s1">return 57;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 35:</span><span class="s3">\n            </span><span class="s1">return 54;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 36:</span><span class="s3">\n            </span><span class="s1">this.begin(</span><span class="s3">\&quot;</span><span class="s1">ID</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 21;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 37:</span><span class="s3">\n            </span><span class="s1">this.begin(</span><span class="s3">\&quot;</span><span class="s1">ID</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 23;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 38:</span><span class="s3">\n            </span><span class="s1">return 29;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 39:</span><span class="s3">\n            </span><span class="s1">return 30;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 40:</span><span class="s3">\n            </span><span class="s1">this.begin(</span><span class="s3">\&quot;</span><span class="s1">acc_title</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 31;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 41:</span><span class="s3">\n            </span><span class="s1">this.popState();</span><span class="s3">\n            </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">acc_title_value</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 42:</span><span class="s3">\n            </span><span class="s1">this.begin(</span><span class="s3">\&quot;</span><span class="s1">acc_descr</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 33;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 43:</span><span class="s3">\n            </span><span class="s1">this.popState();</span><span class="s3">\n            </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">acc_descr_value</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 44:</span><span class="s3">\n            </span><span class="s1">this.begin(</span><span class="s3">\&quot;</span><span class="s1">acc_descr_multiline</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 45:</span><span class="s3">\n            </span><span class="s1">this.popState();</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 46:</span><span class="s3">\n            </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">acc_descr_multiline_value</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 47:</span><span class="s3">\n            </span><span class="s1">return 6;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 48:</span><span class="s3">\n            </span><span class="s1">return 18;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 49:</span><span class="s3">\n            </span><span class="s1">return 20;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 50:</span><span class="s3">\n            </span><span class="s1">return 64;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 51:</span><span class="s3">\n            </span><span class="s1">return 5;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 52:</span><span class="s3">\n            </span><span class="s1">yy_.yytext = yy_.yytext.trim();</span><span class="s3">\n            </span><span class="s1">return 70;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 53:</span><span class="s3">\n            </span><span class="s1">return 73;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 54:</span><span class="s3">\n            </span><span class="s1">return 74;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 55:</span><span class="s3">\n            </span><span class="s1">return 75;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 56:</span><span class="s3">\n            </span><span class="s1">return 76;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 57:</span><span class="s3">\n            </span><span class="s1">return 71;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 58:</span><span class="s3">\n            </span><span class="s1">return 72;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 59:</span><span class="s3">\n            </span><span class="s1">return 77;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 60:</span><span class="s3">\n            </span><span class="s1">return 78;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 61:</span><span class="s3">\n            </span><span class="s1">return 79;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 62:</span><span class="s3">\n            </span><span class="s1">return 80;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 63:</span><span class="s3">\n            </span><span class="s1">return 81;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 64:</span><span class="s3">\n            </span><span class="s1">return 68;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 65:</span><span class="s3">\n            </span><span class="s1">return 69;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 66:</span><span class="s3">\n            </span><span class="s1">return 5;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 67:</span><span class="s3">\n            </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">INVALID</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">anonymous</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">rules: [/^(?:[</span><span class="s3">\\</span><span class="s1">n]+)/i, /^(?:</span><span class="s3">\\</span><span class="s1">s+)/i, /^(?:((?!</span><span class="s3">\\</span><span class="s1">n)</span><span class="s3">\\</span><span class="s1">s)+)/i, /^(?:#[^</span><span class="s3">\\</span><span class="s1">n]*)/i, /^(?:%(?!</span><span class="s3">\\</span><span class="s1">{)[^</span><span class="s3">\\</span><span class="s1">n]*)/i, /^(?:[^</span><span class="s3">\\</span><span class="s1">}]%%[^</span><span class="s3">\\</span><span class="s1">n]*)/i, /^(?:[0-9]+(?=[ </span><span class="s3">\\</span><span class="s1">n]+))/i, /^(?:box</span><span class="s3">\\</span><span class="s1">b)/i, /^(?:participant</span><span class="s3">\\</span><span class="s1">b)/i, /^(?:actor</span><span class="s3">\\</span><span class="s1">b)/i, /^(?:create</span><span class="s3">\\</span><span class="s1">b)/i, /^(?:destroy</span><span class="s3">\\</span><span class="s1">b)/i, /^(?:[^</span><span class="s3">\\</span><span class="s1">&lt;-&gt;</span><span class="s3">\\</span><span class="s1">-&gt;:</span><span class="s3">\\</span><span class="s1">n,;]+?([</span><span class="s3">\\</span><span class="s1">-]*[^</span><span class="s3">\\</span><span class="s1">&lt;-&gt;</span><span class="s3">\\</span><span class="s1">-&gt;:</span><span class="s3">\\</span><span class="s1">n,;]+?)*?(?=((?!</span><span class="s3">\\</span><span class="s1">n)</span><span class="s3">\\</span><span class="s1">s)+as(?!</span><span class="s3">\\</span><span class="s1">n)</span><span class="s3">\\</span><span class="s1">s|[#</span><span class="s3">\\</span><span class="s1">n;]|$))/i, /^(?:as</span><span class="s3">\\</span><span class="s1">b)/i, /^(?:(?:))/i, /^(?:loop</span><span class="s3">\\</span><span class="s1">b)/i, /^(?:rect</span><span class="s3">\\</span><span class="s1">b)/i, /^(?:opt</span><span class="s3">\\</span><span class="s1">b)/i, /^(?:alt</span><span class="s3">\\</span><span class="s1">b)/i, /^(?:else</span><span class="s3">\\</span><span class="s1">b)/i, /^(?:par</span><span class="s3">\\</span><span class="s1">b)/i, /^(?:par_over</span><span class="s3">\\</span><span class="s1">b)/i, /^(?:and</span><span class="s3">\\</span><span class="s1">b)/i, /^(?:critical</span><span class="s3">\\</span><span class="s1">b)/i, /^(?:option</span><span class="s3">\\</span><span class="s1">b)/i, /^(?:break</span><span class="s3">\\</span><span class="s1">b)/i, /^(?:(?:[:]?(?:no)?wrap)?[^#</span><span class="s3">\\</span><span class="s1">n;]*)/i, /^(?:end</span><span class="s3">\\</span><span class="s1">b)/i, /^(?:left of</span><span class="s3">\\</span><span class="s1">b)/i, /^(?:right of</span><span class="s3">\\</span><span class="s1">b)/i, /^(?:links</span><span class="s3">\\</span><span class="s1">b)/i, /^(?:link</span><span class="s3">\\</span><span class="s1">b)/i, /^(?:properties</span><span class="s3">\\</span><span class="s1">b)/i, /^(?:details</span><span class="s3">\\</span><span class="s1">b)/i, /^(?:over</span><span class="s3">\\</span><span class="s1">b)/i, /^(?:note</span><span class="s3">\\</span><span class="s1">b)/i, /^(?:activate</span><span class="s3">\\</span><span class="s1">b)/i, /^(?:deactivate</span><span class="s3">\\</span><span class="s1">b)/i, /^(?:title</span><span class="s3">\\</span><span class="s1">s[^#</span><span class="s3">\\</span><span class="s1">n;]+)/i, /^(?:title:</span><span class="s3">\\</span><span class="s1">s[^#</span><span class="s3">\\</span><span class="s1">n;]+)/i, /^(?:accTitle</span><span class="s3">\\</span><span class="s1">s*:</span><span class="s3">\\</span><span class="s1">s*)/i, /^(?:(?!</span><span class="s3">\\</span><span class="s1">n||)*[^</span><span class="s3">\\</span><span class="s1">n]*)/i, /^(?:accDescr</span><span class="s3">\\</span><span class="s1">s*:</span><span class="s3">\\</span><span class="s1">s*)/i, /^(?:(?!</span><span class="s3">\\</span><span class="s1">n||)*[^</span><span class="s3">\\</span><span class="s1">n]*)/i, /^(?:accDescr</span><span class="s3">\\</span><span class="s1">s*</span><span class="s3">\\</span><span class="s1">{</span><span class="s3">\\</span><span class="s1">s*)/i, /^(?:[</span><span class="s3">\\</span><span class="s1">}])/i, /^(?:[^</span><span class="s3">\\</span><span class="s1">}]*)/i, /^(?:sequenceDiagram</span><span class="s3">\\</span><span class="s1">b)/i, /^(?:autonumber</span><span class="s3">\\</span><span class="s1">b)/i, /^(?:off</span><span class="s3">\\</span><span class="s1">b)/i, /^(?:,)/i, /^(?:;)/i, /^(?:[^</span><span class="s3">\\</span><span class="s1">+</span><span class="s3">\\</span><span class="s1">&lt;-&gt;</span><span class="s3">\\</span><span class="s1">-&gt;:</span><span class="s3">\\</span><span class="s1">n,;]+((?!(-x|--x|-</span><span class="s3">\\</span><span class="s1">)|--</span><span class="s3">\\</span><span class="s1">)))[</span><span class="s3">\\</span><span class="s1">-]*[^</span><span class="s3">\\</span><span class="s1">+</span><span class="s3">\\</span><span class="s1">&lt;-&gt;</span><span class="s3">\\</span><span class="s1">-&gt;:</span><span class="s3">\\</span><span class="s1">n,;]+)*)/i, /^(?:-&gt;&gt;)/i, /^(?:&lt;&lt;-&gt;&gt;)/i, /^(?:--&gt;&gt;)/i, /^(?:&lt;&lt;--&gt;&gt;)/i, /^(?:-&gt;)/i, /^(?:--&gt;)/i, /^(?:-[x])/i, /^(?:--[x])/i, /^(?:-[</span><span class="s3">\\</span><span class="s1">)])/i, /^(?:--[</span><span class="s3">\\</span><span class="s1">)])/i, /^(?::(?:(?:no)?wrap)?[^#</span><span class="s3">\\</span><span class="s1">n;]+)/i, /^(?:</span><span class="s3">\\</span><span class="s1">+)/i, /^(?:-)/i, /^(?:$)/i, /^(?:.)/i],</span><span class="s3">\n      </span><span class="s1">conditions: { </span><span class="s3">\&quot;</span><span class="s1">acc_descr_multiline</span><span class="s3">\&quot;</span><span class="s1">: { </span><span class="s3">\&quot;</span><span class="s1">rules</span><span class="s3">\&quot;</span><span class="s1">: [45, 46], </span><span class="s3">\&quot;</span><span class="s1">inclusive</span><span class="s3">\&quot;</span><span class="s1">: false }, </span><span class="s3">\&quot;</span><span class="s1">acc_descr</span><span class="s3">\&quot;</span><span class="s1">: { </span><span class="s3">\&quot;</span><span class="s1">rules</span><span class="s3">\&quot;</span><span class="s1">: [43], </span><span class="s3">\&quot;</span><span class="s1">inclusive</span><span class="s3">\&quot;</span><span class="s1">: false }, </span><span class="s3">\&quot;</span><span class="s1">acc_title</span><span class="s3">\&quot;</span><span class="s1">: { </span><span class="s3">\&quot;</span><span class="s1">rules</span><span class="s3">\&quot;</span><span class="s1">: [41], </span><span class="s3">\&quot;</span><span class="s1">inclusive</span><span class="s3">\&quot;</span><span class="s1">: false }, </span><span class="s3">\&quot;</span><span class="s1">ID</span><span class="s3">\&quot;</span><span class="s1">: { </span><span class="s3">\&quot;</span><span class="s1">rules</span><span class="s3">\&quot;</span><span class="s1">: [2, 3, 12], </span><span class="s3">\&quot;</span><span class="s1">inclusive</span><span class="s3">\&quot;</span><span class="s1">: false }, </span><span class="s3">\&quot;</span><span class="s1">ALIAS</span><span class="s3">\&quot;</span><span class="s1">: { </span><span class="s3">\&quot;</span><span class="s1">rules</span><span class="s3">\&quot;</span><span class="s1">: [2, 3, 13, 14], </span><span class="s3">\&quot;</span><span class="s1">inclusive</span><span class="s3">\&quot;</span><span class="s1">: false }, </span><span class="s3">\&quot;</span><span class="s1">LINE</span><span class="s3">\&quot;</span><span class="s1">: { </span><span class="s3">\&quot;</span><span class="s1">rules</span><span class="s3">\&quot;</span><span class="s1">: [2, 3, 26], </span><span class="s3">\&quot;</span><span class="s1">inclusive</span><span class="s3">\&quot;</span><span class="s1">: false }, </span><span class="s3">\&quot;</span><span class="s1">INITIAL</span><span class="s3">\&quot;</span><span class="s1">: { </span><span class="s3">\&quot;</span><span class="s1">rules</span><span class="s3">\&quot;</span><span class="s1">: [0, 1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 42, 44, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67], </span><span class="s3">\&quot;</span><span class="s1">inclusive</span><span class="s3">\&quot;</span><span class="s1">: true } }</span><span class="s3">\n    </span><span class="s1">};</span><span class="s3">\n    </span><span class="s1">return lexer2;</span><span class="s3">\n  </span><span class="s1">}();</span><span class="s3">\n  </span><span class="s1">parser2.lexer = lexer;</span><span class="s3">\n  </span><span class="s1">function Parser() {</span><span class="s3">\n    </span><span class="s1">this.yy = {};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">__name(Parser, </span><span class="s3">\&quot;</span><span class="s1">Parser</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">Parser.prototype = parser2;</span><span class="s3">\n  </span><span class="s1">parser2.Parser = Parser;</span><span class="s3">\n  </span><span class="s1">return new Parser();</span><span class="s3">\n</span><span class="s1">}();</span><span class="s3">\n</span><span class="s1">parser.parser = parser;</span><span class="s3">\n</span><span class="s1">var sequenceDiagram_default = parser;</span><span class="s3">\n\n</span><span class="s1">// src/diagrams/sequence/sequenceDb.ts</span><span class="s3">\n</span><span class="s1">var LINETYPE = {</span><span class="s3">\n  </span><span class="s1">SOLID: 0,</span><span class="s3">\n  </span><span class="s1">DOTTED: 1,</span><span class="s3">\n  </span><span class="s1">NOTE: 2,</span><span class="s3">\n  </span><span class="s1">SOLID_CROSS: 3,</span><span class="s3">\n  </span><span class="s1">DOTTED_CROSS: 4,</span><span class="s3">\n  </span><span class="s1">SOLID_OPEN: 5,</span><span class="s3">\n  </span><span class="s1">DOTTED_OPEN: 6,</span><span class="s3">\n  </span><span class="s1">LOOP_START: 10,</span><span class="s3">\n  </span><span class="s1">LOOP_END: 11,</span><span class="s3">\n  </span><span class="s1">ALT_START: 12,</span><span class="s3">\n  </span><span class="s1">ALT_ELSE: 13,</span><span class="s3">\n  </span><span class="s1">ALT_END: 14,</span><span class="s3">\n  </span><span class="s1">OPT_START: 15,</span><span class="s3">\n  </span><span class="s1">OPT_END: 16,</span><span class="s3">\n  </span><span class="s1">ACTIVE_START: 17,</span><span class="s3">\n  </span><span class="s1">ACTIVE_END: 18,</span><span class="s3">\n  </span><span class="s1">PAR_START: 19,</span><span class="s3">\n  </span><span class="s1">PAR_AND: 20,</span><span class="s3">\n  </span><span class="s1">PAR_END: 21,</span><span class="s3">\n  </span><span class="s1">RECT_START: 22,</span><span class="s3">\n  </span><span class="s1">RECT_END: 23,</span><span class="s3">\n  </span><span class="s1">SOLID_POINT: 24,</span><span class="s3">\n  </span><span class="s1">DOTTED_POINT: 25,</span><span class="s3">\n  </span><span class="s1">AUTONUMBER: 26,</span><span class="s3">\n  </span><span class="s1">CRITICAL_START: 27,</span><span class="s3">\n  </span><span class="s1">CRITICAL_OPTION: 28,</span><span class="s3">\n  </span><span class="s1">CRITICAL_END: 29,</span><span class="s3">\n  </span><span class="s1">BREAK_START: 30,</span><span class="s3">\n  </span><span class="s1">BREAK_END: 31,</span><span class="s3">\n  </span><span class="s1">PAR_OVER_START: 32,</span><span class="s3">\n  </span><span class="s1">BIDIRECTIONAL_SOLID: 33,</span><span class="s3">\n  </span><span class="s1">BIDIRECTIONAL_DOTTED: 34</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n</span><span class="s1">var ARROWTYPE = {</span><span class="s3">\n  </span><span class="s1">FILLED: 0,</span><span class="s3">\n  </span><span class="s1">OPEN: 1</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n</span><span class="s1">var PLACEMENT = {</span><span class="s3">\n  </span><span class="s1">LEFTOF: 0,</span><span class="s3">\n  </span><span class="s1">RIGHTOF: 1,</span><span class="s3">\n  </span><span class="s1">OVER: 2</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n</span><span class="s1">var SequenceDB = class {</span><span class="s3">\n  </span><span class="s1">constructor() {</span><span class="s3">\n    </span><span class="s1">this.state = new ImperativeState(() =&gt; ({</span><span class="s3">\n      </span><span class="s1">prevActor: void 0,</span><span class="s3">\n      </span><span class="s1">actors: /* @__PURE__ */ new Map(),</span><span class="s3">\n      </span><span class="s1">createdActors: /* @__PURE__ */ new Map(),</span><span class="s3">\n      </span><span class="s1">destroyedActors: /* @__PURE__ */ new Map(),</span><span class="s3">\n      </span><span class="s1">boxes: [],</span><span class="s3">\n      </span><span class="s1">messages: [],</span><span class="s3">\n      </span><span class="s1">notes: [],</span><span class="s3">\n      </span><span class="s1">sequenceNumbersEnabled: false,</span><span class="s3">\n      </span><span class="s1">wrapEnabled: void 0,</span><span class="s3">\n      </span><span class="s1">currentBox: void 0,</span><span class="s3">\n      </span><span class="s1">lastCreated: void 0,</span><span class="s3">\n      </span><span class="s1">lastDestroyed: void 0</span><span class="s3">\n    </span><span class="s1">}));</span><span class="s3">\n    </span><span class="s1">this.setAccTitle = setAccTitle;</span><span class="s3">\n    </span><span class="s1">this.setAccDescription = setAccDescription;</span><span class="s3">\n    </span><span class="s1">this.setDiagramTitle = setDiagramTitle;</span><span class="s3">\n    </span><span class="s1">this.getAccTitle = getAccTitle;</span><span class="s3">\n    </span><span class="s1">this.getAccDescription = getAccDescription;</span><span class="s3">\n    </span><span class="s1">this.getDiagramTitle = getDiagramTitle;</span><span class="s3">\n    </span><span class="s1">this.apply = this.apply.bind(this);</span><span class="s3">\n    </span><span class="s1">this.parseBoxData = this.parseBoxData.bind(this);</span><span class="s3">\n    </span><span class="s1">this.parseMessage = this.parseMessage.bind(this);</span><span class="s3">\n    </span><span class="s1">this.clear();</span><span class="s3">\n    </span><span class="s1">this.setWrap(getConfig2().wrap);</span><span class="s3">\n    </span><span class="s1">this.LINETYPE = LINETYPE;</span><span class="s3">\n    </span><span class="s1">this.ARROWTYPE = ARROWTYPE;</span><span class="s3">\n    </span><span class="s1">this.PLACEMENT = PLACEMENT;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">static {</span><span class="s3">\n    </span><span class="s1">__name(this, </span><span class="s3">\&quot;</span><span class="s1">SequenceDB</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">addBox(data) {</span><span class="s3">\n    </span><span class="s1">this.state.records.boxes.push({</span><span class="s3">\n      </span><span class="s1">name: data.text,</span><span class="s3">\n      </span><span class="s1">wrap: data.wrap ?? this.autoWrap(),</span><span class="s3">\n      </span><span class="s1">fill: data.color,</span><span class="s3">\n      </span><span class="s1">actorKeys: []</span><span class="s3">\n    </span><span class="s1">});</span><span class="s3">\n    </span><span class="s1">this.state.records.currentBox = this.state.records.boxes.slice(-1)[0];</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">addActor(id, name, description, type) {</span><span class="s3">\n    </span><span class="s1">let assignedBox = this.state.records.currentBox;</span><span class="s3">\n    </span><span class="s1">const old = this.state.records.actors.get(id);</span><span class="s3">\n    </span><span class="s1">if (old) {</span><span class="s3">\n      </span><span class="s1">if (this.state.records.currentBox &amp;&amp; old.box &amp;&amp; this.state.records.currentBox !== old.box) {</span><span class="s3">\n        </span><span class="s1">throw new Error(</span><span class="s3">\n          </span><span class="s1">`A same participant should only be defined in one Box: ${old.name} can't be in '${old.box.name}' and in '${this.state.records.currentBox.name}' at the same time.`</span><span class="s3">\n        </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">assignedBox = old.box ? old.box : this.state.records.currentBox;</span><span class="s3">\n      </span><span class="s1">old.box = assignedBox;</span><span class="s3">\n      </span><span class="s1">if (old &amp;&amp; name === old.name &amp;&amp; description == null) {</span><span class="s3">\n        </span><span class="s1">return;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">if (description?.text == null) {</span><span class="s3">\n      </span><span class="s1">description = { text: name, type };</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">if (type == null || description.text == null) {</span><span class="s3">\n      </span><span class="s1">description = { text: name, type };</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">this.state.records.actors.set(id, {</span><span class="s3">\n      </span><span class="s1">box: assignedBox,</span><span class="s3">\n      </span><span class="s1">name,</span><span class="s3">\n      </span><span class="s1">description: description.text,</span><span class="s3">\n      </span><span class="s1">wrap: description.wrap ?? this.autoWrap(),</span><span class="s3">\n      </span><span class="s1">prevActor: this.state.records.prevActor,</span><span class="s3">\n      </span><span class="s1">links: {},</span><span class="s3">\n      </span><span class="s1">properties: {},</span><span class="s3">\n      </span><span class="s1">actorCnt: null,</span><span class="s3">\n      </span><span class="s1">rectData: null,</span><span class="s3">\n      </span><span class="s1">type: type ?? </span><span class="s3">\&quot;</span><span class="s1">participant</span><span class="s3">\&quot;\n    </span><span class="s1">});</span><span class="s3">\n    </span><span class="s1">if (this.state.records.prevActor) {</span><span class="s3">\n      </span><span class="s1">const prevActorInRecords = this.state.records.actors.get(this.state.records.prevActor);</span><span class="s3">\n      </span><span class="s1">if (prevActorInRecords) {</span><span class="s3">\n        </span><span class="s1">prevActorInRecords.nextActor = id;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">if (this.state.records.currentBox) {</span><span class="s3">\n      </span><span class="s1">this.state.records.currentBox.actorKeys.push(id);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">this.state.records.prevActor = id;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">activationCount(part) {</span><span class="s3">\n    </span><span class="s1">let i;</span><span class="s3">\n    </span><span class="s1">let count = 0;</span><span class="s3">\n    </span><span class="s1">if (!part) {</span><span class="s3">\n      </span><span class="s1">return 0;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">for (i = 0; i &lt; this.state.records.messages.length; i++) {</span><span class="s3">\n      </span><span class="s1">if (this.state.records.messages[i].type === this.LINETYPE.ACTIVE_START &amp;&amp; this.state.records.messages[i].from === part) {</span><span class="s3">\n        </span><span class="s1">count++;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">if (this.state.records.messages[i].type === this.LINETYPE.ACTIVE_END &amp;&amp; this.state.records.messages[i].from === part) {</span><span class="s3">\n        </span><span class="s1">count--;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">return count;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">addMessage(idFrom, idTo, message, answer) {</span><span class="s3">\n    </span><span class="s1">this.state.records.messages.push({</span><span class="s3">\n      </span><span class="s1">id: this.state.records.messages.length.toString(),</span><span class="s3">\n      </span><span class="s1">from: idFrom,</span><span class="s3">\n      </span><span class="s1">to: idTo,</span><span class="s3">\n      </span><span class="s1">message: message.text,</span><span class="s3">\n      </span><span class="s1">wrap: message.wrap ?? this.autoWrap(),</span><span class="s3">\n      </span><span class="s1">answer</span><span class="s3">\n    </span><span class="s1">});</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">addSignal(idFrom, idTo, message, messageType, activate = false) {</span><span class="s3">\n    </span><span class="s1">if (messageType === this.LINETYPE.ACTIVE_END) {</span><span class="s3">\n      </span><span class="s1">const cnt = this.activationCount(idFrom ?? </span><span class="s3">\&quot;\&quot;</span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">if (cnt &lt; 1) {</span><span class="s3">\n        </span><span class="s1">const error = new Error(</span><span class="s3">\&quot;</span><span class="s1">Trying to inactivate an inactive participant (</span><span class="s3">\&quot; </span><span class="s1">+ idFrom + </span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n        </span><span class="s1">error.hash = {</span><span class="s3">\n          </span><span class="s1">text: </span><span class="s3">\&quot;</span><span class="s1">-&gt;&gt;-</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n          </span><span class="s1">token: </span><span class="s3">\&quot;</span><span class="s1">-&gt;&gt;-</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n          </span><span class="s1">line: </span><span class="s3">\&quot;</span><span class="s1">1</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n          </span><span class="s1">loc: { first_line: 1, last_line: 1, first_column: 1, last_column: 1 },</span><span class="s3">\n          </span><span class="s1">expected: [</span><span class="s3">\&quot;</span><span class="s1">'ACTIVE_PARTICIPANT'</span><span class="s3">\&quot;</span><span class="s1">]</span><span class="s3">\n        </span><span class="s1">};</span><span class="s3">\n        </span><span class="s1">throw error;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">this.state.records.messages.push({</span><span class="s3">\n      </span><span class="s1">id: this.state.records.messages.length.toString(),</span><span class="s3">\n      </span><span class="s1">from: idFrom,</span><span class="s3">\n      </span><span class="s1">to: idTo,</span><span class="s3">\n      </span><span class="s1">message: message?.text ?? </span><span class="s3">\&quot;\&quot;</span><span class="s1">,</span><span class="s3">\n      </span><span class="s1">wrap: message?.wrap ?? this.autoWrap(),</span><span class="s3">\n      </span><span class="s1">type: messageType,</span><span class="s3">\n      </span><span class="s1">activate</span><span class="s3">\n    </span><span class="s1">});</span><span class="s3">\n    </span><span class="s1">return true;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">hasAtLeastOneBox() {</span><span class="s3">\n    </span><span class="s1">return this.state.records.boxes.length &gt; 0;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">hasAtLeastOneBoxWithTitle() {</span><span class="s3">\n    </span><span class="s1">return this.state.records.boxes.some((b) =&gt; b.name);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">getMessages() {</span><span class="s3">\n    </span><span class="s1">return this.state.records.messages;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">getBoxes() {</span><span class="s3">\n    </span><span class="s1">return this.state.records.boxes;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">getActors() {</span><span class="s3">\n    </span><span class="s1">return this.state.records.actors;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">getCreatedActors() {</span><span class="s3">\n    </span><span class="s1">return this.state.records.createdActors;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">getDestroyedActors() {</span><span class="s3">\n    </span><span class="s1">return this.state.records.destroyedActors;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">getActor(id) {</span><span class="s3">\n    </span><span class="s1">return this.state.records.actors.get(id);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">getActorKeys() {</span><span class="s3">\n    </span><span class="s1">return [...this.state.records.actors.keys()];</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">enableSequenceNumbers() {</span><span class="s3">\n    </span><span class="s1">this.state.records.sequenceNumbersEnabled = true;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">disableSequenceNumbers() {</span><span class="s3">\n    </span><span class="s1">this.state.records.sequenceNumbersEnabled = false;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">showSequenceNumbers() {</span><span class="s3">\n    </span><span class="s1">return this.state.records.sequenceNumbersEnabled;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">setWrap(wrapSetting) {</span><span class="s3">\n    </span><span class="s1">this.state.records.wrapEnabled = wrapSetting;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">extractWrap(text) {</span><span class="s3">\n    </span><span class="s1">if (text === void 0) {</span><span class="s3">\n      </span><span class="s1">return {};</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">text = text.trim();</span><span class="s3">\n    </span><span class="s1">const wrap = /^:?wrap:/.exec(text) !== null ? true : /^:?nowrap:/.exec(text) !== null ? false : void 0;</span><span class="s3">\n    </span><span class="s1">const cleanedText = (wrap === void 0 ? text : text.replace(/^:?(?:no)?wrap:/, </span><span class="s3">\&quot;\&quot;</span><span class="s1">)).trim();</span><span class="s3">\n    </span><span class="s1">return { cleanedText, wrap };</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">autoWrap() {</span><span class="s3">\n    </span><span class="s1">if (this.state.records.wrapEnabled !== void 0) {</span><span class="s3">\n      </span><span class="s1">return this.state.records.wrapEnabled;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">return getConfig2().sequence?.wrap ?? false;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">clear() {</span><span class="s3">\n    </span><span class="s1">this.state.reset();</span><span class="s3">\n    </span><span class="s1">clear();</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">parseMessage(str) {</span><span class="s3">\n    </span><span class="s1">const trimmedStr = str.trim();</span><span class="s3">\n    </span><span class="s1">const { wrap, cleanedText } = this.extractWrap(trimmedStr);</span><span class="s3">\n    </span><span class="s1">const message = {</span><span class="s3">\n      </span><span class="s1">text: cleanedText,</span><span class="s3">\n      </span><span class="s1">wrap</span><span class="s3">\n    </span><span class="s1">};</span><span class="s3">\n    </span><span class="s1">log.debug(`parseMessage: ${JSON.stringify(message)}`);</span><span class="s3">\n    </span><span class="s1">return message;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">// We expect the box statement to be color first then description</span><span class="s3">\n  </span><span class="s1">// The color can be rgb,rgba,hsl,hsla, or css code names  #hex codes are not supported for now because of the way the char # is handled</span><span class="s3">\n  </span><span class="s1">// We extract first segment as color, the rest of the line is considered as text</span><span class="s3">\n  </span><span class="s1">parseBoxData(str) {</span><span class="s3">\n    </span><span class="s1">const match = /^((?:rgba?|hsla?)</span><span class="s3">\\</span><span class="s1">s*</span><span class="s3">\\</span><span class="s1">(.*</span><span class="s3">\\</span><span class="s1">)|</span><span class="s3">\\</span><span class="s1">w*)(.*)$/.exec(str);</span><span class="s3">\n    </span><span class="s1">let color = match?.[1] ? match[1].trim() : </span><span class="s3">\&quot;</span><span class="s1">transparent</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n    </span><span class="s1">let title = match?.[2] ? match[2].trim() : void 0;</span><span class="s3">\n    </span><span class="s1">if (window?.CSS) {</span><span class="s3">\n      </span><span class="s1">if (!window.CSS.supports(</span><span class="s3">\&quot;</span><span class="s1">color</span><span class="s3">\&quot;</span><span class="s1">, color)) {</span><span class="s3">\n        </span><span class="s1">color = </span><span class="s3">\&quot;</span><span class="s1">transparent</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n        </span><span class="s1">title = str.trim();</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">const style = new Option().style;</span><span class="s3">\n      </span><span class="s1">style.color = color;</span><span class="s3">\n      </span><span class="s1">if (style.color !== color) {</span><span class="s3">\n        </span><span class="s1">color = </span><span class="s3">\&quot;</span><span class="s1">transparent</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n        </span><span class="s1">title = str.trim();</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">const { wrap, cleanedText } = this.extractWrap(title);</span><span class="s3">\n    </span><span class="s1">return {</span><span class="s3">\n      </span><span class="s1">text: cleanedText ? sanitizeText(cleanedText, getConfig2()) : void 0,</span><span class="s3">\n      </span><span class="s1">color,</span><span class="s3">\n      </span><span class="s1">wrap</span><span class="s3">\n    </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">addNote(actor, placement, message) {</span><span class="s3">\n    </span><span class="s1">const note = {</span><span class="s3">\n      </span><span class="s1">actor,</span><span class="s3">\n      </span><span class="s1">placement,</span><span class="s3">\n      </span><span class="s1">message: message.text,</span><span class="s3">\n      </span><span class="s1">wrap: message.wrap ?? this.autoWrap()</span><span class="s3">\n    </span><span class="s1">};</span><span class="s3">\n    </span><span class="s1">const actors = [].concat(actor, actor);</span><span class="s3">\n    </span><span class="s1">this.state.records.notes.push(note);</span><span class="s3">\n    </span><span class="s1">this.state.records.messages.push({</span><span class="s3">\n      </span><span class="s1">id: this.state.records.messages.length.toString(),</span><span class="s3">\n      </span><span class="s1">from: actors[0],</span><span class="s3">\n      </span><span class="s1">to: actors[1],</span><span class="s3">\n      </span><span class="s1">message: message.text,</span><span class="s3">\n      </span><span class="s1">wrap: message.wrap ?? this.autoWrap(),</span><span class="s3">\n      </span><span class="s1">type: this.LINETYPE.NOTE,</span><span class="s3">\n      </span><span class="s1">placement</span><span class="s3">\n    </span><span class="s1">});</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">addLinks(actorId, text) {</span><span class="s3">\n    </span><span class="s1">const actor = this.getActor(actorId);</span><span class="s3">\n    </span><span class="s1">try {</span><span class="s3">\n      </span><span class="s1">let sanitizedText = sanitizeText(text.text, getConfig2());</span><span class="s3">\n      </span><span class="s1">sanitizedText = sanitizedText.replace(/&amp;equals;/g, </span><span class="s3">\&quot;</span><span class="s1">=</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">sanitizedText = sanitizedText.replace(/&amp;amp;/g, </span><span class="s3">\&quot;</span><span class="s1">&amp;</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">const links = JSON.parse(sanitizedText);</span><span class="s3">\n      </span><span class="s1">this.insertLinks(actor, links);</span><span class="s3">\n    </span><span class="s1">} catch (e) {</span><span class="s3">\n      </span><span class="s1">log.error(</span><span class="s3">\&quot;</span><span class="s1">error while parsing actor link text</span><span class="s3">\&quot;</span><span class="s1">, e);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">addALink(actorId, text) {</span><span class="s3">\n    </span><span class="s1">const actor = this.getActor(actorId);</span><span class="s3">\n    </span><span class="s1">try {</span><span class="s3">\n      </span><span class="s1">const links = {};</span><span class="s3">\n      </span><span class="s1">let sanitizedText = sanitizeText(text.text, getConfig2());</span><span class="s3">\n      </span><span class="s1">const sep = sanitizedText.indexOf(</span><span class="s3">\&quot;</span><span class="s1">@</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">sanitizedText = sanitizedText.replace(/&amp;equals;/g, </span><span class="s3">\&quot;</span><span class="s1">=</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">sanitizedText = sanitizedText.replace(/&amp;amp;/g, </span><span class="s3">\&quot;</span><span class="s1">&amp;</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">const label = sanitizedText.slice(0, sep - 1).trim();</span><span class="s3">\n      </span><span class="s1">const link = sanitizedText.slice(sep + 1).trim();</span><span class="s3">\n      </span><span class="s1">links[label] = link;</span><span class="s3">\n      </span><span class="s1">this.insertLinks(actor, links);</span><span class="s3">\n    </span><span class="s1">} catch (e) {</span><span class="s3">\n      </span><span class="s1">log.error(</span><span class="s3">\&quot;</span><span class="s1">error while parsing actor link text</span><span class="s3">\&quot;</span><span class="s1">, e);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">insertLinks(actor, links) {</span><span class="s3">\n    </span><span class="s1">if (actor.links == null) {</span><span class="s3">\n      </span><span class="s1">actor.links = links;</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">for (const key in links) {</span><span class="s3">\n        </span><span class="s1">actor.links[key] = links[key];</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">addProperties(actorId, text) {</span><span class="s3">\n    </span><span class="s1">const actor = this.getActor(actorId);</span><span class="s3">\n    </span><span class="s1">try {</span><span class="s3">\n      </span><span class="s1">const sanitizedText = sanitizeText(text.text, getConfig2());</span><span class="s3">\n      </span><span class="s1">const properties = JSON.parse(sanitizedText);</span><span class="s3">\n      </span><span class="s1">this.insertProperties(actor, properties);</span><span class="s3">\n    </span><span class="s1">} catch (e) {</span><span class="s3">\n      </span><span class="s1">log.error(</span><span class="s3">\&quot;</span><span class="s1">error while parsing actor properties text</span><span class="s3">\&quot;</span><span class="s1">, e);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">insertProperties(actor, properties) {</span><span class="s3">\n    </span><span class="s1">if (actor.properties == null) {</span><span class="s3">\n      </span><span class="s1">actor.properties = properties;</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">for (const key in properties) {</span><span class="s3">\n        </span><span class="s1">actor.properties[key] = properties[key];</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">boxEnd() {</span><span class="s3">\n    </span><span class="s1">this.state.records.currentBox = void 0;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">addDetails(actorId, text) {</span><span class="s3">\n    </span><span class="s1">const actor = this.getActor(actorId);</span><span class="s3">\n    </span><span class="s1">const elem = document.getElementById(text.text);</span><span class="s3">\n    </span><span class="s1">try {</span><span class="s3">\n      </span><span class="s1">const text2 = elem.innerHTML;</span><span class="s3">\n      </span><span class="s1">const details = JSON.parse(text2);</span><span class="s3">\n      </span><span class="s1">if (details.properties) {</span><span class="s3">\n        </span><span class="s1">this.insertProperties(actor, details.properties);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">if (details.links) {</span><span class="s3">\n        </span><span class="s1">this.insertLinks(actor, details.links);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">} catch (e) {</span><span class="s3">\n      </span><span class="s1">log.error(</span><span class="s3">\&quot;</span><span class="s1">error while parsing actor details text</span><span class="s3">\&quot;</span><span class="s1">, e);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">getActorProperty(actor, key) {</span><span class="s3">\n    </span><span class="s1">if (actor?.properties !== void 0) {</span><span class="s3">\n      </span><span class="s1">return actor.properties[key];</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">return void 0;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">// eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/no-redundant-type-constituents</span><span class="s3">\n  </span><span class="s1">apply(param) {</span><span class="s3">\n    </span><span class="s1">if (Array.isArray(param)) {</span><span class="s3">\n      </span><span class="s1">param.forEach((item) =&gt; {</span><span class="s3">\n        </span><span class="s1">this.apply(item);</span><span class="s3">\n      </span><span class="s1">});</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">switch (param.type) {</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">sequenceIndex</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          </span><span class="s1">this.state.records.messages.push({</span><span class="s3">\n            </span><span class="s1">id: this.state.records.messages.length.toString(),</span><span class="s3">\n            </span><span class="s1">from: void 0,</span><span class="s3">\n            </span><span class="s1">to: void 0,</span><span class="s3">\n            </span><span class="s1">message: {</span><span class="s3">\n              </span><span class="s1">start: param.sequenceIndex,</span><span class="s3">\n              </span><span class="s1">step: param.sequenceIndexStep,</span><span class="s3">\n              </span><span class="s1">visible: param.sequenceVisible</span><span class="s3">\n            </span><span class="s1">},</span><span class="s3">\n            </span><span class="s1">wrap: false,</span><span class="s3">\n            </span><span class="s1">type: param.signalType</span><span class="s3">\n          </span><span class="s1">});</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">addParticipant</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          </span><span class="s1">this.addActor(param.actor, param.actor, param.description, param.draw);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">createParticipant</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          </span><span class="s1">if (this.state.records.actors.has(param.actor)) {</span><span class="s3">\n            </span><span class="s1">throw new Error(</span><span class="s3">\n              \&quot;</span><span class="s1">It is not possible to have actors with the same id, even if one is destroyed before the next is created. Use 'AS' aliases to simulate the behavior</span><span class="s3">\&quot;\n            </span><span class="s1">);</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">this.state.records.lastCreated = param.actor;</span><span class="s3">\n          </span><span class="s1">this.addActor(param.actor, param.actor, param.description, param.draw);</span><span class="s3">\n          </span><span class="s1">this.state.records.createdActors.set(param.actor, this.state.records.messages.length);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">destroyParticipant</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          </span><span class="s1">this.state.records.lastDestroyed = param.actor;</span><span class="s3">\n          </span><span class="s1">this.state.records.destroyedActors.set(param.actor, this.state.records.messages.length);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">activeStart</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          </span><span class="s1">this.addSignal(param.actor, void 0, void 0, param.signalType);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">activeEnd</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          </span><span class="s1">this.addSignal(param.actor, void 0, void 0, param.signalType);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">addNote</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          </span><span class="s1">this.addNote(param.actor, param.placement, param.text);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">addLinks</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          </span><span class="s1">this.addLinks(param.actor, param.text);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">addALink</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          </span><span class="s1">this.addALink(param.actor, param.text);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">addProperties</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          </span><span class="s1">this.addProperties(param.actor, param.text);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">addDetails</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          </span><span class="s1">this.addDetails(param.actor, param.text);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">addMessage</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          </span><span class="s1">if (this.state.records.lastCreated) {</span><span class="s3">\n            </span><span class="s1">if (param.to !== this.state.records.lastCreated) {</span><span class="s3">\n              </span><span class="s1">throw new Error(</span><span class="s3">\n                \&quot;</span><span class="s1">The created participant </span><span class="s3">\&quot; </span><span class="s1">+ this.state.records.lastCreated.name + </span><span class="s3">\&quot; </span><span class="s1">does not have an associated creating message after its declaration. Please check the sequence diagram.</span><span class="s3">\&quot;\n              </span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">} else {</span><span class="s3">\n              </span><span class="s1">this.state.records.lastCreated = void 0;</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">} else if (this.state.records.lastDestroyed) {</span><span class="s3">\n            </span><span class="s1">if (param.to !== this.state.records.lastDestroyed &amp;&amp; param.from !== this.state.records.lastDestroyed) {</span><span class="s3">\n              </span><span class="s1">throw new Error(</span><span class="s3">\n                \&quot;</span><span class="s1">The destroyed participant </span><span class="s3">\&quot; </span><span class="s1">+ this.state.records.lastDestroyed.name + </span><span class="s3">\&quot; </span><span class="s1">does not have an associated destroying message after its declaration. Please check the sequence diagram.</span><span class="s3">\&quot;\n              </span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">} else {</span><span class="s3">\n              </span><span class="s1">this.state.records.lastDestroyed = void 0;</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">this.addSignal(param.from, param.to, param.msg, param.signalType, param.activate);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">boxStart</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          </span><span class="s1">this.addBox(param.boxData);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">boxEnd</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          </span><span class="s1">this.boxEnd();</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">loopStart</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          </span><span class="s1">this.addSignal(void 0, void 0, param.loopText, param.signalType);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">loopEnd</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          </span><span class="s1">this.addSignal(void 0, void 0, void 0, param.signalType);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">rectStart</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          </span><span class="s1">this.addSignal(void 0, void 0, param.color, param.signalType);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">rectEnd</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          </span><span class="s1">this.addSignal(void 0, void 0, void 0, param.signalType);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">optStart</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          </span><span class="s1">this.addSignal(void 0, void 0, param.optText, param.signalType);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">optEnd</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          </span><span class="s1">this.addSignal(void 0, void 0, void 0, param.signalType);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">altStart</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          </span><span class="s1">this.addSignal(void 0, void 0, param.altText, param.signalType);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">else</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          </span><span class="s1">this.addSignal(void 0, void 0, param.altText, param.signalType);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">altEnd</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          </span><span class="s1">this.addSignal(void 0, void 0, void 0, param.signalType);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">setAccTitle</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          </span><span class="s1">setAccTitle(param.text);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">parStart</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          </span><span class="s1">this.addSignal(void 0, void 0, param.parText, param.signalType);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">and</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          </span><span class="s1">this.addSignal(void 0, void 0, param.parText, param.signalType);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">parEnd</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          </span><span class="s1">this.addSignal(void 0, void 0, void 0, param.signalType);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">criticalStart</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          </span><span class="s1">this.addSignal(void 0, void 0, param.criticalText, param.signalType);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">option</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          </span><span class="s1">this.addSignal(void 0, void 0, param.optionText, param.signalType);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">criticalEnd</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          </span><span class="s1">this.addSignal(void 0, void 0, void 0, param.signalType);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">breakStart</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          </span><span class="s1">this.addSignal(void 0, void 0, param.breakText, param.signalType);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">breakEnd</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          </span><span class="s1">this.addSignal(void 0, void 0, void 0, param.signalType);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">getConfig() {</span><span class="s3">\n    </span><span class="s1">return getConfig2().sequence;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n\n</span><span class="s1">// src/diagrams/sequence/styles.js</span><span class="s3">\n</span><span class="s1">var getStyles = /* @__PURE__ */ __name((options) =&gt; `.actor {</span><span class="s3">\n    </span><span class="s1">stroke: ${options.actorBorder};</span><span class="s3">\n    </span><span class="s1">fill: ${options.actorBkg};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">text.actor &gt; tspan {</span><span class="s3">\n    </span><span class="s1">fill: ${options.actorTextColor};</span><span class="s3">\n    </span><span class="s1">stroke: none;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">.actor-line {</span><span class="s3">\n    </span><span class="s1">stroke: ${options.actorLineColor};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">.messageLine0 {</span><span class="s3">\n    </span><span class="s1">stroke-width: 1.5;</span><span class="s3">\n    </span><span class="s1">stroke-dasharray: none;</span><span class="s3">\n    </span><span class="s1">stroke: ${options.signalColor};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">.messageLine1 {</span><span class="s3">\n    </span><span class="s1">stroke-width: 1.5;</span><span class="s3">\n    </span><span class="s1">stroke-dasharray: 2, 2;</span><span class="s3">\n    </span><span class="s1">stroke: ${options.signalColor};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">#arrowhead path {</span><span class="s3">\n    </span><span class="s1">fill: ${options.signalColor};</span><span class="s3">\n    </span><span class="s1">stroke: ${options.signalColor};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">.sequenceNumber {</span><span class="s3">\n    </span><span class="s1">fill: ${options.sequenceNumberColor};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">#sequencenumber {</span><span class="s3">\n    </span><span class="s1">fill: ${options.signalColor};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">#crosshead path {</span><span class="s3">\n    </span><span class="s1">fill: ${options.signalColor};</span><span class="s3">\n    </span><span class="s1">stroke: ${options.signalColor};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">.messageText {</span><span class="s3">\n    </span><span class="s1">fill: ${options.signalTextColor};</span><span class="s3">\n    </span><span class="s1">stroke: none;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">.labelBox {</span><span class="s3">\n    </span><span class="s1">stroke: ${options.labelBoxBorderColor};</span><span class="s3">\n    </span><span class="s1">fill: ${options.labelBoxBkgColor};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">.labelText, .labelText &gt; tspan {</span><span class="s3">\n    </span><span class="s1">fill: ${options.labelTextColor};</span><span class="s3">\n    </span><span class="s1">stroke: none;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">.loopText, .loopText &gt; tspan {</span><span class="s3">\n    </span><span class="s1">fill: ${options.loopTextColor};</span><span class="s3">\n    </span><span class="s1">stroke: none;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">.loopLine {</span><span class="s3">\n    </span><span class="s1">stroke-width: 2px;</span><span class="s3">\n    </span><span class="s1">stroke-dasharray: 2, 2;</span><span class="s3">\n    </span><span class="s1">stroke: ${options.labelBoxBorderColor};</span><span class="s3">\n    </span><span class="s1">fill: ${options.labelBoxBorderColor};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">.note {</span><span class="s3">\n    </span><span class="s1">//stroke: #decc93;</span><span class="s3">\n    </span><span class="s1">stroke: ${options.noteBorderColor};</span><span class="s3">\n    </span><span class="s1">fill: ${options.noteBkgColor};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">.noteText, .noteText &gt; tspan {</span><span class="s3">\n    </span><span class="s1">fill: ${options.noteTextColor};</span><span class="s3">\n    </span><span class="s1">stroke: none;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">.activation0 {</span><span class="s3">\n    </span><span class="s1">fill: ${options.activationBkgColor};</span><span class="s3">\n    </span><span class="s1">stroke: ${options.activationBorderColor};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">.activation1 {</span><span class="s3">\n    </span><span class="s1">fill: ${options.activationBkgColor};</span><span class="s3">\n    </span><span class="s1">stroke: ${options.activationBorderColor};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">.activation2 {</span><span class="s3">\n    </span><span class="s1">fill: ${options.activationBkgColor};</span><span class="s3">\n    </span><span class="s1">stroke: ${options.activationBorderColor};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">.actorPopupMenu {</span><span class="s3">\n    </span><span class="s1">position: absolute;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">.actorPopupMenuPanel {</span><span class="s3">\n    </span><span class="s1">position: absolute;</span><span class="s3">\n    </span><span class="s1">fill: ${options.actorBkg};</span><span class="s3">\n    </span><span class="s1">box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);</span><span class="s3">\n    </span><span class="s1">filter: drop-shadow(3px 5px 2px rgb(0 0 0 / 0.4));</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">.actor-man line {</span><span class="s3">\n    </span><span class="s1">stroke: ${options.actorBorder};</span><span class="s3">\n    </span><span class="s1">fill: ${options.actorBkg};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">.actor-man circle, line {</span><span class="s3">\n    </span><span class="s1">stroke: ${options.actorBorder};</span><span class="s3">\n    </span><span class="s1">fill: ${options.actorBkg};</span><span class="s3">\n    </span><span class="s1">stroke-width: 2px;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">`, </span><span class="s3">\&quot;</span><span class="s1">getStyles</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var styles_default = getStyles;</span><span class="s3">\n\n</span><span class="s1">// src/diagrams/sequence/sequenceRenderer.ts</span><span class="s3">\n</span><span class="s1">import { select } from </span><span class="s3">\&quot;</span><span class="s1">d3</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n\n</span><span class="s1">// src/diagrams/sequence/svgDraw.js</span><span class="s3">\n</span><span class="s1">import { sanitizeUrl } from </span><span class="s3">\&quot;</span><span class="s1">@braintree/sanitize-url</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">var ACTOR_TYPE_WIDTH = 18 * 2;</span><span class="s3">\n</span><span class="s1">var TOP_ACTOR_CLASS = </span><span class="s3">\&quot;</span><span class="s1">actor-top</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">var BOTTOM_ACTOR_CLASS = </span><span class="s3">\&quot;</span><span class="s1">actor-bottom</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">var ACTOR_BOX_CLASS = </span><span class="s3">\&quot;</span><span class="s1">actor-box</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">var ACTOR_MAN_FIGURE_CLASS = </span><span class="s3">\&quot;</span><span class="s1">actor-man</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">var drawRect2 = /* @__PURE__ */ __name(function(elem, rectData) {</span><span class="s3">\n  </span><span class="s1">return drawRect(elem, rectData);</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">drawRect</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var drawPopup = /* @__PURE__ */ __name(function(elem, actor, minMenuWidth, textAttrs, forceMenus) {</span><span class="s3">\n  </span><span class="s1">if (actor.links === void 0 || actor.links === null || Object.keys(actor.links).length === 0) {</span><span class="s3">\n    </span><span class="s1">return { height: 0, width: 0 };</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">const links = actor.links;</span><span class="s3">\n  </span><span class="s1">const actorCnt2 = actor.actorCnt;</span><span class="s3">\n  </span><span class="s1">const rectData = actor.rectData;</span><span class="s3">\n  </span><span class="s1">var displayValue = </span><span class="s3">\&quot;</span><span class="s1">none</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">if (forceMenus) {</span><span class="s3">\n    </span><span class="s1">displayValue = </span><span class="s3">\&quot;</span><span class="s1">block !important</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">const g = elem.append(</span><span class="s3">\&quot;</span><span class="s1">g</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">g.attr(</span><span class="s3">\&quot;</span><span class="s1">id</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">actor</span><span class="s3">\&quot; </span><span class="s1">+ actorCnt2 + </span><span class="s3">\&quot;</span><span class="s1">_popup</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">g.attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">actorPopupMenu</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">g.attr(</span><span class="s3">\&quot;</span><span class="s1">display</span><span class="s3">\&quot;</span><span class="s1">, displayValue);</span><span class="s3">\n  </span><span class="s1">var actorClass = </span><span class="s3">\&quot;\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">if (rectData.class !== void 0) {</span><span class="s3">\n    </span><span class="s1">actorClass = </span><span class="s3">\&quot; \&quot; </span><span class="s1">+ rectData.class;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">let menuWidth = rectData.width &gt; minMenuWidth ? rectData.width : minMenuWidth;</span><span class="s3">\n  </span><span class="s1">const rectElem = g.append(</span><span class="s3">\&quot;</span><span class="s1">rect</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">rectElem.attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">actorPopupMenuPanel</span><span class="s3">\&quot; </span><span class="s1">+ actorClass);</span><span class="s3">\n  </span><span class="s1">rectElem.attr(</span><span class="s3">\&quot;</span><span class="s1">x</span><span class="s3">\&quot;</span><span class="s1">, rectData.x);</span><span class="s3">\n  </span><span class="s1">rectElem.attr(</span><span class="s3">\&quot;</span><span class="s1">y</span><span class="s3">\&quot;</span><span class="s1">, rectData.height);</span><span class="s3">\n  </span><span class="s1">rectElem.attr(</span><span class="s3">\&quot;</span><span class="s1">fill</span><span class="s3">\&quot;</span><span class="s1">, rectData.fill);</span><span class="s3">\n  </span><span class="s1">rectElem.attr(</span><span class="s3">\&quot;</span><span class="s1">stroke</span><span class="s3">\&quot;</span><span class="s1">, rectData.stroke);</span><span class="s3">\n  </span><span class="s1">rectElem.attr(</span><span class="s3">\&quot;</span><span class="s1">width</span><span class="s3">\&quot;</span><span class="s1">, menuWidth);</span><span class="s3">\n  </span><span class="s1">rectElem.attr(</span><span class="s3">\&quot;</span><span class="s1">height</span><span class="s3">\&quot;</span><span class="s1">, rectData.height);</span><span class="s3">\n  </span><span class="s1">rectElem.attr(</span><span class="s3">\&quot;</span><span class="s1">rx</span><span class="s3">\&quot;</span><span class="s1">, rectData.rx);</span><span class="s3">\n  </span><span class="s1">rectElem.attr(</span><span class="s3">\&quot;</span><span class="s1">ry</span><span class="s3">\&quot;</span><span class="s1">, rectData.ry);</span><span class="s3">\n  </span><span class="s1">if (links != null) {</span><span class="s3">\n    </span><span class="s1">var linkY = 20;</span><span class="s3">\n    </span><span class="s1">for (let key in links) {</span><span class="s3">\n      </span><span class="s1">var linkElem = g.append(</span><span class="s3">\&quot;</span><span class="s1">a</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">var sanitizedLink = sanitizeUrl(links[key]);</span><span class="s3">\n      </span><span class="s1">linkElem.attr(</span><span class="s3">\&quot;</span><span class="s1">xlink:href</span><span class="s3">\&quot;</span><span class="s1">, sanitizedLink);</span><span class="s3">\n      </span><span class="s1">linkElem.attr(</span><span class="s3">\&quot;</span><span class="s1">target</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">_blank</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">_drawMenuItemTextCandidateFunc(textAttrs)(</span><span class="s3">\n        </span><span class="s1">key,</span><span class="s3">\n        </span><span class="s1">linkElem,</span><span class="s3">\n        </span><span class="s1">rectData.x + 10,</span><span class="s3">\n        </span><span class="s1">rectData.height + linkY,</span><span class="s3">\n        </span><span class="s1">menuWidth,</span><span class="s3">\n        </span><span class="s1">20,</span><span class="s3">\n        </span><span class="s1">{ class: </span><span class="s3">\&quot;</span><span class="s1">actor</span><span class="s3">\&quot; </span><span class="s1">},</span><span class="s3">\n        </span><span class="s1">textAttrs</span><span class="s3">\n      </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">linkY += 30;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">rectElem.attr(</span><span class="s3">\&quot;</span><span class="s1">height</span><span class="s3">\&quot;</span><span class="s1">, linkY);</span><span class="s3">\n  </span><span class="s1">return { height: rectData.height + linkY, width: menuWidth };</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">drawPopup</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var popupMenuToggle = /* @__PURE__ */ __name(function(popId) {</span><span class="s3">\n  </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">var pu = document.getElementById('</span><span class="s3">\&quot; </span><span class="s1">+ popId + </span><span class="s3">\&quot;</span><span class="s1">'); if (pu != null) { pu.style.display = pu.style.display == 'block' ? 'none' : 'block'; }</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">popupMenuToggle</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var drawKatex = /* @__PURE__ */ __name(async function(elem, textData, msgModel = null) {</span><span class="s3">\n  </span><span class="s1">let textElem = elem.append(</span><span class="s3">\&quot;</span><span class="s1">foreignObject</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const lines = await renderKatex(textData.text, getConfig());</span><span class="s3">\n  </span><span class="s1">const divElem = textElem.append(</span><span class="s3">\&quot;</span><span class="s1">xhtml:div</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">style</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">width: fit-content;</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">xmlns</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">http://www.w3.org/1999/xhtml</span><span class="s3">\&quot;</span><span class="s1">).html(lines);</span><span class="s3">\n  </span><span class="s1">const dim = divElem.node().getBoundingClientRect();</span><span class="s3">\n  </span><span class="s1">textElem.attr(</span><span class="s3">\&quot;</span><span class="s1">height</span><span class="s3">\&quot;</span><span class="s1">, Math.round(dim.height)).attr(</span><span class="s3">\&quot;</span><span class="s1">width</span><span class="s3">\&quot;</span><span class="s1">, Math.round(dim.width));</span><span class="s3">\n  </span><span class="s1">if (textData.class === </span><span class="s3">\&quot;</span><span class="s1">noteText</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">const rectElem = elem.node().firstChild;</span><span class="s3">\n    </span><span class="s1">rectElem.setAttribute(</span><span class="s3">\&quot;</span><span class="s1">height</span><span class="s3">\&quot;</span><span class="s1">, dim.height + 2 * textData.textMargin);</span><span class="s3">\n    </span><span class="s1">const rectDim = rectElem.getBBox();</span><span class="s3">\n    </span><span class="s1">textElem.attr(</span><span class="s3">\&quot;</span><span class="s1">x</span><span class="s3">\&quot;</span><span class="s1">, Math.round(rectDim.x + rectDim.width / 2 - dim.width / 2)).attr(</span><span class="s3">\&quot;</span><span class="s1">y</span><span class="s3">\&quot;</span><span class="s1">, Math.round(rectDim.y + rectDim.height / 2 - dim.height / 2));</span><span class="s3">\n  </span><span class="s1">} else if (msgModel) {</span><span class="s3">\n    </span><span class="s1">let { startx, stopx, starty } = msgModel;</span><span class="s3">\n    </span><span class="s1">if (startx &gt; stopx) {</span><span class="s3">\n      </span><span class="s1">const temp = startx;</span><span class="s3">\n      </span><span class="s1">startx = stopx;</span><span class="s3">\n      </span><span class="s1">stopx = temp;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">textElem.attr(</span><span class="s3">\&quot;</span><span class="s1">x</span><span class="s3">\&quot;</span><span class="s1">, Math.round(startx + Math.abs(startx - stopx) / 2 - dim.width / 2));</span><span class="s3">\n    </span><span class="s1">if (textData.class === </span><span class="s3">\&quot;</span><span class="s1">loopText</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">textElem.attr(</span><span class="s3">\&quot;</span><span class="s1">y</span><span class="s3">\&quot;</span><span class="s1">, Math.round(starty));</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">textElem.attr(</span><span class="s3">\&quot;</span><span class="s1">y</span><span class="s3">\&quot;</span><span class="s1">, Math.round(starty - dim.height));</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return [textElem];</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">drawKatex</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var drawText = /* @__PURE__ */ __name(function(elem, textData) {</span><span class="s3">\n  </span><span class="s1">let prevTextHeight = 0;</span><span class="s3">\n  </span><span class="s1">let textHeight = 0;</span><span class="s3">\n  </span><span class="s1">const lines = textData.text.split(common_default.lineBreakRegex);</span><span class="s3">\n  </span><span class="s1">const [_textFontSize, _textFontSizePx] = parseFontSize(textData.fontSize);</span><span class="s3">\n  </span><span class="s1">let textElems = [];</span><span class="s3">\n  </span><span class="s1">let dy = 0;</span><span class="s3">\n  </span><span class="s1">let yfunc = /* @__PURE__ */ __name(() =&gt; textData.y, </span><span class="s3">\&quot;</span><span class="s1">yfunc</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">if (textData.valign !== void 0 &amp;&amp; textData.textMargin !== void 0 &amp;&amp; textData.textMargin &gt; 0) {</span><span class="s3">\n    </span><span class="s1">switch (textData.valign) {</span><span class="s3">\n      </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">top</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n      </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">start</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n        </span><span class="s1">yfunc = /* @__PURE__ */ __name(() =&gt; Math.round(textData.y + textData.textMargin), </span><span class="s3">\&quot;</span><span class="s1">yfunc</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n        </span><span class="s1">break;</span><span class="s3">\n      </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">middle</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n      </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">center</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n        </span><span class="s1">yfunc = /* @__PURE__ */ __name(() =&gt; Math.round(textData.y + (prevTextHeight + textHeight + textData.textMargin) / 2), </span><span class="s3">\&quot;</span><span class="s1">yfunc</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n        </span><span class="s1">break;</span><span class="s3">\n      </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">bottom</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n      </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">end</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n        </span><span class="s1">yfunc = /* @__PURE__ */ __name(() =&gt; Math.round(</span><span class="s3">\n          </span><span class="s1">textData.y + (prevTextHeight + textHeight + 2 * textData.textMargin) - textData.textMargin</span><span class="s3">\n        </span><span class="s1">), </span><span class="s3">\&quot;</span><span class="s1">yfunc</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n        </span><span class="s1">break;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (textData.anchor !== void 0 &amp;&amp; textData.textMargin !== void 0 &amp;&amp; textData.width !== void 0) {</span><span class="s3">\n    </span><span class="s1">switch (textData.anchor) {</span><span class="s3">\n      </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">left</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n      </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">start</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n        </span><span class="s1">textData.x = Math.round(textData.x + textData.textMargin);</span><span class="s3">\n        </span><span class="s1">textData.anchor = </span><span class="s3">\&quot;</span><span class="s1">start</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n        </span><span class="s1">textData.dominantBaseline = </span><span class="s3">\&quot;</span><span class="s1">middle</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n        </span><span class="s1">textData.alignmentBaseline = </span><span class="s3">\&quot;</span><span class="s1">middle</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n        </span><span class="s1">break;</span><span class="s3">\n      </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">middle</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n      </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">center</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n        </span><span class="s1">textData.x = Math.round(textData.x + textData.width / 2);</span><span class="s3">\n        </span><span class="s1">textData.anchor = </span><span class="s3">\&quot;</span><span class="s1">middle</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n        </span><span class="s1">textData.dominantBaseline = </span><span class="s3">\&quot;</span><span class="s1">middle</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n        </span><span class="s1">textData.alignmentBaseline = </span><span class="s3">\&quot;</span><span class="s1">middle</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n        </span><span class="s1">break;</span><span class="s3">\n      </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">right</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n      </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">end</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n        </span><span class="s1">textData.x = Math.round(textData.x + textData.width - textData.textMargin);</span><span class="s3">\n        </span><span class="s1">textData.anchor = </span><span class="s3">\&quot;</span><span class="s1">end</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n        </span><span class="s1">textData.dominantBaseline = </span><span class="s3">\&quot;</span><span class="s1">middle</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n        </span><span class="s1">textData.alignmentBaseline = </span><span class="s3">\&quot;</span><span class="s1">middle</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n        </span><span class="s1">break;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">for (let [i, line] of lines.entries()) {</span><span class="s3">\n    </span><span class="s1">if (textData.textMargin !== void 0 &amp;&amp; textData.textMargin === 0 &amp;&amp; _textFontSize !== void 0) {</span><span class="s3">\n      </span><span class="s1">dy = i * _textFontSize;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">const textElem = elem.append(</span><span class="s3">\&quot;</span><span class="s1">text</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">textElem.attr(</span><span class="s3">\&quot;</span><span class="s1">x</span><span class="s3">\&quot;</span><span class="s1">, textData.x);</span><span class="s3">\n    </span><span class="s1">textElem.attr(</span><span class="s3">\&quot;</span><span class="s1">y</span><span class="s3">\&quot;</span><span class="s1">, yfunc());</span><span class="s3">\n    </span><span class="s1">if (textData.anchor !== void 0) {</span><span class="s3">\n      </span><span class="s1">textElem.attr(</span><span class="s3">\&quot;</span><span class="s1">text-anchor</span><span class="s3">\&quot;</span><span class="s1">, textData.anchor).attr(</span><span class="s3">\&quot;</span><span class="s1">dominant-baseline</span><span class="s3">\&quot;</span><span class="s1">, textData.dominantBaseline).attr(</span><span class="s3">\&quot;</span><span class="s1">alignment-baseline</span><span class="s3">\&quot;</span><span class="s1">, textData.alignmentBaseline);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">if (textData.fontFamily !== void 0) {</span><span class="s3">\n      </span><span class="s1">textElem.style(</span><span class="s3">\&quot;</span><span class="s1">font-family</span><span class="s3">\&quot;</span><span class="s1">, textData.fontFamily);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">if (_textFontSizePx !== void 0) {</span><span class="s3">\n      </span><span class="s1">textElem.style(</span><span class="s3">\&quot;</span><span class="s1">font-size</span><span class="s3">\&quot;</span><span class="s1">, _textFontSizePx);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">if (textData.fontWeight !== void 0) {</span><span class="s3">\n      </span><span class="s1">textElem.style(</span><span class="s3">\&quot;</span><span class="s1">font-weight</span><span class="s3">\&quot;</span><span class="s1">, textData.fontWeight);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">if (textData.fill !== void 0) {</span><span class="s3">\n      </span><span class="s1">textElem.attr(</span><span class="s3">\&quot;</span><span class="s1">fill</span><span class="s3">\&quot;</span><span class="s1">, textData.fill);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">if (textData.class !== void 0) {</span><span class="s3">\n      </span><span class="s1">textElem.attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, textData.class);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">if (textData.dy !== void 0) {</span><span class="s3">\n      </span><span class="s1">textElem.attr(</span><span class="s3">\&quot;</span><span class="s1">dy</span><span class="s3">\&quot;</span><span class="s1">, textData.dy);</span><span class="s3">\n    </span><span class="s1">} else if (dy !== 0) {</span><span class="s3">\n      </span><span class="s1">textElem.attr(</span><span class="s3">\&quot;</span><span class="s1">dy</span><span class="s3">\&quot;</span><span class="s1">, dy);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">const text = line || ZERO_WIDTH_SPACE;</span><span class="s3">\n    </span><span class="s1">if (textData.tspan) {</span><span class="s3">\n      </span><span class="s1">const span = textElem.append(</span><span class="s3">\&quot;</span><span class="s1">tspan</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">span.attr(</span><span class="s3">\&quot;</span><span class="s1">x</span><span class="s3">\&quot;</span><span class="s1">, textData.x);</span><span class="s3">\n      </span><span class="s1">if (textData.fill !== void 0) {</span><span class="s3">\n        </span><span class="s1">span.attr(</span><span class="s3">\&quot;</span><span class="s1">fill</span><span class="s3">\&quot;</span><span class="s1">, textData.fill);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">span.text(text);</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">textElem.text(text);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">if (textData.valign !== void 0 &amp;&amp; textData.textMargin !== void 0 &amp;&amp; textData.textMargin &gt; 0) {</span><span class="s3">\n      </span><span class="s1">textHeight += (textElem._groups || textElem)[0][0].getBBox().height;</span><span class="s3">\n      </span><span class="s1">prevTextHeight = textHeight;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">textElems.push(textElem);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return textElems;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">drawText</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var drawLabel = /* @__PURE__ */ __name(function(elem, txtObject) {</span><span class="s3">\n  </span><span class="s1">function genPoints(x, y, width, height, cut) {</span><span class="s3">\n    </span><span class="s1">return x + </span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot; </span><span class="s1">+ y + </span><span class="s3">\&quot; \&quot; </span><span class="s1">+ (x + width) + </span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot; </span><span class="s1">+ y + </span><span class="s3">\&quot; \&quot; </span><span class="s1">+ (x + width) + </span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot; </span><span class="s1">+ (y + height - cut) + </span><span class="s3">\&quot; \&quot; </span><span class="s1">+ (x + width - cut * 1.2) + </span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot; </span><span class="s1">+ (y + height) + </span><span class="s3">\&quot; \&quot; </span><span class="s1">+ x + </span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot; </span><span class="s1">+ (y + height);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">__name(genPoints, </span><span class="s3">\&quot;</span><span class="s1">genPoints</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const polygon = elem.append(</span><span class="s3">\&quot;</span><span class="s1">polygon</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">polygon.attr(</span><span class="s3">\&quot;</span><span class="s1">points</span><span class="s3">\&quot;</span><span class="s1">, genPoints(txtObject.x, txtObject.y, txtObject.width, txtObject.height, 7));</span><span class="s3">\n  </span><span class="s1">polygon.attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">labelBox</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">txtObject.y = txtObject.y + txtObject.height / 2;</span><span class="s3">\n  </span><span class="s1">drawText(elem, txtObject);</span><span class="s3">\n  </span><span class="s1">return polygon;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">drawLabel</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var actorCnt = -1;</span><span class="s3">\n</span><span class="s1">var fixLifeLineHeights = /* @__PURE__ */ __name((diagram2, actors, actorKeys, conf2) =&gt; {</span><span class="s3">\n  </span><span class="s1">if (!diagram2.select) {</span><span class="s3">\n    </span><span class="s1">return;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">actorKeys.forEach((actorKey) =&gt; {</span><span class="s3">\n    </span><span class="s1">const actor = actors.get(actorKey);</span><span class="s3">\n    </span><span class="s1">const actorDOM = diagram2.select(</span><span class="s3">\&quot;</span><span class="s1">#actor</span><span class="s3">\&quot; </span><span class="s1">+ actor.actorCnt);</span><span class="s3">\n    </span><span class="s1">if (!conf2.mirrorActors &amp;&amp; actor.stopy) {</span><span class="s3">\n      </span><span class="s1">actorDOM.attr(</span><span class="s3">\&quot;</span><span class="s1">y2</span><span class="s3">\&quot;</span><span class="s1">, actor.stopy + actor.height / 2);</span><span class="s3">\n    </span><span class="s1">} else if (conf2.mirrorActors) {</span><span class="s3">\n      </span><span class="s1">actorDOM.attr(</span><span class="s3">\&quot;</span><span class="s1">y2</span><span class="s3">\&quot;</span><span class="s1">, actor.stopy);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">});</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">fixLifeLineHeights</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var drawActorTypeParticipant = /* @__PURE__ */ __name(function(elem, actor, conf2, isFooter) {</span><span class="s3">\n  </span><span class="s1">const actorY = isFooter ? actor.stopy : actor.starty;</span><span class="s3">\n  </span><span class="s1">const center = actor.x + actor.width / 2;</span><span class="s3">\n  </span><span class="s1">const centerY = actorY + actor.height;</span><span class="s3">\n  </span><span class="s1">const boxplusLineGroup = elem.append(</span><span class="s3">\&quot;</span><span class="s1">g</span><span class="s3">\&quot;</span><span class="s1">).lower();</span><span class="s3">\n  </span><span class="s1">var g = boxplusLineGroup;</span><span class="s3">\n  </span><span class="s1">if (!isFooter) {</span><span class="s3">\n    </span><span class="s1">actorCnt++;</span><span class="s3">\n    </span><span class="s1">if (Object.keys(actor.links || {}).length &amp;&amp; !conf2.forceMenus) {</span><span class="s3">\n      </span><span class="s1">g.attr(</span><span class="s3">\&quot;</span><span class="s1">onclick</span><span class="s3">\&quot;</span><span class="s1">, popupMenuToggle(`actor${actorCnt}_popup`)).attr(</span><span class="s3">\&quot;</span><span class="s1">cursor</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">pointer</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">g.append(</span><span class="s3">\&quot;</span><span class="s1">line</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">id</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">actor</span><span class="s3">\&quot; </span><span class="s1">+ actorCnt).attr(</span><span class="s3">\&quot;</span><span class="s1">x1</span><span class="s3">\&quot;</span><span class="s1">, center).attr(</span><span class="s3">\&quot;</span><span class="s1">y1</span><span class="s3">\&quot;</span><span class="s1">, centerY).attr(</span><span class="s3">\&quot;</span><span class="s1">x2</span><span class="s3">\&quot;</span><span class="s1">, center).attr(</span><span class="s3">\&quot;</span><span class="s1">y2</span><span class="s3">\&quot;</span><span class="s1">, 2e3).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">actor-line 200</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">stroke-width</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">0.5px</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">stroke</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">#999</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">name</span><span class="s3">\&quot;</span><span class="s1">, actor.name);</span><span class="s3">\n    </span><span class="s1">g = boxplusLineGroup.append(</span><span class="s3">\&quot;</span><span class="s1">g</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">actor.actorCnt = actorCnt;</span><span class="s3">\n    </span><span class="s1">if (actor.links != null) {</span><span class="s3">\n      </span><span class="s1">g.attr(</span><span class="s3">\&quot;</span><span class="s1">id</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">root-</span><span class="s3">\&quot; </span><span class="s1">+ actorCnt);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">const rect = getNoteRect();</span><span class="s3">\n  </span><span class="s1">var cssclass = </span><span class="s3">\&quot;</span><span class="s1">actor</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">if (actor.properties?.class) {</span><span class="s3">\n    </span><span class="s1">cssclass = actor.properties.class;</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">rect.fill = </span><span class="s3">\&quot;</span><span class="s1">#eaeaea</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (isFooter) {</span><span class="s3">\n    </span><span class="s1">cssclass += ` ${BOTTOM_ACTOR_CLASS}`;</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">cssclass += ` ${TOP_ACTOR_CLASS}`;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">rect.x = actor.x;</span><span class="s3">\n  </span><span class="s1">rect.y = actorY;</span><span class="s3">\n  </span><span class="s1">rect.width = actor.width;</span><span class="s3">\n  </span><span class="s1">rect.height = actor.height;</span><span class="s3">\n  </span><span class="s1">rect.class = cssclass;</span><span class="s3">\n  </span><span class="s1">rect.rx = 3;</span><span class="s3">\n  </span><span class="s1">rect.ry = 3;</span><span class="s3">\n  </span><span class="s1">rect.name = actor.name;</span><span class="s3">\n  </span><span class="s1">const rectElem = drawRect2(g, rect);</span><span class="s3">\n  </span><span class="s1">actor.rectData = rect;</span><span class="s3">\n  </span><span class="s1">if (actor.properties?.icon) {</span><span class="s3">\n    </span><span class="s1">const iconSrc = actor.properties.icon.trim();</span><span class="s3">\n    </span><span class="s1">if (iconSrc.charAt(0) === </span><span class="s3">\&quot;</span><span class="s1">@</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">drawEmbeddedImage(g, rect.x + rect.width - 20, rect.y + 10, iconSrc.substr(1));</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">drawImage(g, rect.x + rect.width - 20, rect.y + 10, iconSrc);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">_drawTextCandidateFunc(conf2, hasKatex(actor.description))(</span><span class="s3">\n    </span><span class="s1">actor.description,</span><span class="s3">\n    </span><span class="s1">g,</span><span class="s3">\n    </span><span class="s1">rect.x,</span><span class="s3">\n    </span><span class="s1">rect.y,</span><span class="s3">\n    </span><span class="s1">rect.width,</span><span class="s3">\n    </span><span class="s1">rect.height,</span><span class="s3">\n    </span><span class="s1">{ class: `actor ${ACTOR_BOX_CLASS}` },</span><span class="s3">\n    </span><span class="s1">conf2</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">let height = actor.height;</span><span class="s3">\n  </span><span class="s1">if (rectElem.node) {</span><span class="s3">\n    </span><span class="s1">const bounds2 = rectElem.node().getBBox();</span><span class="s3">\n    </span><span class="s1">actor.height = bounds2.height;</span><span class="s3">\n    </span><span class="s1">height = bounds2.height;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return height;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">drawActorTypeParticipant</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var drawActorTypeActor = /* @__PURE__ */ __name(function(elem, actor, conf2, isFooter) {</span><span class="s3">\n  </span><span class="s1">const actorY = isFooter ? actor.stopy : actor.starty;</span><span class="s3">\n  </span><span class="s1">const center = actor.x + actor.width / 2;</span><span class="s3">\n  </span><span class="s1">const centerY = actorY + 80;</span><span class="s3">\n  </span><span class="s1">const line = elem.append(</span><span class="s3">\&quot;</span><span class="s1">g</span><span class="s3">\&quot;</span><span class="s1">).lower();</span><span class="s3">\n  </span><span class="s1">if (!isFooter) {</span><span class="s3">\n    </span><span class="s1">actorCnt++;</span><span class="s3">\n    </span><span class="s1">line.append(</span><span class="s3">\&quot;</span><span class="s1">line</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">id</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">actor</span><span class="s3">\&quot; </span><span class="s1">+ actorCnt).attr(</span><span class="s3">\&quot;</span><span class="s1">x1</span><span class="s3">\&quot;</span><span class="s1">, center).attr(</span><span class="s3">\&quot;</span><span class="s1">y1</span><span class="s3">\&quot;</span><span class="s1">, centerY).attr(</span><span class="s3">\&quot;</span><span class="s1">x2</span><span class="s3">\&quot;</span><span class="s1">, center).attr(</span><span class="s3">\&quot;</span><span class="s1">y2</span><span class="s3">\&quot;</span><span class="s1">, 2e3).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">actor-line 200</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">stroke-width</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">0.5px</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">stroke</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">#999</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">name</span><span class="s3">\&quot;</span><span class="s1">, actor.name);</span><span class="s3">\n    </span><span class="s1">actor.actorCnt = actorCnt;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">const actElem = elem.append(</span><span class="s3">\&quot;</span><span class="s1">g</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">let cssClass = ACTOR_MAN_FIGURE_CLASS;</span><span class="s3">\n  </span><span class="s1">if (isFooter) {</span><span class="s3">\n    </span><span class="s1">cssClass += ` ${BOTTOM_ACTOR_CLASS}`;</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">cssClass += ` ${TOP_ACTOR_CLASS}`;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">actElem.attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, cssClass);</span><span class="s3">\n  </span><span class="s1">actElem.attr(</span><span class="s3">\&quot;</span><span class="s1">name</span><span class="s3">\&quot;</span><span class="s1">, actor.name);</span><span class="s3">\n  </span><span class="s1">const rect = getNoteRect();</span><span class="s3">\n  </span><span class="s1">rect.x = actor.x;</span><span class="s3">\n  </span><span class="s1">rect.y = actorY;</span><span class="s3">\n  </span><span class="s1">rect.fill = </span><span class="s3">\&quot;</span><span class="s1">#eaeaea</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">rect.width = actor.width;</span><span class="s3">\n  </span><span class="s1">rect.height = actor.height;</span><span class="s3">\n  </span><span class="s1">rect.class = </span><span class="s3">\&quot;</span><span class="s1">actor</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">rect.rx = 3;</span><span class="s3">\n  </span><span class="s1">rect.ry = 3;</span><span class="s3">\n  </span><span class="s1">actElem.append(</span><span class="s3">\&quot;</span><span class="s1">line</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">id</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">actor-man-torso</span><span class="s3">\&quot; </span><span class="s1">+ actorCnt).attr(</span><span class="s3">\&quot;</span><span class="s1">x1</span><span class="s3">\&quot;</span><span class="s1">, center).attr(</span><span class="s3">\&quot;</span><span class="s1">y1</span><span class="s3">\&quot;</span><span class="s1">, actorY + 25).attr(</span><span class="s3">\&quot;</span><span class="s1">x2</span><span class="s3">\&quot;</span><span class="s1">, center).attr(</span><span class="s3">\&quot;</span><span class="s1">y2</span><span class="s3">\&quot;</span><span class="s1">, actorY + 45);</span><span class="s3">\n  </span><span class="s1">actElem.append(</span><span class="s3">\&quot;</span><span class="s1">line</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">id</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">actor-man-arms</span><span class="s3">\&quot; </span><span class="s1">+ actorCnt).attr(</span><span class="s3">\&quot;</span><span class="s1">x1</span><span class="s3">\&quot;</span><span class="s1">, center - ACTOR_TYPE_WIDTH / 2).attr(</span><span class="s3">\&quot;</span><span class="s1">y1</span><span class="s3">\&quot;</span><span class="s1">, actorY + 33).attr(</span><span class="s3">\&quot;</span><span class="s1">x2</span><span class="s3">\&quot;</span><span class="s1">, center + ACTOR_TYPE_WIDTH / 2).attr(</span><span class="s3">\&quot;</span><span class="s1">y2</span><span class="s3">\&quot;</span><span class="s1">, actorY + 33);</span><span class="s3">\n  </span><span class="s1">actElem.append(</span><span class="s3">\&quot;</span><span class="s1">line</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">x1</span><span class="s3">\&quot;</span><span class="s1">, center - ACTOR_TYPE_WIDTH / 2).attr(</span><span class="s3">\&quot;</span><span class="s1">y1</span><span class="s3">\&quot;</span><span class="s1">, actorY + 60).attr(</span><span class="s3">\&quot;</span><span class="s1">x2</span><span class="s3">\&quot;</span><span class="s1">, center).attr(</span><span class="s3">\&quot;</span><span class="s1">y2</span><span class="s3">\&quot;</span><span class="s1">, actorY + 45);</span><span class="s3">\n  </span><span class="s1">actElem.append(</span><span class="s3">\&quot;</span><span class="s1">line</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">x1</span><span class="s3">\&quot;</span><span class="s1">, center).attr(</span><span class="s3">\&quot;</span><span class="s1">y1</span><span class="s3">\&quot;</span><span class="s1">, actorY + 45).attr(</span><span class="s3">\&quot;</span><span class="s1">x2</span><span class="s3">\&quot;</span><span class="s1">, center + ACTOR_TYPE_WIDTH / 2 - 2).attr(</span><span class="s3">\&quot;</span><span class="s1">y2</span><span class="s3">\&quot;</span><span class="s1">, actorY + 60);</span><span class="s3">\n  </span><span class="s1">const circle = actElem.append(</span><span class="s3">\&quot;</span><span class="s1">circle</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">circle.attr(</span><span class="s3">\&quot;</span><span class="s1">cx</span><span class="s3">\&quot;</span><span class="s1">, actor.x + actor.width / 2);</span><span class="s3">\n  </span><span class="s1">circle.attr(</span><span class="s3">\&quot;</span><span class="s1">cy</span><span class="s3">\&quot;</span><span class="s1">, actorY + 10);</span><span class="s3">\n  </span><span class="s1">circle.attr(</span><span class="s3">\&quot;</span><span class="s1">r</span><span class="s3">\&quot;</span><span class="s1">, 15);</span><span class="s3">\n  </span><span class="s1">circle.attr(</span><span class="s3">\&quot;</span><span class="s1">width</span><span class="s3">\&quot;</span><span class="s1">, actor.width);</span><span class="s3">\n  </span><span class="s1">circle.attr(</span><span class="s3">\&quot;</span><span class="s1">height</span><span class="s3">\&quot;</span><span class="s1">, actor.height);</span><span class="s3">\n  </span><span class="s1">const bounds2 = actElem.node().getBBox();</span><span class="s3">\n  </span><span class="s1">actor.height = bounds2.height;</span><span class="s3">\n  </span><span class="s1">_drawTextCandidateFunc(conf2, hasKatex(actor.description))(</span><span class="s3">\n    </span><span class="s1">actor.description,</span><span class="s3">\n    </span><span class="s1">actElem,</span><span class="s3">\n    </span><span class="s1">rect.x,</span><span class="s3">\n    </span><span class="s1">rect.y + 35,</span><span class="s3">\n    </span><span class="s1">rect.width,</span><span class="s3">\n    </span><span class="s1">rect.height,</span><span class="s3">\n    </span><span class="s1">{ class: `actor ${ACTOR_MAN_FIGURE_CLASS}` },</span><span class="s3">\n    </span><span class="s1">conf2</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">return actor.height;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">drawActorTypeActor</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var drawActor = /* @__PURE__ */ __name(async function(elem, actor, conf2, isFooter) {</span><span class="s3">\n  </span><span class="s1">switch (actor.type) {</span><span class="s3">\n    </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">actor</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n      </span><span class="s1">return await drawActorTypeActor(elem, actor, conf2, isFooter);</span><span class="s3">\n    </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">participant</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n      </span><span class="s1">return await drawActorTypeParticipant(elem, actor, conf2, isFooter);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">drawActor</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var drawBox = /* @__PURE__ */ __name(function(elem, box, conf2) {</span><span class="s3">\n  </span><span class="s1">const boxplusTextGroup = elem.append(</span><span class="s3">\&quot;</span><span class="s1">g</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const g = boxplusTextGroup;</span><span class="s3">\n  </span><span class="s1">drawBackgroundRect2(g, box);</span><span class="s3">\n  </span><span class="s1">if (box.name) {</span><span class="s3">\n    </span><span class="s1">_drawTextCandidateFunc(conf2)(</span><span class="s3">\n      </span><span class="s1">box.name,</span><span class="s3">\n      </span><span class="s1">g,</span><span class="s3">\n      </span><span class="s1">box.x,</span><span class="s3">\n      </span><span class="s1">box.y + (box.textMaxHeight || 0) / 2,</span><span class="s3">\n      </span><span class="s1">box.width,</span><span class="s3">\n      </span><span class="s1">0,</span><span class="s3">\n      </span><span class="s1">{ class: </span><span class="s3">\&quot;</span><span class="s1">text</span><span class="s3">\&quot; </span><span class="s1">},</span><span class="s3">\n      </span><span class="s1">conf2</span><span class="s3">\n    </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">g.lower();</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">drawBox</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var anchorElement = /* @__PURE__ */ __name(function(elem) {</span><span class="s3">\n  </span><span class="s1">return elem.append(</span><span class="s3">\&quot;</span><span class="s1">g</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">anchorElement</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var drawActivation = /* @__PURE__ */ __name(function(elem, bounds2, verticalPos, conf2, actorActivations2) {</span><span class="s3">\n  </span><span class="s1">const rect = getNoteRect();</span><span class="s3">\n  </span><span class="s1">const g = bounds2.anchored;</span><span class="s3">\n  </span><span class="s1">rect.x = bounds2.startx;</span><span class="s3">\n  </span><span class="s1">rect.y = bounds2.starty;</span><span class="s3">\n  </span><span class="s1">rect.class = </span><span class="s3">\&quot;</span><span class="s1">activation</span><span class="s3">\&quot; </span><span class="s1">+ actorActivations2 % 3;</span><span class="s3">\n  </span><span class="s1">rect.width = bounds2.stopx - bounds2.startx;</span><span class="s3">\n  </span><span class="s1">rect.height = verticalPos - bounds2.starty;</span><span class="s3">\n  </span><span class="s1">drawRect2(g, rect);</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">drawActivation</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var drawLoop = /* @__PURE__ */ __name(async function(elem, loopModel, labelText, conf2) {</span><span class="s3">\n  </span><span class="s1">const {</span><span class="s3">\n    </span><span class="s1">boxMargin,</span><span class="s3">\n    </span><span class="s1">boxTextMargin,</span><span class="s3">\n    </span><span class="s1">labelBoxHeight,</span><span class="s3">\n    </span><span class="s1">labelBoxWidth,</span><span class="s3">\n    </span><span class="s1">messageFontFamily: fontFamily,</span><span class="s3">\n    </span><span class="s1">messageFontSize: fontSize,</span><span class="s3">\n    </span><span class="s1">messageFontWeight: fontWeight</span><span class="s3">\n  </span><span class="s1">} = conf2;</span><span class="s3">\n  </span><span class="s1">const g = elem.append(</span><span class="s3">\&quot;</span><span class="s1">g</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const drawLoopLine = /* @__PURE__ */ __name(function(startx, starty, stopx, stopy) {</span><span class="s3">\n    </span><span class="s1">return g.append(</span><span class="s3">\&quot;</span><span class="s1">line</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">x1</span><span class="s3">\&quot;</span><span class="s1">, startx).attr(</span><span class="s3">\&quot;</span><span class="s1">y1</span><span class="s3">\&quot;</span><span class="s1">, starty).attr(</span><span class="s3">\&quot;</span><span class="s1">x2</span><span class="s3">\&quot;</span><span class="s1">, stopx).attr(</span><span class="s3">\&quot;</span><span class="s1">y2</span><span class="s3">\&quot;</span><span class="s1">, stopy).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">loopLine</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">drawLoopLine</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">drawLoopLine(loopModel.startx, loopModel.starty, loopModel.stopx, loopModel.starty);</span><span class="s3">\n  </span><span class="s1">drawLoopLine(loopModel.stopx, loopModel.starty, loopModel.stopx, loopModel.stopy);</span><span class="s3">\n  </span><span class="s1">drawLoopLine(loopModel.startx, loopModel.stopy, loopModel.stopx, loopModel.stopy);</span><span class="s3">\n  </span><span class="s1">drawLoopLine(loopModel.startx, loopModel.starty, loopModel.startx, loopModel.stopy);</span><span class="s3">\n  </span><span class="s1">if (loopModel.sections !== void 0) {</span><span class="s3">\n    </span><span class="s1">loopModel.sections.forEach(function(item) {</span><span class="s3">\n      </span><span class="s1">drawLoopLine(loopModel.startx, item.y, loopModel.stopx, item.y).style(</span><span class="s3">\n        \&quot;</span><span class="s1">stroke-dasharray</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n        \&quot;</span><span class="s1">3, 3</span><span class="s3">\&quot;\n      </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">});</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">let txt = getTextObj();</span><span class="s3">\n  </span><span class="s1">txt.text = labelText;</span><span class="s3">\n  </span><span class="s1">txt.x = loopModel.startx;</span><span class="s3">\n  </span><span class="s1">txt.y = loopModel.starty;</span><span class="s3">\n  </span><span class="s1">txt.fontFamily = fontFamily;</span><span class="s3">\n  </span><span class="s1">txt.fontSize = fontSize;</span><span class="s3">\n  </span><span class="s1">txt.fontWeight = fontWeight;</span><span class="s3">\n  </span><span class="s1">txt.anchor = </span><span class="s3">\&quot;</span><span class="s1">middle</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">txt.valign = </span><span class="s3">\&quot;</span><span class="s1">middle</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">txt.tspan = false;</span><span class="s3">\n  </span><span class="s1">txt.width = labelBoxWidth || 50;</span><span class="s3">\n  </span><span class="s1">txt.height = labelBoxHeight || 20;</span><span class="s3">\n  </span><span class="s1">txt.textMargin = boxTextMargin;</span><span class="s3">\n  </span><span class="s1">txt.class = </span><span class="s3">\&quot;</span><span class="s1">labelText</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">drawLabel(g, txt);</span><span class="s3">\n  </span><span class="s1">txt = getTextObj2();</span><span class="s3">\n  </span><span class="s1">txt.text = loopModel.title;</span><span class="s3">\n  </span><span class="s1">txt.x = loopModel.startx + labelBoxWidth / 2 + (loopModel.stopx - loopModel.startx) / 2;</span><span class="s3">\n  </span><span class="s1">txt.y = loopModel.starty + boxMargin + boxTextMargin;</span><span class="s3">\n  </span><span class="s1">txt.anchor = </span><span class="s3">\&quot;</span><span class="s1">middle</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">txt.valign = </span><span class="s3">\&quot;</span><span class="s1">middle</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">txt.textMargin = boxTextMargin;</span><span class="s3">\n  </span><span class="s1">txt.class = </span><span class="s3">\&quot;</span><span class="s1">loopText</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">txt.fontFamily = fontFamily;</span><span class="s3">\n  </span><span class="s1">txt.fontSize = fontSize;</span><span class="s3">\n  </span><span class="s1">txt.fontWeight = fontWeight;</span><span class="s3">\n  </span><span class="s1">txt.wrap = true;</span><span class="s3">\n  </span><span class="s1">let textElem = hasKatex(txt.text) ? await drawKatex(g, txt, loopModel) : drawText(g, txt);</span><span class="s3">\n  </span><span class="s1">if (loopModel.sectionTitles !== void 0) {</span><span class="s3">\n    </span><span class="s1">for (const [idx, item] of Object.entries(loopModel.sectionTitles)) {</span><span class="s3">\n      </span><span class="s1">if (item.message) {</span><span class="s3">\n        </span><span class="s1">txt.text = item.message;</span><span class="s3">\n        </span><span class="s1">txt.x = loopModel.startx + (loopModel.stopx - loopModel.startx) / 2;</span><span class="s3">\n        </span><span class="s1">txt.y = loopModel.sections[idx].y + boxMargin + boxTextMargin;</span><span class="s3">\n        </span><span class="s1">txt.class = </span><span class="s3">\&quot;</span><span class="s1">loopText</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n        </span><span class="s1">txt.anchor = </span><span class="s3">\&quot;</span><span class="s1">middle</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n        </span><span class="s1">txt.valign = </span><span class="s3">\&quot;</span><span class="s1">middle</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n        </span><span class="s1">txt.tspan = false;</span><span class="s3">\n        </span><span class="s1">txt.fontFamily = fontFamily;</span><span class="s3">\n        </span><span class="s1">txt.fontSize = fontSize;</span><span class="s3">\n        </span><span class="s1">txt.fontWeight = fontWeight;</span><span class="s3">\n        </span><span class="s1">txt.wrap = loopModel.wrap;</span><span class="s3">\n        </span><span class="s1">if (hasKatex(txt.text)) {</span><span class="s3">\n          </span><span class="s1">loopModel.starty = loopModel.sections[idx].y;</span><span class="s3">\n          </span><span class="s1">await drawKatex(g, txt, loopModel);</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">drawText(g, txt);</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">let sectionHeight = Math.round(</span><span class="s3">\n          </span><span class="s1">textElem.map((te) =&gt; (te._groups || te)[0][0].getBBox().height).reduce((acc, curr) =&gt; acc + curr)</span><span class="s3">\n        </span><span class="s1">);</span><span class="s3">\n        </span><span class="s1">loopModel.sections[idx].height += sectionHeight - (boxMargin + boxTextMargin);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">loopModel.height = Math.round(loopModel.stopy - loopModel.starty);</span><span class="s3">\n  </span><span class="s1">return g;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">drawLoop</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var drawBackgroundRect2 = /* @__PURE__ */ __name(function(elem, bounds2) {</span><span class="s3">\n  </span><span class="s1">drawBackgroundRect(elem, bounds2);</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">drawBackgroundRect</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var insertDatabaseIcon = /* @__PURE__ */ __name(function(elem) {</span><span class="s3">\n  </span><span class="s1">elem.append(</span><span class="s3">\&quot;</span><span class="s1">defs</span><span class="s3">\&quot;</span><span class="s1">).append(</span><span class="s3">\&quot;</span><span class="s1">symbol</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">id</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">database</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">fill-rule</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">evenodd</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">clip-rule</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">evenodd</span><span class="s3">\&quot;</span><span class="s1">).append(</span><span class="s3">\&quot;</span><span class="s1">path</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">transform</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">scale(.5)</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\n    \&quot;</span><span class="s1">d</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n    \&quot;</span><span class="s1">M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z</span><span class="s3">\&quot;\n  </span><span class="s1">);</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">insertDatabaseIcon</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var insertComputerIcon = /* @__PURE__ */ __name(function(elem) {</span><span class="s3">\n  </span><span class="s1">elem.append(</span><span class="s3">\&quot;</span><span class="s1">defs</span><span class="s3">\&quot;</span><span class="s1">).append(</span><span class="s3">\&quot;</span><span class="s1">symbol</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">id</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">computer</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">width</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">24</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">height</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">24</span><span class="s3">\&quot;</span><span class="s1">).append(</span><span class="s3">\&quot;</span><span class="s1">path</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">transform</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">scale(.5)</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\n    \&quot;</span><span class="s1">d</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n    \&quot;</span><span class="s1">M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z</span><span class="s3">\&quot;\n  </span><span class="s1">);</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">insertComputerIcon</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var insertClockIcon = /* @__PURE__ */ __name(function(elem) {</span><span class="s3">\n  </span><span class="s1">elem.append(</span><span class="s3">\&quot;</span><span class="s1">defs</span><span class="s3">\&quot;</span><span class="s1">).append(</span><span class="s3">\&quot;</span><span class="s1">symbol</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">id</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">clock</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">width</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">24</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">height</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">24</span><span class="s3">\&quot;</span><span class="s1">).append(</span><span class="s3">\&quot;</span><span class="s1">path</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">transform</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">scale(.5)</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\n    \&quot;</span><span class="s1">d</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n    \&quot;</span><span class="s1">M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z</span><span class="s3">\&quot;\n  </span><span class="s1">);</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">insertClockIcon</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var insertArrowHead = /* @__PURE__ */ __name(function(elem) {</span><span class="s3">\n  </span><span class="s1">elem.append(</span><span class="s3">\&quot;</span><span class="s1">defs</span><span class="s3">\&quot;</span><span class="s1">).append(</span><span class="s3">\&quot;</span><span class="s1">marker</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">id</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">arrowhead</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">refX</span><span class="s3">\&quot;</span><span class="s1">, 7.9).attr(</span><span class="s3">\&quot;</span><span class="s1">refY</span><span class="s3">\&quot;</span><span class="s1">, 5).attr(</span><span class="s3">\&quot;</span><span class="s1">markerUnits</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">userSpaceOnUse</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">markerWidth</span><span class="s3">\&quot;</span><span class="s1">, 12).attr(</span><span class="s3">\&quot;</span><span class="s1">markerHeight</span><span class="s3">\&quot;</span><span class="s1">, 12).attr(</span><span class="s3">\&quot;</span><span class="s1">orient</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">auto-start-reverse</span><span class="s3">\&quot;</span><span class="s1">).append(</span><span class="s3">\&quot;</span><span class="s1">path</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">d</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">M -1 0 L 10 5 L 0 10 z</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">insertArrowHead</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var insertArrowFilledHead = /* @__PURE__ */ __name(function(elem) {</span><span class="s3">\n  </span><span class="s1">elem.append(</span><span class="s3">\&quot;</span><span class="s1">defs</span><span class="s3">\&quot;</span><span class="s1">).append(</span><span class="s3">\&quot;</span><span class="s1">marker</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">id</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">filled-head</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">refX</span><span class="s3">\&quot;</span><span class="s1">, 15.5).attr(</span><span class="s3">\&quot;</span><span class="s1">refY</span><span class="s3">\&quot;</span><span class="s1">, 7).attr(</span><span class="s3">\&quot;</span><span class="s1">markerWidth</span><span class="s3">\&quot;</span><span class="s1">, 20).attr(</span><span class="s3">\&quot;</span><span class="s1">markerHeight</span><span class="s3">\&quot;</span><span class="s1">, 28).attr(</span><span class="s3">\&quot;</span><span class="s1">orient</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">auto</span><span class="s3">\&quot;</span><span class="s1">).append(</span><span class="s3">\&quot;</span><span class="s1">path</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">d</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">M 18,7 L9,13 L14,7 L9,1 Z</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">insertArrowFilledHead</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var insertSequenceNumber = /* @__PURE__ */ __name(function(elem) {</span><span class="s3">\n  </span><span class="s1">elem.append(</span><span class="s3">\&quot;</span><span class="s1">defs</span><span class="s3">\&quot;</span><span class="s1">).append(</span><span class="s3">\&quot;</span><span class="s1">marker</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">id</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">sequencenumber</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">refX</span><span class="s3">\&quot;</span><span class="s1">, 15).attr(</span><span class="s3">\&quot;</span><span class="s1">refY</span><span class="s3">\&quot;</span><span class="s1">, 15).attr(</span><span class="s3">\&quot;</span><span class="s1">markerWidth</span><span class="s3">\&quot;</span><span class="s1">, 60).attr(</span><span class="s3">\&quot;</span><span class="s1">markerHeight</span><span class="s3">\&quot;</span><span class="s1">, 40).attr(</span><span class="s3">\&quot;</span><span class="s1">orient</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">auto</span><span class="s3">\&quot;</span><span class="s1">).append(</span><span class="s3">\&quot;</span><span class="s1">circle</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">cx</span><span class="s3">\&quot;</span><span class="s1">, 15).attr(</span><span class="s3">\&quot;</span><span class="s1">cy</span><span class="s3">\&quot;</span><span class="s1">, 15).attr(</span><span class="s3">\&quot;</span><span class="s1">r</span><span class="s3">\&quot;</span><span class="s1">, 6);</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">insertSequenceNumber</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var insertArrowCrossHead = /* @__PURE__ */ __name(function(elem) {</span><span class="s3">\n  </span><span class="s1">const defs = elem.append(</span><span class="s3">\&quot;</span><span class="s1">defs</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const marker = defs.append(</span><span class="s3">\&quot;</span><span class="s1">marker</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">id</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">crosshead</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">markerWidth</span><span class="s3">\&quot;</span><span class="s1">, 15).attr(</span><span class="s3">\&quot;</span><span class="s1">markerHeight</span><span class="s3">\&quot;</span><span class="s1">, 8).attr(</span><span class="s3">\&quot;</span><span class="s1">orient</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">auto</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">refX</span><span class="s3">\&quot;</span><span class="s1">, 4).attr(</span><span class="s3">\&quot;</span><span class="s1">refY</span><span class="s3">\&quot;</span><span class="s1">, 4.5);</span><span class="s3">\n  </span><span class="s1">marker.append(</span><span class="s3">\&quot;</span><span class="s1">path</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">fill</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">none</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">stroke</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">#000000</span><span class="s3">\&quot;</span><span class="s1">).style(</span><span class="s3">\&quot;</span><span class="s1">stroke-dasharray</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">0, 0</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">stroke-width</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">1pt</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">d</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">M 1,2 L 6,7 M 6,2 L 1,7</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">insertArrowCrossHead</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var getTextObj2 = /* @__PURE__ */ __name(function() {</span><span class="s3">\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">x: 0,</span><span class="s3">\n    </span><span class="s1">y: 0,</span><span class="s3">\n    </span><span class="s1">fill: void 0,</span><span class="s3">\n    </span><span class="s1">anchor: void 0,</span><span class="s3">\n    </span><span class="s1">style: </span><span class="s3">\&quot;</span><span class="s1">#666</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n    </span><span class="s1">width: void 0,</span><span class="s3">\n    </span><span class="s1">height: void 0,</span><span class="s3">\n    </span><span class="s1">textMargin: 0,</span><span class="s3">\n    </span><span class="s1">rx: 0,</span><span class="s3">\n    </span><span class="s1">ry: 0,</span><span class="s3">\n    </span><span class="s1">tspan: true,</span><span class="s3">\n    </span><span class="s1">valign: void 0</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">getTextObj</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var getNoteRect2 = /* @__PURE__ */ __name(function() {</span><span class="s3">\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">x: 0,</span><span class="s3">\n    </span><span class="s1">y: 0,</span><span class="s3">\n    </span><span class="s1">fill: </span><span class="s3">\&quot;</span><span class="s1">#EDF2AE</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n    </span><span class="s1">stroke: </span><span class="s3">\&quot;</span><span class="s1">#666</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n    </span><span class="s1">width: 100,</span><span class="s3">\n    </span><span class="s1">anchor: </span><span class="s3">\&quot;</span><span class="s1">start</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n    </span><span class="s1">height: 100,</span><span class="s3">\n    </span><span class="s1">rx: 0,</span><span class="s3">\n    </span><span class="s1">ry: 0</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">getNoteRect</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var _drawTextCandidateFunc = /* @__PURE__ */ function() {</span><span class="s3">\n  </span><span class="s1">function byText(content, g, x, y, width, height, textAttrs) {</span><span class="s3">\n    </span><span class="s1">const text = g.append(</span><span class="s3">\&quot;</span><span class="s1">text</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">x</span><span class="s3">\&quot;</span><span class="s1">, x + width / 2).attr(</span><span class="s3">\&quot;</span><span class="s1">y</span><span class="s3">\&quot;</span><span class="s1">, y + height / 2 + 5).style(</span><span class="s3">\&quot;</span><span class="s1">text-anchor</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">middle</span><span class="s3">\&quot;</span><span class="s1">).text(content);</span><span class="s3">\n    </span><span class="s1">_setTextAttrs(text, textAttrs);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">__name(byText, </span><span class="s3">\&quot;</span><span class="s1">byText</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">function byTspan(content, g, x, y, width, height, textAttrs, conf2) {</span><span class="s3">\n    </span><span class="s1">const { actorFontSize, actorFontFamily, actorFontWeight } = conf2;</span><span class="s3">\n    </span><span class="s1">const [_actorFontSize, _actorFontSizePx] = parseFontSize(actorFontSize);</span><span class="s3">\n    </span><span class="s1">const lines = content.split(common_default.lineBreakRegex);</span><span class="s3">\n    </span><span class="s1">for (let i = 0; i &lt; lines.length; i++) {</span><span class="s3">\n      </span><span class="s1">const dy = i * _actorFontSize - _actorFontSize * (lines.length - 1) / 2;</span><span class="s3">\n      </span><span class="s1">const text = g.append(</span><span class="s3">\&quot;</span><span class="s1">text</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">x</span><span class="s3">\&quot;</span><span class="s1">, x + width / 2).attr(</span><span class="s3">\&quot;</span><span class="s1">y</span><span class="s3">\&quot;</span><span class="s1">, y).style(</span><span class="s3">\&quot;</span><span class="s1">text-anchor</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">middle</span><span class="s3">\&quot;</span><span class="s1">).style(</span><span class="s3">\&quot;</span><span class="s1">font-size</span><span class="s3">\&quot;</span><span class="s1">, _actorFontSizePx).style(</span><span class="s3">\&quot;</span><span class="s1">font-weight</span><span class="s3">\&quot;</span><span class="s1">, actorFontWeight).style(</span><span class="s3">\&quot;</span><span class="s1">font-family</span><span class="s3">\&quot;</span><span class="s1">, actorFontFamily);</span><span class="s3">\n      </span><span class="s1">text.append(</span><span class="s3">\&quot;</span><span class="s1">tspan</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">x</span><span class="s3">\&quot;</span><span class="s1">, x + width / 2).attr(</span><span class="s3">\&quot;</span><span class="s1">dy</span><span class="s3">\&quot;</span><span class="s1">, dy).text(lines[i]);</span><span class="s3">\n      </span><span class="s1">text.attr(</span><span class="s3">\&quot;</span><span class="s1">y</span><span class="s3">\&quot;</span><span class="s1">, y + height / 2).attr(</span><span class="s3">\&quot;</span><span class="s1">dominant-baseline</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">central</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">alignment-baseline</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">central</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">_setTextAttrs(text, textAttrs);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">__name(byTspan, </span><span class="s3">\&quot;</span><span class="s1">byTspan</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">function byFo(content, g, x, y, width, height, textAttrs, conf2) {</span><span class="s3">\n    </span><span class="s1">const s = g.append(</span><span class="s3">\&quot;</span><span class="s1">switch</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">const f = s.append(</span><span class="s3">\&quot;</span><span class="s1">foreignObject</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">x</span><span class="s3">\&quot;</span><span class="s1">, x).attr(</span><span class="s3">\&quot;</span><span class="s1">y</span><span class="s3">\&quot;</span><span class="s1">, y).attr(</span><span class="s3">\&quot;</span><span class="s1">width</span><span class="s3">\&quot;</span><span class="s1">, width).attr(</span><span class="s3">\&quot;</span><span class="s1">height</span><span class="s3">\&quot;</span><span class="s1">, height);</span><span class="s3">\n    </span><span class="s1">const text = f.append(</span><span class="s3">\&quot;</span><span class="s1">xhtml:div</span><span class="s3">\&quot;</span><span class="s1">).style(</span><span class="s3">\&quot;</span><span class="s1">display</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">table</span><span class="s3">\&quot;</span><span class="s1">).style(</span><span class="s3">\&quot;</span><span class="s1">height</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">100%</span><span class="s3">\&quot;</span><span class="s1">).style(</span><span class="s3">\&quot;</span><span class="s1">width</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">100%</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">text.append(</span><span class="s3">\&quot;</span><span class="s1">div</span><span class="s3">\&quot;</span><span class="s1">).style(</span><span class="s3">\&quot;</span><span class="s1">display</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">table-cell</span><span class="s3">\&quot;</span><span class="s1">).style(</span><span class="s3">\&quot;</span><span class="s1">text-align</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">center</span><span class="s3">\&quot;</span><span class="s1">).style(</span><span class="s3">\&quot;</span><span class="s1">vertical-align</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">middle</span><span class="s3">\&quot;</span><span class="s1">).text(content);</span><span class="s3">\n    </span><span class="s1">byTspan(content, s, x, y, width, height, textAttrs, conf2);</span><span class="s3">\n    </span><span class="s1">_setTextAttrs(text, textAttrs);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">__name(byFo, </span><span class="s3">\&quot;</span><span class="s1">byFo</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">async function byKatex(content, g, x, y, width, height, textAttrs, conf2) {</span><span class="s3">\n    </span><span class="s1">const dim = await calculateMathMLDimensions(content, getConfig());</span><span class="s3">\n    </span><span class="s1">const s = g.append(</span><span class="s3">\&quot;</span><span class="s1">switch</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">const f = s.append(</span><span class="s3">\&quot;</span><span class="s1">foreignObject</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">x</span><span class="s3">\&quot;</span><span class="s1">, x + width / 2 - dim.width / 2).attr(</span><span class="s3">\&quot;</span><span class="s1">y</span><span class="s3">\&quot;</span><span class="s1">, y + height / 2 - dim.height / 2).attr(</span><span class="s3">\&quot;</span><span class="s1">width</span><span class="s3">\&quot;</span><span class="s1">, dim.width).attr(</span><span class="s3">\&quot;</span><span class="s1">height</span><span class="s3">\&quot;</span><span class="s1">, dim.height);</span><span class="s3">\n    </span><span class="s1">const text = f.append(</span><span class="s3">\&quot;</span><span class="s1">xhtml:div</span><span class="s3">\&quot;</span><span class="s1">).style(</span><span class="s3">\&quot;</span><span class="s1">height</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">100%</span><span class="s3">\&quot;</span><span class="s1">).style(</span><span class="s3">\&quot;</span><span class="s1">width</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">100%</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">text.append(</span><span class="s3">\&quot;</span><span class="s1">div</span><span class="s3">\&quot;</span><span class="s1">).style(</span><span class="s3">\&quot;</span><span class="s1">text-align</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">center</span><span class="s3">\&quot;</span><span class="s1">).style(</span><span class="s3">\&quot;</span><span class="s1">vertical-align</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">middle</span><span class="s3">\&quot;</span><span class="s1">).html(await renderKatex(content, getConfig()));</span><span class="s3">\n    </span><span class="s1">byTspan(content, s, x, y, width, height, textAttrs, conf2);</span><span class="s3">\n    </span><span class="s1">_setTextAttrs(text, textAttrs);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">__name(byKatex, </span><span class="s3">\&quot;</span><span class="s1">byKatex</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">function _setTextAttrs(toText, fromTextAttrsDict) {</span><span class="s3">\n    </span><span class="s1">for (const key in fromTextAttrsDict) {</span><span class="s3">\n      </span><span class="s1">if (fromTextAttrsDict.hasOwnProperty(key)) {</span><span class="s3">\n        </span><span class="s1">toText.attr(key, fromTextAttrsDict[key]);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">__name(_setTextAttrs, </span><span class="s3">\&quot;</span><span class="s1">_setTextAttrs</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">return function(conf2, hasKatex2 = false) {</span><span class="s3">\n    </span><span class="s1">if (hasKatex2) {</span><span class="s3">\n      </span><span class="s1">return byKatex;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">return conf2.textPlacement === </span><span class="s3">\&quot;</span><span class="s1">fo</span><span class="s3">\&quot; </span><span class="s1">? byFo : conf2.textPlacement === </span><span class="s3">\&quot;</span><span class="s1">old</span><span class="s3">\&quot; </span><span class="s1">? byText : byTspan;</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n</span><span class="s1">}();</span><span class="s3">\n</span><span class="s1">var _drawMenuItemTextCandidateFunc = /* @__PURE__ */ function() {</span><span class="s3">\n  </span><span class="s1">function byText(content, g, x, y, width, height, textAttrs) {</span><span class="s3">\n    </span><span class="s1">const text = g.append(</span><span class="s3">\&quot;</span><span class="s1">text</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">x</span><span class="s3">\&quot;</span><span class="s1">, x).attr(</span><span class="s3">\&quot;</span><span class="s1">y</span><span class="s3">\&quot;</span><span class="s1">, y).style(</span><span class="s3">\&quot;</span><span class="s1">text-anchor</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">start</span><span class="s3">\&quot;</span><span class="s1">).text(content);</span><span class="s3">\n    </span><span class="s1">_setTextAttrs(text, textAttrs);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">__name(byText, </span><span class="s3">\&quot;</span><span class="s1">byText</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">function byTspan(content, g, x, y, width, height, textAttrs, conf2) {</span><span class="s3">\n    </span><span class="s1">const { actorFontSize, actorFontFamily, actorFontWeight } = conf2;</span><span class="s3">\n    </span><span class="s1">const lines = content.split(common_default.lineBreakRegex);</span><span class="s3">\n    </span><span class="s1">for (let i = 0; i &lt; lines.length; i++) {</span><span class="s3">\n      </span><span class="s1">const dy = i * actorFontSize - actorFontSize * (lines.length - 1) / 2;</span><span class="s3">\n      </span><span class="s1">const text = g.append(</span><span class="s3">\&quot;</span><span class="s1">text</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">x</span><span class="s3">\&quot;</span><span class="s1">, x).attr(</span><span class="s3">\&quot;</span><span class="s1">y</span><span class="s3">\&quot;</span><span class="s1">, y).style(</span><span class="s3">\&quot;</span><span class="s1">text-anchor</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">start</span><span class="s3">\&quot;</span><span class="s1">).style(</span><span class="s3">\&quot;</span><span class="s1">font-size</span><span class="s3">\&quot;</span><span class="s1">, actorFontSize).style(</span><span class="s3">\&quot;</span><span class="s1">font-weight</span><span class="s3">\&quot;</span><span class="s1">, actorFontWeight).style(</span><span class="s3">\&quot;</span><span class="s1">font-family</span><span class="s3">\&quot;</span><span class="s1">, actorFontFamily);</span><span class="s3">\n      </span><span class="s1">text.append(</span><span class="s3">\&quot;</span><span class="s1">tspan</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">x</span><span class="s3">\&quot;</span><span class="s1">, x).attr(</span><span class="s3">\&quot;</span><span class="s1">dy</span><span class="s3">\&quot;</span><span class="s1">, dy).text(lines[i]);</span><span class="s3">\n      </span><span class="s1">text.attr(</span><span class="s3">\&quot;</span><span class="s1">y</span><span class="s3">\&quot;</span><span class="s1">, y + height / 2).attr(</span><span class="s3">\&quot;</span><span class="s1">dominant-baseline</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">central</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">alignment-baseline</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">central</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">_setTextAttrs(text, textAttrs);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">__name(byTspan, </span><span class="s3">\&quot;</span><span class="s1">byTspan</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">function byFo(content, g, x, y, width, height, textAttrs, conf2) {</span><span class="s3">\n    </span><span class="s1">const s = g.append(</span><span class="s3">\&quot;</span><span class="s1">switch</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">const f = s.append(</span><span class="s3">\&quot;</span><span class="s1">foreignObject</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">x</span><span class="s3">\&quot;</span><span class="s1">, x).attr(</span><span class="s3">\&quot;</span><span class="s1">y</span><span class="s3">\&quot;</span><span class="s1">, y).attr(</span><span class="s3">\&quot;</span><span class="s1">width</span><span class="s3">\&quot;</span><span class="s1">, width).attr(</span><span class="s3">\&quot;</span><span class="s1">height</span><span class="s3">\&quot;</span><span class="s1">, height);</span><span class="s3">\n    </span><span class="s1">const text = f.append(</span><span class="s3">\&quot;</span><span class="s1">xhtml:div</span><span class="s3">\&quot;</span><span class="s1">).style(</span><span class="s3">\&quot;</span><span class="s1">display</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">table</span><span class="s3">\&quot;</span><span class="s1">).style(</span><span class="s3">\&quot;</span><span class="s1">height</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">100%</span><span class="s3">\&quot;</span><span class="s1">).style(</span><span class="s3">\&quot;</span><span class="s1">width</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">100%</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">text.append(</span><span class="s3">\&quot;</span><span class="s1">div</span><span class="s3">\&quot;</span><span class="s1">).style(</span><span class="s3">\&quot;</span><span class="s1">display</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">table-cell</span><span class="s3">\&quot;</span><span class="s1">).style(</span><span class="s3">\&quot;</span><span class="s1">text-align</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">center</span><span class="s3">\&quot;</span><span class="s1">).style(</span><span class="s3">\&quot;</span><span class="s1">vertical-align</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">middle</span><span class="s3">\&quot;</span><span class="s1">).text(content);</span><span class="s3">\n    </span><span class="s1">byTspan(content, s, x, y, width, height, textAttrs, conf2);</span><span class="s3">\n    </span><span class="s1">_setTextAttrs(text, textAttrs);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">__name(byFo, </span><span class="s3">\&quot;</span><span class="s1">byFo</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">function _setTextAttrs(toText, fromTextAttrsDict) {</span><span class="s3">\n    </span><span class="s1">for (const key in fromTextAttrsDict) {</span><span class="s3">\n      </span><span class="s1">if (fromTextAttrsDict.hasOwnProperty(key)) {</span><span class="s3">\n        </span><span class="s1">toText.attr(key, fromTextAttrsDict[key]);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">__name(_setTextAttrs, </span><span class="s3">\&quot;</span><span class="s1">_setTextAttrs</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">return function(conf2) {</span><span class="s3">\n    </span><span class="s1">return conf2.textPlacement === </span><span class="s3">\&quot;</span><span class="s1">fo</span><span class="s3">\&quot; </span><span class="s1">? byFo : conf2.textPlacement === </span><span class="s3">\&quot;</span><span class="s1">old</span><span class="s3">\&quot; </span><span class="s1">? byText : byTspan;</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n</span><span class="s1">}();</span><span class="s3">\n</span><span class="s1">var svgDraw_default = {</span><span class="s3">\n  </span><span class="s1">drawRect: drawRect2,</span><span class="s3">\n  </span><span class="s1">drawText,</span><span class="s3">\n  </span><span class="s1">drawLabel,</span><span class="s3">\n  </span><span class="s1">drawActor,</span><span class="s3">\n  </span><span class="s1">drawBox,</span><span class="s3">\n  </span><span class="s1">drawPopup,</span><span class="s3">\n  </span><span class="s1">anchorElement,</span><span class="s3">\n  </span><span class="s1">drawActivation,</span><span class="s3">\n  </span><span class="s1">drawLoop,</span><span class="s3">\n  </span><span class="s1">drawBackgroundRect: drawBackgroundRect2,</span><span class="s3">\n  </span><span class="s1">insertArrowHead,</span><span class="s3">\n  </span><span class="s1">insertArrowFilledHead,</span><span class="s3">\n  </span><span class="s1">insertSequenceNumber,</span><span class="s3">\n  </span><span class="s1">insertArrowCrossHead,</span><span class="s3">\n  </span><span class="s1">insertDatabaseIcon,</span><span class="s3">\n  </span><span class="s1">insertComputerIcon,</span><span class="s3">\n  </span><span class="s1">insertClockIcon,</span><span class="s3">\n  </span><span class="s1">getTextObj: getTextObj2,</span><span class="s3">\n  </span><span class="s1">getNoteRect: getNoteRect2,</span><span class="s3">\n  </span><span class="s1">fixLifeLineHeights,</span><span class="s3">\n  </span><span class="s1">sanitizeUrl</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n\n</span><span class="s1">// src/diagrams/sequence/sequenceRenderer.ts</span><span class="s3">\n</span><span class="s1">var conf = {};</span><span class="s3">\n</span><span class="s1">var bounds = {</span><span class="s3">\n  </span><span class="s1">data: {</span><span class="s3">\n    </span><span class="s1">startx: void 0,</span><span class="s3">\n    </span><span class="s1">stopx: void 0,</span><span class="s3">\n    </span><span class="s1">starty: void 0,</span><span class="s3">\n    </span><span class="s1">stopy: void 0</span><span class="s3">\n  </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">verticalPos: 0,</span><span class="s3">\n  </span><span class="s1">sequenceItems: [],</span><span class="s3">\n  </span><span class="s1">activations: [],</span><span class="s3">\n  </span><span class="s1">models: {</span><span class="s3">\n    </span><span class="s1">getHeight: /* @__PURE__ */ __name(function() {</span><span class="s3">\n      </span><span class="s1">return Math.max.apply(</span><span class="s3">\n        </span><span class="s1">null,</span><span class="s3">\n        </span><span class="s1">this.actors.length === 0 ? [0] : this.actors.map((actor) =&gt; actor.height || 0)</span><span class="s3">\n      </span><span class="s1">) + (this.loops.length === 0 ? 0 : this.loops.map((it) =&gt; it.height || 0).reduce((acc, h) =&gt; acc + h)) + (this.messages.length === 0 ? 0 : this.messages.map((it) =&gt; it.height || 0).reduce((acc, h) =&gt; acc + h)) + (this.notes.length === 0 ? 0 : this.notes.map((it) =&gt; it.height || 0).reduce((acc, h) =&gt; acc + h));</span><span class="s3">\n    </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">getHeight</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n    </span><span class="s1">clear: /* @__PURE__ */ __name(function() {</span><span class="s3">\n      </span><span class="s1">this.actors = [];</span><span class="s3">\n      </span><span class="s1">this.boxes = [];</span><span class="s3">\n      </span><span class="s1">this.loops = [];</span><span class="s3">\n      </span><span class="s1">this.messages = [];</span><span class="s3">\n      </span><span class="s1">this.notes = [];</span><span class="s3">\n    </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">clear</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n    </span><span class="s1">addBox: /* @__PURE__ */ __name(function(boxModel) {</span><span class="s3">\n      </span><span class="s1">this.boxes.push(boxModel);</span><span class="s3">\n    </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">addBox</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n    </span><span class="s1">addActor: /* @__PURE__ */ __name(function(actorModel) {</span><span class="s3">\n      </span><span class="s1">this.actors.push(actorModel);</span><span class="s3">\n    </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">addActor</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n    </span><span class="s1">addLoop: /* @__PURE__ */ __name(function(loopModel) {</span><span class="s3">\n      </span><span class="s1">this.loops.push(loopModel);</span><span class="s3">\n    </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">addLoop</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n    </span><span class="s1">addMessage: /* @__PURE__ */ __name(function(msgModel) {</span><span class="s3">\n      </span><span class="s1">this.messages.push(msgModel);</span><span class="s3">\n    </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">addMessage</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n    </span><span class="s1">addNote: /* @__PURE__ */ __name(function(noteModel) {</span><span class="s3">\n      </span><span class="s1">this.notes.push(noteModel);</span><span class="s3">\n    </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">addNote</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n    </span><span class="s1">lastActor: /* @__PURE__ */ __name(function() {</span><span class="s3">\n      </span><span class="s1">return this.actors[this.actors.length - 1];</span><span class="s3">\n    </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">lastActor</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n    </span><span class="s1">lastLoop: /* @__PURE__ */ __name(function() {</span><span class="s3">\n      </span><span class="s1">return this.loops[this.loops.length - 1];</span><span class="s3">\n    </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">lastLoop</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n    </span><span class="s1">lastMessage: /* @__PURE__ */ __name(function() {</span><span class="s3">\n      </span><span class="s1">return this.messages[this.messages.length - 1];</span><span class="s3">\n    </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">lastMessage</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n    </span><span class="s1">lastNote: /* @__PURE__ */ __name(function() {</span><span class="s3">\n      </span><span class="s1">return this.notes[this.notes.length - 1];</span><span class="s3">\n    </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">lastNote</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n    </span><span class="s1">actors: [],</span><span class="s3">\n    </span><span class="s1">boxes: [],</span><span class="s3">\n    </span><span class="s1">loops: [],</span><span class="s3">\n    </span><span class="s1">messages: [],</span><span class="s3">\n    </span><span class="s1">notes: []</span><span class="s3">\n  </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">init: /* @__PURE__ */ __name(function() {</span><span class="s3">\n    </span><span class="s1">this.sequenceItems = [];</span><span class="s3">\n    </span><span class="s1">this.activations = [];</span><span class="s3">\n    </span><span class="s1">this.models.clear();</span><span class="s3">\n    </span><span class="s1">this.data = {</span><span class="s3">\n      </span><span class="s1">startx: void 0,</span><span class="s3">\n      </span><span class="s1">stopx: void 0,</span><span class="s3">\n      </span><span class="s1">starty: void 0,</span><span class="s3">\n      </span><span class="s1">stopy: void 0</span><span class="s3">\n    </span><span class="s1">};</span><span class="s3">\n    </span><span class="s1">this.verticalPos = 0;</span><span class="s3">\n    </span><span class="s1">setConf(getConfig2());</span><span class="s3">\n  </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">init</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n  </span><span class="s1">updateVal: /* @__PURE__ */ __name(function(obj, key, val, fun) {</span><span class="s3">\n    </span><span class="s1">if (obj[key] === void 0) {</span><span class="s3">\n      </span><span class="s1">obj[key] = val;</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">obj[key] = fun(val, obj[key]);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">updateVal</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n  </span><span class="s1">updateBounds: /* @__PURE__ */ __name(function(startx, starty, stopx, stopy) {</span><span class="s3">\n    </span><span class="s1">const _self = this;</span><span class="s3">\n    </span><span class="s1">let cnt = 0;</span><span class="s3">\n    </span><span class="s1">function updateFn(type) {</span><span class="s3">\n      </span><span class="s1">return /* @__PURE__ */ __name(function updateItemBounds(item) {</span><span class="s3">\n        </span><span class="s1">cnt++;</span><span class="s3">\n        </span><span class="s1">const n = _self.sequenceItems.length - cnt + 1;</span><span class="s3">\n        </span><span class="s1">_self.updateVal(item, </span><span class="s3">\&quot;</span><span class="s1">starty</span><span class="s3">\&quot;</span><span class="s1">, starty - n * conf.boxMargin, Math.min);</span><span class="s3">\n        </span><span class="s1">_self.updateVal(item, </span><span class="s3">\&quot;</span><span class="s1">stopy</span><span class="s3">\&quot;</span><span class="s1">, stopy + n * conf.boxMargin, Math.max);</span><span class="s3">\n        </span><span class="s1">_self.updateVal(bounds.data, </span><span class="s3">\&quot;</span><span class="s1">startx</span><span class="s3">\&quot;</span><span class="s1">, startx - n * conf.boxMargin, Math.min);</span><span class="s3">\n        </span><span class="s1">_self.updateVal(bounds.data, </span><span class="s3">\&quot;</span><span class="s1">stopx</span><span class="s3">\&quot;</span><span class="s1">, stopx + n * conf.boxMargin, Math.max);</span><span class="s3">\n        </span><span class="s1">if (!(type === </span><span class="s3">\&quot;</span><span class="s1">activation</span><span class="s3">\&quot;</span><span class="s1">)) {</span><span class="s3">\n          </span><span class="s1">_self.updateVal(item, </span><span class="s3">\&quot;</span><span class="s1">startx</span><span class="s3">\&quot;</span><span class="s1">, startx - n * conf.boxMargin, Math.min);</span><span class="s3">\n          </span><span class="s1">_self.updateVal(item, </span><span class="s3">\&quot;</span><span class="s1">stopx</span><span class="s3">\&quot;</span><span class="s1">, stopx + n * conf.boxMargin, Math.max);</span><span class="s3">\n          </span><span class="s1">_self.updateVal(bounds.data, </span><span class="s3">\&quot;</span><span class="s1">starty</span><span class="s3">\&quot;</span><span class="s1">, starty - n * conf.boxMargin, Math.min);</span><span class="s3">\n          </span><span class="s1">_self.updateVal(bounds.data, </span><span class="s3">\&quot;</span><span class="s1">stopy</span><span class="s3">\&quot;</span><span class="s1">, stopy + n * conf.boxMargin, Math.max);</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">updateItemBounds</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">__name(updateFn, </span><span class="s3">\&quot;</span><span class="s1">updateFn</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">this.sequenceItems.forEach(updateFn());</span><span class="s3">\n    </span><span class="s1">this.activations.forEach(updateFn(</span><span class="s3">\&quot;</span><span class="s1">activation</span><span class="s3">\&quot;</span><span class="s1">));</span><span class="s3">\n  </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">updateBounds</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n  </span><span class="s1">insert: /* @__PURE__ */ __name(function(startx, starty, stopx, stopy) {</span><span class="s3">\n    </span><span class="s1">const _startx = common_default.getMin(startx, stopx);</span><span class="s3">\n    </span><span class="s1">const _stopx = common_default.getMax(startx, stopx);</span><span class="s3">\n    </span><span class="s1">const _starty = common_default.getMin(starty, stopy);</span><span class="s3">\n    </span><span class="s1">const _stopy = common_default.getMax(starty, stopy);</span><span class="s3">\n    </span><span class="s1">this.updateVal(bounds.data, </span><span class="s3">\&quot;</span><span class="s1">startx</span><span class="s3">\&quot;</span><span class="s1">, _startx, Math.min);</span><span class="s3">\n    </span><span class="s1">this.updateVal(bounds.data, </span><span class="s3">\&quot;</span><span class="s1">starty</span><span class="s3">\&quot;</span><span class="s1">, _starty, Math.min);</span><span class="s3">\n    </span><span class="s1">this.updateVal(bounds.data, </span><span class="s3">\&quot;</span><span class="s1">stopx</span><span class="s3">\&quot;</span><span class="s1">, _stopx, Math.max);</span><span class="s3">\n    </span><span class="s1">this.updateVal(bounds.data, </span><span class="s3">\&quot;</span><span class="s1">stopy</span><span class="s3">\&quot;</span><span class="s1">, _stopy, Math.max);</span><span class="s3">\n    </span><span class="s1">this.updateBounds(_startx, _starty, _stopx, _stopy);</span><span class="s3">\n  </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">insert</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n  </span><span class="s1">newActivation: /* @__PURE__ */ __name(function(message, diagram2, actors) {</span><span class="s3">\n    </span><span class="s1">const actorRect = actors.get(message.from);</span><span class="s3">\n    </span><span class="s1">const stackedSize = actorActivations(message.from).length || 0;</span><span class="s3">\n    </span><span class="s1">const x = actorRect.x + actorRect.width / 2 + (stackedSize - 1) * conf.activationWidth / 2;</span><span class="s3">\n    </span><span class="s1">this.activations.push({</span><span class="s3">\n      </span><span class="s1">startx: x,</span><span class="s3">\n      </span><span class="s1">starty: this.verticalPos + 2,</span><span class="s3">\n      </span><span class="s1">stopx: x + conf.activationWidth,</span><span class="s3">\n      </span><span class="s1">stopy: void 0,</span><span class="s3">\n      </span><span class="s1">actor: message.from,</span><span class="s3">\n      </span><span class="s1">anchored: svgDraw_default.anchorElement(diagram2)</span><span class="s3">\n    </span><span class="s1">});</span><span class="s3">\n  </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">newActivation</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n  </span><span class="s1">endActivation: /* @__PURE__ */ __name(function(message) {</span><span class="s3">\n    </span><span class="s1">const lastActorActivationIdx = this.activations.map(function(activation) {</span><span class="s3">\n      </span><span class="s1">return activation.actor;</span><span class="s3">\n    </span><span class="s1">}).lastIndexOf(message.from);</span><span class="s3">\n    </span><span class="s1">return this.activations.splice(lastActorActivationIdx, 1)[0];</span><span class="s3">\n  </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">endActivation</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n  </span><span class="s1">createLoop: /* @__PURE__ */ __name(function(title = { message: void 0, wrap: false, width: void 0 }, fill) {</span><span class="s3">\n    </span><span class="s1">return {</span><span class="s3">\n      </span><span class="s1">startx: void 0,</span><span class="s3">\n      </span><span class="s1">starty: this.verticalPos,</span><span class="s3">\n      </span><span class="s1">stopx: void 0,</span><span class="s3">\n      </span><span class="s1">stopy: void 0,</span><span class="s3">\n      </span><span class="s1">title: title.message,</span><span class="s3">\n      </span><span class="s1">wrap: title.wrap,</span><span class="s3">\n      </span><span class="s1">width: title.width,</span><span class="s3">\n      </span><span class="s1">height: 0,</span><span class="s3">\n      </span><span class="s1">fill</span><span class="s3">\n    </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">createLoop</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n  </span><span class="s1">newLoop: /* @__PURE__ */ __name(function(title = { message: void 0, wrap: false, width: void 0 }, fill) {</span><span class="s3">\n    </span><span class="s1">this.sequenceItems.push(this.createLoop(title, fill));</span><span class="s3">\n  </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">newLoop</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n  </span><span class="s1">endLoop: /* @__PURE__ */ __name(function() {</span><span class="s3">\n    </span><span class="s1">return this.sequenceItems.pop();</span><span class="s3">\n  </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">endLoop</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n  </span><span class="s1">isLoopOverlap: /* @__PURE__ */ __name(function() {</span><span class="s3">\n    </span><span class="s1">return this.sequenceItems.length ? this.sequenceItems[this.sequenceItems.length - 1].overlap : false;</span><span class="s3">\n  </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">isLoopOverlap</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n  </span><span class="s1">addSectionToLoop: /* @__PURE__ */ __name(function(message) {</span><span class="s3">\n    </span><span class="s1">const loop = this.sequenceItems.pop();</span><span class="s3">\n    </span><span class="s1">loop.sections = loop.sections || [];</span><span class="s3">\n    </span><span class="s1">loop.sectionTitles = loop.sectionTitles || [];</span><span class="s3">\n    </span><span class="s1">loop.sections.push({ y: bounds.getVerticalPos(), height: 0 });</span><span class="s3">\n    </span><span class="s1">loop.sectionTitles.push(message);</span><span class="s3">\n    </span><span class="s1">this.sequenceItems.push(loop);</span><span class="s3">\n  </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">addSectionToLoop</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n  </span><span class="s1">saveVerticalPos: /* @__PURE__ */ __name(function() {</span><span class="s3">\n    </span><span class="s1">if (this.isLoopOverlap()) {</span><span class="s3">\n      </span><span class="s1">this.savedVerticalPos = this.verticalPos;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">saveVerticalPos</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n  </span><span class="s1">resetVerticalPos: /* @__PURE__ */ __name(function() {</span><span class="s3">\n    </span><span class="s1">if (this.isLoopOverlap()) {</span><span class="s3">\n      </span><span class="s1">this.verticalPos = this.savedVerticalPos;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">resetVerticalPos</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n  </span><span class="s1">bumpVerticalPos: /* @__PURE__ */ __name(function(bump) {</span><span class="s3">\n    </span><span class="s1">this.verticalPos = this.verticalPos + bump;</span><span class="s3">\n    </span><span class="s1">this.data.stopy = common_default.getMax(this.data.stopy, this.verticalPos);</span><span class="s3">\n  </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">bumpVerticalPos</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n  </span><span class="s1">getVerticalPos: /* @__PURE__ */ __name(function() {</span><span class="s3">\n    </span><span class="s1">return this.verticalPos;</span><span class="s3">\n  </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">getVerticalPos</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n  </span><span class="s1">getBounds: /* @__PURE__ */ __name(function() {</span><span class="s3">\n    </span><span class="s1">return { bounds: this.data, models: this.models };</span><span class="s3">\n  </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">getBounds</span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n</span><span class="s1">var drawNote = /* @__PURE__ */ __name(async function(elem, noteModel) {</span><span class="s3">\n  </span><span class="s1">bounds.bumpVerticalPos(conf.boxMargin);</span><span class="s3">\n  </span><span class="s1">noteModel.height = conf.boxMargin;</span><span class="s3">\n  </span><span class="s1">noteModel.starty = bounds.getVerticalPos();</span><span class="s3">\n  </span><span class="s1">const rect = getNoteRect();</span><span class="s3">\n  </span><span class="s1">rect.x = noteModel.startx;</span><span class="s3">\n  </span><span class="s1">rect.y = noteModel.starty;</span><span class="s3">\n  </span><span class="s1">rect.width = noteModel.width || conf.width;</span><span class="s3">\n  </span><span class="s1">rect.class = </span><span class="s3">\&quot;</span><span class="s1">note</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">const g = elem.append(</span><span class="s3">\&quot;</span><span class="s1">g</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const rectElem = svgDraw_default.drawRect(g, rect);</span><span class="s3">\n  </span><span class="s1">const textObj = getTextObj();</span><span class="s3">\n  </span><span class="s1">textObj.x = noteModel.startx;</span><span class="s3">\n  </span><span class="s1">textObj.y = noteModel.starty;</span><span class="s3">\n  </span><span class="s1">textObj.width = rect.width;</span><span class="s3">\n  </span><span class="s1">textObj.dy = </span><span class="s3">\&quot;</span><span class="s1">1em</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">textObj.text = noteModel.message;</span><span class="s3">\n  </span><span class="s1">textObj.class = </span><span class="s3">\&quot;</span><span class="s1">noteText</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">textObj.fontFamily = conf.noteFontFamily;</span><span class="s3">\n  </span><span class="s1">textObj.fontSize = conf.noteFontSize;</span><span class="s3">\n  </span><span class="s1">textObj.fontWeight = conf.noteFontWeight;</span><span class="s3">\n  </span><span class="s1">textObj.anchor = conf.noteAlign;</span><span class="s3">\n  </span><span class="s1">textObj.textMargin = conf.noteMargin;</span><span class="s3">\n  </span><span class="s1">textObj.valign = </span><span class="s3">\&quot;</span><span class="s1">center</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">const textElem = hasKatex(textObj.text) ? await drawKatex(g, textObj) : drawText(g, textObj);</span><span class="s3">\n  </span><span class="s1">const textHeight = Math.round(</span><span class="s3">\n    </span><span class="s1">textElem.map((te) =&gt; (te._groups || te)[0][0].getBBox().height).reduce((acc, curr) =&gt; acc + curr)</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">rectElem.attr(</span><span class="s3">\&quot;</span><span class="s1">height</span><span class="s3">\&quot;</span><span class="s1">, textHeight + 2 * conf.noteMargin);</span><span class="s3">\n  </span><span class="s1">noteModel.height += textHeight + 2 * conf.noteMargin;</span><span class="s3">\n  </span><span class="s1">bounds.bumpVerticalPos(textHeight + 2 * conf.noteMargin);</span><span class="s3">\n  </span><span class="s1">noteModel.stopy = noteModel.starty + textHeight + 2 * conf.noteMargin;</span><span class="s3">\n  </span><span class="s1">noteModel.stopx = noteModel.startx + rect.width;</span><span class="s3">\n  </span><span class="s1">bounds.insert(noteModel.startx, noteModel.starty, noteModel.stopx, noteModel.stopy);</span><span class="s3">\n  </span><span class="s1">bounds.models.addNote(noteModel);</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">drawNote</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var messageFont = /* @__PURE__ */ __name((cnf) =&gt; {</span><span class="s3">\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">fontFamily: cnf.messageFontFamily,</span><span class="s3">\n    </span><span class="s1">fontSize: cnf.messageFontSize,</span><span class="s3">\n    </span><span class="s1">fontWeight: cnf.messageFontWeight</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">messageFont</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var noteFont = /* @__PURE__ */ __name((cnf) =&gt; {</span><span class="s3">\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">fontFamily: cnf.noteFontFamily,</span><span class="s3">\n    </span><span class="s1">fontSize: cnf.noteFontSize,</span><span class="s3">\n    </span><span class="s1">fontWeight: cnf.noteFontWeight</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">noteFont</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var actorFont = /* @__PURE__ */ __name((cnf) =&gt; {</span><span class="s3">\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">fontFamily: cnf.actorFontFamily,</span><span class="s3">\n    </span><span class="s1">fontSize: cnf.actorFontSize,</span><span class="s3">\n    </span><span class="s1">fontWeight: cnf.actorFontWeight</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">actorFont</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">async function boundMessage(_diagram, msgModel) {</span><span class="s3">\n  </span><span class="s1">bounds.bumpVerticalPos(10);</span><span class="s3">\n  </span><span class="s1">const { startx, stopx, message } = msgModel;</span><span class="s3">\n  </span><span class="s1">const lines = common_default.splitBreaks(message).length;</span><span class="s3">\n  </span><span class="s1">const isKatexMsg = hasKatex(message);</span><span class="s3">\n  </span><span class="s1">const textDims = isKatexMsg ? await calculateMathMLDimensions(message, getConfig2()) : utils_default.calculateTextDimensions(message, messageFont(conf));</span><span class="s3">\n  </span><span class="s1">if (!isKatexMsg) {</span><span class="s3">\n    </span><span class="s1">const lineHeight = textDims.height / lines;</span><span class="s3">\n    </span><span class="s1">msgModel.height += lineHeight;</span><span class="s3">\n    </span><span class="s1">bounds.bumpVerticalPos(lineHeight);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">let lineStartY;</span><span class="s3">\n  </span><span class="s1">let totalOffset = textDims.height - 10;</span><span class="s3">\n  </span><span class="s1">const textWidth = textDims.width;</span><span class="s3">\n  </span><span class="s1">if (startx === stopx) {</span><span class="s3">\n    </span><span class="s1">lineStartY = bounds.getVerticalPos() + totalOffset;</span><span class="s3">\n    </span><span class="s1">if (!conf.rightAngles) {</span><span class="s3">\n      </span><span class="s1">totalOffset += conf.boxMargin;</span><span class="s3">\n      </span><span class="s1">lineStartY = bounds.getVerticalPos() + totalOffset;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">totalOffset += 30;</span><span class="s3">\n    </span><span class="s1">const dx = common_default.getMax(textWidth / 2, conf.width / 2);</span><span class="s3">\n    </span><span class="s1">bounds.insert(</span><span class="s3">\n      </span><span class="s1">startx - dx,</span><span class="s3">\n      </span><span class="s1">bounds.getVerticalPos() - 10 + totalOffset,</span><span class="s3">\n      </span><span class="s1">stopx + dx,</span><span class="s3">\n      </span><span class="s1">bounds.getVerticalPos() + 30 + totalOffset</span><span class="s3">\n    </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">totalOffset += conf.boxMargin;</span><span class="s3">\n    </span><span class="s1">lineStartY = bounds.getVerticalPos() + totalOffset;</span><span class="s3">\n    </span><span class="s1">bounds.insert(startx, lineStartY - 10, stopx, lineStartY);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">bounds.bumpVerticalPos(totalOffset);</span><span class="s3">\n  </span><span class="s1">msgModel.height += totalOffset;</span><span class="s3">\n  </span><span class="s1">msgModel.stopy = msgModel.starty + msgModel.height;</span><span class="s3">\n  </span><span class="s1">bounds.insert(msgModel.fromBounds, msgModel.starty, msgModel.toBounds, msgModel.stopy);</span><span class="s3">\n  </span><span class="s1">return lineStartY;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">__name(boundMessage, </span><span class="s3">\&quot;</span><span class="s1">boundMessage</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var drawMessage = /* @__PURE__ */ __name(async function(diagram2, msgModel, lineStartY, diagObj) {</span><span class="s3">\n  </span><span class="s1">const { startx, stopx, starty, message, type, sequenceIndex, sequenceVisible } = msgModel;</span><span class="s3">\n  </span><span class="s1">const textDims = utils_default.calculateTextDimensions(message, messageFont(conf));</span><span class="s3">\n  </span><span class="s1">const textObj = getTextObj();</span><span class="s3">\n  </span><span class="s1">textObj.x = startx;</span><span class="s3">\n  </span><span class="s1">textObj.y = starty + 10;</span><span class="s3">\n  </span><span class="s1">textObj.width = stopx - startx;</span><span class="s3">\n  </span><span class="s1">textObj.class = </span><span class="s3">\&quot;</span><span class="s1">messageText</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">textObj.dy = </span><span class="s3">\&quot;</span><span class="s1">1em</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">textObj.text = message;</span><span class="s3">\n  </span><span class="s1">textObj.fontFamily = conf.messageFontFamily;</span><span class="s3">\n  </span><span class="s1">textObj.fontSize = conf.messageFontSize;</span><span class="s3">\n  </span><span class="s1">textObj.fontWeight = conf.messageFontWeight;</span><span class="s3">\n  </span><span class="s1">textObj.anchor = conf.messageAlign;</span><span class="s3">\n  </span><span class="s1">textObj.valign = </span><span class="s3">\&quot;</span><span class="s1">center</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">textObj.textMargin = conf.wrapPadding;</span><span class="s3">\n  </span><span class="s1">textObj.tspan = false;</span><span class="s3">\n  </span><span class="s1">if (hasKatex(textObj.text)) {</span><span class="s3">\n    </span><span class="s1">await drawKatex(diagram2, textObj, { startx, stopx, starty: lineStartY });</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">drawText(diagram2, textObj);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">const textWidth = textDims.width;</span><span class="s3">\n  </span><span class="s1">let line;</span><span class="s3">\n  </span><span class="s1">if (startx === stopx) {</span><span class="s3">\n    </span><span class="s1">if (conf.rightAngles) {</span><span class="s3">\n      </span><span class="s1">line = diagram2.append(</span><span class="s3">\&quot;</span><span class="s1">path</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\n        \&quot;</span><span class="s1">d</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n        </span><span class="s1">`M  ${startx},${lineStartY} H ${startx + common_default.getMax(conf.width / 2, textWidth / 2)} V ${lineStartY + 25} H ${startx}`</span><span class="s3">\n      </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">line = diagram2.append(</span><span class="s3">\&quot;</span><span class="s1">path</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\n        \&quot;</span><span class="s1">d</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n        \&quot;</span><span class="s1">M </span><span class="s3">\&quot; </span><span class="s1">+ startx + </span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot; </span><span class="s1">+ lineStartY + </span><span class="s3">\&quot; </span><span class="s1">C </span><span class="s3">\&quot; </span><span class="s1">+ (startx + 60) + </span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot; </span><span class="s1">+ (lineStartY - 10) + </span><span class="s3">\&quot; \&quot; </span><span class="s1">+ (startx + 60) + </span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot; </span><span class="s1">+ (lineStartY + 30) + </span><span class="s3">\&quot; \&quot; </span><span class="s1">+ startx + </span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot; </span><span class="s1">+ (lineStartY + 20)</span><span class="s3">\n      </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">line = diagram2.append(</span><span class="s3">\&quot;</span><span class="s1">line</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">line.attr(</span><span class="s3">\&quot;</span><span class="s1">x1</span><span class="s3">\&quot;</span><span class="s1">, startx);</span><span class="s3">\n    </span><span class="s1">line.attr(</span><span class="s3">\&quot;</span><span class="s1">y1</span><span class="s3">\&quot;</span><span class="s1">, lineStartY);</span><span class="s3">\n    </span><span class="s1">line.attr(</span><span class="s3">\&quot;</span><span class="s1">x2</span><span class="s3">\&quot;</span><span class="s1">, stopx);</span><span class="s3">\n    </span><span class="s1">line.attr(</span><span class="s3">\&quot;</span><span class="s1">y2</span><span class="s3">\&quot;</span><span class="s1">, lineStartY);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (type === diagObj.db.LINETYPE.DOTTED || type === diagObj.db.LINETYPE.DOTTED_CROSS || type === diagObj.db.LINETYPE.DOTTED_POINT || type === diagObj.db.LINETYPE.DOTTED_OPEN || type === diagObj.db.LINETYPE.BIDIRECTIONAL_DOTTED) {</span><span class="s3">\n    </span><span class="s1">line.style(</span><span class="s3">\&quot;</span><span class="s1">stroke-dasharray</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">3, 3</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">line.attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">messageLine1</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">line.attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">messageLine0</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">let url = </span><span class="s3">\&quot;\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">if (conf.arrowMarkerAbsolute) {</span><span class="s3">\n    </span><span class="s1">url = window.location.protocol + </span><span class="s3">\&quot;</span><span class="s1">//</span><span class="s3">\&quot; </span><span class="s1">+ window.location.host + window.location.pathname + window.location.search;</span><span class="s3">\n    </span><span class="s1">url = url.replace(/</span><span class="s3">\\</span><span class="s1">(/g, </span><span class="s3">\&quot;\\\\</span><span class="s1">(</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">url = url.replace(/</span><span class="s3">\\</span><span class="s1">)/g, </span><span class="s3">\&quot;\\\\</span><span class="s1">)</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">line.attr(</span><span class="s3">\&quot;</span><span class="s1">stroke-width</span><span class="s3">\&quot;</span><span class="s1">, 2);</span><span class="s3">\n  </span><span class="s1">line.attr(</span><span class="s3">\&quot;</span><span class="s1">stroke</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">none</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">line.style(</span><span class="s3">\&quot;</span><span class="s1">fill</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">none</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">if (type === diagObj.db.LINETYPE.SOLID || type === diagObj.db.LINETYPE.DOTTED) {</span><span class="s3">\n    </span><span class="s1">line.attr(</span><span class="s3">\&quot;</span><span class="s1">marker-end</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">url(</span><span class="s3">\&quot; </span><span class="s1">+ url + </span><span class="s3">\&quot;</span><span class="s1">#arrowhead)</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (type === diagObj.db.LINETYPE.BIDIRECTIONAL_SOLID || type === diagObj.db.LINETYPE.BIDIRECTIONAL_DOTTED) {</span><span class="s3">\n    </span><span class="s1">line.attr(</span><span class="s3">\&quot;</span><span class="s1">marker-start</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">url(</span><span class="s3">\&quot; </span><span class="s1">+ url + </span><span class="s3">\&quot;</span><span class="s1">#arrowhead)</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">line.attr(</span><span class="s3">\&quot;</span><span class="s1">marker-end</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">url(</span><span class="s3">\&quot; </span><span class="s1">+ url + </span><span class="s3">\&quot;</span><span class="s1">#arrowhead)</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (type === diagObj.db.LINETYPE.SOLID_POINT || type === diagObj.db.LINETYPE.DOTTED_POINT) {</span><span class="s3">\n    </span><span class="s1">line.attr(</span><span class="s3">\&quot;</span><span class="s1">marker-end</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">url(</span><span class="s3">\&quot; </span><span class="s1">+ url + </span><span class="s3">\&quot;</span><span class="s1">#filled-head)</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (type === diagObj.db.LINETYPE.SOLID_CROSS || type === diagObj.db.LINETYPE.DOTTED_CROSS) {</span><span class="s3">\n    </span><span class="s1">line.attr(</span><span class="s3">\&quot;</span><span class="s1">marker-end</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">url(</span><span class="s3">\&quot; </span><span class="s1">+ url + </span><span class="s3">\&quot;</span><span class="s1">#crosshead)</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (sequenceVisible || conf.showSequenceNumbers) {</span><span class="s3">\n    </span><span class="s1">line.attr(</span><span class="s3">\&quot;</span><span class="s1">marker-start</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">url(</span><span class="s3">\&quot; </span><span class="s1">+ url + </span><span class="s3">\&quot;</span><span class="s1">#sequencenumber)</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">diagram2.append(</span><span class="s3">\&quot;</span><span class="s1">text</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">x</span><span class="s3">\&quot;</span><span class="s1">, startx).attr(</span><span class="s3">\&quot;</span><span class="s1">y</span><span class="s3">\&quot;</span><span class="s1">, lineStartY + 4).attr(</span><span class="s3">\&quot;</span><span class="s1">font-family</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">sans-serif</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">font-size</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">12px</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">text-anchor</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">middle</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">sequenceNumber</span><span class="s3">\&quot;</span><span class="s1">).text(sequenceIndex);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">drawMessage</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var addActorRenderingData = /* @__PURE__ */ __name(function(diagram2, actors, createdActors, actorKeys, verticalPos, messages, isFooter) {</span><span class="s3">\n  </span><span class="s1">let prevWidth = 0;</span><span class="s3">\n  </span><span class="s1">let prevMargin = 0;</span><span class="s3">\n  </span><span class="s1">let prevBox = void 0;</span><span class="s3">\n  </span><span class="s1">let maxHeight = 0;</span><span class="s3">\n  </span><span class="s1">for (const actorKey of actorKeys) {</span><span class="s3">\n    </span><span class="s1">const actor = actors.get(actorKey);</span><span class="s3">\n    </span><span class="s1">const box = actor.box;</span><span class="s3">\n    </span><span class="s1">if (prevBox &amp;&amp; prevBox != box) {</span><span class="s3">\n      </span><span class="s1">if (!isFooter) {</span><span class="s3">\n        </span><span class="s1">bounds.models.addBox(prevBox);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">prevMargin += conf.boxMargin + prevBox.margin;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">if (box &amp;&amp; box != prevBox) {</span><span class="s3">\n      </span><span class="s1">if (!isFooter) {</span><span class="s3">\n        </span><span class="s1">box.x = prevWidth + prevMargin;</span><span class="s3">\n        </span><span class="s1">box.y = verticalPos;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">prevMargin += box.margin;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">actor.width = actor.width || conf.width;</span><span class="s3">\n    </span><span class="s1">actor.height = common_default.getMax(actor.height || conf.height, conf.height);</span><span class="s3">\n    </span><span class="s1">actor.margin = actor.margin || conf.actorMargin;</span><span class="s3">\n    </span><span class="s1">maxHeight = common_default.getMax(maxHeight, actor.height);</span><span class="s3">\n    </span><span class="s1">if (createdActors.get(actor.name)) {</span><span class="s3">\n      </span><span class="s1">prevMargin += actor.width / 2;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">actor.x = prevWidth + prevMargin;</span><span class="s3">\n    </span><span class="s1">actor.starty = bounds.getVerticalPos();</span><span class="s3">\n    </span><span class="s1">bounds.insert(actor.x, verticalPos, actor.x + actor.width, actor.height);</span><span class="s3">\n    </span><span class="s1">prevWidth += actor.width + prevMargin;</span><span class="s3">\n    </span><span class="s1">if (actor.box) {</span><span class="s3">\n      </span><span class="s1">actor.box.width = prevWidth + box.margin - actor.box.x;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">prevMargin = actor.margin;</span><span class="s3">\n    </span><span class="s1">prevBox = actor.box;</span><span class="s3">\n    </span><span class="s1">bounds.models.addActor(actor);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (prevBox &amp;&amp; !isFooter) {</span><span class="s3">\n    </span><span class="s1">bounds.models.addBox(prevBox);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">bounds.bumpVerticalPos(maxHeight);</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">addActorRenderingData</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var drawActors = /* @__PURE__ */ __name(async function(diagram2, actors, actorKeys, isFooter) {</span><span class="s3">\n  </span><span class="s1">if (!isFooter) {</span><span class="s3">\n    </span><span class="s1">for (const actorKey of actorKeys) {</span><span class="s3">\n      </span><span class="s1">const actor = actors.get(actorKey);</span><span class="s3">\n      </span><span class="s1">await svgDraw_default.drawActor(diagram2, actor, conf, false);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">let maxHeight = 0;</span><span class="s3">\n    </span><span class="s1">bounds.bumpVerticalPos(conf.boxMargin * 2);</span><span class="s3">\n    </span><span class="s1">for (const actorKey of actorKeys) {</span><span class="s3">\n      </span><span class="s1">const actor = actors.get(actorKey);</span><span class="s3">\n      </span><span class="s1">if (!actor.stopy) {</span><span class="s3">\n        </span><span class="s1">actor.stopy = bounds.getVerticalPos();</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">const height = await svgDraw_default.drawActor(diagram2, actor, conf, true);</span><span class="s3">\n      </span><span class="s1">maxHeight = common_default.getMax(maxHeight, height);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">bounds.bumpVerticalPos(maxHeight + conf.boxMargin);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">drawActors</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var drawActorsPopup = /* @__PURE__ */ __name(function(diagram2, actors, actorKeys, doc) {</span><span class="s3">\n  </span><span class="s1">let maxHeight = 0;</span><span class="s3">\n  </span><span class="s1">let maxWidth = 0;</span><span class="s3">\n  </span><span class="s1">for (const actorKey of actorKeys) {</span><span class="s3">\n    </span><span class="s1">const actor = actors.get(actorKey);</span><span class="s3">\n    </span><span class="s1">const minMenuWidth = getRequiredPopupWidth(actor);</span><span class="s3">\n    </span><span class="s1">const menuDimensions = svgDraw_default.drawPopup(</span><span class="s3">\n      </span><span class="s1">diagram2,</span><span class="s3">\n      </span><span class="s1">actor,</span><span class="s3">\n      </span><span class="s1">minMenuWidth,</span><span class="s3">\n      </span><span class="s1">conf,</span><span class="s3">\n      </span><span class="s1">conf.forceMenus,</span><span class="s3">\n      </span><span class="s1">doc</span><span class="s3">\n    </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">if (menuDimensions.height &gt; maxHeight) {</span><span class="s3">\n      </span><span class="s1">maxHeight = menuDimensions.height;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">if (menuDimensions.width + actor.x &gt; maxWidth) {</span><span class="s3">\n      </span><span class="s1">maxWidth = menuDimensions.width + actor.x;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return { maxHeight, maxWidth };</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">drawActorsPopup</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var setConf = /* @__PURE__ */ __name(function(cnf) {</span><span class="s3">\n  </span><span class="s1">assignWithDepth_default(conf, cnf);</span><span class="s3">\n  </span><span class="s1">if (cnf.fontFamily) {</span><span class="s3">\n    </span><span class="s1">conf.actorFontFamily = conf.noteFontFamily = conf.messageFontFamily = cnf.fontFamily;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (cnf.fontSize) {</span><span class="s3">\n    </span><span class="s1">conf.actorFontSize = conf.noteFontSize = conf.messageFontSize = cnf.fontSize;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (cnf.fontWeight) {</span><span class="s3">\n    </span><span class="s1">conf.actorFontWeight = conf.noteFontWeight = conf.messageFontWeight = cnf.fontWeight;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">setConf</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var actorActivations = /* @__PURE__ */ __name(function(actor) {</span><span class="s3">\n  </span><span class="s1">return bounds.activations.filter(function(activation) {</span><span class="s3">\n    </span><span class="s1">return activation.actor === actor;</span><span class="s3">\n  </span><span class="s1">});</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">actorActivations</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var activationBounds = /* @__PURE__ */ __name(function(actor, actors) {</span><span class="s3">\n  </span><span class="s1">const actorObj = actors.get(actor);</span><span class="s3">\n  </span><span class="s1">const activations = actorActivations(actor);</span><span class="s3">\n  </span><span class="s1">const left = activations.reduce(</span><span class="s3">\n    </span><span class="s1">function(acc, activation) {</span><span class="s3">\n      </span><span class="s1">return common_default.getMin(acc, activation.startx);</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">actorObj.x + actorObj.width / 2 - 1</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const right = activations.reduce(</span><span class="s3">\n    </span><span class="s1">function(acc, activation) {</span><span class="s3">\n      </span><span class="s1">return common_default.getMax(acc, activation.stopx);</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">actorObj.x + actorObj.width / 2 + 1</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">return [left, right];</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">activationBounds</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">function adjustLoopHeightForWrap(loopWidths, msg, preMargin, postMargin, addLoopFn) {</span><span class="s3">\n  </span><span class="s1">bounds.bumpVerticalPos(preMargin);</span><span class="s3">\n  </span><span class="s1">let heightAdjust = postMargin;</span><span class="s3">\n  </span><span class="s1">if (msg.id &amp;&amp; msg.message &amp;&amp; loopWidths[msg.id]) {</span><span class="s3">\n    </span><span class="s1">const loopWidth = loopWidths[msg.id].width;</span><span class="s3">\n    </span><span class="s1">const textConf = messageFont(conf);</span><span class="s3">\n    </span><span class="s1">msg.message = utils_default.wrapLabel(`[${msg.message}]`, loopWidth - 2 * conf.wrapPadding, textConf);</span><span class="s3">\n    </span><span class="s1">msg.width = loopWidth;</span><span class="s3">\n    </span><span class="s1">msg.wrap = true;</span><span class="s3">\n    </span><span class="s1">const textDims = utils_default.calculateTextDimensions(msg.message, textConf);</span><span class="s3">\n    </span><span class="s1">const totalOffset = common_default.getMax(textDims.height, conf.labelBoxHeight);</span><span class="s3">\n    </span><span class="s1">heightAdjust = postMargin + totalOffset;</span><span class="s3">\n    </span><span class="s1">log.debug(`${totalOffset} - ${msg.message}`);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">addLoopFn(msg);</span><span class="s3">\n  </span><span class="s1">bounds.bumpVerticalPos(heightAdjust);</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">__name(adjustLoopHeightForWrap, </span><span class="s3">\&quot;</span><span class="s1">adjustLoopHeightForWrap</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">function adjustCreatedDestroyedData(msg, msgModel, lineStartY, index, actors, createdActors, destroyedActors) {</span><span class="s3">\n  </span><span class="s1">function receiverAdjustment(actor, adjustment) {</span><span class="s3">\n    </span><span class="s1">if (actor.x &lt; actors.get(msg.from).x) {</span><span class="s3">\n      </span><span class="s1">bounds.insert(</span><span class="s3">\n        </span><span class="s1">msgModel.stopx - adjustment,</span><span class="s3">\n        </span><span class="s1">msgModel.starty,</span><span class="s3">\n        </span><span class="s1">msgModel.startx,</span><span class="s3">\n        </span><span class="s1">msgModel.stopy + actor.height / 2 + conf.noteMargin</span><span class="s3">\n      </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">msgModel.stopx = msgModel.stopx + adjustment;</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">bounds.insert(</span><span class="s3">\n        </span><span class="s1">msgModel.startx,</span><span class="s3">\n        </span><span class="s1">msgModel.starty,</span><span class="s3">\n        </span><span class="s1">msgModel.stopx + adjustment,</span><span class="s3">\n        </span><span class="s1">msgModel.stopy + actor.height / 2 + conf.noteMargin</span><span class="s3">\n      </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">msgModel.stopx = msgModel.stopx - adjustment;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">__name(receiverAdjustment, </span><span class="s3">\&quot;</span><span class="s1">receiverAdjustment</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">function senderAdjustment(actor, adjustment) {</span><span class="s3">\n    </span><span class="s1">if (actor.x &lt; actors.get(msg.to).x) {</span><span class="s3">\n      </span><span class="s1">bounds.insert(</span><span class="s3">\n        </span><span class="s1">msgModel.startx - adjustment,</span><span class="s3">\n        </span><span class="s1">msgModel.starty,</span><span class="s3">\n        </span><span class="s1">msgModel.stopx,</span><span class="s3">\n        </span><span class="s1">msgModel.stopy + actor.height / 2 + conf.noteMargin</span><span class="s3">\n      </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">msgModel.startx = msgModel.startx + adjustment;</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">bounds.insert(</span><span class="s3">\n        </span><span class="s1">msgModel.stopx,</span><span class="s3">\n        </span><span class="s1">msgModel.starty,</span><span class="s3">\n        </span><span class="s1">msgModel.startx + adjustment,</span><span class="s3">\n        </span><span class="s1">msgModel.stopy + actor.height / 2 + conf.noteMargin</span><span class="s3">\n      </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">msgModel.startx = msgModel.startx - adjustment;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">__name(senderAdjustment, </span><span class="s3">\&quot;</span><span class="s1">senderAdjustment</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">if (createdActors.get(msg.to) == index) {</span><span class="s3">\n    </span><span class="s1">const actor = actors.get(msg.to);</span><span class="s3">\n    </span><span class="s1">const adjustment = actor.type == </span><span class="s3">\&quot;</span><span class="s1">actor</span><span class="s3">\&quot; </span><span class="s1">? ACTOR_TYPE_WIDTH / 2 + 3 : actor.width / 2 + 3;</span><span class="s3">\n    </span><span class="s1">receiverAdjustment(actor, adjustment);</span><span class="s3">\n    </span><span class="s1">actor.starty = lineStartY - actor.height / 2;</span><span class="s3">\n    </span><span class="s1">bounds.bumpVerticalPos(actor.height / 2);</span><span class="s3">\n  </span><span class="s1">} else if (destroyedActors.get(msg.from) == index) {</span><span class="s3">\n    </span><span class="s1">const actor = actors.get(msg.from);</span><span class="s3">\n    </span><span class="s1">if (conf.mirrorActors) {</span><span class="s3">\n      </span><span class="s1">const adjustment = actor.type == </span><span class="s3">\&quot;</span><span class="s1">actor</span><span class="s3">\&quot; </span><span class="s1">? ACTOR_TYPE_WIDTH / 2 : actor.width / 2;</span><span class="s3">\n      </span><span class="s1">senderAdjustment(actor, adjustment);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">actor.stopy = lineStartY - actor.height / 2;</span><span class="s3">\n    </span><span class="s1">bounds.bumpVerticalPos(actor.height / 2);</span><span class="s3">\n  </span><span class="s1">} else if (destroyedActors.get(msg.to) == index) {</span><span class="s3">\n    </span><span class="s1">const actor = actors.get(msg.to);</span><span class="s3">\n    </span><span class="s1">if (conf.mirrorActors) {</span><span class="s3">\n      </span><span class="s1">const adjustment = actor.type == </span><span class="s3">\&quot;</span><span class="s1">actor</span><span class="s3">\&quot; </span><span class="s1">? ACTOR_TYPE_WIDTH / 2 + 3 : actor.width / 2 + 3;</span><span class="s3">\n      </span><span class="s1">receiverAdjustment(actor, adjustment);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">actor.stopy = lineStartY - actor.height / 2;</span><span class="s3">\n    </span><span class="s1">bounds.bumpVerticalPos(actor.height / 2);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">__name(adjustCreatedDestroyedData, </span><span class="s3">\&quot;</span><span class="s1">adjustCreatedDestroyedData</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var draw = /* @__PURE__ */ __name(async function(_text, id, _version, diagObj) {</span><span class="s3">\n  </span><span class="s1">const { securityLevel, sequence } = getConfig2();</span><span class="s3">\n  </span><span class="s1">conf = sequence;</span><span class="s3">\n  </span><span class="s1">let sandboxElement;</span><span class="s3">\n  </span><span class="s1">if (securityLevel === </span><span class="s3">\&quot;</span><span class="s1">sandbox</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">sandboxElement = select(</span><span class="s3">\&quot;</span><span class="s1">#i</span><span class="s3">\&quot; </span><span class="s1">+ id);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">const root = securityLevel === </span><span class="s3">\&quot;</span><span class="s1">sandbox</span><span class="s3">\&quot; </span><span class="s1">? select(sandboxElement.nodes()[0].contentDocument.body) : select(</span><span class="s3">\&quot;</span><span class="s1">body</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const doc = securityLevel === </span><span class="s3">\&quot;</span><span class="s1">sandbox</span><span class="s3">\&quot; </span><span class="s1">? sandboxElement.nodes()[0].contentDocument : document;</span><span class="s3">\n  </span><span class="s1">bounds.init();</span><span class="s3">\n  </span><span class="s1">log.debug(diagObj.db);</span><span class="s3">\n  </span><span class="s1">const diagram2 = securityLevel === </span><span class="s3">\&quot;</span><span class="s1">sandbox</span><span class="s3">\&quot; </span><span class="s1">? root.select(`[id=</span><span class="s3">\&quot;</span><span class="s1">${id}</span><span class="s3">\&quot;</span><span class="s1">]`) : select(`[id=</span><span class="s3">\&quot;</span><span class="s1">${id}</span><span class="s3">\&quot;</span><span class="s1">]`);</span><span class="s3">\n  </span><span class="s1">const actors = diagObj.db.getActors();</span><span class="s3">\n  </span><span class="s1">const createdActors = diagObj.db.getCreatedActors();</span><span class="s3">\n  </span><span class="s1">const destroyedActors = diagObj.db.getDestroyedActors();</span><span class="s3">\n  </span><span class="s1">const boxes = diagObj.db.getBoxes();</span><span class="s3">\n  </span><span class="s1">let actorKeys = diagObj.db.getActorKeys();</span><span class="s3">\n  </span><span class="s1">const messages = diagObj.db.getMessages();</span><span class="s3">\n  </span><span class="s1">const title = diagObj.db.getDiagramTitle();</span><span class="s3">\n  </span><span class="s1">const hasBoxes = diagObj.db.hasAtLeastOneBox();</span><span class="s3">\n  </span><span class="s1">const hasBoxTitles = diagObj.db.hasAtLeastOneBoxWithTitle();</span><span class="s3">\n  </span><span class="s1">const maxMessageWidthPerActor = await getMaxMessageWidthPerActor(actors, messages, diagObj);</span><span class="s3">\n  </span><span class="s1">conf.height = await calculateActorMargins(actors, maxMessageWidthPerActor, boxes);</span><span class="s3">\n  </span><span class="s1">svgDraw_default.insertComputerIcon(diagram2);</span><span class="s3">\n  </span><span class="s1">svgDraw_default.insertDatabaseIcon(diagram2);</span><span class="s3">\n  </span><span class="s1">svgDraw_default.insertClockIcon(diagram2);</span><span class="s3">\n  </span><span class="s1">if (hasBoxes) {</span><span class="s3">\n    </span><span class="s1">bounds.bumpVerticalPos(conf.boxMargin);</span><span class="s3">\n    </span><span class="s1">if (hasBoxTitles) {</span><span class="s3">\n      </span><span class="s1">bounds.bumpVerticalPos(boxes[0].textMaxHeight);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (conf.hideUnusedParticipants === true) {</span><span class="s3">\n    </span><span class="s1">const newActors = /* @__PURE__ */ new Set();</span><span class="s3">\n    </span><span class="s1">messages.forEach((message) =&gt; {</span><span class="s3">\n      </span><span class="s1">newActors.add(message.from);</span><span class="s3">\n      </span><span class="s1">newActors.add(message.to);</span><span class="s3">\n    </span><span class="s1">});</span><span class="s3">\n    </span><span class="s1">actorKeys = actorKeys.filter((actorKey) =&gt; newActors.has(actorKey));</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">addActorRenderingData(diagram2, actors, createdActors, actorKeys, 0, messages, false);</span><span class="s3">\n  </span><span class="s1">const loopWidths = await calculateLoopBounds(messages, actors, maxMessageWidthPerActor, diagObj);</span><span class="s3">\n  </span><span class="s1">svgDraw_default.insertArrowHead(diagram2);</span><span class="s3">\n  </span><span class="s1">svgDraw_default.insertArrowCrossHead(diagram2);</span><span class="s3">\n  </span><span class="s1">svgDraw_default.insertArrowFilledHead(diagram2);</span><span class="s3">\n  </span><span class="s1">svgDraw_default.insertSequenceNumber(diagram2);</span><span class="s3">\n  </span><span class="s1">function activeEnd(msg, verticalPos) {</span><span class="s3">\n    </span><span class="s1">const activationData = bounds.endActivation(msg);</span><span class="s3">\n    </span><span class="s1">if (activationData.starty + 18 &gt; verticalPos) {</span><span class="s3">\n      </span><span class="s1">activationData.starty = verticalPos - 6;</span><span class="s3">\n      </span><span class="s1">verticalPos += 12;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">svgDraw_default.drawActivation(</span><span class="s3">\n      </span><span class="s1">diagram2,</span><span class="s3">\n      </span><span class="s1">activationData,</span><span class="s3">\n      </span><span class="s1">verticalPos,</span><span class="s3">\n      </span><span class="s1">conf,</span><span class="s3">\n      </span><span class="s1">actorActivations(msg.from).length</span><span class="s3">\n    </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">bounds.insert(activationData.startx, verticalPos - 10, activationData.stopx, verticalPos);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">__name(activeEnd, </span><span class="s3">\&quot;</span><span class="s1">activeEnd</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">let sequenceIndex = 1;</span><span class="s3">\n  </span><span class="s1">let sequenceIndexStep = 1;</span><span class="s3">\n  </span><span class="s1">const messagesToDraw = [];</span><span class="s3">\n  </span><span class="s1">const backgrounds = [];</span><span class="s3">\n  </span><span class="s1">let index = 0;</span><span class="s3">\n  </span><span class="s1">for (const msg of messages) {</span><span class="s3">\n    </span><span class="s1">let loopModel, noteModel, msgModel;</span><span class="s3">\n    </span><span class="s1">switch (msg.type) {</span><span class="s3">\n      </span><span class="s1">case diagObj.db.LINETYPE.NOTE:</span><span class="s3">\n        </span><span class="s1">bounds.resetVerticalPos();</span><span class="s3">\n        </span><span class="s1">noteModel = msg.noteModel;</span><span class="s3">\n        </span><span class="s1">await drawNote(diagram2, noteModel);</span><span class="s3">\n        </span><span class="s1">break;</span><span class="s3">\n      </span><span class="s1">case diagObj.db.LINETYPE.ACTIVE_START:</span><span class="s3">\n        </span><span class="s1">bounds.newActivation(msg, diagram2, actors);</span><span class="s3">\n        </span><span class="s1">break;</span><span class="s3">\n      </span><span class="s1">case diagObj.db.LINETYPE.ACTIVE_END:</span><span class="s3">\n        </span><span class="s1">activeEnd(msg, bounds.getVerticalPos());</span><span class="s3">\n        </span><span class="s1">break;</span><span class="s3">\n      </span><span class="s1">case diagObj.db.LINETYPE.LOOP_START:</span><span class="s3">\n        </span><span class="s1">adjustLoopHeightForWrap(</span><span class="s3">\n          </span><span class="s1">loopWidths,</span><span class="s3">\n          </span><span class="s1">msg,</span><span class="s3">\n          </span><span class="s1">conf.boxMargin,</span><span class="s3">\n          </span><span class="s1">conf.boxMargin + conf.boxTextMargin,</span><span class="s3">\n          </span><span class="s1">(message) =&gt; bounds.newLoop(message)</span><span class="s3">\n        </span><span class="s1">);</span><span class="s3">\n        </span><span class="s1">break;</span><span class="s3">\n      </span><span class="s1">case diagObj.db.LINETYPE.LOOP_END:</span><span class="s3">\n        </span><span class="s1">loopModel = bounds.endLoop();</span><span class="s3">\n        </span><span class="s1">await svgDraw_default.drawLoop(diagram2, loopModel, </span><span class="s3">\&quot;</span><span class="s1">loop</span><span class="s3">\&quot;</span><span class="s1">, conf);</span><span class="s3">\n        </span><span class="s1">bounds.bumpVerticalPos(loopModel.stopy - bounds.getVerticalPos());</span><span class="s3">\n        </span><span class="s1">bounds.models.addLoop(loopModel);</span><span class="s3">\n        </span><span class="s1">break;</span><span class="s3">\n      </span><span class="s1">case diagObj.db.LINETYPE.RECT_START:</span><span class="s3">\n        </span><span class="s1">adjustLoopHeightForWrap(</span><span class="s3">\n          </span><span class="s1">loopWidths,</span><span class="s3">\n          </span><span class="s1">msg,</span><span class="s3">\n          </span><span class="s1">conf.boxMargin,</span><span class="s3">\n          </span><span class="s1">conf.boxMargin,</span><span class="s3">\n          </span><span class="s1">(message) =&gt; bounds.newLoop(void 0, message.message)</span><span class="s3">\n        </span><span class="s1">);</span><span class="s3">\n        </span><span class="s1">break;</span><span class="s3">\n      </span><span class="s1">case diagObj.db.LINETYPE.RECT_END:</span><span class="s3">\n        </span><span class="s1">loopModel = bounds.endLoop();</span><span class="s3">\n        </span><span class="s1">backgrounds.push(loopModel);</span><span class="s3">\n        </span><span class="s1">bounds.models.addLoop(loopModel);</span><span class="s3">\n        </span><span class="s1">bounds.bumpVerticalPos(loopModel.stopy - bounds.getVerticalPos());</span><span class="s3">\n        </span><span class="s1">break;</span><span class="s3">\n      </span><span class="s1">case diagObj.db.LINETYPE.OPT_START:</span><span class="s3">\n        </span><span class="s1">adjustLoopHeightForWrap(</span><span class="s3">\n          </span><span class="s1">loopWidths,</span><span class="s3">\n          </span><span class="s1">msg,</span><span class="s3">\n          </span><span class="s1">conf.boxMargin,</span><span class="s3">\n          </span><span class="s1">conf.boxMargin + conf.boxTextMargin,</span><span class="s3">\n          </span><span class="s1">(message) =&gt; bounds.newLoop(message)</span><span class="s3">\n        </span><span class="s1">);</span><span class="s3">\n        </span><span class="s1">break;</span><span class="s3">\n      </span><span class="s1">case diagObj.db.LINETYPE.OPT_END:</span><span class="s3">\n        </span><span class="s1">loopModel = bounds.endLoop();</span><span class="s3">\n        </span><span class="s1">await svgDraw_default.drawLoop(diagram2, loopModel, </span><span class="s3">\&quot;</span><span class="s1">opt</span><span class="s3">\&quot;</span><span class="s1">, conf);</span><span class="s3">\n        </span><span class="s1">bounds.bumpVerticalPos(loopModel.stopy - bounds.getVerticalPos());</span><span class="s3">\n        </span><span class="s1">bounds.models.addLoop(loopModel);</span><span class="s3">\n        </span><span class="s1">break;</span><span class="s3">\n      </span><span class="s1">case diagObj.db.LINETYPE.ALT_START:</span><span class="s3">\n        </span><span class="s1">adjustLoopHeightForWrap(</span><span class="s3">\n          </span><span class="s1">loopWidths,</span><span class="s3">\n          </span><span class="s1">msg,</span><span class="s3">\n          </span><span class="s1">conf.boxMargin,</span><span class="s3">\n          </span><span class="s1">conf.boxMargin + conf.boxTextMargin,</span><span class="s3">\n          </span><span class="s1">(message) =&gt; bounds.newLoop(message)</span><span class="s3">\n        </span><span class="s1">);</span><span class="s3">\n        </span><span class="s1">break;</span><span class="s3">\n      </span><span class="s1">case diagObj.db.LINETYPE.ALT_ELSE:</span><span class="s3">\n        </span><span class="s1">adjustLoopHeightForWrap(</span><span class="s3">\n          </span><span class="s1">loopWidths,</span><span class="s3">\n          </span><span class="s1">msg,</span><span class="s3">\n          </span><span class="s1">conf.boxMargin + conf.boxTextMargin,</span><span class="s3">\n          </span><span class="s1">conf.boxMargin,</span><span class="s3">\n          </span><span class="s1">(message) =&gt; bounds.addSectionToLoop(message)</span><span class="s3">\n        </span><span class="s1">);</span><span class="s3">\n        </span><span class="s1">break;</span><span class="s3">\n      </span><span class="s1">case diagObj.db.LINETYPE.ALT_END:</span><span class="s3">\n        </span><span class="s1">loopModel = bounds.endLoop();</span><span class="s3">\n        </span><span class="s1">await svgDraw_default.drawLoop(diagram2, loopModel, </span><span class="s3">\&quot;</span><span class="s1">alt</span><span class="s3">\&quot;</span><span class="s1">, conf);</span><span class="s3">\n        </span><span class="s1">bounds.bumpVerticalPos(loopModel.stopy - bounds.getVerticalPos());</span><span class="s3">\n        </span><span class="s1">bounds.models.addLoop(loopModel);</span><span class="s3">\n        </span><span class="s1">break;</span><span class="s3">\n      </span><span class="s1">case diagObj.db.LINETYPE.PAR_START:</span><span class="s3">\n      </span><span class="s1">case diagObj.db.LINETYPE.PAR_OVER_START:</span><span class="s3">\n        </span><span class="s1">adjustLoopHeightForWrap(</span><span class="s3">\n          </span><span class="s1">loopWidths,</span><span class="s3">\n          </span><span class="s1">msg,</span><span class="s3">\n          </span><span class="s1">conf.boxMargin,</span><span class="s3">\n          </span><span class="s1">conf.boxMargin + conf.boxTextMargin,</span><span class="s3">\n          </span><span class="s1">(message) =&gt; bounds.newLoop(message)</span><span class="s3">\n        </span><span class="s1">);</span><span class="s3">\n        </span><span class="s1">bounds.saveVerticalPos();</span><span class="s3">\n        </span><span class="s1">break;</span><span class="s3">\n      </span><span class="s1">case diagObj.db.LINETYPE.PAR_AND:</span><span class="s3">\n        </span><span class="s1">adjustLoopHeightForWrap(</span><span class="s3">\n          </span><span class="s1">loopWidths,</span><span class="s3">\n          </span><span class="s1">msg,</span><span class="s3">\n          </span><span class="s1">conf.boxMargin + conf.boxTextMargin,</span><span class="s3">\n          </span><span class="s1">conf.boxMargin,</span><span class="s3">\n          </span><span class="s1">(message) =&gt; bounds.addSectionToLoop(message)</span><span class="s3">\n        </span><span class="s1">);</span><span class="s3">\n        </span><span class="s1">break;</span><span class="s3">\n      </span><span class="s1">case diagObj.db.LINETYPE.PAR_END:</span><span class="s3">\n        </span><span class="s1">loopModel = bounds.endLoop();</span><span class="s3">\n        </span><span class="s1">await svgDraw_default.drawLoop(diagram2, loopModel, </span><span class="s3">\&quot;</span><span class="s1">par</span><span class="s3">\&quot;</span><span class="s1">, conf);</span><span class="s3">\n        </span><span class="s1">bounds.bumpVerticalPos(loopModel.stopy - bounds.getVerticalPos());</span><span class="s3">\n        </span><span class="s1">bounds.models.addLoop(loopModel);</span><span class="s3">\n        </span><span class="s1">break;</span><span class="s3">\n      </span><span class="s1">case diagObj.db.LINETYPE.AUTONUMBER:</span><span class="s3">\n        </span><span class="s1">sequenceIndex = msg.message.start || sequenceIndex;</span><span class="s3">\n        </span><span class="s1">sequenceIndexStep = msg.message.step || sequenceIndexStep;</span><span class="s3">\n        </span><span class="s1">if (msg.message.visible) {</span><span class="s3">\n          </span><span class="s1">diagObj.db.enableSequenceNumbers();</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">diagObj.db.disableSequenceNumbers();</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">break;</span><span class="s3">\n      </span><span class="s1">case diagObj.db.LINETYPE.CRITICAL_START:</span><span class="s3">\n        </span><span class="s1">adjustLoopHeightForWrap(</span><span class="s3">\n          </span><span class="s1">loopWidths,</span><span class="s3">\n          </span><span class="s1">msg,</span><span class="s3">\n          </span><span class="s1">conf.boxMargin,</span><span class="s3">\n          </span><span class="s1">conf.boxMargin + conf.boxTextMargin,</span><span class="s3">\n          </span><span class="s1">(message) =&gt; bounds.newLoop(message)</span><span class="s3">\n        </span><span class="s1">);</span><span class="s3">\n        </span><span class="s1">break;</span><span class="s3">\n      </span><span class="s1">case diagObj.db.LINETYPE.CRITICAL_OPTION:</span><span class="s3">\n        </span><span class="s1">adjustLoopHeightForWrap(</span><span class="s3">\n          </span><span class="s1">loopWidths,</span><span class="s3">\n          </span><span class="s1">msg,</span><span class="s3">\n          </span><span class="s1">conf.boxMargin + conf.boxTextMargin,</span><span class="s3">\n          </span><span class="s1">conf.boxMargin,</span><span class="s3">\n          </span><span class="s1">(message) =&gt; bounds.addSectionToLoop(message)</span><span class="s3">\n        </span><span class="s1">);</span><span class="s3">\n        </span><span class="s1">break;</span><span class="s3">\n      </span><span class="s1">case diagObj.db.LINETYPE.CRITICAL_END:</span><span class="s3">\n        </span><span class="s1">loopModel = bounds.endLoop();</span><span class="s3">\n        </span><span class="s1">await svgDraw_default.drawLoop(diagram2, loopModel, </span><span class="s3">\&quot;</span><span class="s1">critical</span><span class="s3">\&quot;</span><span class="s1">, conf);</span><span class="s3">\n        </span><span class="s1">bounds.bumpVerticalPos(loopModel.stopy - bounds.getVerticalPos());</span><span class="s3">\n        </span><span class="s1">bounds.models.addLoop(loopModel);</span><span class="s3">\n        </span><span class="s1">break;</span><span class="s3">\n      </span><span class="s1">case diagObj.db.LINETYPE.BREAK_START:</span><span class="s3">\n        </span><span class="s1">adjustLoopHeightForWrap(</span><span class="s3">\n          </span><span class="s1">loopWidths,</span><span class="s3">\n          </span><span class="s1">msg,</span><span class="s3">\n          </span><span class="s1">conf.boxMargin,</span><span class="s3">\n          </span><span class="s1">conf.boxMargin + conf.boxTextMargin,</span><span class="s3">\n          </span><span class="s1">(message) =&gt; bounds.newLoop(message)</span><span class="s3">\n        </span><span class="s1">);</span><span class="s3">\n        </span><span class="s1">break;</span><span class="s3">\n      </span><span class="s1">case diagObj.db.LINETYPE.BREAK_END:</span><span class="s3">\n        </span><span class="s1">loopModel = bounds.endLoop();</span><span class="s3">\n        </span><span class="s1">await svgDraw_default.drawLoop(diagram2, loopModel, </span><span class="s3">\&quot;</span><span class="s1">break</span><span class="s3">\&quot;</span><span class="s1">, conf);</span><span class="s3">\n        </span><span class="s1">bounds.bumpVerticalPos(loopModel.stopy - bounds.getVerticalPos());</span><span class="s3">\n        </span><span class="s1">bounds.models.addLoop(loopModel);</span><span class="s3">\n        </span><span class="s1">break;</span><span class="s3">\n      </span><span class="s1">default:</span><span class="s3">\n        </span><span class="s1">try {</span><span class="s3">\n          </span><span class="s1">msgModel = msg.msgModel;</span><span class="s3">\n          </span><span class="s1">msgModel.starty = bounds.getVerticalPos();</span><span class="s3">\n          </span><span class="s1">msgModel.sequenceIndex = sequenceIndex;</span><span class="s3">\n          </span><span class="s1">msgModel.sequenceVisible = diagObj.db.showSequenceNumbers();</span><span class="s3">\n          </span><span class="s1">const lineStartY = await boundMessage(diagram2, msgModel);</span><span class="s3">\n          </span><span class="s1">adjustCreatedDestroyedData(</span><span class="s3">\n            </span><span class="s1">msg,</span><span class="s3">\n            </span><span class="s1">msgModel,</span><span class="s3">\n            </span><span class="s1">lineStartY,</span><span class="s3">\n            </span><span class="s1">index,</span><span class="s3">\n            </span><span class="s1">actors,</span><span class="s3">\n            </span><span class="s1">createdActors,</span><span class="s3">\n            </span><span class="s1">destroyedActors</span><span class="s3">\n          </span><span class="s1">);</span><span class="s3">\n          </span><span class="s1">messagesToDraw.push({ messageModel: msgModel, lineStartY });</span><span class="s3">\n          </span><span class="s1">bounds.models.addMessage(msgModel);</span><span class="s3">\n        </span><span class="s1">} catch (e) {</span><span class="s3">\n          </span><span class="s1">log.error(</span><span class="s3">\&quot;</span><span class="s1">error while drawing message</span><span class="s3">\&quot;</span><span class="s1">, e);</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">if ([</span><span class="s3">\n      </span><span class="s1">diagObj.db.LINETYPE.SOLID_OPEN,</span><span class="s3">\n      </span><span class="s1">diagObj.db.LINETYPE.DOTTED_OPEN,</span><span class="s3">\n      </span><span class="s1">diagObj.db.LINETYPE.SOLID,</span><span class="s3">\n      </span><span class="s1">diagObj.db.LINETYPE.DOTTED,</span><span class="s3">\n      </span><span class="s1">diagObj.db.LINETYPE.SOLID_CROSS,</span><span class="s3">\n      </span><span class="s1">diagObj.db.LINETYPE.DOTTED_CROSS,</span><span class="s3">\n      </span><span class="s1">diagObj.db.LINETYPE.SOLID_POINT,</span><span class="s3">\n      </span><span class="s1">diagObj.db.LINETYPE.DOTTED_POINT,</span><span class="s3">\n      </span><span class="s1">diagObj.db.LINETYPE.BIDIRECTIONAL_SOLID,</span><span class="s3">\n      </span><span class="s1">diagObj.db.LINETYPE.BIDIRECTIONAL_DOTTED</span><span class="s3">\n    </span><span class="s1">].includes(msg.type)) {</span><span class="s3">\n      </span><span class="s1">sequenceIndex = sequenceIndex + sequenceIndexStep;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">index++;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">log.debug(</span><span class="s3">\&quot;</span><span class="s1">createdActors</span><span class="s3">\&quot;</span><span class="s1">, createdActors);</span><span class="s3">\n  </span><span class="s1">log.debug(</span><span class="s3">\&quot;</span><span class="s1">destroyedActors</span><span class="s3">\&quot;</span><span class="s1">, destroyedActors);</span><span class="s3">\n  </span><span class="s1">await drawActors(diagram2, actors, actorKeys, false);</span><span class="s3">\n  </span><span class="s1">for (const e of messagesToDraw) {</span><span class="s3">\n    </span><span class="s1">await drawMessage(diagram2, e.messageModel, e.lineStartY, diagObj);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (conf.mirrorActors) {</span><span class="s3">\n    </span><span class="s1">await drawActors(diagram2, actors, actorKeys, true);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">backgrounds.forEach((e) =&gt; svgDraw_default.drawBackgroundRect(diagram2, e));</span><span class="s3">\n  </span><span class="s1">fixLifeLineHeights(diagram2, actors, actorKeys, conf);</span><span class="s3">\n  </span><span class="s1">for (const box2 of bounds.models.boxes) {</span><span class="s3">\n    </span><span class="s1">box2.height = bounds.getVerticalPos() - box2.y;</span><span class="s3">\n    </span><span class="s1">bounds.insert(box2.x, box2.y, box2.x + box2.width, box2.height);</span><span class="s3">\n    </span><span class="s1">box2.startx = box2.x;</span><span class="s3">\n    </span><span class="s1">box2.starty = box2.y;</span><span class="s3">\n    </span><span class="s1">box2.stopx = box2.startx + box2.width;</span><span class="s3">\n    </span><span class="s1">box2.stopy = box2.starty + box2.height;</span><span class="s3">\n    </span><span class="s1">box2.stroke = </span><span class="s3">\&quot;</span><span class="s1">rgb(0,0,0, 0.5)</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n    </span><span class="s1">svgDraw_default.drawBox(diagram2, box2, conf);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (hasBoxes) {</span><span class="s3">\n    </span><span class="s1">bounds.bumpVerticalPos(conf.boxMargin);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">const requiredBoxSize = drawActorsPopup(diagram2, actors, actorKeys, doc);</span><span class="s3">\n  </span><span class="s1">const { bounds: box } = bounds.getBounds();</span><span class="s3">\n  </span><span class="s1">if (box.startx === void 0) {</span><span class="s3">\n    </span><span class="s1">box.startx = 0;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (box.starty === void 0) {</span><span class="s3">\n    </span><span class="s1">box.starty = 0;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (box.stopx === void 0) {</span><span class="s3">\n    </span><span class="s1">box.stopx = 0;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (box.stopy === void 0) {</span><span class="s3">\n    </span><span class="s1">box.stopy = 0;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">let boxHeight = box.stopy - box.starty;</span><span class="s3">\n  </span><span class="s1">if (boxHeight &lt; requiredBoxSize.maxHeight) {</span><span class="s3">\n    </span><span class="s1">boxHeight = requiredBoxSize.maxHeight;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">let height = boxHeight + 2 * conf.diagramMarginY;</span><span class="s3">\n  </span><span class="s1">if (conf.mirrorActors) {</span><span class="s3">\n    </span><span class="s1">height = height - conf.boxMargin + conf.bottomMarginAdj;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">let boxWidth = box.stopx - box.startx;</span><span class="s3">\n  </span><span class="s1">if (boxWidth &lt; requiredBoxSize.maxWidth) {</span><span class="s3">\n    </span><span class="s1">boxWidth = requiredBoxSize.maxWidth;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">const width = boxWidth + 2 * conf.diagramMarginX;</span><span class="s3">\n  </span><span class="s1">if (title) {</span><span class="s3">\n    </span><span class="s1">diagram2.append(</span><span class="s3">\&quot;</span><span class="s1">text</span><span class="s3">\&quot;</span><span class="s1">).text(title).attr(</span><span class="s3">\&quot;</span><span class="s1">x</span><span class="s3">\&quot;</span><span class="s1">, (box.stopx - box.startx) / 2 - 2 * conf.diagramMarginX).attr(</span><span class="s3">\&quot;</span><span class="s1">y</span><span class="s3">\&quot;</span><span class="s1">, -25);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">configureSvgSize(diagram2, height, width, conf.useMaxWidth);</span><span class="s3">\n  </span><span class="s1">const extraVertForTitle = title ? 40 : 0;</span><span class="s3">\n  </span><span class="s1">diagram2.attr(</span><span class="s3">\n    \&quot;</span><span class="s1">viewBox</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n    </span><span class="s1">box.startx - conf.diagramMarginX + </span><span class="s3">\&quot; </span><span class="s1">-</span><span class="s3">\&quot; </span><span class="s1">+ (conf.diagramMarginY + extraVertForTitle) + </span><span class="s3">\&quot; \&quot; </span><span class="s1">+ width + </span><span class="s3">\&quot; \&quot; </span><span class="s1">+ (height + extraVertForTitle)</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">log.debug(`models:`, bounds.models);</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">draw</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">async function getMaxMessageWidthPerActor(actors, messages, diagObj) {</span><span class="s3">\n  </span><span class="s1">const maxMessageWidthPerActor = {};</span><span class="s3">\n  </span><span class="s1">for (const msg of messages) {</span><span class="s3">\n    </span><span class="s1">if (actors.get(msg.to) &amp;&amp; actors.get(msg.from)) {</span><span class="s3">\n      </span><span class="s1">const actor = actors.get(msg.to);</span><span class="s3">\n      </span><span class="s1">if (msg.placement === diagObj.db.PLACEMENT.LEFTOF &amp;&amp; !actor.prevActor) {</span><span class="s3">\n        </span><span class="s1">continue;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">if (msg.placement === diagObj.db.PLACEMENT.RIGHTOF &amp;&amp; !actor.nextActor) {</span><span class="s3">\n        </span><span class="s1">continue;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">const isNote = msg.placement !== void 0;</span><span class="s3">\n      </span><span class="s1">const isMessage = !isNote;</span><span class="s3">\n      </span><span class="s1">const textFont = isNote ? noteFont(conf) : messageFont(conf);</span><span class="s3">\n      </span><span class="s1">const wrappedMessage = msg.wrap ? utils_default.wrapLabel(msg.message, conf.width - 2 * conf.wrapPadding, textFont) : msg.message;</span><span class="s3">\n      </span><span class="s1">const messageDimensions = hasKatex(wrappedMessage) ? await calculateMathMLDimensions(msg.message, getConfig2()) : utils_default.calculateTextDimensions(wrappedMessage, textFont);</span><span class="s3">\n      </span><span class="s1">const messageWidth = messageDimensions.width + 2 * conf.wrapPadding;</span><span class="s3">\n      </span><span class="s1">if (isMessage &amp;&amp; msg.from === actor.nextActor) {</span><span class="s3">\n        </span><span class="s1">maxMessageWidthPerActor[msg.to] = common_default.getMax(</span><span class="s3">\n          </span><span class="s1">maxMessageWidthPerActor[msg.to] || 0,</span><span class="s3">\n          </span><span class="s1">messageWidth</span><span class="s3">\n        </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">} else if (isMessage &amp;&amp; msg.from === actor.prevActor) {</span><span class="s3">\n        </span><span class="s1">maxMessageWidthPerActor[msg.from] = common_default.getMax(</span><span class="s3">\n          </span><span class="s1">maxMessageWidthPerActor[msg.from] || 0,</span><span class="s3">\n          </span><span class="s1">messageWidth</span><span class="s3">\n        </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">} else if (isMessage &amp;&amp; msg.from === msg.to) {</span><span class="s3">\n        </span><span class="s1">maxMessageWidthPerActor[msg.from] = common_default.getMax(</span><span class="s3">\n          </span><span class="s1">maxMessageWidthPerActor[msg.from] || 0,</span><span class="s3">\n          </span><span class="s1">messageWidth / 2</span><span class="s3">\n        </span><span class="s1">);</span><span class="s3">\n        </span><span class="s1">maxMessageWidthPerActor[msg.to] = common_default.getMax(</span><span class="s3">\n          </span><span class="s1">maxMessageWidthPerActor[msg.to] || 0,</span><span class="s3">\n          </span><span class="s1">messageWidth / 2</span><span class="s3">\n        </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">} else if (msg.placement === diagObj.db.PLACEMENT.RIGHTOF) {</span><span class="s3">\n        </span><span class="s1">maxMessageWidthPerActor[msg.from] = common_default.getMax(</span><span class="s3">\n          </span><span class="s1">maxMessageWidthPerActor[msg.from] || 0,</span><span class="s3">\n          </span><span class="s1">messageWidth</span><span class="s3">\n        </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">} else if (msg.placement === diagObj.db.PLACEMENT.LEFTOF) {</span><span class="s3">\n        </span><span class="s1">maxMessageWidthPerActor[actor.prevActor] = common_default.getMax(</span><span class="s3">\n          </span><span class="s1">maxMessageWidthPerActor[actor.prevActor] || 0,</span><span class="s3">\n          </span><span class="s1">messageWidth</span><span class="s3">\n        </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">} else if (msg.placement === diagObj.db.PLACEMENT.OVER) {</span><span class="s3">\n        </span><span class="s1">if (actor.prevActor) {</span><span class="s3">\n          </span><span class="s1">maxMessageWidthPerActor[actor.prevActor] = common_default.getMax(</span><span class="s3">\n            </span><span class="s1">maxMessageWidthPerActor[actor.prevActor] || 0,</span><span class="s3">\n            </span><span class="s1">messageWidth / 2</span><span class="s3">\n          </span><span class="s1">);</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">if (actor.nextActor) {</span><span class="s3">\n          </span><span class="s1">maxMessageWidthPerActor[msg.from] = common_default.getMax(</span><span class="s3">\n            </span><span class="s1">maxMessageWidthPerActor[msg.from] || 0,</span><span class="s3">\n            </span><span class="s1">messageWidth / 2</span><span class="s3">\n          </span><span class="s1">);</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">log.debug(</span><span class="s3">\&quot;</span><span class="s1">maxMessageWidthPerActor:</span><span class="s3">\&quot;</span><span class="s1">, maxMessageWidthPerActor);</span><span class="s3">\n  </span><span class="s1">return maxMessageWidthPerActor;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">__name(getMaxMessageWidthPerActor, </span><span class="s3">\&quot;</span><span class="s1">getMaxMessageWidthPerActor</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var getRequiredPopupWidth = /* @__PURE__ */ __name(function(actor) {</span><span class="s3">\n  </span><span class="s1">let requiredPopupWidth = 0;</span><span class="s3">\n  </span><span class="s1">const textFont = actorFont(conf);</span><span class="s3">\n  </span><span class="s1">for (const key in actor.links) {</span><span class="s3">\n    </span><span class="s1">const labelDimensions = utils_default.calculateTextDimensions(key, textFont);</span><span class="s3">\n    </span><span class="s1">const labelWidth = labelDimensions.width + 2 * conf.wrapPadding + 2 * conf.boxMargin;</span><span class="s3">\n    </span><span class="s1">if (requiredPopupWidth &lt; labelWidth) {</span><span class="s3">\n      </span><span class="s1">requiredPopupWidth = labelWidth;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return requiredPopupWidth;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">getRequiredPopupWidth</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">async function calculateActorMargins(actors, actorToMessageWidth, boxes) {</span><span class="s3">\n  </span><span class="s1">let maxHeight = 0;</span><span class="s3">\n  </span><span class="s1">for (const prop of actors.keys()) {</span><span class="s3">\n    </span><span class="s1">const actor = actors.get(prop);</span><span class="s3">\n    </span><span class="s1">if (actor.wrap) {</span><span class="s3">\n      </span><span class="s1">actor.description = utils_default.wrapLabel(</span><span class="s3">\n        </span><span class="s1">actor.description,</span><span class="s3">\n        </span><span class="s1">conf.width - 2 * conf.wrapPadding,</span><span class="s3">\n        </span><span class="s1">actorFont(conf)</span><span class="s3">\n      </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">const actDims = hasKatex(actor.description) ? await calculateMathMLDimensions(actor.description, getConfig2()) : utils_default.calculateTextDimensions(actor.description, actorFont(conf));</span><span class="s3">\n    </span><span class="s1">actor.width = actor.wrap ? conf.width : common_default.getMax(conf.width, actDims.width + 2 * conf.wrapPadding);</span><span class="s3">\n    </span><span class="s1">actor.height = actor.wrap ? common_default.getMax(actDims.height, conf.height) : conf.height;</span><span class="s3">\n    </span><span class="s1">maxHeight = common_default.getMax(maxHeight, actor.height);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">for (const actorKey in actorToMessageWidth) {</span><span class="s3">\n    </span><span class="s1">const actor = actors.get(actorKey);</span><span class="s3">\n    </span><span class="s1">if (!actor) {</span><span class="s3">\n      </span><span class="s1">continue;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">const nextActor = actors.get(actor.nextActor);</span><span class="s3">\n    </span><span class="s1">if (!nextActor) {</span><span class="s3">\n      </span><span class="s1">const messageWidth2 = actorToMessageWidth[actorKey];</span><span class="s3">\n      </span><span class="s1">const actorWidth2 = messageWidth2 + conf.actorMargin - actor.width / 2;</span><span class="s3">\n      </span><span class="s1">actor.margin = common_default.getMax(actorWidth2, conf.actorMargin);</span><span class="s3">\n      </span><span class="s1">continue;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">const messageWidth = actorToMessageWidth[actorKey];</span><span class="s3">\n    </span><span class="s1">const actorWidth = messageWidth + conf.actorMargin - actor.width / 2 - nextActor.width / 2;</span><span class="s3">\n    </span><span class="s1">actor.margin = common_default.getMax(actorWidth, conf.actorMargin);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">let maxBoxHeight = 0;</span><span class="s3">\n  </span><span class="s1">boxes.forEach((box) =&gt; {</span><span class="s3">\n    </span><span class="s1">const textFont = messageFont(conf);</span><span class="s3">\n    </span><span class="s1">let totalWidth = box.actorKeys.reduce((total, aKey) =&gt; {</span><span class="s3">\n      </span><span class="s1">return total += actors.get(aKey).width + (actors.get(aKey).margin || 0);</span><span class="s3">\n    </span><span class="s1">}, 0);</span><span class="s3">\n    </span><span class="s1">totalWidth -= 2 * conf.boxTextMargin;</span><span class="s3">\n    </span><span class="s1">if (box.wrap) {</span><span class="s3">\n      </span><span class="s1">box.name = utils_default.wrapLabel(box.name, totalWidth - 2 * conf.wrapPadding, textFont);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">const boxMsgDimensions = utils_default.calculateTextDimensions(box.name, textFont);</span><span class="s3">\n    </span><span class="s1">maxBoxHeight = common_default.getMax(boxMsgDimensions.height, maxBoxHeight);</span><span class="s3">\n    </span><span class="s1">const minWidth = common_default.getMax(totalWidth, boxMsgDimensions.width + 2 * conf.wrapPadding);</span><span class="s3">\n    </span><span class="s1">box.margin = conf.boxTextMargin;</span><span class="s3">\n    </span><span class="s1">if (totalWidth &lt; minWidth) {</span><span class="s3">\n      </span><span class="s1">const missing = (minWidth - totalWidth) / 2;</span><span class="s3">\n      </span><span class="s1">box.margin += missing;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">});</span><span class="s3">\n  </span><span class="s1">boxes.forEach((box) =&gt; box.textMaxHeight = maxBoxHeight);</span><span class="s3">\n  </span><span class="s1">return common_default.getMax(maxHeight, conf.height);</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">__name(calculateActorMargins, </span><span class="s3">\&quot;</span><span class="s1">calculateActorMargins</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var buildNoteModel = /* @__PURE__ */ __name(async function(msg, actors, diagObj) {</span><span class="s3">\n  </span><span class="s1">const fromActor = actors.get(msg.from);</span><span class="s3">\n  </span><span class="s1">const toActor = actors.get(msg.to);</span><span class="s3">\n  </span><span class="s1">const startx = fromActor.x;</span><span class="s3">\n  </span><span class="s1">const stopx = toActor.x;</span><span class="s3">\n  </span><span class="s1">const shouldWrap = msg.wrap &amp;&amp; msg.message;</span><span class="s3">\n  </span><span class="s1">let textDimensions = hasKatex(msg.message) ? await calculateMathMLDimensions(msg.message, getConfig2()) : utils_default.calculateTextDimensions(</span><span class="s3">\n    </span><span class="s1">shouldWrap ? utils_default.wrapLabel(msg.message, conf.width, noteFont(conf)) : msg.message,</span><span class="s3">\n    </span><span class="s1">noteFont(conf)</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const noteModel = {</span><span class="s3">\n    </span><span class="s1">width: shouldWrap ? conf.width : common_default.getMax(conf.width, textDimensions.width + 2 * conf.noteMargin),</span><span class="s3">\n    </span><span class="s1">height: 0,</span><span class="s3">\n    </span><span class="s1">startx: fromActor.x,</span><span class="s3">\n    </span><span class="s1">stopx: 0,</span><span class="s3">\n    </span><span class="s1">starty: 0,</span><span class="s3">\n    </span><span class="s1">stopy: 0,</span><span class="s3">\n    </span><span class="s1">message: msg.message</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">if (msg.placement === diagObj.db.PLACEMENT.RIGHTOF) {</span><span class="s3">\n    </span><span class="s1">noteModel.width = shouldWrap ? common_default.getMax(conf.width, textDimensions.width) : common_default.getMax(</span><span class="s3">\n      </span><span class="s1">fromActor.width / 2 + toActor.width / 2,</span><span class="s3">\n      </span><span class="s1">textDimensions.width + 2 * conf.noteMargin</span><span class="s3">\n    </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">noteModel.startx = startx + (fromActor.width + conf.actorMargin) / 2;</span><span class="s3">\n  </span><span class="s1">} else if (msg.placement === diagObj.db.PLACEMENT.LEFTOF) {</span><span class="s3">\n    </span><span class="s1">noteModel.width = shouldWrap ? common_default.getMax(conf.width, textDimensions.width + 2 * conf.noteMargin) : common_default.getMax(</span><span class="s3">\n      </span><span class="s1">fromActor.width / 2 + toActor.width / 2,</span><span class="s3">\n      </span><span class="s1">textDimensions.width + 2 * conf.noteMargin</span><span class="s3">\n    </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">noteModel.startx = startx - noteModel.width + (fromActor.width - conf.actorMargin) / 2;</span><span class="s3">\n  </span><span class="s1">} else if (msg.to === msg.from) {</span><span class="s3">\n    </span><span class="s1">textDimensions = utils_default.calculateTextDimensions(</span><span class="s3">\n      </span><span class="s1">shouldWrap ? utils_default.wrapLabel(msg.message, common_default.getMax(conf.width, fromActor.width), noteFont(conf)) : msg.message,</span><span class="s3">\n      </span><span class="s1">noteFont(conf)</span><span class="s3">\n    </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">noteModel.width = shouldWrap ? common_default.getMax(conf.width, fromActor.width) : common_default.getMax(fromActor.width, conf.width, textDimensions.width + 2 * conf.noteMargin);</span><span class="s3">\n    </span><span class="s1">noteModel.startx = startx + (fromActor.width - noteModel.width) / 2;</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">noteModel.width = Math.abs(startx + fromActor.width / 2 - (stopx + toActor.width / 2)) + conf.actorMargin;</span><span class="s3">\n    </span><span class="s1">noteModel.startx = startx &lt; stopx ? startx + fromActor.width / 2 - conf.actorMargin / 2 : stopx + toActor.width / 2 - conf.actorMargin / 2;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (shouldWrap) {</span><span class="s3">\n    </span><span class="s1">noteModel.message = utils_default.wrapLabel(</span><span class="s3">\n      </span><span class="s1">msg.message,</span><span class="s3">\n      </span><span class="s1">noteModel.width - 2 * conf.wrapPadding,</span><span class="s3">\n      </span><span class="s1">noteFont(conf)</span><span class="s3">\n    </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">log.debug(</span><span class="s3">\n    </span><span class="s1">`NM:[${noteModel.startx},${noteModel.stopx},${noteModel.starty},${noteModel.stopy}:${noteModel.width},${noteModel.height}=${msg.message}]`</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">return noteModel;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">buildNoteModel</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var buildMessageModel = /* @__PURE__ */ __name(function(msg, actors, diagObj) {</span><span class="s3">\n  </span><span class="s1">if (![</span><span class="s3">\n    </span><span class="s1">diagObj.db.LINETYPE.SOLID_OPEN,</span><span class="s3">\n    </span><span class="s1">diagObj.db.LINETYPE.DOTTED_OPEN,</span><span class="s3">\n    </span><span class="s1">diagObj.db.LINETYPE.SOLID,</span><span class="s3">\n    </span><span class="s1">diagObj.db.LINETYPE.DOTTED,</span><span class="s3">\n    </span><span class="s1">diagObj.db.LINETYPE.SOLID_CROSS,</span><span class="s3">\n    </span><span class="s1">diagObj.db.LINETYPE.DOTTED_CROSS,</span><span class="s3">\n    </span><span class="s1">diagObj.db.LINETYPE.SOLID_POINT,</span><span class="s3">\n    </span><span class="s1">diagObj.db.LINETYPE.DOTTED_POINT,</span><span class="s3">\n    </span><span class="s1">diagObj.db.LINETYPE.BIDIRECTIONAL_SOLID,</span><span class="s3">\n    </span><span class="s1">diagObj.db.LINETYPE.BIDIRECTIONAL_DOTTED</span><span class="s3">\n  </span><span class="s1">].includes(msg.type)) {</span><span class="s3">\n    </span><span class="s1">return {};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">const [fromLeft, fromRight] = activationBounds(msg.from, actors);</span><span class="s3">\n  </span><span class="s1">const [toLeft, toRight] = activationBounds(msg.to, actors);</span><span class="s3">\n  </span><span class="s1">const isArrowToRight = fromLeft &lt;= toLeft;</span><span class="s3">\n  </span><span class="s1">let startx = isArrowToRight ? fromRight : fromLeft;</span><span class="s3">\n  </span><span class="s1">let stopx = isArrowToRight ? toLeft : toRight;</span><span class="s3">\n  </span><span class="s1">const isArrowToActivation = Math.abs(toLeft - toRight) &gt; 2;</span><span class="s3">\n  </span><span class="s1">const adjustValue = /* @__PURE__ */ __name((value) =&gt; {</span><span class="s3">\n    </span><span class="s1">return isArrowToRight ? -value : value;</span><span class="s3">\n  </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">adjustValue</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">if (msg.from === msg.to) {</span><span class="s3">\n    </span><span class="s1">stopx = startx;</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">if (msg.activate &amp;&amp; !isArrowToActivation) {</span><span class="s3">\n      </span><span class="s1">stopx += adjustValue(conf.activationWidth / 2 - 1);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">if (![diagObj.db.LINETYPE.SOLID_OPEN, diagObj.db.LINETYPE.DOTTED_OPEN].includes(msg.type)) {</span><span class="s3">\n      </span><span class="s1">stopx += adjustValue(3);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">if ([diagObj.db.LINETYPE.BIDIRECTIONAL_SOLID, diagObj.db.LINETYPE.BIDIRECTIONAL_DOTTED].includes(</span><span class="s3">\n      </span><span class="s1">msg.type</span><span class="s3">\n    </span><span class="s1">)) {</span><span class="s3">\n      </span><span class="s1">startx -= adjustValue(3);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">const allBounds = [fromLeft, fromRight, toLeft, toRight];</span><span class="s3">\n  </span><span class="s1">const boundedWidth = Math.abs(startx - stopx);</span><span class="s3">\n  </span><span class="s1">if (msg.wrap &amp;&amp; msg.message) {</span><span class="s3">\n    </span><span class="s1">msg.message = utils_default.wrapLabel(</span><span class="s3">\n      </span><span class="s1">msg.message,</span><span class="s3">\n      </span><span class="s1">common_default.getMax(boundedWidth + 2 * conf.wrapPadding, conf.width),</span><span class="s3">\n      </span><span class="s1">messageFont(conf)</span><span class="s3">\n    </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">const msgDims = utils_default.calculateTextDimensions(msg.message, messageFont(conf));</span><span class="s3">\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">width: common_default.getMax(</span><span class="s3">\n      </span><span class="s1">msg.wrap ? 0 : msgDims.width + 2 * conf.wrapPadding,</span><span class="s3">\n      </span><span class="s1">boundedWidth + 2 * conf.wrapPadding,</span><span class="s3">\n      </span><span class="s1">conf.width</span><span class="s3">\n    </span><span class="s1">),</span><span class="s3">\n    </span><span class="s1">height: 0,</span><span class="s3">\n    </span><span class="s1">startx,</span><span class="s3">\n    </span><span class="s1">stopx,</span><span class="s3">\n    </span><span class="s1">starty: 0,</span><span class="s3">\n    </span><span class="s1">stopy: 0,</span><span class="s3">\n    </span><span class="s1">message: msg.message,</span><span class="s3">\n    </span><span class="s1">type: msg.type,</span><span class="s3">\n    </span><span class="s1">wrap: msg.wrap,</span><span class="s3">\n    </span><span class="s1">fromBounds: Math.min.apply(null, allBounds),</span><span class="s3">\n    </span><span class="s1">toBounds: Math.max.apply(null, allBounds)</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">buildMessageModel</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var calculateLoopBounds = /* @__PURE__ */ __name(async function(messages, actors, _maxWidthPerActor, diagObj) {</span><span class="s3">\n  </span><span class="s1">const loops = {};</span><span class="s3">\n  </span><span class="s1">const stack = [];</span><span class="s3">\n  </span><span class="s1">let current, noteModel, msgModel;</span><span class="s3">\n  </span><span class="s1">for (const msg of messages) {</span><span class="s3">\n    </span><span class="s1">switch (msg.type) {</span><span class="s3">\n      </span><span class="s1">case diagObj.db.LINETYPE.LOOP_START:</span><span class="s3">\n      </span><span class="s1">case diagObj.db.LINETYPE.ALT_START:</span><span class="s3">\n      </span><span class="s1">case diagObj.db.LINETYPE.OPT_START:</span><span class="s3">\n      </span><span class="s1">case diagObj.db.LINETYPE.PAR_START:</span><span class="s3">\n      </span><span class="s1">case diagObj.db.LINETYPE.PAR_OVER_START:</span><span class="s3">\n      </span><span class="s1">case diagObj.db.LINETYPE.CRITICAL_START:</span><span class="s3">\n      </span><span class="s1">case diagObj.db.LINETYPE.BREAK_START:</span><span class="s3">\n        </span><span class="s1">stack.push({</span><span class="s3">\n          </span><span class="s1">id: msg.id,</span><span class="s3">\n          </span><span class="s1">msg: msg.message,</span><span class="s3">\n          </span><span class="s1">from: Number.MAX_SAFE_INTEGER,</span><span class="s3">\n          </span><span class="s1">to: Number.MIN_SAFE_INTEGER,</span><span class="s3">\n          </span><span class="s1">width: 0</span><span class="s3">\n        </span><span class="s1">});</span><span class="s3">\n        </span><span class="s1">break;</span><span class="s3">\n      </span><span class="s1">case diagObj.db.LINETYPE.ALT_ELSE:</span><span class="s3">\n      </span><span class="s1">case diagObj.db.LINETYPE.PAR_AND:</span><span class="s3">\n      </span><span class="s1">case diagObj.db.LINETYPE.CRITICAL_OPTION:</span><span class="s3">\n        </span><span class="s1">if (msg.message) {</span><span class="s3">\n          </span><span class="s1">current = stack.pop();</span><span class="s3">\n          </span><span class="s1">loops[current.id] = current;</span><span class="s3">\n          </span><span class="s1">loops[msg.id] = current;</span><span class="s3">\n          </span><span class="s1">stack.push(current);</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">break;</span><span class="s3">\n      </span><span class="s1">case diagObj.db.LINETYPE.LOOP_END:</span><span class="s3">\n      </span><span class="s1">case diagObj.db.LINETYPE.ALT_END:</span><span class="s3">\n      </span><span class="s1">case diagObj.db.LINETYPE.OPT_END:</span><span class="s3">\n      </span><span class="s1">case diagObj.db.LINETYPE.PAR_END:</span><span class="s3">\n      </span><span class="s1">case diagObj.db.LINETYPE.CRITICAL_END:</span><span class="s3">\n      </span><span class="s1">case diagObj.db.LINETYPE.BREAK_END:</span><span class="s3">\n        </span><span class="s1">current = stack.pop();</span><span class="s3">\n        </span><span class="s1">loops[current.id] = current;</span><span class="s3">\n        </span><span class="s1">break;</span><span class="s3">\n      </span><span class="s1">case diagObj.db.LINETYPE.ACTIVE_START:</span><span class="s3">\n        </span><span class="s1">{</span><span class="s3">\n          </span><span class="s1">const actorRect = actors.get(msg.from ? msg.from : msg.to.actor);</span><span class="s3">\n          </span><span class="s1">const stackedSize = actorActivations(msg.from ? msg.from : msg.to.actor).length;</span><span class="s3">\n          </span><span class="s1">const x = actorRect.x + actorRect.width / 2 + (stackedSize - 1) * conf.activationWidth / 2;</span><span class="s3">\n          </span><span class="s1">const toAdd = {</span><span class="s3">\n            </span><span class="s1">startx: x,</span><span class="s3">\n            </span><span class="s1">stopx: x + conf.activationWidth,</span><span class="s3">\n            </span><span class="s1">actor: msg.from,</span><span class="s3">\n            </span><span class="s1">enabled: true</span><span class="s3">\n          </span><span class="s1">};</span><span class="s3">\n          </span><span class="s1">bounds.activations.push(toAdd);</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">break;</span><span class="s3">\n      </span><span class="s1">case diagObj.db.LINETYPE.ACTIVE_END:</span><span class="s3">\n        </span><span class="s1">{</span><span class="s3">\n          </span><span class="s1">const lastActorActivationIdx = bounds.activations.map((a) =&gt; a.actor).lastIndexOf(msg.from);</span><span class="s3">\n          </span><span class="s1">bounds.activations.splice(lastActorActivationIdx, 1).splice(0, 1);</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">break;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">const isNote = msg.placement !== void 0;</span><span class="s3">\n    </span><span class="s1">if (isNote) {</span><span class="s3">\n      </span><span class="s1">noteModel = await buildNoteModel(msg, actors, diagObj);</span><span class="s3">\n      </span><span class="s1">msg.noteModel = noteModel;</span><span class="s3">\n      </span><span class="s1">stack.forEach((stk) =&gt; {</span><span class="s3">\n        </span><span class="s1">current = stk;</span><span class="s3">\n        </span><span class="s1">current.from = common_default.getMin(current.from, noteModel.startx);</span><span class="s3">\n        </span><span class="s1">current.to = common_default.getMax(current.to, noteModel.startx + noteModel.width);</span><span class="s3">\n        </span><span class="s1">current.width = common_default.getMax(current.width, Math.abs(current.from - current.to)) - conf.labelBoxWidth;</span><span class="s3">\n      </span><span class="s1">});</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">msgModel = buildMessageModel(msg, actors, diagObj);</span><span class="s3">\n      </span><span class="s1">msg.msgModel = msgModel;</span><span class="s3">\n      </span><span class="s1">if (msgModel.startx &amp;&amp; msgModel.stopx &amp;&amp; stack.length &gt; 0) {</span><span class="s3">\n        </span><span class="s1">stack.forEach((stk) =&gt; {</span><span class="s3">\n          </span><span class="s1">current = stk;</span><span class="s3">\n          </span><span class="s1">if (msgModel.startx === msgModel.stopx) {</span><span class="s3">\n            </span><span class="s1">const from = actors.get(msg.from);</span><span class="s3">\n            </span><span class="s1">const to = actors.get(msg.to);</span><span class="s3">\n            </span><span class="s1">current.from = common_default.getMin(</span><span class="s3">\n              </span><span class="s1">from.x - msgModel.width / 2,</span><span class="s3">\n              </span><span class="s1">from.x - from.width / 2,</span><span class="s3">\n              </span><span class="s1">current.from</span><span class="s3">\n            </span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">current.to = common_default.getMax(</span><span class="s3">\n              </span><span class="s1">to.x + msgModel.width / 2,</span><span class="s3">\n              </span><span class="s1">to.x + from.width / 2,</span><span class="s3">\n              </span><span class="s1">current.to</span><span class="s3">\n            </span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">current.width = common_default.getMax(current.width, Math.abs(current.to - current.from)) - conf.labelBoxWidth;</span><span class="s3">\n          </span><span class="s1">} else {</span><span class="s3">\n            </span><span class="s1">current.from = common_default.getMin(msgModel.startx, current.from);</span><span class="s3">\n            </span><span class="s1">current.to = common_default.getMax(msgModel.stopx, current.to);</span><span class="s3">\n            </span><span class="s1">current.width = common_default.getMax(current.width, msgModel.width) - conf.labelBoxWidth;</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">});</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">bounds.activations = [];</span><span class="s3">\n  </span><span class="s1">log.debug(</span><span class="s3">\&quot;</span><span class="s1">Loop type widths:</span><span class="s3">\&quot;</span><span class="s1">, loops);</span><span class="s3">\n  </span><span class="s1">return loops;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">calculateLoopBounds</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var sequenceRenderer_default = {</span><span class="s3">\n  </span><span class="s1">bounds,</span><span class="s3">\n  </span><span class="s1">drawActors,</span><span class="s3">\n  </span><span class="s1">drawActorsPopup,</span><span class="s3">\n  </span><span class="s1">setConf,</span><span class="s3">\n  </span><span class="s1">draw</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n\n</span><span class="s1">// src/diagrams/sequence/sequenceDiagram.ts</span><span class="s3">\n</span><span class="s1">var diagram = {</span><span class="s3">\n  </span><span class="s1">parser: sequenceDiagram_default,</span><span class="s3">\n  </span><span class="s1">get db() {</span><span class="s3">\n    </span><span class="s1">return new SequenceDB();</span><span class="s3">\n  </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">renderer: sequenceRenderer_default,</span><span class="s3">\n  </span><span class="s1">styles: styles_default,</span><span class="s3">\n  </span><span class="s1">init: /* @__PURE__ */ __name((cnf) =&gt; {</span><span class="s3">\n    </span><span class="s1">if (!cnf.sequence) {</span><span class="s3">\n      </span><span class="s1">cnf.sequence = {};</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">if (cnf.wrap) {</span><span class="s3">\n      </span><span class="s1">cnf.sequence.wrap = cnf.wrap;</span><span class="s3">\n      </span><span class="s1">setConfig({ sequence: { wrap: cnf.wrap } });</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">init</span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n</span><span class="s1">export {</span><span class="s3">\n  </span><span class="s1">diagram</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[],</span><span class="s1">&quot;sourceRoot&quot;</span><span class="s0">:</span><span class="s1">&quot;&quot;</span><span class="s0">}</span></pre>
</body>
</html>