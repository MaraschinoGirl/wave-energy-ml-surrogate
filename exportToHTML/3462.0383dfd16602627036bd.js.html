<html>
<head>
<title>3462.0383dfd16602627036bd.js</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #bcbec4;}
.s1 { color: #bcbec4;}
.s2 { color: #6aab73;}
.s3 { color: #2aacb8;}
.s4 { color: #7a7e85;}
.s5 { color: #cf8e6d;}
.s6 { color: #42c3d4;}
.ln { color: #4b5059; font-weight: normal; font-style: normal; }
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
3462.0383dfd16602627036bd.js</font>
</center></td></tr></table>
<pre><a name="l1"><span class="ln">1    </span></a><span class="s0">(</span><span class="s1">self</span><span class="s0">[</span><span class="s2">&quot;webpackChunk_JUPYTERLAB_CORE_OUTPUT&quot;</span><span class="s0">] = </span><span class="s1">self</span><span class="s0">[</span><span class="s2">&quot;webpackChunk_JUPYTERLAB_CORE_OUTPUT&quot;</span><span class="s0">] || []).</span><span class="s1">push</span><span class="s0">([[</span><span class="s3">3462</span><span class="s0">,</span><span class="s3">7061</span><span class="s0">],{</span>
<a name="l2"><span class="ln">2    </span></a>
<a name="l3"><span class="ln">3    </span></a><span class="s4">/***/ </span><span class="s3">63462</span><span class="s0">:</span>
<a name="l4"><span class="ln">4    </span></a><span class="s4">/***/ </span><span class="s0">((</span><span class="s1">module</span><span class="s0">, </span><span class="s1">__unused_webpack_exports</span><span class="s0">, </span><span class="s1">__webpack_require__</span><span class="s0">) =&gt; {</span>
<a name="l5"><span class="ln">5    </span></a>
<a name="l6"><span class="ln">6    </span></a><span class="s4">/* provided dependency */ </span><span class="s5">var </span><span class="s1">process </span><span class="s0">= </span><span class="s1">__webpack_require__</span><span class="s0">(</span><span class="s3">27061</span><span class="s0">);</span>
<a name="l7"><span class="ln">7    </span></a><span class="s0">!</span><span class="s5">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">){ </span><span class="s5">true</span><span class="s0">?</span><span class="s1">module</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">=</span><span class="s1">t</span><span class="s0">():</span><span class="s3">0</span><span class="s0">}(</span><span class="s1">self</span><span class="s0">,(()=&gt;(()=&gt;{</span><span class="s2">&quot;use strict&quot;</span><span class="s0">;</span><span class="s5">var </span><span class="s1">e</span><span class="s0">={</span><span class="s3">903</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">)=&gt;{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">BaseRenderLayer</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">;</span><span class="s5">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">274</span><span class="s0">),</span><span class="s1">r</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">627</span><span class="s0">),</span><span class="s1">o</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">237</span><span class="s0">),</span><span class="s1">n</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">860</span><span class="s0">),</span><span class="s1">a</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">374</span><span class="s0">),</span><span class="s1">h</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">296</span><span class="s0">),</span><span class="s1">l</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">345</span><span class="s0">),</span><span class="s1">c</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">859</span><span class="s0">),</span><span class="s1">d</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">399</span><span class="s0">),</span><span class="s1">_</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">855</span><span class="s0">);</span><span class="s5">class </span><span class="s1">u </span><span class="s5">extends </span><span class="s1">c</span><span class="s0">.</span><span class="s1">Disposable</span><span class="s0">{</span><span class="s1">get canvas</span><span class="s0">(){</span><span class="s5">return this</span><span class="s0">.</span><span class="s1">_canvas</span><span class="s0">}</span><span class="s1">get cacheCanvas</span><span class="s0">(){</span><span class="s5">return this</span><span class="s0">.</span><span class="s1">_charAtlas</span><span class="s0">?.</span><span class="s1">pages</span><span class="s0">[</span><span class="s3">0</span><span class="s0">].</span><span class="s1">canvas</span><span class="s0">}</span><span class="s1">constructor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">d</span><span class="s0">,</span><span class="s1">_</span><span class="s0">,</span><span class="s1">u</span><span class="s0">){</span><span class="s5">super</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">=</span><span class="s1">e</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_container</span><span class="s0">=</span><span class="s1">t</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_alpha</span><span class="s0">=</span><span class="s1">o</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">=</span><span class="s1">n</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">=</span><span class="s1">a</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">=</span><span class="s1">d</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_decorationService</span><span class="s0">=</span><span class="s1">_</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">=</span><span class="s1">u</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCharWidth</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCharHeight</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellWidth</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellHeight</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCharLeft</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCharTop</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_selectionModel</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">h</span><span class="s0">.</span><span class="s1">createSelectionRenderModel</span><span class="s0">)(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bitmapGenerator</span><span class="s0">=[],</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_charAtlasDisposable</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">(</span><span class="s5">new </span><span class="s1">c</span><span class="s0">.</span><span class="s1">MutableDisposable</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_onAddTextureAtlasCanvas</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">(</span><span class="s5">new </span><span class="s1">l</span><span class="s0">.</span><span class="s1">EventEmitter</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">onAddTextureAtlasCanvas</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_onAddTextureAtlasCanvas</span><span class="s0">.</span><span class="s1">event</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_cellColorResolver</span><span class="s0">=</span><span class="s5">new </span><span class="s1">s</span><span class="s0">.</span><span class="s1">CellColorResolver</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_selectionModel</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_decorationService</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_canvas</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">mainDocument</span><span class="s0">.</span><span class="s1">createElement</span><span class="s0">(</span><span class="s2">&quot;canvas&quot;</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_canvas</span><span class="s0">.</span><span class="s1">classList</span><span class="s0">.</span><span class="s1">add</span><span class="s0">(</span><span class="s2">`xterm-</span><span class="s1">$</span><span class="s0">{</span><span class="s1">i</span><span class="s0">}</span><span class="s2">-layer`</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_canvas</span><span class="s0">.</span><span class="s1">style</span><span class="s0">.</span><span class="s1">zIndex</span><span class="s0">=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">toString</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_initCanvas</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_container</span><span class="s0">.</span><span class="s1">appendChild</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_canvas</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_refreshCharAtlas</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">.</span><span class="s1">onChangeColors</span><span class="s0">((</span><span class="s1">e</span><span class="s0">=&gt;{</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_refreshCharAtlas</span><span class="s0">(</span><span class="s1">e</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">reset</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">handleSelectionChanged</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_selectionModel</span><span class="s0">.</span><span class="s1">selectionStart</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_selectionModel</span><span class="s0">.</span><span class="s1">selectionEnd</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_selectionModel</span><span class="s0">.</span><span class="s1">columnSelectMode</span><span class="s0">)}))),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">((</span><span class="s3">0</span><span class="s0">,</span><span class="s1">c</span><span class="s0">.</span><span class="s1">toDisposable</span><span class="s0">)((()=&gt;{</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_canvas</span><span class="s0">.</span><span class="s1">remove</span><span class="s0">()})))}</span><span class="s1">_initCanvas</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">a</span><span class="s0">.</span><span class="s1">throwIfFalsy</span><span class="s0">)(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_canvas</span><span class="s0">.</span><span class="s1">getContext</span><span class="s0">(</span><span class="s2">&quot;2d&quot;</span><span class="s0">,{</span><span class="s1">alpha</span><span class="s0">:</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_alpha</span><span class="s0">})),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_alpha</span><span class="s0">||</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_clearAll</span><span class="s0">()}</span><span class="s1">handleBlur</span><span class="s0">(){}</span><span class="s1">handleFocus</span><span class="s0">(){}</span><span class="s1">handleCursorMove</span><span class="s0">(){}</span><span class="s1">handleGridChanged</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">){}</span><span class="s1">handleSelectionChanged</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_selectionModel</span><span class="s0">.</span><span class="s1">update</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">.</span><span class="s1">_core</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">)}</span><span class="s1">_setTransparency</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">===</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_alpha</span><span class="s0">)</span><span class="s5">return</span><span class="s0">;</span><span class="s5">const </span><span class="s1">t</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_canvas</span><span class="s0">;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_alpha</span><span class="s0">=</span><span class="s1">e</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_canvas</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_canvas</span><span class="s0">.</span><span class="s1">cloneNode</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_initCanvas</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_container</span><span class="s0">.</span><span class="s1">replaceChild</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_canvas</span><span class="s0">,</span><span class="s1">t</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_refreshCharAtlas</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">handleGridChanged</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">.</span><span class="s1">rows</span><span class="s0">-</span><span class="s3">1</span><span class="s0">)}</span><span class="s1">_refreshCharAtlas</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">if</span><span class="s0">(!(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCharWidth</span><span class="s0">&lt;=</span><span class="s3">0</span><span class="s0">&amp;&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCharHeight</span><span class="s0">&lt;=</span><span class="s3">0</span><span class="s0">)){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_charAtlas</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">r</span><span class="s0">.</span><span class="s1">acquireTextureAtlas</span><span class="s0">)(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">.</span><span class="s1">rawOptions</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellWidth</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellHeight</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCharWidth</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCharHeight</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">dpr</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_charAtlasDisposable</span><span class="s0">.</span><span class="s1">value</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">forwardEvent</span><span class="s0">)(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_charAtlas</span><span class="s0">.</span><span class="s1">onAddTextureAtlasCanvas</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_onAddTextureAtlasCanvas</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_charAtlas</span><span class="s0">.</span><span class="s1">warmUp</span><span class="s0">();</span><span class="s5">for</span><span class="s0">(</span><span class="s5">let </span><span class="s1">e</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">e</span><span class="s0">&lt;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_charAtlas</span><span class="s0">.</span><span class="s1">pages</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">e</span><span class="s0">++)</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bitmapGenerator</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]=</span><span class="s5">new </span><span class="s1">g</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_charAtlas</span><span class="s0">.</span><span class="s1">pages</span><span class="s0">[</span><span class="s1">e</span><span class="s0">].</span><span class="s1">canvas</span><span class="s0">)}}</span><span class="s1">resize</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellWidth</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">cell</span><span class="s0">.</span><span class="s1">width</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellHeight</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">cell</span><span class="s0">.</span><span class="s1">height</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCharWidth</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">char</span><span class="s0">.</span><span class="s1">width</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCharHeight</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">char</span><span class="s0">.</span><span class="s1">height</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCharLeft</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">char</span><span class="s0">.</span><span class="s1">left</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCharTop</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">char</span><span class="s0">.</span><span class="s1">top</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_canvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_canvas</span><span class="s0">.</span><span class="s1">style</span><span class="s0">.</span><span class="s1">width</span><span class="s0">=</span><span class="s2">`</span><span class="s1">$</span><span class="s0">{</span><span class="s1">e</span><span class="s0">.</span><span class="s1">css</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">}</span><span class="s2">px`</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_canvas</span><span class="s0">.</span><span class="s1">style</span><span class="s0">.</span><span class="s1">height</span><span class="s0">=</span><span class="s2">`</span><span class="s1">$</span><span class="s0">{</span><span class="s1">e</span><span class="s0">.</span><span class="s1">css</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">}</span><span class="s2">px`</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_alpha</span><span class="s0">||</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_clearAll</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_refreshCharAtlas</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">)}</span><span class="s1">clearTextureAtlas</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_charAtlas</span><span class="s0">?.</span><span class="s1">clearTexture</span><span class="s0">()}</span><span class="s1">_fillCells</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">fillRect</span><span class="s0">(</span><span class="s1">e</span><span class="s0">*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellWidth</span><span class="s0">,</span><span class="s1">t</span><span class="s0">*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellHeight</span><span class="s0">,</span><span class="s1">i</span><span class="s0">*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellWidth</span><span class="s0">,</span><span class="s1">s</span><span class="s0">*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellHeight</span><span class="s0">)}</span><span class="s1">_fillMiddleLineAtCells</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">=</span><span class="s3">1</span><span class="s0">){</span><span class="s5">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">ceil</span><span class="s0">(</span><span class="s3">.5</span><span class="s0">*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellHeight</span><span class="s0">);</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">fillRect</span><span class="s0">(</span><span class="s1">e</span><span class="s0">*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellWidth</span><span class="s0">,(</span><span class="s1">t</span><span class="s0">+</span><span class="s3">1</span><span class="s0">)*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellHeight</span><span class="s0">-</span><span class="s1">s</span><span class="s0">-</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">dpr</span><span class="s0">,</span><span class="s1">i</span><span class="s0">*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellWidth</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">dpr</span><span class="s0">)}</span><span class="s1">_fillBottomLineAtCells</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">=</span><span class="s3">1</span><span class="s0">,</span><span class="s1">s</span><span class="s0">=</span><span class="s3">0</span><span class="s0">){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">fillRect</span><span class="s0">(</span><span class="s1">e</span><span class="s0">*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellWidth</span><span class="s0">,(</span><span class="s1">t</span><span class="s0">+</span><span class="s3">1</span><span class="s0">)*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellHeight</span><span class="s0">+</span><span class="s1">s</span><span class="s0">-</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">dpr</span><span class="s0">-</span><span class="s3">1</span><span class="s0">,</span><span class="s1">i</span><span class="s0">*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellWidth</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">dpr</span><span class="s0">)}</span><span class="s1">_curlyUnderlineAtCell</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">=</span><span class="s3">1</span><span class="s0">){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">save</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">beginPath</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">strokeStyle</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">fillStyle</span><span class="s0">;</span><span class="s5">const </span><span class="s1">s</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">dpr</span><span class="s0">;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">lineWidth</span><span class="s0">=</span><span class="s1">s</span><span class="s0">;</span><span class="s5">for</span><span class="s0">(</span><span class="s5">let </span><span class="s1">r</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">r</span><span class="s0">&lt;</span><span class="s1">i</span><span class="s0">;</span><span class="s1">r</span><span class="s0">++){</span><span class="s5">const </span><span class="s1">i</span><span class="s0">=(</span><span class="s1">e</span><span class="s0">+</span><span class="s1">r</span><span class="s0">)*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellWidth</span><span class="s0">,</span><span class="s1">o</span><span class="s0">=(</span><span class="s1">e</span><span class="s0">+</span><span class="s1">r</span><span class="s0">+</span><span class="s3">.5</span><span class="s0">)*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellWidth</span><span class="s0">,</span><span class="s1">n</span><span class="s0">=(</span><span class="s1">e</span><span class="s0">+</span><span class="s1">r</span><span class="s0">+</span><span class="s3">1</span><span class="s0">)*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellWidth</span><span class="s0">,</span><span class="s1">a</span><span class="s0">=(</span><span class="s1">t</span><span class="s0">+</span><span class="s3">1</span><span class="s0">)*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellHeight</span><span class="s0">-</span><span class="s1">s</span><span class="s0">-</span><span class="s3">1</span><span class="s0">,</span><span class="s1">h</span><span class="s0">=</span><span class="s1">a</span><span class="s0">-</span><span class="s1">s</span><span class="s0">,</span><span class="s1">l</span><span class="s0">=</span><span class="s1">a</span><span class="s0">+</span><span class="s1">s</span><span class="s0">;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">moveTo</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">a</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">bezierCurveTo</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">h</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">h</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">a</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">bezierCurveTo</span><span class="s0">(</span><span class="s1">o</span><span class="s0">,</span><span class="s1">l</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">l</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">a</span><span class="s0">)}</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">stroke</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">restore</span><span class="s0">()}</span><span class="s1">_dottedUnderlineAtCell</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">=</span><span class="s3">1</span><span class="s0">){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">save</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">beginPath</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">strokeStyle</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">fillStyle</span><span class="s0">;</span><span class="s5">const </span><span class="s1">s</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">dpr</span><span class="s0">;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">lineWidth</span><span class="s0">=</span><span class="s1">s</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">setLineDash</span><span class="s0">([</span><span class="s3">2</span><span class="s0">*</span><span class="s1">s</span><span class="s0">,</span><span class="s1">s</span><span class="s0">]);</span><span class="s5">const </span><span class="s1">r</span><span class="s0">=</span><span class="s1">e</span><span class="s0">*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellWidth</span><span class="s0">,</span><span class="s1">o</span><span class="s0">=(</span><span class="s1">t</span><span class="s0">+</span><span class="s3">1</span><span class="s0">)*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellHeight</span><span class="s0">-</span><span class="s1">s</span><span class="s0">-</span><span class="s3">1</span><span class="s0">;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">moveTo</span><span class="s0">(</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">);</span><span class="s5">for</span><span class="s0">(</span><span class="s5">let </span><span class="s1">t</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">t</span><span class="s0">&lt;</span><span class="s1">i</span><span class="s0">;</span><span class="s1">t</span><span class="s0">++){</span><span class="s5">const </span><span class="s1">s</span><span class="s0">=(</span><span class="s1">e</span><span class="s0">+</span><span class="s1">i</span><span class="s0">+</span><span class="s1">t</span><span class="s0">)*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellWidth</span><span class="s0">;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">lineTo</span><span class="s0">(</span><span class="s1">s</span><span class="s0">,</span><span class="s1">o</span><span class="s0">)}</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">stroke</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">closePath</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">restore</span><span class="s0">()}</span><span class="s1">_dashedUnderlineAtCell</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">=</span><span class="s3">1</span><span class="s0">){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">save</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">beginPath</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">strokeStyle</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">fillStyle</span><span class="s0">;</span><span class="s5">const </span><span class="s1">s</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">dpr</span><span class="s0">;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">lineWidth</span><span class="s0">=</span><span class="s1">s</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">setLineDash</span><span class="s0">([</span><span class="s3">4</span><span class="s0">*</span><span class="s1">s</span><span class="s0">,</span><span class="s3">3</span><span class="s0">*</span><span class="s1">s</span><span class="s0">]);</span><span class="s5">const </span><span class="s1">r</span><span class="s0">=</span><span class="s1">e</span><span class="s0">*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellWidth</span><span class="s0">,</span><span class="s1">o</span><span class="s0">=(</span><span class="s1">e</span><span class="s0">+</span><span class="s1">i</span><span class="s0">)*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellWidth</span><span class="s0">,</span><span class="s1">n</span><span class="s0">=(</span><span class="s1">t</span><span class="s0">+</span><span class="s3">1</span><span class="s0">)*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellHeight</span><span class="s0">-</span><span class="s1">s</span><span class="s0">-</span><span class="s3">1</span><span class="s0">;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">moveTo</span><span class="s0">(</span><span class="s1">r</span><span class="s0">,</span><span class="s1">n</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">lineTo</span><span class="s0">(</span><span class="s1">o</span><span class="s0">,</span><span class="s1">n</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">stroke</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">closePath</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">restore</span><span class="s0">()}</span><span class="s1">_fillLeftLineAtCell</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">fillRect</span><span class="s0">(</span><span class="s1">e</span><span class="s0">*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellWidth</span><span class="s0">,</span><span class="s1">t</span><span class="s0">*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellHeight</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">dpr</span><span class="s0">*</span><span class="s1">i</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellHeight</span><span class="s0">)}</span><span class="s1">_strokeRectAtCell</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">){</span><span class="s5">const </span><span class="s1">r</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">dpr</span><span class="s0">;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">lineWidth</span><span class="s0">=</span><span class="s1">r</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">strokeRect</span><span class="s0">(</span><span class="s1">e</span><span class="s0">*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellWidth</span><span class="s0">+</span><span class="s1">r</span><span class="s0">/</span><span class="s3">2</span><span class="s0">,</span><span class="s1">t</span><span class="s0">*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellHeight</span><span class="s0">+</span><span class="s1">r</span><span class="s0">/</span><span class="s3">2</span><span class="s0">,</span><span class="s1">i</span><span class="s0">*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellWidth</span><span class="s0">-</span><span class="s1">r</span><span class="s0">,</span><span class="s1">s</span><span class="s0">*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellHeight</span><span class="s0">-</span><span class="s1">r</span><span class="s0">)}</span><span class="s1">_clearAll</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_alpha</span><span class="s0">?</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">clearRect</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_canvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">):(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">fillStyle</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">background</span><span class="s0">.</span><span class="s1">css</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">fillRect</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_canvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">))}</span><span class="s1">_clearCells</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_alpha</span><span class="s0">?</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">clearRect</span><span class="s0">(</span><span class="s1">e</span><span class="s0">*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellWidth</span><span class="s0">,</span><span class="s1">t</span><span class="s0">*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellHeight</span><span class="s0">,</span><span class="s1">i</span><span class="s0">*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellWidth</span><span class="s0">,</span><span class="s1">s</span><span class="s0">*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellHeight</span><span class="s0">):(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">fillStyle</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">background</span><span class="s0">.</span><span class="s1">css</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">fillRect</span><span class="s0">(</span><span class="s1">e</span><span class="s0">*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellWidth</span><span class="s0">,</span><span class="s1">t</span><span class="s0">*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellHeight</span><span class="s0">,</span><span class="s1">i</span><span class="s0">*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellWidth</span><span class="s0">,</span><span class="s1">s</span><span class="s0">*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellHeight</span><span class="s0">))}</span><span class="s1">_fillCharTrueColor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">font</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_getFont</span><span class="s0">(!</span><span class="s3">1</span><span class="s0">,!</span><span class="s3">1</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">textBaseline</span><span class="s0">=</span><span class="s1">o</span><span class="s0">.</span><span class="s1">TEXT_BASELINE</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_clipRow</span><span class="s0">(</span><span class="s1">i</span><span class="s0">);</span><span class="s5">let </span><span class="s1">s</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">;!</span><span class="s3">1</span><span class="s0">!==</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">.</span><span class="s1">rawOptions</span><span class="s0">.</span><span class="s1">customGlyphs</span><span class="s0">&amp;&amp;(</span><span class="s1">s</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">n</span><span class="s0">.</span><span class="s1">tryDrawCustomChar</span><span class="s0">)(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getChars</span><span class="s0">(),</span><span class="s1">t</span><span class="s0">*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellWidth</span><span class="s0">,</span><span class="s1">i</span><span class="s0">*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellHeight</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellWidth</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellHeight</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">.</span><span class="s1">rawOptions</span><span class="s0">.</span><span class="s1">fontSize</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">dpr</span><span class="s0">)),</span><span class="s1">s</span><span class="s0">||</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">fillText</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getChars</span><span class="s0">(),</span><span class="s1">t</span><span class="s0">*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellWidth</span><span class="s0">+</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCharLeft</span><span class="s0">,</span><span class="s1">i</span><span class="s0">*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellHeight</span><span class="s0">+</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCharTop</span><span class="s0">+</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCharHeight</span><span class="s0">)}</span><span class="s1">_drawChars</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s5">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getChars</span><span class="s0">(),</span><span class="s1">r</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getCode</span><span class="s0">(),</span><span class="s1">o</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getWidth</span><span class="s0">();</span><span class="s5">if</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_cellColorResolver</span><span class="s0">.</span><span class="s1">resolve</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">.</span><span class="s1">buffer</span><span class="s0">.</span><span class="s1">ydisp</span><span class="s0">+</span><span class="s1">i</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellWidth</span><span class="s0">),!</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_charAtlas</span><span class="s0">)</span><span class="s5">return</span><span class="s0">;</span><span class="s5">let </span><span class="s1">n</span><span class="s0">;</span><span class="s5">if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">=</span><span class="s1">s</span><span class="s0">&amp;&amp;</span><span class="s1">s</span><span class="s0">.</span><span class="s1">length</span><span class="s0">&gt;</span><span class="s3">1</span><span class="s0">?</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_charAtlas</span><span class="s0">.</span><span class="s1">getRasterizedGlyphCombinedChar</span><span class="s0">(</span><span class="s1">s</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_cellColorResolver</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_cellColorResolver</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_cellColorResolver</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">ext</span><span class="s0">,!</span><span class="s3">0</span><span class="s0">):</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_charAtlas</span><span class="s0">.</span><span class="s1">getRasterizedGlyph</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getCode</span><span class="s0">()||</span><span class="s1">_</span><span class="s0">.</span><span class="s1">WHITESPACE_CELL_CODE</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_cellColorResolver</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_cellColorResolver</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_cellColorResolver</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">ext</span><span class="s0">,!</span><span class="s3">0</span><span class="s0">),!</span><span class="s1">n</span><span class="s0">.</span><span class="s1">size</span><span class="s0">.</span><span class="s1">x</span><span class="s0">||!</span><span class="s1">n</span><span class="s0">.</span><span class="s1">size</span><span class="s0">.</span><span class="s1">y</span><span class="s0">)</span><span class="s5">return</span><span class="s0">;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">save</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_clipRow</span><span class="s0">(</span><span class="s1">i</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bitmapGenerator</span><span class="s0">[</span><span class="s1">n</span><span class="s0">.</span><span class="s1">texturePage</span><span class="s0">]&amp;&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_charAtlas</span><span class="s0">.</span><span class="s1">pages</span><span class="s0">[</span><span class="s1">n</span><span class="s0">.</span><span class="s1">texturePage</span><span class="s0">].</span><span class="s1">canvas</span><span class="s0">!==</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bitmapGenerator</span><span class="s0">[</span><span class="s1">n</span><span class="s0">.</span><span class="s1">texturePage</span><span class="s0">].</span><span class="s1">canvas</span><span class="s0">&amp;&amp;(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bitmapGenerator</span><span class="s0">[</span><span class="s1">n</span><span class="s0">.</span><span class="s1">texturePage</span><span class="s0">]?.</span><span class="s1">bitmap</span><span class="s0">?.</span><span class="s1">close</span><span class="s0">(),</span><span class="s5">delete this</span><span class="s0">.</span><span class="s1">_bitmapGenerator</span><span class="s0">[</span><span class="s1">n</span><span class="s0">.</span><span class="s1">texturePage</span><span class="s0">]),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_charAtlas</span><span class="s0">.</span><span class="s1">pages</span><span class="s0">[</span><span class="s1">n</span><span class="s0">.</span><span class="s1">texturePage</span><span class="s0">].</span><span class="s1">version</span><span class="s0">!==</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bitmapGenerator</span><span class="s0">[</span><span class="s1">n</span><span class="s0">.</span><span class="s1">texturePage</span><span class="s0">]?.</span><span class="s1">version</span><span class="s0">&amp;&amp;(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bitmapGenerator</span><span class="s0">[</span><span class="s1">n</span><span class="s0">.</span><span class="s1">texturePage</span><span class="s0">]||(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bitmapGenerator</span><span class="s0">[</span><span class="s1">n</span><span class="s0">.</span><span class="s1">texturePage</span><span class="s0">]=</span><span class="s5">new </span><span class="s1">g</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_charAtlas</span><span class="s0">.</span><span class="s1">pages</span><span class="s0">[</span><span class="s1">n</span><span class="s0">.</span><span class="s1">texturePage</span><span class="s0">].</span><span class="s1">canvas</span><span class="s0">)),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bitmapGenerator</span><span class="s0">[</span><span class="s1">n</span><span class="s0">.</span><span class="s1">texturePage</span><span class="s0">].</span><span class="s1">refresh</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bitmapGenerator</span><span class="s0">[</span><span class="s1">n</span><span class="s0">.</span><span class="s1">texturePage</span><span class="s0">].</span><span class="s1">version</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_charAtlas</span><span class="s0">.</span><span class="s1">pages</span><span class="s0">[</span><span class="s1">n</span><span class="s0">.</span><span class="s1">texturePage</span><span class="s0">].</span><span class="s1">version</span><span class="s0">);</span><span class="s5">let </span><span class="s1">h</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">size</span><span class="s0">.</span><span class="s1">x</span><span class="s0">;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">.</span><span class="s1">rawOptions</span><span class="s0">.</span><span class="s1">rescaleOverlappingGlyphs</span><span class="s0">&amp;&amp;(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">a</span><span class="s0">.</span><span class="s1">allowRescaling</span><span class="s0">)(</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">n</span><span class="s0">.</span><span class="s1">size</span><span class="s0">.</span><span class="s1">x</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellWidth</span><span class="s0">)&amp;&amp;(</span><span class="s1">h</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellWidth</span><span class="s0">-</span><span class="s3">1</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">drawImage</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bitmapGenerator</span><span class="s0">[</span><span class="s1">n</span><span class="s0">.</span><span class="s1">texturePage</span><span class="s0">]?.</span><span class="s1">bitmap</span><span class="s0">||</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_charAtlas</span><span class="s0">.</span><span class="s1">pages</span><span class="s0">[</span><span class="s1">n</span><span class="s0">.</span><span class="s1">texturePage</span><span class="s0">].</span><span class="s1">canvas</span><span class="s0">,</span><span class="s1">n</span><span class="s0">.</span><span class="s1">texturePosition</span><span class="s0">.</span><span class="s1">x</span><span class="s0">,</span><span class="s1">n</span><span class="s0">.</span><span class="s1">texturePosition</span><span class="s0">.</span><span class="s1">y</span><span class="s0">,</span><span class="s1">n</span><span class="s0">.</span><span class="s1">size</span><span class="s0">.</span><span class="s1">x</span><span class="s0">,</span><span class="s1">n</span><span class="s0">.</span><span class="s1">size</span><span class="s0">.</span><span class="s1">y</span><span class="s0">,</span><span class="s1">t</span><span class="s0">*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellWidth</span><span class="s0">+</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCharLeft</span><span class="s0">-</span><span class="s1">n</span><span class="s0">.</span><span class="s1">offset</span><span class="s0">.</span><span class="s1">x</span><span class="s0">,</span><span class="s1">i</span><span class="s0">*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellHeight</span><span class="s0">+</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCharTop</span><span class="s0">-</span><span class="s1">n</span><span class="s0">.</span><span class="s1">offset</span><span class="s0">.</span><span class="s1">y</span><span class="s0">,</span><span class="s1">h</span><span class="s0">,</span><span class="s1">n</span><span class="s0">.</span><span class="s1">size</span><span class="s0">.</span><span class="s1">y</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">restore</span><span class="s0">()}</span><span class="s1">_clipRow</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">beginPath</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">e</span><span class="s0">*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellHeight</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">.</span><span class="s1">cols</span><span class="s0">*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellWidth</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deviceCellHeight</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">clip</span><span class="s0">()}</span><span class="s1">_getFont</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">){</span><span class="s5">return</span><span class="s2">`</span><span class="s1">$</span><span class="s0">{</span><span class="s1">t</span><span class="s0">?</span><span class="s2">&quot;italic&quot;</span><span class="s0">:</span><span class="s2">&quot;&quot;</span><span class="s0">} </span><span class="s1">$</span><span class="s0">{</span><span class="s1">e</span><span class="s0">?</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">.</span><span class="s1">rawOptions</span><span class="s0">.</span><span class="s1">fontWeightBold</span><span class="s0">:</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">.</span><span class="s1">rawOptions</span><span class="s0">.</span><span class="s1">fontWeight</span><span class="s0">} </span><span class="s1">$</span><span class="s0">{</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">.</span><span class="s1">rawOptions</span><span class="s0">.</span><span class="s1">fontSize</span><span class="s0">*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">dpr</span><span class="s0">}</span><span class="s2">px </span><span class="s1">$</span><span class="s0">{</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">.</span><span class="s1">rawOptions</span><span class="s0">.</span><span class="s1">fontFamily</span><span class="s0">}</span><span class="s2">`</span><span class="s0">}}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">BaseRenderLayer</span><span class="s0">=</span><span class="s1">u</span><span class="s0">;</span><span class="s5">class </span><span class="s1">g</span><span class="s0">{</span><span class="s1">get bitmap</span><span class="s0">(){</span><span class="s5">return this</span><span class="s0">.</span><span class="s1">_bitmap</span><span class="s0">}</span><span class="s1">constructor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">=</span><span class="s1">e</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_commitTimeout</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bitmap</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">version</span><span class="s0">=-</span><span class="s3">1</span><span class="s0">}</span><span class="s1">refresh</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bitmap</span><span class="s0">?.</span><span class="s1">close</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bitmap</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">,</span><span class="s1">d</span><span class="s0">.</span><span class="s1">isSafari</span><span class="s0">||(</span><span class="s5">void </span><span class="s3">0</span><span class="s0">===</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_commitTimeout</span><span class="s0">&amp;&amp;(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_commitTimeout</span><span class="s0">=</span><span class="s1">window</span><span class="s0">.</span><span class="s1">setTimeout</span><span class="s0">((()=&gt;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_generate</span><span class="s0">()),</span><span class="s3">100</span><span class="s0">)),</span><span class="s3">1</span><span class="s0">===</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">&amp;&amp;(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">=</span><span class="s3">2</span><span class="s0">))}</span><span class="s1">_generate</span><span class="s0">(){</span><span class="s3">0</span><span class="s0">===</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">&amp;&amp;(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bitmap</span><span class="s0">?.</span><span class="s1">close</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bitmap</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">=</span><span class="s3">1</span><span class="s0">,</span><span class="s1">window</span><span class="s0">.</span><span class="s1">createImageBitmap</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">).</span><span class="s1">then</span><span class="s0">((</span><span class="s1">e</span><span class="s0">=&gt;{</span><span class="s3">2</span><span class="s0">===</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">?</span><span class="s5">this</span><span class="s0">.</span><span class="s1">refresh</span><span class="s0">():</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bitmap</span><span class="s0">=</span><span class="s1">e</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">=</span><span class="s3">0</span><span class="s0">})),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_commitTimeout</span><span class="s0">&amp;&amp;(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_commitTimeout</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">))}}},</span><span class="s3">949</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">)=&gt;{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">CanvasRenderer</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">;</span><span class="s5">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">627</span><span class="s0">),</span><span class="s1">r</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">56</span><span class="s0">),</span><span class="s1">o</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">374</span><span class="s0">),</span><span class="s1">n</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">345</span><span class="s0">),</span><span class="s1">a</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">859</span><span class="s0">),</span><span class="s1">h</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">873</span><span class="s0">),</span><span class="s1">l</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">43</span><span class="s0">),</span><span class="s1">c</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">630</span><span class="s0">),</span><span class="s1">d</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">744</span><span class="s0">);</span><span class="s5">class </span><span class="s1">_ </span><span class="s5">extends </span><span class="s1">a</span><span class="s0">.</span><span class="s1">Disposable</span><span class="s0">{</span><span class="s1">constructor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">_</span><span class="s0">,</span><span class="s1">u</span><span class="s0">,</span><span class="s1">g</span><span class="s0">,</span><span class="s1">f</span><span class="s0">,</span><span class="s1">v</span><span class="s0">,</span><span class="s1">C</span><span class="s0">,</span><span class="s1">p</span><span class="s0">,</span><span class="s1">m</span><span class="s0">){</span><span class="s5">super</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">=</span><span class="s1">e</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_screenElement</span><span class="s0">=</span><span class="s1">t</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">=</span><span class="s1">_</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_charSizeService</span><span class="s0">=</span><span class="s1">u</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">=</span><span class="s1">g</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">=</span><span class="s1">C</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">=</span><span class="s1">m</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_observerDisposable</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">(</span><span class="s5">new </span><span class="s1">a</span><span class="s0">.</span><span class="s1">MutableDisposable</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_onRequestRedraw</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">(</span><span class="s5">new </span><span class="s1">n</span><span class="s0">.</span><span class="s1">EventEmitter</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">onRequestRedraw</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_onRequestRedraw</span><span class="s0">.</span><span class="s1">event</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_onChangeTextureAtlas</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">(</span><span class="s5">new </span><span class="s1">n</span><span class="s0">.</span><span class="s1">EventEmitter</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">onChangeTextureAtlas</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_onChangeTextureAtlas</span><span class="s0">.</span><span class="s1">event</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_onAddTextureAtlasCanvas</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">(</span><span class="s5">new </span><span class="s1">n</span><span class="s0">.</span><span class="s1">EventEmitter</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">onAddTextureAtlasCanvas</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_onAddTextureAtlasCanvas</span><span class="s0">.</span><span class="s1">event</span><span class="s0">;</span><span class="s5">const </span><span class="s1">x</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">.</span><span class="s1">rawOptions</span><span class="s0">.</span><span class="s1">allowTransparency</span><span class="s0">;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_renderLayers</span><span class="s0">=[</span><span class="s5">new </span><span class="s1">d</span><span class="s0">.</span><span class="s1">TextRenderLayer</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_screenElement</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s1">x</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">,</span><span class="s1">f</span><span class="s0">,</span><span class="s1">p</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">,</span><span class="s1">m</span><span class="s0">),</span><span class="s5">new </span><span class="s1">c</span><span class="s0">.</span><span class="s1">SelectionRenderLayer</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_screenElement</span><span class="s0">,</span><span class="s3">1</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">,</span><span class="s1">p</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">,</span><span class="s1">m</span><span class="s0">),</span><span class="s5">new </span><span class="s1">l</span><span class="s0">.</span><span class="s1">LinkRenderLayer</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_screenElement</span><span class="s0">,</span><span class="s3">2</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">,</span><span class="s1">p</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">,</span><span class="s1">m</span><span class="s0">),</span><span class="s5">new </span><span class="s1">h</span><span class="s0">.</span><span class="s1">CursorRenderLayer</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_screenElement</span><span class="s0">,</span><span class="s3">3</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_onRequestRedraw</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">,</span><span class="s1">v</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">,</span><span class="s1">p</span><span class="s0">,</span><span class="s1">m</span><span class="s0">)];</span><span class="s5">for</span><span class="s0">(</span><span class="s5">const </span><span class="s1">e of </span><span class="s5">this</span><span class="s0">.</span><span class="s1">_renderLayers</span><span class="s0">)(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">n</span><span class="s0">.</span><span class="s1">forwardEvent</span><span class="s0">)(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">onAddTextureAtlasCanvas</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_onAddTextureAtlasCanvas</span><span class="s0">);</span><span class="s5">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">o</span><span class="s0">.</span><span class="s1">createRenderDimensions</span><span class="s0">)(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_devicePixelRatio</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">dpr</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_updateDimensions</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_observerDisposable</span><span class="s0">.</span><span class="s1">value</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">r</span><span class="s0">.</span><span class="s1">observeDevicePixelDimensions</span><span class="s0">)(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_renderLayers</span><span class="s0">[</span><span class="s3">0</span><span class="s0">].</span><span class="s1">canvas</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">window</span><span class="s0">,((</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_setCanvasDevicePixelDimensions</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">))),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">onWindowChange</span><span class="s0">((</span><span class="s1">e</span><span class="s0">=&gt;{</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_observerDisposable</span><span class="s0">.</span><span class="s1">value</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">r</span><span class="s0">.</span><span class="s1">observeDevicePixelDimensions</span><span class="s0">)(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_renderLayers</span><span class="s0">[</span><span class="s3">0</span><span class="s0">].</span><span class="s1">canvas</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,((</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_setCanvasDevicePixelDimensions</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)))}))),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">((</span><span class="s3">0</span><span class="s0">,</span><span class="s1">a</span><span class="s0">.</span><span class="s1">toDisposable</span><span class="s0">)((()=&gt;{</span><span class="s5">for</span><span class="s0">(</span><span class="s5">const </span><span class="s1">e of </span><span class="s5">this</span><span class="s0">.</span><span class="s1">_renderLayers</span><span class="s0">)</span><span class="s1">e</span><span class="s0">.</span><span class="s1">dispose</span><span class="s0">();(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">removeTerminalFromCache</span><span class="s0">)(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">)})))}</span><span class="s1">get textureAtlas</span><span class="s0">(){</span><span class="s5">return this</span><span class="s0">.</span><span class="s1">_renderLayers</span><span class="s0">[</span><span class="s3">0</span><span class="s0">].</span><span class="s1">cacheCanvas</span><span class="s0">}</span><span class="s1">handleDevicePixelRatioChange</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_devicePixelRatio</span><span class="s0">!==</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">dpr</span><span class="s0">&amp;&amp;(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_devicePixelRatio</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">dpr</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">handleResize</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">.</span><span class="s1">cols</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">.</span><span class="s1">rows</span><span class="s0">))}</span><span class="s1">handleResize</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_updateDimensions</span><span class="s0">();</span><span class="s5">for</span><span class="s0">(</span><span class="s5">const </span><span class="s1">e of </span><span class="s5">this</span><span class="s0">.</span><span class="s1">_renderLayers</span><span class="s0">)</span><span class="s1">e</span><span class="s0">.</span><span class="s1">resize</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">);</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_screenElement</span><span class="s0">.</span><span class="s1">style</span><span class="s0">.</span><span class="s1">width</span><span class="s0">=</span><span class="s2">`</span><span class="s1">$</span><span class="s0">{</span><span class="s5">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">css</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">}</span><span class="s2">px`</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_screenElement</span><span class="s0">.</span><span class="s1">style</span><span class="s0">.</span><span class="s1">height</span><span class="s0">=</span><span class="s2">`</span><span class="s1">$</span><span class="s0">{</span><span class="s5">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">css</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">}</span><span class="s2">px`</span><span class="s0">}</span><span class="s1">handleCharSizeChanged</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">handleResize</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">.</span><span class="s1">cols</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">.</span><span class="s1">rows</span><span class="s0">)}</span><span class="s1">handleBlur</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_runOperation</span><span class="s0">((</span><span class="s1">e</span><span class="s0">=&gt;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">handleBlur</span><span class="s0">()))}</span><span class="s1">handleFocus</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_runOperation</span><span class="s0">((</span><span class="s1">e</span><span class="s0">=&gt;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">handleFocus</span><span class="s0">()))}</span><span class="s1">handleSelectionChanged</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_runOperation</span><span class="s0">((</span><span class="s1">s</span><span class="s0">=&gt;</span><span class="s1">s</span><span class="s0">.</span><span class="s1">handleSelectionChanged</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">))),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">selectionForeground</span><span class="s0">&amp;&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_onRequestRedraw</span><span class="s0">.</span><span class="s1">fire</span><span class="s0">({</span><span class="s1">start</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">end</span><span class="s0">:</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">.</span><span class="s1">rows</span><span class="s0">-</span><span class="s3">1</span><span class="s0">})}</span><span class="s1">handleCursorMove</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_runOperation</span><span class="s0">((</span><span class="s1">e</span><span class="s0">=&gt;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">handleCursorMove</span><span class="s0">()))}</span><span class="s1">clear</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_runOperation</span><span class="s0">((</span><span class="s1">e</span><span class="s0">=&gt;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">reset</span><span class="s0">()))}</span><span class="s1">_runOperation</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">for</span><span class="s0">(</span><span class="s5">const </span><span class="s1">t of </span><span class="s5">this</span><span class="s0">.</span><span class="s1">_renderLayers</span><span class="s0">)</span><span class="s1">e</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)}</span><span class="s1">renderRows</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">){</span><span class="s5">for</span><span class="s0">(</span><span class="s5">const </span><span class="s1">i of </span><span class="s5">this</span><span class="s0">.</span><span class="s1">_renderLayers</span><span class="s0">)</span><span class="s1">i</span><span class="s0">.</span><span class="s1">handleGridChanged</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)}</span><span class="s1">clearTextureAtlas</span><span class="s0">(){</span><span class="s5">for</span><span class="s0">(</span><span class="s5">const </span><span class="s1">e of </span><span class="s5">this</span><span class="s0">.</span><span class="s1">_renderLayers</span><span class="s0">)</span><span class="s1">e</span><span class="s0">.</span><span class="s1">clearTextureAtlas</span><span class="s0">()}</span><span class="s1">_updateDimensions</span><span class="s0">(){</span><span class="s5">if</span><span class="s0">(!</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_charSizeService</span><span class="s0">.</span><span class="s1">hasValidSize</span><span class="s0">)</span><span class="s5">return</span><span class="s0">;</span><span class="s5">const </span><span class="s1">e</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">dpr</span><span class="s0">;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">char</span><span class="s0">.</span><span class="s1">width</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">floor</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_charSizeService</span><span class="s0">.</span><span class="s1">width</span><span class="s0">*</span><span class="s1">e</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">char</span><span class="s0">.</span><span class="s1">height</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">ceil</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_charSizeService</span><span class="s0">.</span><span class="s1">height</span><span class="s0">*</span><span class="s1">e</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">cell</span><span class="s0">.</span><span class="s1">height</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">floor</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">char</span><span class="s0">.</span><span class="s1">height</span><span class="s0">*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">.</span><span class="s1">rawOptions</span><span class="s0">.</span><span class="s1">lineHeight</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">char</span><span class="s0">.</span><span class="s1">top</span><span class="s0">=</span><span class="s3">1</span><span class="s0">===</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">.</span><span class="s1">rawOptions</span><span class="s0">.</span><span class="s1">lineHeight</span><span class="s0">?</span><span class="s3">0</span><span class="s0">:</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">round</span><span class="s0">((</span><span class="s5">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">cell</span><span class="s0">.</span><span class="s1">height</span><span class="s0">-</span><span class="s5">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">char</span><span class="s0">.</span><span class="s1">height</span><span class="s0">)/</span><span class="s3">2</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">cell</span><span class="s0">.</span><span class="s1">width</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">char</span><span class="s0">.</span><span class="s1">width</span><span class="s0">+</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">round</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">.</span><span class="s1">rawOptions</span><span class="s0">.</span><span class="s1">letterSpacing</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">char</span><span class="s0">.</span><span class="s1">left</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">floor</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">.</span><span class="s1">rawOptions</span><span class="s0">.</span><span class="s1">letterSpacing</span><span class="s0">/</span><span class="s3">2</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">.</span><span class="s1">rows</span><span class="s0">*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">cell</span><span class="s0">.</span><span class="s1">height</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">.</span><span class="s1">cols</span><span class="s0">*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">cell</span><span class="s0">.</span><span class="s1">width</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">css</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">round</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">/</span><span class="s1">e</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">css</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">round</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">/</span><span class="s1">e</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">css</span><span class="s0">.</span><span class="s1">cell</span><span class="s0">.</span><span class="s1">height</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">css</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">/</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">.</span><span class="s1">rows</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">css</span><span class="s0">.</span><span class="s1">cell</span><span class="s0">.</span><span class="s1">width</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">css</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">/</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">.</span><span class="s1">cols</span><span class="s0">}</span><span class="s1">_setCanvasDevicePixelDimensions</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">=</span><span class="s1">t</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">=</span><span class="s1">e</span><span class="s0">;</span><span class="s5">for</span><span class="s0">(</span><span class="s5">const </span><span class="s1">e of </span><span class="s5">this</span><span class="s0">.</span><span class="s1">_renderLayers</span><span class="s0">)</span><span class="s1">e</span><span class="s0">.</span><span class="s1">resize</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">);</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_requestRedrawViewport</span><span class="s0">()}</span><span class="s1">_requestRedrawViewport</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_onRequestRedraw</span><span class="s0">.</span><span class="s1">fire</span><span class="s0">({</span><span class="s1">start</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">end</span><span class="s0">:</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">.</span><span class="s1">rows</span><span class="s0">-</span><span class="s3">1</span><span class="s0">})}}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">CanvasRenderer</span><span class="s0">=</span><span class="s1">_</span><span class="s0">},</span><span class="s3">873</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">)=&gt;{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">CursorRenderLayer</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">;</span><span class="s5">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">457</span><span class="s0">),</span><span class="s1">r</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">859</span><span class="s0">),</span><span class="s1">o</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">399</span><span class="s0">),</span><span class="s1">n</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">782</span><span class="s0">),</span><span class="s1">a</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">903</span><span class="s0">);</span><span class="s5">class </span><span class="s1">h </span><span class="s5">extends </span><span class="s1">a</span><span class="s0">.</span><span class="s1">BaseRenderLayer</span><span class="s0">{</span><span class="s1">constructor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">h</span><span class="s0">,</span><span class="s1">l</span><span class="s0">,</span><span class="s1">c</span><span class="s0">,</span><span class="s1">d</span><span class="s0">){</span><span class="s5">super</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;cursor&quot;</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,!</span><span class="s3">0</span><span class="s0">,</span><span class="s1">d</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">c</span><span class="s0">,</span><span class="s1">l</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_onRequestRedraw</span><span class="s0">=</span><span class="s1">s</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_coreService</span><span class="s0">=</span><span class="s1">h</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_cursorBlinkStateManager</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">(</span><span class="s5">new </span><span class="s1">r</span><span class="s0">.</span><span class="s1">MutableDisposable</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_cell</span><span class="s0">=</span><span class="s5">new </span><span class="s1">n</span><span class="s0">.</span><span class="s1">CellData</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">={</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">isFocused</span><span class="s0">:!</span><span class="s3">1</span><span class="s0">,</span><span class="s1">style</span><span class="s0">:</span><span class="s2">&quot;&quot;</span><span class="s0">,</span><span class="s1">width</span><span class="s0">:</span><span class="s3">0</span><span class="s0">},</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_cursorRenderers</span><span class="s0">={</span><span class="s1">bar</span><span class="s0">:</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_renderBarCursor</span><span class="s0">.</span><span class="s1">bind</span><span class="s0">(</span><span class="s5">this</span><span class="s0">),</span><span class="s1">block</span><span class="s0">:</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_renderBlockCursor</span><span class="s0">.</span><span class="s1">bind</span><span class="s0">(</span><span class="s5">this</span><span class="s0">),</span><span class="s1">underline</span><span class="s0">:</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_renderUnderlineCursor</span><span class="s0">.</span><span class="s1">bind</span><span class="s0">(</span><span class="s5">this</span><span class="s0">),</span><span class="s1">outline</span><span class="s0">:</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_renderOutlineCursor</span><span class="s0">.</span><span class="s1">bind</span><span class="s0">(</span><span class="s5">this</span><span class="s0">)},</span><span class="s5">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">(</span><span class="s1">a</span><span class="s0">.</span><span class="s1">onOptionChange</span><span class="s0">((()=&gt;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_handleOptionsChanged</span><span class="s0">()))),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_handleOptionsChanged</span><span class="s0">()}</span><span class="s1">resize</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">super</span><span class="s0">.</span><span class="s1">resize</span><span class="s0">(</span><span class="s1">e</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">={</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">isFocused</span><span class="s0">:!</span><span class="s3">1</span><span class="s0">,</span><span class="s1">style</span><span class="s0">:</span><span class="s2">&quot;&quot;</span><span class="s0">,</span><span class="s1">width</span><span class="s0">:</span><span class="s3">0</span><span class="s0">}}</span><span class="s1">reset</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_clearCursor</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_cursorBlinkStateManager</span><span class="s0">.</span><span class="s1">value</span><span class="s0">?.</span><span class="s1">restartBlinkAnimation</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_handleOptionsChanged</span><span class="s0">()}</span><span class="s1">handleBlur</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_cursorBlinkStateManager</span><span class="s0">.</span><span class="s1">value</span><span class="s0">?.</span><span class="s1">pause</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_onRequestRedraw</span><span class="s0">.</span><span class="s1">fire</span><span class="s0">({</span><span class="s1">start</span><span class="s0">:</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">.</span><span class="s1">buffer</span><span class="s0">.</span><span class="s1">y</span><span class="s0">,</span><span class="s1">end</span><span class="s0">:</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">.</span><span class="s1">buffer</span><span class="s0">.</span><span class="s1">y</span><span class="s0">})}</span><span class="s1">handleFocus</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_cursorBlinkStateManager</span><span class="s0">.</span><span class="s1">value</span><span class="s0">?.</span><span class="s1">resume</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_onRequestRedraw</span><span class="s0">.</span><span class="s1">fire</span><span class="s0">({</span><span class="s1">start</span><span class="s0">:</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">.</span><span class="s1">buffer</span><span class="s0">.</span><span class="s1">y</span><span class="s0">,</span><span class="s1">end</span><span class="s0">:</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">.</span><span class="s1">buffer</span><span class="s0">.</span><span class="s1">y</span><span class="s0">})}</span><span class="s1">_handleOptionsChanged</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">.</span><span class="s1">rawOptions</span><span class="s0">.</span><span class="s1">cursorBlink</span><span class="s0">?</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_cursorBlinkStateManager</span><span class="s0">.</span><span class="s1">value</span><span class="s0">||(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_cursorBlinkStateManager</span><span class="s0">.</span><span class="s1">value</span><span class="s0">=</span><span class="s5">new </span><span class="s1">s</span><span class="s0">.</span><span class="s1">CursorBlinkStateManager</span><span class="s0">((()=&gt;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_render</span><span class="s0">(!</span><span class="s3">0</span><span class="s0">)),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">)):</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_cursorBlinkStateManager</span><span class="s0">.</span><span class="s1">clear</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_onRequestRedraw</span><span class="s0">.</span><span class="s1">fire</span><span class="s0">({</span><span class="s1">start</span><span class="s0">:</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">.</span><span class="s1">buffer</span><span class="s0">.</span><span class="s1">y</span><span class="s0">,</span><span class="s1">end</span><span class="s0">:</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">.</span><span class="s1">buffer</span><span class="s0">.</span><span class="s1">y</span><span class="s0">})}</span><span class="s1">handleCursorMove</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_cursorBlinkStateManager</span><span class="s0">.</span><span class="s1">value</span><span class="s0">?.</span><span class="s1">restartBlinkAnimation</span><span class="s0">()}</span><span class="s1">handleGridChanged</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">){!</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_cursorBlinkStateManager</span><span class="s0">.</span><span class="s1">value</span><span class="s0">||</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_cursorBlinkStateManager</span><span class="s0">.</span><span class="s1">value</span><span class="s0">.</span><span class="s1">isPaused</span><span class="s0">?</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_render</span><span class="s0">(!</span><span class="s3">1</span><span class="s0">):</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_cursorBlinkStateManager</span><span class="s0">.</span><span class="s1">value</span><span class="s0">.</span><span class="s1">restartBlinkAnimation</span><span class="s0">()}</span><span class="s1">_render</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">if</span><span class="s0">(!</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_coreService</span><span class="s0">.</span><span class="s1">isCursorInitialized</span><span class="s0">||</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_coreService</span><span class="s0">.</span><span class="s1">isCursorHidden</span><span class="s0">)</span><span class="s5">return void this</span><span class="s0">.</span><span class="s1">_clearCursor</span><span class="s0">();</span><span class="s5">const </span><span class="s1">t</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">.</span><span class="s1">buffer</span><span class="s0">.</span><span class="s1">ybase</span><span class="s0">+</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">.</span><span class="s1">buffer</span><span class="s0">.</span><span class="s1">y</span><span class="s0">,</span><span class="s1">i</span><span class="s0">=</span><span class="s1">t</span><span class="s0">-</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">.</span><span class="s1">buffer</span><span class="s0">.</span><span class="s1">ydisp</span><span class="s0">;</span><span class="s5">if</span><span class="s0">(</span><span class="s1">i</span><span class="s0">&lt;</span><span class="s3">0</span><span class="s0">||</span><span class="s1">i</span><span class="s0">&gt;=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">.</span><span class="s1">rows</span><span class="s0">)</span><span class="s5">return void this</span><span class="s0">.</span><span class="s1">_clearCursor</span><span class="s0">();</span><span class="s5">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">min</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">.</span><span class="s1">buffer</span><span class="s0">.</span><span class="s1">x</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">.</span><span class="s1">cols</span><span class="s0">-</span><span class="s3">1</span><span class="s0">);</span><span class="s5">if</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">.</span><span class="s1">buffer</span><span class="s0">.</span><span class="s1">lines</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">).</span><span class="s1">loadCell</span><span class="s0">(</span><span class="s1">s</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_cell</span><span class="s0">),</span><span class="s5">void </span><span class="s3">0</span><span class="s0">!==</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_cell</span><span class="s0">.</span><span class="s1">content</span><span class="s0">){</span><span class="s5">if</span><span class="s0">(!</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">isFocused</span><span class="s0">){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_clearCursor</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">save</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">fillStyle</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">cursor</span><span class="s0">.</span><span class="s1">css</span><span class="s0">;</span><span class="s5">const </span><span class="s1">e</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">.</span><span class="s1">rawOptions</span><span class="s0">.</span><span class="s1">cursorStyle</span><span class="s0">,</span><span class="s1">t</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">.</span><span class="s1">rawOptions</span><span class="s0">.</span><span class="s1">cursorInactiveStyle</span><span class="s0">;</span><span class="s5">return </span><span class="s1">t</span><span class="s0">&amp;&amp;</span><span class="s2">&quot;none&quot;</span><span class="s0">!==</span><span class="s1">t</span><span class="s0">&amp;&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_cursorRenderers</span><span class="s0">[</span><span class="s1">t</span><span class="s0">](</span><span class="s1">s</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_cell</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">restore</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">.</span><span class="s1">x</span><span class="s0">=</span><span class="s1">s</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">.</span><span class="s1">y</span><span class="s0">=</span><span class="s1">i</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">.</span><span class="s1">isFocused</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">.</span><span class="s1">style</span><span class="s0">=</span><span class="s1">e</span><span class="s0">,</span><span class="s5">void</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">.</span><span class="s1">width</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_cell</span><span class="s0">.</span><span class="s1">getWidth</span><span class="s0">())}</span><span class="s5">if</span><span class="s0">(!</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_cursorBlinkStateManager</span><span class="s0">.</span><span class="s1">value</span><span class="s0">||</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_cursorBlinkStateManager</span><span class="s0">.</span><span class="s1">value</span><span class="s0">.</span><span class="s1">isCursorVisible</span><span class="s0">){</span><span class="s5">if</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">){</span><span class="s5">if</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">.</span><span class="s1">x</span><span class="s0">===</span><span class="s1">s</span><span class="s0">&amp;&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">.</span><span class="s1">y</span><span class="s0">===</span><span class="s1">i</span><span class="s0">&amp;&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">.</span><span class="s1">isFocused</span><span class="s0">===</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">isFocused</span><span class="s0">&amp;&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">.</span><span class="s1">style</span><span class="s0">===</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">.</span><span class="s1">rawOptions</span><span class="s0">.</span><span class="s1">cursorStyle</span><span class="s0">&amp;&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">.</span><span class="s1">width</span><span class="s0">===</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_cell</span><span class="s0">.</span><span class="s1">getWidth</span><span class="s0">())</span><span class="s5">return</span><span class="s0">;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_clearCursor</span><span class="s0">()}</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">save</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_cursorRenderers</span><span class="s0">[</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">.</span><span class="s1">rawOptions</span><span class="s0">.</span><span class="s1">cursorStyle</span><span class="s0">||</span><span class="s2">&quot;block&quot;</span><span class="s0">](</span><span class="s1">s</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_cell</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">restore</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">.</span><span class="s1">x</span><span class="s0">=</span><span class="s1">s</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">.</span><span class="s1">y</span><span class="s0">=</span><span class="s1">i</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">.</span><span class="s1">isFocused</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">.</span><span class="s1">style</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">.</span><span class="s1">rawOptions</span><span class="s0">.</span><span class="s1">cursorStyle</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">.</span><span class="s1">width</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_cell</span><span class="s0">.</span><span class="s1">getWidth</span><span class="s0">()}</span><span class="s5">else this</span><span class="s0">.</span><span class="s1">_clearCursor</span><span class="s0">()}}</span><span class="s1">_clearCursor</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">&amp;&amp;(</span><span class="s1">o</span><span class="s0">.</span><span class="s1">isFirefox</span><span class="s0">||</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">dpr</span><span class="s0">&lt;</span><span class="s3">1</span><span class="s0">?</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_clearAll</span><span class="s0">():</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_clearCells</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">.</span><span class="s1">x</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">.</span><span class="s1">y</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">.</span><span class="s1">width</span><span class="s0">,</span><span class="s3">1</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">={</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">isFocused</span><span class="s0">:!</span><span class="s3">1</span><span class="s0">,</span><span class="s1">style</span><span class="s0">:</span><span class="s2">&quot;&quot;</span><span class="s0">,</span><span class="s1">width</span><span class="s0">:</span><span class="s3">0</span><span class="s0">})}</span><span class="s1">_renderBarCursor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">save</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">fillStyle</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">cursor</span><span class="s0">.</span><span class="s1">css</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_fillLeftLineAtCell</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">.</span><span class="s1">rawOptions</span><span class="s0">.</span><span class="s1">cursorWidth</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">restore</span><span class="s0">()}</span><span class="s1">_renderBlockCursor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">save</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">fillStyle</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">cursor</span><span class="s0">.</span><span class="s1">css</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_fillCells</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">.</span><span class="s1">getWidth</span><span class="s0">(),</span><span class="s3">1</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">fillStyle</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">cursorAccent</span><span class="s0">.</span><span class="s1">css</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_fillCharTrueColor</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">restore</span><span class="s0">()}</span><span class="s1">_renderUnderlineCursor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">save</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">fillStyle</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">cursor</span><span class="s0">.</span><span class="s1">css</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_fillBottomLineAtCells</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">restore</span><span class="s0">()}</span><span class="s1">_renderOutlineCursor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">save</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">strokeStyle</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">cursor</span><span class="s0">.</span><span class="s1">css</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_strokeRectAtCell</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">.</span><span class="s1">getWidth</span><span class="s0">(),</span><span class="s3">1</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">restore</span><span class="s0">()}}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">CursorRenderLayer</span><span class="s0">=</span><span class="s1">h</span><span class="s0">},</span><span class="s3">574</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">GridCache</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">GridCache</span><span class="s0">=</span><span class="s5">class</span><span class="s0">{</span><span class="s1">constructor</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">cache</span><span class="s0">=[]}</span><span class="s1">resize</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">){</span><span class="s5">for</span><span class="s0">(</span><span class="s5">let </span><span class="s1">i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">i</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">;</span><span class="s1">i</span><span class="s0">++){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">cache</span><span class="s0">.</span><span class="s1">length</span><span class="s0">&lt;=</span><span class="s1">i</span><span class="s0">&amp;&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">cache</span><span class="s0">.</span><span class="s1">push</span><span class="s0">([]);</span><span class="s5">for</span><span class="s0">(</span><span class="s5">let </span><span class="s1">e</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">cache</span><span class="s0">[</span><span class="s1">i</span><span class="s0">].</span><span class="s1">length</span><span class="s0">;</span><span class="s1">e</span><span class="s0">&lt;</span><span class="s1">t</span><span class="s0">;</span><span class="s1">e</span><span class="s0">++)</span><span class="s5">this</span><span class="s0">.</span><span class="s1">cache</span><span class="s0">[</span><span class="s1">i</span><span class="s0">].</span><span class="s1">push</span><span class="s0">(</span><span class="s5">void </span><span class="s3">0</span><span class="s0">);</span><span class="s5">this</span><span class="s0">.</span><span class="s1">cache</span><span class="s0">[</span><span class="s1">i</span><span class="s0">].</span><span class="s1">length</span><span class="s0">=</span><span class="s1">t</span><span class="s0">}</span><span class="s5">this</span><span class="s0">.</span><span class="s1">cache</span><span class="s0">.</span><span class="s1">length</span><span class="s0">=</span><span class="s1">e</span><span class="s0">}</span><span class="s1">clear</span><span class="s0">(){</span><span class="s5">for</span><span class="s0">(</span><span class="s5">let </span><span class="s1">e</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">e</span><span class="s0">&lt;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">cache</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">e</span><span class="s0">++)</span><span class="s5">for</span><span class="s0">(</span><span class="s5">let </span><span class="s1">t</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">t</span><span class="s0">&lt;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">cache</span><span class="s0">[</span><span class="s1">e</span><span class="s0">].</span><span class="s1">length</span><span class="s0">;</span><span class="s1">t</span><span class="s0">++)</span><span class="s5">this</span><span class="s0">.</span><span class="s1">cache</span><span class="s0">[</span><span class="s1">e</span><span class="s0">][</span><span class="s1">t</span><span class="s0">]=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">}}},</span><span class="s3">43</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">)=&gt;{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">LinkRenderLayer</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">;</span><span class="s5">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">197</span><span class="s0">),</span><span class="s1">r</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">237</span><span class="s0">),</span><span class="s1">o</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">903</span><span class="s0">);</span><span class="s5">class </span><span class="s1">n </span><span class="s5">extends </span><span class="s1">o</span><span class="s0">.</span><span class="s1">BaseRenderLayer</span><span class="s0">{</span><span class="s1">constructor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">h</span><span class="s0">){</span><span class="s5">super</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;link&quot;</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,!</span><span class="s3">0</span><span class="s0">,</span><span class="s1">h</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">a</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">(</span><span class="s1">s</span><span class="s0">.</span><span class="s1">onShowLinkUnderline</span><span class="s0">((</span><span class="s1">e</span><span class="s0">=&gt;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_handleShowLinkUnderline</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)))),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">(</span><span class="s1">s</span><span class="s0">.</span><span class="s1">onHideLinkUnderline</span><span class="s0">((</span><span class="s1">e</span><span class="s0">=&gt;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_handleHideLinkUnderline</span><span class="s0">(</span><span class="s1">e</span><span class="s0">))))}</span><span class="s1">resize</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">super</span><span class="s0">.</span><span class="s1">resize</span><span class="s0">(</span><span class="s1">e</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">}</span><span class="s1">reset</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_clearCurrentLink</span><span class="s0">()}</span><span class="s1">_clearCurrentLink</span><span class="s0">(){</span><span class="s5">if</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_clearCells</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">.</span><span class="s1">x1</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">.</span><span class="s1">y1</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">.</span><span class="s1">cols</span><span class="s0">-</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">.</span><span class="s1">x1</span><span class="s0">,</span><span class="s3">1</span><span class="s0">);</span><span class="s5">const </span><span class="s1">e</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">.</span><span class="s1">y2</span><span class="s0">-</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">.</span><span class="s1">y1</span><span class="s0">-</span><span class="s3">1</span><span class="s0">;</span><span class="s1">e</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">&amp;&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_clearCells</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">.</span><span class="s1">y1</span><span class="s0">+</span><span class="s3">1</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">.</span><span class="s1">cols</span><span class="s0">,</span><span class="s1">e</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_clearCells</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">.</span><span class="s1">y2</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">.</span><span class="s1">x2</span><span class="s0">,</span><span class="s3">1</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">}}</span><span class="s1">_handleShowLinkUnderline</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">===</span><span class="s1">r</span><span class="s0">.</span><span class="s1">INVERTED_DEFAULT_COLOR</span><span class="s0">?</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">fillStyle</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">background</span><span class="s0">.</span><span class="s1">css</span><span class="s0">:</span><span class="s1">e</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">&amp;&amp;(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">is256Color</span><span class="s0">)(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">)?</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">fillStyle</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">ansi</span><span class="s0">[</span><span class="s1">e</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">].</span><span class="s1">css</span><span class="s0">:</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">fillStyle</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">foreground</span><span class="s0">.</span><span class="s1">css</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">y1</span><span class="s0">===</span><span class="s1">e</span><span class="s0">.</span><span class="s1">y2</span><span class="s0">)</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_fillBottomLineAtCells</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">x1</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">y1</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">x2</span><span class="s0">-</span><span class="s1">e</span><span class="s0">.</span><span class="s1">x1</span><span class="s0">);</span><span class="s5">else</span><span class="s0">{</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_fillBottomLineAtCells</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">x1</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">y1</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">cols</span><span class="s0">-</span><span class="s1">e</span><span class="s0">.</span><span class="s1">x1</span><span class="s0">);</span><span class="s5">for</span><span class="s0">(</span><span class="s5">let </span><span class="s1">t</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">y1</span><span class="s0">+</span><span class="s3">1</span><span class="s0">;</span><span class="s1">t</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">y2</span><span class="s0">;</span><span class="s1">t</span><span class="s0">++)</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_fillBottomLineAtCells</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">cols</span><span class="s0">);</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_fillBottomLineAtCells</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">y2</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">x2</span><span class="s0">)}</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">=</span><span class="s1">e</span><span class="s0">}</span><span class="s1">_handleHideLinkUnderline</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_clearCurrentLink</span><span class="s0">()}}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">LinkRenderLayer</span><span class="s0">=</span><span class="s1">n</span><span class="s0">},</span><span class="s3">630</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">)=&gt;{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">SelectionRenderLayer</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">;</span><span class="s5">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">903</span><span class="s0">);</span><span class="s5">class </span><span class="s1">r </span><span class="s5">extends </span><span class="s1">s</span><span class="s0">.</span><span class="s1">BaseRenderLayer</span><span class="s0">{</span><span class="s1">constructor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">a</span><span class="s0">){</span><span class="s5">super</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;selection&quot;</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,!</span><span class="s3">0</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">r</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_clearState</span><span class="s0">()}</span><span class="s1">_clearState</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">={</span><span class="s1">start</span><span class="s0">:</span><span class="s5">void </span><span class="s3">0</span><span class="s0">,</span><span class="s1">end</span><span class="s0">:</span><span class="s5">void </span><span class="s3">0</span><span class="s0">,</span><span class="s1">columnSelectMode</span><span class="s0">:</span><span class="s5">void </span><span class="s3">0</span><span class="s0">,</span><span class="s1">ydisp</span><span class="s0">:</span><span class="s5">void </span><span class="s3">0</span><span class="s0">}}</span><span class="s1">resize</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">super</span><span class="s0">.</span><span class="s1">resize</span><span class="s0">(</span><span class="s1">e</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_selectionModel</span><span class="s0">.</span><span class="s1">selectionStart</span><span class="s0">&amp;&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_selectionModel</span><span class="s0">.</span><span class="s1">selectionEnd</span><span class="s0">&amp;&amp;(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_clearState</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_redrawSelection</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_selectionModel</span><span class="s0">.</span><span class="s1">selectionStart</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_selectionModel</span><span class="s0">.</span><span class="s1">selectionEnd</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_selectionModel</span><span class="s0">.</span><span class="s1">columnSelectMode</span><span class="s0">))}</span><span class="s1">reset</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">.</span><span class="s1">start</span><span class="s0">&amp;&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">.</span><span class="s1">end</span><span class="s0">&amp;&amp;(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_clearState</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_clearAll</span><span class="s0">())}</span><span class="s1">handleBlur</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">reset</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_redrawSelection</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_selectionModel</span><span class="s0">.</span><span class="s1">selectionStart</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_selectionModel</span><span class="s0">.</span><span class="s1">selectionEnd</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_selectionModel</span><span class="s0">.</span><span class="s1">columnSelectMode</span><span class="s0">)}</span><span class="s1">handleFocus</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">reset</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_redrawSelection</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_selectionModel</span><span class="s0">.</span><span class="s1">selectionStart</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_selectionModel</span><span class="s0">.</span><span class="s1">selectionEnd</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_selectionModel</span><span class="s0">.</span><span class="s1">columnSelectMode</span><span class="s0">)}</span><span class="s1">handleSelectionChanged</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s5">super</span><span class="s0">.</span><span class="s1">handleSelectionChanged</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_redrawSelection</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">)}</span><span class="s1">_redrawSelection</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s5">if</span><span class="s0">(!</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_didStateChange</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">.</span><span class="s1">buffer</span><span class="s0">.</span><span class="s1">ydisp</span><span class="s0">))</span><span class="s5">return</span><span class="s0">;</span><span class="s5">if</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_clearAll</span><span class="s0">(),!</span><span class="s1">e</span><span class="s0">||!</span><span class="s1">t</span><span class="s0">)</span><span class="s5">return void this</span><span class="s0">.</span><span class="s1">_clearState</span><span class="s0">();</span><span class="s5">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]-</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">.</span><span class="s1">buffer</span><span class="s0">.</span><span class="s1">ydisp</span><span class="s0">,</span><span class="s1">r</span><span class="s0">=</span><span class="s1">t</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]-</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">.</span><span class="s1">buffer</span><span class="s0">.</span><span class="s1">ydisp</span><span class="s0">,</span><span class="s1">o</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">max</span><span class="s0">(</span><span class="s1">s</span><span class="s0">,</span><span class="s3">0</span><span class="s0">),</span><span class="s1">n</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">min</span><span class="s0">(</span><span class="s1">r</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">.</span><span class="s1">rows</span><span class="s0">-</span><span class="s3">1</span><span class="s0">);</span><span class="s5">if</span><span class="s0">(</span><span class="s1">o</span><span class="s0">&gt;=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">.</span><span class="s1">rows</span><span class="s0">||</span><span class="s1">n</span><span class="s0">&lt;</span><span class="s3">0</span><span class="s0">)</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">.</span><span class="s1">ydisp</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">.</span><span class="s1">buffer</span><span class="s0">.</span><span class="s1">ydisp</span><span class="s0">;</span><span class="s5">else</span><span class="s0">{</span><span class="s5">if</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">fillStyle</span><span class="s0">=(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">isFocused</span><span class="s0">?</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">selectionBackgroundTransparent</span><span class="s0">:</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">selectionInactiveBackgroundTransparent</span><span class="s0">).</span><span class="s1">css</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s5">const </span><span class="s1">i</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s3">0</span><span class="s0">],</span><span class="s1">s</span><span class="s0">=</span><span class="s1">t</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]-</span><span class="s1">i</span><span class="s0">,</span><span class="s1">r</span><span class="s0">=</span><span class="s1">n</span><span class="s0">-</span><span class="s1">o</span><span class="s0">+</span><span class="s3">1</span><span class="s0">;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_fillCells</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">)}</span><span class="s5">else</span><span class="s0">{</span><span class="s5">const </span><span class="s1">i</span><span class="s0">=</span><span class="s1">s</span><span class="s0">===</span><span class="s1">o</span><span class="s0">?</span><span class="s1">e</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">a</span><span class="s0">=</span><span class="s1">o</span><span class="s0">===</span><span class="s1">r</span><span class="s0">?</span><span class="s1">t</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]:</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">.</span><span class="s1">cols</span><span class="s0">;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_fillCells</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">a</span><span class="s0">-</span><span class="s1">i</span><span class="s0">,</span><span class="s3">1</span><span class="s0">);</span><span class="s5">const </span><span class="s1">h</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">max</span><span class="s0">(</span><span class="s1">n</span><span class="s0">-</span><span class="s1">o</span><span class="s0">-</span><span class="s3">1</span><span class="s0">,</span><span class="s3">0</span><span class="s0">);</span><span class="s5">if</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_fillCells</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">o</span><span class="s0">+</span><span class="s3">1</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">.</span><span class="s1">cols</span><span class="s0">,</span><span class="s1">h</span><span class="s0">),</span><span class="s1">o</span><span class="s0">!==</span><span class="s1">n</span><span class="s0">){</span><span class="s5">const </span><span class="s1">e</span><span class="s0">=</span><span class="s1">r</span><span class="s0">===</span><span class="s1">n</span><span class="s0">?</span><span class="s1">t</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]:</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">.</span><span class="s1">cols</span><span class="s0">;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_fillCells</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s3">1</span><span class="s0">)}}</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">.</span><span class="s1">start</span><span class="s0">=[</span><span class="s1">e</span><span class="s0">[</span><span class="s3">0</span><span class="s0">],</span><span class="s1">e</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]],</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">.</span><span class="s1">end</span><span class="s0">=[</span><span class="s1">t</span><span class="s0">[</span><span class="s3">0</span><span class="s0">],</span><span class="s1">t</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]],</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">.</span><span class="s1">columnSelectMode</span><span class="s0">=</span><span class="s1">i</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">.</span><span class="s1">ydisp</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">.</span><span class="s1">buffer</span><span class="s0">.</span><span class="s1">ydisp</span><span class="s0">}}</span><span class="s1">_didStateChange</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">){</span><span class="s5">return</span><span class="s0">!</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_areCoordinatesEqual</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">.</span><span class="s1">start</span><span class="s0">)||!</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_areCoordinatesEqual</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">.</span><span class="s1">end</span><span class="s0">)||</span><span class="s1">i</span><span class="s0">!==</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">.</span><span class="s1">columnSelectMode</span><span class="s0">||</span><span class="s1">s</span><span class="s0">!==</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">.</span><span class="s1">ydisp</span><span class="s0">}</span><span class="s1">_areCoordinatesEqual</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">){</span><span class="s5">return</span><span class="s0">!(!</span><span class="s1">e</span><span class="s0">||!</span><span class="s1">t</span><span class="s0">)&amp;&amp;</span><span class="s1">e</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]===</span><span class="s1">t</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]&amp;&amp;</span><span class="s1">e</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]===</span><span class="s1">t</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]}}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">SelectionRenderLayer</span><span class="s0">=</span><span class="s1">r</span><span class="s0">},</span><span class="s3">744</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">)=&gt;{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">TextRenderLayer</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">;</span><span class="s5">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">577</span><span class="s0">),</span><span class="s1">r</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">147</span><span class="s0">),</span><span class="s1">o</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">782</span><span class="s0">),</span><span class="s1">n</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">855</span><span class="s0">),</span><span class="s1">a</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">903</span><span class="s0">),</span><span class="s1">h</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">574</span><span class="s0">);</span><span class="s5">class </span><span class="s1">l </span><span class="s5">extends </span><span class="s1">a</span><span class="s0">.</span><span class="s1">BaseRenderLayer</span><span class="s0">{</span><span class="s1">constructor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">l</span><span class="s0">,</span><span class="s1">c</span><span class="s0">,</span><span class="s1">d</span><span class="s0">){</span><span class="s5">super</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;text&quot;</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">d</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">l</span><span class="s0">,</span><span class="s1">c</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_characterJoinerService</span><span class="s0">=</span><span class="s1">a</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_characterWidth</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_characterFont</span><span class="s0">=</span><span class="s2">&quot;&quot;</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_characterOverlapCache</span><span class="s0">={},</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_workCell</span><span class="s0">=</span><span class="s5">new </span><span class="s1">o</span><span class="s0">.</span><span class="s1">CellData</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">=</span><span class="s5">new </span><span class="s1">h</span><span class="s0">.</span><span class="s1">GridCache</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">(</span><span class="s1">n</span><span class="s0">.</span><span class="s1">onSpecificOptionChange</span><span class="s0">(</span><span class="s2">&quot;allowTransparency&quot;</span><span class="s0">,(</span><span class="s1">e</span><span class="s0">=&gt;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_setTransparency</span><span class="s0">(</span><span class="s1">e</span><span class="s0">))))}</span><span class="s1">resize</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">super</span><span class="s0">.</span><span class="s1">resize</span><span class="s0">(</span><span class="s1">e</span><span class="s0">);</span><span class="s5">const </span><span class="s1">t</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_getFont</span><span class="s0">(!</span><span class="s3">1</span><span class="s0">,!</span><span class="s3">1</span><span class="s0">);</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_characterWidth</span><span class="s0">===</span><span class="s1">e</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">char</span><span class="s0">.</span><span class="s1">width</span><span class="s0">&amp;&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_characterFont</span><span class="s0">===</span><span class="s1">t</span><span class="s0">||(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_characterWidth</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">char</span><span class="s0">.</span><span class="s1">width</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_characterFont</span><span class="s0">=</span><span class="s1">t</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_characterOverlapCache</span><span class="s0">={}),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">.</span><span class="s1">clear</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">.</span><span class="s1">resize</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">.</span><span class="s1">cols</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">.</span><span class="s1">rows</span><span class="s0">)}</span><span class="s1">reset</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">.</span><span class="s1">clear</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_clearAll</span><span class="s0">()}</span><span class="s1">_forEachCell</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s5">for</span><span class="s0">(</span><span class="s5">let </span><span class="s1">r</span><span class="s0">=</span><span class="s1">e</span><span class="s0">;</span><span class="s1">r</span><span class="s0">&lt;=</span><span class="s1">t</span><span class="s0">;</span><span class="s1">r</span><span class="s0">++){</span><span class="s5">const </span><span class="s1">e</span><span class="s0">=</span><span class="s1">r</span><span class="s0">+</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">.</span><span class="s1">buffer</span><span class="s0">.</span><span class="s1">ydisp</span><span class="s0">,</span><span class="s1">t</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">.</span><span class="s1">buffer</span><span class="s0">.</span><span class="s1">lines</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">),</span><span class="s1">o</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_characterJoinerService</span><span class="s0">.</span><span class="s1">getJoinedCharacters</span><span class="s0">(</span><span class="s1">e</span><span class="s0">);</span><span class="s5">for</span><span class="s0">(</span><span class="s5">let </span><span class="s1">e</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">e</span><span class="s0">&lt;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">.</span><span class="s1">cols</span><span class="s0">;</span><span class="s1">e</span><span class="s0">++){</span><span class="s1">t</span><span class="s0">.</span><span class="s1">loadCell</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_workCell</span><span class="s0">);</span><span class="s5">let </span><span class="s1">a</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_workCell</span><span class="s0">,</span><span class="s1">h</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">,</span><span class="s1">l</span><span class="s0">=</span><span class="s1">e</span><span class="s0">;</span><span class="s5">if</span><span class="s0">(</span><span class="s3">0</span><span class="s0">!==</span><span class="s1">a</span><span class="s0">.</span><span class="s1">getWidth</span><span class="s0">()){</span><span class="s5">if</span><span class="s0">(</span><span class="s1">o</span><span class="s0">.</span><span class="s1">length</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">===</span><span class="s1">o</span><span class="s0">[</span><span class="s3">0</span><span class="s0">][</span><span class="s3">0</span><span class="s0">]){</span><span class="s1">h</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">;</span><span class="s5">const </span><span class="s1">e</span><span class="s0">=</span><span class="s1">o</span><span class="s0">.</span><span class="s1">shift</span><span class="s0">();</span><span class="s1">a</span><span class="s0">=</span><span class="s5">new </span><span class="s1">s</span><span class="s0">.</span><span class="s1">JoinedCellData</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_workCell</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">translateToString</span><span class="s0">(!</span><span class="s3">0</span><span class="s0">,</span><span class="s1">e</span><span class="s0">[</span><span class="s3">0</span><span class="s0">],</span><span class="s1">e</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]),</span><span class="s1">e</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]-</span><span class="s1">e</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]),</span><span class="s1">l</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]-</span><span class="s3">1</span><span class="s0">}!</span><span class="s1">h</span><span class="s0">&amp;&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_isOverlapping</span><span class="s0">(</span><span class="s1">a</span><span class="s0">)&amp;&amp;</span><span class="s1">l</span><span class="s0">&lt;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">length</span><span class="s0">-</span><span class="s3">1</span><span class="s0">&amp;&amp;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getCodePoint</span><span class="s0">(</span><span class="s1">l</span><span class="s0">+</span><span class="s3">1</span><span class="s0">)===</span><span class="s1">n</span><span class="s0">.</span><span class="s1">NULL_CELL_CODE</span><span class="s0">&amp;&amp;(</span><span class="s1">a</span><span class="s0">.</span><span class="s1">content</span><span class="s0">&amp;=-</span><span class="s3">12582913</span><span class="s0">,</span><span class="s1">a</span><span class="s0">.</span><span class="s1">content</span><span class="s0">|=</span><span class="s3">2</span><span class="s0">&lt;&lt;</span><span class="s3">22</span><span class="s0">),</span><span class="s1">i</span><span class="s0">(</span><span class="s1">a</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">),</span><span class="s1">e</span><span class="s0">=</span><span class="s1">l</span><span class="s0">}}}}</span><span class="s1">_drawBackground</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">){</span><span class="s5">const </span><span class="s1">i</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">,</span><span class="s1">s</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">.</span><span class="s1">cols</span><span class="s0">;</span><span class="s5">let </span><span class="s1">o</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">n</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">a</span><span class="s0">=</span><span class="s5">null</span><span class="s0">;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">save</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_forEachCell</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,((</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">h</span><span class="s0">)=&gt;{</span><span class="s5">let </span><span class="s1">l</span><span class="s0">=</span><span class="s5">null</span><span class="s0">;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">isInverse</span><span class="s0">()?</span><span class="s1">l</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">isFgDefault</span><span class="s0">()?</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">foreground</span><span class="s0">.</span><span class="s1">css</span><span class="s0">:</span><span class="s1">e</span><span class="s0">.</span><span class="s1">isFgRGB</span><span class="s0">()?</span><span class="s2">`rgb(</span><span class="s1">$</span><span class="s0">{</span><span class="s1">r</span><span class="s0">.</span><span class="s1">AttributeData</span><span class="s0">.</span><span class="s1">toColorRGB</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getFgColor</span><span class="s0">()).</span><span class="s1">join</span><span class="s0">(</span><span class="s2">&quot;,&quot;</span><span class="s0">)}</span><span class="s2">)`</span><span class="s0">:</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">ansi</span><span class="s0">[</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getFgColor</span><span class="s0">()].</span><span class="s1">css</span><span class="s0">:</span><span class="s1">e</span><span class="s0">.</span><span class="s1">isBgRGB</span><span class="s0">()?</span><span class="s1">l</span><span class="s0">=</span><span class="s2">`rgb(</span><span class="s1">$</span><span class="s0">{</span><span class="s1">r</span><span class="s0">.</span><span class="s1">AttributeData</span><span class="s0">.</span><span class="s1">toColorRGB</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getBgColor</span><span class="s0">()).</span><span class="s1">join</span><span class="s0">(</span><span class="s2">&quot;,&quot;</span><span class="s0">)}</span><span class="s2">)`</span><span class="s0">:</span><span class="s1">e</span><span class="s0">.</span><span class="s1">isBgPalette</span><span class="s0">()&amp;&amp;(</span><span class="s1">l</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">ansi</span><span class="s0">[</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getBgColor</span><span class="s0">()].</span><span class="s1">css</span><span class="s0">);</span><span class="s5">let </span><span class="s1">c</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_decorationService</span><span class="s0">.</span><span class="s1">forEachDecorationAtCell</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">.</span><span class="s1">buffer</span><span class="s0">.</span><span class="s1">ydisp</span><span class="s0">+</span><span class="s1">h</span><span class="s0">,</span><span class="s5">void </span><span class="s3">0</span><span class="s0">,(</span><span class="s1">e</span><span class="s0">=&gt;{</span><span class="s2">&quot;top&quot;</span><span class="s0">!==</span><span class="s1">e</span><span class="s0">.</span><span class="s1">options</span><span class="s0">.</span><span class="s1">layer</span><span class="s0">&amp;&amp;</span><span class="s1">c</span><span class="s0">||(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">backgroundColorRGB</span><span class="s0">&amp;&amp;(</span><span class="s1">l</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">backgroundColorRGB</span><span class="s0">.</span><span class="s1">css</span><span class="s0">),</span><span class="s1">c</span><span class="s0">=</span><span class="s2">&quot;top&quot;</span><span class="s0">===</span><span class="s1">e</span><span class="s0">.</span><span class="s1">options</span><span class="s0">.</span><span class="s1">layer</span><span class="s0">)})),</span><span class="s5">null</span><span class="s0">===</span><span class="s1">a</span><span class="s0">&amp;&amp;(</span><span class="s1">o</span><span class="s0">=</span><span class="s1">t</span><span class="s0">,</span><span class="s1">n</span><span class="s0">=</span><span class="s1">h</span><span class="s0">),</span><span class="s1">h</span><span class="s0">!==</span><span class="s1">n</span><span class="s0">?(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">fillStyle</span><span class="s0">=</span><span class="s1">a</span><span class="s0">||</span><span class="s2">&quot;&quot;</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_fillCells</span><span class="s0">(</span><span class="s1">o</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">s</span><span class="s0">-</span><span class="s1">o</span><span class="s0">,</span><span class="s3">1</span><span class="s0">),</span><span class="s1">o</span><span class="s0">=</span><span class="s1">t</span><span class="s0">,</span><span class="s1">n</span><span class="s0">=</span><span class="s1">h</span><span class="s0">):</span><span class="s1">a</span><span class="s0">!==</span><span class="s1">l</span><span class="s0">&amp;&amp;(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">fillStyle</span><span class="s0">=</span><span class="s1">a</span><span class="s0">||</span><span class="s2">&quot;&quot;</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_fillCells</span><span class="s0">(</span><span class="s1">o</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">t</span><span class="s0">-</span><span class="s1">o</span><span class="s0">,</span><span class="s3">1</span><span class="s0">),</span><span class="s1">o</span><span class="s0">=</span><span class="s1">t</span><span class="s0">,</span><span class="s1">n</span><span class="s0">=</span><span class="s1">h</span><span class="s0">),</span><span class="s1">a</span><span class="s0">=</span><span class="s1">l</span><span class="s0">})),</span><span class="s5">null</span><span class="s0">!==</span><span class="s1">a</span><span class="s0">&amp;&amp;(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">fillStyle</span><span class="s0">=</span><span class="s1">a</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_fillCells</span><span class="s0">(</span><span class="s1">o</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">s</span><span class="s0">-</span><span class="s1">o</span><span class="s0">,</span><span class="s3">1</span><span class="s0">)),</span><span class="s1">i</span><span class="s0">.</span><span class="s1">restore</span><span class="s0">()}</span><span class="s1">_drawForeground</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_forEachCell</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,((</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">)=&gt;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_drawChars</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">)))}</span><span class="s1">handleGridChanged</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">){</span><span class="s3">0</span><span class="s0">!==</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">.</span><span class="s1">cache</span><span class="s0">.</span><span class="s1">length</span><span class="s0">&amp;&amp;(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_charAtlas</span><span class="s0">&amp;&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_charAtlas</span><span class="s0">.</span><span class="s1">beginFrame</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_clearCells</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">.</span><span class="s1">cols</span><span class="s0">,</span><span class="s1">t</span><span class="s0">-</span><span class="s1">e</span><span class="s0">+</span><span class="s3">1</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_drawBackground</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_drawForeground</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">))}</span><span class="s1">_isOverlapping</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">if</span><span class="s0">(</span><span class="s3">1</span><span class="s0">!==</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getWidth</span><span class="s0">())</span><span class="s5">return</span><span class="s0">!</span><span class="s3">1</span><span class="s0">;</span><span class="s5">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getCode</span><span class="s0">()&lt;</span><span class="s3">256</span><span class="s0">)</span><span class="s5">return</span><span class="s0">!</span><span class="s3">1</span><span class="s0">;</span><span class="s5">const </span><span class="s1">t</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getChars</span><span class="s0">();</span><span class="s5">if</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_characterOverlapCache</span><span class="s0">.</span><span class="s1">hasOwnProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">))</span><span class="s5">return this</span><span class="s0">.</span><span class="s1">_characterOverlapCache</span><span class="s0">[</span><span class="s1">t</span><span class="s0">];</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">save</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">font</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_characterFont</span><span class="s0">;</span><span class="s5">const </span><span class="s1">i</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">floor</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">measureText</span><span class="s0">(</span><span class="s1">t</span><span class="s0">).</span><span class="s1">width</span><span class="s0">)&gt;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_characterWidth</span><span class="s0">;</span><span class="s5">return this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">restore</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_characterOverlapCache</span><span class="s0">[</span><span class="s1">t</span><span class="s0">]=</span><span class="s1">i</span><span class="s0">,</span><span class="s1">i</span><span class="s0">}}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">TextRenderLayer</span><span class="s0">=</span><span class="s1">l</span><span class="s0">},</span><span class="s3">274</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">)=&gt;{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">CellColorResolver</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">;</span><span class="s5">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">855</span><span class="s0">),</span><span class="s1">r</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">160</span><span class="s0">),</span><span class="s1">o</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">374</span><span class="s0">);</span><span class="s5">let </span><span class="s1">n</span><span class="s0">,</span><span class="s1">a</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">h</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">,</span><span class="s1">c</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">,</span><span class="s1">d</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">,</span><span class="s1">_</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">CellColorResolver</span><span class="s0">=</span><span class="s5">class</span><span class="s0">{</span><span class="s1">constructor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">=</span><span class="s1">e</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_optionService</span><span class="s0">=</span><span class="s1">t</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_selectionRenderModel</span><span class="s0">=</span><span class="s1">i</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_decorationService</span><span class="s0">=</span><span class="s1">s</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">=</span><span class="s1">r</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">=</span><span class="s1">o</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">={</span><span class="s1">fg</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">bg</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">ext</span><span class="s0">:</span><span class="s3">0</span><span class="s0">}}</span><span class="s1">resolve</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">u</span><span class="s0">){</span><span class="s5">if</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">ext</span><span class="s0">=</span><span class="s3">268435456</span><span class="s0">&amp;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">?</span><span class="s1">e</span><span class="s0">.</span><span class="s1">extended</span><span class="s0">.</span><span class="s1">ext</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">h</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">a</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">c</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">,</span><span class="s1">l</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">,</span><span class="s1">d</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">,</span><span class="s1">n</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">,</span><span class="s1">_</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getCode</span><span class="s0">()!==</span><span class="s1">s</span><span class="s0">.</span><span class="s1">NULL_CELL_CODE</span><span class="s0">&amp;&amp;</span><span class="s3">4</span><span class="s0">===</span><span class="s1">e</span><span class="s0">.</span><span class="s1">extended</span><span class="s0">.</span><span class="s1">underlineStyle</span><span class="s0">){</span><span class="s5">const </span><span class="s1">e</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">max</span><span class="s0">(</span><span class="s3">1</span><span class="s0">,</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">floor</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_optionService</span><span class="s0">.</span><span class="s1">rawOptions</span><span class="s0">.</span><span class="s1">fontSize</span><span class="s0">*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">dpr</span><span class="s0">/</span><span class="s3">15</span><span class="s0">));</span><span class="s1">_</span><span class="s0">=</span><span class="s1">t</span><span class="s0">*</span><span class="s1">u</span><span class="s0">%(</span><span class="s3">2</span><span class="s0">*</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">round</span><span class="s0">(</span><span class="s1">e</span><span class="s0">))}</span><span class="s5">if</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_decorationService</span><span class="s0">.</span><span class="s1">forEachDecorationAtCell</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s2">&quot;bottom&quot;</span><span class="s0">,(</span><span class="s1">e</span><span class="s0">=&gt;{</span><span class="s1">e</span><span class="s0">.</span><span class="s1">backgroundColorRGB</span><span class="s0">&amp;&amp;(</span><span class="s1">h</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">backgroundColorRGB</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">&amp;</span><span class="s3">16777215</span><span class="s0">,</span><span class="s1">c</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">),</span><span class="s1">e</span><span class="s0">.</span><span class="s1">foregroundColorRGB</span><span class="s0">&amp;&amp;(</span><span class="s1">a</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">foregroundColorRGB</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">&amp;</span><span class="s3">16777215</span><span class="s0">,</span><span class="s1">l</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">)})),</span><span class="s1">d</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_selectionRenderModel</span><span class="s0">.</span><span class="s1">isCellSelected</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">),</span><span class="s1">d</span><span class="s0">){</span><span class="s5">if</span><span class="s0">(</span><span class="s3">67108864</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">||</span><span class="s3">0</span><span class="s0">!=(</span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">)){</span><span class="s5">if</span><span class="s0">(</span><span class="s3">67108864</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">)</span><span class="s5">switch</span><span class="s0">(</span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">){</span><span class="s5">case </span><span class="s3">16777216</span><span class="s0">:</span><span class="s5">case </span><span class="s3">33554432</span><span class="s0">:</span><span class="s1">h</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">ansi</span><span class="s0">[</span><span class="s3">255</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">].</span><span class="s1">rgba</span><span class="s0">;</span><span class="s5">break</span><span class="s0">;</span><span class="s5">case </span><span class="s3">50331648</span><span class="s0">:</span><span class="s1">h</span><span class="s0">=(</span><span class="s3">16777215</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">)&lt;&lt;</span><span class="s3">8</span><span class="s0">|</span><span class="s3">255</span><span class="s0">;</span><span class="s5">break</span><span class="s0">;</span><span class="s5">default</span><span class="s0">:</span><span class="s1">h</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">foreground</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">}</span><span class="s5">else switch</span><span class="s0">(</span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">){</span><span class="s5">case </span><span class="s3">16777216</span><span class="s0">:</span><span class="s5">case </span><span class="s3">33554432</span><span class="s0">:</span><span class="s1">h</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">ansi</span><span class="s0">[</span><span class="s3">255</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">].</span><span class="s1">rgba</span><span class="s0">;</span><span class="s5">break</span><span class="s0">;</span><span class="s5">case </span><span class="s3">50331648</span><span class="s0">:</span><span class="s1">h</span><span class="s0">=(</span><span class="s3">16777215</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">)&lt;&lt;</span><span class="s3">8</span><span class="s0">|</span><span class="s3">255</span><span class="s0">}</span><span class="s1">h</span><span class="s0">=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">.</span><span class="s1">blend</span><span class="s0">(</span><span class="s1">h</span><span class="s0">,</span><span class="s3">4294967040</span><span class="s0">&amp;(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">isFocused</span><span class="s0">?</span><span class="s1">n</span><span class="s0">.</span><span class="s1">selectionBackgroundOpaque</span><span class="s0">:</span><span class="s1">n</span><span class="s0">.</span><span class="s1">selectionInactiveBackgroundOpaque</span><span class="s0">).</span><span class="s1">rgba</span><span class="s0">|</span><span class="s3">128</span><span class="s0">)&gt;&gt;</span><span class="s3">8</span><span class="s0">&amp;</span><span class="s3">16777215</span><span class="s0">}</span><span class="s5">else </span><span class="s1">h</span><span class="s0">=(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">isFocused</span><span class="s0">?</span><span class="s1">n</span><span class="s0">.</span><span class="s1">selectionBackgroundOpaque</span><span class="s0">:</span><span class="s1">n</span><span class="s0">.</span><span class="s1">selectionInactiveBackgroundOpaque</span><span class="s0">).</span><span class="s1">rgba</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">&amp;</span><span class="s3">16777215</span><span class="s0">;</span><span class="s5">if</span><span class="s0">(</span><span class="s1">c</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">,</span><span class="s1">n</span><span class="s0">.</span><span class="s1">selectionForeground</span><span class="s0">&amp;&amp;(</span><span class="s1">a</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">selectionForeground</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">&amp;</span><span class="s3">16777215</span><span class="s0">,</span><span class="s1">l</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">),(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">o</span><span class="s0">.</span><span class="s1">treatGlyphAsBackgroundColor</span><span class="s0">)(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getCode</span><span class="s0">())){</span><span class="s5">if</span><span class="s0">(</span><span class="s3">67108864</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">&amp;&amp;</span><span class="s3">0</span><span class="s0">==(</span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">))</span><span class="s1">a</span><span class="s0">=(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">isFocused</span><span class="s0">?</span><span class="s1">n</span><span class="s0">.</span><span class="s1">selectionBackgroundOpaque</span><span class="s0">:</span><span class="s1">n</span><span class="s0">.</span><span class="s1">selectionInactiveBackgroundOpaque</span><span class="s0">).</span><span class="s1">rgba</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">&amp;</span><span class="s3">16777215</span><span class="s0">;</span><span class="s5">else</span><span class="s0">{</span><span class="s5">if</span><span class="s0">(</span><span class="s3">67108864</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">)</span><span class="s5">switch</span><span class="s0">(</span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">){</span><span class="s5">case </span><span class="s3">16777216</span><span class="s0">:</span><span class="s5">case </span><span class="s3">33554432</span><span class="s0">:</span><span class="s1">a</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">ansi</span><span class="s0">[</span><span class="s3">255</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">].</span><span class="s1">rgba</span><span class="s0">;</span><span class="s5">break</span><span class="s0">;</span><span class="s5">case </span><span class="s3">50331648</span><span class="s0">:</span><span class="s1">a</span><span class="s0">=(</span><span class="s3">16777215</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">)&lt;&lt;</span><span class="s3">8</span><span class="s0">|</span><span class="s3">255</span><span class="s0">}</span><span class="s5">else switch</span><span class="s0">(</span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">){</span><span class="s5">case </span><span class="s3">16777216</span><span class="s0">:</span><span class="s5">case </span><span class="s3">33554432</span><span class="s0">:</span><span class="s1">a</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">ansi</span><span class="s0">[</span><span class="s3">255</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">].</span><span class="s1">rgba</span><span class="s0">;</span><span class="s5">break</span><span class="s0">;</span><span class="s5">case </span><span class="s3">50331648</span><span class="s0">:</span><span class="s1">a</span><span class="s0">=(</span><span class="s3">16777215</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">)&lt;&lt;</span><span class="s3">8</span><span class="s0">|</span><span class="s3">255</span><span class="s0">;</span><span class="s5">break</span><span class="s0">;</span><span class="s5">default</span><span class="s0">:</span><span class="s1">a</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">foreground</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">}</span><span class="s1">a</span><span class="s0">=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">.</span><span class="s1">blend</span><span class="s0">(</span><span class="s1">a</span><span class="s0">,</span><span class="s3">4294967040</span><span class="s0">&amp;(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">isFocused</span><span class="s0">?</span><span class="s1">n</span><span class="s0">.</span><span class="s1">selectionBackgroundOpaque</span><span class="s0">:</span><span class="s1">n</span><span class="s0">.</span><span class="s1">selectionInactiveBackgroundOpaque</span><span class="s0">).</span><span class="s1">rgba</span><span class="s0">|</span><span class="s3">128</span><span class="s0">)&gt;&gt;</span><span class="s3">8</span><span class="s0">&amp;</span><span class="s3">16777215</span><span class="s0">}</span><span class="s1">l</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">}}</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_decorationService</span><span class="s0">.</span><span class="s1">forEachDecorationAtCell</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s2">&quot;top&quot;</span><span class="s0">,(</span><span class="s1">e</span><span class="s0">=&gt;{</span><span class="s1">e</span><span class="s0">.</span><span class="s1">backgroundColorRGB</span><span class="s0">&amp;&amp;(</span><span class="s1">h</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">backgroundColorRGB</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">&amp;</span><span class="s3">16777215</span><span class="s0">,</span><span class="s1">c</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">),</span><span class="s1">e</span><span class="s0">.</span><span class="s1">foregroundColorRGB</span><span class="s0">&amp;&amp;(</span><span class="s1">a</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">foregroundColorRGB</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">&amp;</span><span class="s3">16777215</span><span class="s0">,</span><span class="s1">l</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">)})),</span><span class="s1">c</span><span class="s0">&amp;&amp;(</span><span class="s1">h</span><span class="s0">=</span><span class="s1">d</span><span class="s0">?-</span><span class="s3">16777216</span><span class="s0">&amp;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">&amp;-</span><span class="s3">134217729</span><span class="s0">|</span><span class="s1">h</span><span class="s0">|</span><span class="s3">50331648</span><span class="s0">:-</span><span class="s3">16777216</span><span class="s0">&amp;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">|</span><span class="s1">h</span><span class="s0">|</span><span class="s3">50331648</span><span class="s0">),</span><span class="s1">l</span><span class="s0">&amp;&amp;(</span><span class="s1">a</span><span class="s0">=-</span><span class="s3">16777216</span><span class="s0">&amp;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">&amp;-</span><span class="s3">67108865</span><span class="s0">|</span><span class="s1">a</span><span class="s0">|</span><span class="s3">50331648</span><span class="s0">),</span><span class="s3">67108864</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">&amp;&amp;(</span><span class="s1">c</span><span class="s0">&amp;&amp;!</span><span class="s1">l</span><span class="s0">&amp;&amp;(</span><span class="s1">a</span><span class="s0">=</span><span class="s3">0</span><span class="s0">==(</span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">)?-</span><span class="s3">134217728</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">|</span><span class="s3">16777215</span><span class="s0">&amp;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">background</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">|</span><span class="s3">50331648</span><span class="s0">:-</span><span class="s3">134217728</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">|</span><span class="s3">67108863</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">,</span><span class="s1">l</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">),!</span><span class="s1">c</span><span class="s0">&amp;&amp;</span><span class="s1">l</span><span class="s0">&amp;&amp;(</span><span class="s1">h</span><span class="s0">=</span><span class="s3">0</span><span class="s0">==(</span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">)?-</span><span class="s3">67108864</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">|</span><span class="s3">16777215</span><span class="s0">&amp;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">foreground</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">|</span><span class="s3">50331648</span><span class="s0">:-</span><span class="s3">67108864</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">|</span><span class="s3">67108863</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">,</span><span class="s1">c</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">)),</span><span class="s1">n</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">=</span><span class="s1">c</span><span class="s0">?</span><span class="s1">h</span><span class="s0">:</span><span class="s5">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">=</span><span class="s1">l</span><span class="s0">?</span><span class="s1">a</span><span class="s0">:</span><span class="s5">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">ext</span><span class="s0">&amp;=</span><span class="s3">536870911</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">ext</span><span class="s0">|=</span><span class="s1">_</span><span class="s0">&lt;&lt;</span><span class="s3">29</span><span class="s0">&amp;</span><span class="s3">3758096384</span><span class="s0">}}},</span><span class="s3">627</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">)=&gt;{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">removeTerminalFromCache</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">acquireTextureAtlas</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">;</span><span class="s5">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">509</span><span class="s0">),</span><span class="s1">r</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">197</span><span class="s0">),</span><span class="s1">o</span><span class="s0">=[];</span><span class="s1">t</span><span class="s0">.</span><span class="s1">acquireTextureAtlas</span><span class="s0">=</span><span class="s5">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">h</span><span class="s0">,</span><span class="s1">l</span><span class="s0">,</span><span class="s1">c</span><span class="s0">){</span><span class="s5">const </span><span class="s1">d</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">r</span><span class="s0">.</span><span class="s1">generateConfig</span><span class="s0">)(</span><span class="s1">n</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">h</span><span class="s0">,</span><span class="s1">l</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">c</span><span class="s0">);</span><span class="s5">for</span><span class="s0">(</span><span class="s5">let </span><span class="s1">t</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">t</span><span class="s0">&lt;</span><span class="s1">o</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">t</span><span class="s0">++){</span><span class="s5">const </span><span class="s1">i</span><span class="s0">=</span><span class="s1">o</span><span class="s0">[</span><span class="s1">t</span><span class="s0">],</span><span class="s1">s</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">ownedBy</span><span class="s0">.</span><span class="s1">indexOf</span><span class="s0">(</span><span class="s1">e</span><span class="s0">);</span><span class="s5">if</span><span class="s0">(</span><span class="s1">s</span><span class="s0">&gt;=</span><span class="s3">0</span><span class="s0">){</span><span class="s5">if</span><span class="s0">((</span><span class="s3">0</span><span class="s0">,</span><span class="s1">r</span><span class="s0">.</span><span class="s1">configEquals</span><span class="s0">)(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">config</span><span class="s0">,</span><span class="s1">d</span><span class="s0">))</span><span class="s5">return </span><span class="s1">i</span><span class="s0">.</span><span class="s1">atlas</span><span class="s0">;</span><span class="s3">1</span><span class="s0">===</span><span class="s1">i</span><span class="s0">.</span><span class="s1">ownedBy</span><span class="s0">.</span><span class="s1">length</span><span class="s0">?(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">atlas</span><span class="s0">.</span><span class="s1">dispose</span><span class="s0">(),</span><span class="s1">o</span><span class="s0">.</span><span class="s1">splice</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s3">1</span><span class="s0">)):</span><span class="s1">i</span><span class="s0">.</span><span class="s1">ownedBy</span><span class="s0">.</span><span class="s1">splice</span><span class="s0">(</span><span class="s1">s</span><span class="s0">,</span><span class="s3">1</span><span class="s0">);</span><span class="s5">break</span><span class="s0">}}</span><span class="s5">for</span><span class="s0">(</span><span class="s5">let </span><span class="s1">t</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">t</span><span class="s0">&lt;</span><span class="s1">o</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">t</span><span class="s0">++){</span><span class="s5">const </span><span class="s1">i</span><span class="s0">=</span><span class="s1">o</span><span class="s0">[</span><span class="s1">t</span><span class="s0">];</span><span class="s5">if</span><span class="s0">((</span><span class="s3">0</span><span class="s0">,</span><span class="s1">r</span><span class="s0">.</span><span class="s1">configEquals</span><span class="s0">)(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">config</span><span class="s0">,</span><span class="s1">d</span><span class="s0">))</span><span class="s5">return </span><span class="s1">i</span><span class="s0">.</span><span class="s1">ownedBy</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">e</span><span class="s0">),</span><span class="s1">i</span><span class="s0">.</span><span class="s1">atlas</span><span class="s0">}</span><span class="s5">const </span><span class="s1">_</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">_core</span><span class="s0">,</span><span class="s1">u</span><span class="s0">={</span><span class="s1">atlas</span><span class="s0">:</span><span class="s5">new </span><span class="s1">s</span><span class="s0">.</span><span class="s1">TextureAtlas</span><span class="s0">(</span><span class="s1">document</span><span class="s0">,</span><span class="s1">d</span><span class="s0">,</span><span class="s1">_</span><span class="s0">.</span><span class="s1">unicodeService</span><span class="s0">),</span><span class="s1">config</span><span class="s0">:</span><span class="s1">d</span><span class="s0">,</span><span class="s1">ownedBy</span><span class="s0">:[</span><span class="s1">e</span><span class="s0">]};</span><span class="s5">return </span><span class="s1">o</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">u</span><span class="s0">),</span><span class="s1">u</span><span class="s0">.</span><span class="s1">atlas</span><span class="s0">},</span><span class="s1">t</span><span class="s0">.</span><span class="s1">removeTerminalFromCache</span><span class="s0">=</span><span class="s5">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">for</span><span class="s0">(</span><span class="s5">let </span><span class="s1">t</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">t</span><span class="s0">&lt;</span><span class="s1">o</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">t</span><span class="s0">++){</span><span class="s5">const </span><span class="s1">i</span><span class="s0">=</span><span class="s1">o</span><span class="s0">[</span><span class="s1">t</span><span class="s0">].</span><span class="s1">ownedBy</span><span class="s0">.</span><span class="s1">indexOf</span><span class="s0">(</span><span class="s1">e</span><span class="s0">);</span><span class="s5">if</span><span class="s0">(-</span><span class="s3">1</span><span class="s0">!==</span><span class="s1">i</span><span class="s0">){</span><span class="s3">1</span><span class="s0">===</span><span class="s1">o</span><span class="s0">[</span><span class="s1">t</span><span class="s0">].</span><span class="s1">ownedBy</span><span class="s0">.</span><span class="s1">length</span><span class="s0">?(</span><span class="s1">o</span><span class="s0">[</span><span class="s1">t</span><span class="s0">].</span><span class="s1">atlas</span><span class="s0">.</span><span class="s1">dispose</span><span class="s0">(),</span><span class="s1">o</span><span class="s0">.</span><span class="s1">splice</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s3">1</span><span class="s0">)):</span><span class="s1">o</span><span class="s0">[</span><span class="s1">t</span><span class="s0">].</span><span class="s1">ownedBy</span><span class="s0">.</span><span class="s1">splice</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s3">1</span><span class="s0">);</span><span class="s5">break</span><span class="s0">}}}},</span><span class="s3">197</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">)=&gt;{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">is256Color</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">configEquals</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">generateConfig</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">;</span><span class="s5">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">160</span><span class="s0">);</span><span class="s1">t</span><span class="s0">.</span><span class="s1">generateConfig</span><span class="s0">=</span><span class="s5">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">a</span><span class="s0">){</span><span class="s5">const </span><span class="s1">h</span><span class="s0">={</span><span class="s1">foreground</span><span class="s0">:</span><span class="s1">n</span><span class="s0">.</span><span class="s1">foreground</span><span class="s0">,</span><span class="s1">background</span><span class="s0">:</span><span class="s1">n</span><span class="s0">.</span><span class="s1">background</span><span class="s0">,</span><span class="s1">cursor</span><span class="s0">:</span><span class="s1">s</span><span class="s0">.</span><span class="s1">NULL_COLOR</span><span class="s0">,</span><span class="s1">cursorAccent</span><span class="s0">:</span><span class="s1">s</span><span class="s0">.</span><span class="s1">NULL_COLOR</span><span class="s0">,</span><span class="s1">selectionForeground</span><span class="s0">:</span><span class="s1">s</span><span class="s0">.</span><span class="s1">NULL_COLOR</span><span class="s0">,</span><span class="s1">selectionBackgroundTransparent</span><span class="s0">:</span><span class="s1">s</span><span class="s0">.</span><span class="s1">NULL_COLOR</span><span class="s0">,</span><span class="s1">selectionBackgroundOpaque</span><span class="s0">:</span><span class="s1">s</span><span class="s0">.</span><span class="s1">NULL_COLOR</span><span class="s0">,</span><span class="s1">selectionInactiveBackgroundTransparent</span><span class="s0">:</span><span class="s1">s</span><span class="s0">.</span><span class="s1">NULL_COLOR</span><span class="s0">,</span><span class="s1">selectionInactiveBackgroundOpaque</span><span class="s0">:</span><span class="s1">s</span><span class="s0">.</span><span class="s1">NULL_COLOR</span><span class="s0">,</span><span class="s1">ansi</span><span class="s0">:</span><span class="s1">n</span><span class="s0">.</span><span class="s1">ansi</span><span class="s0">.</span><span class="s1">slice</span><span class="s0">(),</span><span class="s1">contrastCache</span><span class="s0">:</span><span class="s1">n</span><span class="s0">.</span><span class="s1">contrastCache</span><span class="s0">,</span><span class="s1">halfContrastCache</span><span class="s0">:</span><span class="s1">n</span><span class="s0">.</span><span class="s1">halfContrastCache</span><span class="s0">};</span><span class="s5">return</span><span class="s0">{</span><span class="s1">customGlyphs</span><span class="s0">:</span><span class="s1">o</span><span class="s0">.</span><span class="s1">customGlyphs</span><span class="s0">,</span><span class="s1">devicePixelRatio</span><span class="s0">:</span><span class="s1">a</span><span class="s0">,</span><span class="s1">letterSpacing</span><span class="s0">:</span><span class="s1">o</span><span class="s0">.</span><span class="s1">letterSpacing</span><span class="s0">,</span><span class="s1">lineHeight</span><span class="s0">:</span><span class="s1">o</span><span class="s0">.</span><span class="s1">lineHeight</span><span class="s0">,</span><span class="s1">deviceCellWidth</span><span class="s0">:</span><span class="s1">e</span><span class="s0">,</span><span class="s1">deviceCellHeight</span><span class="s0">:</span><span class="s1">t</span><span class="s0">,</span><span class="s1">deviceCharWidth</span><span class="s0">:</span><span class="s1">i</span><span class="s0">,</span><span class="s1">deviceCharHeight</span><span class="s0">:</span><span class="s1">r</span><span class="s0">,</span><span class="s1">fontFamily</span><span class="s0">:</span><span class="s1">o</span><span class="s0">.</span><span class="s1">fontFamily</span><span class="s0">,</span><span class="s1">fontSize</span><span class="s0">:</span><span class="s1">o</span><span class="s0">.</span><span class="s1">fontSize</span><span class="s0">,</span><span class="s1">fontWeight</span><span class="s0">:</span><span class="s1">o</span><span class="s0">.</span><span class="s1">fontWeight</span><span class="s0">,</span><span class="s1">fontWeightBold</span><span class="s0">:</span><span class="s1">o</span><span class="s0">.</span><span class="s1">fontWeightBold</span><span class="s0">,</span><span class="s1">allowTransparency</span><span class="s0">:</span><span class="s1">o</span><span class="s0">.</span><span class="s1">allowTransparency</span><span class="s0">,</span><span class="s1">drawBoldTextInBrightColors</span><span class="s0">:</span><span class="s1">o</span><span class="s0">.</span><span class="s1">drawBoldTextInBrightColors</span><span class="s0">,</span><span class="s1">minimumContrastRatio</span><span class="s0">:</span><span class="s1">o</span><span class="s0">.</span><span class="s1">minimumContrastRatio</span><span class="s0">,</span><span class="s1">colors</span><span class="s0">:</span><span class="s1">h</span><span class="s0">}},</span><span class="s1">t</span><span class="s0">.</span><span class="s1">configEquals</span><span class="s0">=</span><span class="s5">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">){</span><span class="s5">for</span><span class="s0">(</span><span class="s5">let </span><span class="s1">i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">i</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">ansi</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">i</span><span class="s0">++)</span><span class="s5">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">ansi</span><span class="s0">[</span><span class="s1">i</span><span class="s0">].</span><span class="s1">rgba</span><span class="s0">!==</span><span class="s1">t</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">ansi</span><span class="s0">[</span><span class="s1">i</span><span class="s0">].</span><span class="s1">rgba</span><span class="s0">)</span><span class="s5">return</span><span class="s0">!</span><span class="s3">1</span><span class="s0">;</span><span class="s5">return </span><span class="s1">e</span><span class="s0">.</span><span class="s1">devicePixelRatio</span><span class="s0">===</span><span class="s1">t</span><span class="s0">.</span><span class="s1">devicePixelRatio</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">customGlyphs</span><span class="s0">===</span><span class="s1">t</span><span class="s0">.</span><span class="s1">customGlyphs</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">lineHeight</span><span class="s0">===</span><span class="s1">t</span><span class="s0">.</span><span class="s1">lineHeight</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">letterSpacing</span><span class="s0">===</span><span class="s1">t</span><span class="s0">.</span><span class="s1">letterSpacing</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">fontFamily</span><span class="s0">===</span><span class="s1">t</span><span class="s0">.</span><span class="s1">fontFamily</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">fontSize</span><span class="s0">===</span><span class="s1">t</span><span class="s0">.</span><span class="s1">fontSize</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">fontWeight</span><span class="s0">===</span><span class="s1">t</span><span class="s0">.</span><span class="s1">fontWeight</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">fontWeightBold</span><span class="s0">===</span><span class="s1">t</span><span class="s0">.</span><span class="s1">fontWeightBold</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">allowTransparency</span><span class="s0">===</span><span class="s1">t</span><span class="s0">.</span><span class="s1">allowTransparency</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">deviceCharWidth</span><span class="s0">===</span><span class="s1">t</span><span class="s0">.</span><span class="s1">deviceCharWidth</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">deviceCharHeight</span><span class="s0">===</span><span class="s1">t</span><span class="s0">.</span><span class="s1">deviceCharHeight</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">drawBoldTextInBrightColors</span><span class="s0">===</span><span class="s1">t</span><span class="s0">.</span><span class="s1">drawBoldTextInBrightColors</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">minimumContrastRatio</span><span class="s0">===</span><span class="s1">t</span><span class="s0">.</span><span class="s1">minimumContrastRatio</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">foreground</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">===</span><span class="s1">t</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">foreground</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">background</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">===</span><span class="s1">t</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">background</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">},</span><span class="s1">t</span><span class="s0">.</span><span class="s1">is256Color</span><span class="s0">=</span><span class="s5">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">return </span><span class="s3">16777216</span><span class="s0">==(</span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s1">e</span><span class="s0">)||</span><span class="s3">33554432</span><span class="s0">==(</span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s1">e</span><span class="s0">)}},</span><span class="s3">237</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">)=&gt;{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">TEXT_BASELINE</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">DIM_OPACITY</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">INVERTED_DEFAULT_COLOR</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">;</span><span class="s5">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">399</span><span class="s0">);</span><span class="s1">t</span><span class="s0">.</span><span class="s1">INVERTED_DEFAULT_COLOR</span><span class="s0">=</span><span class="s3">257</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">DIM_OPACITY</span><span class="s0">=</span><span class="s3">.5</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">TEXT_BASELINE</span><span class="s0">=</span><span class="s1">s</span><span class="s0">.</span><span class="s1">isFirefox</span><span class="s0">||</span><span class="s1">s</span><span class="s0">.</span><span class="s1">isLegacyEdge</span><span class="s0">?</span><span class="s2">&quot;bottom&quot;</span><span class="s0">:</span><span class="s2">&quot;ideographic&quot;</span><span class="s0">},</span><span class="s3">457</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">CursorBlinkStateManager</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">CursorBlinkStateManager</span><span class="s0">=</span><span class="s5">class</span><span class="s0">{</span><span class="s1">constructor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_renderCallback</span><span class="s0">=</span><span class="s1">e</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">=</span><span class="s1">t</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">isCursorVisible</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">isFocused</span><span class="s0">&amp;&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_restartInterval</span><span class="s0">()}</span><span class="s1">get isPaused</span><span class="s0">(){</span><span class="s5">return</span><span class="s0">!(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_blinkStartTimeout</span><span class="s0">||</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_blinkInterval</span><span class="s0">)}</span><span class="s1">dispose</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_blinkInterval</span><span class="s0">&amp;&amp;(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">window</span><span class="s0">.</span><span class="s1">clearInterval</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_blinkInterval</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_blinkInterval</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_blinkStartTimeout</span><span class="s0">&amp;&amp;(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">window</span><span class="s0">.</span><span class="s1">clearTimeout</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_blinkStartTimeout</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_blinkStartTimeout</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_animationFrame</span><span class="s0">&amp;&amp;(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">window</span><span class="s0">.</span><span class="s1">cancelAnimationFrame</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_animationFrame</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_animationFrame</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">)}</span><span class="s1">restartBlinkAnimation</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">isPaused</span><span class="s0">||(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_animationTimeRestarted</span><span class="s0">=</span><span class="s1">Date</span><span class="s0">.</span><span class="s1">now</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">isCursorVisible</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_animationFrame</span><span class="s0">||(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_animationFrame</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">window</span><span class="s0">.</span><span class="s1">requestAnimationFrame</span><span class="s0">((()=&gt;{</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_renderCallback</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_animationFrame</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">}))))}</span><span class="s1">_restartInterval</span><span class="s0">(</span><span class="s1">e</span><span class="s0">=</span><span class="s3">600</span><span class="s0">){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_blinkInterval</span><span class="s0">&amp;&amp;(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">window</span><span class="s0">.</span><span class="s1">clearInterval</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_blinkInterval</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_blinkInterval</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_blinkStartTimeout</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">window</span><span class="s0">.</span><span class="s1">setTimeout</span><span class="s0">((()=&gt;{</span><span class="s5">if</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_animationTimeRestarted</span><span class="s0">){</span><span class="s5">const </span><span class="s1">e</span><span class="s0">=</span><span class="s3">600</span><span class="s0">-(</span><span class="s1">Date</span><span class="s0">.</span><span class="s1">now</span><span class="s0">()-</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_animationTimeRestarted</span><span class="s0">);</span><span class="s5">if</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_animationTimeRestarted</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">,</span><span class="s1">e</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">)</span><span class="s5">return void this</span><span class="s0">.</span><span class="s1">_restartInterval</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)}</span><span class="s5">this</span><span class="s0">.</span><span class="s1">isCursorVisible</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_animationFrame</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">window</span><span class="s0">.</span><span class="s1">requestAnimationFrame</span><span class="s0">((()=&gt;{</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_renderCallback</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_animationFrame</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">})),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_blinkInterval</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">window</span><span class="s0">.</span><span class="s1">setInterval</span><span class="s0">((()=&gt;{</span><span class="s5">if</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_animationTimeRestarted</span><span class="s0">){</span><span class="s5">const </span><span class="s1">e</span><span class="s0">=</span><span class="s3">600</span><span class="s0">-(</span><span class="s1">Date</span><span class="s0">.</span><span class="s1">now</span><span class="s0">()-</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_animationTimeRestarted</span><span class="s0">);</span><span class="s5">return this</span><span class="s0">.</span><span class="s1">_animationTimeRestarted</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">,</span><span class="s5">void this</span><span class="s0">.</span><span class="s1">_restartInterval</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)}</span><span class="s5">this</span><span class="s0">.</span><span class="s1">isCursorVisible</span><span class="s0">=!</span><span class="s5">this</span><span class="s0">.</span><span class="s1">isCursorVisible</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_animationFrame</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">window</span><span class="s0">.</span><span class="s1">requestAnimationFrame</span><span class="s0">((()=&gt;{</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_renderCallback</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_animationFrame</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">}))}),</span><span class="s3">600</span><span class="s0">)}),</span><span class="s1">e</span><span class="s0">)}</span><span class="s1">pause</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">isCursorVisible</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_blinkInterval</span><span class="s0">&amp;&amp;(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">window</span><span class="s0">.</span><span class="s1">clearInterval</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_blinkInterval</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_blinkInterval</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_blinkStartTimeout</span><span class="s0">&amp;&amp;(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">window</span><span class="s0">.</span><span class="s1">clearTimeout</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_blinkStartTimeout</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_blinkStartTimeout</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_animationFrame</span><span class="s0">&amp;&amp;(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">window</span><span class="s0">.</span><span class="s1">cancelAnimationFrame</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_animationFrame</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_animationFrame</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">)}</span><span class="s1">resume</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">pause</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_animationTimeRestarted</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_restartInterval</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">restartBlinkAnimation</span><span class="s0">()}}},</span><span class="s3">860</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">)=&gt;{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">tryDrawCustomChar</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">powerlineDefinitions</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">boxDrawingDefinitions</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">blockElementDefinitions</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">;</span><span class="s5">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">374</span><span class="s0">);</span><span class="s1">t</span><span class="s0">.</span><span class="s1">blockElementDefinitions</span><span class="s0">={</span><span class="s2">&quot;▀&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">4</span><span class="s0">}],</span><span class="s2">&quot;▁&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">7</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">1</span><span class="s0">}],</span><span class="s2">&quot;▂&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">6</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">2</span><span class="s0">}],</span><span class="s2">&quot;▃&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">5</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">3</span><span class="s0">}],</span><span class="s2">&quot;▄&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">4</span><span class="s0">}],</span><span class="s2">&quot;▅&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">3</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">5</span><span class="s0">}],</span><span class="s2">&quot;▆&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">6</span><span class="s0">}],</span><span class="s2">&quot;▇&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">1</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">7</span><span class="s0">}],</span><span class="s2">&quot;█&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">}],</span><span class="s2">&quot;▉&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">7</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">}],</span><span class="s2">&quot;▊&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">6</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">}],</span><span class="s2">&quot;▋&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">5</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">}],</span><span class="s2">&quot;▌&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">}],</span><span class="s2">&quot;▍&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">3</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">}],</span><span class="s2">&quot;▎&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">}],</span><span class="s2">&quot;▏&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">1</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">}],</span><span class="s2">&quot;▐&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">}],</span><span class="s2">&quot;▔&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">1</span><span class="s0">}],</span><span class="s2">&quot;▕&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">7</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">1</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">}],</span><span class="s2">&quot;▖&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">4</span><span class="s0">}],</span><span class="s2">&quot;▗&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">4</span><span class="s0">}],</span><span class="s2">&quot;▘&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">4</span><span class="s0">}],</span><span class="s2">&quot;▙&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">4</span><span class="s0">}],</span><span class="s2">&quot;▚&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">4</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">4</span><span class="s0">}],</span><span class="s2">&quot;▛&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">4</span><span class="s0">}],</span><span class="s2">&quot;▜&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">4</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">}],</span><span class="s2">&quot;▝&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">4</span><span class="s0">}],</span><span class="s2">&quot;▞&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">4</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">4</span><span class="s0">}],</span><span class="s2">&quot;▟&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">4</span><span class="s0">}],</span><span class="s2">&quot;🭰&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">1</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">1</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">}],</span><span class="s2">&quot;🭱&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">1</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">}],</span><span class="s2">&quot;🭲&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">3</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">1</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">}],</span><span class="s2">&quot;🭳&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">1</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">}],</span><span class="s2">&quot;🭴&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">5</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">1</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">}],</span><span class="s2">&quot;🭵&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">6</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">1</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">}],</span><span class="s2">&quot;🭶&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">1</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">1</span><span class="s0">}],</span><span class="s2">&quot;🭷&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">1</span><span class="s0">}],</span><span class="s2">&quot;🭸&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">3</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">1</span><span class="s0">}],</span><span class="s2">&quot;🭹&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">1</span><span class="s0">}],</span><span class="s2">&quot;🭺&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">5</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">1</span><span class="s0">}],</span><span class="s2">&quot;🭻&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">6</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">1</span><span class="s0">}],</span><span class="s2">&quot;🭼&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">1</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">7</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">1</span><span class="s0">}],</span><span class="s2">&quot;🭽&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">1</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">1</span><span class="s0">}],</span><span class="s2">&quot;🭾&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">7</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">1</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">1</span><span class="s0">}],</span><span class="s2">&quot;🭿&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">7</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">1</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">7</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">1</span><span class="s0">}],</span><span class="s2">&quot;🮀&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">1</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">7</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">1</span><span class="s0">}],</span><span class="s2">&quot;🮁&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">1</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">1</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">1</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">7</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">1</span><span class="s0">}],</span><span class="s2">&quot;🮂&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">2</span><span class="s0">}],</span><span class="s2">&quot;🮃&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">3</span><span class="s0">}],</span><span class="s2">&quot;🮄&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">5</span><span class="s0">}],</span><span class="s2">&quot;🮅&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">6</span><span class="s0">}],</span><span class="s2">&quot;🮆&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">7</span><span class="s0">}],</span><span class="s2">&quot;🮇&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">6</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">}],</span><span class="s2">&quot;🮈&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">5</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">3</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">}],</span><span class="s2">&quot;🮉&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">3</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">5</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">}],</span><span class="s2">&quot;🮊&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">6</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">}],</span><span class="s2">&quot;🮋&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">1</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">7</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">}],</span><span class="s2">&quot;🮕&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">2</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">2</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">2</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">6</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">2</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">2</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">2</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">6</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">2</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">6</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">6</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">2</span><span class="s0">}],</span><span class="s2">&quot;🮖&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">2</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">6</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">2</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">2</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">2</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">2</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">6</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">2</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">6</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">2</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">6</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">2</span><span class="s0">}],</span><span class="s2">&quot;🮗&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">2</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">6</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">2</span><span class="s0">}]};</span><span class="s5">const </span><span class="s1">r</span><span class="s0">={</span><span class="s2">&quot;░&quot;</span><span class="s0">:[[</span><span class="s3">1</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">],[</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">],[</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s3">1</span><span class="s0">,</span><span class="s3">0</span><span class="s0">],[</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">]],</span><span class="s2">&quot;▒&quot;</span><span class="s0">:[[</span><span class="s3">1</span><span class="s0">,</span><span class="s3">0</span><span class="s0">],[</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">],[</span><span class="s3">0</span><span class="s0">,</span><span class="s3">1</span><span class="s0">],[</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">]],</span><span class="s2">&quot;▓&quot;</span><span class="s0">:[[</span><span class="s3">0</span><span class="s0">,</span><span class="s3">1</span><span class="s0">],[</span><span class="s3">1</span><span class="s0">,</span><span class="s3">1</span><span class="s0">],[</span><span class="s3">1</span><span class="s0">,</span><span class="s3">0</span><span class="s0">],[</span><span class="s3">1</span><span class="s0">,</span><span class="s3">1</span><span class="s0">]]};</span><span class="s1">t</span><span class="s0">.</span><span class="s1">boxDrawingDefinitions</span><span class="s0">={</span><span class="s2">&quot;─&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M0,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;━&quot;</span><span class="s0">:{</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M0,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;│&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,1&quot;</span><span class="s0">},</span><span class="s2">&quot;┃&quot;</span><span class="s0">:{</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,1&quot;</span><span class="s0">},</span><span class="s2">&quot;┌&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M0.5,1 L.5,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┏&quot;</span><span class="s0">:{</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M0.5,1 L.5,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┐&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M0,.5 L.5,.5 L.5,1&quot;</span><span class="s0">},</span><span class="s2">&quot;┓&quot;</span><span class="s0">:{</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M0,.5 L.5,.5 L.5,1&quot;</span><span class="s0">},</span><span class="s2">&quot;└&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┗&quot;</span><span class="s0">:{</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┘&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,.5 L0,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┛&quot;</span><span class="s0">:{</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,.5 L0,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;├&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,1 M.5,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┣&quot;</span><span class="s0">:{</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,1 M.5,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┤&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,1 M.5,.5 L0,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┫&quot;</span><span class="s0">:{</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,1 M.5,.5 L0,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┬&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M0,.5 L1,.5 M.5,.5 L.5,1&quot;</span><span class="s0">},</span><span class="s2">&quot;┳&quot;</span><span class="s0">:{</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M0,.5 L1,.5 M.5,.5 L.5,1&quot;</span><span class="s0">},</span><span class="s2">&quot;┴&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M0,.5 L1,.5 M.5,.5 L.5,0&quot;</span><span class="s0">},</span><span class="s2">&quot;┻&quot;</span><span class="s0">:{</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M0,.5 L1,.5 M.5,.5 L.5,0&quot;</span><span class="s0">},</span><span class="s2">&quot;┼&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M0,.5 L1,.5 M.5,0 L.5,1&quot;</span><span class="s0">},</span><span class="s2">&quot;╋&quot;</span><span class="s0">:{</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M0,.5 L1,.5 M.5,0 L.5,1&quot;</span><span class="s0">},</span><span class="s2">&quot;╴&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L0,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;╸&quot;</span><span class="s0">:{</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L0,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;╵&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,0&quot;</span><span class="s0">},</span><span class="s2">&quot;╹&quot;</span><span class="s0">:{</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,0&quot;</span><span class="s0">},</span><span class="s2">&quot;╶&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;╺&quot;</span><span class="s0">:{</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;╷&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,1&quot;</span><span class="s0">},</span><span class="s2">&quot;╻&quot;</span><span class="s0">:{</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,1&quot;</span><span class="s0">},</span><span class="s2">&quot;═&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M0,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L1,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">M0,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L1,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">}</span><span class="s2">`</span><span class="s0">},</span><span class="s2">&quot;║&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,0 L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,1 M</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,0 L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,1`</span><span class="s0">},</span><span class="s2">&quot;╒&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M.5,1 L.5,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L1,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">M.5,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L1,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">}</span><span class="s2">`</span><span class="s0">},</span><span class="s2">&quot;╓&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,1 L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,.5 L1,.5 M</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,.5 L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,1`</span><span class="s0">},</span><span class="s2">&quot;╔&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M1,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,1 M1,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,1`</span><span class="s0">},</span><span class="s2">&quot;╕&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M0,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L.5,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L.5,1 M0,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L.5,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">}</span><span class="s2">`</span><span class="s0">},</span><span class="s2">&quot;╖&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,1 L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,.5 L0,.5 M</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,.5 L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,1`</span><span class="s0">},</span><span class="s2">&quot;╗&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M0,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,1 M0,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,1`</span><span class="s0">},</span><span class="s2">&quot;╘&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M.5,0 L.5,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L1,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">M.5,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L1,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">}</span><span class="s2">`</span><span class="s0">},</span><span class="s2">&quot;╙&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M1,.5 L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,.5 L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,0 M</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,.5 L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,0`</span><span class="s0">},</span><span class="s2">&quot;╚&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M1,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,0 M1,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,0`</span><span class="s0">},</span><span class="s2">&quot;╛&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M0,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L.5,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L.5,0 M0,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L.5,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">}</span><span class="s2">`</span><span class="s0">},</span><span class="s2">&quot;╜&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M0,.5 L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,.5 L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,0 M</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,.5 L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,0`</span><span class="s0">},</span><span class="s2">&quot;╝&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M0,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,0 M0,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,0`</span><span class="s0">},</span><span class="s2">&quot;╞&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M.5,0 L.5,1 M.5,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L1,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">M.5,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L1,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">}</span><span class="s2">`</span><span class="s0">},</span><span class="s2">&quot;╟&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,0 L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,1 M</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,0 L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,1 M</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,.5 L1,.5`</span><span class="s0">},</span><span class="s2">&quot;╠&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,0 L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,1 M1,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,1 M1,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,0`</span><span class="s0">},</span><span class="s2">&quot;╡&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M.5,0 L.5,1 M0,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L.5,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">M0,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L.5,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">}</span><span class="s2">`</span><span class="s0">},</span><span class="s2">&quot;╢&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M0,.5 L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,.5 M</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,0 L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,1 M</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,0 L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,1`</span><span class="s0">},</span><span class="s2">&quot;╣&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,0 L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,1 M0,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,1 M0,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,0`</span><span class="s0">},</span><span class="s2">&quot;╤&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M0,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L1,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">M0,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L1,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">M.5,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L.5,1`</span><span class="s0">},</span><span class="s2">&quot;╥&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M0,.5 L1,.5 M</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,.5 L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,1 M</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,.5 L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,1`</span><span class="s0">},</span><span class="s2">&quot;╦&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M0,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L1,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">M0,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,1 M1,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,1`</span><span class="s0">},</span><span class="s2">&quot;╧&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M.5,0 L.5,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">M0,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L1,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">M0,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L1,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">}</span><span class="s2">`</span><span class="s0">},</span><span class="s2">&quot;╨&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M0,.5 L1,.5 M</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,.5 L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,0 M</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,.5 L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,0`</span><span class="s0">},</span><span class="s2">&quot;╩&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M0,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L1,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">M0,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,0 M1,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,0`</span><span class="s0">},</span><span class="s2">&quot;╪&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M.5,0 L.5,1 M0,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L1,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">M0,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L1,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">}</span><span class="s2">`</span><span class="s0">},</span><span class="s2">&quot;╫&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M0,.5 L1,.5 M</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,0 L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,1 M</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,0 L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,1`</span><span class="s0">},</span><span class="s2">&quot;╬&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M0,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,1 M1,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,1 M0,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,0 M1,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,0`</span><span class="s0">},</span><span class="s2">&quot;╱&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M1,0 L0,1&quot;</span><span class="s0">},</span><span class="s2">&quot;╲&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M0,0 L1,1&quot;</span><span class="s0">},</span><span class="s2">&quot;╳&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M1,0 L0,1 M0,0 L1,1&quot;</span><span class="s0">},</span><span class="s2">&quot;╼&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L0,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;╽&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,0&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,1&quot;</span><span class="s0">},</span><span class="s2">&quot;╾&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L1,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L0,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;╿&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,1&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,0&quot;</span><span class="s0">},</span><span class="s2">&quot;┍&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,1&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┎&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L1,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,1&quot;</span><span class="s0">},</span><span class="s2">&quot;┑&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,1&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L0,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┒&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L0,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,1&quot;</span><span class="s0">},</span><span class="s2">&quot;┕&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,0&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┖&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L1,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,0&quot;</span><span class="s0">},</span><span class="s2">&quot;┙&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,0&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L0,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┚&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L0,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,0&quot;</span><span class="s0">},</span><span class="s2">&quot;┝&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,1&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┞&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M0.5,1 L.5,.5 L1,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,0&quot;</span><span class="s0">},</span><span class="s2">&quot;┟&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,.5 L1,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,1&quot;</span><span class="s0">},</span><span class="s2">&quot;┠&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L1,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,1&quot;</span><span class="s0">},</span><span class="s2">&quot;┡&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,1&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┢&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,0&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M0.5,1 L.5,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┥&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,1&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L0,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┦&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M0,.5 L.5,.5 L.5,1&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,0&quot;</span><span class="s0">},</span><span class="s2">&quot;┧&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,.5 L0,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,1&quot;</span><span class="s0">},</span><span class="s2">&quot;┨&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L0,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,1&quot;</span><span class="s0">},</span><span class="s2">&quot;┩&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,1&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,.5 L0,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┪&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,0&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M0,.5 L.5,.5 L.5,1&quot;</span><span class="s0">},</span><span class="s2">&quot;┭&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M0.5,1 L.5,.5 L1,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L0,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┮&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M0,.5 L.5,.5 L.5,1&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┯&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,1&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M0,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┰&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M0,.5 L1,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,1&quot;</span><span class="s0">},</span><span class="s2">&quot;┱&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L1,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M0,.5 L.5,.5 L.5,1&quot;</span><span class="s0">},</span><span class="s2">&quot;┲&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L0,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M0.5,1 L.5,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┵&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,.5 L1,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L0,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┶&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,.5 L0,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┷&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,0&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M0,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┸&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M0,.5 L1,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,0&quot;</span><span class="s0">},</span><span class="s2">&quot;┹&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L1,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,.5 L0,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┺&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L0,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┽&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,1 M.5,.5 L1,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L0,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┾&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,1 M.5,.5 L0,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┿&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,1&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M0,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;╀&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M0,.5 L1,.5 M.5,.5 L.5,1&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,0&quot;</span><span class="s0">},</span><span class="s2">&quot;╁&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,0 M0,.5 L1,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,1&quot;</span><span class="s0">},</span><span class="s2">&quot;╂&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M0,.5 L1,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,1&quot;</span><span class="s0">},</span><span class="s2">&quot;╃&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M0.5,1 L.5,.5 L1,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,.5 L0,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;╄&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M0,.5 L.5,.5 L.5,1&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;╅&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,.5 L1,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M0,.5 L.5,.5 L.5,1&quot;</span><span class="s0">},</span><span class="s2">&quot;╆&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,.5 L0,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M0.5,1 L.5,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;╇&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,1&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,0 M0,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;╈&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,0&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M0,.5 L1,.5 M.5,.5 L.5,1&quot;</span><span class="s0">},</span><span class="s2">&quot;╉&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L1,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,1 M.5,.5 L0,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;╊&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L0,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,1 M.5,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;╌&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.1,.5 L.4,.5 M.6,.5 L.9,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;╍&quot;</span><span class="s0">:{</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.1,.5 L.4,.5 M.6,.5 L.9,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┄&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┅&quot;</span><span class="s0">:{</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┈&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┉&quot;</span><span class="s0">:{</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;╎&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.1 L.5,.4 M.5,.6 L.5,.9&quot;</span><span class="s0">},</span><span class="s2">&quot;╏&quot;</span><span class="s0">:{</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.1 L.5,.4 M.5,.6 L.5,.9&quot;</span><span class="s0">},</span><span class="s2">&quot;┆&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333&quot;</span><span class="s0">},</span><span class="s2">&quot;┇&quot;</span><span class="s0">:{</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333&quot;</span><span class="s0">},</span><span class="s2">&quot;┊&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95&quot;</span><span class="s0">},</span><span class="s2">&quot;┋&quot;</span><span class="s0">:{</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95&quot;</span><span class="s0">},</span><span class="s2">&quot;╭&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M.5,1 L.5,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">/</span><span class="s3">.15</span><span class="s0">*</span><span class="s3">.5</span><span class="s0">} </span><span class="s2">C.5,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">/</span><span class="s3">.15</span><span class="s0">*</span><span class="s3">.5</span><span class="s0">}</span><span class="s2">,.5,.5,1,.5`</span><span class="s0">},</span><span class="s2">&quot;╮&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M.5,1 L.5,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">/</span><span class="s3">.15</span><span class="s0">*</span><span class="s3">.5</span><span class="s0">} </span><span class="s2">C.5,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">/</span><span class="s3">.15</span><span class="s0">*</span><span class="s3">.5</span><span class="s0">}</span><span class="s2">,.5,.5,0,.5`</span><span class="s0">},</span><span class="s2">&quot;╯&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M.5,0 L.5,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">/</span><span class="s3">.15</span><span class="s0">*</span><span class="s3">.5</span><span class="s0">} </span><span class="s2">C.5,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">/</span><span class="s3">.15</span><span class="s0">*</span><span class="s3">.5</span><span class="s0">}</span><span class="s2">,.5,.5,0,.5`</span><span class="s0">},</span><span class="s2">&quot;╰&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M.5,0 L.5,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">/</span><span class="s3">.15</span><span class="s0">*</span><span class="s3">.5</span><span class="s0">} </span><span class="s2">C.5,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">/</span><span class="s3">.15</span><span class="s0">*</span><span class="s3">.5</span><span class="s0">}</span><span class="s2">,.5,.5,1,.5`</span><span class="s0">}},</span><span class="s1">t</span><span class="s0">.</span><span class="s1">powerlineDefinitions</span><span class="s0">={</span><span class="s2">&quot;&quot;</span><span class="s0">:{</span><span class="s1">d</span><span class="s0">:</span><span class="s2">&quot;M0,0 L1,.5 L0,1&quot;</span><span class="s0">,</span><span class="s1">type</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">rightPadding</span><span class="s0">:</span><span class="s3">2</span><span class="s0">},</span><span class="s2">&quot;&quot;</span><span class="s0">:{</span><span class="s1">d</span><span class="s0">:</span><span class="s2">&quot;M-1,-.5 L1,.5 L-1,1.5&quot;</span><span class="s0">,</span><span class="s1">type</span><span class="s0">:</span><span class="s3">1</span><span class="s0">,</span><span class="s1">leftPadding</span><span class="s0">:</span><span class="s3">1</span><span class="s0">,</span><span class="s1">rightPadding</span><span class="s0">:</span><span class="s3">1</span><span class="s0">},</span><span class="s2">&quot;&quot;</span><span class="s0">:{</span><span class="s1">d</span><span class="s0">:</span><span class="s2">&quot;M1,0 L0,.5 L1,1&quot;</span><span class="s0">,</span><span class="s1">type</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">leftPadding</span><span class="s0">:</span><span class="s3">2</span><span class="s0">},</span><span class="s2">&quot;&quot;</span><span class="s0">:{</span><span class="s1">d</span><span class="s0">:</span><span class="s2">&quot;M2,-.5 L0,.5 L2,1.5&quot;</span><span class="s0">,</span><span class="s1">type</span><span class="s0">:</span><span class="s3">1</span><span class="s0">,</span><span class="s1">leftPadding</span><span class="s0">:</span><span class="s3">1</span><span class="s0">,</span><span class="s1">rightPadding</span><span class="s0">:</span><span class="s3">1</span><span class="s0">},</span><span class="s2">&quot;&quot;</span><span class="s0">:{</span><span class="s1">d</span><span class="s0">:</span><span class="s2">&quot;M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0&quot;</span><span class="s0">,</span><span class="s1">type</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">rightPadding</span><span class="s0">:</span><span class="s3">1</span><span class="s0">},</span><span class="s2">&quot;&quot;</span><span class="s0">:{</span><span class="s1">d</span><span class="s0">:</span><span class="s2">&quot;M.2,1 C.422,1,.8,.826,.78,.5 C.8,.174,0.422,0,.2,0&quot;</span><span class="s0">,</span><span class="s1">type</span><span class="s0">:</span><span class="s3">1</span><span class="s0">,</span><span class="s1">rightPadding</span><span class="s0">:</span><span class="s3">1</span><span class="s0">},</span><span class="s2">&quot;&quot;</span><span class="s0">:{</span><span class="s1">d</span><span class="s0">:</span><span class="s2">&quot;M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0&quot;</span><span class="s0">,</span><span class="s1">type</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">leftPadding</span><span class="s0">:</span><span class="s3">1</span><span class="s0">},</span><span class="s2">&quot;&quot;</span><span class="s0">:{</span><span class="s1">d</span><span class="s0">:</span><span class="s2">&quot;M.8,1 C0.578,1,0.2,.826,.22,.5 C0.2,0.174,0.578,0,0.8,0&quot;</span><span class="s0">,</span><span class="s1">type</span><span class="s0">:</span><span class="s3">1</span><span class="s0">,</span><span class="s1">leftPadding</span><span class="s0">:</span><span class="s3">1</span><span class="s0">},</span><span class="s2">&quot;&quot;</span><span class="s0">:{</span><span class="s1">d</span><span class="s0">:</span><span class="s2">&quot;M-.5,-.5 L1.5,1.5 L-.5,1.5&quot;</span><span class="s0">,</span><span class="s1">type</span><span class="s0">:</span><span class="s3">0</span><span class="s0">},</span><span class="s2">&quot;&quot;</span><span class="s0">:{</span><span class="s1">d</span><span class="s0">:</span><span class="s2">&quot;M-.5,-.5 L1.5,1.5&quot;</span><span class="s0">,</span><span class="s1">type</span><span class="s0">:</span><span class="s3">1</span><span class="s0">,</span><span class="s1">leftPadding</span><span class="s0">:</span><span class="s3">1</span><span class="s0">,</span><span class="s1">rightPadding</span><span class="s0">:</span><span class="s3">1</span><span class="s0">},</span><span class="s2">&quot;&quot;</span><span class="s0">:{</span><span class="s1">d</span><span class="s0">:</span><span class="s2">&quot;M1.5,-.5 L-.5,1.5 L1.5,1.5&quot;</span><span class="s0">,</span><span class="s1">type</span><span class="s0">:</span><span class="s3">0</span><span class="s0">},</span><span class="s2">&quot;&quot;</span><span class="s0">:{</span><span class="s1">d</span><span class="s0">:</span><span class="s2">&quot;M1.5,-.5 L-.5,1.5 L-.5,-.5&quot;</span><span class="s0">,</span><span class="s1">type</span><span class="s0">:</span><span class="s3">0</span><span class="s0">},</span><span class="s2">&quot;&quot;</span><span class="s0">:{</span><span class="s1">d</span><span class="s0">:</span><span class="s2">&quot;M1.5,-.5 L-.5,1.5&quot;</span><span class="s0">,</span><span class="s1">type</span><span class="s0">:</span><span class="s3">1</span><span class="s0">,</span><span class="s1">leftPadding</span><span class="s0">:</span><span class="s3">1</span><span class="s0">,</span><span class="s1">rightPadding</span><span class="s0">:</span><span class="s3">1</span><span class="s0">},</span><span class="s2">&quot;&quot;</span><span class="s0">:{</span><span class="s1">d</span><span class="s0">:</span><span class="s2">&quot;M-.5,-.5 L1.5,1.5 L1.5,-.5&quot;</span><span class="s0">,</span><span class="s1">type</span><span class="s0">:</span><span class="s3">0</span><span class="s0">}},</span><span class="s1">t</span><span class="s0">.</span><span class="s1">powerlineDefinitions</span><span class="s0">[</span><span class="s2">&quot;&quot;</span><span class="s0">]=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">powerlineDefinitions</span><span class="s0">[</span><span class="s2">&quot;&quot;</span><span class="s0">],</span><span class="s1">t</span><span class="s0">.</span><span class="s1">powerlineDefinitions</span><span class="s0">[</span><span class="s2">&quot;&quot;</span><span class="s0">]=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">powerlineDefinitions</span><span class="s0">[</span><span class="s2">&quot;&quot;</span><span class="s0">],</span><span class="s1">t</span><span class="s0">.</span><span class="s1">tryDrawCustomChar</span><span class="s0">=</span><span class="s5">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">l</span><span class="s0">,</span><span class="s1">c</span><span class="s0">,</span><span class="s1">d</span><span class="s0">,</span><span class="s1">_</span><span class="s0">,</span><span class="s1">u</span><span class="s0">){</span><span class="s5">const </span><span class="s1">g</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">blockElementDefinitions</span><span class="s0">[</span><span class="s1">i</span><span class="s0">];</span><span class="s5">if</span><span class="s0">(</span><span class="s1">g</span><span class="s0">)</span><span class="s5">return function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">){</span><span class="s5">for</span><span class="s0">(</span><span class="s5">let </span><span class="s1">n</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">n</span><span class="s0">&lt;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">n</span><span class="s0">++){</span><span class="s5">const </span><span class="s1">a</span><span class="s0">=</span><span class="s1">t</span><span class="s0">[</span><span class="s1">n</span><span class="s0">],</span><span class="s1">h</span><span class="s0">=</span><span class="s1">r</span><span class="s0">/</span><span class="s3">8</span><span class="s0">,</span><span class="s1">l</span><span class="s0">=</span><span class="s1">o</span><span class="s0">/</span><span class="s3">8</span><span class="s0">;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">fillRect</span><span class="s0">(</span><span class="s1">i</span><span class="s0">+</span><span class="s1">a</span><span class="s0">.</span><span class="s1">x</span><span class="s0">*</span><span class="s1">h</span><span class="s0">,</span><span class="s1">s</span><span class="s0">+</span><span class="s1">a</span><span class="s0">.</span><span class="s1">y</span><span class="s0">*</span><span class="s1">l</span><span class="s0">,</span><span class="s1">a</span><span class="s0">.</span><span class="s1">w</span><span class="s0">*</span><span class="s1">h</span><span class="s0">,</span><span class="s1">a</span><span class="s0">.</span><span class="s1">h</span><span class="s0">*</span><span class="s1">l</span><span class="s0">)}}(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">g</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">l</span><span class="s0">,</span><span class="s1">c</span><span class="s0">,</span><span class="s1">d</span><span class="s0">),!</span><span class="s3">0</span><span class="s0">;</span><span class="s5">const </span><span class="s1">f</span><span class="s0">=</span><span class="s1">r</span><span class="s0">[</span><span class="s1">i</span><span class="s0">];</span><span class="s5">if</span><span class="s0">(</span><span class="s1">f</span><span class="s0">)</span><span class="s5">return function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">a</span><span class="s0">){</span><span class="s5">let </span><span class="s1">h</span><span class="s0">=</span><span class="s1">o</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">);</span><span class="s1">h</span><span class="s0">||(</span><span class="s1">h</span><span class="s0">=</span><span class="s5">new </span><span class="s1">Map</span><span class="s0">,</span><span class="s1">o</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">h</span><span class="s0">));</span><span class="s5">const </span><span class="s1">l</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">fillStyle</span><span class="s0">;</span><span class="s5">if</span><span class="s0">(</span><span class="s2">&quot;string&quot;</span><span class="s0">!=</span><span class="s5">typeof </span><span class="s1">l</span><span class="s0">)</span><span class="s5">throw new </span><span class="s1">Error</span><span class="s0">(</span><span class="s2">`Unexpected fillStyle type &quot;</span><span class="s1">$</span><span class="s0">{</span><span class="s1">l</span><span class="s0">}</span><span class="s2">&quot;`</span><span class="s0">);</span><span class="s5">let </span><span class="s1">c</span><span class="s0">=</span><span class="s1">h</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">l</span><span class="s0">);</span><span class="s5">if</span><span class="s0">(!</span><span class="s1">c</span><span class="s0">){</span><span class="s5">const </span><span class="s1">i</span><span class="s0">=</span><span class="s1">t</span><span class="s0">[</span><span class="s3">0</span><span class="s0">].</span><span class="s1">length</span><span class="s0">,</span><span class="s1">r</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">length</span><span class="s0">,</span><span class="s1">o</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">ownerDocument</span><span class="s0">.</span><span class="s1">createElement</span><span class="s0">(</span><span class="s2">&quot;canvas&quot;</span><span class="s0">);</span><span class="s1">o</span><span class="s0">.</span><span class="s1">width</span><span class="s0">=</span><span class="s1">i</span><span class="s0">,</span><span class="s1">o</span><span class="s0">.</span><span class="s1">height</span><span class="s0">=</span><span class="s1">r</span><span class="s0">;</span><span class="s5">const </span><span class="s1">n</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">throwIfFalsy</span><span class="s0">)(</span><span class="s1">o</span><span class="s0">.</span><span class="s1">getContext</span><span class="s0">(</span><span class="s2">&quot;2d&quot;</span><span class="s0">)),</span><span class="s1">a</span><span class="s0">=</span><span class="s5">new </span><span class="s1">ImageData</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">r</span><span class="s0">);</span><span class="s5">let </span><span class="s1">d</span><span class="s0">,</span><span class="s1">_</span><span class="s0">,</span><span class="s1">u</span><span class="s0">,</span><span class="s1">g</span><span class="s0">;</span><span class="s5">if</span><span class="s0">(</span><span class="s1">l</span><span class="s0">.</span><span class="s1">startsWith</span><span class="s0">(</span><span class="s2">&quot;#&quot;</span><span class="s0">))</span><span class="s1">d</span><span class="s0">=</span><span class="s1">parseInt</span><span class="s0">(</span><span class="s1">l</span><span class="s0">.</span><span class="s1">slice</span><span class="s0">(</span><span class="s3">1</span><span class="s0">,</span><span class="s3">3</span><span class="s0">),</span><span class="s3">16</span><span class="s0">),</span><span class="s1">_</span><span class="s0">=</span><span class="s1">parseInt</span><span class="s0">(</span><span class="s1">l</span><span class="s0">.</span><span class="s1">slice</span><span class="s0">(</span><span class="s3">3</span><span class="s0">,</span><span class="s3">5</span><span class="s0">),</span><span class="s3">16</span><span class="s0">),</span><span class="s1">u</span><span class="s0">=</span><span class="s1">parseInt</span><span class="s0">(</span><span class="s1">l</span><span class="s0">.</span><span class="s1">slice</span><span class="s0">(</span><span class="s3">5</span><span class="s0">,</span><span class="s3">7</span><span class="s0">),</span><span class="s3">16</span><span class="s0">),</span><span class="s1">g</span><span class="s0">=</span><span class="s1">l</span><span class="s0">.</span><span class="s1">length</span><span class="s0">&gt;</span><span class="s3">7</span><span class="s0">&amp;&amp;</span><span class="s1">parseInt</span><span class="s0">(</span><span class="s1">l</span><span class="s0">.</span><span class="s1">slice</span><span class="s0">(</span><span class="s3">7</span><span class="s0">,</span><span class="s3">9</span><span class="s0">),</span><span class="s3">16</span><span class="s0">)||</span><span class="s3">1</span><span class="s0">;</span><span class="s5">else</span><span class="s0">{</span><span class="s5">if</span><span class="s0">(!</span><span class="s1">l</span><span class="s0">.</span><span class="s1">startsWith</span><span class="s0">(</span><span class="s2">&quot;rgba&quot;</span><span class="s0">))</span><span class="s5">throw new </span><span class="s1">Error</span><span class="s0">(</span><span class="s2">`Unexpected fillStyle color format &quot;</span><span class="s1">$</span><span class="s0">{</span><span class="s1">l</span><span class="s0">}</span><span class="s2">&quot; when drawing pattern glyph`</span><span class="s0">);[</span><span class="s1">d</span><span class="s0">,</span><span class="s1">_</span><span class="s0">,</span><span class="s1">u</span><span class="s0">,</span><span class="s1">g</span><span class="s0">]=</span><span class="s1">l</span><span class="s0">.</span><span class="s1">substring</span><span class="s0">(</span><span class="s3">5</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">length</span><span class="s0">-</span><span class="s3">1</span><span class="s0">).</span><span class="s1">split</span><span class="s0">(</span><span class="s2">&quot;,&quot;</span><span class="s0">).</span><span class="s1">map</span><span class="s0">((</span><span class="s1">e</span><span class="s0">=&gt;</span><span class="s1">parseFloat</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)))}</span><span class="s5">for</span><span class="s0">(</span><span class="s5">let </span><span class="s1">e</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">e</span><span class="s0">&lt;</span><span class="s1">r</span><span class="s0">;</span><span class="s1">e</span><span class="s0">++)</span><span class="s5">for</span><span class="s0">(</span><span class="s5">let </span><span class="s1">s</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">s</span><span class="s0">&lt;</span><span class="s1">i</span><span class="s0">;</span><span class="s1">s</span><span class="s0">++)</span><span class="s1">a</span><span class="s0">.</span><span class="s1">data</span><span class="s0">[</span><span class="s3">4</span><span class="s0">*(</span><span class="s1">e</span><span class="s0">*</span><span class="s1">i</span><span class="s0">+</span><span class="s1">s</span><span class="s0">)]=</span><span class="s1">d</span><span class="s0">,</span><span class="s1">a</span><span class="s0">.</span><span class="s1">data</span><span class="s0">[</span><span class="s3">4</span><span class="s0">*(</span><span class="s1">e</span><span class="s0">*</span><span class="s1">i</span><span class="s0">+</span><span class="s1">s</span><span class="s0">)+</span><span class="s3">1</span><span class="s0">]=</span><span class="s1">_</span><span class="s0">,</span><span class="s1">a</span><span class="s0">.</span><span class="s1">data</span><span class="s0">[</span><span class="s3">4</span><span class="s0">*(</span><span class="s1">e</span><span class="s0">*</span><span class="s1">i</span><span class="s0">+</span><span class="s1">s</span><span class="s0">)+</span><span class="s3">2</span><span class="s0">]=</span><span class="s1">u</span><span class="s0">,</span><span class="s1">a</span><span class="s0">.</span><span class="s1">data</span><span class="s0">[</span><span class="s3">4</span><span class="s0">*(</span><span class="s1">e</span><span class="s0">*</span><span class="s1">i</span><span class="s0">+</span><span class="s1">s</span><span class="s0">)+</span><span class="s3">3</span><span class="s0">]=</span><span class="s1">t</span><span class="s0">[</span><span class="s1">e</span><span class="s0">][</span><span class="s1">s</span><span class="s0">]*(</span><span class="s3">255</span><span class="s0">*</span><span class="s1">g</span><span class="s0">);</span><span class="s1">n</span><span class="s0">.</span><span class="s1">putImageData</span><span class="s0">(</span><span class="s1">a</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">),</span><span class="s1">c</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">throwIfFalsy</span><span class="s0">)(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">createPattern</span><span class="s0">(</span><span class="s1">o</span><span class="s0">,</span><span class="s5">null</span><span class="s0">)),</span><span class="s1">h</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">l</span><span class="s0">,</span><span class="s1">c</span><span class="s0">)}</span><span class="s1">e</span><span class="s0">.</span><span class="s1">fillStyle</span><span class="s0">=</span><span class="s1">c</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">fillRect</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">a</span><span class="s0">)}(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">f</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">l</span><span class="s0">,</span><span class="s1">c</span><span class="s0">,</span><span class="s1">d</span><span class="s0">),!</span><span class="s3">0</span><span class="s0">;</span><span class="s5">const </span><span class="s1">v</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">boxDrawingDefinitions</span><span class="s0">[</span><span class="s1">i</span><span class="s0">];</span><span class="s5">if</span><span class="s0">(</span><span class="s1">v</span><span class="s0">)</span><span class="s5">return function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">n</span><span class="s0">){</span><span class="s1">e</span><span class="s0">.</span><span class="s1">strokeStyle</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">fillStyle</span><span class="s0">;</span><span class="s5">for</span><span class="s0">(</span><span class="s5">const</span><span class="s0">[</span><span class="s1">l</span><span class="s0">,</span><span class="s1">c</span><span class="s0">]</span><span class="s1">of Object</span><span class="s0">.</span><span class="s1">entries</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)){</span><span class="s5">let </span><span class="s1">t</span><span class="s0">;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">beginPath</span><span class="s0">(),</span><span class="s1">e</span><span class="s0">.</span><span class="s1">lineWidth</span><span class="s0">=</span><span class="s1">n</span><span class="s0">*</span><span class="s1">Number</span><span class="s0">.</span><span class="s1">parseInt</span><span class="s0">(</span><span class="s1">l</span><span class="s0">),</span><span class="s1">t</span><span class="s0">=</span><span class="s2">&quot;function&quot;</span><span class="s0">==</span><span class="s5">typeof </span><span class="s1">c</span><span class="s0">?</span><span class="s1">c</span><span class="s0">(</span><span class="s3">.15</span><span class="s0">,</span><span class="s3">.15</span><span class="s0">/</span><span class="s1">o</span><span class="s0">*</span><span class="s1">r</span><span class="s0">):</span><span class="s1">c</span><span class="s0">;</span><span class="s5">for</span><span class="s0">(</span><span class="s5">const </span><span class="s1">l of t</span><span class="s0">.</span><span class="s1">split</span><span class="s0">(</span><span class="s2">&quot; &quot;</span><span class="s0">)){</span><span class="s5">const </span><span class="s1">t</span><span class="s0">=</span><span class="s1">l</span><span class="s0">[</span><span class="s3">0</span><span class="s0">],</span><span class="s1">c</span><span class="s0">=</span><span class="s1">a</span><span class="s0">[</span><span class="s1">t</span><span class="s0">];</span><span class="s5">if</span><span class="s0">(!</span><span class="s1">c</span><span class="s0">){</span><span class="s1">console</span><span class="s0">.</span><span class="s1">error</span><span class="s0">(</span><span class="s2">`Could not find drawing instructions for &quot;</span><span class="s1">$</span><span class="s0">{</span><span class="s1">t</span><span class="s0">}</span><span class="s2">&quot;`</span><span class="s0">);</span><span class="s5">continue</span><span class="s0">}</span><span class="s5">const </span><span class="s1">d</span><span class="s0">=</span><span class="s1">l</span><span class="s0">.</span><span class="s1">substring</span><span class="s0">(</span><span class="s3">1</span><span class="s0">).</span><span class="s1">split</span><span class="s0">(</span><span class="s2">&quot;,&quot;</span><span class="s0">);</span><span class="s1">d</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]&amp;&amp;</span><span class="s1">d</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]&amp;&amp;</span><span class="s1">c</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">h</span><span class="s0">(</span><span class="s1">d</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,!</span><span class="s3">0</span><span class="s0">,</span><span class="s1">n</span><span class="s0">))}</span><span class="s1">e</span><span class="s0">.</span><span class="s1">stroke</span><span class="s0">(),</span><span class="s1">e</span><span class="s0">.</span><span class="s1">closePath</span><span class="s0">()}}(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">v</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">l</span><span class="s0">,</span><span class="s1">c</span><span class="s0">,</span><span class="s1">d</span><span class="s0">,</span><span class="s1">u</span><span class="s0">),!</span><span class="s3">0</span><span class="s0">;</span><span class="s5">const </span><span class="s1">C</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">powerlineDefinitions</span><span class="s0">[</span><span class="s1">i</span><span class="s0">];</span><span class="s5">return</span><span class="s0">!!</span><span class="s1">C</span><span class="s0">&amp;&amp;(</span><span class="s5">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">l</span><span class="s0">){</span><span class="s5">const </span><span class="s1">c</span><span class="s0">=</span><span class="s5">new </span><span class="s1">Path2D</span><span class="s0">;</span><span class="s1">c</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">),</span><span class="s1">e</span><span class="s0">.</span><span class="s1">clip</span><span class="s0">(</span><span class="s1">c</span><span class="s0">),</span><span class="s1">e</span><span class="s0">.</span><span class="s1">beginPath</span><span class="s0">();</span><span class="s5">const </span><span class="s1">d</span><span class="s0">=</span><span class="s1">n</span><span class="s0">/</span><span class="s3">12</span><span class="s0">;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">lineWidth</span><span class="s0">=</span><span class="s1">l</span><span class="s0">*</span><span class="s1">d</span><span class="s0">;</span><span class="s5">for</span><span class="s0">(</span><span class="s5">const </span><span class="s1">n of t</span><span class="s0">.</span><span class="s1">d</span><span class="s0">.</span><span class="s1">split</span><span class="s0">(</span><span class="s2">&quot; &quot;</span><span class="s0">)){</span><span class="s5">const </span><span class="s1">c</span><span class="s0">=</span><span class="s1">n</span><span class="s0">[</span><span class="s3">0</span><span class="s0">],</span><span class="s1">_</span><span class="s0">=</span><span class="s1">a</span><span class="s0">[</span><span class="s1">c</span><span class="s0">];</span><span class="s5">if</span><span class="s0">(!</span><span class="s1">_</span><span class="s0">){</span><span class="s1">console</span><span class="s0">.</span><span class="s1">error</span><span class="s0">(</span><span class="s2">`Could not find drawing instructions for &quot;</span><span class="s1">$</span><span class="s0">{</span><span class="s1">c</span><span class="s0">}</span><span class="s2">&quot;`</span><span class="s0">);</span><span class="s5">continue</span><span class="s0">}</span><span class="s5">const </span><span class="s1">u</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">substring</span><span class="s0">(</span><span class="s3">1</span><span class="s0">).</span><span class="s1">split</span><span class="s0">(</span><span class="s2">&quot;,&quot;</span><span class="s0">);</span><span class="s1">u</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]&amp;&amp;</span><span class="s1">u</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]&amp;&amp;</span><span class="s1">_</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">h</span><span class="s0">(</span><span class="s1">u</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,!</span><span class="s3">1</span><span class="s0">,</span><span class="s1">l</span><span class="s0">,(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">leftPadding</span><span class="s0">??</span><span class="s3">0</span><span class="s0">)*(</span><span class="s1">d</span><span class="s0">/</span><span class="s3">2</span><span class="s0">),(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rightPadding</span><span class="s0">??</span><span class="s3">0</span><span class="s0">)*(</span><span class="s1">d</span><span class="s0">/</span><span class="s3">2</span><span class="s0">)))}</span><span class="s3">1</span><span class="s0">===</span><span class="s1">t</span><span class="s0">.</span><span class="s1">type</span><span class="s0">?(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">strokeStyle</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">fillStyle</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">stroke</span><span class="s0">()):</span><span class="s1">e</span><span class="s0">.</span><span class="s1">fill</span><span class="s0">(),</span><span class="s1">e</span><span class="s0">.</span><span class="s1">closePath</span><span class="s0">()}(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">C</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">l</span><span class="s0">,</span><span class="s1">c</span><span class="s0">,</span><span class="s1">d</span><span class="s0">,</span><span class="s1">_</span><span class="s0">,</span><span class="s1">u</span><span class="s0">),!</span><span class="s3">0</span><span class="s0">)};</span><span class="s5">const </span><span class="s1">o</span><span class="s0">=</span><span class="s5">new </span><span class="s1">Map</span><span class="s0">;</span><span class="s5">function </span><span class="s1">n</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">){</span><span class="s5">return </span><span class="s1">Math</span><span class="s0">.</span><span class="s1">max</span><span class="s0">(</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">min</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">),</span><span class="s1">i</span><span class="s0">)}</span><span class="s5">const </span><span class="s1">a</span><span class="s0">={</span><span class="s1">C</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">bezierCurveTo</span><span class="s0">(</span><span class="s1">t</span><span class="s0">[</span><span class="s3">0</span><span class="s0">],</span><span class="s1">t</span><span class="s0">[</span><span class="s3">1</span><span class="s0">],</span><span class="s1">t</span><span class="s0">[</span><span class="s3">2</span><span class="s0">],</span><span class="s1">t</span><span class="s0">[</span><span class="s3">3</span><span class="s0">],</span><span class="s1">t</span><span class="s0">[</span><span class="s3">4</span><span class="s0">],</span><span class="s1">t</span><span class="s0">[</span><span class="s3">5</span><span class="s0">]),</span><span class="s1">L</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">lineTo</span><span class="s0">(</span><span class="s1">t</span><span class="s0">[</span><span class="s3">0</span><span class="s0">],</span><span class="s1">t</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]),</span><span class="s1">M</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">moveTo</span><span class="s0">(</span><span class="s1">t</span><span class="s0">[</span><span class="s3">0</span><span class="s0">],</span><span class="s1">t</span><span class="s0">[</span><span class="s3">1</span><span class="s0">])};</span><span class="s5">function </span><span class="s1">h</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">h</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">=</span><span class="s3">0</span><span class="s0">){</span><span class="s5">const </span><span class="s1">c</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">map</span><span class="s0">((</span><span class="s1">e</span><span class="s0">=&gt;</span><span class="s1">parseFloat</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)||</span><span class="s1">parseInt</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)));</span><span class="s5">if</span><span class="s0">(</span><span class="s1">c</span><span class="s0">.</span><span class="s1">length</span><span class="s0">&lt;</span><span class="s3">2</span><span class="s0">)</span><span class="s5">throw new </span><span class="s1">Error</span><span class="s0">(</span><span class="s2">&quot;Too few arguments for instruction&quot;</span><span class="s0">);</span><span class="s5">for</span><span class="s0">(</span><span class="s5">let </span><span class="s1">e</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">e</span><span class="s0">&lt;</span><span class="s1">c</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">e</span><span class="s0">+=</span><span class="s3">2</span><span class="s0">)</span><span class="s1">c</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]*=</span><span class="s1">t</span><span class="s0">-</span><span class="s1">h</span><span class="s0">*</span><span class="s1">a</span><span class="s0">-</span><span class="s1">l</span><span class="s0">*</span><span class="s1">a</span><span class="s0">,</span><span class="s1">o</span><span class="s0">&amp;&amp;</span><span class="s3">0</span><span class="s0">!==</span><span class="s1">c</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]&amp;&amp;(</span><span class="s1">c</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]=</span><span class="s1">n</span><span class="s0">(</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">round</span><span class="s0">(</span><span class="s1">c</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]+</span><span class="s3">.5</span><span class="s0">)-</span><span class="s3">.5</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s3">0</span><span class="s0">)),</span><span class="s1">c</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]+=</span><span class="s1">s</span><span class="s0">+</span><span class="s1">h</span><span class="s0">*</span><span class="s1">a</span><span class="s0">;</span><span class="s5">for</span><span class="s0">(</span><span class="s5">let </span><span class="s1">e</span><span class="s0">=</span><span class="s3">1</span><span class="s0">;</span><span class="s1">e</span><span class="s0">&lt;</span><span class="s1">c</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">e</span><span class="s0">+=</span><span class="s3">2</span><span class="s0">)</span><span class="s1">c</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]*=</span><span class="s1">i</span><span class="s0">,</span><span class="s1">o</span><span class="s0">&amp;&amp;</span><span class="s3">0</span><span class="s0">!==</span><span class="s1">c</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]&amp;&amp;(</span><span class="s1">c</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]=</span><span class="s1">n</span><span class="s0">(</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">round</span><span class="s0">(</span><span class="s1">c</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]+</span><span class="s3">.5</span><span class="s0">)-</span><span class="s3">.5</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s3">0</span><span class="s0">)),</span><span class="s1">c</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]+=</span><span class="s1">r</span><span class="s0">;</span><span class="s5">return </span><span class="s1">c</span><span class="s0">}},</span><span class="s3">56</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">)=&gt;{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">observeDevicePixelDimensions</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">;</span><span class="s5">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">859</span><span class="s0">);</span><span class="s1">t</span><span class="s0">.</span><span class="s1">observeDevicePixelDimensions</span><span class="s0">=</span><span class="s5">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s5">let </span><span class="s1">r</span><span class="s0">=</span><span class="s5">new </span><span class="s1">t</span><span class="s0">.</span><span class="s1">ResizeObserver</span><span class="s0">((</span><span class="s1">t</span><span class="s0">=&gt;{</span><span class="s5">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">find</span><span class="s0">((</span><span class="s1">t</span><span class="s0">=&gt;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">target</span><span class="s0">===</span><span class="s1">e</span><span class="s0">));</span><span class="s5">if</span><span class="s0">(!</span><span class="s1">s</span><span class="s0">)</span><span class="s5">return</span><span class="s0">;</span><span class="s5">if</span><span class="s0">(!(</span><span class="s2">&quot;devicePixelContentBoxSize&quot;</span><span class="s5">in </span><span class="s1">s</span><span class="s0">))</span><span class="s5">return </span><span class="s1">r</span><span class="s0">?.</span><span class="s1">disconnect</span><span class="s0">(),</span><span class="s5">void</span><span class="s0">(</span><span class="s1">r</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">);</span><span class="s5">const </span><span class="s1">o</span><span class="s0">=</span><span class="s1">s</span><span class="s0">.</span><span class="s1">devicePixelContentBoxSize</span><span class="s0">[</span><span class="s3">0</span><span class="s0">].</span><span class="s1">inlineSize</span><span class="s0">,</span><span class="s1">n</span><span class="s0">=</span><span class="s1">s</span><span class="s0">.</span><span class="s1">devicePixelContentBoxSize</span><span class="s0">[</span><span class="s3">0</span><span class="s0">].</span><span class="s1">blockSize</span><span class="s0">;</span><span class="s1">o</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">&amp;&amp;</span><span class="s1">n</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">&amp;&amp;</span><span class="s1">i</span><span class="s0">(</span><span class="s1">o</span><span class="s0">,</span><span class="s1">n</span><span class="s0">)}));</span><span class="s5">try</span><span class="s0">{</span><span class="s1">r</span><span class="s0">.</span><span class="s1">observe</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,{</span><span class="s1">box</span><span class="s0">:[</span><span class="s2">&quot;device-pixel-content-box&quot;</span><span class="s0">]})}</span><span class="s5">catch</span><span class="s0">{</span><span class="s1">r</span><span class="s0">.</span><span class="s1">disconnect</span><span class="s0">(),</span><span class="s1">r</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">}</span><span class="s5">return</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">toDisposable</span><span class="s0">)((()=&gt;</span><span class="s1">r</span><span class="s0">?.</span><span class="s1">disconnect</span><span class="s0">()))}},</span><span class="s3">374</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;{</span><span class="s5">function </span><span class="s1">i</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">return </span><span class="s3">57508</span><span class="s0">&lt;=</span><span class="s1">e</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">&lt;=</span><span class="s3">57558</span><span class="s0">}</span><span class="s5">function </span><span class="s1">s</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">return </span><span class="s1">e</span><span class="s0">&gt;=</span><span class="s3">128512</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">&lt;=</span><span class="s3">128591</span><span class="s0">||</span><span class="s1">e</span><span class="s0">&gt;=</span><span class="s3">127744</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">&lt;=</span><span class="s3">128511</span><span class="s0">||</span><span class="s1">e</span><span class="s0">&gt;=</span><span class="s3">128640</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">&lt;=</span><span class="s3">128767</span><span class="s0">||</span><span class="s1">e</span><span class="s0">&gt;=</span><span class="s3">9728</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">&lt;=</span><span class="s3">9983</span><span class="s0">||</span><span class="s1">e</span><span class="s0">&gt;=</span><span class="s3">9984</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">&lt;=</span><span class="s3">10175</span><span class="s0">||</span><span class="s1">e</span><span class="s0">&gt;=</span><span class="s3">65024</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">&lt;=</span><span class="s3">65039</span><span class="s0">||</span><span class="s1">e</span><span class="s0">&gt;=</span><span class="s3">129280</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">&lt;=</span><span class="s3">129535</span><span class="s0">||</span><span class="s1">e</span><span class="s0">&gt;=</span><span class="s3">127462</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">&lt;=</span><span class="s3">127487</span><span class="s0">}</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">computeNextVariantOffset</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">createRenderDimensions</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">treatGlyphAsBackgroundColor</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">allowRescaling</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isEmoji</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isRestrictedPowerlineGlyph</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isPowerlineGlyph</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">throwIfFalsy</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">throwIfFalsy</span><span class="s0">=</span><span class="s5">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">if</span><span class="s0">(!</span><span class="s1">e</span><span class="s0">)</span><span class="s5">throw new </span><span class="s1">Error</span><span class="s0">(</span><span class="s2">&quot;value must not be falsy&quot;</span><span class="s0">);</span><span class="s5">return </span><span class="s1">e</span><span class="s0">},</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isPowerlineGlyph</span><span class="s0">=</span><span class="s1">i</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isRestrictedPowerlineGlyph</span><span class="s0">=</span><span class="s5">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">return </span><span class="s3">57520</span><span class="s0">&lt;=</span><span class="s1">e</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">&lt;=</span><span class="s3">57527</span><span class="s0">},</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isEmoji</span><span class="s0">=</span><span class="s1">s</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">allowRescaling</span><span class="s0">=</span><span class="s5">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">){</span><span class="s5">return </span><span class="s3">1</span><span class="s0">===</span><span class="s1">t</span><span class="s0">&amp;&amp;</span><span class="s1">r</span><span class="s0">&gt;</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">ceil</span><span class="s0">(</span><span class="s3">1.5</span><span class="s0">*</span><span class="s1">o</span><span class="s0">)&amp;&amp;</span><span class="s5">void </span><span class="s3">0</span><span class="s0">!==</span><span class="s1">e</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">&gt;</span><span class="s3">255</span><span class="s0">&amp;&amp;!</span><span class="s1">s</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)&amp;&amp;!</span><span class="s1">i</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)&amp;&amp;!</span><span class="s5">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">return </span><span class="s3">57344</span><span class="s0">&lt;=</span><span class="s1">e</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">&lt;=</span><span class="s3">63743</span><span class="s0">}(</span><span class="s1">e</span><span class="s0">)},</span><span class="s1">t</span><span class="s0">.</span><span class="s1">treatGlyphAsBackgroundColor</span><span class="s0">=</span><span class="s5">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">return </span><span class="s1">i</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)||</span><span class="s5">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">return </span><span class="s3">9472</span><span class="s0">&lt;=</span><span class="s1">e</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">&lt;=</span><span class="s3">9631</span><span class="s0">}(</span><span class="s1">e</span><span class="s0">)},</span><span class="s1">t</span><span class="s0">.</span><span class="s1">createRenderDimensions</span><span class="s0">=</span><span class="s5">function</span><span class="s0">(){</span><span class="s5">return</span><span class="s0">{</span><span class="s1">css</span><span class="s0">:{</span><span class="s1">canvas</span><span class="s0">:{</span><span class="s1">width</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">height</span><span class="s0">:</span><span class="s3">0</span><span class="s0">},</span><span class="s1">cell</span><span class="s0">:{</span><span class="s1">width</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">height</span><span class="s0">:</span><span class="s3">0</span><span class="s0">}},</span><span class="s1">device</span><span class="s0">:{</span><span class="s1">canvas</span><span class="s0">:{</span><span class="s1">width</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">height</span><span class="s0">:</span><span class="s3">0</span><span class="s0">},</span><span class="s1">cell</span><span class="s0">:{</span><span class="s1">width</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">height</span><span class="s0">:</span><span class="s3">0</span><span class="s0">},</span><span class="s1">char</span><span class="s0">:{</span><span class="s1">width</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">height</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">left</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">top</span><span class="s0">:</span><span class="s3">0</span><span class="s0">}}}},</span><span class="s1">t</span><span class="s0">.</span><span class="s1">computeNextVariantOffset</span><span class="s0">=</span><span class="s5">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">){</span><span class="s5">return</span><span class="s0">(</span><span class="s1">e</span><span class="s0">-(</span><span class="s3">2</span><span class="s0">*</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">round</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)-</span><span class="s1">i</span><span class="s0">))%(</span><span class="s3">2</span><span class="s0">*</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">round</span><span class="s0">(</span><span class="s1">t</span><span class="s0">))}},</span><span class="s3">296</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">createSelectionRenderModel</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">;</span><span class="s5">class </span><span class="s1">i</span><span class="s0">{</span><span class="s1">constructor</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">clear</span><span class="s0">()}</span><span class="s1">clear</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">hasSelection</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">columnSelectMode</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">viewportStartRow</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">viewportEndRow</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">viewportCappedStartRow</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">viewportCappedEndRow</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">startCol</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">endCol</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">selectionStart</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">selectionEnd</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">}</span><span class="s1">update</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">){</span><span class="s5">if</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">selectionStart</span><span class="s0">=</span><span class="s1">t</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">selectionEnd</span><span class="s0">=</span><span class="s1">i</span><span class="s0">,!</span><span class="s1">t</span><span class="s0">||!</span><span class="s1">i</span><span class="s0">||</span><span class="s1">t</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]===</span><span class="s1">i</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]&amp;&amp;</span><span class="s1">t</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]===</span><span class="s1">i</span><span class="s0">[</span><span class="s3">1</span><span class="s0">])</span><span class="s5">return void this</span><span class="s0">.</span><span class="s1">clear</span><span class="s0">();</span><span class="s5">const </span><span class="s1">r</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">buffers</span><span class="s0">.</span><span class="s1">active</span><span class="s0">.</span><span class="s1">ydisp</span><span class="s0">,</span><span class="s1">o</span><span class="s0">=</span><span class="s1">t</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]-</span><span class="s1">r</span><span class="s0">,</span><span class="s1">n</span><span class="s0">=</span><span class="s1">i</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]-</span><span class="s1">r</span><span class="s0">,</span><span class="s1">a</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">max</span><span class="s0">(</span><span class="s1">o</span><span class="s0">,</span><span class="s3">0</span><span class="s0">),</span><span class="s1">h</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">min</span><span class="s0">(</span><span class="s1">n</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">rows</span><span class="s0">-</span><span class="s3">1</span><span class="s0">);</span><span class="s1">a</span><span class="s0">&gt;=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">rows</span><span class="s0">||</span><span class="s1">h</span><span class="s0">&lt;</span><span class="s3">0</span><span class="s0">?</span><span class="s5">this</span><span class="s0">.</span><span class="s1">clear</span><span class="s0">():(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">hasSelection</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">columnSelectMode</span><span class="s0">=</span><span class="s1">s</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">viewportStartRow</span><span class="s0">=</span><span class="s1">o</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">viewportEndRow</span><span class="s0">=</span><span class="s1">n</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">viewportCappedStartRow</span><span class="s0">=</span><span class="s1">a</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">viewportCappedEndRow</span><span class="s0">=</span><span class="s1">h</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">startCol</span><span class="s0">=</span><span class="s1">t</span><span class="s0">[</span><span class="s3">0</span><span class="s0">],</span><span class="s5">this</span><span class="s0">.</span><span class="s1">endCol</span><span class="s0">=</span><span class="s1">i</span><span class="s0">[</span><span class="s3">0</span><span class="s0">])}</span><span class="s1">isCellSelected</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s5">return</span><span class="s0">!!</span><span class="s5">this</span><span class="s0">.</span><span class="s1">hasSelection</span><span class="s0">&amp;&amp;(</span><span class="s1">i</span><span class="s0">-=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">buffer</span><span class="s0">.</span><span class="s1">active</span><span class="s0">.</span><span class="s1">viewportY</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">columnSelectMode</span><span class="s0">?</span><span class="s5">this</span><span class="s0">.</span><span class="s1">startCol</span><span class="s0">&lt;=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">endCol</span><span class="s0">?</span><span class="s1">t</span><span class="s0">&gt;=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">startCol</span><span class="s0">&amp;&amp;</span><span class="s1">i</span><span class="s0">&gt;=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">viewportCappedStartRow</span><span class="s0">&amp;&amp;</span><span class="s1">t</span><span class="s0">&lt;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">endCol</span><span class="s0">&amp;&amp;</span><span class="s1">i</span><span class="s0">&lt;=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">viewportCappedEndRow</span><span class="s0">:</span><span class="s1">t</span><span class="s0">&lt;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">startCol</span><span class="s0">&amp;&amp;</span><span class="s1">i</span><span class="s0">&gt;=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">viewportCappedStartRow</span><span class="s0">&amp;&amp;</span><span class="s1">t</span><span class="s0">&gt;=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">endCol</span><span class="s0">&amp;&amp;</span><span class="s1">i</span><span class="s0">&lt;=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">viewportCappedEndRow</span><span class="s0">:</span><span class="s1">i</span><span class="s0">&gt;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">viewportStartRow</span><span class="s0">&amp;&amp;</span><span class="s1">i</span><span class="s0">&lt;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">viewportEndRow</span><span class="s0">||</span><span class="s5">this</span><span class="s0">.</span><span class="s1">viewportStartRow</span><span class="s0">===</span><span class="s5">this</span><span class="s0">.</span><span class="s1">viewportEndRow</span><span class="s0">&amp;&amp;</span><span class="s1">i</span><span class="s0">===</span><span class="s5">this</span><span class="s0">.</span><span class="s1">viewportStartRow</span><span class="s0">&amp;&amp;</span><span class="s1">t</span><span class="s0">&gt;=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">startCol</span><span class="s0">&amp;&amp;</span><span class="s1">t</span><span class="s0">&lt;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">endCol</span><span class="s0">||</span><span class="s5">this</span><span class="s0">.</span><span class="s1">viewportStartRow</span><span class="s0">&lt;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">viewportEndRow</span><span class="s0">&amp;&amp;</span><span class="s1">i</span><span class="s0">===</span><span class="s5">this</span><span class="s0">.</span><span class="s1">viewportEndRow</span><span class="s0">&amp;&amp;</span><span class="s1">t</span><span class="s0">&lt;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">endCol</span><span class="s0">||</span><span class="s5">this</span><span class="s0">.</span><span class="s1">viewportStartRow</span><span class="s0">&lt;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">viewportEndRow</span><span class="s0">&amp;&amp;</span><span class="s1">i</span><span class="s0">===</span><span class="s5">this</span><span class="s0">.</span><span class="s1">viewportStartRow</span><span class="s0">&amp;&amp;</span><span class="s1">t</span><span class="s0">&gt;=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">startCol</span><span class="s0">)}}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">createSelectionRenderModel</span><span class="s0">=</span><span class="s5">function</span><span class="s0">(){</span><span class="s5">return new </span><span class="s1">i</span><span class="s0">}},</span><span class="s3">509</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">)=&gt;{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">TextureAtlas</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">;</span><span class="s5">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">237</span><span class="s0">),</span><span class="s1">r</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">860</span><span class="s0">),</span><span class="s1">o</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">374</span><span class="s0">),</span><span class="s1">n</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">160</span><span class="s0">),</span><span class="s1">a</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">345</span><span class="s0">),</span><span class="s1">h</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">485</span><span class="s0">),</span><span class="s1">l</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">385</span><span class="s0">),</span><span class="s1">c</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">147</span><span class="s0">),</span><span class="s1">d</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">855</span><span class="s0">),</span><span class="s1">_</span><span class="s0">={</span><span class="s1">texturePage</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">texturePosition</span><span class="s0">:{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">},</span><span class="s1">texturePositionClipSpace</span><span class="s0">:{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">},</span><span class="s1">offset</span><span class="s0">:{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">},</span><span class="s1">size</span><span class="s0">:{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">},</span><span class="s1">sizeClipSpace</span><span class="s0">:{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">}};</span><span class="s5">let </span><span class="s1">u</span><span class="s0">;</span><span class="s5">class </span><span class="s1">g</span><span class="s0">{</span><span class="s1">get pages</span><span class="s0">(){</span><span class="s5">return this</span><span class="s0">.</span><span class="s1">_pages</span><span class="s0">}</span><span class="s1">constructor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_document</span><span class="s0">=</span><span class="s1">e</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">=</span><span class="s1">t</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_unicodeService</span><span class="s0">=</span><span class="s1">i</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_didWarmUp</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_cacheMap</span><span class="s0">=</span><span class="s5">new </span><span class="s1">h</span><span class="s0">.</span><span class="s1">FourKeyMap</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_cacheMapCombined</span><span class="s0">=</span><span class="s5">new </span><span class="s1">h</span><span class="s0">.</span><span class="s1">FourKeyMap</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_pages</span><span class="s0">=[],</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_activePages</span><span class="s0">=[],</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_workBoundingBox</span><span class="s0">={</span><span class="s1">top</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">left</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">bottom</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">right</span><span class="s0">:</span><span class="s3">0</span><span class="s0">},</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_workAttributeData</span><span class="s0">=</span><span class="s5">new </span><span class="s1">c</span><span class="s0">.</span><span class="s1">AttributeData</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_textureSize</span><span class="s0">=</span><span class="s3">512</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_onAddTextureAtlasCanvas</span><span class="s0">=</span><span class="s5">new </span><span class="s1">a</span><span class="s0">.</span><span class="s1">EventEmitter</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">onAddTextureAtlasCanvas</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_onAddTextureAtlasCanvas</span><span class="s0">.</span><span class="s1">event</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_onRemoveTextureAtlasCanvas</span><span class="s0">=</span><span class="s5">new </span><span class="s1">a</span><span class="s0">.</span><span class="s1">EventEmitter</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">onRemoveTextureAtlasCanvas</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_onRemoveTextureAtlasCanvas</span><span class="s0">.</span><span class="s1">event</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_requestClearModel</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_createNewPage</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCanvas</span><span class="s0">=</span><span class="s1">C</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s3">4</span><span class="s0">*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCellWidth</span><span class="s0">+</span><span class="s3">4</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCellHeight</span><span class="s0">+</span><span class="s3">4</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">o</span><span class="s0">.</span><span class="s1">throwIfFalsy</span><span class="s0">)(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCanvas</span><span class="s0">.</span><span class="s1">getContext</span><span class="s0">(</span><span class="s2">&quot;2d&quot;</span><span class="s0">,{</span><span class="s1">alpha</span><span class="s0">:</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">allowTransparency</span><span class="s0">,</span><span class="s1">willReadFrequently</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}))}</span><span class="s1">dispose</span><span class="s0">(){</span><span class="s5">for</span><span class="s0">(</span><span class="s5">const </span><span class="s1">e of </span><span class="s5">this</span><span class="s0">.</span><span class="s1">pages</span><span class="s0">)</span><span class="s1">e</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">remove</span><span class="s0">();</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_onAddTextureAtlasCanvas</span><span class="s0">.</span><span class="s1">dispose</span><span class="s0">()}</span><span class="s1">warmUp</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_didWarmUp</span><span class="s0">||(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_doWarmUp</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_didWarmUp</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">)}</span><span class="s1">_doWarmUp</span><span class="s0">(){</span><span class="s5">const </span><span class="s1">e</span><span class="s0">=</span><span class="s5">new </span><span class="s1">l</span><span class="s0">.</span><span class="s1">IdleTaskQueue</span><span class="s0">;</span><span class="s5">for</span><span class="s0">(</span><span class="s5">let </span><span class="s1">t</span><span class="s0">=</span><span class="s3">33</span><span class="s0">;</span><span class="s1">t</span><span class="s0">&lt;</span><span class="s3">126</span><span class="s0">;</span><span class="s1">t</span><span class="s0">++)</span><span class="s1">e</span><span class="s0">.</span><span class="s1">enqueue</span><span class="s0">((()=&gt;{</span><span class="s5">if</span><span class="s0">(!</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_cacheMap</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">d</span><span class="s0">.</span><span class="s1">DEFAULT_COLOR</span><span class="s0">,</span><span class="s1">d</span><span class="s0">.</span><span class="s1">DEFAULT_COLOR</span><span class="s0">,</span><span class="s1">d</span><span class="s0">.</span><span class="s1">DEFAULT_EXT</span><span class="s0">)){</span><span class="s5">const </span><span class="s1">e</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_drawToCache</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">d</span><span class="s0">.</span><span class="s1">DEFAULT_COLOR</span><span class="s0">,</span><span class="s1">d</span><span class="s0">.</span><span class="s1">DEFAULT_COLOR</span><span class="s0">,</span><span class="s1">d</span><span class="s0">.</span><span class="s1">DEFAULT_EXT</span><span class="s0">);</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_cacheMap</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">d</span><span class="s0">.</span><span class="s1">DEFAULT_COLOR</span><span class="s0">,</span><span class="s1">d</span><span class="s0">.</span><span class="s1">DEFAULT_COLOR</span><span class="s0">,</span><span class="s1">d</span><span class="s0">.</span><span class="s1">DEFAULT_EXT</span><span class="s0">,</span><span class="s1">e</span><span class="s0">)}}))}</span><span class="s1">beginFrame</span><span class="s0">(){</span><span class="s5">return this</span><span class="s0">.</span><span class="s1">_requestClearModel</span><span class="s0">}</span><span class="s1">clearTexture</span><span class="s0">(){</span><span class="s5">if</span><span class="s0">(</span><span class="s3">0</span><span class="s0">!==</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_pages</span><span class="s0">[</span><span class="s3">0</span><span class="s0">].</span><span class="s1">currentRow</span><span class="s0">.</span><span class="s1">x</span><span class="s0">||</span><span class="s3">0</span><span class="s0">!==</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_pages</span><span class="s0">[</span><span class="s3">0</span><span class="s0">].</span><span class="s1">currentRow</span><span class="s0">.</span><span class="s1">y</span><span class="s0">){</span><span class="s5">for</span><span class="s0">(</span><span class="s5">const </span><span class="s1">e of </span><span class="s5">this</span><span class="s0">.</span><span class="s1">_pages</span><span class="s0">)</span><span class="s1">e</span><span class="s0">.</span><span class="s1">clear</span><span class="s0">();</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_cacheMap</span><span class="s0">.</span><span class="s1">clear</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_cacheMapCombined</span><span class="s0">.</span><span class="s1">clear</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_didWarmUp</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">}}</span><span class="s1">_createNewPage</span><span class="s0">(){</span><span class="s5">if</span><span class="s0">(</span><span class="s1">g</span><span class="s0">.</span><span class="s1">maxAtlasPages</span><span class="s0">&amp;&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_pages</span><span class="s0">.</span><span class="s1">length</span><span class="s0">&gt;=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">max</span><span class="s0">(</span><span class="s3">4</span><span class="s0">,</span><span class="s1">g</span><span class="s0">.</span><span class="s1">maxAtlasPages</span><span class="s0">)){</span><span class="s5">const </span><span class="s1">e</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_pages</span><span class="s0">.</span><span class="s1">filter</span><span class="s0">((</span><span class="s1">e</span><span class="s0">=&gt;</span><span class="s3">2</span><span class="s0">*</span><span class="s1">e</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">&lt;=(</span><span class="s1">g</span><span class="s0">.</span><span class="s1">maxTextureSize</span><span class="s0">||</span><span class="s3">4096</span><span class="s0">))).</span><span class="s1">sort</span><span class="s0">(((</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">!==</span><span class="s1">e</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">?</span><span class="s1">t</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">-</span><span class="s1">e</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">:</span><span class="s1">t</span><span class="s0">.</span><span class="s1">percentageUsed</span><span class="s0">-</span><span class="s1">e</span><span class="s0">.</span><span class="s1">percentageUsed</span><span class="s0">));</span><span class="s5">let </span><span class="s1">t</span><span class="s0">=-</span><span class="s3">1</span><span class="s0">,</span><span class="s1">i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s5">for</span><span class="s0">(</span><span class="s5">let </span><span class="s1">s</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">s</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">s</span><span class="s0">++)</span><span class="s5">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">[</span><span class="s1">s</span><span class="s0">].</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">!==</span><span class="s1">i</span><span class="s0">)</span><span class="s1">t</span><span class="s0">=</span><span class="s1">s</span><span class="s0">,</span><span class="s1">i</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">s</span><span class="s0">].</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">;</span><span class="s5">else if</span><span class="s0">(</span><span class="s1">s</span><span class="s0">-</span><span class="s1">t</span><span class="s0">==</span><span class="s3">3</span><span class="s0">)</span><span class="s5">break</span><span class="s0">;</span><span class="s5">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">slice</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">t</span><span class="s0">+</span><span class="s3">4</span><span class="s0">),</span><span class="s1">r</span><span class="s0">=</span><span class="s1">s</span><span class="s0">.</span><span class="s1">map</span><span class="s0">((</span><span class="s1">e</span><span class="s0">=&gt;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">glyphs</span><span class="s0">[</span><span class="s3">0</span><span class="s0">].</span><span class="s1">texturePage</span><span class="s0">)).</span><span class="s1">sort</span><span class="s0">(((</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s1">e</span><span class="s0">&gt;</span><span class="s1">t</span><span class="s0">?</span><span class="s3">1</span><span class="s0">:-</span><span class="s3">1</span><span class="s0">)),</span><span class="s1">o</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">pages</span><span class="s0">.</span><span class="s1">length</span><span class="s0">-</span><span class="s1">s</span><span class="s0">.</span><span class="s1">length</span><span class="s0">,</span><span class="s1">n</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_mergePages</span><span class="s0">(</span><span class="s1">s</span><span class="s0">,</span><span class="s1">o</span><span class="s0">);</span><span class="s1">n</span><span class="s0">.</span><span class="s1">version</span><span class="s0">++;</span><span class="s5">for</span><span class="s0">(</span><span class="s5">let </span><span class="s1">e</span><span class="s0">=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">length</span><span class="s0">-</span><span class="s3">1</span><span class="s0">;</span><span class="s1">e</span><span class="s0">&gt;=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">e</span><span class="s0">--)</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_deletePage</span><span class="s0">(</span><span class="s1">r</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]);</span><span class="s5">this</span><span class="s0">.</span><span class="s1">pages</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">n</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_requestClearModel</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_onAddTextureAtlasCanvas</span><span class="s0">.</span><span class="s1">fire</span><span class="s0">(</span><span class="s1">n</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">)}</span><span class="s5">const </span><span class="s1">e</span><span class="s0">=</span><span class="s5">new </span><span class="s1">f</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_document</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_textureSize</span><span class="s0">);</span><span class="s5">return this</span><span class="s0">.</span><span class="s1">_pages</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">e</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_activePages</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">e</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_onAddTextureAtlasCanvas</span><span class="s0">.</span><span class="s1">fire</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">),</span><span class="s1">e</span><span class="s0">}</span><span class="s1">_mergePages</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">){</span><span class="s5">const </span><span class="s1">i</span><span class="s0">=</span><span class="s3">2</span><span class="s0">*</span><span class="s1">e</span><span class="s0">[</span><span class="s3">0</span><span class="s0">].</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">,</span><span class="s1">s</span><span class="s0">=</span><span class="s5">new </span><span class="s1">f</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_document</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">e</span><span class="s0">);</span><span class="s5">for</span><span class="s0">(</span><span class="s5">const</span><span class="s0">[</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">]</span><span class="s1">of e</span><span class="s0">.</span><span class="s1">entries</span><span class="s0">()){</span><span class="s5">const </span><span class="s1">e</span><span class="s0">=</span><span class="s1">r</span><span class="s0">*</span><span class="s1">o</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">%</span><span class="s1">i</span><span class="s0">,</span><span class="s1">n</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">floor</span><span class="s0">(</span><span class="s1">r</span><span class="s0">/</span><span class="s3">2</span><span class="s0">)*</span><span class="s1">o</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">;</span><span class="s1">s</span><span class="s0">.</span><span class="s1">ctx</span><span class="s0">.</span><span class="s1">drawImage</span><span class="s0">(</span><span class="s1">o</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">n</span><span class="s0">);</span><span class="s5">for</span><span class="s0">(</span><span class="s5">const </span><span class="s1">s of o</span><span class="s0">.</span><span class="s1">glyphs</span><span class="s0">)</span><span class="s1">s</span><span class="s0">.</span><span class="s1">texturePage</span><span class="s0">=</span><span class="s1">t</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">sizeClipSpace</span><span class="s0">.</span><span class="s1">x</span><span class="s0">=</span><span class="s1">s</span><span class="s0">.</span><span class="s1">size</span><span class="s0">.</span><span class="s1">x</span><span class="s0">/</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">sizeClipSpace</span><span class="s0">.</span><span class="s1">y</span><span class="s0">=</span><span class="s1">s</span><span class="s0">.</span><span class="s1">size</span><span class="s0">.</span><span class="s1">y</span><span class="s0">/</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">texturePosition</span><span class="s0">.</span><span class="s1">x</span><span class="s0">+=</span><span class="s1">e</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">texturePosition</span><span class="s0">.</span><span class="s1">y</span><span class="s0">+=</span><span class="s1">n</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">texturePositionClipSpace</span><span class="s0">.</span><span class="s1">x</span><span class="s0">=</span><span class="s1">s</span><span class="s0">.</span><span class="s1">texturePosition</span><span class="s0">.</span><span class="s1">x</span><span class="s0">/</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">texturePositionClipSpace</span><span class="s0">.</span><span class="s1">y</span><span class="s0">=</span><span class="s1">s</span><span class="s0">.</span><span class="s1">texturePosition</span><span class="s0">.</span><span class="s1">y</span><span class="s0">/</span><span class="s1">i</span><span class="s0">;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_onRemoveTextureAtlasCanvas</span><span class="s0">.</span><span class="s1">fire</span><span class="s0">(</span><span class="s1">o</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">);</span><span class="s5">const </span><span class="s1">a</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_activePages</span><span class="s0">.</span><span class="s1">indexOf</span><span class="s0">(</span><span class="s1">o</span><span class="s0">);-</span><span class="s3">1</span><span class="s0">!==</span><span class="s1">a</span><span class="s0">&amp;&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_activePages</span><span class="s0">.</span><span class="s1">splice</span><span class="s0">(</span><span class="s1">a</span><span class="s0">,</span><span class="s3">1</span><span class="s0">)}</span><span class="s5">return </span><span class="s1">s</span><span class="s0">}</span><span class="s1">_deletePage</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_pages</span><span class="s0">.</span><span class="s1">splice</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s3">1</span><span class="s0">);</span><span class="s5">for</span><span class="s0">(</span><span class="s5">let </span><span class="s1">t</span><span class="s0">=</span><span class="s1">e</span><span class="s0">;</span><span class="s1">t</span><span class="s0">&lt;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_pages</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">t</span><span class="s0">++){</span><span class="s5">const </span><span class="s1">e</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_pages</span><span class="s0">[</span><span class="s1">t</span><span class="s0">];</span><span class="s5">for</span><span class="s0">(</span><span class="s5">const </span><span class="s1">t of e</span><span class="s0">.</span><span class="s1">glyphs</span><span class="s0">)</span><span class="s1">t</span><span class="s0">.</span><span class="s1">texturePage</span><span class="s0">--;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">version</span><span class="s0">++}}</span><span class="s1">getRasterizedGlyphCombinedChar</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s5">return this</span><span class="s0">.</span><span class="s1">_getFromCacheMap</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_cacheMapCombined</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">)}</span><span class="s1">getRasterizedGlyph</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s5">return this</span><span class="s0">.</span><span class="s1">_getFromCacheMap</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_cacheMap</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">)}</span><span class="s1">_getFromCacheMap</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">){</span><span class="s5">return </span><span class="s1">u</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">),</span><span class="s1">u</span><span class="s0">||(</span><span class="s1">u</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_drawToCache</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">),</span><span class="s1">e</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">u</span><span class="s0">)),</span><span class="s1">u</span><span class="s0">}</span><span class="s1">_getColorFromAnsiIndex</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">&gt;=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">ansi</span><span class="s0">.</span><span class="s1">length</span><span class="s0">)</span><span class="s5">throw new </span><span class="s1">Error</span><span class="s0">(</span><span class="s2">&quot;No color found for idx &quot;</span><span class="s0">+</span><span class="s1">e</span><span class="s0">);</span><span class="s5">return this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">ansi</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]}</span><span class="s1">_getBackgroundColor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">){</span><span class="s5">if</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">allowTransparency</span><span class="s0">)</span><span class="s5">return </span><span class="s1">n</span><span class="s0">.</span><span class="s1">NULL_COLOR</span><span class="s0">;</span><span class="s5">let </span><span class="s1">r</span><span class="s0">;</span><span class="s5">switch</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">case </span><span class="s3">16777216</span><span class="s0">:</span><span class="s5">case </span><span class="s3">33554432</span><span class="s0">:</span><span class="s1">r</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_getColorFromAnsiIndex</span><span class="s0">(</span><span class="s1">t</span><span class="s0">);</span><span class="s5">break</span><span class="s0">;</span><span class="s5">case </span><span class="s3">50331648</span><span class="s0">:</span><span class="s5">const </span><span class="s1">e</span><span class="s0">=</span><span class="s1">c</span><span class="s0">.</span><span class="s1">AttributeData</span><span class="s0">.</span><span class="s1">toColorRGB</span><span class="s0">(</span><span class="s1">t</span><span class="s0">);</span><span class="s1">r</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">channels</span><span class="s0">.</span><span class="s1">toColor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">[</span><span class="s3">0</span><span class="s0">],</span><span class="s1">e</span><span class="s0">[</span><span class="s3">1</span><span class="s0">],</span><span class="s1">e</span><span class="s0">[</span><span class="s3">2</span><span class="s0">]);</span><span class="s5">break</span><span class="s0">;</span><span class="s5">default</span><span class="s0">:</span><span class="s1">r</span><span class="s0">=</span><span class="s1">i</span><span class="s0">?</span><span class="s1">n</span><span class="s0">.</span><span class="s1">color</span><span class="s0">.</span><span class="s1">opaque</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">foreground</span><span class="s0">):</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">background</span><span class="s0">}</span><span class="s5">return </span><span class="s1">r</span><span class="s0">}</span><span class="s1">_getForegroundColor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">h</span><span class="s0">,</span><span class="s1">l</span><span class="s0">,</span><span class="s1">d</span><span class="s0">,</span><span class="s1">_</span><span class="s0">){</span><span class="s5">const </span><span class="s1">u</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_getMinimumContrastColor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">h</span><span class="s0">,</span><span class="s1">d</span><span class="s0">,</span><span class="s1">l</span><span class="s0">,</span><span class="s1">_</span><span class="s0">);</span><span class="s5">if</span><span class="s0">(</span><span class="s1">u</span><span class="s0">)</span><span class="s5">return </span><span class="s1">u</span><span class="s0">;</span><span class="s5">let </span><span class="s1">g</span><span class="s0">;</span><span class="s5">switch</span><span class="s0">(</span><span class="s1">o</span><span class="s0">){</span><span class="s5">case </span><span class="s3">16777216</span><span class="s0">:</span><span class="s5">case </span><span class="s3">33554432</span><span class="s0">:</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">drawBoldTextInBrightColors</span><span class="s0">&amp;&amp;</span><span class="s1">d</span><span class="s0">&amp;&amp;</span><span class="s1">a</span><span class="s0">&lt;</span><span class="s3">8</span><span class="s0">&amp;&amp;(</span><span class="s1">a</span><span class="s0">+=</span><span class="s3">8</span><span class="s0">),</span><span class="s1">g</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_getColorFromAnsiIndex</span><span class="s0">(</span><span class="s1">a</span><span class="s0">);</span><span class="s5">break</span><span class="s0">;</span><span class="s5">case </span><span class="s3">50331648</span><span class="s0">:</span><span class="s5">const </span><span class="s1">e</span><span class="s0">=</span><span class="s1">c</span><span class="s0">.</span><span class="s1">AttributeData</span><span class="s0">.</span><span class="s1">toColorRGB</span><span class="s0">(</span><span class="s1">a</span><span class="s0">);</span><span class="s1">g</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">channels</span><span class="s0">.</span><span class="s1">toColor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">[</span><span class="s3">0</span><span class="s0">],</span><span class="s1">e</span><span class="s0">[</span><span class="s3">1</span><span class="s0">],</span><span class="s1">e</span><span class="s0">[</span><span class="s3">2</span><span class="s0">]);</span><span class="s5">break</span><span class="s0">;</span><span class="s5">default</span><span class="s0">:</span><span class="s1">g</span><span class="s0">=</span><span class="s1">h</span><span class="s0">?</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">background</span><span class="s0">:</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">foreground</span><span class="s0">}</span><span class="s5">return this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">allowTransparency</span><span class="s0">&amp;&amp;(</span><span class="s1">g</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">color</span><span class="s0">.</span><span class="s1">opaque</span><span class="s0">(</span><span class="s1">g</span><span class="s0">)),</span><span class="s1">l</span><span class="s0">&amp;&amp;(</span><span class="s1">g</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">color</span><span class="s0">.</span><span class="s1">multiplyOpacity</span><span class="s0">(</span><span class="s1">g</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">DIM_OPACITY</span><span class="s0">)),</span><span class="s1">g</span><span class="s0">}</span><span class="s1">_resolveBackgroundRgba</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s5">switch</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">case </span><span class="s3">16777216</span><span class="s0">:</span><span class="s5">case </span><span class="s3">33554432</span><span class="s0">:</span><span class="s5">return this</span><span class="s0">.</span><span class="s1">_getColorFromAnsiIndex</span><span class="s0">(</span><span class="s1">t</span><span class="s0">).</span><span class="s1">rgba</span><span class="s0">;</span><span class="s5">case </span><span class="s3">50331648</span><span class="s0">:</span><span class="s5">return </span><span class="s1">t</span><span class="s0">&lt;&lt;</span><span class="s3">8</span><span class="s0">;</span><span class="s5">default</span><span class="s0">:</span><span class="s5">return </span><span class="s1">i</span><span class="s0">?</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">foreground</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">:</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">background</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">}}</span><span class="s1">_resolveForegroundRgba</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">){</span><span class="s5">switch</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">case </span><span class="s3">16777216</span><span class="s0">:</span><span class="s5">case </span><span class="s3">33554432</span><span class="s0">:</span><span class="s5">return this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">drawBoldTextInBrightColors</span><span class="s0">&amp;&amp;</span><span class="s1">s</span><span class="s0">&amp;&amp;</span><span class="s1">t</span><span class="s0">&lt;</span><span class="s3">8</span><span class="s0">&amp;&amp;(</span><span class="s1">t</span><span class="s0">+=</span><span class="s3">8</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_getColorFromAnsiIndex</span><span class="s0">(</span><span class="s1">t</span><span class="s0">).</span><span class="s1">rgba</span><span class="s0">;</span><span class="s5">case </span><span class="s3">50331648</span><span class="s0">:</span><span class="s5">return </span><span class="s1">t</span><span class="s0">&lt;&lt;</span><span class="s3">8</span><span class="s0">;</span><span class="s5">default</span><span class="s0">:</span><span class="s5">return </span><span class="s1">i</span><span class="s0">?</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">background</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">:</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">foreground</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">}}</span><span class="s1">_getMinimumContrastColor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">h</span><span class="s0">,</span><span class="s1">l</span><span class="s0">,</span><span class="s1">c</span><span class="s0">){</span><span class="s5">if</span><span class="s0">(</span><span class="s3">1</span><span class="s0">===</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">minimumContrastRatio</span><span class="s0">||</span><span class="s1">c</span><span class="s0">)</span><span class="s5">return</span><span class="s0">;</span><span class="s5">const </span><span class="s1">d</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_getContrastCache</span><span class="s0">(</span><span class="s1">l</span><span class="s0">),</span><span class="s1">_</span><span class="s0">=</span><span class="s1">d</span><span class="s0">.</span><span class="s1">getColor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">s</span><span class="s0">);</span><span class="s5">if</span><span class="s0">(</span><span class="s5">void </span><span class="s3">0</span><span class="s0">!==</span><span class="s1">_</span><span class="s0">)</span><span class="s5">return </span><span class="s1">_</span><span class="s0">||</span><span class="s5">void </span><span class="s3">0</span><span class="s0">;</span><span class="s5">const </span><span class="s1">u</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_resolveBackgroundRgba</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">a</span><span class="s0">),</span><span class="s1">g</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_resolveForegroundRgba</span><span class="s0">(</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">h</span><span class="s0">),</span><span class="s1">f</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">.</span><span class="s1">ensureContrastRatio</span><span class="s0">(</span><span class="s1">u</span><span class="s0">,</span><span class="s1">g</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">minimumContrastRatio</span><span class="s0">/(</span><span class="s1">l</span><span class="s0">?</span><span class="s3">2</span><span class="s0">:</span><span class="s3">1</span><span class="s0">));</span><span class="s5">if</span><span class="s0">(!</span><span class="s1">f</span><span class="s0">)</span><span class="s5">return void </span><span class="s1">d</span><span class="s0">.</span><span class="s1">setColor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s5">null</span><span class="s0">);</span><span class="s5">const </span><span class="s1">v</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">channels</span><span class="s0">.</span><span class="s1">toColor</span><span class="s0">(</span><span class="s1">f</span><span class="s0">&gt;&gt;</span><span class="s3">24</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">f</span><span class="s0">&gt;&gt;</span><span class="s3">16</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">f</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">);</span><span class="s5">return </span><span class="s1">d</span><span class="s0">.</span><span class="s1">setColor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">v</span><span class="s0">),</span><span class="s1">v</span><span class="s0">}</span><span class="s1">_getContrastCache</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">return </span><span class="s1">e</span><span class="s0">?</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">halfContrastCache</span><span class="s0">:</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">contrastCache</span><span class="s0">}</span><span class="s1">_drawToCache</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">a</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">){</span><span class="s5">const </span><span class="s1">h</span><span class="s0">=</span><span class="s2">&quot;number&quot;</span><span class="s0">==</span><span class="s5">typeof </span><span class="s1">e</span><span class="s0">?</span><span class="s1">String</span><span class="s0">.</span><span class="s1">fromCharCode</span><span class="s0">(</span><span class="s1">e</span><span class="s0">):</span><span class="s1">e</span><span class="s0">,</span><span class="s1">l</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">min</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCellWidth</span><span class="s0">*</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">max</span><span class="s0">(</span><span class="s1">h</span><span class="s0">.</span><span class="s1">length</span><span class="s0">,</span><span class="s3">2</span><span class="s0">)+</span><span class="s3">4</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_textureSize</span><span class="s0">);</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCanvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">&lt;</span><span class="s1">l</span><span class="s0">&amp;&amp;(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCanvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">=</span><span class="s1">l</span><span class="s0">);</span><span class="s5">const </span><span class="s1">d</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">min</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCellHeight</span><span class="s0">+</span><span class="s3">8</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_textureSize</span><span class="s0">);</span><span class="s5">if</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCanvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">&lt;</span><span class="s1">d</span><span class="s0">&amp;&amp;(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCanvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">=</span><span class="s1">d</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">save</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_workAttributeData</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">=</span><span class="s1">i</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_workAttributeData</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">=</span><span class="s1">t</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_workAttributeData</span><span class="s0">.</span><span class="s1">extended</span><span class="s0">.</span><span class="s1">ext</span><span class="s0">=</span><span class="s1">n</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_workAttributeData</span><span class="s0">.</span><span class="s1">isInvisible</span><span class="s0">())</span><span class="s5">return </span><span class="s1">_</span><span class="s0">;</span><span class="s5">const </span><span class="s1">u</span><span class="s0">=!!</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_workAttributeData</span><span class="s0">.</span><span class="s1">isBold</span><span class="s0">(),</span><span class="s1">f</span><span class="s0">=!!</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_workAttributeData</span><span class="s0">.</span><span class="s1">isInverse</span><span class="s0">(),</span><span class="s1">C</span><span class="s0">=!!</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_workAttributeData</span><span class="s0">.</span><span class="s1">isDim</span><span class="s0">(),</span><span class="s1">p</span><span class="s0">=!!</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_workAttributeData</span><span class="s0">.</span><span class="s1">isItalic</span><span class="s0">(),</span><span class="s1">m</span><span class="s0">=!!</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_workAttributeData</span><span class="s0">.</span><span class="s1">isUnderline</span><span class="s0">(),</span><span class="s1">x</span><span class="s0">=!!</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_workAttributeData</span><span class="s0">.</span><span class="s1">isStrikethrough</span><span class="s0">(),</span><span class="s1">w</span><span class="s0">=!!</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_workAttributeData</span><span class="s0">.</span><span class="s1">isOverline</span><span class="s0">();</span><span class="s5">let </span><span class="s1">L</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_workAttributeData</span><span class="s0">.</span><span class="s1">getFgColor</span><span class="s0">(),</span><span class="s1">b</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_workAttributeData</span><span class="s0">.</span><span class="s1">getFgColorMode</span><span class="s0">(),</span><span class="s1">M</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_workAttributeData</span><span class="s0">.</span><span class="s1">getBgColor</span><span class="s0">(),</span><span class="s1">S</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_workAttributeData</span><span class="s0">.</span><span class="s1">getBgColorMode</span><span class="s0">();</span><span class="s5">if</span><span class="s0">(</span><span class="s1">f</span><span class="s0">){</span><span class="s5">const </span><span class="s1">e</span><span class="s0">=</span><span class="s1">L</span><span class="s0">;</span><span class="s1">L</span><span class="s0">=</span><span class="s1">M</span><span class="s0">,</span><span class="s1">M</span><span class="s0">=</span><span class="s1">e</span><span class="s0">;</span><span class="s5">const </span><span class="s1">t</span><span class="s0">=</span><span class="s1">b</span><span class="s0">;</span><span class="s1">b</span><span class="s0">=</span><span class="s1">S</span><span class="s0">,</span><span class="s1">S</span><span class="s0">=</span><span class="s1">t</span><span class="s0">}</span><span class="s5">const </span><span class="s1">y</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_getBackgroundColor</span><span class="s0">(</span><span class="s1">S</span><span class="s0">,</span><span class="s1">M</span><span class="s0">,</span><span class="s1">f</span><span class="s0">,</span><span class="s1">C</span><span class="s0">);</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">globalCompositeOperation</span><span class="s0">=</span><span class="s2">&quot;copy&quot;</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">fillStyle</span><span class="s0">=</span><span class="s1">y</span><span class="s0">.</span><span class="s1">css</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">fillRect</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCanvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCanvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">globalCompositeOperation</span><span class="s0">=</span><span class="s2">&quot;source-over&quot;</span><span class="s0">;</span><span class="s5">const </span><span class="s1">R</span><span class="s0">=</span><span class="s1">u</span><span class="s0">?</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">fontWeightBold</span><span class="s0">:</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">fontWeight</span><span class="s0">,</span><span class="s1">A</span><span class="s0">=</span><span class="s1">p</span><span class="s0">?</span><span class="s2">&quot;italic&quot;</span><span class="s0">:</span><span class="s2">&quot;&quot;</span><span class="s0">;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">font</span><span class="s0">=</span><span class="s2">`</span><span class="s1">$</span><span class="s0">{</span><span class="s1">A</span><span class="s0">} </span><span class="s1">$</span><span class="s0">{</span><span class="s1">R</span><span class="s0">} </span><span class="s1">$</span><span class="s0">{</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">fontSize</span><span class="s0">*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">devicePixelRatio</span><span class="s0">}</span><span class="s2">px </span><span class="s1">$</span><span class="s0">{</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">fontFamily</span><span class="s0">}</span><span class="s2">`</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">textBaseline</span><span class="s0">=</span><span class="s1">s</span><span class="s0">.</span><span class="s1">TEXT_BASELINE</span><span class="s0">;</span><span class="s5">const </span><span class="s1">D</span><span class="s0">=</span><span class="s3">1</span><span class="s0">===</span><span class="s1">h</span><span class="s0">.</span><span class="s1">length</span><span class="s0">&amp;&amp;(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">o</span><span class="s0">.</span><span class="s1">isPowerlineGlyph</span><span class="s0">)(</span><span class="s1">h</span><span class="s0">.</span><span class="s1">charCodeAt</span><span class="s0">(</span><span class="s3">0</span><span class="s0">)),</span><span class="s1">T</span><span class="s0">=</span><span class="s3">1</span><span class="s0">===</span><span class="s1">h</span><span class="s0">.</span><span class="s1">length</span><span class="s0">&amp;&amp;(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">o</span><span class="s0">.</span><span class="s1">isRestrictedPowerlineGlyph</span><span class="s0">)(</span><span class="s1">h</span><span class="s0">.</span><span class="s1">charCodeAt</span><span class="s0">(</span><span class="s3">0</span><span class="s0">)),</span><span class="s1">k</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_getForegroundColor</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">S</span><span class="s0">,</span><span class="s1">M</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">b</span><span class="s0">,</span><span class="s1">L</span><span class="s0">,</span><span class="s1">f</span><span class="s0">,</span><span class="s1">C</span><span class="s0">,</span><span class="s1">u</span><span class="s0">,(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">o</span><span class="s0">.</span><span class="s1">treatGlyphAsBackgroundColor</span><span class="s0">)(</span><span class="s1">h</span><span class="s0">.</span><span class="s1">charCodeAt</span><span class="s0">(</span><span class="s3">0</span><span class="s0">)));</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">fillStyle</span><span class="s0">=</span><span class="s1">k</span><span class="s0">.</span><span class="s1">css</span><span class="s0">;</span><span class="s5">const </span><span class="s1">E</span><span class="s0">=</span><span class="s1">T</span><span class="s0">?</span><span class="s3">0</span><span class="s0">:</span><span class="s3">4</span><span class="s0">;</span><span class="s5">let </span><span class="s1">B</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">;!</span><span class="s3">1</span><span class="s0">!==</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">customGlyphs</span><span class="s0">&amp;&amp;(</span><span class="s1">B</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">r</span><span class="s0">.</span><span class="s1">tryDrawCustomChar</span><span class="s0">)(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">,</span><span class="s1">h</span><span class="s0">,</span><span class="s1">E</span><span class="s0">,</span><span class="s1">E</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCellWidth</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCellHeight</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">fontSize</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">devicePixelRatio</span><span class="s0">));</span><span class="s5">let </span><span class="s1">$</span><span class="s0">,</span><span class="s1">P</span><span class="s0">=!</span><span class="s1">D</span><span class="s0">;</span><span class="s5">if</span><span class="s0">(</span><span class="s1">$</span><span class="s0">=</span><span class="s2">&quot;number&quot;</span><span class="s0">==</span><span class="s5">typeof </span><span class="s1">e</span><span class="s0">?</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_unicodeService</span><span class="s0">.</span><span class="s1">wcwidth</span><span class="s0">(</span><span class="s1">e</span><span class="s0">):</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_unicodeService</span><span class="s0">.</span><span class="s1">getStringCellWidth</span><span class="s0">(</span><span class="s1">e</span><span class="s0">),</span><span class="s1">m</span><span class="s0">){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">save</span><span class="s0">();</span><span class="s5">const </span><span class="s1">e</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">max</span><span class="s0">(</span><span class="s3">1</span><span class="s0">,</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">floor</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">fontSize</span><span class="s0">*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">devicePixelRatio</span><span class="s0">/</span><span class="s3">15</span><span class="s0">)),</span><span class="s1">t</span><span class="s0">=</span><span class="s1">e</span><span class="s0">%</span><span class="s3">2</span><span class="s0">==</span><span class="s3">1</span><span class="s0">?</span><span class="s3">.5</span><span class="s0">:</span><span class="s3">0</span><span class="s0">;</span><span class="s5">if</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">lineWidth</span><span class="s0">=</span><span class="s1">e</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_workAttributeData</span><span class="s0">.</span><span class="s1">isUnderlineColorDefault</span><span class="s0">())</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">strokeStyle</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">fillStyle</span><span class="s0">;</span><span class="s5">else if</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_workAttributeData</span><span class="s0">.</span><span class="s1">isUnderlineColorRGB</span><span class="s0">())</span><span class="s1">P</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">strokeStyle</span><span class="s0">=</span><span class="s2">`rgb(</span><span class="s1">$</span><span class="s0">{</span><span class="s1">c</span><span class="s0">.</span><span class="s1">AttributeData</span><span class="s0">.</span><span class="s1">toColorRGB</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_workAttributeData</span><span class="s0">.</span><span class="s1">getUnderlineColor</span><span class="s0">()).</span><span class="s1">join</span><span class="s0">(</span><span class="s2">&quot;,&quot;</span><span class="s0">)}</span><span class="s2">)`</span><span class="s0">;</span><span class="s5">else</span><span class="s0">{</span><span class="s1">P</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">;</span><span class="s5">let </span><span class="s1">e</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_workAttributeData</span><span class="s0">.</span><span class="s1">getUnderlineColor</span><span class="s0">();</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">drawBoldTextInBrightColors</span><span class="s0">&amp;&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_workAttributeData</span><span class="s0">.</span><span class="s1">isBold</span><span class="s0">()&amp;&amp;</span><span class="s1">e</span><span class="s0">&lt;</span><span class="s3">8</span><span class="s0">&amp;&amp;(</span><span class="s1">e</span><span class="s0">+=</span><span class="s3">8</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">strokeStyle</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_getColorFromAnsiIndex</span><span class="s0">(</span><span class="s1">e</span><span class="s0">).</span><span class="s1">css</span><span class="s0">}</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">beginPath</span><span class="s0">();</span><span class="s5">const </span><span class="s1">i</span><span class="s0">=</span><span class="s1">E</span><span class="s0">,</span><span class="s1">s</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">ceil</span><span class="s0">(</span><span class="s1">E</span><span class="s0">+</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCharHeight</span><span class="s0">)-</span><span class="s1">t</span><span class="s0">-(</span><span class="s1">a</span><span class="s0">?</span><span class="s3">2</span><span class="s0">*</span><span class="s1">e</span><span class="s0">:</span><span class="s3">0</span><span class="s0">),</span><span class="s1">r</span><span class="s0">=</span><span class="s1">s</span><span class="s0">+</span><span class="s1">e</span><span class="s0">,</span><span class="s1">n</span><span class="s0">=</span><span class="s1">s</span><span class="s0">+</span><span class="s3">2</span><span class="s0">*</span><span class="s1">e</span><span class="s0">;</span><span class="s5">let </span><span class="s1">l</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_workAttributeData</span><span class="s0">.</span><span class="s1">getUnderlineVariantOffset</span><span class="s0">();</span><span class="s5">for</span><span class="s0">(</span><span class="s5">let </span><span class="s1">a</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">a</span><span class="s0">&lt;</span><span class="s1">$</span><span class="s0">;</span><span class="s1">a</span><span class="s0">++){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">save</span><span class="s0">();</span><span class="s5">const </span><span class="s1">h</span><span class="s0">=</span><span class="s1">i</span><span class="s0">+</span><span class="s1">a</span><span class="s0">*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCellWidth</span><span class="s0">,</span><span class="s1">c</span><span class="s0">=</span><span class="s1">i</span><span class="s0">+(</span><span class="s1">a</span><span class="s0">+</span><span class="s3">1</span><span class="s0">)*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCellWidth</span><span class="s0">,</span><span class="s1">d</span><span class="s0">=</span><span class="s1">h</span><span class="s0">+</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCellWidth</span><span class="s0">/</span><span class="s3">2</span><span class="s0">;</span><span class="s5">switch</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_workAttributeData</span><span class="s0">.</span><span class="s1">extended</span><span class="s0">.</span><span class="s1">underlineStyle</span><span class="s0">){</span><span class="s5">case </span><span class="s3">2</span><span class="s0">:</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">moveTo</span><span class="s0">(</span><span class="s1">h</span><span class="s0">,</span><span class="s1">s</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">lineTo</span><span class="s0">(</span><span class="s1">c</span><span class="s0">,</span><span class="s1">s</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">moveTo</span><span class="s0">(</span><span class="s1">h</span><span class="s0">,</span><span class="s1">n</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">lineTo</span><span class="s0">(</span><span class="s1">c</span><span class="s0">,</span><span class="s1">n</span><span class="s0">);</span><span class="s5">break</span><span class="s0">;</span><span class="s5">case </span><span class="s3">3</span><span class="s0">:</span><span class="s5">const </span><span class="s1">i</span><span class="s0">=</span><span class="s1">e</span><span class="s0">&lt;=</span><span class="s3">1</span><span class="s0">?</span><span class="s1">n</span><span class="s0">:</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">ceil</span><span class="s0">(</span><span class="s1">E</span><span class="s0">+</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCharHeight</span><span class="s0">-</span><span class="s1">e</span><span class="s0">/</span><span class="s3">2</span><span class="s0">)-</span><span class="s1">t</span><span class="s0">,</span><span class="s1">a</span><span class="s0">=</span><span class="s1">e</span><span class="s0">&lt;=</span><span class="s3">1</span><span class="s0">?</span><span class="s1">s</span><span class="s0">:</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">ceil</span><span class="s0">(</span><span class="s1">E</span><span class="s0">+</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCharHeight</span><span class="s0">+</span><span class="s1">e</span><span class="s0">/</span><span class="s3">2</span><span class="s0">)-</span><span class="s1">t</span><span class="s0">,</span><span class="s1">_</span><span class="s0">=</span><span class="s5">new </span><span class="s1">Path2D</span><span class="s0">;</span><span class="s1">_</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">(</span><span class="s1">h</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCellWidth</span><span class="s0">,</span><span class="s1">n</span><span class="s0">-</span><span class="s1">s</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">clip</span><span class="s0">(</span><span class="s1">_</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">moveTo</span><span class="s0">(</span><span class="s1">h</span><span class="s0">-</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCellWidth</span><span class="s0">/</span><span class="s3">2</span><span class="s0">,</span><span class="s1">r</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">bezierCurveTo</span><span class="s0">(</span><span class="s1">h</span><span class="s0">-</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCellWidth</span><span class="s0">/</span><span class="s3">2</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">h</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">h</span><span class="s0">,</span><span class="s1">r</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">bezierCurveTo</span><span class="s0">(</span><span class="s1">h</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">d</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">d</span><span class="s0">,</span><span class="s1">r</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">bezierCurveTo</span><span class="s0">(</span><span class="s1">d</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">c</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">c</span><span class="s0">,</span><span class="s1">r</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">bezierCurveTo</span><span class="s0">(</span><span class="s1">c</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">c</span><span class="s0">+</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCellWidth</span><span class="s0">/</span><span class="s3">2</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">c</span><span class="s0">+</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCellWidth</span><span class="s0">/</span><span class="s3">2</span><span class="s0">,</span><span class="s1">r</span><span class="s0">);</span><span class="s5">break</span><span class="s0">;</span><span class="s5">case </span><span class="s3">4</span><span class="s0">:</span><span class="s5">const </span><span class="s1">u</span><span class="s0">=</span><span class="s3">0</span><span class="s0">===</span><span class="s1">l</span><span class="s0">?</span><span class="s3">0</span><span class="s0">:</span><span class="s1">l</span><span class="s0">&gt;=</span><span class="s1">e</span><span class="s0">?</span><span class="s3">2</span><span class="s0">*</span><span class="s1">e</span><span class="s0">-</span><span class="s1">l</span><span class="s0">:</span><span class="s1">e</span><span class="s0">-</span><span class="s1">l</span><span class="s0">;!</span><span class="s3">1</span><span class="s0">==!(</span><span class="s1">l</span><span class="s0">&gt;=</span><span class="s1">e</span><span class="s0">)||</span><span class="s3">0</span><span class="s0">===</span><span class="s1">u</span><span class="s0">?(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">setLineDash</span><span class="s0">([</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">round</span><span class="s0">(</span><span class="s1">e</span><span class="s0">),</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">round</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)]),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">moveTo</span><span class="s0">(</span><span class="s1">h</span><span class="s0">+</span><span class="s1">u</span><span class="s0">,</span><span class="s1">s</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">lineTo</span><span class="s0">(</span><span class="s1">c</span><span class="s0">,</span><span class="s1">s</span><span class="s0">)):(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">setLineDash</span><span class="s0">([</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">round</span><span class="s0">(</span><span class="s1">e</span><span class="s0">),</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">round</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)]),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">moveTo</span><span class="s0">(</span><span class="s1">h</span><span class="s0">,</span><span class="s1">s</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">lineTo</span><span class="s0">(</span><span class="s1">h</span><span class="s0">+</span><span class="s1">u</span><span class="s0">,</span><span class="s1">s</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">moveTo</span><span class="s0">(</span><span class="s1">h</span><span class="s0">+</span><span class="s1">u</span><span class="s0">+</span><span class="s1">e</span><span class="s0">,</span><span class="s1">s</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">lineTo</span><span class="s0">(</span><span class="s1">c</span><span class="s0">,</span><span class="s1">s</span><span class="s0">)),</span><span class="s1">l</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">o</span><span class="s0">.</span><span class="s1">computeNextVariantOffset</span><span class="s0">)(</span><span class="s1">c</span><span class="s0">-</span><span class="s1">h</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">l</span><span class="s0">);</span><span class="s5">break</span><span class="s0">;</span><span class="s5">case </span><span class="s3">5</span><span class="s0">:</span><span class="s5">const </span><span class="s1">g</span><span class="s0">=</span><span class="s3">.6</span><span class="s0">,</span><span class="s1">f</span><span class="s0">=</span><span class="s3">.3</span><span class="s0">,</span><span class="s1">v</span><span class="s0">=</span><span class="s1">c</span><span class="s0">-</span><span class="s1">h</span><span class="s0">,</span><span class="s1">C</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">floor</span><span class="s0">(</span><span class="s1">g</span><span class="s0">*</span><span class="s1">v</span><span class="s0">),</span><span class="s1">p</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">floor</span><span class="s0">(</span><span class="s1">f</span><span class="s0">*</span><span class="s1">v</span><span class="s0">),</span><span class="s1">m</span><span class="s0">=</span><span class="s1">v</span><span class="s0">-</span><span class="s1">C</span><span class="s0">-</span><span class="s1">p</span><span class="s0">;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">setLineDash</span><span class="s0">([</span><span class="s1">C</span><span class="s0">,</span><span class="s1">p</span><span class="s0">,</span><span class="s1">m</span><span class="s0">]),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">moveTo</span><span class="s0">(</span><span class="s1">h</span><span class="s0">,</span><span class="s1">s</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">lineTo</span><span class="s0">(</span><span class="s1">c</span><span class="s0">,</span><span class="s1">s</span><span class="s0">);</span><span class="s5">break</span><span class="s0">;</span><span class="s5">default</span><span class="s0">:</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">moveTo</span><span class="s0">(</span><span class="s1">h</span><span class="s0">,</span><span class="s1">s</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">lineTo</span><span class="s0">(</span><span class="s1">c</span><span class="s0">,</span><span class="s1">s</span><span class="s0">)}</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">stroke</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">restore</span><span class="s0">()}</span><span class="s5">if</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">restore</span><span class="s0">(),!</span><span class="s1">B</span><span class="s0">&amp;&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">fontSize</span><span class="s0">&gt;=</span><span class="s3">12</span><span class="s0">&amp;&amp;!</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">allowTransparency</span><span class="s0">&amp;&amp;</span><span class="s2">&quot; &quot;</span><span class="s0">!==</span><span class="s1">h</span><span class="s0">){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">save</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">textBaseline</span><span class="s0">=</span><span class="s2">&quot;alphabetic&quot;</span><span class="s0">;</span><span class="s5">const </span><span class="s1">t</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">measureText</span><span class="s0">(</span><span class="s1">h</span><span class="s0">);</span><span class="s5">if</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">restore</span><span class="s0">(),</span><span class="s2">&quot;actualBoundingBoxDescent&quot;</span><span class="s5">in </span><span class="s1">t</span><span class="s0">&amp;&amp;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">actualBoundingBoxDescent</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">save</span><span class="s0">();</span><span class="s5">const </span><span class="s1">t</span><span class="s0">=</span><span class="s5">new </span><span class="s1">Path2D</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">-</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">ceil</span><span class="s0">(</span><span class="s1">e</span><span class="s0">/</span><span class="s3">2</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCellWidth</span><span class="s0">*</span><span class="s1">$</span><span class="s0">,</span><span class="s1">n</span><span class="s0">-</span><span class="s1">s</span><span class="s0">+</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">ceil</span><span class="s0">(</span><span class="s1">e</span><span class="s0">/</span><span class="s3">2</span><span class="s0">)),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">clip</span><span class="s0">(</span><span class="s1">t</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">lineWidth</span><span class="s0">=</span><span class="s3">3</span><span class="s0">*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">devicePixelRatio</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">strokeStyle</span><span class="s0">=</span><span class="s1">y</span><span class="s0">.</span><span class="s1">css</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">strokeText</span><span class="s0">(</span><span class="s1">h</span><span class="s0">,</span><span class="s1">E</span><span class="s0">,</span><span class="s1">E</span><span class="s0">+</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCharHeight</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">restore</span><span class="s0">()}}}</span><span class="s5">if</span><span class="s0">(</span><span class="s1">w</span><span class="s0">){</span><span class="s5">const </span><span class="s1">e</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">max</span><span class="s0">(</span><span class="s3">1</span><span class="s0">,</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">floor</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">fontSize</span><span class="s0">*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">devicePixelRatio</span><span class="s0">/</span><span class="s3">15</span><span class="s0">)),</span><span class="s1">t</span><span class="s0">=</span><span class="s1">e</span><span class="s0">%</span><span class="s3">2</span><span class="s0">==</span><span class="s3">1</span><span class="s0">?</span><span class="s3">.5</span><span class="s0">:</span><span class="s3">0</span><span class="s0">;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">lineWidth</span><span class="s0">=</span><span class="s1">e</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">strokeStyle</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">fillStyle</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">beginPath</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">moveTo</span><span class="s0">(</span><span class="s1">E</span><span class="s0">,</span><span class="s1">E</span><span class="s0">+</span><span class="s1">t</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">lineTo</span><span class="s0">(</span><span class="s1">E</span><span class="s0">+</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCharWidth</span><span class="s0">*</span><span class="s1">$</span><span class="s0">,</span><span class="s1">E</span><span class="s0">+</span><span class="s1">t</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">stroke</span><span class="s0">()}</span><span class="s5">if</span><span class="s0">(</span><span class="s1">B</span><span class="s0">||</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">fillText</span><span class="s0">(</span><span class="s1">h</span><span class="s0">,</span><span class="s1">E</span><span class="s0">,</span><span class="s1">E</span><span class="s0">+</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCharHeight</span><span class="s0">),</span><span class="s2">&quot;_&quot;</span><span class="s0">===</span><span class="s1">h</span><span class="s0">&amp;&amp;!</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">allowTransparency</span><span class="s0">){</span><span class="s5">let </span><span class="s1">e</span><span class="s0">=</span><span class="s1">v</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">getImageData</span><span class="s0">(</span><span class="s1">E</span><span class="s0">,</span><span class="s1">E</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCellWidth</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCellHeight</span><span class="s0">),</span><span class="s1">y</span><span class="s0">,</span><span class="s1">k</span><span class="s0">,</span><span class="s1">P</span><span class="s0">);</span><span class="s5">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)</span><span class="s5">for</span><span class="s0">(</span><span class="s5">let </span><span class="s1">t</span><span class="s0">=</span><span class="s3">1</span><span class="s0">;</span><span class="s1">t</span><span class="s0">&lt;=</span><span class="s3">5</span><span class="s0">&amp;&amp;(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">save</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">fillStyle</span><span class="s0">=</span><span class="s1">y</span><span class="s0">.</span><span class="s1">css</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">fillRect</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCanvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCanvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">restore</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">fillText</span><span class="s0">(</span><span class="s1">h</span><span class="s0">,</span><span class="s1">E</span><span class="s0">,</span><span class="s1">E</span><span class="s0">+</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCharHeight</span><span class="s0">-</span><span class="s1">t</span><span class="s0">),</span><span class="s1">e</span><span class="s0">=</span><span class="s1">v</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">getImageData</span><span class="s0">(</span><span class="s1">E</span><span class="s0">,</span><span class="s1">E</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCellWidth</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCellHeight</span><span class="s0">),</span><span class="s1">y</span><span class="s0">,</span><span class="s1">k</span><span class="s0">,</span><span class="s1">P</span><span class="s0">),</span><span class="s1">e</span><span class="s0">);</span><span class="s1">t</span><span class="s0">++);}</span><span class="s5">if</span><span class="s0">(</span><span class="s1">x</span><span class="s0">){</span><span class="s5">const </span><span class="s1">e</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">max</span><span class="s0">(</span><span class="s3">1</span><span class="s0">,</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">floor</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">fontSize</span><span class="s0">*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">devicePixelRatio</span><span class="s0">/</span><span class="s3">10</span><span class="s0">)),</span><span class="s1">t</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">lineWidth</span><span class="s0">%</span><span class="s3">2</span><span class="s0">==</span><span class="s3">1</span><span class="s0">?</span><span class="s3">.5</span><span class="s0">:</span><span class="s3">0</span><span class="s0">;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">lineWidth</span><span class="s0">=</span><span class="s1">e</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">strokeStyle</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">fillStyle</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">beginPath</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">moveTo</span><span class="s0">(</span><span class="s1">E</span><span class="s0">,</span><span class="s1">E</span><span class="s0">+</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">floor</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCharHeight</span><span class="s0">/</span><span class="s3">2</span><span class="s0">)-</span><span class="s1">t</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">lineTo</span><span class="s0">(</span><span class="s1">E</span><span class="s0">+</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCharWidth</span><span class="s0">*</span><span class="s1">$</span><span class="s0">,</span><span class="s1">E</span><span class="s0">+</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">floor</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCharHeight</span><span class="s0">/</span><span class="s3">2</span><span class="s0">)-</span><span class="s1">t</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">stroke</span><span class="s0">()}</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">restore</span><span class="s0">();</span><span class="s5">const </span><span class="s1">O</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">getImageData</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCanvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCanvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">);</span><span class="s5">let </span><span class="s1">I</span><span class="s0">;</span><span class="s5">if</span><span class="s0">(</span><span class="s1">I</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">allowTransparency</span><span class="s0">?</span><span class="s5">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">for</span><span class="s0">(</span><span class="s5">let </span><span class="s1">t</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">t</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">data</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">t</span><span class="s0">+=</span><span class="s3">4</span><span class="s0">)</span><span class="s5">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">data</span><span class="s0">[</span><span class="s1">t</span><span class="s0">+</span><span class="s3">3</span><span class="s0">]&gt;</span><span class="s3">0</span><span class="s0">)</span><span class="s5">return</span><span class="s0">!</span><span class="s3">1</span><span class="s0">;</span><span class="s5">return</span><span class="s0">!</span><span class="s3">0</span><span class="s0">}(</span><span class="s1">O</span><span class="s0">):</span><span class="s1">v</span><span class="s0">(</span><span class="s1">O</span><span class="s0">,</span><span class="s1">y</span><span class="s0">,</span><span class="s1">k</span><span class="s0">,</span><span class="s1">P</span><span class="s0">),</span><span class="s1">I</span><span class="s0">)</span><span class="s5">return </span><span class="s1">_</span><span class="s0">;</span><span class="s5">const </span><span class="s1">F</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_findGlyphBoundingBox</span><span class="s0">(</span><span class="s1">O</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_workBoundingBox</span><span class="s0">,</span><span class="s1">l</span><span class="s0">,</span><span class="s1">T</span><span class="s0">,</span><span class="s1">B</span><span class="s0">,</span><span class="s1">E</span><span class="s0">);</span><span class="s5">let </span><span class="s1">W</span><span class="s0">,</span><span class="s1">H</span><span class="s0">;</span><span class="s5">for</span><span class="s0">(;;){</span><span class="s5">if</span><span class="s0">(</span><span class="s3">0</span><span class="s0">===</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_activePages</span><span class="s0">.</span><span class="s1">length</span><span class="s0">){</span><span class="s5">const </span><span class="s1">e</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_createNewPage</span><span class="s0">();</span><span class="s1">W</span><span class="s0">=</span><span class="s1">e</span><span class="s0">,</span><span class="s1">H</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">currentRow</span><span class="s0">,</span><span class="s1">H</span><span class="s0">.</span><span class="s1">height</span><span class="s0">=</span><span class="s1">F</span><span class="s0">.</span><span class="s1">size</span><span class="s0">.</span><span class="s1">y</span><span class="s0">;</span><span class="s5">break</span><span class="s0">}</span><span class="s1">W</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_activePages</span><span class="s0">[</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_activePages</span><span class="s0">.</span><span class="s1">length</span><span class="s0">-</span><span class="s3">1</span><span class="s0">],</span><span class="s1">H</span><span class="s0">=</span><span class="s1">W</span><span class="s0">.</span><span class="s1">currentRow</span><span class="s0">;</span><span class="s5">for</span><span class="s0">(</span><span class="s5">const </span><span class="s1">e of </span><span class="s5">this</span><span class="s0">.</span><span class="s1">_activePages</span><span class="s0">)</span><span class="s1">F</span><span class="s0">.</span><span class="s1">size</span><span class="s0">.</span><span class="s1">y</span><span class="s0">&lt;=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">currentRow</span><span class="s0">.</span><span class="s1">height</span><span class="s0">&amp;&amp;(</span><span class="s1">W</span><span class="s0">=</span><span class="s1">e</span><span class="s0">,</span><span class="s1">H</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">currentRow</span><span class="s0">);</span><span class="s5">for</span><span class="s0">(</span><span class="s5">let </span><span class="s1">e</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_activePages</span><span class="s0">.</span><span class="s1">length</span><span class="s0">-</span><span class="s3">1</span><span class="s0">;</span><span class="s1">e</span><span class="s0">&gt;=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">e</span><span class="s0">--)</span><span class="s5">for</span><span class="s0">(</span><span class="s5">const </span><span class="s1">t of </span><span class="s5">this</span><span class="s0">.</span><span class="s1">_activePages</span><span class="s0">[</span><span class="s1">e</span><span class="s0">].</span><span class="s1">fixedRows</span><span class="s0">)</span><span class="s1">t</span><span class="s0">.</span><span class="s1">height</span><span class="s0">&lt;=</span><span class="s1">H</span><span class="s0">.</span><span class="s1">height</span><span class="s0">&amp;&amp;</span><span class="s1">F</span><span class="s0">.</span><span class="s1">size</span><span class="s0">.</span><span class="s1">y</span><span class="s0">&lt;=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">height</span><span class="s0">&amp;&amp;(</span><span class="s1">W</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_activePages</span><span class="s0">[</span><span class="s1">e</span><span class="s0">],</span><span class="s1">H</span><span class="s0">=</span><span class="s1">t</span><span class="s0">);</span><span class="s5">if</span><span class="s0">(</span><span class="s1">H</span><span class="s0">.</span><span class="s1">y</span><span class="s0">+</span><span class="s1">F</span><span class="s0">.</span><span class="s1">size</span><span class="s0">.</span><span class="s1">y</span><span class="s0">&gt;=</span><span class="s1">W</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">||</span><span class="s1">H</span><span class="s0">.</span><span class="s1">height</span><span class="s0">&gt;</span><span class="s1">F</span><span class="s0">.</span><span class="s1">size</span><span class="s0">.</span><span class="s1">y</span><span class="s0">+</span><span class="s3">2</span><span class="s0">){</span><span class="s5">let </span><span class="s1">e</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">;</span><span class="s5">if</span><span class="s0">(</span><span class="s1">W</span><span class="s0">.</span><span class="s1">currentRow</span><span class="s0">.</span><span class="s1">y</span><span class="s0">+</span><span class="s1">W</span><span class="s0">.</span><span class="s1">currentRow</span><span class="s0">.</span><span class="s1">height</span><span class="s0">+</span><span class="s1">F</span><span class="s0">.</span><span class="s1">size</span><span class="s0">.</span><span class="s1">y</span><span class="s0">&gt;=</span><span class="s1">W</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">){</span><span class="s5">let </span><span class="s1">t</span><span class="s0">;</span><span class="s5">for</span><span class="s0">(</span><span class="s5">const </span><span class="s1">e of </span><span class="s5">this</span><span class="s0">.</span><span class="s1">_activePages</span><span class="s0">)</span><span class="s5">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">currentRow</span><span class="s0">.</span><span class="s1">y</span><span class="s0">+</span><span class="s1">e</span><span class="s0">.</span><span class="s1">currentRow</span><span class="s0">.</span><span class="s1">height</span><span class="s0">+</span><span class="s1">F</span><span class="s0">.</span><span class="s1">size</span><span class="s0">.</span><span class="s1">y</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">){</span><span class="s1">t</span><span class="s0">=</span><span class="s1">e</span><span class="s0">;</span><span class="s5">break</span><span class="s0">}</span><span class="s5">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)</span><span class="s1">W</span><span class="s0">=</span><span class="s1">t</span><span class="s0">;</span><span class="s5">else if</span><span class="s0">(</span><span class="s1">g</span><span class="s0">.</span><span class="s1">maxAtlasPages</span><span class="s0">&amp;&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_pages</span><span class="s0">.</span><span class="s1">length</span><span class="s0">&gt;=</span><span class="s1">g</span><span class="s0">.</span><span class="s1">maxAtlasPages</span><span class="s0">&amp;&amp;</span><span class="s1">H</span><span class="s0">.</span><span class="s1">y</span><span class="s0">+</span><span class="s1">F</span><span class="s0">.</span><span class="s1">size</span><span class="s0">.</span><span class="s1">y</span><span class="s0">&lt;=</span><span class="s1">W</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">&amp;&amp;</span><span class="s1">H</span><span class="s0">.</span><span class="s1">height</span><span class="s0">&gt;=</span><span class="s1">F</span><span class="s0">.</span><span class="s1">size</span><span class="s0">.</span><span class="s1">y</span><span class="s0">&amp;&amp;</span><span class="s1">H</span><span class="s0">.</span><span class="s1">x</span><span class="s0">+</span><span class="s1">F</span><span class="s0">.</span><span class="s1">size</span><span class="s0">.</span><span class="s1">x</span><span class="s0">&lt;=</span><span class="s1">W</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">)</span><span class="s1">e</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">;</span><span class="s5">else</span><span class="s0">{</span><span class="s5">const </span><span class="s1">t</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_createNewPage</span><span class="s0">();</span><span class="s1">W</span><span class="s0">=</span><span class="s1">t</span><span class="s0">,</span><span class="s1">H</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">currentRow</span><span class="s0">,</span><span class="s1">H</span><span class="s0">.</span><span class="s1">height</span><span class="s0">=</span><span class="s1">F</span><span class="s0">.</span><span class="s1">size</span><span class="s0">.</span><span class="s1">y</span><span class="s0">,</span><span class="s1">e</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">}}</span><span class="s1">e</span><span class="s0">||(</span><span class="s1">W</span><span class="s0">.</span><span class="s1">currentRow</span><span class="s0">.</span><span class="s1">height</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">&amp;&amp;</span><span class="s1">W</span><span class="s0">.</span><span class="s1">fixedRows</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">W</span><span class="s0">.</span><span class="s1">currentRow</span><span class="s0">),</span><span class="s1">H</span><span class="s0">={</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s1">W</span><span class="s0">.</span><span class="s1">currentRow</span><span class="s0">.</span><span class="s1">y</span><span class="s0">+</span><span class="s1">W</span><span class="s0">.</span><span class="s1">currentRow</span><span class="s0">.</span><span class="s1">height</span><span class="s0">,</span><span class="s1">height</span><span class="s0">:</span><span class="s1">F</span><span class="s0">.</span><span class="s1">size</span><span class="s0">.</span><span class="s1">y</span><span class="s0">},</span><span class="s1">W</span><span class="s0">.</span><span class="s1">fixedRows</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">H</span><span class="s0">),</span><span class="s1">W</span><span class="s0">.</span><span class="s1">currentRow</span><span class="s0">={</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s1">H</span><span class="s0">.</span><span class="s1">y</span><span class="s0">+</span><span class="s1">H</span><span class="s0">.</span><span class="s1">height</span><span class="s0">,</span><span class="s1">height</span><span class="s0">:</span><span class="s3">0</span><span class="s0">})}</span><span class="s5">if</span><span class="s0">(</span><span class="s1">H</span><span class="s0">.</span><span class="s1">x</span><span class="s0">+</span><span class="s1">F</span><span class="s0">.</span><span class="s1">size</span><span class="s0">.</span><span class="s1">x</span><span class="s0">&lt;=</span><span class="s1">W</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">)</span><span class="s5">break</span><span class="s0">;</span><span class="s1">H</span><span class="s0">===</span><span class="s1">W</span><span class="s0">.</span><span class="s1">currentRow</span><span class="s0">?(</span><span class="s1">H</span><span class="s0">.</span><span class="s1">x</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">H</span><span class="s0">.</span><span class="s1">y</span><span class="s0">+=</span><span class="s1">H</span><span class="s0">.</span><span class="s1">height</span><span class="s0">,</span><span class="s1">H</span><span class="s0">.</span><span class="s1">height</span><span class="s0">=</span><span class="s3">0</span><span class="s0">):</span><span class="s1">W</span><span class="s0">.</span><span class="s1">fixedRows</span><span class="s0">.</span><span class="s1">splice</span><span class="s0">(</span><span class="s1">W</span><span class="s0">.</span><span class="s1">fixedRows</span><span class="s0">.</span><span class="s1">indexOf</span><span class="s0">(</span><span class="s1">H</span><span class="s0">),</span><span class="s3">1</span><span class="s0">)}</span><span class="s5">return </span><span class="s1">F</span><span class="s0">.</span><span class="s1">texturePage</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_pages</span><span class="s0">.</span><span class="s1">indexOf</span><span class="s0">(</span><span class="s1">W</span><span class="s0">),</span><span class="s1">F</span><span class="s0">.</span><span class="s1">texturePosition</span><span class="s0">.</span><span class="s1">x</span><span class="s0">=</span><span class="s1">H</span><span class="s0">.</span><span class="s1">x</span><span class="s0">,</span><span class="s1">F</span><span class="s0">.</span><span class="s1">texturePosition</span><span class="s0">.</span><span class="s1">y</span><span class="s0">=</span><span class="s1">H</span><span class="s0">.</span><span class="s1">y</span><span class="s0">,</span><span class="s1">F</span><span class="s0">.</span><span class="s1">texturePositionClipSpace</span><span class="s0">.</span><span class="s1">x</span><span class="s0">=</span><span class="s1">H</span><span class="s0">.</span><span class="s1">x</span><span class="s0">/</span><span class="s1">W</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">,</span><span class="s1">F</span><span class="s0">.</span><span class="s1">texturePositionClipSpace</span><span class="s0">.</span><span class="s1">y</span><span class="s0">=</span><span class="s1">H</span><span class="s0">.</span><span class="s1">y</span><span class="s0">/</span><span class="s1">W</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">,</span><span class="s1">F</span><span class="s0">.</span><span class="s1">sizeClipSpace</span><span class="s0">.</span><span class="s1">x</span><span class="s0">/=</span><span class="s1">W</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">,</span><span class="s1">F</span><span class="s0">.</span><span class="s1">sizeClipSpace</span><span class="s0">.</span><span class="s1">y</span><span class="s0">/=</span><span class="s1">W</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">,</span><span class="s1">H</span><span class="s0">.</span><span class="s1">height</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">max</span><span class="s0">(</span><span class="s1">H</span><span class="s0">.</span><span class="s1">height</span><span class="s0">,</span><span class="s1">F</span><span class="s0">.</span><span class="s1">size</span><span class="s0">.</span><span class="s1">y</span><span class="s0">),</span><span class="s1">H</span><span class="s0">.</span><span class="s1">x</span><span class="s0">+=</span><span class="s1">F</span><span class="s0">.</span><span class="s1">size</span><span class="s0">.</span><span class="s1">x</span><span class="s0">,</span><span class="s1">W</span><span class="s0">.</span><span class="s1">ctx</span><span class="s0">.</span><span class="s1">putImageData</span><span class="s0">(</span><span class="s1">O</span><span class="s0">,</span><span class="s1">F</span><span class="s0">.</span><span class="s1">texturePosition</span><span class="s0">.</span><span class="s1">x</span><span class="s0">-</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_workBoundingBox</span><span class="s0">.</span><span class="s1">left</span><span class="s0">,</span><span class="s1">F</span><span class="s0">.</span><span class="s1">texturePosition</span><span class="s0">.</span><span class="s1">y</span><span class="s0">-</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_workBoundingBox</span><span class="s0">.</span><span class="s1">top</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_workBoundingBox</span><span class="s0">.</span><span class="s1">left</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_workBoundingBox</span><span class="s0">.</span><span class="s1">top</span><span class="s0">,</span><span class="s1">F</span><span class="s0">.</span><span class="s1">size</span><span class="s0">.</span><span class="s1">x</span><span class="s0">,</span><span class="s1">F</span><span class="s0">.</span><span class="s1">size</span><span class="s0">.</span><span class="s1">y</span><span class="s0">),</span><span class="s1">W</span><span class="s0">.</span><span class="s1">addGlyph</span><span class="s0">(</span><span class="s1">F</span><span class="s0">),</span><span class="s1">W</span><span class="s0">.</span><span class="s1">version</span><span class="s0">++,</span><span class="s1">F</span><span class="s0">}</span><span class="s1">_findGlyphBoundingBox</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">){</span><span class="s1">t</span><span class="s0">.</span><span class="s1">top</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s5">const </span><span class="s1">n</span><span class="s0">=</span><span class="s1">s</span><span class="s0">?</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCellHeight</span><span class="s0">:</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCanvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">,</span><span class="s1">a</span><span class="s0">=</span><span class="s1">s</span><span class="s0">?</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCellWidth</span><span class="s0">:</span><span class="s1">i</span><span class="s0">;</span><span class="s5">let </span><span class="s1">h</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">;</span><span class="s5">for</span><span class="s0">(</span><span class="s5">let </span><span class="s1">i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">i</span><span class="s0">&lt;</span><span class="s1">n</span><span class="s0">;</span><span class="s1">i</span><span class="s0">++){</span><span class="s5">for</span><span class="s0">(</span><span class="s5">let </span><span class="s1">s</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">s</span><span class="s0">&lt;</span><span class="s1">a</span><span class="s0">;</span><span class="s1">s</span><span class="s0">++){</span><span class="s5">const </span><span class="s1">r</span><span class="s0">=</span><span class="s1">i</span><span class="s0">*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCanvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">*</span><span class="s3">4</span><span class="s0">+</span><span class="s3">4</span><span class="s0">*</span><span class="s1">s</span><span class="s0">+</span><span class="s3">3</span><span class="s0">;</span><span class="s5">if</span><span class="s0">(</span><span class="s3">0</span><span class="s0">!==</span><span class="s1">e</span><span class="s0">.</span><span class="s1">data</span><span class="s0">[</span><span class="s1">r</span><span class="s0">]){</span><span class="s1">t</span><span class="s0">.</span><span class="s1">top</span><span class="s0">=</span><span class="s1">i</span><span class="s0">,</span><span class="s1">h</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">;</span><span class="s5">break</span><span class="s0">}}</span><span class="s5">if</span><span class="s0">(</span><span class="s1">h</span><span class="s0">)</span><span class="s5">break</span><span class="s0">}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">left</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">h</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">;</span><span class="s5">for</span><span class="s0">(</span><span class="s5">let </span><span class="s1">i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">i</span><span class="s0">&lt;</span><span class="s1">o</span><span class="s0">+</span><span class="s1">a</span><span class="s0">;</span><span class="s1">i</span><span class="s0">++){</span><span class="s5">for</span><span class="s0">(</span><span class="s5">let </span><span class="s1">s</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">s</span><span class="s0">&lt;</span><span class="s1">n</span><span class="s0">;</span><span class="s1">s</span><span class="s0">++){</span><span class="s5">const </span><span class="s1">r</span><span class="s0">=</span><span class="s1">s</span><span class="s0">*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCanvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">*</span><span class="s3">4</span><span class="s0">+</span><span class="s3">4</span><span class="s0">*</span><span class="s1">i</span><span class="s0">+</span><span class="s3">3</span><span class="s0">;</span><span class="s5">if</span><span class="s0">(</span><span class="s3">0</span><span class="s0">!==</span><span class="s1">e</span><span class="s0">.</span><span class="s1">data</span><span class="s0">[</span><span class="s1">r</span><span class="s0">]){</span><span class="s1">t</span><span class="s0">.</span><span class="s1">left</span><span class="s0">=</span><span class="s1">i</span><span class="s0">,</span><span class="s1">h</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">;</span><span class="s5">break</span><span class="s0">}}</span><span class="s5">if</span><span class="s0">(</span><span class="s1">h</span><span class="s0">)</span><span class="s5">break</span><span class="s0">}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">right</span><span class="s0">=</span><span class="s1">a</span><span class="s0">,</span><span class="s1">h</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">;</span><span class="s5">for</span><span class="s0">(</span><span class="s5">let </span><span class="s1">i</span><span class="s0">=</span><span class="s1">o</span><span class="s0">+</span><span class="s1">a</span><span class="s0">-</span><span class="s3">1</span><span class="s0">;</span><span class="s1">i</span><span class="s0">&gt;=</span><span class="s1">o</span><span class="s0">;</span><span class="s1">i</span><span class="s0">--){</span><span class="s5">for</span><span class="s0">(</span><span class="s5">let </span><span class="s1">s</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">s</span><span class="s0">&lt;</span><span class="s1">n</span><span class="s0">;</span><span class="s1">s</span><span class="s0">++){</span><span class="s5">const </span><span class="s1">r</span><span class="s0">=</span><span class="s1">s</span><span class="s0">*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCanvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">*</span><span class="s3">4</span><span class="s0">+</span><span class="s3">4</span><span class="s0">*</span><span class="s1">i</span><span class="s0">+</span><span class="s3">3</span><span class="s0">;</span><span class="s5">if</span><span class="s0">(</span><span class="s3">0</span><span class="s0">!==</span><span class="s1">e</span><span class="s0">.</span><span class="s1">data</span><span class="s0">[</span><span class="s1">r</span><span class="s0">]){</span><span class="s1">t</span><span class="s0">.</span><span class="s1">right</span><span class="s0">=</span><span class="s1">i</span><span class="s0">,</span><span class="s1">h</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">;</span><span class="s5">break</span><span class="s0">}}</span><span class="s5">if</span><span class="s0">(</span><span class="s1">h</span><span class="s0">)</span><span class="s5">break</span><span class="s0">}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">bottom</span><span class="s0">=</span><span class="s1">n</span><span class="s0">,</span><span class="s1">h</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">;</span><span class="s5">for</span><span class="s0">(</span><span class="s5">let </span><span class="s1">i</span><span class="s0">=</span><span class="s1">n</span><span class="s0">-</span><span class="s3">1</span><span class="s0">;</span><span class="s1">i</span><span class="s0">&gt;=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">i</span><span class="s0">--){</span><span class="s5">for</span><span class="s0">(</span><span class="s5">let </span><span class="s1">s</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">s</span><span class="s0">&lt;</span><span class="s1">a</span><span class="s0">;</span><span class="s1">s</span><span class="s0">++){</span><span class="s5">const </span><span class="s1">r</span><span class="s0">=</span><span class="s1">i</span><span class="s0">*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tmpCanvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">*</span><span class="s3">4</span><span class="s0">+</span><span class="s3">4</span><span class="s0">*</span><span class="s1">s</span><span class="s0">+</span><span class="s3">3</span><span class="s0">;</span><span class="s5">if</span><span class="s0">(</span><span class="s3">0</span><span class="s0">!==</span><span class="s1">e</span><span class="s0">.</span><span class="s1">data</span><span class="s0">[</span><span class="s1">r</span><span class="s0">]){</span><span class="s1">t</span><span class="s0">.</span><span class="s1">bottom</span><span class="s0">=</span><span class="s1">i</span><span class="s0">,</span><span class="s1">h</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">;</span><span class="s5">break</span><span class="s0">}}</span><span class="s5">if</span><span class="s0">(</span><span class="s1">h</span><span class="s0">)</span><span class="s5">break</span><span class="s0">}</span><span class="s5">return</span><span class="s0">{</span><span class="s1">texturePage</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">texturePosition</span><span class="s0">:{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">},</span><span class="s1">texturePositionClipSpace</span><span class="s0">:{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">},</span><span class="s1">size</span><span class="s0">:{</span><span class="s1">x</span><span class="s0">:</span><span class="s1">t</span><span class="s0">.</span><span class="s1">right</span><span class="s0">-</span><span class="s1">t</span><span class="s0">.</span><span class="s1">left</span><span class="s0">+</span><span class="s3">1</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s1">t</span><span class="s0">.</span><span class="s1">bottom</span><span class="s0">-</span><span class="s1">t</span><span class="s0">.</span><span class="s1">top</span><span class="s0">+</span><span class="s3">1</span><span class="s0">},</span><span class="s1">sizeClipSpace</span><span class="s0">:{</span><span class="s1">x</span><span class="s0">:</span><span class="s1">t</span><span class="s0">.</span><span class="s1">right</span><span class="s0">-</span><span class="s1">t</span><span class="s0">.</span><span class="s1">left</span><span class="s0">+</span><span class="s3">1</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s1">t</span><span class="s0">.</span><span class="s1">bottom</span><span class="s0">-</span><span class="s1">t</span><span class="s0">.</span><span class="s1">top</span><span class="s0">+</span><span class="s3">1</span><span class="s0">},</span><span class="s1">offset</span><span class="s0">:{</span><span class="s1">x</span><span class="s0">:-</span><span class="s1">t</span><span class="s0">.</span><span class="s1">left</span><span class="s0">+</span><span class="s1">o</span><span class="s0">+(</span><span class="s1">s</span><span class="s0">||</span><span class="s1">r</span><span class="s0">?</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">floor</span><span class="s0">((</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCellWidth</span><span class="s0">-</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCharWidth</span><span class="s0">)/</span><span class="s3">2</span><span class="s0">):</span><span class="s3">0</span><span class="s0">),</span><span class="s1">y</span><span class="s0">:-</span><span class="s1">t</span><span class="s0">.</span><span class="s1">top</span><span class="s0">+</span><span class="s1">o</span><span class="s0">+(</span><span class="s1">s</span><span class="s0">||</span><span class="s1">r</span><span class="s0">?</span><span class="s3">1</span><span class="s0">===</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">lineHeight</span><span class="s0">?</span><span class="s3">0</span><span class="s0">:</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">round</span><span class="s0">((</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCellHeight</span><span class="s0">-</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCharHeight</span><span class="s0">)/</span><span class="s3">2</span><span class="s0">):</span><span class="s3">0</span><span class="s0">)}}}}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">TextureAtlas</span><span class="s0">=</span><span class="s1">g</span><span class="s0">;</span><span class="s5">class </span><span class="s1">f</span><span class="s0">{</span><span class="s1">get percentageUsed</span><span class="s0">(){</span><span class="s5">return this</span><span class="s0">.</span><span class="s1">_usedPixels</span><span class="s0">/(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">*</span><span class="s5">this</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">)}</span><span class="s1">get glyphs</span><span class="s0">(){</span><span class="s5">return this</span><span class="s0">.</span><span class="s1">_glyphs</span><span class="s0">}</span><span class="s1">addGlyph</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_glyphs</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">e</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_usedPixels</span><span class="s0">+=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">size</span><span class="s0">.</span><span class="s1">x</span><span class="s0">*</span><span class="s1">e</span><span class="s0">.</span><span class="s1">size</span><span class="s0">.</span><span class="s1">y</span><span class="s0">}</span><span class="s1">constructor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s5">if</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_usedPixels</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_glyphs</span><span class="s0">=[],</span><span class="s5">this</span><span class="s0">.</span><span class="s1">version</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">currentRow</span><span class="s0">={</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">height</span><span class="s0">:</span><span class="s3">0</span><span class="s0">},</span><span class="s5">this</span><span class="s0">.</span><span class="s1">fixedRows</span><span class="s0">=[],</span><span class="s1">i</span><span class="s0">)</span><span class="s5">for</span><span class="s0">(</span><span class="s5">const </span><span class="s1">e of i</span><span class="s0">)</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_glyphs</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">...e</span><span class="s0">.</span><span class="s1">glyphs</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_usedPixels</span><span class="s0">+=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">_usedPixels</span><span class="s0">;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">=</span><span class="s1">C</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">t</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">ctx</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">o</span><span class="s0">.</span><span class="s1">throwIfFalsy</span><span class="s0">)(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">getContext</span><span class="s0">(</span><span class="s2">&quot;2d&quot;</span><span class="s0">,{</span><span class="s1">alpha</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}))}</span><span class="s1">clear</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">ctx</span><span class="s0">.</span><span class="s1">clearRect</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">currentRow</span><span class="s0">.</span><span class="s1">x</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">currentRow</span><span class="s0">.</span><span class="s1">y</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">currentRow</span><span class="s0">.</span><span class="s1">height</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">fixedRows</span><span class="s0">.</span><span class="s1">length</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">version</span><span class="s0">++}}</span><span class="s5">function </span><span class="s1">v</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">){</span><span class="s5">const </span><span class="s1">r</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">&gt;&gt;&gt;</span><span class="s3">24</span><span class="s0">,</span><span class="s1">o</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">&gt;&gt;&gt;</span><span class="s3">16</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">n</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">&gt;&gt;&gt;</span><span class="s3">8</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">a</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">&gt;&gt;&gt;</span><span class="s3">24</span><span class="s0">,</span><span class="s1">h</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">&gt;&gt;&gt;</span><span class="s3">16</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">l</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">&gt;&gt;&gt;</span><span class="s3">8</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">c</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">floor</span><span class="s0">((</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">abs</span><span class="s0">(</span><span class="s1">r</span><span class="s0">-</span><span class="s1">a</span><span class="s0">)+</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">abs</span><span class="s0">(</span><span class="s1">o</span><span class="s0">-</span><span class="s1">h</span><span class="s0">)+</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">abs</span><span class="s0">(</span><span class="s1">n</span><span class="s0">-</span><span class="s1">l</span><span class="s0">))/</span><span class="s3">12</span><span class="s0">);</span><span class="s5">let </span><span class="s1">d</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">;</span><span class="s5">for</span><span class="s0">(</span><span class="s5">let </span><span class="s1">t</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">t</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">data</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">t</span><span class="s0">+=</span><span class="s3">4</span><span class="s0">)</span><span class="s1">e</span><span class="s0">.</span><span class="s1">data</span><span class="s0">[</span><span class="s1">t</span><span class="s0">]===</span><span class="s1">r</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">data</span><span class="s0">[</span><span class="s1">t</span><span class="s0">+</span><span class="s3">1</span><span class="s0">]===</span><span class="s1">o</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">data</span><span class="s0">[</span><span class="s1">t</span><span class="s0">+</span><span class="s3">2</span><span class="s0">]===</span><span class="s1">n</span><span class="s0">||</span><span class="s1">s</span><span class="s0">&amp;&amp;</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">abs</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">data</span><span class="s0">[</span><span class="s1">t</span><span class="s0">]-</span><span class="s1">r</span><span class="s0">)+</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">abs</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">data</span><span class="s0">[</span><span class="s1">t</span><span class="s0">+</span><span class="s3">1</span><span class="s0">]-</span><span class="s1">o</span><span class="s0">)+</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">abs</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">data</span><span class="s0">[</span><span class="s1">t</span><span class="s0">+</span><span class="s3">2</span><span class="s0">]-</span><span class="s1">n</span><span class="s0">)&lt;</span><span class="s1">c</span><span class="s0">?</span><span class="s1">e</span><span class="s0">.</span><span class="s1">data</span><span class="s0">[</span><span class="s1">t</span><span class="s0">+</span><span class="s3">3</span><span class="s0">]=</span><span class="s3">0</span><span class="s0">:</span><span class="s1">d</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">;</span><span class="s5">return </span><span class="s1">d</span><span class="s0">}</span><span class="s5">function </span><span class="s1">C</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s5">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">createElement</span><span class="s0">(</span><span class="s2">&quot;canvas&quot;</span><span class="s0">);</span><span class="s5">return </span><span class="s1">s</span><span class="s0">.</span><span class="s1">width</span><span class="s0">=</span><span class="s1">t</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">height</span><span class="s0">=</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">}},</span><span class="s3">577</span><span class="s0">:</span><span class="s5">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s5">var </span><span class="s1">s</span><span class="s0">=</span><span class="s5">this</span><span class="s0">&amp;&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">__decorate</span><span class="s0">||</span><span class="s5">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">){</span><span class="s5">var </span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">=</span><span class="s1">arguments</span><span class="s0">.</span><span class="s1">length</span><span class="s0">,</span><span class="s1">n</span><span class="s0">=</span><span class="s1">o</span><span class="s0">&lt;</span><span class="s3">3</span><span class="s0">?</span><span class="s1">t</span><span class="s0">:</span><span class="s5">null</span><span class="s0">===</span><span class="s1">s</span><span class="s0">?</span><span class="s1">s</span><span class="s0">=</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">getOwnPropertyDescriptor</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">):</span><span class="s1">s</span><span class="s0">;</span><span class="s5">if</span><span class="s0">(</span><span class="s2">&quot;object&quot;</span><span class="s0">==</span><span class="s5">typeof </span><span class="s1">Reflect</span><span class="s0">&amp;&amp;</span><span class="s2">&quot;function&quot;</span><span class="s0">==</span><span class="s5">typeof </span><span class="s1">Reflect</span><span class="s0">.</span><span class="s1">decorate</span><span class="s0">)</span><span class="s1">n</span><span class="s0">=</span><span class="s1">Reflect</span><span class="s0">.</span><span class="s1">decorate</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">);</span><span class="s5">else for</span><span class="s0">(</span><span class="s5">var </span><span class="s1">a</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">-</span><span class="s3">1</span><span class="s0">;</span><span class="s1">a</span><span class="s0">&gt;=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">a</span><span class="s0">--)(</span><span class="s1">r</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">a</span><span class="s0">])&amp;&amp;(</span><span class="s1">n</span><span class="s0">=(</span><span class="s1">o</span><span class="s0">&lt;</span><span class="s3">3</span><span class="s0">?</span><span class="s1">r</span><span class="s0">(</span><span class="s1">n</span><span class="s0">):</span><span class="s1">o</span><span class="s0">&gt;</span><span class="s3">3</span><span class="s0">?</span><span class="s1">r</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">n</span><span class="s0">):</span><span class="s1">r</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">))||</span><span class="s1">n</span><span class="s0">);</span><span class="s5">return </span><span class="s1">o</span><span class="s0">&gt;</span><span class="s3">3</span><span class="s0">&amp;&amp;</span><span class="s1">n</span><span class="s0">&amp;&amp;</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">n</span><span class="s0">),</span><span class="s1">n</span><span class="s0">},</span><span class="s1">r</span><span class="s0">=</span><span class="s5">this</span><span class="s0">&amp;&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">__param</span><span class="s0">||</span><span class="s5">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">){</span><span class="s5">return function</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">){</span><span class="s1">t</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">e</span><span class="s0">)}};</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">CharacterJoinerService</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">JoinedCellData</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">;</span><span class="s5">const </span><span class="s1">o</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">147</span><span class="s0">),</span><span class="s1">n</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">855</span><span class="s0">),</span><span class="s1">a</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">782</span><span class="s0">),</span><span class="s1">h</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">97</span><span class="s0">);</span><span class="s5">class </span><span class="s1">l </span><span class="s5">extends </span><span class="s1">o</span><span class="s0">.</span><span class="s1">AttributeData</span><span class="s0">{</span><span class="s1">constructor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s5">super</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">content</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">combinedData</span><span class="s0">=</span><span class="s2">&quot;&quot;</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">combinedData</span><span class="s0">=</span><span class="s1">t</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_width</span><span class="s0">=</span><span class="s1">i</span><span class="s0">}</span><span class="s1">isCombined</span><span class="s0">(){</span><span class="s5">return </span><span class="s3">2097152</span><span class="s0">}</span><span class="s1">getWidth</span><span class="s0">(){</span><span class="s5">return this</span><span class="s0">.</span><span class="s1">_width</span><span class="s0">}</span><span class="s1">getChars</span><span class="s0">(){</span><span class="s5">return this</span><span class="s0">.</span><span class="s1">combinedData</span><span class="s0">}</span><span class="s1">getCode</span><span class="s0">(){</span><span class="s5">return </span><span class="s3">2097151</span><span class="s0">}</span><span class="s1">setFromCharData</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">throw new </span><span class="s1">Error</span><span class="s0">(</span><span class="s2">&quot;not implemented&quot;</span><span class="s0">)}</span><span class="s1">getAsCharData</span><span class="s0">(){</span><span class="s5">return</span><span class="s0">[</span><span class="s5">this</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">getChars</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">getWidth</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">getCode</span><span class="s0">()]}}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">JoinedCellData</span><span class="s0">=</span><span class="s1">l</span><span class="s0">;</span><span class="s5">let </span><span class="s1">c</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">CharacterJoinerService</span><span class="s0">=</span><span class="s5">class </span><span class="s1">e</span><span class="s0">{</span><span class="s1">constructor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">=</span><span class="s1">e</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_characterJoiners</span><span class="s0">=[],</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_nextCharacterJoinerId</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_workCell</span><span class="s0">=</span><span class="s5">new </span><span class="s1">a</span><span class="s0">.</span><span class="s1">CellData</span><span class="s0">}</span><span class="s1">register</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">const </span><span class="s1">t</span><span class="s0">={</span><span class="s1">id</span><span class="s0">:</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_nextCharacterJoinerId</span><span class="s0">++,</span><span class="s1">handler</span><span class="s0">:</span><span class="s1">e</span><span class="s0">};</span><span class="s5">return this</span><span class="s0">.</span><span class="s1">_characterJoiners</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">t</span><span class="s0">),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">id</span><span class="s0">}</span><span class="s1">deregister</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">for</span><span class="s0">(</span><span class="s5">let </span><span class="s1">t</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">t</span><span class="s0">&lt;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_characterJoiners</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">t</span><span class="s0">++)</span><span class="s5">if</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_characterJoiners</span><span class="s0">[</span><span class="s1">t</span><span class="s0">].</span><span class="s1">id</span><span class="s0">===</span><span class="s1">e</span><span class="s0">)</span><span class="s5">return this</span><span class="s0">.</span><span class="s1">_characterJoiners</span><span class="s0">.</span><span class="s1">splice</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s3">1</span><span class="s0">),!</span><span class="s3">0</span><span class="s0">;</span><span class="s5">return</span><span class="s0">!</span><span class="s3">1</span><span class="s0">}</span><span class="s1">getJoinedCharacters</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">if</span><span class="s0">(</span><span class="s3">0</span><span class="s0">===</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_characterJoiners</span><span class="s0">.</span><span class="s1">length</span><span class="s0">)</span><span class="s5">return</span><span class="s0">[];</span><span class="s5">const </span><span class="s1">t</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">.</span><span class="s1">buffer</span><span class="s0">.</span><span class="s1">lines</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">);</span><span class="s5">if</span><span class="s0">(!</span><span class="s1">t</span><span class="s0">||</span><span class="s3">0</span><span class="s0">===</span><span class="s1">t</span><span class="s0">.</span><span class="s1">length</span><span class="s0">)</span><span class="s5">return</span><span class="s0">[];</span><span class="s5">const </span><span class="s1">i</span><span class="s0">=[],</span><span class="s1">s</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">translateToString</span><span class="s0">(!</span><span class="s3">0</span><span class="s0">);</span><span class="s5">let </span><span class="s1">r</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">o</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">a</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">h</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getFg</span><span class="s0">(</span><span class="s3">0</span><span class="s0">),</span><span class="s1">l</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getBg</span><span class="s0">(</span><span class="s3">0</span><span class="s0">);</span><span class="s5">for</span><span class="s0">(</span><span class="s5">let </span><span class="s1">e</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">e</span><span class="s0">&lt;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getTrimmedLength</span><span class="s0">();</span><span class="s1">e</span><span class="s0">++)</span><span class="s5">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">loadCell</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_workCell</span><span class="s0">),</span><span class="s3">0</span><span class="s0">!==</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_workCell</span><span class="s0">.</span><span class="s1">getWidth</span><span class="s0">()){</span><span class="s5">if</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_workCell</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">!==</span><span class="s1">h</span><span class="s0">||</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_workCell</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">!==</span><span class="s1">l</span><span class="s0">){</span><span class="s5">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">-</span><span class="s1">r</span><span class="s0">&gt;</span><span class="s3">1</span><span class="s0">){</span><span class="s5">const </span><span class="s1">e</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_getJoinedRanges</span><span class="s0">(</span><span class="s1">s</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">r</span><span class="s0">);</span><span class="s5">for</span><span class="s0">(</span><span class="s5">let </span><span class="s1">t</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">t</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">t</span><span class="s0">++)</span><span class="s1">i</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">e</span><span class="s0">[</span><span class="s1">t</span><span class="s0">])}</span><span class="s1">r</span><span class="s0">=</span><span class="s1">e</span><span class="s0">,</span><span class="s1">a</span><span class="s0">=</span><span class="s1">o</span><span class="s0">,</span><span class="s1">h</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_workCell</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">,</span><span class="s1">l</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_workCell</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">}</span><span class="s1">o</span><span class="s0">+=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_workCell</span><span class="s0">.</span><span class="s1">getChars</span><span class="s0">().</span><span class="s1">length</span><span class="s0">||</span><span class="s1">n</span><span class="s0">.</span><span class="s1">WHITESPACE_CELL_CHAR</span><span class="s0">.</span><span class="s1">length</span><span class="s0">}</span><span class="s5">if</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">.</span><span class="s1">cols</span><span class="s0">-</span><span class="s1">r</span><span class="s0">&gt;</span><span class="s3">1</span><span class="s0">){</span><span class="s5">const </span><span class="s1">e</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_getJoinedRanges</span><span class="s0">(</span><span class="s1">s</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">r</span><span class="s0">);</span><span class="s5">for</span><span class="s0">(</span><span class="s5">let </span><span class="s1">t</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">t</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">t</span><span class="s0">++)</span><span class="s1">i</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">e</span><span class="s0">[</span><span class="s1">t</span><span class="s0">])}</span><span class="s5">return </span><span class="s1">i</span><span class="s0">}</span><span class="s1">_getJoinedRanges</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">){</span><span class="s5">const </span><span class="s1">n</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">substring</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">);</span><span class="s5">let </span><span class="s1">a</span><span class="s0">=[];</span><span class="s5">try</span><span class="s0">{</span><span class="s1">a</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_characterJoiners</span><span class="s0">[</span><span class="s3">0</span><span class="s0">].</span><span class="s1">handler</span><span class="s0">(</span><span class="s1">n</span><span class="s0">)}</span><span class="s5">catch</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s1">console</span><span class="s0">.</span><span class="s1">error</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)}</span><span class="s5">for</span><span class="s0">(</span><span class="s5">let </span><span class="s1">t</span><span class="s0">=</span><span class="s3">1</span><span class="s0">;</span><span class="s1">t</span><span class="s0">&lt;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_characterJoiners</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">t</span><span class="s0">++)</span><span class="s5">try</span><span class="s0">{</span><span class="s5">const </span><span class="s1">i</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_characterJoiners</span><span class="s0">[</span><span class="s1">t</span><span class="s0">].</span><span class="s1">handler</span><span class="s0">(</span><span class="s1">n</span><span class="s0">);</span><span class="s5">for</span><span class="s0">(</span><span class="s5">let </span><span class="s1">t</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">t</span><span class="s0">&lt;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">t</span><span class="s0">++)</span><span class="s1">e</span><span class="s0">.</span><span class="s1">_mergeRanges</span><span class="s0">(</span><span class="s1">a</span><span class="s0">,</span><span class="s1">i</span><span class="s0">[</span><span class="s1">t</span><span class="s0">])}</span><span class="s5">catch</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s1">console</span><span class="s0">.</span><span class="s1">error</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)}</span><span class="s5">return this</span><span class="s0">.</span><span class="s1">_stringRangesToCellRanges</span><span class="s0">(</span><span class="s1">a</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">),</span><span class="s1">a</span><span class="s0">}</span><span class="s1">_stringRangesToCellRanges</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s5">let </span><span class="s1">s</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">r</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">,</span><span class="s1">o</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">a</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">s</span><span class="s0">];</span><span class="s5">if</span><span class="s0">(</span><span class="s1">a</span><span class="s0">){</span><span class="s5">for</span><span class="s0">(</span><span class="s5">let </span><span class="s1">h</span><span class="s0">=</span><span class="s1">i</span><span class="s0">;</span><span class="s1">h</span><span class="s0">&lt;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">.</span><span class="s1">cols</span><span class="s0">;</span><span class="s1">h</span><span class="s0">++){</span><span class="s5">const </span><span class="s1">i</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getWidth</span><span class="s0">(</span><span class="s1">h</span><span class="s0">),</span><span class="s1">l</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getString</span><span class="s0">(</span><span class="s1">h</span><span class="s0">).</span><span class="s1">length</span><span class="s0">||</span><span class="s1">n</span><span class="s0">.</span><span class="s1">WHITESPACE_CELL_CHAR</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s5">if</span><span class="s0">(</span><span class="s3">0</span><span class="s0">!==</span><span class="s1">i</span><span class="s0">){</span><span class="s5">if</span><span class="s0">(!</span><span class="s1">r</span><span class="s0">&amp;&amp;</span><span class="s1">a</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]&lt;=</span><span class="s1">o</span><span class="s0">&amp;&amp;(</span><span class="s1">a</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]=</span><span class="s1">h</span><span class="s0">,</span><span class="s1">r</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">),</span><span class="s1">a</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]&lt;=</span><span class="s1">o</span><span class="s0">){</span><span class="s5">if</span><span class="s0">(</span><span class="s1">a</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]=</span><span class="s1">h</span><span class="s0">,</span><span class="s1">a</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[++</span><span class="s1">s</span><span class="s0">],!</span><span class="s1">a</span><span class="s0">)</span><span class="s5">break</span><span class="s0">;</span><span class="s1">a</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]&lt;=</span><span class="s1">o</span><span class="s0">?(</span><span class="s1">a</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]=</span><span class="s1">h</span><span class="s0">,</span><span class="s1">r</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">):</span><span class="s1">r</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">}</span><span class="s1">o</span><span class="s0">+=</span><span class="s1">l</span><span class="s0">}}</span><span class="s1">a</span><span class="s0">&amp;&amp;(</span><span class="s1">a</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">.</span><span class="s1">cols</span><span class="s0">)}}</span><span class="s5">static </span><span class="s1">_mergeRanges</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">){</span><span class="s5">let </span><span class="s1">i</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">;</span><span class="s5">for</span><span class="s0">(</span><span class="s5">let </span><span class="s1">s</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">s</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">s</span><span class="s0">++){</span><span class="s5">const </span><span class="s1">r</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">s</span><span class="s0">];</span><span class="s5">if</span><span class="s0">(</span><span class="s1">i</span><span class="s0">){</span><span class="s5">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]&lt;=</span><span class="s1">r</span><span class="s0">[</span><span class="s3">0</span><span class="s0">])</span><span class="s5">return </span><span class="s1">e</span><span class="s0">[</span><span class="s1">s</span><span class="s0">-</span><span class="s3">1</span><span class="s0">][</span><span class="s3">1</span><span class="s0">]=</span><span class="s1">t</span><span class="s0">[</span><span class="s3">1</span><span class="s0">],</span><span class="s1">e</span><span class="s0">;</span><span class="s5">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]&lt;=</span><span class="s1">r</span><span class="s0">[</span><span class="s3">1</span><span class="s0">])</span><span class="s5">return </span><span class="s1">e</span><span class="s0">[</span><span class="s1">s</span><span class="s0">-</span><span class="s3">1</span><span class="s0">][</span><span class="s3">1</span><span class="s0">]=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">max</span><span class="s0">(</span><span class="s1">t</span><span class="s0">[</span><span class="s3">1</span><span class="s0">],</span><span class="s1">r</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]),</span><span class="s1">e</span><span class="s0">.</span><span class="s1">splice</span><span class="s0">(</span><span class="s1">s</span><span class="s0">,</span><span class="s3">1</span><span class="s0">),</span><span class="s1">e</span><span class="s0">;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">splice</span><span class="s0">(</span><span class="s1">s</span><span class="s0">,</span><span class="s3">1</span><span class="s0">),</span><span class="s1">s</span><span class="s0">--}</span><span class="s5">else</span><span class="s0">{</span><span class="s5">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]&lt;=</span><span class="s1">r</span><span class="s0">[</span><span class="s3">0</span><span class="s0">])</span><span class="s5">return </span><span class="s1">e</span><span class="s0">.</span><span class="s1">splice</span><span class="s0">(</span><span class="s1">s</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s1">t</span><span class="s0">),</span><span class="s1">e</span><span class="s0">;</span><span class="s5">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]&lt;=</span><span class="s1">r</span><span class="s0">[</span><span class="s3">1</span><span class="s0">])</span><span class="s5">return </span><span class="s1">r</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">min</span><span class="s0">(</span><span class="s1">t</span><span class="s0">[</span><span class="s3">0</span><span class="s0">],</span><span class="s1">r</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]),</span><span class="s1">e</span><span class="s0">;</span><span class="s1">t</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]&lt;</span><span class="s1">r</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]&amp;&amp;(</span><span class="s1">r</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">min</span><span class="s0">(</span><span class="s1">t</span><span class="s0">[</span><span class="s3">0</span><span class="s0">],</span><span class="s1">r</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]),</span><span class="s1">i</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">)}}</span><span class="s5">return </span><span class="s1">i</span><span class="s0">?</span><span class="s1">e</span><span class="s0">[</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">-</span><span class="s3">1</span><span class="s0">][</span><span class="s3">1</span><span class="s0">]=</span><span class="s1">t</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]:</span><span class="s1">e</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">t</span><span class="s0">),</span><span class="s1">e</span><span class="s0">}};</span><span class="s1">t</span><span class="s0">.</span><span class="s1">CharacterJoinerService</span><span class="s0">=</span><span class="s1">c</span><span class="s0">=</span><span class="s1">s</span><span class="s0">([</span><span class="s1">r</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">h</span><span class="s0">.</span><span class="s1">IBufferService</span><span class="s0">)],</span><span class="s1">c</span><span class="s0">)},</span><span class="s3">160</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">contrastRatio</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">toPaddedHex</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rgb</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">css</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">color</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">channels</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">NULL_COLOR</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">;</span><span class="s5">let </span><span class="s1">i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">r</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">o</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s5">var </span><span class="s1">n</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">h</span><span class="s0">,</span><span class="s1">l</span><span class="s0">,</span><span class="s1">c</span><span class="s0">;</span><span class="s5">function </span><span class="s1">d</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">const </span><span class="s1">t</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">toString</span><span class="s0">(</span><span class="s3">16</span><span class="s0">);</span><span class="s5">return </span><span class="s1">t</span><span class="s0">.</span><span class="s1">length</span><span class="s0">&lt;</span><span class="s3">2</span><span class="s0">?</span><span class="s2">&quot;0&quot;</span><span class="s0">+</span><span class="s1">t</span><span class="s0">:</span><span class="s1">t</span><span class="s0">}</span><span class="s5">function </span><span class="s1">_</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">){</span><span class="s5">return </span><span class="s1">e</span><span class="s0">&lt;</span><span class="s1">t</span><span class="s0">?(</span><span class="s1">t</span><span class="s0">+</span><span class="s3">.05</span><span class="s0">)/(</span><span class="s1">e</span><span class="s0">+</span><span class="s3">.05</span><span class="s0">):(</span><span class="s1">e</span><span class="s0">+</span><span class="s3">.05</span><span class="s0">)/(</span><span class="s1">t</span><span class="s0">+</span><span class="s3">.05</span><span class="s0">)}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">NULL_COLOR</span><span class="s0">={</span><span class="s1">css</span><span class="s0">:</span><span class="s2">&quot;#00000000&quot;</span><span class="s0">,</span><span class="s1">rgba</span><span class="s0">:</span><span class="s3">0</span><span class="s0">},</span><span class="s5">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s1">e</span><span class="s0">.</span><span class="s1">toCss</span><span class="s0">=</span><span class="s5">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">){</span><span class="s5">return void </span><span class="s3">0</span><span class="s0">!==</span><span class="s1">s</span><span class="s0">?</span><span class="s2">`#</span><span class="s1">$</span><span class="s0">{</span><span class="s1">d</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)}</span><span class="s1">$</span><span class="s0">{</span><span class="s1">d</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)}</span><span class="s1">$</span><span class="s0">{</span><span class="s1">d</span><span class="s0">(</span><span class="s1">i</span><span class="s0">)}</span><span class="s1">$</span><span class="s0">{</span><span class="s1">d</span><span class="s0">(</span><span class="s1">s</span><span class="s0">)}</span><span class="s2">`</span><span class="s0">:</span><span class="s2">`#</span><span class="s1">$</span><span class="s0">{</span><span class="s1">d</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)}</span><span class="s1">$</span><span class="s0">{</span><span class="s1">d</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)}</span><span class="s1">$</span><span class="s0">{</span><span class="s1">d</span><span class="s0">(</span><span class="s1">i</span><span class="s0">)}</span><span class="s2">`</span><span class="s0">},</span><span class="s1">e</span><span class="s0">.</span><span class="s1">toRgba</span><span class="s0">=</span><span class="s5">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">=</span><span class="s3">255</span><span class="s0">){</span><span class="s5">return</span><span class="s0">(</span><span class="s1">e</span><span class="s0">&lt;&lt;</span><span class="s3">24</span><span class="s0">|</span><span class="s1">t</span><span class="s0">&lt;&lt;</span><span class="s3">16</span><span class="s0">|</span><span class="s1">i</span><span class="s0">&lt;&lt;</span><span class="s3">8</span><span class="s0">|</span><span class="s1">s</span><span class="s0">)&gt;&gt;&gt;</span><span class="s3">0</span><span class="s0">},</span><span class="s1">e</span><span class="s0">.</span><span class="s1">toColor</span><span class="s0">=</span><span class="s5">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s5">return</span><span class="s0">{</span><span class="s1">css</span><span class="s0">:</span><span class="s1">e</span><span class="s0">.</span><span class="s1">toCss</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">),</span><span class="s1">rgba</span><span class="s0">:</span><span class="s1">e</span><span class="s0">.</span><span class="s1">toRgba</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">)}}}(</span><span class="s1">n</span><span class="s0">||(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">channels</span><span class="s0">=</span><span class="s1">n</span><span class="s0">={})),</span><span class="s5">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">){</span><span class="s5">return </span><span class="s1">o</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">round</span><span class="s0">(</span><span class="s3">255</span><span class="s0">*</span><span class="s1">t</span><span class="s0">),[</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">]=</span><span class="s1">c</span><span class="s0">.</span><span class="s1">toChannels</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">),{</span><span class="s1">css</span><span class="s0">:</span><span class="s1">n</span><span class="s0">.</span><span class="s1">toCss</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">),</span><span class="s1">rgba</span><span class="s0">:</span><span class="s1">n</span><span class="s0">.</span><span class="s1">toRgba</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">)}}</span><span class="s1">e</span><span class="s0">.</span><span class="s1">blend</span><span class="s0">=</span><span class="s5">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">){</span><span class="s5">if</span><span class="s0">(</span><span class="s1">o</span><span class="s0">=(</span><span class="s3">255</span><span class="s0">&amp;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">)/</span><span class="s3">255</span><span class="s0">,</span><span class="s3">1</span><span class="s0">===</span><span class="s1">o</span><span class="s0">)</span><span class="s5">return</span><span class="s0">{</span><span class="s1">css</span><span class="s0">:</span><span class="s1">t</span><span class="s0">.</span><span class="s1">css</span><span class="s0">,</span><span class="s1">rgba</span><span class="s0">:</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">};</span><span class="s5">const </span><span class="s1">a</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">&gt;&gt;</span><span class="s3">24</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">h</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">&gt;&gt;</span><span class="s3">16</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">l</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">c</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">&gt;&gt;</span><span class="s3">24</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">d</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">&gt;&gt;</span><span class="s3">16</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">_</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">;</span><span class="s5">return </span><span class="s1">i</span><span class="s0">=</span><span class="s1">c</span><span class="s0">+</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">round</span><span class="s0">((</span><span class="s1">a</span><span class="s0">-</span><span class="s1">c</span><span class="s0">)*</span><span class="s1">o</span><span class="s0">),</span><span class="s1">s</span><span class="s0">=</span><span class="s1">d</span><span class="s0">+</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">round</span><span class="s0">((</span><span class="s1">h</span><span class="s0">-</span><span class="s1">d</span><span class="s0">)*</span><span class="s1">o</span><span class="s0">),</span><span class="s1">r</span><span class="s0">=</span><span class="s1">_</span><span class="s0">+</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">round</span><span class="s0">((</span><span class="s1">l</span><span class="s0">-</span><span class="s1">_</span><span class="s0">)*</span><span class="s1">o</span><span class="s0">),{</span><span class="s1">css</span><span class="s0">:</span><span class="s1">n</span><span class="s0">.</span><span class="s1">toCss</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">),</span><span class="s1">rgba</span><span class="s0">:</span><span class="s1">n</span><span class="s0">.</span><span class="s1">toRgba</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">)}},</span><span class="s1">e</span><span class="s0">.</span><span class="s1">isOpaque</span><span class="s0">=</span><span class="s5">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">return </span><span class="s3">255</span><span class="s0">==(</span><span class="s3">255</span><span class="s0">&amp;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">)},</span><span class="s1">e</span><span class="s0">.</span><span class="s1">ensureContrastRatio</span><span class="s0">=</span><span class="s5">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s5">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">c</span><span class="s0">.</span><span class="s1">ensureContrastRatio</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">,</span><span class="s1">i</span><span class="s0">);</span><span class="s5">if</span><span class="s0">(</span><span class="s1">s</span><span class="s0">)</span><span class="s5">return </span><span class="s1">n</span><span class="s0">.</span><span class="s1">toColor</span><span class="s0">(</span><span class="s1">s</span><span class="s0">&gt;&gt;</span><span class="s3">24</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">s</span><span class="s0">&gt;&gt;</span><span class="s3">16</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">s</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">)},</span><span class="s1">e</span><span class="s0">.</span><span class="s1">opaque</span><span class="s0">=</span><span class="s5">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">const </span><span class="s1">t</span><span class="s0">=(</span><span class="s3">255</span><span class="s0">|</span><span class="s1">e</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">)&gt;&gt;&gt;</span><span class="s3">0</span><span class="s0">;</span><span class="s5">return</span><span class="s0">[</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">]=</span><span class="s1">c</span><span class="s0">.</span><span class="s1">toChannels</span><span class="s0">(</span><span class="s1">t</span><span class="s0">),{</span><span class="s1">css</span><span class="s0">:</span><span class="s1">n</span><span class="s0">.</span><span class="s1">toCss</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">),</span><span class="s1">rgba</span><span class="s0">:</span><span class="s1">t</span><span class="s0">}},</span><span class="s1">e</span><span class="s0">.</span><span class="s1">opacity</span><span class="s0">=</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">multiplyOpacity</span><span class="s0">=</span><span class="s5">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s5">return </span><span class="s1">o</span><span class="s0">=</span><span class="s3">255</span><span class="s0">&amp;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">,</span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">o</span><span class="s0">*</span><span class="s1">i</span><span class="s0">/</span><span class="s3">255</span><span class="s0">)},</span><span class="s1">e</span><span class="s0">.</span><span class="s1">toColorRGB</span><span class="s0">=</span><span class="s5">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">return</span><span class="s0">[</span><span class="s1">e</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">&gt;&gt;</span><span class="s3">24</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">&gt;&gt;</span><span class="s3">16</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">]}}(</span><span class="s1">a</span><span class="s0">||(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">color</span><span class="s0">=</span><span class="s1">a</span><span class="s0">={})),</span><span class="s5">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">let </span><span class="s1">t</span><span class="s0">,</span><span class="s1">a</span><span class="s0">;</span><span class="s5">try</span><span class="s0">{</span><span class="s5">const </span><span class="s1">e</span><span class="s0">=</span><span class="s1">document</span><span class="s0">.</span><span class="s1">createElement</span><span class="s0">(</span><span class="s2">&quot;canvas&quot;</span><span class="s0">);</span><span class="s1">e</span><span class="s0">.</span><span class="s1">width</span><span class="s0">=</span><span class="s3">1</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">height</span><span class="s0">=</span><span class="s3">1</span><span class="s0">;</span><span class="s5">const </span><span class="s1">i</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getContext</span><span class="s0">(</span><span class="s2">&quot;2d&quot;</span><span class="s0">,{</span><span class="s1">willReadFrequently</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">});</span><span class="s1">i</span><span class="s0">&amp;&amp;(</span><span class="s1">t</span><span class="s0">=</span><span class="s1">i</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">globalCompositeOperation</span><span class="s0">=</span><span class="s2">&quot;copy&quot;</span><span class="s0">,</span><span class="s1">a</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">createLinearGradient</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s3">1</span><span class="s0">,</span><span class="s3">1</span><span class="s0">))}</span><span class="s5">catch</span><span class="s0">{}</span><span class="s1">e</span><span class="s0">.</span><span class="s1">toColor</span><span class="s0">=</span><span class="s5">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">match</span><span class="s0">(</span><span class="s6">/#[\da-f]{3,8}/i</span><span class="s0">))</span><span class="s5">switch</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">){</span><span class="s5">case </span><span class="s3">4</span><span class="s0">:</span><span class="s5">return </span><span class="s1">i</span><span class="s0">=</span><span class="s1">parseInt</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">slice</span><span class="s0">(</span><span class="s3">1</span><span class="s0">,</span><span class="s3">2</span><span class="s0">).</span><span class="s1">repeat</span><span class="s0">(</span><span class="s3">2</span><span class="s0">),</span><span class="s3">16</span><span class="s0">),</span><span class="s1">s</span><span class="s0">=</span><span class="s1">parseInt</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">slice</span><span class="s0">(</span><span class="s3">2</span><span class="s0">,</span><span class="s3">3</span><span class="s0">).</span><span class="s1">repeat</span><span class="s0">(</span><span class="s3">2</span><span class="s0">),</span><span class="s3">16</span><span class="s0">),</span><span class="s1">r</span><span class="s0">=</span><span class="s1">parseInt</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">slice</span><span class="s0">(</span><span class="s3">3</span><span class="s0">,</span><span class="s3">4</span><span class="s0">).</span><span class="s1">repeat</span><span class="s0">(</span><span class="s3">2</span><span class="s0">),</span><span class="s3">16</span><span class="s0">),</span><span class="s1">n</span><span class="s0">.</span><span class="s1">toColor</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">);</span><span class="s5">case </span><span class="s3">5</span><span class="s0">:</span><span class="s5">return </span><span class="s1">i</span><span class="s0">=</span><span class="s1">parseInt</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">slice</span><span class="s0">(</span><span class="s3">1</span><span class="s0">,</span><span class="s3">2</span><span class="s0">).</span><span class="s1">repeat</span><span class="s0">(</span><span class="s3">2</span><span class="s0">),</span><span class="s3">16</span><span class="s0">),</span><span class="s1">s</span><span class="s0">=</span><span class="s1">parseInt</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">slice</span><span class="s0">(</span><span class="s3">2</span><span class="s0">,</span><span class="s3">3</span><span class="s0">).</span><span class="s1">repeat</span><span class="s0">(</span><span class="s3">2</span><span class="s0">),</span><span class="s3">16</span><span class="s0">),</span><span class="s1">r</span><span class="s0">=</span><span class="s1">parseInt</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">slice</span><span class="s0">(</span><span class="s3">3</span><span class="s0">,</span><span class="s3">4</span><span class="s0">).</span><span class="s1">repeat</span><span class="s0">(</span><span class="s3">2</span><span class="s0">),</span><span class="s3">16</span><span class="s0">),</span><span class="s1">o</span><span class="s0">=</span><span class="s1">parseInt</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">slice</span><span class="s0">(</span><span class="s3">4</span><span class="s0">,</span><span class="s3">5</span><span class="s0">).</span><span class="s1">repeat</span><span class="s0">(</span><span class="s3">2</span><span class="s0">),</span><span class="s3">16</span><span class="s0">),</span><span class="s1">n</span><span class="s0">.</span><span class="s1">toColor</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">);</span><span class="s5">case </span><span class="s3">7</span><span class="s0">:</span><span class="s5">return</span><span class="s0">{</span><span class="s1">css</span><span class="s0">:</span><span class="s1">e</span><span class="s0">,</span><span class="s1">rgba</span><span class="s0">:(</span><span class="s1">parseInt</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">slice</span><span class="s0">(</span><span class="s3">1</span><span class="s0">),</span><span class="s3">16</span><span class="s0">)&lt;&lt;</span><span class="s3">8</span><span class="s0">|</span><span class="s3">255</span><span class="s0">)&gt;&gt;&gt;</span><span class="s3">0</span><span class="s0">};</span><span class="s5">case </span><span class="s3">9</span><span class="s0">:</span><span class="s5">return</span><span class="s0">{</span><span class="s1">css</span><span class="s0">:</span><span class="s1">e</span><span class="s0">,</span><span class="s1">rgba</span><span class="s0">:</span><span class="s1">parseInt</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">slice</span><span class="s0">(</span><span class="s3">1</span><span class="s0">),</span><span class="s3">16</span><span class="s0">)&gt;&gt;&gt;</span><span class="s3">0</span><span class="s0">}}</span><span class="s5">const </span><span class="s1">h</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">match</span><span class="s0">(</span><span class="s6">/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/</span><span class="s0">);</span><span class="s5">if</span><span class="s0">(</span><span class="s1">h</span><span class="s0">)</span><span class="s5">return </span><span class="s1">i</span><span class="s0">=</span><span class="s1">parseInt</span><span class="s0">(</span><span class="s1">h</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]),</span><span class="s1">s</span><span class="s0">=</span><span class="s1">parseInt</span><span class="s0">(</span><span class="s1">h</span><span class="s0">[</span><span class="s3">2</span><span class="s0">]),</span><span class="s1">r</span><span class="s0">=</span><span class="s1">parseInt</span><span class="s0">(</span><span class="s1">h</span><span class="s0">[</span><span class="s3">3</span><span class="s0">]),</span><span class="s1">o</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">round</span><span class="s0">(</span><span class="s3">255</span><span class="s0">*(</span><span class="s5">void </span><span class="s3">0</span><span class="s0">===</span><span class="s1">h</span><span class="s0">[</span><span class="s3">5</span><span class="s0">]?</span><span class="s3">1</span><span class="s0">:</span><span class="s1">parseFloat</span><span class="s0">(</span><span class="s1">h</span><span class="s0">[</span><span class="s3">5</span><span class="s0">]))),</span><span class="s1">n</span><span class="s0">.</span><span class="s1">toColor</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">);</span><span class="s5">if</span><span class="s0">(!</span><span class="s1">t</span><span class="s0">||!</span><span class="s1">a</span><span class="s0">)</span><span class="s5">throw new </span><span class="s1">Error</span><span class="s0">(</span><span class="s2">&quot;css.toColor: Unsupported css format&quot;</span><span class="s0">);</span><span class="s5">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">fillStyle</span><span class="s0">=</span><span class="s1">a</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">fillStyle</span><span class="s0">=</span><span class="s1">e</span><span class="s0">,</span><span class="s2">&quot;string&quot;</span><span class="s0">!=</span><span class="s5">typeof </span><span class="s1">t</span><span class="s0">.</span><span class="s1">fillStyle</span><span class="s0">)</span><span class="s5">throw new </span><span class="s1">Error</span><span class="s0">(</span><span class="s2">&quot;css.toColor: Unsupported css format&quot;</span><span class="s0">);</span><span class="s5">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">fillRect</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s3">1</span><span class="s0">,</span><span class="s3">1</span><span class="s0">),[</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">]=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getImageData</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s3">1</span><span class="s0">,</span><span class="s3">1</span><span class="s0">).</span><span class="s1">data</span><span class="s0">,</span><span class="s3">255</span><span class="s0">!==</span><span class="s1">o</span><span class="s0">)</span><span class="s5">throw new </span><span class="s1">Error</span><span class="s0">(</span><span class="s2">&quot;css.toColor: Unsupported css format&quot;</span><span class="s0">);</span><span class="s5">return</span><span class="s0">{</span><span class="s1">rgba</span><span class="s0">:</span><span class="s1">n</span><span class="s0">.</span><span class="s1">toRgba</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">),</span><span class="s1">css</span><span class="s0">:</span><span class="s1">e</span><span class="s0">}}}(</span><span class="s1">h</span><span class="s0">||(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">css</span><span class="s0">=</span><span class="s1">h</span><span class="s0">={})),</span><span class="s5">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s5">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">e</span><span class="s0">/</span><span class="s3">255</span><span class="s0">,</span><span class="s1">r</span><span class="s0">=</span><span class="s1">t</span><span class="s0">/</span><span class="s3">255</span><span class="s0">,</span><span class="s1">o</span><span class="s0">=</span><span class="s1">i</span><span class="s0">/</span><span class="s3">255</span><span class="s0">;</span><span class="s5">return</span><span class="s3">.2126</span><span class="s0">*(</span><span class="s1">s</span><span class="s0">&lt;=</span><span class="s3">.03928</span><span class="s0">?</span><span class="s1">s</span><span class="s0">/</span><span class="s3">12.92</span><span class="s0">:</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">pow</span><span class="s0">((</span><span class="s1">s</span><span class="s0">+</span><span class="s3">.055</span><span class="s0">)/</span><span class="s3">1.055</span><span class="s0">,</span><span class="s3">2.4</span><span class="s0">))+</span><span class="s3">.7152</span><span class="s0">*(</span><span class="s1">r</span><span class="s0">&lt;=</span><span class="s3">.03928</span><span class="s0">?</span><span class="s1">r</span><span class="s0">/</span><span class="s3">12.92</span><span class="s0">:</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">pow</span><span class="s0">((</span><span class="s1">r</span><span class="s0">+</span><span class="s3">.055</span><span class="s0">)/</span><span class="s3">1.055</span><span class="s0">,</span><span class="s3">2.4</span><span class="s0">))+</span><span class="s3">.0722</span><span class="s0">*(</span><span class="s1">o</span><span class="s0">&lt;=</span><span class="s3">.03928</span><span class="s0">?</span><span class="s1">o</span><span class="s0">/</span><span class="s3">12.92</span><span class="s0">:</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">pow</span><span class="s0">((</span><span class="s1">o</span><span class="s0">+</span><span class="s3">.055</span><span class="s0">)/</span><span class="s3">1.055</span><span class="s0">,</span><span class="s3">2.4</span><span class="s0">))}</span><span class="s1">e</span><span class="s0">.</span><span class="s1">relativeLuminance</span><span class="s0">=</span><span class="s5">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">return </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">&gt;&gt;</span><span class="s3">16</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">e</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s3">255</span><span class="s0">&amp;</span><span class="s1">e</span><span class="s0">)},</span><span class="s1">e</span><span class="s0">.</span><span class="s1">relativeLuminance2</span><span class="s0">=</span><span class="s1">t</span><span class="s0">}(</span><span class="s1">l</span><span class="s0">||(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rgb</span><span class="s0">=</span><span class="s1">l</span><span class="s0">={})),</span><span class="s5">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s5">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">e</span><span class="s0">&gt;&gt;</span><span class="s3">24</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">r</span><span class="s0">=</span><span class="s1">e</span><span class="s0">&gt;&gt;</span><span class="s3">16</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">o</span><span class="s0">=</span><span class="s1">e</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">;</span><span class="s5">let </span><span class="s1">n</span><span class="s0">=</span><span class="s1">t</span><span class="s0">&gt;&gt;</span><span class="s3">24</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">a</span><span class="s0">=</span><span class="s1">t</span><span class="s0">&gt;&gt;</span><span class="s3">16</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">h</span><span class="s0">=</span><span class="s1">t</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">c</span><span class="s0">=</span><span class="s1">_</span><span class="s0">(</span><span class="s1">l</span><span class="s0">.</span><span class="s1">relativeLuminance2</span><span class="s0">(</span><span class="s1">n</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">h</span><span class="s0">),</span><span class="s1">l</span><span class="s0">.</span><span class="s1">relativeLuminance2</span><span class="s0">(</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">));</span><span class="s5">for</span><span class="s0">(;</span><span class="s1">c</span><span class="s0">&lt;</span><span class="s1">i</span><span class="s0">&amp;&amp;(</span><span class="s1">n</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">||</span><span class="s1">a</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">||</span><span class="s1">h</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">);)</span><span class="s1">n</span><span class="s0">-=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">max</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">ceil</span><span class="s0">(</span><span class="s3">.1</span><span class="s0">*</span><span class="s1">n</span><span class="s0">)),</span><span class="s1">a</span><span class="s0">-=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">max</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">ceil</span><span class="s0">(</span><span class="s3">.1</span><span class="s0">*</span><span class="s1">a</span><span class="s0">)),</span><span class="s1">h</span><span class="s0">-=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">max</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">ceil</span><span class="s0">(</span><span class="s3">.1</span><span class="s0">*</span><span class="s1">h</span><span class="s0">)),</span><span class="s1">c</span><span class="s0">=</span><span class="s1">_</span><span class="s0">(</span><span class="s1">l</span><span class="s0">.</span><span class="s1">relativeLuminance2</span><span class="s0">(</span><span class="s1">n</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">h</span><span class="s0">),</span><span class="s1">l</span><span class="s0">.</span><span class="s1">relativeLuminance2</span><span class="s0">(</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">));</span><span class="s5">return</span><span class="s0">(</span><span class="s1">n</span><span class="s0">&lt;&lt;</span><span class="s3">24</span><span class="s0">|</span><span class="s1">a</span><span class="s0">&lt;&lt;</span><span class="s3">16</span><span class="s0">|</span><span class="s1">h</span><span class="s0">&lt;&lt;</span><span class="s3">8</span><span class="s0">|</span><span class="s3">255</span><span class="s0">)&gt;&gt;&gt;</span><span class="s3">0</span><span class="s0">}</span><span class="s5">function </span><span class="s1">a</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s5">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">e</span><span class="s0">&gt;&gt;</span><span class="s3">24</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">r</span><span class="s0">=</span><span class="s1">e</span><span class="s0">&gt;&gt;</span><span class="s3">16</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">o</span><span class="s0">=</span><span class="s1">e</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">;</span><span class="s5">let </span><span class="s1">n</span><span class="s0">=</span><span class="s1">t</span><span class="s0">&gt;&gt;</span><span class="s3">24</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">a</span><span class="s0">=</span><span class="s1">t</span><span class="s0">&gt;&gt;</span><span class="s3">16</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">h</span><span class="s0">=</span><span class="s1">t</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">c</span><span class="s0">=</span><span class="s1">_</span><span class="s0">(</span><span class="s1">l</span><span class="s0">.</span><span class="s1">relativeLuminance2</span><span class="s0">(</span><span class="s1">n</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">h</span><span class="s0">),</span><span class="s1">l</span><span class="s0">.</span><span class="s1">relativeLuminance2</span><span class="s0">(</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">));</span><span class="s5">for</span><span class="s0">(;</span><span class="s1">c</span><span class="s0">&lt;</span><span class="s1">i</span><span class="s0">&amp;&amp;(</span><span class="s1">n</span><span class="s0">&lt;</span><span class="s3">255</span><span class="s0">||</span><span class="s1">a</span><span class="s0">&lt;</span><span class="s3">255</span><span class="s0">||</span><span class="s1">h</span><span class="s0">&lt;</span><span class="s3">255</span><span class="s0">);)</span><span class="s1">n</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">min</span><span class="s0">(</span><span class="s3">255</span><span class="s0">,</span><span class="s1">n</span><span class="s0">+</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">ceil</span><span class="s0">(</span><span class="s3">.1</span><span class="s0">*(</span><span class="s3">255</span><span class="s0">-</span><span class="s1">n</span><span class="s0">))),</span><span class="s1">a</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">min</span><span class="s0">(</span><span class="s3">255</span><span class="s0">,</span><span class="s1">a</span><span class="s0">+</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">ceil</span><span class="s0">(</span><span class="s3">.1</span><span class="s0">*(</span><span class="s3">255</span><span class="s0">-</span><span class="s1">a</span><span class="s0">))),</span><span class="s1">h</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">min</span><span class="s0">(</span><span class="s3">255</span><span class="s0">,</span><span class="s1">h</span><span class="s0">+</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">ceil</span><span class="s0">(</span><span class="s3">.1</span><span class="s0">*(</span><span class="s3">255</span><span class="s0">-</span><span class="s1">h</span><span class="s0">))),</span><span class="s1">c</span><span class="s0">=</span><span class="s1">_</span><span class="s0">(</span><span class="s1">l</span><span class="s0">.</span><span class="s1">relativeLuminance2</span><span class="s0">(</span><span class="s1">n</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">h</span><span class="s0">),</span><span class="s1">l</span><span class="s0">.</span><span class="s1">relativeLuminance2</span><span class="s0">(</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">));</span><span class="s5">return</span><span class="s0">(</span><span class="s1">n</span><span class="s0">&lt;&lt;</span><span class="s3">24</span><span class="s0">|</span><span class="s1">a</span><span class="s0">&lt;&lt;</span><span class="s3">16</span><span class="s0">|</span><span class="s1">h</span><span class="s0">&lt;&lt;</span><span class="s3">8</span><span class="s0">|</span><span class="s3">255</span><span class="s0">)&gt;&gt;&gt;</span><span class="s3">0</span><span class="s0">}</span><span class="s1">e</span><span class="s0">.</span><span class="s1">blend</span><span class="s0">=</span><span class="s5">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">){</span><span class="s5">if</span><span class="s0">(</span><span class="s1">o</span><span class="s0">=(</span><span class="s3">255</span><span class="s0">&amp;</span><span class="s1">t</span><span class="s0">)/</span><span class="s3">255</span><span class="s0">,</span><span class="s3">1</span><span class="s0">===</span><span class="s1">o</span><span class="s0">)</span><span class="s5">return </span><span class="s1">t</span><span class="s0">;</span><span class="s5">const </span><span class="s1">a</span><span class="s0">=</span><span class="s1">t</span><span class="s0">&gt;&gt;</span><span class="s3">24</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">h</span><span class="s0">=</span><span class="s1">t</span><span class="s0">&gt;&gt;</span><span class="s3">16</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">l</span><span class="s0">=</span><span class="s1">t</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">c</span><span class="s0">=</span><span class="s1">e</span><span class="s0">&gt;&gt;</span><span class="s3">24</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">d</span><span class="s0">=</span><span class="s1">e</span><span class="s0">&gt;&gt;</span><span class="s3">16</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">_</span><span class="s0">=</span><span class="s1">e</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">;</span><span class="s5">return </span><span class="s1">i</span><span class="s0">=</span><span class="s1">c</span><span class="s0">+</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">round</span><span class="s0">((</span><span class="s1">a</span><span class="s0">-</span><span class="s1">c</span><span class="s0">)*</span><span class="s1">o</span><span class="s0">),</span><span class="s1">s</span><span class="s0">=</span><span class="s1">d</span><span class="s0">+</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">round</span><span class="s0">((</span><span class="s1">h</span><span class="s0">-</span><span class="s1">d</span><span class="s0">)*</span><span class="s1">o</span><span class="s0">),</span><span class="s1">r</span><span class="s0">=</span><span class="s1">_</span><span class="s0">+</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">round</span><span class="s0">((</span><span class="s1">l</span><span class="s0">-</span><span class="s1">_</span><span class="s0">)*</span><span class="s1">o</span><span class="s0">),</span><span class="s1">n</span><span class="s0">.</span><span class="s1">toRgba</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">)},</span><span class="s1">e</span><span class="s0">.</span><span class="s1">ensureContrastRatio</span><span class="s0">=</span><span class="s5">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">){</span><span class="s5">const </span><span class="s1">r</span><span class="s0">=</span><span class="s1">l</span><span class="s0">.</span><span class="s1">relativeLuminance</span><span class="s0">(</span><span class="s1">e</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">),</span><span class="s1">o</span><span class="s0">=</span><span class="s1">l</span><span class="s0">.</span><span class="s1">relativeLuminance</span><span class="s0">(</span><span class="s1">i</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">);</span><span class="s5">if</span><span class="s0">(</span><span class="s1">_</span><span class="s0">(</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">)&lt;</span><span class="s1">s</span><span class="s0">){</span><span class="s5">if</span><span class="s0">(</span><span class="s1">o</span><span class="s0">&lt;</span><span class="s1">r</span><span class="s0">){</span><span class="s5">const </span><span class="s1">o</span><span class="s0">=</span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">),</span><span class="s1">n</span><span class="s0">=</span><span class="s1">_</span><span class="s0">(</span><span class="s1">r</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">relativeLuminance</span><span class="s0">(</span><span class="s1">o</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">));</span><span class="s5">if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">&lt;</span><span class="s1">s</span><span class="s0">){</span><span class="s5">const </span><span class="s1">t</span><span class="s0">=</span><span class="s1">a</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">);</span><span class="s5">return </span><span class="s1">n</span><span class="s0">&gt;</span><span class="s1">_</span><span class="s0">(</span><span class="s1">r</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">relativeLuminance</span><span class="s0">(</span><span class="s1">t</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">))?</span><span class="s1">o</span><span class="s0">:</span><span class="s1">t</span><span class="s0">}</span><span class="s5">return </span><span class="s1">o</span><span class="s0">}</span><span class="s5">const </span><span class="s1">n</span><span class="s0">=</span><span class="s1">a</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">),</span><span class="s1">h</span><span class="s0">=</span><span class="s1">_</span><span class="s0">(</span><span class="s1">r</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">relativeLuminance</span><span class="s0">(</span><span class="s1">n</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">));</span><span class="s5">if</span><span class="s0">(</span><span class="s1">h</span><span class="s0">&lt;</span><span class="s1">s</span><span class="s0">){</span><span class="s5">const </span><span class="s1">o</span><span class="s0">=</span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">);</span><span class="s5">return </span><span class="s1">h</span><span class="s0">&gt;</span><span class="s1">_</span><span class="s0">(</span><span class="s1">r</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">relativeLuminance</span><span class="s0">(</span><span class="s1">o</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">))?</span><span class="s1">n</span><span class="s0">:</span><span class="s1">o</span><span class="s0">}</span><span class="s5">return </span><span class="s1">n</span><span class="s0">}},</span><span class="s1">e</span><span class="s0">.</span><span class="s1">reduceLuminance</span><span class="s0">=</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">increaseLuminance</span><span class="s0">=</span><span class="s1">a</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">toChannels</span><span class="s0">=</span><span class="s5">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">return</span><span class="s0">[</span><span class="s1">e</span><span class="s0">&gt;&gt;</span><span class="s3">24</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">e</span><span class="s0">&gt;&gt;</span><span class="s3">16</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">e</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s3">255</span><span class="s0">&amp;</span><span class="s1">e</span><span class="s0">]}}(</span><span class="s1">c</span><span class="s0">||(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">=</span><span class="s1">c</span><span class="s0">={})),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">toPaddedHex</span><span class="s0">=</span><span class="s1">d</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">contrastRatio</span><span class="s0">=</span><span class="s1">_</span><span class="s0">},</span><span class="s3">345</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">runAndSubscribe</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">forwardEvent</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">EventEmitter</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">EventEmitter</span><span class="s0">=</span><span class="s5">class</span><span class="s0">{</span><span class="s1">constructor</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_listeners</span><span class="s0">=[],</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_disposed</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">}</span><span class="s1">get event</span><span class="s0">(){</span><span class="s5">return this</span><span class="s0">.</span><span class="s1">_event</span><span class="s0">||(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_event</span><span class="s0">=</span><span class="s1">e</span><span class="s0">=&gt;(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_listeners</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">e</span><span class="s0">),{</span><span class="s1">dispose</span><span class="s0">:()=&gt;{</span><span class="s5">if</span><span class="s0">(!</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_disposed</span><span class="s0">)</span><span class="s5">for</span><span class="s0">(</span><span class="s5">let </span><span class="s1">t</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">t</span><span class="s0">&lt;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_listeners</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">t</span><span class="s0">++)</span><span class="s5">if</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_listeners</span><span class="s0">[</span><span class="s1">t</span><span class="s0">]===</span><span class="s1">e</span><span class="s0">)</span><span class="s5">return void this</span><span class="s0">.</span><span class="s1">_listeners</span><span class="s0">.</span><span class="s1">splice</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s3">1</span><span class="s0">)}})),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_event</span><span class="s0">}</span><span class="s1">fire</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">){</span><span class="s5">const </span><span class="s1">i</span><span class="s0">=[];</span><span class="s5">for</span><span class="s0">(</span><span class="s5">let </span><span class="s1">e</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">e</span><span class="s0">&lt;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_listeners</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">e</span><span class="s0">++)</span><span class="s1">i</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_listeners</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]);</span><span class="s5">for</span><span class="s0">(</span><span class="s5">let </span><span class="s1">s</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">s</span><span class="s0">&lt;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">s</span><span class="s0">++)</span><span class="s1">i</span><span class="s0">[</span><span class="s1">s</span><span class="s0">].</span><span class="s1">call</span><span class="s0">(</span><span class="s5">void </span><span class="s3">0</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)}</span><span class="s1">dispose</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">clearListeners</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_disposed</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">}</span><span class="s1">clearListeners</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_listeners</span><span class="s0">&amp;&amp;(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_listeners</span><span class="s0">.</span><span class="s1">length</span><span class="s0">=</span><span class="s3">0</span><span class="s0">)}},</span><span class="s1">t</span><span class="s0">.</span><span class="s1">forwardEvent</span><span class="s0">=</span><span class="s5">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">){</span><span class="s5">return </span><span class="s1">e</span><span class="s0">((</span><span class="s1">e</span><span class="s0">=&gt;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">fire</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)))},</span><span class="s1">t</span><span class="s0">.</span><span class="s1">runAndSubscribe</span><span class="s0">=</span><span class="s5">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">){</span><span class="s5">return </span><span class="s1">t</span><span class="s0">(</span><span class="s5">void </span><span class="s3">0</span><span class="s0">),</span><span class="s1">e</span><span class="s0">((</span><span class="s1">e</span><span class="s0">=&gt;</span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)))}},</span><span class="s3">859</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;{</span><span class="s5">function </span><span class="s1">i</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">for</span><span class="s0">(</span><span class="s5">const </span><span class="s1">t of e</span><span class="s0">)</span><span class="s1">t</span><span class="s0">.</span><span class="s1">dispose</span><span class="s0">();</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">=</span><span class="s3">0</span><span class="s0">}</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getDisposeArrayDisposable</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">disposeArray</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">toDisposable</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">MutableDisposable</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">Disposable</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">Disposable</span><span class="s0">=</span><span class="s5">class</span><span class="s0">{</span><span class="s1">constructor</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_disposables</span><span class="s0">=[],</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_isDisposed</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">}</span><span class="s1">dispose</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_isDisposed</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">;</span><span class="s5">for</span><span class="s0">(</span><span class="s5">const </span><span class="s1">e of </span><span class="s5">this</span><span class="s0">.</span><span class="s1">_disposables</span><span class="s0">)</span><span class="s1">e</span><span class="s0">.</span><span class="s1">dispose</span><span class="s0">();</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_disposables</span><span class="s0">.</span><span class="s1">length</span><span class="s0">=</span><span class="s3">0</span><span class="s0">}</span><span class="s1">register</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">return this</span><span class="s0">.</span><span class="s1">_disposables</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">e</span><span class="s0">),</span><span class="s1">e</span><span class="s0">}</span><span class="s1">unregister</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">const </span><span class="s1">t</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_disposables</span><span class="s0">.</span><span class="s1">indexOf</span><span class="s0">(</span><span class="s1">e</span><span class="s0">);-</span><span class="s3">1</span><span class="s0">!==</span><span class="s1">t</span><span class="s0">&amp;&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_disposables</span><span class="s0">.</span><span class="s1">splice</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s3">1</span><span class="s0">)}},</span><span class="s1">t</span><span class="s0">.</span><span class="s1">MutableDisposable</span><span class="s0">=</span><span class="s5">class</span><span class="s0">{</span><span class="s1">constructor</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_isDisposed</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">}</span><span class="s1">get value</span><span class="s0">(){</span><span class="s5">return this</span><span class="s0">.</span><span class="s1">_isDisposed</span><span class="s0">?</span><span class="s5">void </span><span class="s3">0</span><span class="s0">:</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_value</span><span class="s0">}</span><span class="s1">set value</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_isDisposed</span><span class="s0">||</span><span class="s1">e</span><span class="s0">===</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_value</span><span class="s0">||(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_value</span><span class="s0">?.</span><span class="s1">dispose</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_value</span><span class="s0">=</span><span class="s1">e</span><span class="s0">)}</span><span class="s1">clear</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">value</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">}</span><span class="s1">dispose</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_isDisposed</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_value</span><span class="s0">?.</span><span class="s1">dispose</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_value</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">}},</span><span class="s1">t</span><span class="s0">.</span><span class="s1">toDisposable</span><span class="s0">=</span><span class="s5">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">return</span><span class="s0">{</span><span class="s1">dispose</span><span class="s0">:</span><span class="s1">e</span><span class="s0">}},</span><span class="s1">t</span><span class="s0">.</span><span class="s1">disposeArray</span><span class="s0">=</span><span class="s1">i</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getDisposeArrayDisposable</span><span class="s0">=</span><span class="s5">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">return</span><span class="s0">{</span><span class="s1">dispose</span><span class="s0">:()=&gt;</span><span class="s1">i</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)}}},</span><span class="s3">485</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">FourKeyMap</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">TwoKeyMap</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">;</span><span class="s5">class </span><span class="s1">i</span><span class="s0">{</span><span class="s1">constructor</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_data</span><span class="s0">={}}</span><span class="s1">set</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_data</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]||(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_data</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]={}),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_data</span><span class="s0">[</span><span class="s1">e</span><span class="s0">][</span><span class="s1">t</span><span class="s0">]=</span><span class="s1">i</span><span class="s0">}</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">){</span><span class="s5">return this</span><span class="s0">.</span><span class="s1">_data</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]?</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_data</span><span class="s0">[</span><span class="s1">e</span><span class="s0">][</span><span class="s1">t</span><span class="s0">]:</span><span class="s5">void </span><span class="s3">0</span><span class="s0">}</span><span class="s1">clear</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_data</span><span class="s0">={}}}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">TwoKeyMap</span><span class="s0">=</span><span class="s1">i</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">FourKeyMap</span><span class="s0">=</span><span class="s5">class</span><span class="s0">{</span><span class="s1">constructor</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_data</span><span class="s0">=</span><span class="s5">new </span><span class="s1">i</span><span class="s0">}</span><span class="s1">set</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_data</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)||</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_data</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s5">new </span><span class="s1">i</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_data</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">).</span><span class="s1">set</span><span class="s0">(</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">)}</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">){</span><span class="s5">return this</span><span class="s0">.</span><span class="s1">_data</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)?.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">)}</span><span class="s1">clear</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_data</span><span class="s0">.</span><span class="s1">clear</span><span class="s0">()}}},</span><span class="s3">399</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isChromeOS</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isLinux</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isWindows</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isIphone</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isIpad</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isMac</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getSafariVersion</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isSafari</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isLegacyEdge</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isFirefox</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isNode</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isNode</span><span class="s0">=</span><span class="s2">&quot;undefined&quot;</span><span class="s0">!=</span><span class="s5">typeof </span><span class="s1">process</span><span class="s0">&amp;&amp;</span><span class="s2">&quot;title&quot;</span><span class="s5">in </span><span class="s1">process</span><span class="s0">;</span><span class="s5">const </span><span class="s1">i</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isNode</span><span class="s0">?</span><span class="s2">&quot;node&quot;</span><span class="s0">:</span><span class="s1">navigator</span><span class="s0">.</span><span class="s1">userAgent</span><span class="s0">,</span><span class="s1">s</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isNode</span><span class="s0">?</span><span class="s2">&quot;node&quot;</span><span class="s0">:</span><span class="s1">navigator</span><span class="s0">.</span><span class="s1">platform</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isFirefox</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">includes</span><span class="s0">(</span><span class="s2">&quot;Firefox&quot;</span><span class="s0">),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isLegacyEdge</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">includes</span><span class="s0">(</span><span class="s2">&quot;Edge&quot;</span><span class="s0">),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isSafari</span><span class="s0">=</span><span class="s6">/^((?!chrome|android).)*safari/i</span><span class="s0">.</span><span class="s1">test</span><span class="s0">(</span><span class="s1">i</span><span class="s0">),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getSafariVersion</span><span class="s0">=</span><span class="s5">function</span><span class="s0">(){</span><span class="s5">if</span><span class="s0">(!</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isSafari</span><span class="s0">)</span><span class="s5">return </span><span class="s3">0</span><span class="s0">;</span><span class="s5">const </span><span class="s1">e</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">match</span><span class="s0">(</span><span class="s6">/Version\/(\d+)/</span><span class="s0">);</span><span class="s5">return null</span><span class="s0">===</span><span class="s1">e</span><span class="s0">||</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">&lt;</span><span class="s3">2</span><span class="s0">?</span><span class="s3">0</span><span class="s0">:</span><span class="s1">parseInt</span><span class="s0">(</span><span class="s1">e</span><span class="s0">[</span><span class="s3">1</span><span class="s0">])},</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isMac</span><span class="s0">=[</span><span class="s2">&quot;Macintosh&quot;</span><span class="s0">,</span><span class="s2">&quot;MacIntel&quot;</span><span class="s0">,</span><span class="s2">&quot;MacPPC&quot;</span><span class="s0">,</span><span class="s2">&quot;Mac68K&quot;</span><span class="s0">].</span><span class="s1">includes</span><span class="s0">(</span><span class="s1">s</span><span class="s0">),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isIpad</span><span class="s0">=</span><span class="s2">&quot;iPad&quot;</span><span class="s0">===</span><span class="s1">s</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isIphone</span><span class="s0">=</span><span class="s2">&quot;iPhone&quot;</span><span class="s0">===</span><span class="s1">s</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isWindows</span><span class="s0">=[</span><span class="s2">&quot;Windows&quot;</span><span class="s0">,</span><span class="s2">&quot;Win16&quot;</span><span class="s0">,</span><span class="s2">&quot;Win32&quot;</span><span class="s0">,</span><span class="s2">&quot;WinCE&quot;</span><span class="s0">].</span><span class="s1">includes</span><span class="s0">(</span><span class="s1">s</span><span class="s0">),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isLinux</span><span class="s0">=</span><span class="s1">s</span><span class="s0">.</span><span class="s1">indexOf</span><span class="s0">(</span><span class="s2">&quot;Linux&quot;</span><span class="s0">)&gt;=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isChromeOS</span><span class="s0">=</span><span class="s6">/\bCrOS\b/</span><span class="s0">.</span><span class="s1">test</span><span class="s0">(</span><span class="s1">i</span><span class="s0">)},</span><span class="s3">385</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">)=&gt;{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">DebouncedIdleTask</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">IdleTaskQueue</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">PriorityTaskQueue</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">;</span><span class="s5">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">399</span><span class="s0">);</span><span class="s5">class </span><span class="s1">r</span><span class="s0">{</span><span class="s1">constructor</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tasks</span><span class="s0">=[],</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">}</span><span class="s1">enqueue</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tasks</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">e</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_start</span><span class="s0">()}</span><span class="s1">flush</span><span class="s0">(){</span><span class="s5">for</span><span class="s0">(;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_i</span><span class="s0">&lt;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tasks</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;)</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tasks</span><span class="s0">[</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_i</span><span class="s0">]()||</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_i</span><span class="s0">++;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">clear</span><span class="s0">()}</span><span class="s1">clear</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_idleCallback</span><span class="s0">&amp;&amp;(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_cancelCallback</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_idleCallback</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_idleCallback</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tasks</span><span class="s0">.</span><span class="s1">length</span><span class="s0">=</span><span class="s3">0</span><span class="s0">}</span><span class="s1">_start</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_idleCallback</span><span class="s0">||(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_idleCallback</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_requestCallback</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_process</span><span class="s0">.</span><span class="s1">bind</span><span class="s0">(</span><span class="s5">this</span><span class="s0">)))}</span><span class="s1">_process</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_idleCallback</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">;</span><span class="s5">let </span><span class="s1">t</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">timeRemaining</span><span class="s0">(),</span><span class="s1">r</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s5">for</span><span class="s0">(;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_i</span><span class="s0">&lt;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tasks</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;){</span><span class="s5">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">=</span><span class="s1">Date</span><span class="s0">.</span><span class="s1">now</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_tasks</span><span class="s0">[</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_i</span><span class="s0">]()||</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_i</span><span class="s0">++,</span><span class="s1">t</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">max</span><span class="s0">(</span><span class="s3">1</span><span class="s0">,</span><span class="s1">Date</span><span class="s0">.</span><span class="s1">now</span><span class="s0">()-</span><span class="s1">t</span><span class="s0">),</span><span class="s1">i</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">max</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">),</span><span class="s1">r</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">timeRemaining</span><span class="s0">(),</span><span class="s3">1.5</span><span class="s0">*</span><span class="s1">i</span><span class="s0">&gt;</span><span class="s1">r</span><span class="s0">)</span><span class="s5">return </span><span class="s1">s</span><span class="s0">-</span><span class="s1">t</span><span class="s0">&lt;-</span><span class="s3">20</span><span class="s0">&amp;&amp;</span><span class="s1">console</span><span class="s0">.</span><span class="s1">warn</span><span class="s0">(</span><span class="s2">`task queue exceeded allotted deadline by </span><span class="s1">$</span><span class="s0">{</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">abs</span><span class="s0">(</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">round</span><span class="s0">(</span><span class="s1">s</span><span class="s0">-</span><span class="s1">t</span><span class="s0">))}</span><span class="s2">ms`</span><span class="s0">),</span><span class="s5">void this</span><span class="s0">.</span><span class="s1">_start</span><span class="s0">();</span><span class="s1">s</span><span class="s0">=</span><span class="s1">r</span><span class="s0">}</span><span class="s5">this</span><span class="s0">.</span><span class="s1">clear</span><span class="s0">()}}</span><span class="s5">class </span><span class="s1">o </span><span class="s5">extends </span><span class="s1">r</span><span class="s0">{</span><span class="s1">_requestCallback</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">return </span><span class="s1">setTimeout</span><span class="s0">((()=&gt;</span><span class="s1">e</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_createDeadline</span><span class="s0">(</span><span class="s3">16</span><span class="s0">))))}</span><span class="s1">_cancelCallback</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s1">clearTimeout</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)}</span><span class="s1">_createDeadline</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">const </span><span class="s1">t</span><span class="s0">=</span><span class="s1">Date</span><span class="s0">.</span><span class="s1">now</span><span class="s0">()+</span><span class="s1">e</span><span class="s0">;</span><span class="s5">return</span><span class="s0">{</span><span class="s1">timeRemaining</span><span class="s0">:()=&gt;</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">max</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">t</span><span class="s0">-</span><span class="s1">Date</span><span class="s0">.</span><span class="s1">now</span><span class="s0">())}}}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">PriorityTaskQueue</span><span class="s0">=</span><span class="s1">o</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">IdleTaskQueue</span><span class="s0">=!</span><span class="s1">s</span><span class="s0">.</span><span class="s1">isNode</span><span class="s0">&amp;&amp;</span><span class="s2">&quot;requestIdleCallback&quot;</span><span class="s5">in </span><span class="s1">window</span><span class="s0">?</span><span class="s5">class extends </span><span class="s1">r</span><span class="s0">{</span><span class="s1">_requestCallback</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">return </span><span class="s1">requestIdleCallback</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)}</span><span class="s1">_cancelCallback</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s1">cancelIdleCallback</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)}}:</span><span class="s1">o</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">DebouncedIdleTask</span><span class="s0">=</span><span class="s5">class</span><span class="s0">{</span><span class="s1">constructor</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_queue</span><span class="s0">=</span><span class="s5">new </span><span class="s1">t</span><span class="s0">.</span><span class="s1">IdleTaskQueue</span><span class="s0">}</span><span class="s1">set</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_queue</span><span class="s0">.</span><span class="s1">clear</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_queue</span><span class="s0">.</span><span class="s1">enqueue</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)}</span><span class="s1">flush</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_queue</span><span class="s0">.</span><span class="s1">flush</span><span class="s0">()}}},</span><span class="s3">147</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">ExtendedAttrs</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">AttributeData</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">;</span><span class="s5">class </span><span class="s1">i</span><span class="s0">{</span><span class="s1">constructor</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">extended</span><span class="s0">=</span><span class="s5">new </span><span class="s1">s</span><span class="s0">}</span><span class="s5">static </span><span class="s1">toColorRGB</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">return</span><span class="s0">[</span><span class="s1">e</span><span class="s0">&gt;&gt;&gt;</span><span class="s3">16</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">e</span><span class="s0">&gt;&gt;&gt;</span><span class="s3">8</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s3">255</span><span class="s0">&amp;</span><span class="s1">e</span><span class="s0">]}</span><span class="s5">static </span><span class="s1">fromColorRGB</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">return</span><span class="s0">(</span><span class="s3">255</span><span class="s0">&amp;</span><span class="s1">e</span><span class="s0">[</span><span class="s3">0</span><span class="s0">])&lt;&lt;</span><span class="s3">16</span><span class="s0">|(</span><span class="s3">255</span><span class="s0">&amp;</span><span class="s1">e</span><span class="s0">[</span><span class="s3">1</span><span class="s0">])&lt;&lt;</span><span class="s3">8</span><span class="s0">|</span><span class="s3">255</span><span class="s0">&amp;</span><span class="s1">e</span><span class="s0">[</span><span class="s3">2</span><span class="s0">]}</span><span class="s1">clone</span><span class="s0">(){</span><span class="s5">const </span><span class="s1">e</span><span class="s0">=</span><span class="s5">new </span><span class="s1">i</span><span class="s0">;</span><span class="s5">return </span><span class="s1">e</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">extended</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">extended</span><span class="s0">.</span><span class="s1">clone</span><span class="s0">(),</span><span class="s1">e</span><span class="s0">}</span><span class="s1">isInverse</span><span class="s0">(){</span><span class="s5">return </span><span class="s3">67108864</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">}</span><span class="s1">isBold</span><span class="s0">(){</span><span class="s5">return </span><span class="s3">134217728</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">}</span><span class="s1">isUnderline</span><span class="s0">(){</span><span class="s5">return this</span><span class="s0">.</span><span class="s1">hasExtendedAttrs</span><span class="s0">()&amp;&amp;</span><span class="s3">0</span><span class="s0">!==</span><span class="s5">this</span><span class="s0">.</span><span class="s1">extended</span><span class="s0">.</span><span class="s1">underlineStyle</span><span class="s0">?</span><span class="s3">1</span><span class="s0">:</span><span class="s3">268435456</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">}</span><span class="s1">isBlink</span><span class="s0">(){</span><span class="s5">return </span><span class="s3">536870912</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">}</span><span class="s1">isInvisible</span><span class="s0">(){</span><span class="s5">return </span><span class="s3">1073741824</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">}</span><span class="s1">isItalic</span><span class="s0">(){</span><span class="s5">return </span><span class="s3">67108864</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">}</span><span class="s1">isDim</span><span class="s0">(){</span><span class="s5">return </span><span class="s3">134217728</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">}</span><span class="s1">isStrikethrough</span><span class="s0">(){</span><span class="s5">return </span><span class="s3">2147483648</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">}</span><span class="s1">isProtected</span><span class="s0">(){</span><span class="s5">return </span><span class="s3">536870912</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">}</span><span class="s1">isOverline</span><span class="s0">(){</span><span class="s5">return </span><span class="s3">1073741824</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">}</span><span class="s1">getFgColorMode</span><span class="s0">(){</span><span class="s5">return </span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">}</span><span class="s1">getBgColorMode</span><span class="s0">(){</span><span class="s5">return </span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">}</span><span class="s1">isFgRGB</span><span class="s0">(){</span><span class="s5">return </span><span class="s3">50331648</span><span class="s0">==(</span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">)}</span><span class="s1">isBgRGB</span><span class="s0">(){</span><span class="s5">return </span><span class="s3">50331648</span><span class="s0">==(</span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">)}</span><span class="s1">isFgPalette</span><span class="s0">(){</span><span class="s5">return </span><span class="s3">16777216</span><span class="s0">==(</span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">)||</span><span class="s3">33554432</span><span class="s0">==(</span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">)}</span><span class="s1">isBgPalette</span><span class="s0">(){</span><span class="s5">return </span><span class="s3">16777216</span><span class="s0">==(</span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">)||</span><span class="s3">33554432</span><span class="s0">==(</span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">)}</span><span class="s1">isFgDefault</span><span class="s0">(){</span><span class="s5">return </span><span class="s3">0</span><span class="s0">==(</span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">)}</span><span class="s1">isBgDefault</span><span class="s0">(){</span><span class="s5">return </span><span class="s3">0</span><span class="s0">==(</span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">)}</span><span class="s1">isAttributeDefault</span><span class="s0">(){</span><span class="s5">return </span><span class="s3">0</span><span class="s0">===</span><span class="s5">this</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">&amp;&amp;</span><span class="s3">0</span><span class="s0">===</span><span class="s5">this</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">}</span><span class="s1">getFgColor</span><span class="s0">(){</span><span class="s5">switch</span><span class="s0">(</span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">){</span><span class="s5">case </span><span class="s3">16777216</span><span class="s0">:</span><span class="s5">case </span><span class="s3">33554432</span><span class="s0">:</span><span class="s5">return </span><span class="s3">255</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">;</span><span class="s5">case </span><span class="s3">50331648</span><span class="s0">:</span><span class="s5">return </span><span class="s3">16777215</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">;</span><span class="s5">default</span><span class="s0">:</span><span class="s5">return</span><span class="s0">-</span><span class="s3">1</span><span class="s0">}}</span><span class="s1">getBgColor</span><span class="s0">(){</span><span class="s5">switch</span><span class="s0">(</span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">){</span><span class="s5">case </span><span class="s3">16777216</span><span class="s0">:</span><span class="s5">case </span><span class="s3">33554432</span><span class="s0">:</span><span class="s5">return </span><span class="s3">255</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">;</span><span class="s5">case </span><span class="s3">50331648</span><span class="s0">:</span><span class="s5">return </span><span class="s3">16777215</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">;</span><span class="s5">default</span><span class="s0">:</span><span class="s5">return</span><span class="s0">-</span><span class="s3">1</span><span class="s0">}}</span><span class="s1">hasExtendedAttrs</span><span class="s0">(){</span><span class="s5">return </span><span class="s3">268435456</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">}</span><span class="s1">updateExtended</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">extended</span><span class="s0">.</span><span class="s1">isEmpty</span><span class="s0">()?</span><span class="s5">this</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">&amp;=-</span><span class="s3">268435457</span><span class="s0">:</span><span class="s5">this</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">|=</span><span class="s3">268435456</span><span class="s0">}</span><span class="s1">getUnderlineColor</span><span class="s0">(){</span><span class="s5">if</span><span class="s0">(</span><span class="s3">268435456</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">&amp;&amp;~</span><span class="s5">this</span><span class="s0">.</span><span class="s1">extended</span><span class="s0">.</span><span class="s1">underlineColor</span><span class="s0">)</span><span class="s5">switch</span><span class="s0">(</span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">extended</span><span class="s0">.</span><span class="s1">underlineColor</span><span class="s0">){</span><span class="s5">case </span><span class="s3">16777216</span><span class="s0">:</span><span class="s5">case </span><span class="s3">33554432</span><span class="s0">:</span><span class="s5">return </span><span class="s3">255</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">extended</span><span class="s0">.</span><span class="s1">underlineColor</span><span class="s0">;</span><span class="s5">case </span><span class="s3">50331648</span><span class="s0">:</span><span class="s5">return </span><span class="s3">16777215</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">extended</span><span class="s0">.</span><span class="s1">underlineColor</span><span class="s0">;</span><span class="s5">default</span><span class="s0">:</span><span class="s5">return this</span><span class="s0">.</span><span class="s1">getFgColor</span><span class="s0">()}</span><span class="s5">return this</span><span class="s0">.</span><span class="s1">getFgColor</span><span class="s0">()}</span><span class="s1">getUnderlineColorMode</span><span class="s0">(){</span><span class="s5">return </span><span class="s3">268435456</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">&amp;&amp;~</span><span class="s5">this</span><span class="s0">.</span><span class="s1">extended</span><span class="s0">.</span><span class="s1">underlineColor</span><span class="s0">?</span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">extended</span><span class="s0">.</span><span class="s1">underlineColor</span><span class="s0">:</span><span class="s5">this</span><span class="s0">.</span><span class="s1">getFgColorMode</span><span class="s0">()}</span><span class="s1">isUnderlineColorRGB</span><span class="s0">(){</span><span class="s5">return </span><span class="s3">268435456</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">&amp;&amp;~</span><span class="s5">this</span><span class="s0">.</span><span class="s1">extended</span><span class="s0">.</span><span class="s1">underlineColor</span><span class="s0">?</span><span class="s3">50331648</span><span class="s0">==(</span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">extended</span><span class="s0">.</span><span class="s1">underlineColor</span><span class="s0">):</span><span class="s5">this</span><span class="s0">.</span><span class="s1">isFgRGB</span><span class="s0">()}</span><span class="s1">isUnderlineColorPalette</span><span class="s0">(){</span><span class="s5">return </span><span class="s3">268435456</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">&amp;&amp;~</span><span class="s5">this</span><span class="s0">.</span><span class="s1">extended</span><span class="s0">.</span><span class="s1">underlineColor</span><span class="s0">?</span><span class="s3">16777216</span><span class="s0">==(</span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">extended</span><span class="s0">.</span><span class="s1">underlineColor</span><span class="s0">)||</span><span class="s3">33554432</span><span class="s0">==(</span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">extended</span><span class="s0">.</span><span class="s1">underlineColor</span><span class="s0">):</span><span class="s5">this</span><span class="s0">.</span><span class="s1">isFgPalette</span><span class="s0">()}</span><span class="s1">isUnderlineColorDefault</span><span class="s0">(){</span><span class="s5">return </span><span class="s3">268435456</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">&amp;&amp;~</span><span class="s5">this</span><span class="s0">.</span><span class="s1">extended</span><span class="s0">.</span><span class="s1">underlineColor</span><span class="s0">?</span><span class="s3">0</span><span class="s0">==(</span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">extended</span><span class="s0">.</span><span class="s1">underlineColor</span><span class="s0">):</span><span class="s5">this</span><span class="s0">.</span><span class="s1">isFgDefault</span><span class="s0">()}</span><span class="s1">getUnderlineStyle</span><span class="s0">(){</span><span class="s5">return </span><span class="s3">268435456</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">?</span><span class="s3">268435456</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">?</span><span class="s5">this</span><span class="s0">.</span><span class="s1">extended</span><span class="s0">.</span><span class="s1">underlineStyle</span><span class="s0">:</span><span class="s3">1</span><span class="s0">:</span><span class="s3">0</span><span class="s0">}</span><span class="s1">getUnderlineVariantOffset</span><span class="s0">(){</span><span class="s5">return this</span><span class="s0">.</span><span class="s1">extended</span><span class="s0">.</span><span class="s1">underlineVariantOffset</span><span class="s0">}}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">AttributeData</span><span class="s0">=</span><span class="s1">i</span><span class="s0">;</span><span class="s5">class </span><span class="s1">s</span><span class="s0">{</span><span class="s1">get ext</span><span class="s0">(){</span><span class="s5">return this</span><span class="s0">.</span><span class="s1">_urlId</span><span class="s0">?-</span><span class="s3">469762049</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ext</span><span class="s0">|</span><span class="s5">this</span><span class="s0">.</span><span class="s1">underlineStyle</span><span class="s0">&lt;&lt;</span><span class="s3">26</span><span class="s0">:</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ext</span><span class="s0">}</span><span class="s1">set ext</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ext</span><span class="s0">=</span><span class="s1">e</span><span class="s0">}</span><span class="s1">get underlineStyle</span><span class="s0">(){</span><span class="s5">return this</span><span class="s0">.</span><span class="s1">_urlId</span><span class="s0">?</span><span class="s3">5</span><span class="s0">:(</span><span class="s3">469762048</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ext</span><span class="s0">)&gt;&gt;</span><span class="s3">26</span><span class="s0">}</span><span class="s1">set underlineStyle</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ext</span><span class="s0">&amp;=-</span><span class="s3">469762049</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ext</span><span class="s0">|=</span><span class="s1">e</span><span class="s0">&lt;&lt;</span><span class="s3">26</span><span class="s0">&amp;</span><span class="s3">469762048</span><span class="s0">}</span><span class="s1">get underlineColor</span><span class="s0">(){</span><span class="s5">return </span><span class="s3">67108863</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ext</span><span class="s0">}</span><span class="s1">set underlineColor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ext</span><span class="s0">&amp;=-</span><span class="s3">67108864</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ext</span><span class="s0">|=</span><span class="s3">67108863</span><span class="s0">&amp;</span><span class="s1">e</span><span class="s0">}</span><span class="s1">get urlId</span><span class="s0">(){</span><span class="s5">return this</span><span class="s0">.</span><span class="s1">_urlId</span><span class="s0">}</span><span class="s1">set urlId</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_urlId</span><span class="s0">=</span><span class="s1">e</span><span class="s0">}</span><span class="s1">get underlineVariantOffset</span><span class="s0">(){</span><span class="s5">const </span><span class="s1">e</span><span class="s0">=(</span><span class="s3">3758096384</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ext</span><span class="s0">)&gt;&gt;</span><span class="s3">29</span><span class="s0">;</span><span class="s5">return </span><span class="s1">e</span><span class="s0">&lt;</span><span class="s3">0</span><span class="s0">?</span><span class="s3">4294967288</span><span class="s0">^</span><span class="s1">e</span><span class="s0">:</span><span class="s1">e</span><span class="s0">}</span><span class="s1">set underlineVariantOffset</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ext</span><span class="s0">&amp;=</span><span class="s3">536870911</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ext</span><span class="s0">|=</span><span class="s1">e</span><span class="s0">&lt;&lt;</span><span class="s3">29</span><span class="s0">&amp;</span><span class="s3">3758096384</span><span class="s0">}</span><span class="s1">constructor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">t</span><span class="s0">=</span><span class="s3">0</span><span class="s0">){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ext</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_urlId</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ext</span><span class="s0">=</span><span class="s1">e</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_urlId</span><span class="s0">=</span><span class="s1">t</span><span class="s0">}</span><span class="s1">clone</span><span class="s0">(){</span><span class="s5">return new </span><span class="s1">s</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_ext</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_urlId</span><span class="s0">)}</span><span class="s1">isEmpty</span><span class="s0">(){</span><span class="s5">return </span><span class="s3">0</span><span class="s0">===</span><span class="s5">this</span><span class="s0">.</span><span class="s1">underlineStyle</span><span class="s0">&amp;&amp;</span><span class="s3">0</span><span class="s0">===</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_urlId</span><span class="s0">}}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">ExtendedAttrs</span><span class="s0">=</span><span class="s1">s</span><span class="s0">},</span><span class="s3">782</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">)=&gt;{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">CellData</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">;</span><span class="s5">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">133</span><span class="s0">),</span><span class="s1">r</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">855</span><span class="s0">),</span><span class="s1">o</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">147</span><span class="s0">);</span><span class="s5">class </span><span class="s1">n </span><span class="s5">extends </span><span class="s1">o</span><span class="s0">.</span><span class="s1">AttributeData</span><span class="s0">{</span><span class="s1">constructor</span><span class="s0">(){</span><span class="s5">super</span><span class="s0">(</span><span class="s1">...arguments</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">content</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">extended</span><span class="s0">=</span><span class="s5">new </span><span class="s1">o</span><span class="s0">.</span><span class="s1">ExtendedAttrs</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">combinedData</span><span class="s0">=</span><span class="s2">&quot;&quot;</span><span class="s0">}</span><span class="s5">static </span><span class="s1">fromCharData</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">const </span><span class="s1">t</span><span class="s0">=</span><span class="s5">new </span><span class="s1">n</span><span class="s0">;</span><span class="s5">return </span><span class="s1">t</span><span class="s0">.</span><span class="s1">setFromCharData</span><span class="s0">(</span><span class="s1">e</span><span class="s0">),</span><span class="s1">t</span><span class="s0">}</span><span class="s1">isCombined</span><span class="s0">(){</span><span class="s5">return </span><span class="s3">2097152</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">content</span><span class="s0">}</span><span class="s1">getWidth</span><span class="s0">(){</span><span class="s5">return this</span><span class="s0">.</span><span class="s1">content</span><span class="s0">&gt;&gt;</span><span class="s3">22</span><span class="s0">}</span><span class="s1">getChars</span><span class="s0">(){</span><span class="s5">return </span><span class="s3">2097152</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">content</span><span class="s0">?</span><span class="s5">this</span><span class="s0">.</span><span class="s1">combinedData</span><span class="s0">:</span><span class="s3">2097151</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">content</span><span class="s0">?(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">stringFromCodePoint</span><span class="s0">)(</span><span class="s3">2097151</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">content</span><span class="s0">):</span><span class="s2">&quot;&quot;</span><span class="s0">}</span><span class="s1">getCode</span><span class="s0">(){</span><span class="s5">return this</span><span class="s0">.</span><span class="s1">isCombined</span><span class="s0">()?</span><span class="s5">this</span><span class="s0">.</span><span class="s1">combinedData</span><span class="s0">.</span><span class="s1">charCodeAt</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">combinedData</span><span class="s0">.</span><span class="s1">length</span><span class="s0">-</span><span class="s3">1</span><span class="s0">):</span><span class="s3">2097151</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">content</span><span class="s0">}</span><span class="s1">setFromCharData</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">r</span><span class="s0">.</span><span class="s1">CHAR_DATA_ATTR_INDEX</span><span class="s0">],</span><span class="s5">this</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s5">let </span><span class="s1">t</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">;</span><span class="s5">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">[</span><span class="s1">r</span><span class="s0">.</span><span class="s1">CHAR_DATA_CHAR_INDEX</span><span class="s0">].</span><span class="s1">length</span><span class="s0">&gt;</span><span class="s3">2</span><span class="s0">)</span><span class="s1">t</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">;</span><span class="s5">else if</span><span class="s0">(</span><span class="s3">2</span><span class="s0">===</span><span class="s1">e</span><span class="s0">[</span><span class="s1">r</span><span class="s0">.</span><span class="s1">CHAR_DATA_CHAR_INDEX</span><span class="s0">].</span><span class="s1">length</span><span class="s0">){</span><span class="s5">const </span><span class="s1">i</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">r</span><span class="s0">.</span><span class="s1">CHAR_DATA_CHAR_INDEX</span><span class="s0">].</span><span class="s1">charCodeAt</span><span class="s0">(</span><span class="s3">0</span><span class="s0">);</span><span class="s5">if</span><span class="s0">(</span><span class="s3">55296</span><span class="s0">&lt;=</span><span class="s1">i</span><span class="s0">&amp;&amp;</span><span class="s1">i</span><span class="s0">&lt;=</span><span class="s3">56319</span><span class="s0">){</span><span class="s5">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">r</span><span class="s0">.</span><span class="s1">CHAR_DATA_CHAR_INDEX</span><span class="s0">].</span><span class="s1">charCodeAt</span><span class="s0">(</span><span class="s3">1</span><span class="s0">);</span><span class="s3">56320</span><span class="s0">&lt;=</span><span class="s1">s</span><span class="s0">&amp;&amp;</span><span class="s1">s</span><span class="s0">&lt;=</span><span class="s3">57343</span><span class="s0">?</span><span class="s5">this</span><span class="s0">.</span><span class="s1">content</span><span class="s0">=</span><span class="s3">1024</span><span class="s0">*(</span><span class="s1">i</span><span class="s0">-</span><span class="s3">55296</span><span class="s0">)+</span><span class="s1">s</span><span class="s0">-</span><span class="s3">56320</span><span class="s0">+</span><span class="s3">65536</span><span class="s0">|</span><span class="s1">e</span><span class="s0">[</span><span class="s1">r</span><span class="s0">.</span><span class="s1">CHAR_DATA_WIDTH_INDEX</span><span class="s0">]&lt;&lt;</span><span class="s3">22</span><span class="s0">:</span><span class="s1">t</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">}</span><span class="s5">else </span><span class="s1">t</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">}</span><span class="s5">else this</span><span class="s0">.</span><span class="s1">content</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">r</span><span class="s0">.</span><span class="s1">CHAR_DATA_CHAR_INDEX</span><span class="s0">].</span><span class="s1">charCodeAt</span><span class="s0">(</span><span class="s3">0</span><span class="s0">)|</span><span class="s1">e</span><span class="s0">[</span><span class="s1">r</span><span class="s0">.</span><span class="s1">CHAR_DATA_WIDTH_INDEX</span><span class="s0">]&lt;&lt;</span><span class="s3">22</span><span class="s0">;</span><span class="s1">t</span><span class="s0">&amp;&amp;(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">combinedData</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">r</span><span class="s0">.</span><span class="s1">CHAR_DATA_CHAR_INDEX</span><span class="s0">],</span><span class="s5">this</span><span class="s0">.</span><span class="s1">content</span><span class="s0">=</span><span class="s3">2097152</span><span class="s0">|</span><span class="s1">e</span><span class="s0">[</span><span class="s1">r</span><span class="s0">.</span><span class="s1">CHAR_DATA_WIDTH_INDEX</span><span class="s0">]&lt;&lt;</span><span class="s3">22</span><span class="s0">)}</span><span class="s1">getAsCharData</span><span class="s0">(){</span><span class="s5">return</span><span class="s0">[</span><span class="s5">this</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">getChars</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">getWidth</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">getCode</span><span class="s0">()]}}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">CellData</span><span class="s0">=</span><span class="s1">n</span><span class="s0">},</span><span class="s3">855</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">WHITESPACE_CELL_CODE</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">WHITESPACE_CELL_WIDTH</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">WHITESPACE_CELL_CHAR</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">NULL_CELL_CODE</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">NULL_CELL_WIDTH</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">NULL_CELL_CHAR</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">CHAR_DATA_CODE_INDEX</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">CHAR_DATA_WIDTH_INDEX</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">CHAR_DATA_CHAR_INDEX</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">CHAR_DATA_ATTR_INDEX</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">DEFAULT_EXT</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">DEFAULT_ATTR</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">DEFAULT_COLOR</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">DEFAULT_COLOR</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">DEFAULT_ATTR</span><span class="s0">=</span><span class="s3">256</span><span class="s0">|</span><span class="s1">t</span><span class="s0">.</span><span class="s1">DEFAULT_COLOR</span><span class="s0">&lt;&lt;</span><span class="s3">9</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">DEFAULT_EXT</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">CHAR_DATA_ATTR_INDEX</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">CHAR_DATA_CHAR_INDEX</span><span class="s0">=</span><span class="s3">1</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">CHAR_DATA_WIDTH_INDEX</span><span class="s0">=</span><span class="s3">2</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">CHAR_DATA_CODE_INDEX</span><span class="s0">=</span><span class="s3">3</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">NULL_CELL_CHAR</span><span class="s0">=</span><span class="s2">&quot;&quot;</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">NULL_CELL_WIDTH</span><span class="s0">=</span><span class="s3">1</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">NULL_CELL_CODE</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">WHITESPACE_CELL_CHAR</span><span class="s0">=</span><span class="s2">&quot; &quot;</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">WHITESPACE_CELL_WIDTH</span><span class="s0">=</span><span class="s3">1</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">WHITESPACE_CELL_CODE</span><span class="s0">=</span><span class="s3">32</span><span class="s0">},</span><span class="s3">133</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">Utf8ToUtf32</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">StringToUtf32</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">utf32ToString</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">stringFromCodePoint</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">stringFromCodePoint</span><span class="s0">=</span><span class="s5">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">return </span><span class="s1">e</span><span class="s0">&gt;</span><span class="s3">65535</span><span class="s0">?(</span><span class="s1">e</span><span class="s0">-=</span><span class="s3">65536</span><span class="s0">,</span><span class="s1">String</span><span class="s0">.</span><span class="s1">fromCharCode</span><span class="s0">(</span><span class="s3">55296</span><span class="s0">+(</span><span class="s1">e</span><span class="s0">&gt;&gt;</span><span class="s3">10</span><span class="s0">))+</span><span class="s1">String</span><span class="s0">.</span><span class="s1">fromCharCode</span><span class="s0">(</span><span class="s1">e</span><span class="s0">%</span><span class="s3">1024</span><span class="s0">+</span><span class="s3">56320</span><span class="s0">)):</span><span class="s1">String</span><span class="s0">.</span><span class="s1">fromCharCode</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)},</span><span class="s1">t</span><span class="s0">.</span><span class="s1">utf32ToString</span><span class="s0">=</span><span class="s5">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">i</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">){</span><span class="s5">let </span><span class="s1">s</span><span class="s0">=</span><span class="s2">&quot;&quot;</span><span class="s0">;</span><span class="s5">for</span><span class="s0">(</span><span class="s5">let </span><span class="s1">r</span><span class="s0">=</span><span class="s1">t</span><span class="s0">;</span><span class="s1">r</span><span class="s0">&lt;</span><span class="s1">i</span><span class="s0">;++</span><span class="s1">r</span><span class="s0">){</span><span class="s5">let </span><span class="s1">t</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">r</span><span class="s0">];</span><span class="s1">t</span><span class="s0">&gt;</span><span class="s3">65535</span><span class="s0">?(</span><span class="s1">t</span><span class="s0">-=</span><span class="s3">65536</span><span class="s0">,</span><span class="s1">s</span><span class="s0">+=</span><span class="s1">String</span><span class="s0">.</span><span class="s1">fromCharCode</span><span class="s0">(</span><span class="s3">55296</span><span class="s0">+(</span><span class="s1">t</span><span class="s0">&gt;&gt;</span><span class="s3">10</span><span class="s0">))+</span><span class="s1">String</span><span class="s0">.</span><span class="s1">fromCharCode</span><span class="s0">(</span><span class="s1">t</span><span class="s0">%</span><span class="s3">1024</span><span class="s0">+</span><span class="s3">56320</span><span class="s0">)):</span><span class="s1">s</span><span class="s0">+=</span><span class="s1">String</span><span class="s0">.</span><span class="s1">fromCharCode</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)}</span><span class="s5">return </span><span class="s1">s</span><span class="s0">},</span><span class="s1">t</span><span class="s0">.</span><span class="s1">StringToUtf32</span><span class="s0">=</span><span class="s5">class</span><span class="s0">{</span><span class="s1">constructor</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_interim</span><span class="s0">=</span><span class="s3">0</span><span class="s0">}</span><span class="s1">clear</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_interim</span><span class="s0">=</span><span class="s3">0</span><span class="s0">}</span><span class="s1">decode</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">){</span><span class="s5">const </span><span class="s1">i</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s5">if</span><span class="s0">(!</span><span class="s1">i</span><span class="s0">)</span><span class="s5">return </span><span class="s3">0</span><span class="s0">;</span><span class="s5">let </span><span class="s1">s</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">r</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s5">if</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_interim</span><span class="s0">){</span><span class="s5">const </span><span class="s1">i</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">charCodeAt</span><span class="s0">(</span><span class="s1">r</span><span class="s0">++);</span><span class="s3">56320</span><span class="s0">&lt;=</span><span class="s1">i</span><span class="s0">&amp;&amp;</span><span class="s1">i</span><span class="s0">&lt;=</span><span class="s3">57343</span><span class="s0">?</span><span class="s1">t</span><span class="s0">[</span><span class="s1">s</span><span class="s0">++]=</span><span class="s3">1024</span><span class="s0">*(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_interim</span><span class="s0">-</span><span class="s3">55296</span><span class="s0">)+</span><span class="s1">i</span><span class="s0">-</span><span class="s3">56320</span><span class="s0">+</span><span class="s3">65536</span><span class="s0">:(</span><span class="s1">t</span><span class="s0">[</span><span class="s1">s</span><span class="s0">++]=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_interim</span><span class="s0">,</span><span class="s1">t</span><span class="s0">[</span><span class="s1">s</span><span class="s0">++]=</span><span class="s1">i</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_interim</span><span class="s0">=</span><span class="s3">0</span><span class="s0">}</span><span class="s5">for</span><span class="s0">(</span><span class="s5">let </span><span class="s1">o</span><span class="s0">=</span><span class="s1">r</span><span class="s0">;</span><span class="s1">o</span><span class="s0">&lt;</span><span class="s1">i</span><span class="s0">;++</span><span class="s1">o</span><span class="s0">){</span><span class="s5">const </span><span class="s1">r</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">charCodeAt</span><span class="s0">(</span><span class="s1">o</span><span class="s0">);</span><span class="s5">if</span><span class="s0">(</span><span class="s3">55296</span><span class="s0">&lt;=</span><span class="s1">r</span><span class="s0">&amp;&amp;</span><span class="s1">r</span><span class="s0">&lt;=</span><span class="s3">56319</span><span class="s0">){</span><span class="s5">if</span><span class="s0">(++</span><span class="s1">o</span><span class="s0">&gt;=</span><span class="s1">i</span><span class="s0">)</span><span class="s5">return this</span><span class="s0">.</span><span class="s1">_interim</span><span class="s0">=</span><span class="s1">r</span><span class="s0">,</span><span class="s1">s</span><span class="s0">;</span><span class="s5">const </span><span class="s1">n</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">charCodeAt</span><span class="s0">(</span><span class="s1">o</span><span class="s0">);</span><span class="s3">56320</span><span class="s0">&lt;=</span><span class="s1">n</span><span class="s0">&amp;&amp;</span><span class="s1">n</span><span class="s0">&lt;=</span><span class="s3">57343</span><span class="s0">?</span><span class="s1">t</span><span class="s0">[</span><span class="s1">s</span><span class="s0">++]=</span><span class="s3">1024</span><span class="s0">*(</span><span class="s1">r</span><span class="s0">-</span><span class="s3">55296</span><span class="s0">)+</span><span class="s1">n</span><span class="s0">-</span><span class="s3">56320</span><span class="s0">+</span><span class="s3">65536</span><span class="s0">:(</span><span class="s1">t</span><span class="s0">[</span><span class="s1">s</span><span class="s0">++]=</span><span class="s1">r</span><span class="s0">,</span><span class="s1">t</span><span class="s0">[</span><span class="s1">s</span><span class="s0">++]=</span><span class="s1">n</span><span class="s0">)}</span><span class="s5">else </span><span class="s3">65279</span><span class="s0">!==</span><span class="s1">r</span><span class="s0">&amp;&amp;(</span><span class="s1">t</span><span class="s0">[</span><span class="s1">s</span><span class="s0">++]=</span><span class="s1">r</span><span class="s0">)}</span><span class="s5">return </span><span class="s1">s</span><span class="s0">}},</span><span class="s1">t</span><span class="s0">.</span><span class="s1">Utf8ToUtf32</span><span class="s0">=</span><span class="s5">class</span><span class="s0">{</span><span class="s1">constructor</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">interim</span><span class="s0">=</span><span class="s5">new </span><span class="s1">Uint8Array</span><span class="s0">(</span><span class="s3">3</span><span class="s0">)}</span><span class="s1">clear</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">interim</span><span class="s0">.</span><span class="s1">fill</span><span class="s0">(</span><span class="s3">0</span><span class="s0">)}</span><span class="s1">decode</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">){</span><span class="s5">const </span><span class="s1">i</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s5">if</span><span class="s0">(!</span><span class="s1">i</span><span class="s0">)</span><span class="s5">return </span><span class="s3">0</span><span class="s0">;</span><span class="s5">let </span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">a</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">h</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s5">if</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">interim</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]){</span><span class="s5">let </span><span class="s1">s</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">,</span><span class="s1">r</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">interim</span><span class="s0">[</span><span class="s3">0</span><span class="s0">];</span><span class="s1">r</span><span class="s0">&amp;=</span><span class="s3">192</span><span class="s0">==(</span><span class="s3">224</span><span class="s0">&amp;</span><span class="s1">r</span><span class="s0">)?</span><span class="s3">31</span><span class="s0">:</span><span class="s3">224</span><span class="s0">==(</span><span class="s3">240</span><span class="s0">&amp;</span><span class="s1">r</span><span class="s0">)?</span><span class="s3">15</span><span class="s0">:</span><span class="s3">7</span><span class="s0">;</span><span class="s5">let </span><span class="s1">o</span><span class="s0">,</span><span class="s1">n</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s5">for</span><span class="s0">(;(</span><span class="s1">o</span><span class="s0">=</span><span class="s3">63</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">interim</span><span class="s0">[++</span><span class="s1">n</span><span class="s0">])&amp;&amp;</span><span class="s1">n</span><span class="s0">&lt;</span><span class="s3">4</span><span class="s0">;)</span><span class="s1">r</span><span class="s0">&lt;&lt;=</span><span class="s3">6</span><span class="s0">,</span><span class="s1">r</span><span class="s0">|=</span><span class="s1">o</span><span class="s0">;</span><span class="s5">const </span><span class="s1">h</span><span class="s0">=</span><span class="s3">192</span><span class="s0">==(</span><span class="s3">224</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">interim</span><span class="s0">[</span><span class="s3">0</span><span class="s0">])?</span><span class="s3">2</span><span class="s0">:</span><span class="s3">224</span><span class="s0">==(</span><span class="s3">240</span><span class="s0">&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">interim</span><span class="s0">[</span><span class="s3">0</span><span class="s0">])?</span><span class="s3">3</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">c</span><span class="s0">=</span><span class="s1">h</span><span class="s0">-</span><span class="s1">n</span><span class="s0">;</span><span class="s5">for</span><span class="s0">(;</span><span class="s1">l</span><span class="s0">&lt;</span><span class="s1">c</span><span class="s0">;){</span><span class="s5">if</span><span class="s0">(</span><span class="s1">l</span><span class="s0">&gt;=</span><span class="s1">i</span><span class="s0">)</span><span class="s5">return </span><span class="s3">0</span><span class="s0">;</span><span class="s5">if</span><span class="s0">(</span><span class="s1">o</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">l</span><span class="s0">++],</span><span class="s3">128</span><span class="s0">!=(</span><span class="s3">192</span><span class="s0">&amp;</span><span class="s1">o</span><span class="s0">)){</span><span class="s1">l</span><span class="s0">--,</span><span class="s1">s</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">;</span><span class="s5">break</span><span class="s0">}</span><span class="s5">this</span><span class="s0">.</span><span class="s1">interim</span><span class="s0">[</span><span class="s1">n</span><span class="s0">++]=</span><span class="s1">o</span><span class="s0">,</span><span class="s1">r</span><span class="s0">&lt;&lt;=</span><span class="s3">6</span><span class="s0">,</span><span class="s1">r</span><span class="s0">|=</span><span class="s3">63</span><span class="s0">&amp;</span><span class="s1">o</span><span class="s0">}</span><span class="s1">s</span><span class="s0">||(</span><span class="s3">2</span><span class="s0">===</span><span class="s1">h</span><span class="s0">?</span><span class="s1">r</span><span class="s0">&lt;</span><span class="s3">128</span><span class="s0">?</span><span class="s1">l</span><span class="s0">--:</span><span class="s1">t</span><span class="s0">[</span><span class="s1">a</span><span class="s0">++]=</span><span class="s1">r</span><span class="s0">:</span><span class="s3">3</span><span class="s0">===</span><span class="s1">h</span><span class="s0">?</span><span class="s1">r</span><span class="s0">&lt;</span><span class="s3">2048</span><span class="s0">||</span><span class="s1">r</span><span class="s0">&gt;=</span><span class="s3">55296</span><span class="s0">&amp;&amp;</span><span class="s1">r</span><span class="s0">&lt;=</span><span class="s3">57343</span><span class="s0">||</span><span class="s3">65279</span><span class="s0">===</span><span class="s1">r</span><span class="s0">||(</span><span class="s1">t</span><span class="s0">[</span><span class="s1">a</span><span class="s0">++]=</span><span class="s1">r</span><span class="s0">):</span><span class="s1">r</span><span class="s0">&lt;</span><span class="s3">65536</span><span class="s0">||</span><span class="s1">r</span><span class="s0">&gt;</span><span class="s3">1114111</span><span class="s0">||(</span><span class="s1">t</span><span class="s0">[</span><span class="s1">a</span><span class="s0">++]=</span><span class="s1">r</span><span class="s0">)),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">interim</span><span class="s0">.</span><span class="s1">fill</span><span class="s0">(</span><span class="s3">0</span><span class="s0">)}</span><span class="s5">const </span><span class="s1">c</span><span class="s0">=</span><span class="s1">i</span><span class="s0">-</span><span class="s3">4</span><span class="s0">;</span><span class="s5">let </span><span class="s1">d</span><span class="s0">=</span><span class="s1">l</span><span class="s0">;</span><span class="s5">for</span><span class="s0">(;</span><span class="s1">d</span><span class="s0">&lt;</span><span class="s1">i</span><span class="s0">;){</span><span class="s5">for</span><span class="s0">(;!(!(</span><span class="s1">d</span><span class="s0">&lt;</span><span class="s1">c</span><span class="s0">)||</span><span class="s3">128</span><span class="s0">&amp;(</span><span class="s1">s</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">d</span><span class="s0">])||</span><span class="s3">128</span><span class="s0">&amp;(</span><span class="s1">r</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">d</span><span class="s0">+</span><span class="s3">1</span><span class="s0">])||</span><span class="s3">128</span><span class="s0">&amp;(</span><span class="s1">o</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">d</span><span class="s0">+</span><span class="s3">2</span><span class="s0">])||</span><span class="s3">128</span><span class="s0">&amp;(</span><span class="s1">n</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">d</span><span class="s0">+</span><span class="s3">3</span><span class="s0">]));)</span><span class="s1">t</span><span class="s0">[</span><span class="s1">a</span><span class="s0">++]=</span><span class="s1">s</span><span class="s0">,</span><span class="s1">t</span><span class="s0">[</span><span class="s1">a</span><span class="s0">++]=</span><span class="s1">r</span><span class="s0">,</span><span class="s1">t</span><span class="s0">[</span><span class="s1">a</span><span class="s0">++]=</span><span class="s1">o</span><span class="s0">,</span><span class="s1">t</span><span class="s0">[</span><span class="s1">a</span><span class="s0">++]=</span><span class="s1">n</span><span class="s0">,</span><span class="s1">d</span><span class="s0">+=</span><span class="s3">4</span><span class="s0">;</span><span class="s5">if</span><span class="s0">(</span><span class="s1">s</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">d</span><span class="s0">++],</span><span class="s1">s</span><span class="s0">&lt;</span><span class="s3">128</span><span class="s0">)</span><span class="s1">t</span><span class="s0">[</span><span class="s1">a</span><span class="s0">++]=</span><span class="s1">s</span><span class="s0">;</span><span class="s5">else if</span><span class="s0">(</span><span class="s3">192</span><span class="s0">==(</span><span class="s3">224</span><span class="s0">&amp;</span><span class="s1">s</span><span class="s0">)){</span><span class="s5">if</span><span class="s0">(</span><span class="s1">d</span><span class="s0">&gt;=</span><span class="s1">i</span><span class="s0">)</span><span class="s5">return this</span><span class="s0">.</span><span class="s1">interim</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]=</span><span class="s1">s</span><span class="s0">,</span><span class="s1">a</span><span class="s0">;</span><span class="s5">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">d</span><span class="s0">++],</span><span class="s3">128</span><span class="s0">!=(</span><span class="s3">192</span><span class="s0">&amp;</span><span class="s1">r</span><span class="s0">)){</span><span class="s1">d</span><span class="s0">--;</span><span class="s5">continue</span><span class="s0">}</span><span class="s5">if</span><span class="s0">(</span><span class="s1">h</span><span class="s0">=(</span><span class="s3">31</span><span class="s0">&amp;</span><span class="s1">s</span><span class="s0">)&lt;&lt;</span><span class="s3">6</span><span class="s0">|</span><span class="s3">63</span><span class="s0">&amp;</span><span class="s1">r</span><span class="s0">,</span><span class="s1">h</span><span class="s0">&lt;</span><span class="s3">128</span><span class="s0">){</span><span class="s1">d</span><span class="s0">--;</span><span class="s5">continue</span><span class="s0">}</span><span class="s1">t</span><span class="s0">[</span><span class="s1">a</span><span class="s0">++]=</span><span class="s1">h</span><span class="s0">}</span><span class="s5">else if</span><span class="s0">(</span><span class="s3">224</span><span class="s0">==(</span><span class="s3">240</span><span class="s0">&amp;</span><span class="s1">s</span><span class="s0">)){</span><span class="s5">if</span><span class="s0">(</span><span class="s1">d</span><span class="s0">&gt;=</span><span class="s1">i</span><span class="s0">)</span><span class="s5">return this</span><span class="s0">.</span><span class="s1">interim</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]=</span><span class="s1">s</span><span class="s0">,</span><span class="s1">a</span><span class="s0">;</span><span class="s5">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">d</span><span class="s0">++],</span><span class="s3">128</span><span class="s0">!=(</span><span class="s3">192</span><span class="s0">&amp;</span><span class="s1">r</span><span class="s0">)){</span><span class="s1">d</span><span class="s0">--;</span><span class="s5">continue</span><span class="s0">}</span><span class="s5">if</span><span class="s0">(</span><span class="s1">d</span><span class="s0">&gt;=</span><span class="s1">i</span><span class="s0">)</span><span class="s5">return this</span><span class="s0">.</span><span class="s1">interim</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]=</span><span class="s1">s</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">interim</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]=</span><span class="s1">r</span><span class="s0">,</span><span class="s1">a</span><span class="s0">;</span><span class="s5">if</span><span class="s0">(</span><span class="s1">o</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">d</span><span class="s0">++],</span><span class="s3">128</span><span class="s0">!=(</span><span class="s3">192</span><span class="s0">&amp;</span><span class="s1">o</span><span class="s0">)){</span><span class="s1">d</span><span class="s0">--;</span><span class="s5">continue</span><span class="s0">}</span><span class="s5">if</span><span class="s0">(</span><span class="s1">h</span><span class="s0">=(</span><span class="s3">15</span><span class="s0">&amp;</span><span class="s1">s</span><span class="s0">)&lt;&lt;</span><span class="s3">12</span><span class="s0">|(</span><span class="s3">63</span><span class="s0">&amp;</span><span class="s1">r</span><span class="s0">)&lt;&lt;</span><span class="s3">6</span><span class="s0">|</span><span class="s3">63</span><span class="s0">&amp;</span><span class="s1">o</span><span class="s0">,</span><span class="s1">h</span><span class="s0">&lt;</span><span class="s3">2048</span><span class="s0">||</span><span class="s1">h</span><span class="s0">&gt;=</span><span class="s3">55296</span><span class="s0">&amp;&amp;</span><span class="s1">h</span><span class="s0">&lt;=</span><span class="s3">57343</span><span class="s0">||</span><span class="s3">65279</span><span class="s0">===</span><span class="s1">h</span><span class="s0">)</span><span class="s5">continue</span><span class="s0">;</span><span class="s1">t</span><span class="s0">[</span><span class="s1">a</span><span class="s0">++]=</span><span class="s1">h</span><span class="s0">}</span><span class="s5">else if</span><span class="s0">(</span><span class="s3">240</span><span class="s0">==(</span><span class="s3">248</span><span class="s0">&amp;</span><span class="s1">s</span><span class="s0">)){</span><span class="s5">if</span><span class="s0">(</span><span class="s1">d</span><span class="s0">&gt;=</span><span class="s1">i</span><span class="s0">)</span><span class="s5">return this</span><span class="s0">.</span><span class="s1">interim</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]=</span><span class="s1">s</span><span class="s0">,</span><span class="s1">a</span><span class="s0">;</span><span class="s5">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">d</span><span class="s0">++],</span><span class="s3">128</span><span class="s0">!=(</span><span class="s3">192</span><span class="s0">&amp;</span><span class="s1">r</span><span class="s0">)){</span><span class="s1">d</span><span class="s0">--;</span><span class="s5">continue</span><span class="s0">}</span><span class="s5">if</span><span class="s0">(</span><span class="s1">d</span><span class="s0">&gt;=</span><span class="s1">i</span><span class="s0">)</span><span class="s5">return this</span><span class="s0">.</span><span class="s1">interim</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]=</span><span class="s1">s</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">interim</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]=</span><span class="s1">r</span><span class="s0">,</span><span class="s1">a</span><span class="s0">;</span><span class="s5">if</span><span class="s0">(</span><span class="s1">o</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">d</span><span class="s0">++],</span><span class="s3">128</span><span class="s0">!=(</span><span class="s3">192</span><span class="s0">&amp;</span><span class="s1">o</span><span class="s0">)){</span><span class="s1">d</span><span class="s0">--;</span><span class="s5">continue</span><span class="s0">}</span><span class="s5">if</span><span class="s0">(</span><span class="s1">d</span><span class="s0">&gt;=</span><span class="s1">i</span><span class="s0">)</span><span class="s5">return this</span><span class="s0">.</span><span class="s1">interim</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]=</span><span class="s1">s</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">interim</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]=</span><span class="s1">r</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">interim</span><span class="s0">[</span><span class="s3">2</span><span class="s0">]=</span><span class="s1">o</span><span class="s0">,</span><span class="s1">a</span><span class="s0">;</span><span class="s5">if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">d</span><span class="s0">++],</span><span class="s3">128</span><span class="s0">!=(</span><span class="s3">192</span><span class="s0">&amp;</span><span class="s1">n</span><span class="s0">)){</span><span class="s1">d</span><span class="s0">--;</span><span class="s5">continue</span><span class="s0">}</span><span class="s5">if</span><span class="s0">(</span><span class="s1">h</span><span class="s0">=(</span><span class="s3">7</span><span class="s0">&amp;</span><span class="s1">s</span><span class="s0">)&lt;&lt;</span><span class="s3">18</span><span class="s0">|(</span><span class="s3">63</span><span class="s0">&amp;</span><span class="s1">r</span><span class="s0">)&lt;&lt;</span><span class="s3">12</span><span class="s0">|(</span><span class="s3">63</span><span class="s0">&amp;</span><span class="s1">o</span><span class="s0">)&lt;&lt;</span><span class="s3">6</span><span class="s0">|</span><span class="s3">63</span><span class="s0">&amp;</span><span class="s1">n</span><span class="s0">,</span><span class="s1">h</span><span class="s0">&lt;</span><span class="s3">65536</span><span class="s0">||</span><span class="s1">h</span><span class="s0">&gt;</span><span class="s3">1114111</span><span class="s0">)</span><span class="s5">continue</span><span class="s0">;</span><span class="s1">t</span><span class="s0">[</span><span class="s1">a</span><span class="s0">++]=</span><span class="s1">h</span><span class="s0">}}</span><span class="s5">return </span><span class="s1">a</span><span class="s0">}}},</span><span class="s3">776</span><span class="s0">:</span><span class="s5">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s5">var </span><span class="s1">s</span><span class="s0">=</span><span class="s5">this</span><span class="s0">&amp;&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">__decorate</span><span class="s0">||</span><span class="s5">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">){</span><span class="s5">var </span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">=</span><span class="s1">arguments</span><span class="s0">.</span><span class="s1">length</span><span class="s0">,</span><span class="s1">n</span><span class="s0">=</span><span class="s1">o</span><span class="s0">&lt;</span><span class="s3">3</span><span class="s0">?</span><span class="s1">t</span><span class="s0">:</span><span class="s5">null</span><span class="s0">===</span><span class="s1">s</span><span class="s0">?</span><span class="s1">s</span><span class="s0">=</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">getOwnPropertyDescriptor</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">):</span><span class="s1">s</span><span class="s0">;</span><span class="s5">if</span><span class="s0">(</span><span class="s2">&quot;object&quot;</span><span class="s0">==</span><span class="s5">typeof </span><span class="s1">Reflect</span><span class="s0">&amp;&amp;</span><span class="s2">&quot;function&quot;</span><span class="s0">==</span><span class="s5">typeof </span><span class="s1">Reflect</span><span class="s0">.</span><span class="s1">decorate</span><span class="s0">)</span><span class="s1">n</span><span class="s0">=</span><span class="s1">Reflect</span><span class="s0">.</span><span class="s1">decorate</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">);</span><span class="s5">else for</span><span class="s0">(</span><span class="s5">var </span><span class="s1">a</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">-</span><span class="s3">1</span><span class="s0">;</span><span class="s1">a</span><span class="s0">&gt;=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">a</span><span class="s0">--)(</span><span class="s1">r</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">a</span><span class="s0">])&amp;&amp;(</span><span class="s1">n</span><span class="s0">=(</span><span class="s1">o</span><span class="s0">&lt;</span><span class="s3">3</span><span class="s0">?</span><span class="s1">r</span><span class="s0">(</span><span class="s1">n</span><span class="s0">):</span><span class="s1">o</span><span class="s0">&gt;</span><span class="s3">3</span><span class="s0">?</span><span class="s1">r</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">n</span><span class="s0">):</span><span class="s1">r</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">))||</span><span class="s1">n</span><span class="s0">);</span><span class="s5">return </span><span class="s1">o</span><span class="s0">&gt;</span><span class="s3">3</span><span class="s0">&amp;&amp;</span><span class="s1">n</span><span class="s0">&amp;&amp;</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">n</span><span class="s0">),</span><span class="s1">n</span><span class="s0">},</span><span class="s1">r</span><span class="s0">=</span><span class="s5">this</span><span class="s0">&amp;&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">__param</span><span class="s0">||</span><span class="s5">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">){</span><span class="s5">return function</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">){</span><span class="s1">t</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">e</span><span class="s0">)}};</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">traceCall</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">setTraceLogger</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">LogService</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">;</span><span class="s5">const </span><span class="s1">o</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">859</span><span class="s0">),</span><span class="s1">n</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">97</span><span class="s0">),</span><span class="s1">a</span><span class="s0">={</span><span class="s1">trace</span><span class="s0">:</span><span class="s1">n</span><span class="s0">.</span><span class="s1">LogLevelEnum</span><span class="s0">.</span><span class="s1">TRACE</span><span class="s0">,</span><span class="s1">debug</span><span class="s0">:</span><span class="s1">n</span><span class="s0">.</span><span class="s1">LogLevelEnum</span><span class="s0">.</span><span class="s1">DEBUG</span><span class="s0">,</span><span class="s1">info</span><span class="s0">:</span><span class="s1">n</span><span class="s0">.</span><span class="s1">LogLevelEnum</span><span class="s0">.</span><span class="s1">INFO</span><span class="s0">,</span><span class="s1">warn</span><span class="s0">:</span><span class="s1">n</span><span class="s0">.</span><span class="s1">LogLevelEnum</span><span class="s0">.</span><span class="s1">WARN</span><span class="s0">,</span><span class="s1">error</span><span class="s0">:</span><span class="s1">n</span><span class="s0">.</span><span class="s1">LogLevelEnum</span><span class="s0">.</span><span class="s1">ERROR</span><span class="s0">,</span><span class="s1">off</span><span class="s0">:</span><span class="s1">n</span><span class="s0">.</span><span class="s1">LogLevelEnum</span><span class="s0">.</span><span class="s1">OFF</span><span class="s0">};</span><span class="s5">let </span><span class="s1">h</span><span class="s0">,</span><span class="s1">l</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">LogService</span><span class="s0">=</span><span class="s5">class extends </span><span class="s1">o</span><span class="s0">.</span><span class="s1">Disposable</span><span class="s0">{</span><span class="s1">get logLevel</span><span class="s0">(){</span><span class="s5">return this</span><span class="s0">.</span><span class="s1">_logLevel</span><span class="s0">}</span><span class="s1">constructor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">super</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">=</span><span class="s1">e</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_logLevel</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">LogLevelEnum</span><span class="s0">.</span><span class="s1">OFF</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_updateLogLevel</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">.</span><span class="s1">onSpecificOptionChange</span><span class="s0">(</span><span class="s2">&quot;logLevel&quot;</span><span class="s0">,(()=&gt;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_updateLogLevel</span><span class="s0">()))),</span><span class="s1">h</span><span class="s0">=</span><span class="s5">this</span><span class="s0">}</span><span class="s1">_updateLogLevel</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_logLevel</span><span class="s0">=</span><span class="s1">a</span><span class="s0">[</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">.</span><span class="s1">rawOptions</span><span class="s0">.</span><span class="s1">logLevel</span><span class="s0">]}</span><span class="s1">_evalLazyOptionalParams</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">for</span><span class="s0">(</span><span class="s5">let </span><span class="s1">t</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">t</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">t</span><span class="s0">++)</span><span class="s2">&quot;function&quot;</span><span class="s0">==</span><span class="s5">typeof </span><span class="s1">e</span><span class="s0">[</span><span class="s1">t</span><span class="s0">]&amp;&amp;(</span><span class="s1">e</span><span class="s0">[</span><span class="s1">t</span><span class="s0">]=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">t</span><span class="s0">]())}</span><span class="s1">_log</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_evalLazyOptionalParams</span><span class="s0">(</span><span class="s1">i</span><span class="s0">),</span><span class="s1">e</span><span class="s0">.</span><span class="s1">call</span><span class="s0">(</span><span class="s1">console</span><span class="s0">,(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">.</span><span class="s1">options</span><span class="s0">.</span><span class="s1">logger</span><span class="s0">?</span><span class="s2">&quot;&quot;</span><span class="s0">:</span><span class="s2">&quot;xterm.js: &quot;</span><span class="s0">)+</span><span class="s1">t</span><span class="s0">,</span><span class="s1">...i</span><span class="s0">)}</span><span class="s1">trace</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">...t</span><span class="s0">){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_logLevel</span><span class="s0">&lt;=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">LogLevelEnum</span><span class="s0">.</span><span class="s1">TRACE</span><span class="s0">&amp;&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_log</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">.</span><span class="s1">options</span><span class="s0">.</span><span class="s1">logger</span><span class="s0">?.</span><span class="s1">trace</span><span class="s0">.</span><span class="s1">bind</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">.</span><span class="s1">options</span><span class="s0">.</span><span class="s1">logger</span><span class="s0">)??</span><span class="s1">console</span><span class="s0">.</span><span class="s1">log</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)}</span><span class="s1">debug</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">...t</span><span class="s0">){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_logLevel</span><span class="s0">&lt;=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">LogLevelEnum</span><span class="s0">.</span><span class="s1">DEBUG</span><span class="s0">&amp;&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_log</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">.</span><span class="s1">options</span><span class="s0">.</span><span class="s1">logger</span><span class="s0">?.</span><span class="s1">debug</span><span class="s0">.</span><span class="s1">bind</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">.</span><span class="s1">options</span><span class="s0">.</span><span class="s1">logger</span><span class="s0">)??</span><span class="s1">console</span><span class="s0">.</span><span class="s1">log</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)}</span><span class="s1">info</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">...t</span><span class="s0">){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_logLevel</span><span class="s0">&lt;=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">LogLevelEnum</span><span class="s0">.</span><span class="s1">INFO</span><span class="s0">&amp;&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_log</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">.</span><span class="s1">options</span><span class="s0">.</span><span class="s1">logger</span><span class="s0">?.</span><span class="s1">info</span><span class="s0">.</span><span class="s1">bind</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">.</span><span class="s1">options</span><span class="s0">.</span><span class="s1">logger</span><span class="s0">)??</span><span class="s1">console</span><span class="s0">.</span><span class="s1">info</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)}</span><span class="s1">warn</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">...t</span><span class="s0">){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_logLevel</span><span class="s0">&lt;=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">LogLevelEnum</span><span class="s0">.</span><span class="s1">WARN</span><span class="s0">&amp;&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_log</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">.</span><span class="s1">options</span><span class="s0">.</span><span class="s1">logger</span><span class="s0">?.</span><span class="s1">warn</span><span class="s0">.</span><span class="s1">bind</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">.</span><span class="s1">options</span><span class="s0">.</span><span class="s1">logger</span><span class="s0">)??</span><span class="s1">console</span><span class="s0">.</span><span class="s1">warn</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)}</span><span class="s1">error</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">...t</span><span class="s0">){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_logLevel</span><span class="s0">&lt;=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">LogLevelEnum</span><span class="s0">.</span><span class="s1">ERROR</span><span class="s0">&amp;&amp;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_log</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">.</span><span class="s1">options</span><span class="s0">.</span><span class="s1">logger</span><span class="s0">?.</span><span class="s1">error</span><span class="s0">.</span><span class="s1">bind</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">.</span><span class="s1">options</span><span class="s0">.</span><span class="s1">logger</span><span class="s0">)??</span><span class="s1">console</span><span class="s0">.</span><span class="s1">error</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)}};</span><span class="s1">t</span><span class="s0">.</span><span class="s1">LogService</span><span class="s0">=</span><span class="s1">l</span><span class="s0">=</span><span class="s1">s</span><span class="s0">([</span><span class="s1">r</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">n</span><span class="s0">.</span><span class="s1">IOptionsService</span><span class="s0">)],</span><span class="s1">l</span><span class="s0">),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">setTraceLogger</span><span class="s0">=</span><span class="s5">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s1">h</span><span class="s0">=</span><span class="s1">e</span><span class="s0">},</span><span class="s1">t</span><span class="s0">.</span><span class="s1">traceCall</span><span class="s0">=</span><span class="s5">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s5">if</span><span class="s0">(</span><span class="s2">&quot;function&quot;</span><span class="s0">!=</span><span class="s5">typeof </span><span class="s1">i</span><span class="s0">.</span><span class="s1">value</span><span class="s0">)</span><span class="s5">throw new </span><span class="s1">Error</span><span class="s0">(</span><span class="s2">&quot;not supported&quot;</span><span class="s0">);</span><span class="s5">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">value</span><span class="s0">;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">value</span><span class="s0">=</span><span class="s5">function</span><span class="s0">(</span><span class="s1">...e</span><span class="s0">){</span><span class="s5">if</span><span class="s0">(</span><span class="s1">h</span><span class="s0">.</span><span class="s1">logLevel</span><span class="s0">!==</span><span class="s1">n</span><span class="s0">.</span><span class="s1">LogLevelEnum</span><span class="s0">.</span><span class="s1">TRACE</span><span class="s0">)</span><span class="s5">return </span><span class="s1">s</span><span class="s0">.</span><span class="s1">apply</span><span class="s0">(</span><span class="s5">this</span><span class="s0">,</span><span class="s1">e</span><span class="s0">);</span><span class="s1">h</span><span class="s0">.</span><span class="s1">trace</span><span class="s0">(</span><span class="s2">`GlyphRenderer#</span><span class="s1">$</span><span class="s0">{</span><span class="s1">s</span><span class="s0">.</span><span class="s1">name</span><span class="s0">}</span><span class="s2">(</span><span class="s1">$</span><span class="s0">{</span><span class="s1">e</span><span class="s0">.</span><span class="s1">map</span><span class="s0">((</span><span class="s1">e</span><span class="s0">=&gt;</span><span class="s1">JSON</span><span class="s0">.</span><span class="s1">stringify</span><span class="s0">(</span><span class="s1">e</span><span class="s0">))).</span><span class="s1">join</span><span class="s0">(</span><span class="s2">&quot;, &quot;</span><span class="s0">)}</span><span class="s2">)`</span><span class="s0">);</span><span class="s5">const </span><span class="s1">t</span><span class="s0">=</span><span class="s1">s</span><span class="s0">.</span><span class="s1">apply</span><span class="s0">(</span><span class="s5">this</span><span class="s0">,</span><span class="s1">e</span><span class="s0">);</span><span class="s5">return </span><span class="s1">h</span><span class="s0">.</span><span class="s1">trace</span><span class="s0">(</span><span class="s2">`GlyphRenderer#</span><span class="s1">$</span><span class="s0">{</span><span class="s1">s</span><span class="s0">.</span><span class="s1">name</span><span class="s0">} </span><span class="s2">return`</span><span class="s0">,</span><span class="s1">t</span><span class="s0">),</span><span class="s1">t</span><span class="s0">}}},</span><span class="s3">726</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">createDecorator</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getServiceDependencies</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">serviceRegistry</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">;</span><span class="s5">const </span><span class="s1">i</span><span class="s0">=</span><span class="s2">&quot;di$target&quot;</span><span class="s0">,</span><span class="s1">s</span><span class="s0">=</span><span class="s2">&quot;di$dependencies&quot;</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">serviceRegistry</span><span class="s0">=</span><span class="s5">new </span><span class="s1">Map</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getServiceDependencies</span><span class="s0">=</span><span class="s5">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">return </span><span class="s1">e</span><span class="s0">[</span><span class="s1">s</span><span class="s0">]||[]},</span><span class="s1">t</span><span class="s0">.</span><span class="s1">createDecorator</span><span class="s0">=</span><span class="s5">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">serviceRegistry</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">e</span><span class="s0">))</span><span class="s5">return </span><span class="s1">t</span><span class="s0">.</span><span class="s1">serviceRegistry</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">);</span><span class="s5">const </span><span class="s1">r</span><span class="s0">=</span><span class="s5">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">o</span><span class="s0">){</span><span class="s5">if</span><span class="s0">(</span><span class="s3">3</span><span class="s0">!==</span><span class="s1">arguments</span><span class="s0">.</span><span class="s1">length</span><span class="s0">)</span><span class="s5">throw new </span><span class="s1">Error</span><span class="s0">(</span><span class="s2">&quot;@IServiceName-decorator can only be used to decorate a parameter&quot;</span><span class="s0">);!</span><span class="s5">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s1">t</span><span class="s0">[</span><span class="s1">i</span><span class="s0">]===</span><span class="s1">t</span><span class="s0">?</span><span class="s1">t</span><span class="s0">[</span><span class="s1">s</span><span class="s0">].</span><span class="s1">push</span><span class="s0">({</span><span class="s1">id</span><span class="s0">:</span><span class="s1">e</span><span class="s0">,</span><span class="s1">index</span><span class="s0">:</span><span class="s1">r</span><span class="s0">}):(</span><span class="s1">t</span><span class="s0">[</span><span class="s1">s</span><span class="s0">]=[{</span><span class="s1">id</span><span class="s0">:</span><span class="s1">e</span><span class="s0">,</span><span class="s1">index</span><span class="s0">:</span><span class="s1">r</span><span class="s0">}],</span><span class="s1">t</span><span class="s0">[</span><span class="s1">i</span><span class="s0">]=</span><span class="s1">t</span><span class="s0">)}(</span><span class="s1">r</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">o</span><span class="s0">)};</span><span class="s5">return </span><span class="s1">r</span><span class="s0">.</span><span class="s1">toString</span><span class="s0">=()=&gt;</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">serviceRegistry</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">),</span><span class="s1">r</span><span class="s0">}},</span><span class="s3">97</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">)=&gt;{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">IDecorationService</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">IUnicodeService</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">IOscLinkService</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">IOptionsService</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">ILogService</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">LogLevelEnum</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">IInstantiationService</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">ICharsetService</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">ICoreService</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">ICoreMouseService</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">IBufferService</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">;</span><span class="s5">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">726</span><span class="s0">);</span><span class="s5">var </span><span class="s1">r</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">IBufferService</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">createDecorator</span><span class="s0">)(</span><span class="s2">&quot;BufferService&quot;</span><span class="s0">),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">ICoreMouseService</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">createDecorator</span><span class="s0">)(</span><span class="s2">&quot;CoreMouseService&quot;</span><span class="s0">),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">ICoreService</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">createDecorator</span><span class="s0">)(</span><span class="s2">&quot;CoreService&quot;</span><span class="s0">),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">ICharsetService</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">createDecorator</span><span class="s0">)(</span><span class="s2">&quot;CharsetService&quot;</span><span class="s0">),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">IInstantiationService</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">createDecorator</span><span class="s0">)(</span><span class="s2">&quot;InstantiationService&quot;</span><span class="s0">),</span><span class="s5">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s1">e</span><span class="s0">[</span><span class="s1">e</span><span class="s0">.</span><span class="s1">TRACE</span><span class="s0">=</span><span class="s3">0</span><span class="s0">]=</span><span class="s2">&quot;TRACE&quot;</span><span class="s0">,</span><span class="s1">e</span><span class="s0">[</span><span class="s1">e</span><span class="s0">.</span><span class="s1">DEBUG</span><span class="s0">=</span><span class="s3">1</span><span class="s0">]=</span><span class="s2">&quot;DEBUG&quot;</span><span class="s0">,</span><span class="s1">e</span><span class="s0">[</span><span class="s1">e</span><span class="s0">.</span><span class="s1">INFO</span><span class="s0">=</span><span class="s3">2</span><span class="s0">]=</span><span class="s2">&quot;INFO&quot;</span><span class="s0">,</span><span class="s1">e</span><span class="s0">[</span><span class="s1">e</span><span class="s0">.</span><span class="s1">WARN</span><span class="s0">=</span><span class="s3">3</span><span class="s0">]=</span><span class="s2">&quot;WARN&quot;</span><span class="s0">,</span><span class="s1">e</span><span class="s0">[</span><span class="s1">e</span><span class="s0">.</span><span class="s1">ERROR</span><span class="s0">=</span><span class="s3">4</span><span class="s0">]=</span><span class="s2">&quot;ERROR&quot;</span><span class="s0">,</span><span class="s1">e</span><span class="s0">[</span><span class="s1">e</span><span class="s0">.</span><span class="s1">OFF</span><span class="s0">=</span><span class="s3">5</span><span class="s0">]=</span><span class="s2">&quot;OFF&quot;</span><span class="s0">}(</span><span class="s1">r</span><span class="s0">||(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">LogLevelEnum</span><span class="s0">=</span><span class="s1">r</span><span class="s0">={})),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">ILogService</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">createDecorator</span><span class="s0">)(</span><span class="s2">&quot;LogService&quot;</span><span class="s0">),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">IOptionsService</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">createDecorator</span><span class="s0">)(</span><span class="s2">&quot;OptionsService&quot;</span><span class="s0">),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">IOscLinkService</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">createDecorator</span><span class="s0">)(</span><span class="s2">&quot;OscLinkService&quot;</span><span class="s0">),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">IUnicodeService</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">createDecorator</span><span class="s0">)(</span><span class="s2">&quot;UnicodeService&quot;</span><span class="s0">),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">IDecorationService</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">createDecorator</span><span class="s0">)(</span><span class="s2">&quot;DecorationService&quot;</span><span class="s0">)}},</span><span class="s1">t</span><span class="s0">={};</span><span class="s5">function </span><span class="s1">i</span><span class="s0">(</span><span class="s1">s</span><span class="s0">){</span><span class="s5">var </span><span class="s1">r</span><span class="s0">=</span><span class="s1">t</span><span class="s0">[</span><span class="s1">s</span><span class="s0">];</span><span class="s5">if</span><span class="s0">(</span><span class="s5">void </span><span class="s3">0</span><span class="s0">!==</span><span class="s1">r</span><span class="s0">)</span><span class="s5">return </span><span class="s1">r</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">;</span><span class="s5">var </span><span class="s1">o</span><span class="s0">=</span><span class="s1">t</span><span class="s0">[</span><span class="s1">s</span><span class="s0">]={</span><span class="s1">exports</span><span class="s0">:{}};</span><span class="s5">return </span><span class="s1">e</span><span class="s0">[</span><span class="s1">s</span><span class="s0">].</span><span class="s1">call</span><span class="s0">(</span><span class="s1">o</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">o</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">,</span><span class="s1">i</span><span class="s0">),</span><span class="s1">o</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">}</span><span class="s5">var </span><span class="s1">s</span><span class="s0">={};</span><span class="s5">return</span><span class="s0">(()=&gt;{</span><span class="s5">var </span><span class="s1">e</span><span class="s0">=</span><span class="s1">s</span><span class="s0">;</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">e</span><span class="s0">.</span><span class="s1">CanvasAddon</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">;</span><span class="s5">const </span><span class="s1">t</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">345</span><span class="s0">),</span><span class="s1">r</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">859</span><span class="s0">),</span><span class="s1">o</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">776</span><span class="s0">),</span><span class="s1">n</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">949</span><span class="s0">);</span><span class="s5">class </span><span class="s1">a </span><span class="s5">extends </span><span class="s1">r</span><span class="s0">.</span><span class="s1">Disposable</span><span class="s0">{</span><span class="s1">constructor</span><span class="s0">(){</span><span class="s5">super</span><span class="s0">(</span><span class="s1">...arguments</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_onChangeTextureAtlas</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">(</span><span class="s5">new </span><span class="s1">t</span><span class="s0">.</span><span class="s1">EventEmitter</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">onChangeTextureAtlas</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_onChangeTextureAtlas</span><span class="s0">.</span><span class="s1">event</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_onAddTextureAtlasCanvas</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">(</span><span class="s5">new </span><span class="s1">t</span><span class="s0">.</span><span class="s1">EventEmitter</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">onAddTextureAtlasCanvas</span><span class="s0">=</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_onAddTextureAtlasCanvas</span><span class="s0">.</span><span class="s1">event</span><span class="s0">}</span><span class="s1">get textureAtlas</span><span class="s0">(){</span><span class="s5">return this</span><span class="s0">.</span><span class="s1">_renderer</span><span class="s0">?.</span><span class="s1">textureAtlas</span><span class="s0">}</span><span class="s1">activate</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s5">const </span><span class="s1">i</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">_core</span><span class="s0">;</span><span class="s5">if</span><span class="s0">(!</span><span class="s1">e</span><span class="s0">.</span><span class="s1">element</span><span class="s0">)</span><span class="s5">return void this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">onWillOpen</span><span class="s0">((()=&gt;</span><span class="s5">this</span><span class="s0">.</span><span class="s1">activate</span><span class="s0">(</span><span class="s1">e</span><span class="s0">))));</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">=</span><span class="s1">e</span><span class="s0">;</span><span class="s5">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">coreService</span><span class="s0">,</span><span class="s1">a</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">optionsService</span><span class="s0">,</span><span class="s1">h</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">screenElement</span><span class="s0">,</span><span class="s1">l</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">linkifier</span><span class="s0">,</span><span class="s1">c</span><span class="s0">=</span><span class="s1">i</span><span class="s0">,</span><span class="s1">d</span><span class="s0">=</span><span class="s1">c</span><span class="s0">.</span><span class="s1">_bufferService</span><span class="s0">,</span><span class="s1">_</span><span class="s0">=</span><span class="s1">c</span><span class="s0">.</span><span class="s1">_renderService</span><span class="s0">,</span><span class="s1">u</span><span class="s0">=</span><span class="s1">c</span><span class="s0">.</span><span class="s1">_characterJoinerService</span><span class="s0">,</span><span class="s1">g</span><span class="s0">=</span><span class="s1">c</span><span class="s0">.</span><span class="s1">_charSizeService</span><span class="s0">,</span><span class="s1">f</span><span class="s0">=</span><span class="s1">c</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">,</span><span class="s1">v</span><span class="s0">=</span><span class="s1">c</span><span class="s0">.</span><span class="s1">_decorationService</span><span class="s0">,</span><span class="s1">C</span><span class="s0">=</span><span class="s1">c</span><span class="s0">.</span><span class="s1">_logService</span><span class="s0">,</span><span class="s1">p</span><span class="s0">=</span><span class="s1">c</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">;(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">o</span><span class="s0">.</span><span class="s1">setTraceLogger</span><span class="s0">)(</span><span class="s1">C</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_renderer</span><span class="s0">=</span><span class="s5">new </span><span class="s1">n</span><span class="s0">.</span><span class="s1">CanvasRenderer</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">h</span><span class="s0">,</span><span class="s1">l</span><span class="s0">,</span><span class="s1">d</span><span class="s0">,</span><span class="s1">g</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">u</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">f</span><span class="s0">,</span><span class="s1">v</span><span class="s0">,</span><span class="s1">p</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">((</span><span class="s3">0</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">forwardEvent</span><span class="s0">)(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_renderer</span><span class="s0">.</span><span class="s1">onChangeTextureAtlas</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_onChangeTextureAtlas</span><span class="s0">)),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">((</span><span class="s3">0</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">forwardEvent</span><span class="s0">)(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_renderer</span><span class="s0">.</span><span class="s1">onAddTextureAtlasCanvas</span><span class="s0">,</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_onAddTextureAtlasCanvas</span><span class="s0">)),</span><span class="s1">_</span><span class="s0">.</span><span class="s1">setRenderer</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_renderer</span><span class="s0">),</span><span class="s1">_</span><span class="s0">.</span><span class="s1">handleResize</span><span class="s0">(</span><span class="s1">d</span><span class="s0">.</span><span class="s1">cols</span><span class="s0">,</span><span class="s1">d</span><span class="s0">.</span><span class="s1">rows</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">((</span><span class="s3">0</span><span class="s0">,</span><span class="s1">r</span><span class="s0">.</span><span class="s1">toDisposable</span><span class="s0">)((()=&gt;{</span><span class="s1">_</span><span class="s0">.</span><span class="s1">setRenderer</span><span class="s0">(</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">.</span><span class="s1">_core</span><span class="s0">.</span><span class="s1">_createRenderer</span><span class="s0">()),</span><span class="s1">_</span><span class="s0">.</span><span class="s1">handleResize</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">cols</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">rows</span><span class="s0">),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_renderer</span><span class="s0">?.</span><span class="s1">dispose</span><span class="s0">(),</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_renderer</span><span class="s0">=</span><span class="s5">void </span><span class="s3">0</span><span class="s0">})))}</span><span class="s1">clearTextureAtlas</span><span class="s0">(){</span><span class="s5">this</span><span class="s0">.</span><span class="s1">_renderer</span><span class="s0">?.</span><span class="s1">clearTextureAtlas</span><span class="s0">()}}</span><span class="s1">e</span><span class="s0">.</span><span class="s1">CanvasAddon</span><span class="s0">=</span><span class="s1">a</span><span class="s0">})(),</span><span class="s1">s</span><span class="s0">})()));</span>
<a name="l8"><span class="ln">8    </span></a><span class="s4">//# sourceMappingURL=addon-canvas.js.map</span>
<a name="l9"><span class="ln">9    </span></a>
<a name="l10"><span class="ln">10   </span></a><span class="s4">/***/ </span><span class="s0">}),</span>
<a name="l11"><span class="ln">11   </span></a>
<a name="l12"><span class="ln">12   </span></a><span class="s4">/***/ </span><span class="s3">27061</span><span class="s0">:</span>
<a name="l13"><span class="ln">13   </span></a><span class="s4">/***/ </span><span class="s0">((</span><span class="s1">module</span><span class="s0">) =&gt; {</span>
<a name="l14"><span class="ln">14   </span></a>
<a name="l15"><span class="ln">15   </span></a><span class="s4">// shim for using process in browser</span>
<a name="l16"><span class="ln">16   </span></a><span class="s5">var </span><span class="s1">process </span><span class="s0">= </span><span class="s1">module</span><span class="s0">.</span><span class="s1">exports </span><span class="s0">= {};</span>
<a name="l17"><span class="ln">17   </span></a>
<a name="l18"><span class="ln">18   </span></a><span class="s4">// cached from whatever global is present so that test runners that stub it</span>
<a name="l19"><span class="ln">19   </span></a><span class="s4">// don't break things.  But we need to wrap it in a try catch in case it is</span>
<a name="l20"><span class="ln">20   </span></a><span class="s4">// wrapped in strict mode code which doesn't define any globals.  It's inside a</span>
<a name="l21"><span class="ln">21   </span></a><span class="s4">// function because try/catches deoptimize in certain engines.</span>
<a name="l22"><span class="ln">22   </span></a>
<a name="l23"><span class="ln">23   </span></a><span class="s5">var </span><span class="s1">cachedSetTimeout</span><span class="s0">;</span>
<a name="l24"><span class="ln">24   </span></a><span class="s5">var </span><span class="s1">cachedClearTimeout</span><span class="s0">;</span>
<a name="l25"><span class="ln">25   </span></a>
<a name="l26"><span class="ln">26   </span></a><span class="s5">function </span><span class="s1">defaultSetTimout</span><span class="s0">() {</span>
<a name="l27"><span class="ln">27   </span></a>    <span class="s5">throw new </span><span class="s1">Error</span><span class="s0">(</span><span class="s2">'setTimeout has not been defined'</span><span class="s0">);</span>
<a name="l28"><span class="ln">28   </span></a><span class="s0">}</span>
<a name="l29"><span class="ln">29   </span></a><span class="s5">function </span><span class="s1">defaultClearTimeout </span><span class="s0">() {</span>
<a name="l30"><span class="ln">30   </span></a>    <span class="s5">throw new </span><span class="s1">Error</span><span class="s0">(</span><span class="s2">'clearTimeout has not been defined'</span><span class="s0">);</span>
<a name="l31"><span class="ln">31   </span></a><span class="s0">}</span>
<a name="l32"><span class="ln">32   </span></a><span class="s0">(</span><span class="s5">function </span><span class="s0">() {</span>
<a name="l33"><span class="ln">33   </span></a>    <span class="s5">try </span><span class="s0">{</span>
<a name="l34"><span class="ln">34   </span></a>        <span class="s5">if </span><span class="s0">(</span><span class="s5">typeof </span><span class="s1">setTimeout </span><span class="s0">=== </span><span class="s2">'function'</span><span class="s0">) {</span>
<a name="l35"><span class="ln">35   </span></a>            <span class="s1">cachedSetTimeout </span><span class="s0">= </span><span class="s1">setTimeout</span><span class="s0">;</span>
<a name="l36"><span class="ln">36   </span></a>        <span class="s0">} </span><span class="s5">else </span><span class="s0">{</span>
<a name="l37"><span class="ln">37   </span></a>            <span class="s1">cachedSetTimeout </span><span class="s0">= </span><span class="s1">defaultSetTimout</span><span class="s0">;</span>
<a name="l38"><span class="ln">38   </span></a>        <span class="s0">}</span>
<a name="l39"><span class="ln">39   </span></a>    <span class="s0">} </span><span class="s5">catch </span><span class="s0">(</span><span class="s1">e</span><span class="s0">) {</span>
<a name="l40"><span class="ln">40   </span></a>        <span class="s1">cachedSetTimeout </span><span class="s0">= </span><span class="s1">defaultSetTimout</span><span class="s0">;</span>
<a name="l41"><span class="ln">41   </span></a>    <span class="s0">}</span>
<a name="l42"><span class="ln">42   </span></a>    <span class="s5">try </span><span class="s0">{</span>
<a name="l43"><span class="ln">43   </span></a>        <span class="s5">if </span><span class="s0">(</span><span class="s5">typeof </span><span class="s1">clearTimeout </span><span class="s0">=== </span><span class="s2">'function'</span><span class="s0">) {</span>
<a name="l44"><span class="ln">44   </span></a>            <span class="s1">cachedClearTimeout </span><span class="s0">= </span><span class="s1">clearTimeout</span><span class="s0">;</span>
<a name="l45"><span class="ln">45   </span></a>        <span class="s0">} </span><span class="s5">else </span><span class="s0">{</span>
<a name="l46"><span class="ln">46   </span></a>            <span class="s1">cachedClearTimeout </span><span class="s0">= </span><span class="s1">defaultClearTimeout</span><span class="s0">;</span>
<a name="l47"><span class="ln">47   </span></a>        <span class="s0">}</span>
<a name="l48"><span class="ln">48   </span></a>    <span class="s0">} </span><span class="s5">catch </span><span class="s0">(</span><span class="s1">e</span><span class="s0">) {</span>
<a name="l49"><span class="ln">49   </span></a>        <span class="s1">cachedClearTimeout </span><span class="s0">= </span><span class="s1">defaultClearTimeout</span><span class="s0">;</span>
<a name="l50"><span class="ln">50   </span></a>    <span class="s0">}</span>
<a name="l51"><span class="ln">51   </span></a><span class="s0">} ())</span>
<a name="l52"><span class="ln">52   </span></a><span class="s5">function </span><span class="s1">runTimeout</span><span class="s0">(</span><span class="s1">fun</span><span class="s0">) {</span>
<a name="l53"><span class="ln">53   </span></a>    <span class="s5">if </span><span class="s0">(</span><span class="s1">cachedSetTimeout </span><span class="s0">=== </span><span class="s1">setTimeout</span><span class="s0">) {</span>
<a name="l54"><span class="ln">54   </span></a>        <span class="s4">//normal enviroments in sane situations</span>
<a name="l55"><span class="ln">55   </span></a>        <span class="s5">return </span><span class="s1">setTimeout</span><span class="s0">(</span><span class="s1">fun</span><span class="s0">, </span><span class="s3">0</span><span class="s0">);</span>
<a name="l56"><span class="ln">56   </span></a>    <span class="s0">}</span>
<a name="l57"><span class="ln">57   </span></a>    <span class="s4">// if setTimeout wasn't available but was latter defined</span>
<a name="l58"><span class="ln">58   </span></a>    <span class="s5">if </span><span class="s0">((</span><span class="s1">cachedSetTimeout </span><span class="s0">=== </span><span class="s1">defaultSetTimout </span><span class="s0">|| !</span><span class="s1">cachedSetTimeout</span><span class="s0">) &amp;&amp; </span><span class="s1">setTimeout</span><span class="s0">) {</span>
<a name="l59"><span class="ln">59   </span></a>        <span class="s1">cachedSetTimeout </span><span class="s0">= </span><span class="s1">setTimeout</span><span class="s0">;</span>
<a name="l60"><span class="ln">60   </span></a>        <span class="s5">return </span><span class="s1">setTimeout</span><span class="s0">(</span><span class="s1">fun</span><span class="s0">, </span><span class="s3">0</span><span class="s0">);</span>
<a name="l61"><span class="ln">61   </span></a>    <span class="s0">}</span>
<a name="l62"><span class="ln">62   </span></a>    <span class="s5">try </span><span class="s0">{</span>
<a name="l63"><span class="ln">63   </span></a>        <span class="s4">// when when somebody has screwed with setTimeout but no I.E. maddness</span>
<a name="l64"><span class="ln">64   </span></a>        <span class="s5">return </span><span class="s1">cachedSetTimeout</span><span class="s0">(</span><span class="s1">fun</span><span class="s0">, </span><span class="s3">0</span><span class="s0">);</span>
<a name="l65"><span class="ln">65   </span></a>    <span class="s0">} </span><span class="s5">catch</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span>
<a name="l66"><span class="ln">66   </span></a>        <span class="s5">try </span><span class="s0">{</span>
<a name="l67"><span class="ln">67   </span></a>            <span class="s4">// When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally</span>
<a name="l68"><span class="ln">68   </span></a>            <span class="s5">return </span><span class="s1">cachedSetTimeout</span><span class="s0">.</span><span class="s1">call</span><span class="s0">(</span><span class="s5">null</span><span class="s0">, </span><span class="s1">fun</span><span class="s0">, </span><span class="s3">0</span><span class="s0">);</span>
<a name="l69"><span class="ln">69   </span></a>        <span class="s0">} </span><span class="s5">catch</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span>
<a name="l70"><span class="ln">70   </span></a>            <span class="s4">// same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error</span>
<a name="l71"><span class="ln">71   </span></a>            <span class="s5">return </span><span class="s1">cachedSetTimeout</span><span class="s0">.</span><span class="s1">call</span><span class="s0">(</span><span class="s5">this</span><span class="s0">, </span><span class="s1">fun</span><span class="s0">, </span><span class="s3">0</span><span class="s0">);</span>
<a name="l72"><span class="ln">72   </span></a>        <span class="s0">}</span>
<a name="l73"><span class="ln">73   </span></a>    <span class="s0">}</span>
<a name="l74"><span class="ln">74   </span></a>
<a name="l75"><span class="ln">75   </span></a>
<a name="l76"><span class="ln">76   </span></a><span class="s0">}</span>
<a name="l77"><span class="ln">77   </span></a><span class="s5">function </span><span class="s1">runClearTimeout</span><span class="s0">(</span><span class="s1">marker</span><span class="s0">) {</span>
<a name="l78"><span class="ln">78   </span></a>    <span class="s5">if </span><span class="s0">(</span><span class="s1">cachedClearTimeout </span><span class="s0">=== </span><span class="s1">clearTimeout</span><span class="s0">) {</span>
<a name="l79"><span class="ln">79   </span></a>        <span class="s4">//normal enviroments in sane situations</span>
<a name="l80"><span class="ln">80   </span></a>        <span class="s5">return </span><span class="s1">clearTimeout</span><span class="s0">(</span><span class="s1">marker</span><span class="s0">);</span>
<a name="l81"><span class="ln">81   </span></a>    <span class="s0">}</span>
<a name="l82"><span class="ln">82   </span></a>    <span class="s4">// if clearTimeout wasn't available but was latter defined</span>
<a name="l83"><span class="ln">83   </span></a>    <span class="s5">if </span><span class="s0">((</span><span class="s1">cachedClearTimeout </span><span class="s0">=== </span><span class="s1">defaultClearTimeout </span><span class="s0">|| !</span><span class="s1">cachedClearTimeout</span><span class="s0">) &amp;&amp; </span><span class="s1">clearTimeout</span><span class="s0">) {</span>
<a name="l84"><span class="ln">84   </span></a>        <span class="s1">cachedClearTimeout </span><span class="s0">= </span><span class="s1">clearTimeout</span><span class="s0">;</span>
<a name="l85"><span class="ln">85   </span></a>        <span class="s5">return </span><span class="s1">clearTimeout</span><span class="s0">(</span><span class="s1">marker</span><span class="s0">);</span>
<a name="l86"><span class="ln">86   </span></a>    <span class="s0">}</span>
<a name="l87"><span class="ln">87   </span></a>    <span class="s5">try </span><span class="s0">{</span>
<a name="l88"><span class="ln">88   </span></a>        <span class="s4">// when when somebody has screwed with setTimeout but no I.E. maddness</span>
<a name="l89"><span class="ln">89   </span></a>        <span class="s5">return </span><span class="s1">cachedClearTimeout</span><span class="s0">(</span><span class="s1">marker</span><span class="s0">);</span>
<a name="l90"><span class="ln">90   </span></a>    <span class="s0">} </span><span class="s5">catch </span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span>
<a name="l91"><span class="ln">91   </span></a>        <span class="s5">try </span><span class="s0">{</span>
<a name="l92"><span class="ln">92   </span></a>            <span class="s4">// When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally</span>
<a name="l93"><span class="ln">93   </span></a>            <span class="s5">return </span><span class="s1">cachedClearTimeout</span><span class="s0">.</span><span class="s1">call</span><span class="s0">(</span><span class="s5">null</span><span class="s0">, </span><span class="s1">marker</span><span class="s0">);</span>
<a name="l94"><span class="ln">94   </span></a>        <span class="s0">} </span><span class="s5">catch </span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span>
<a name="l95"><span class="ln">95   </span></a>            <span class="s4">// same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.</span>
<a name="l96"><span class="ln">96   </span></a>            <span class="s4">// Some versions of I.E. have different rules for clearTimeout vs setTimeout</span>
<a name="l97"><span class="ln">97   </span></a>            <span class="s5">return </span><span class="s1">cachedClearTimeout</span><span class="s0">.</span><span class="s1">call</span><span class="s0">(</span><span class="s5">this</span><span class="s0">, </span><span class="s1">marker</span><span class="s0">);</span>
<a name="l98"><span class="ln">98   </span></a>        <span class="s0">}</span>
<a name="l99"><span class="ln">99   </span></a>    <span class="s0">}</span>
<a name="l100"><span class="ln">100  </span></a>
<a name="l101"><span class="ln">101  </span></a>
<a name="l102"><span class="ln">102  </span></a>
<a name="l103"><span class="ln">103  </span></a><span class="s0">}</span>
<a name="l104"><span class="ln">104  </span></a><span class="s5">var </span><span class="s1">queue </span><span class="s0">= [];</span>
<a name="l105"><span class="ln">105  </span></a><span class="s5">var </span><span class="s1">draining </span><span class="s0">= </span><span class="s5">false</span><span class="s0">;</span>
<a name="l106"><span class="ln">106  </span></a><span class="s5">var </span><span class="s1">currentQueue</span><span class="s0">;</span>
<a name="l107"><span class="ln">107  </span></a><span class="s5">var </span><span class="s1">queueIndex </span><span class="s0">= -</span><span class="s3">1</span><span class="s0">;</span>
<a name="l108"><span class="ln">108  </span></a>
<a name="l109"><span class="ln">109  </span></a><span class="s5">function </span><span class="s1">cleanUpNextTick</span><span class="s0">() {</span>
<a name="l110"><span class="ln">110  </span></a>    <span class="s5">if </span><span class="s0">(!</span><span class="s1">draining </span><span class="s0">|| !</span><span class="s1">currentQueue</span><span class="s0">) {</span>
<a name="l111"><span class="ln">111  </span></a>        <span class="s5">return</span><span class="s0">;</span>
<a name="l112"><span class="ln">112  </span></a>    <span class="s0">}</span>
<a name="l113"><span class="ln">113  </span></a>    <span class="s1">draining </span><span class="s0">= </span><span class="s5">false</span><span class="s0">;</span>
<a name="l114"><span class="ln">114  </span></a>    <span class="s5">if </span><span class="s0">(</span><span class="s1">currentQueue</span><span class="s0">.</span><span class="s1">length</span><span class="s0">) {</span>
<a name="l115"><span class="ln">115  </span></a>        <span class="s1">queue </span><span class="s0">= </span><span class="s1">currentQueue</span><span class="s0">.</span><span class="s1">concat</span><span class="s0">(</span><span class="s1">queue</span><span class="s0">);</span>
<a name="l116"><span class="ln">116  </span></a>    <span class="s0">} </span><span class="s5">else </span><span class="s0">{</span>
<a name="l117"><span class="ln">117  </span></a>        <span class="s1">queueIndex </span><span class="s0">= -</span><span class="s3">1</span><span class="s0">;</span>
<a name="l118"><span class="ln">118  </span></a>    <span class="s0">}</span>
<a name="l119"><span class="ln">119  </span></a>    <span class="s5">if </span><span class="s0">(</span><span class="s1">queue</span><span class="s0">.</span><span class="s1">length</span><span class="s0">) {</span>
<a name="l120"><span class="ln">120  </span></a>        <span class="s1">drainQueue</span><span class="s0">();</span>
<a name="l121"><span class="ln">121  </span></a>    <span class="s0">}</span>
<a name="l122"><span class="ln">122  </span></a><span class="s0">}</span>
<a name="l123"><span class="ln">123  </span></a>
<a name="l124"><span class="ln">124  </span></a><span class="s5">function </span><span class="s1">drainQueue</span><span class="s0">() {</span>
<a name="l125"><span class="ln">125  </span></a>    <span class="s5">if </span><span class="s0">(</span><span class="s1">draining</span><span class="s0">) {</span>
<a name="l126"><span class="ln">126  </span></a>        <span class="s5">return</span><span class="s0">;</span>
<a name="l127"><span class="ln">127  </span></a>    <span class="s0">}</span>
<a name="l128"><span class="ln">128  </span></a>    <span class="s5">var </span><span class="s1">timeout </span><span class="s0">= </span><span class="s1">runTimeout</span><span class="s0">(</span><span class="s1">cleanUpNextTick</span><span class="s0">);</span>
<a name="l129"><span class="ln">129  </span></a>    <span class="s1">draining </span><span class="s0">= </span><span class="s5">true</span><span class="s0">;</span>
<a name="l130"><span class="ln">130  </span></a>
<a name="l131"><span class="ln">131  </span></a>    <span class="s5">var </span><span class="s1">len </span><span class="s0">= </span><span class="s1">queue</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span>
<a name="l132"><span class="ln">132  </span></a>    <span class="s5">while</span><span class="s0">(</span><span class="s1">len</span><span class="s0">) {</span>
<a name="l133"><span class="ln">133  </span></a>        <span class="s1">currentQueue </span><span class="s0">= </span><span class="s1">queue</span><span class="s0">;</span>
<a name="l134"><span class="ln">134  </span></a>        <span class="s1">queue </span><span class="s0">= [];</span>
<a name="l135"><span class="ln">135  </span></a>        <span class="s5">while </span><span class="s0">(++</span><span class="s1">queueIndex </span><span class="s0">&lt; </span><span class="s1">len</span><span class="s0">) {</span>
<a name="l136"><span class="ln">136  </span></a>            <span class="s5">if </span><span class="s0">(</span><span class="s1">currentQueue</span><span class="s0">) {</span>
<a name="l137"><span class="ln">137  </span></a>                <span class="s1">currentQueue</span><span class="s0">[</span><span class="s1">queueIndex</span><span class="s0">].</span><span class="s1">run</span><span class="s0">();</span>
<a name="l138"><span class="ln">138  </span></a>            <span class="s0">}</span>
<a name="l139"><span class="ln">139  </span></a>        <span class="s0">}</span>
<a name="l140"><span class="ln">140  </span></a>        <span class="s1">queueIndex </span><span class="s0">= -</span><span class="s3">1</span><span class="s0">;</span>
<a name="l141"><span class="ln">141  </span></a>        <span class="s1">len </span><span class="s0">= </span><span class="s1">queue</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span>
<a name="l142"><span class="ln">142  </span></a>    <span class="s0">}</span>
<a name="l143"><span class="ln">143  </span></a>    <span class="s1">currentQueue </span><span class="s0">= </span><span class="s5">null</span><span class="s0">;</span>
<a name="l144"><span class="ln">144  </span></a>    <span class="s1">draining </span><span class="s0">= </span><span class="s5">false</span><span class="s0">;</span>
<a name="l145"><span class="ln">145  </span></a>    <span class="s1">runClearTimeout</span><span class="s0">(</span><span class="s1">timeout</span><span class="s0">);</span>
<a name="l146"><span class="ln">146  </span></a><span class="s0">}</span>
<a name="l147"><span class="ln">147  </span></a>
<a name="l148"><span class="ln">148  </span></a><span class="s1">process</span><span class="s0">.</span><span class="s1">nextTick </span><span class="s0">= </span><span class="s5">function </span><span class="s0">(</span><span class="s1">fun</span><span class="s0">) {</span>
<a name="l149"><span class="ln">149  </span></a>    <span class="s5">var </span><span class="s1">args </span><span class="s0">= </span><span class="s5">new </span><span class="s1">Array</span><span class="s0">(</span><span class="s1">arguments</span><span class="s0">.</span><span class="s1">length </span><span class="s0">- </span><span class="s3">1</span><span class="s0">);</span>
<a name="l150"><span class="ln">150  </span></a>    <span class="s5">if </span><span class="s0">(</span><span class="s1">arguments</span><span class="s0">.</span><span class="s1">length </span><span class="s0">&gt; </span><span class="s3">1</span><span class="s0">) {</span>
<a name="l151"><span class="ln">151  </span></a>        <span class="s5">for </span><span class="s0">(</span><span class="s5">var </span><span class="s1">i </span><span class="s0">= </span><span class="s3">1</span><span class="s0">; </span><span class="s1">i </span><span class="s0">&lt; </span><span class="s1">arguments</span><span class="s0">.</span><span class="s1">length</span><span class="s0">; </span><span class="s1">i</span><span class="s0">++) {</span>
<a name="l152"><span class="ln">152  </span></a>            <span class="s1">args</span><span class="s0">[</span><span class="s1">i </span><span class="s0">- </span><span class="s3">1</span><span class="s0">] = </span><span class="s1">arguments</span><span class="s0">[</span><span class="s1">i</span><span class="s0">];</span>
<a name="l153"><span class="ln">153  </span></a>        <span class="s0">}</span>
<a name="l154"><span class="ln">154  </span></a>    <span class="s0">}</span>
<a name="l155"><span class="ln">155  </span></a>    <span class="s1">queue</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s5">new </span><span class="s1">Item</span><span class="s0">(</span><span class="s1">fun</span><span class="s0">, </span><span class="s1">args</span><span class="s0">));</span>
<a name="l156"><span class="ln">156  </span></a>    <span class="s5">if </span><span class="s0">(</span><span class="s1">queue</span><span class="s0">.</span><span class="s1">length </span><span class="s0">=== </span><span class="s3">1 </span><span class="s0">&amp;&amp; !</span><span class="s1">draining</span><span class="s0">) {</span>
<a name="l157"><span class="ln">157  </span></a>        <span class="s1">runTimeout</span><span class="s0">(</span><span class="s1">drainQueue</span><span class="s0">);</span>
<a name="l158"><span class="ln">158  </span></a>    <span class="s0">}</span>
<a name="l159"><span class="ln">159  </span></a><span class="s0">};</span>
<a name="l160"><span class="ln">160  </span></a>
<a name="l161"><span class="ln">161  </span></a><span class="s4">// v8 likes predictible objects</span>
<a name="l162"><span class="ln">162  </span></a><span class="s5">function </span><span class="s1">Item</span><span class="s0">(</span><span class="s1">fun</span><span class="s0">, </span><span class="s1">array</span><span class="s0">) {</span>
<a name="l163"><span class="ln">163  </span></a>    <span class="s5">this</span><span class="s0">.</span><span class="s1">fun </span><span class="s0">= </span><span class="s1">fun</span><span class="s0">;</span>
<a name="l164"><span class="ln">164  </span></a>    <span class="s5">this</span><span class="s0">.</span><span class="s1">array </span><span class="s0">= </span><span class="s1">array</span><span class="s0">;</span>
<a name="l165"><span class="ln">165  </span></a><span class="s0">}</span>
<a name="l166"><span class="ln">166  </span></a><span class="s1">Item</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">run </span><span class="s0">= </span><span class="s5">function </span><span class="s0">() {</span>
<a name="l167"><span class="ln">167  </span></a>    <span class="s5">this</span><span class="s0">.</span><span class="s1">fun</span><span class="s0">.</span><span class="s1">apply</span><span class="s0">(</span><span class="s5">null</span><span class="s0">, </span><span class="s5">this</span><span class="s0">.</span><span class="s1">array</span><span class="s0">);</span>
<a name="l168"><span class="ln">168  </span></a><span class="s0">};</span>
<a name="l169"><span class="ln">169  </span></a><span class="s1">process</span><span class="s0">.</span><span class="s1">title </span><span class="s0">= </span><span class="s2">'browser'</span><span class="s0">;</span>
<a name="l170"><span class="ln">170  </span></a><span class="s1">process</span><span class="s0">.</span><span class="s1">browser </span><span class="s0">= </span><span class="s5">true</span><span class="s0">;</span>
<a name="l171"><span class="ln">171  </span></a><span class="s1">process</span><span class="s0">.</span><span class="s1">env </span><span class="s0">= {};</span>
<a name="l172"><span class="ln">172  </span></a><span class="s1">process</span><span class="s0">.</span><span class="s1">argv </span><span class="s0">= [];</span>
<a name="l173"><span class="ln">173  </span></a><span class="s1">process</span><span class="s0">.</span><span class="s1">version </span><span class="s0">= </span><span class="s2">''</span><span class="s0">; </span><span class="s4">// empty string to avoid regexp issues</span>
<a name="l174"><span class="ln">174  </span></a><span class="s1">process</span><span class="s0">.</span><span class="s1">versions </span><span class="s0">= {};</span>
<a name="l175"><span class="ln">175  </span></a>
<a name="l176"><span class="ln">176  </span></a><span class="s5">function </span><span class="s1">noop</span><span class="s0">() {}</span>
<a name="l177"><span class="ln">177  </span></a>
<a name="l178"><span class="ln">178  </span></a><span class="s1">process</span><span class="s0">.</span><span class="s1">on </span><span class="s0">= </span><span class="s1">noop</span><span class="s0">;</span>
<a name="l179"><span class="ln">179  </span></a><span class="s1">process</span><span class="s0">.</span><span class="s1">addListener </span><span class="s0">= </span><span class="s1">noop</span><span class="s0">;</span>
<a name="l180"><span class="ln">180  </span></a><span class="s1">process</span><span class="s0">.</span><span class="s1">once </span><span class="s0">= </span><span class="s1">noop</span><span class="s0">;</span>
<a name="l181"><span class="ln">181  </span></a><span class="s1">process</span><span class="s0">.</span><span class="s1">off </span><span class="s0">= </span><span class="s1">noop</span><span class="s0">;</span>
<a name="l182"><span class="ln">182  </span></a><span class="s1">process</span><span class="s0">.</span><span class="s1">removeListener </span><span class="s0">= </span><span class="s1">noop</span><span class="s0">;</span>
<a name="l183"><span class="ln">183  </span></a><span class="s1">process</span><span class="s0">.</span><span class="s1">removeAllListeners </span><span class="s0">= </span><span class="s1">noop</span><span class="s0">;</span>
<a name="l184"><span class="ln">184  </span></a><span class="s1">process</span><span class="s0">.</span><span class="s1">emit </span><span class="s0">= </span><span class="s1">noop</span><span class="s0">;</span>
<a name="l185"><span class="ln">185  </span></a><span class="s1">process</span><span class="s0">.</span><span class="s1">prependListener </span><span class="s0">= </span><span class="s1">noop</span><span class="s0">;</span>
<a name="l186"><span class="ln">186  </span></a><span class="s1">process</span><span class="s0">.</span><span class="s1">prependOnceListener </span><span class="s0">= </span><span class="s1">noop</span><span class="s0">;</span>
<a name="l187"><span class="ln">187  </span></a>
<a name="l188"><span class="ln">188  </span></a><span class="s1">process</span><span class="s0">.</span><span class="s1">listeners </span><span class="s0">= </span><span class="s5">function </span><span class="s0">(</span><span class="s1">name</span><span class="s0">) { </span><span class="s5">return </span><span class="s0">[] }</span>
<a name="l189"><span class="ln">189  </span></a>
<a name="l190"><span class="ln">190  </span></a><span class="s1">process</span><span class="s0">.</span><span class="s1">binding </span><span class="s0">= </span><span class="s5">function </span><span class="s0">(</span><span class="s1">name</span><span class="s0">) {</span>
<a name="l191"><span class="ln">191  </span></a>    <span class="s5">throw new </span><span class="s1">Error</span><span class="s0">(</span><span class="s2">'process.binding is not supported'</span><span class="s0">);</span>
<a name="l192"><span class="ln">192  </span></a><span class="s0">};</span>
<a name="l193"><span class="ln">193  </span></a>
<a name="l194"><span class="ln">194  </span></a><span class="s1">process</span><span class="s0">.</span><span class="s1">cwd </span><span class="s0">= </span><span class="s5">function </span><span class="s0">() { </span><span class="s5">return </span><span class="s2">'/' </span><span class="s0">};</span>
<a name="l195"><span class="ln">195  </span></a><span class="s1">process</span><span class="s0">.</span><span class="s1">chdir </span><span class="s0">= </span><span class="s5">function </span><span class="s0">(</span><span class="s1">dir</span><span class="s0">) {</span>
<a name="l196"><span class="ln">196  </span></a>    <span class="s5">throw new </span><span class="s1">Error</span><span class="s0">(</span><span class="s2">'process.chdir is not supported'</span><span class="s0">);</span>
<a name="l197"><span class="ln">197  </span></a><span class="s0">};</span>
<a name="l198"><span class="ln">198  </span></a><span class="s1">process</span><span class="s0">.</span><span class="s1">umask </span><span class="s0">= </span><span class="s5">function</span><span class="s0">() { </span><span class="s5">return </span><span class="s3">0</span><span class="s0">; };</span>
<a name="l199"><span class="ln">199  </span></a>
<a name="l200"><span class="ln">200  </span></a>
<a name="l201"><span class="ln">201  </span></a><span class="s4">/***/ </span><span class="s0">})</span>
<a name="l202"><span class="ln">202  </span></a>
<a name="l203"><span class="ln">203  </span></a><span class="s0">}]);</span>
<a name="l204"><span class="ln">204  </span></a><span class="s4">//# sourceMappingURL=3462.0383dfd16602627036bd.js.map?v=0383dfd16602627036bd</span></pre>
</body>
</html>