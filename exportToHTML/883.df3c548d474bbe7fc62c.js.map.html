<html>
<head>
<title>883.df3c548d474bbe7fc62c.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #bcbec4;}
.s1 { color: #6aab73;}
.s2 { color: #2aacb8;}
.s3 { color: #cf8e6d;}
.ln { color: #4b5059; font-weight: normal; font-style: normal; }
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
883.df3c548d474bbe7fc62c.js.map</font>
</center></td></tr></table>
<pre><a name="l1"><span class="ln">1    </span></a><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;file&quot;</span><span class="s0">:</span><span class="s1">&quot;883.df3c548d474bbe7fc62c.js?v=df3c548d474bbe7fc62c&quot;</span><span class="s0">,</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;;;;;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,4BAA4B;AAC5B;AACA,SAAS;;AAET;AACA;AACA;;AAEA;AACA;AACA;;AAEA,8BAA8B;AAC9B;AACA,iBAAiB;;AAEjB,+BAA+B;AAC/B;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,IAAI,yCAAyC,EAAE,GAAG,aAAa;;AAE1E;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;AAC5C;;AAEA;;AAEA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;AACA,QAAQ;AACR;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA,0CAA0C;AAC1C;AACA,0CAA0C;AAC1C;AACA,MAAM,kCAAkC;AACxC;AACA,iCAAiC;AACjC,QAAQ;AACR,yCAAyC;AACzC;AACA;AACA,2CAA2C;AAC3C;AACA,YAAY;AACZ;AACA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,kBAAkB,KAAK,GAAG;AACnC,2BAA2B,QAAQ;AACnC,2BAA2B,QAAQ;AACnC,2BAA2B,SAAS;AACpC,2BAA2B,8CAA8C;AACzE,2BAA2B;AAC3B,4CAA4C,QAAQ;AACpD,2BAA2B;AAC3B,2DAA2D;AAC3D,SAAS,kBAAkB,6CAA6C;AACxE,2BAA2B,UAAU;AACrC,2BAA2B,WAAW;AACtC,2BAA2B,oBAAoB;AAC/C;AACA;AACA;;AAEA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,wBAAwB,SAAS;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA,gCAAgC;;AAEhC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA,8BAA8B,SAAS;AACvC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEO;AACP;AACA;AACA,YAAY;AACZ;AACA;AACA,GAAG;;AAEH;;AAEA;;AAEA;AACA,oBAAoB;AACpB;AACA&quot;</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/@codemirror/legacy-modes/mode/erlang.js&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;/////////////////////////////////////////////////////////////////////////////</span><span class="s3">\n</span><span class="s1">// constants</span><span class="s3">\n\n</span><span class="s1">var typeWords = [</span><span class="s3">\n  \&quot;</span><span class="s1">-type</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">-spec</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">-export_type</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">-opaque</span><span class="s3">\&quot;</span><span class="s1">];</span><span class="s3">\n\n</span><span class="s1">var keywordWords = [</span><span class="s3">\n  \&quot;</span><span class="s1">after</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">begin</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">catch</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">case</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">cond</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">end</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">fun</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">if</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n  \&quot;</span><span class="s1">let</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">of</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">query</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">receive</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">try</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">when</span><span class="s3">\&quot;</span><span class="s1">];</span><span class="s3">\n\n</span><span class="s1">var separatorRE    = /[</span><span class="s3">\\</span><span class="s1">-&gt;,;]/;</span><span class="s3">\n</span><span class="s1">var separatorWords = [</span><span class="s3">\n  \&quot;</span><span class="s1">-&gt;</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">];</span><span class="s3">\n\n</span><span class="s1">var operatorAtomWords = [</span><span class="s3">\n  \&quot;</span><span class="s1">and</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">andalso</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">band</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">bnot</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">bor</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">bsl</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">bsr</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">bxor</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n  \&quot;</span><span class="s1">div</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">not</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">or</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">orelse</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">rem</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">xor</span><span class="s3">\&quot;</span><span class="s1">];</span><span class="s3">\n\n</span><span class="s1">var operatorSymbolRE    = /[</span><span class="s3">\\</span><span class="s1">+</span><span class="s3">\\</span><span class="s1">-</span><span class="s3">\\</span><span class="s1">*</span><span class="s3">\\</span><span class="s1">/&lt;&gt;=</span><span class="s3">\\</span><span class="s1">|:!]/;</span><span class="s3">\n</span><span class="s1">var operatorSymbolWords = [</span><span class="s3">\n  \&quot;</span><span class="s1">=</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">+</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">-</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">*</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">/</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">&gt;</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">&gt;=</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">&lt;</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">=&lt;</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">=:=</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">==</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">=/=</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">/=</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">||</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">&lt;-</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">!</span><span class="s3">\&quot;</span><span class="s1">];</span><span class="s3">\n\n</span><span class="s1">var openParenRE    = /[&lt;</span><span class="s3">\\</span><span class="s1">(</span><span class="s3">\\</span><span class="s1">[</span><span class="s3">\\</span><span class="s1">{]/;</span><span class="s3">\n</span><span class="s1">var openParenWords = [</span><span class="s3">\n  \&quot;</span><span class="s1">&lt;&lt;</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">(</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">[</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">{</span><span class="s3">\&quot;</span><span class="s1">];</span><span class="s3">\n\n</span><span class="s1">var closeParenRE    = /[&gt;</span><span class="s3">\\</span><span class="s1">)</span><span class="s3">\\</span><span class="s1">]</span><span class="s3">\\</span><span class="s1">}]/;</span><span class="s3">\n</span><span class="s1">var closeParenWords = [</span><span class="s3">\n  \&quot;</span><span class="s1">}</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">]</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">&gt;&gt;</span><span class="s3">\&quot;</span><span class="s1">];</span><span class="s3">\n\n</span><span class="s1">var guardWords = [</span><span class="s3">\n  \&quot;</span><span class="s1">is_atom</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">is_binary</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">is_bitstring</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">is_boolean</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">is_float</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n  \&quot;</span><span class="s1">is_function</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">is_integer</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">is_list</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">is_number</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">is_pid</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n  \&quot;</span><span class="s1">is_port</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">is_record</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">is_reference</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">is_tuple</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n  \&quot;</span><span class="s1">atom</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">binary</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">bitstring</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">boolean</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">function</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">integer</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">list</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n  \&quot;</span><span class="s1">number</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">pid</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">port</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">record</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">reference</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">tuple</span><span class="s3">\&quot;</span><span class="s1">];</span><span class="s3">\n\n</span><span class="s1">var bifWords = [</span><span class="s3">\n  \&quot;</span><span class="s1">abs</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">adler32</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">adler32_combine</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">alive</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">apply</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">atom_to_binary</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n  \&quot;</span><span class="s1">atom_to_list</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">binary_to_atom</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">binary_to_existing_atom</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n  \&quot;</span><span class="s1">binary_to_list</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">binary_to_term</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">bit_size</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">bitstring_to_list</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n  \&quot;</span><span class="s1">byte_size</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">check_process_code</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">contact_binary</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">crc32</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n  \&quot;</span><span class="s1">crc32_combine</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">date</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">decode_packet</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">delete_module</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n  \&quot;</span><span class="s1">disconnect_node</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">element</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">erase</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">exit</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">float</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">float_to_list</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n  \&quot;</span><span class="s1">garbage_collect</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">get</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">get_keys</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">group_leader</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">halt</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">hd</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n  \&quot;</span><span class="s1">integer_to_list</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">internal_bif</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">iolist_size</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">iolist_to_binary</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n  \&quot;</span><span class="s1">is_alive</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">is_atom</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">is_binary</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">is_bitstring</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">is_boolean</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n  \&quot;</span><span class="s1">is_float</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">is_function</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">is_integer</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">is_list</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">is_number</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">is_pid</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n  \&quot;</span><span class="s1">is_port</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">is_process_alive</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">is_record</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">is_reference</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">is_tuple</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n  \&quot;</span><span class="s1">length</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">link</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">list_to_atom</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">list_to_binary</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">list_to_bitstring</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n  \&quot;</span><span class="s1">list_to_existing_atom</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">list_to_float</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">list_to_integer</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n  \&quot;</span><span class="s1">list_to_pid</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">list_to_tuple</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">load_module</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">make_ref</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">module_loaded</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n  \&quot;</span><span class="s1">monitor_node</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">node</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">node_link</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">node_unlink</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">nodes</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">notalive</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n  \&quot;</span><span class="s1">now</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">open_port</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">pid_to_list</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">port_close</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">port_command</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n  \&quot;</span><span class="s1">port_connect</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">port_control</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">pre_loaded</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">process_flag</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n  \&quot;</span><span class="s1">process_info</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">processes</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">purge_module</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">put</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">register</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n  \&quot;</span><span class="s1">registered</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">round</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">self</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">setelement</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">size</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">spawn</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">spawn_link</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n  \&quot;</span><span class="s1">spawn_monitor</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">spawn_opt</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">split_binary</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">statistics</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n  \&quot;</span><span class="s1">term_to_binary</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">time</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">throw</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">tl</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">trunc</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">tuple_size</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n  \&quot;</span><span class="s1">tuple_to_list</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">unlink</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">unregister</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">whereis</span><span class="s3">\&quot;</span><span class="s1">];</span><span class="s3">\n\n</span><span class="s1">// upper case: [A-Z] [Ø-Þ] [À-Ö]</span><span class="s3">\n</span><span class="s1">// lower case: [a-z] [ß-ö] [ø-ÿ]</span><span class="s3">\n</span><span class="s1">var anumRE       = /[</span><span class="s3">\\</span><span class="s1">w@Ø-ÞÀ-Öß-öø-ÿ]/;</span><span class="s3">\n</span><span class="s1">var escapesRE    =</span><span class="s3">\n    </span><span class="s1">/[0-7]{1,3}|[bdefnrstv</span><span class="s3">\\\\\&quot;</span><span class="s1">']|</span><span class="s3">\\</span><span class="s1">^[a-zA-Z]|x[0-9a-zA-Z]{2}|x{[0-9a-zA-Z]+}/;</span><span class="s3">\n\n</span><span class="s1">/////////////////////////////////////////////////////////////////////////////</span><span class="s3">\n</span><span class="s1">// tokenizer</span><span class="s3">\n\n</span><span class="s1">function tokenizer(stream,state) {</span><span class="s3">\n  </span><span class="s1">// in multi-line string</span><span class="s3">\n  </span><span class="s1">if (state.in_string) {</span><span class="s3">\n    </span><span class="s1">state.in_string = (!doubleQuote(stream));</span><span class="s3">\n    </span><span class="s1">return rval(state,stream,</span><span class="s3">\&quot;</span><span class="s1">string</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// in multi-line atom</span><span class="s3">\n  </span><span class="s1">if (state.in_atom) {</span><span class="s3">\n    </span><span class="s1">state.in_atom = (!singleQuote(stream));</span><span class="s3">\n    </span><span class="s1">return rval(state,stream,</span><span class="s3">\&quot;</span><span class="s1">atom</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// whitespace</span><span class="s3">\n  </span><span class="s1">if (stream.eatSpace()) {</span><span class="s3">\n    </span><span class="s1">return rval(state,stream,</span><span class="s3">\&quot;</span><span class="s1">whitespace</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// attributes and type specs</span><span class="s3">\n  </span><span class="s1">if (!peekToken(state) &amp;&amp;</span><span class="s3">\n      </span><span class="s1">stream.match(/-</span><span class="s3">\\</span><span class="s1">s*[a-zß-öø-ÿ][</span><span class="s3">\\</span><span class="s1">wØ-ÞÀ-Öß-öø-ÿ]*/)) {</span><span class="s3">\n    </span><span class="s1">if (is_member(stream.current(),typeWords)) {</span><span class="s3">\n      </span><span class="s1">return rval(state,stream,</span><span class="s3">\&quot;</span><span class="s1">type</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">}else{</span><span class="s3">\n      </span><span class="s1">return rval(state,stream,</span><span class="s3">\&quot;</span><span class="s1">attribute</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">var ch = stream.next();</span><span class="s3">\n\n  </span><span class="s1">// comment</span><span class="s3">\n  </span><span class="s1">if (ch == '%') {</span><span class="s3">\n    </span><span class="s1">stream.skipToEnd();</span><span class="s3">\n    </span><span class="s1">return rval(state,stream,</span><span class="s3">\&quot;</span><span class="s1">comment</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// colon</span><span class="s3">\n  </span><span class="s1">if (ch == </span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">return rval(state,stream,</span><span class="s3">\&quot;</span><span class="s1">colon</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// macro</span><span class="s3">\n  </span><span class="s1">if (ch == '?') {</span><span class="s3">\n    </span><span class="s1">stream.eatSpace();</span><span class="s3">\n    </span><span class="s1">stream.eatWhile(anumRE);</span><span class="s3">\n    </span><span class="s1">return rval(state,stream,</span><span class="s3">\&quot;</span><span class="s1">macro</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// record</span><span class="s3">\n  </span><span class="s1">if (ch == </span><span class="s3">\&quot;</span><span class="s1">#</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">stream.eatSpace();</span><span class="s3">\n    </span><span class="s1">stream.eatWhile(anumRE);</span><span class="s3">\n    </span><span class="s1">return rval(state,stream,</span><span class="s3">\&quot;</span><span class="s1">record</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// dollar escape</span><span class="s3">\n  </span><span class="s1">if (ch == </span><span class="s3">\&quot;</span><span class="s1">$</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">if (stream.next() == </span><span class="s3">\&quot;\\\\\&quot; </span><span class="s1">&amp;&amp; !stream.match(escapesRE)) {</span><span class="s3">\n      </span><span class="s1">return rval(state,stream,</span><span class="s3">\&quot;</span><span class="s1">error</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">return rval(state,stream,</span><span class="s3">\&quot;</span><span class="s1">number</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// dot</span><span class="s3">\n  </span><span class="s1">if (ch == </span><span class="s3">\&quot;</span><span class="s1">.</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">return rval(state,stream,</span><span class="s3">\&quot;</span><span class="s1">dot</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// quoted atom</span><span class="s3">\n  </span><span class="s1">if (ch == '</span><span class="s3">\\</span><span class="s1">'') {</span><span class="s3">\n    </span><span class="s1">if (!(state.in_atom = (!singleQuote(stream)))) {</span><span class="s3">\n      </span><span class="s1">if (stream.match(/</span><span class="s3">\\</span><span class="s1">s*</span><span class="s3">\\</span><span class="s1">/</span><span class="s3">\\</span><span class="s1">s*[0-9]/,false)) {</span><span class="s3">\n        </span><span class="s1">stream.match(/</span><span class="s3">\\</span><span class="s1">s*</span><span class="s3">\\</span><span class="s1">/</span><span class="s3">\\</span><span class="s1">s*[0-9]/,true);</span><span class="s3">\n        </span><span class="s1">return rval(state,stream,</span><span class="s3">\&quot;</span><span class="s1">fun</span><span class="s3">\&quot;</span><span class="s1">);      // 'f'/0 style fun</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">if (stream.match(/</span><span class="s3">\\</span><span class="s1">s*</span><span class="s3">\\</span><span class="s1">(/,false) || stream.match(/</span><span class="s3">\\</span><span class="s1">s*:/,false)) {</span><span class="s3">\n        </span><span class="s1">return rval(state,stream,</span><span class="s3">\&quot;</span><span class="s1">function</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">return rval(state,stream,</span><span class="s3">\&quot;</span><span class="s1">atom</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// string</span><span class="s3">\n  </span><span class="s1">if (ch == '</span><span class="s3">\&quot;</span><span class="s1">') {</span><span class="s3">\n    </span><span class="s1">state.in_string = (!doubleQuote(stream));</span><span class="s3">\n    </span><span class="s1">return rval(state,stream,</span><span class="s3">\&quot;</span><span class="s1">string</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// variable</span><span class="s3">\n  </span><span class="s1">if (/[A-Z_Ø-ÞÀ-Ö]/.test(ch)) {</span><span class="s3">\n    </span><span class="s1">stream.eatWhile(anumRE);</span><span class="s3">\n    </span><span class="s1">return rval(state,stream,</span><span class="s3">\&quot;</span><span class="s1">variable</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// atom/keyword/BIF/function</span><span class="s3">\n  </span><span class="s1">if (/[a-z_ß-öø-ÿ]/.test(ch)) {</span><span class="s3">\n    </span><span class="s1">stream.eatWhile(anumRE);</span><span class="s3">\n\n    </span><span class="s1">if (stream.match(/</span><span class="s3">\\</span><span class="s1">s*</span><span class="s3">\\</span><span class="s1">/</span><span class="s3">\\</span><span class="s1">s*[0-9]/,false)) {</span><span class="s3">\n      </span><span class="s1">stream.match(/</span><span class="s3">\\</span><span class="s1">s*</span><span class="s3">\\</span><span class="s1">/</span><span class="s3">\\</span><span class="s1">s*[0-9]/,true);</span><span class="s3">\n      </span><span class="s1">return rval(state,stream,</span><span class="s3">\&quot;</span><span class="s1">fun</span><span class="s3">\&quot;</span><span class="s1">);      // f/0 style fun</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">var w = stream.current();</span><span class="s3">\n\n    </span><span class="s1">if (is_member(w,keywordWords)) {</span><span class="s3">\n      </span><span class="s1">return rval(state,stream,</span><span class="s3">\&quot;</span><span class="s1">keyword</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">}else if (is_member(w,operatorAtomWords)) {</span><span class="s3">\n      </span><span class="s1">return rval(state,stream,</span><span class="s3">\&quot;</span><span class="s1">operator</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">}else if (stream.match(/</span><span class="s3">\\</span><span class="s1">s*</span><span class="s3">\\</span><span class="s1">(/,false)) {</span><span class="s3">\n      </span><span class="s1">// 'put' and 'erlang:put' are bifs, 'foo:put' is not</span><span class="s3">\n      </span><span class="s1">if (is_member(w,bifWords) &amp;&amp;</span><span class="s3">\n          </span><span class="s1">((peekToken(state).token != </span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\&quot;</span><span class="s1">) ||</span><span class="s3">\n           </span><span class="s1">(peekToken(state,2).token == </span><span class="s3">\&quot;</span><span class="s1">erlang</span><span class="s3">\&quot;</span><span class="s1">))) {</span><span class="s3">\n        </span><span class="s1">return rval(state,stream,</span><span class="s3">\&quot;</span><span class="s1">builtin</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">}else if (is_member(w,guardWords)) {</span><span class="s3">\n        </span><span class="s1">return rval(state,stream,</span><span class="s3">\&quot;</span><span class="s1">guard</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">}else{</span><span class="s3">\n        </span><span class="s1">return rval(state,stream,</span><span class="s3">\&quot;</span><span class="s1">function</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}else if (lookahead(stream) == </span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">if (w == </span><span class="s3">\&quot;</span><span class="s1">erlang</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n        </span><span class="s1">return rval(state,stream,</span><span class="s3">\&quot;</span><span class="s1">builtin</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">return rval(state,stream,</span><span class="s3">\&quot;</span><span class="s1">function</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}else if (is_member(w,[</span><span class="s3">\&quot;</span><span class="s1">true</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">false</span><span class="s3">\&quot;</span><span class="s1">])) {</span><span class="s3">\n      </span><span class="s1">return rval(state,stream,</span><span class="s3">\&quot;</span><span class="s1">boolean</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">}else{</span><span class="s3">\n      </span><span class="s1">return rval(state,stream,</span><span class="s3">\&quot;</span><span class="s1">atom</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// number</span><span class="s3">\n  </span><span class="s1">var digitRE      = /[0-9]/;</span><span class="s3">\n  </span><span class="s1">var radixRE      = /[0-9a-zA-Z]/;         // 36#zZ style int</span><span class="s3">\n  </span><span class="s1">if (digitRE.test(ch)) {</span><span class="s3">\n    </span><span class="s1">stream.eatWhile(digitRE);</span><span class="s3">\n    </span><span class="s1">if (stream.eat('#')) {                // 36#aZ  style integer</span><span class="s3">\n      </span><span class="s1">if (!stream.eatWhile(radixRE)) {</span><span class="s3">\n        </span><span class="s1">stream.backUp(1);                 //</span><span class="s3">\&quot;</span><span class="s1">36#</span><span class="s3">\&quot; </span><span class="s1">- syntax error</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">} else if (stream.eat('.')) {       // float</span><span class="s3">\n      </span><span class="s1">if (!stream.eatWhile(digitRE)) {</span><span class="s3">\n        </span><span class="s1">stream.backUp(1);        // </span><span class="s3">\&quot;</span><span class="s1">3.</span><span class="s3">\&quot; </span><span class="s1">- probably end of function</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">if (stream.eat(/[eE]/)) {        // float with exponent</span><span class="s3">\n          </span><span class="s1">if (stream.eat(/[-+]/)) {</span><span class="s3">\n            </span><span class="s1">if (!stream.eatWhile(digitRE)) {</span><span class="s3">\n              </span><span class="s1">stream.backUp(2);            // </span><span class="s3">\&quot;</span><span class="s1">2e-</span><span class="s3">\&quot; </span><span class="s1">- syntax error</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">} else {</span><span class="s3">\n            </span><span class="s1">if (!stream.eatWhile(digitRE)) {</span><span class="s3">\n              </span><span class="s1">stream.backUp(1);            // </span><span class="s3">\&quot;</span><span class="s1">2e</span><span class="s3">\&quot; </span><span class="s1">- syntax error</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">return rval(state,stream,</span><span class="s3">\&quot;</span><span class="s1">number</span><span class="s3">\&quot;</span><span class="s1">);   // normal integer</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// open parens</span><span class="s3">\n  </span><span class="s1">if (nongreedy(stream,openParenRE,openParenWords)) {</span><span class="s3">\n    </span><span class="s1">return rval(state,stream,</span><span class="s3">\&quot;</span><span class="s1">open_paren</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// close parens</span><span class="s3">\n  </span><span class="s1">if (nongreedy(stream,closeParenRE,closeParenWords)) {</span><span class="s3">\n    </span><span class="s1">return rval(state,stream,</span><span class="s3">\&quot;</span><span class="s1">close_paren</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// separators</span><span class="s3">\n  </span><span class="s1">if (greedy(stream,separatorRE,separatorWords)) {</span><span class="s3">\n    </span><span class="s1">return rval(state,stream,</span><span class="s3">\&quot;</span><span class="s1">separator</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// operators</span><span class="s3">\n  </span><span class="s1">if (greedy(stream,operatorSymbolRE,operatorSymbolWords)) {</span><span class="s3">\n    </span><span class="s1">return rval(state,stream,</span><span class="s3">\&quot;</span><span class="s1">operator</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return rval(state,stream,null);</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/////////////////////////////////////////////////////////////////////////////</span><span class="s3">\n</span><span class="s1">// utilities</span><span class="s3">\n</span><span class="s1">function nongreedy(stream,re,words) {</span><span class="s3">\n  </span><span class="s1">if (stream.current().length == 1 &amp;&amp; re.test(stream.current())) {</span><span class="s3">\n    </span><span class="s1">stream.backUp(1);</span><span class="s3">\n    </span><span class="s1">while (re.test(stream.peek())) {</span><span class="s3">\n      </span><span class="s1">stream.next();</span><span class="s3">\n      </span><span class="s1">if (is_member(stream.current(),words)) {</span><span class="s3">\n        </span><span class="s1">return true;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">stream.backUp(stream.current().length-1);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return false;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function greedy(stream,re,words) {</span><span class="s3">\n  </span><span class="s1">if (stream.current().length == 1 &amp;&amp; re.test(stream.current())) {</span><span class="s3">\n    </span><span class="s1">while (re.test(stream.peek())) {</span><span class="s3">\n      </span><span class="s1">stream.next();</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">while (0 &lt; stream.current().length) {</span><span class="s3">\n      </span><span class="s1">if (is_member(stream.current(),words)) {</span><span class="s3">\n        </span><span class="s1">return true;</span><span class="s3">\n      </span><span class="s1">}else{</span><span class="s3">\n        </span><span class="s1">stream.backUp(1);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">stream.next();</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return false;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function doubleQuote(stream) {</span><span class="s3">\n  </span><span class="s1">return quote(stream, '</span><span class="s3">\&quot;</span><span class="s1">', '</span><span class="s3">\\\\</span><span class="s1">');</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function singleQuote(stream) {</span><span class="s3">\n  </span><span class="s1">return quote(stream,'</span><span class="s3">\\</span><span class="s1">'','</span><span class="s3">\\\\</span><span class="s1">');</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function quote(stream,quoteChar,escapeChar) {</span><span class="s3">\n  </span><span class="s1">while (!stream.eol()) {</span><span class="s3">\n    </span><span class="s1">var ch = stream.next();</span><span class="s3">\n    </span><span class="s1">if (ch == quoteChar) {</span><span class="s3">\n      </span><span class="s1">return true;</span><span class="s3">\n    </span><span class="s1">}else if (ch == escapeChar) {</span><span class="s3">\n      </span><span class="s1">stream.next();</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return false;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function lookahead(stream) {</span><span class="s3">\n  </span><span class="s1">var m = stream.match(/^</span><span class="s3">\\</span><span class="s1">s*([^</span><span class="s3">\\</span><span class="s1">s%])/, false)</span><span class="s3">\n  </span><span class="s1">return m ? m[1] : </span><span class="s3">\&quot;\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function is_member(element,list) {</span><span class="s3">\n  </span><span class="s1">return (-1 &lt; list.indexOf(element));</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function rval(state,stream,type) {</span><span class="s3">\n\n  </span><span class="s1">// parse stack</span><span class="s3">\n  </span><span class="s1">pushToken(state,realToken(type,stream));</span><span class="s3">\n\n  </span><span class="s1">// map erlang token type to CodeMirror style class</span><span class="s3">\n  </span><span class="s1">//     erlang             -&gt; CodeMirror tag</span><span class="s3">\n  </span><span class="s1">switch (type) {</span><span class="s3">\n  </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">atom</span><span class="s3">\&quot;</span><span class="s1">:        return </span><span class="s3">\&quot;</span><span class="s1">atom</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">attribute</span><span class="s3">\&quot;</span><span class="s1">:   return </span><span class="s3">\&quot;</span><span class="s1">attribute</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">boolean</span><span class="s3">\&quot;</span><span class="s1">:     return </span><span class="s3">\&quot;</span><span class="s1">atom</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">builtin</span><span class="s3">\&quot;</span><span class="s1">:     return </span><span class="s3">\&quot;</span><span class="s1">builtin</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">close_paren</span><span class="s3">\&quot;</span><span class="s1">: return null;</span><span class="s3">\n  </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">colon</span><span class="s3">\&quot;</span><span class="s1">:       return null;</span><span class="s3">\n  </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">comment</span><span class="s3">\&quot;</span><span class="s1">:     return </span><span class="s3">\&quot;</span><span class="s1">comment</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">dot</span><span class="s3">\&quot;</span><span class="s1">:         return null;</span><span class="s3">\n  </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">error</span><span class="s3">\&quot;</span><span class="s1">:       return </span><span class="s3">\&quot;</span><span class="s1">error</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">fun</span><span class="s3">\&quot;</span><span class="s1">:         return </span><span class="s3">\&quot;</span><span class="s1">meta</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">function</span><span class="s3">\&quot;</span><span class="s1">:    return </span><span class="s3">\&quot;</span><span class="s1">tag</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">guard</span><span class="s3">\&quot;</span><span class="s1">:       return </span><span class="s3">\&quot;</span><span class="s1">property</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">keyword</span><span class="s3">\&quot;</span><span class="s1">:     return </span><span class="s3">\&quot;</span><span class="s1">keyword</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">macro</span><span class="s3">\&quot;</span><span class="s1">:       return </span><span class="s3">\&quot;</span><span class="s1">macroName</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">number</span><span class="s3">\&quot;</span><span class="s1">:      return </span><span class="s3">\&quot;</span><span class="s1">number</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">open_paren</span><span class="s3">\&quot;</span><span class="s1">:  return null;</span><span class="s3">\n  </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">operator</span><span class="s3">\&quot;</span><span class="s1">:    return </span><span class="s3">\&quot;</span><span class="s1">operator</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">record</span><span class="s3">\&quot;</span><span class="s1">:      return </span><span class="s3">\&quot;</span><span class="s1">bracket</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">separator</span><span class="s3">\&quot;</span><span class="s1">:   return null;</span><span class="s3">\n  </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">string</span><span class="s3">\&quot;</span><span class="s1">:      return </span><span class="s3">\&quot;</span><span class="s1">string</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">type</span><span class="s3">\&quot;</span><span class="s1">:        return </span><span class="s3">\&quot;</span><span class="s1">def</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">variable</span><span class="s3">\&quot;</span><span class="s1">:    return </span><span class="s3">\&quot;</span><span class="s1">variable</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">default:            return null;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function aToken(tok,col,ind,typ) {</span><span class="s3">\n  </span><span class="s1">return {token:  tok,</span><span class="s3">\n          </span><span class="s1">column: col,</span><span class="s3">\n          </span><span class="s1">indent: ind,</span><span class="s3">\n          </span><span class="s1">type:   typ};</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function realToken(type,stream) {</span><span class="s3">\n  </span><span class="s1">return aToken(stream.current(),</span><span class="s3">\n                </span><span class="s1">stream.column(),</span><span class="s3">\n                </span><span class="s1">stream.indentation(),</span><span class="s3">\n                </span><span class="s1">type);</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function fakeToken(type) {</span><span class="s3">\n  </span><span class="s1">return aToken(type,0,0,type);</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function peekToken(state,depth) {</span><span class="s3">\n  </span><span class="s1">var len = state.tokenStack.length;</span><span class="s3">\n  </span><span class="s1">var dep = (depth ? depth : 1);</span><span class="s3">\n\n  </span><span class="s1">if (len &lt; dep) {</span><span class="s3">\n    </span><span class="s1">return false;</span><span class="s3">\n  </span><span class="s1">}else{</span><span class="s3">\n    </span><span class="s1">return state.tokenStack[len-dep];</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function pushToken(state,token) {</span><span class="s3">\n\n  </span><span class="s1">if (!(token.type == </span><span class="s3">\&quot;</span><span class="s1">comment</span><span class="s3">\&quot; </span><span class="s1">|| token.type == </span><span class="s3">\&quot;</span><span class="s1">whitespace</span><span class="s3">\&quot;</span><span class="s1">)) {</span><span class="s3">\n    </span><span class="s1">state.tokenStack = maybe_drop_pre(state.tokenStack,token);</span><span class="s3">\n    </span><span class="s1">state.tokenStack = maybe_drop_post(state.tokenStack);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function maybe_drop_pre(s,token) {</span><span class="s3">\n  </span><span class="s1">var last = s.length-1;</span><span class="s3">\n\n  </span><span class="s1">if (0 &lt; last &amp;&amp; s[last].type === </span><span class="s3">\&quot;</span><span class="s1">record</span><span class="s3">\&quot; </span><span class="s1">&amp;&amp; token.type === </span><span class="s3">\&quot;</span><span class="s1">dot</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">s.pop();</span><span class="s3">\n  </span><span class="s1">}else if (0 &lt; last &amp;&amp; s[last].type === </span><span class="s3">\&quot;</span><span class="s1">group</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">s.pop();</span><span class="s3">\n    </span><span class="s1">s.push(token);</span><span class="s3">\n  </span><span class="s1">}else{</span><span class="s3">\n    </span><span class="s1">s.push(token);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return s;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function maybe_drop_post(s) {</span><span class="s3">\n  </span><span class="s1">if (!s.length) return s</span><span class="s3">\n  </span><span class="s1">var last = s.length-1;</span><span class="s3">\n\n  </span><span class="s1">if (s[last].type === </span><span class="s3">\&quot;</span><span class="s1">dot</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">return [];</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (last &gt; 1 &amp;&amp; s[last].type === </span><span class="s3">\&quot;</span><span class="s1">fun</span><span class="s3">\&quot; </span><span class="s1">&amp;&amp; s[last-1].token === </span><span class="s3">\&quot;</span><span class="s1">fun</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">return s.slice(0,last-1);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">switch (s[last].token) {</span><span class="s3">\n  </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">}</span><span class="s3">\&quot;</span><span class="s1">:    return d(s,{g:[</span><span class="s3">\&quot;</span><span class="s1">{</span><span class="s3">\&quot;</span><span class="s1">]});</span><span class="s3">\n  </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">]</span><span class="s3">\&quot;</span><span class="s1">:    return d(s,{i:[</span><span class="s3">\&quot;</span><span class="s1">[</span><span class="s3">\&quot;</span><span class="s1">]});</span><span class="s3">\n  </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\&quot;</span><span class="s1">:    return d(s,{i:[</span><span class="s3">\&quot;</span><span class="s1">(</span><span class="s3">\&quot;</span><span class="s1">]});</span><span class="s3">\n  </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">&gt;&gt;</span><span class="s3">\&quot;</span><span class="s1">:   return d(s,{i:[</span><span class="s3">\&quot;</span><span class="s1">&lt;&lt;</span><span class="s3">\&quot;</span><span class="s1">]});</span><span class="s3">\n  </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">end</span><span class="s3">\&quot;</span><span class="s1">:  return d(s,{i:[</span><span class="s3">\&quot;</span><span class="s1">begin</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">case</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">fun</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">if</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">receive</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">try</span><span class="s3">\&quot;</span><span class="s1">]});</span><span class="s3">\n  </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">:    return d(s,{e:[</span><span class="s3">\&quot;</span><span class="s1">begin</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">try</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">when</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">-&gt;</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n                              \&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">(</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">[</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">{</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">&lt;&lt;</span><span class="s3">\&quot;</span><span class="s1">]});</span><span class="s3">\n  </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">-&gt;</span><span class="s3">\&quot;</span><span class="s1">:   return d(s,{r:[</span><span class="s3">\&quot;</span><span class="s1">when</span><span class="s3">\&quot;</span><span class="s1">],</span><span class="s3">\n                           </span><span class="s1">m:[</span><span class="s3">\&quot;</span><span class="s1">try</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">if</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">case</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">receive</span><span class="s3">\&quot;</span><span class="s1">]});</span><span class="s3">\n  </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\&quot;</span><span class="s1">:    return d(s,{E:[</span><span class="s3">\&quot;</span><span class="s1">case</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">fun</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">if</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">receive</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">try</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">when</span><span class="s3">\&quot;</span><span class="s1">]});</span><span class="s3">\n  </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">catch</span><span class="s3">\&quot;</span><span class="s1">:return d(s,{e:[</span><span class="s3">\&quot;</span><span class="s1">try</span><span class="s3">\&quot;</span><span class="s1">]});</span><span class="s3">\n  </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">of</span><span class="s3">\&quot;</span><span class="s1">:   return d(s,{e:[</span><span class="s3">\&quot;</span><span class="s1">case</span><span class="s3">\&quot;</span><span class="s1">]});</span><span class="s3">\n  </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">after</span><span class="s3">\&quot;</span><span class="s1">:return d(s,{e:[</span><span class="s3">\&quot;</span><span class="s1">receive</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">try</span><span class="s3">\&quot;</span><span class="s1">]});</span><span class="s3">\n  </span><span class="s1">default:     return s;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function d(stack,tt) {</span><span class="s3">\n  </span><span class="s1">// stack is a stack of Token objects.</span><span class="s3">\n  </span><span class="s1">// tt is an object; {type:tokens}</span><span class="s3">\n  </span><span class="s1">// type is a char, tokens is a list of token strings.</span><span class="s3">\n  </span><span class="s1">// The function returns (possibly truncated) stack.</span><span class="s3">\n  </span><span class="s1">// It will descend the stack, looking for a Token such that Token.token</span><span class="s3">\n  </span><span class="s1">//  is a member of tokens. If it does not find that, it will normally (but</span><span class="s3">\n  </span><span class="s1">//  see </span><span class="s3">\&quot;</span><span class="s1">E</span><span class="s3">\&quot; </span><span class="s1">below) return stack. If it does find a match, it will remove</span><span class="s3">\n  </span><span class="s1">//  all the Tokens between the top and the matched Token.</span><span class="s3">\n  </span><span class="s1">// If type is </span><span class="s3">\&quot;</span><span class="s1">m</span><span class="s3">\&quot;</span><span class="s1">, that is all it does.</span><span class="s3">\n  </span><span class="s1">// If type is </span><span class="s3">\&quot;</span><span class="s1">i</span><span class="s3">\&quot;</span><span class="s1">, it will also remove the matched Token and the top Token.</span><span class="s3">\n  </span><span class="s1">// If type is </span><span class="s3">\&quot;</span><span class="s1">g</span><span class="s3">\&quot;</span><span class="s1">, like </span><span class="s3">\&quot;</span><span class="s1">i</span><span class="s3">\&quot;</span><span class="s1">, but add a fake </span><span class="s3">\&quot;</span><span class="s1">group</span><span class="s3">\&quot; </span><span class="s1">token at the top.</span><span class="s3">\n  </span><span class="s1">// If type is </span><span class="s3">\&quot;</span><span class="s1">r</span><span class="s3">\&quot;</span><span class="s1">, it will remove the matched Token, but not the top Token.</span><span class="s3">\n  </span><span class="s1">// If type is </span><span class="s3">\&quot;</span><span class="s1">e</span><span class="s3">\&quot;</span><span class="s1">, it will keep the matched Token but not the top Token.</span><span class="s3">\n  </span><span class="s1">// If type is </span><span class="s3">\&quot;</span><span class="s1">E</span><span class="s3">\&quot;</span><span class="s1">, it behaves as for type </span><span class="s3">\&quot;</span><span class="s1">e</span><span class="s3">\&quot;</span><span class="s1">, except if there is no match,</span><span class="s3">\n  </span><span class="s1">//  in which case it will return an empty stack.</span><span class="s3">\n\n  </span><span class="s1">for (var type in tt) {</span><span class="s3">\n    </span><span class="s1">var len = stack.length-1;</span><span class="s3">\n    </span><span class="s1">var tokens = tt[type];</span><span class="s3">\n    </span><span class="s1">for (var i = len-1; -1 &lt; i ; i--) {</span><span class="s3">\n      </span><span class="s1">if (is_member(stack[i].token,tokens)) {</span><span class="s3">\n        </span><span class="s1">var ss = stack.slice(0,i);</span><span class="s3">\n        </span><span class="s1">switch (type) {</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">m</span><span class="s3">\&quot;</span><span class="s1">: return ss.concat(stack[i]).concat(stack[len]);</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">r</span><span class="s3">\&quot;</span><span class="s1">: return ss.concat(stack[len]);</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">i</span><span class="s3">\&quot;</span><span class="s1">: return ss;</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">g</span><span class="s3">\&quot;</span><span class="s1">: return ss.concat(fakeToken(</span><span class="s3">\&quot;</span><span class="s1">group</span><span class="s3">\&quot;</span><span class="s1">));</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">E</span><span class="s3">\&quot;</span><span class="s1">: return ss.concat(stack[i]);</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">e</span><span class="s3">\&quot;</span><span class="s1">: return ss.concat(stack[i]);</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return (type == </span><span class="s3">\&quot;</span><span class="s1">E</span><span class="s3">\&quot; </span><span class="s1">? [] : stack);</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/////////////////////////////////////////////////////////////////////////////</span><span class="s3">\n</span><span class="s1">// indenter</span><span class="s3">\n\n</span><span class="s1">function indenter(state, textAfter, cx) {</span><span class="s3">\n  </span><span class="s1">var t;</span><span class="s3">\n  </span><span class="s1">var wordAfter = wordafter(textAfter);</span><span class="s3">\n  </span><span class="s1">var currT = peekToken(state,1);</span><span class="s3">\n  </span><span class="s1">var prevT = peekToken(state,2);</span><span class="s3">\n\n  </span><span class="s1">if (state.in_string || state.in_atom) {</span><span class="s3">\n    </span><span class="s1">return null;</span><span class="s3">\n  </span><span class="s1">}else if (!prevT) {</span><span class="s3">\n    </span><span class="s1">return 0;</span><span class="s3">\n  </span><span class="s1">}else if (currT.token == </span><span class="s3">\&quot;</span><span class="s1">when</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">return currT.column + cx.unit;</span><span class="s3">\n  </span><span class="s1">}else if (wordAfter === </span><span class="s3">\&quot;</span><span class="s1">when</span><span class="s3">\&quot; </span><span class="s1">&amp;&amp; prevT.type === </span><span class="s3">\&quot;</span><span class="s1">function</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">return prevT.indent+cx.unit;</span><span class="s3">\n  </span><span class="s1">}else if (wordAfter === </span><span class="s3">\&quot;</span><span class="s1">(</span><span class="s3">\&quot; </span><span class="s1">&amp;&amp; currT.token === </span><span class="s3">\&quot;</span><span class="s1">fun</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">return  currT.column+3;</span><span class="s3">\n  </span><span class="s1">}else if (wordAfter === </span><span class="s3">\&quot;</span><span class="s1">catch</span><span class="s3">\&quot; </span><span class="s1">&amp;&amp; (t = getToken(state,[</span><span class="s3">\&quot;</span><span class="s1">try</span><span class="s3">\&quot;</span><span class="s1">]))) {</span><span class="s3">\n    </span><span class="s1">return t.column;</span><span class="s3">\n  </span><span class="s1">}else if (is_member(wordAfter,[</span><span class="s3">\&quot;</span><span class="s1">end</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">after</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">of</span><span class="s3">\&quot;</span><span class="s1">])) {</span><span class="s3">\n    </span><span class="s1">t = getToken(state,[</span><span class="s3">\&quot;</span><span class="s1">begin</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">case</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">fun</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">if</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">receive</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">try</span><span class="s3">\&quot;</span><span class="s1">]);</span><span class="s3">\n    </span><span class="s1">return t ? t.column : null;</span><span class="s3">\n  </span><span class="s1">}else if (is_member(wordAfter,closeParenWords)) {</span><span class="s3">\n    </span><span class="s1">t = getToken(state,openParenWords);</span><span class="s3">\n    </span><span class="s1">return t ? t.column : null;</span><span class="s3">\n  </span><span class="s1">}else if (is_member(currT.token,[</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">|</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">||</span><span class="s3">\&quot;</span><span class="s1">]) ||</span><span class="s3">\n            </span><span class="s1">is_member(wordAfter,[</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">|</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">||</span><span class="s3">\&quot;</span><span class="s1">])) {</span><span class="s3">\n    </span><span class="s1">t = postcommaToken(state);</span><span class="s3">\n    </span><span class="s1">return t ? t.column+t.token.length : cx.unit;</span><span class="s3">\n  </span><span class="s1">}else if (currT.token == </span><span class="s3">\&quot;</span><span class="s1">-&gt;</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">if (is_member(prevT.token, [</span><span class="s3">\&quot;</span><span class="s1">receive</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">case</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">if</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">try</span><span class="s3">\&quot;</span><span class="s1">])) {</span><span class="s3">\n      </span><span class="s1">return prevT.column+cx.unit+cx.unit;</span><span class="s3">\n    </span><span class="s1">}else{</span><span class="s3">\n      </span><span class="s1">return prevT.column+cx.unit;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}else if (is_member(currT.token,openParenWords)) {</span><span class="s3">\n    </span><span class="s1">return currT.column+currT.token.length;</span><span class="s3">\n  </span><span class="s1">}else{</span><span class="s3">\n    </span><span class="s1">t = defaultToken(state);</span><span class="s3">\n    </span><span class="s1">return truthy(t) ? t.column+cx.unit : 0;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function wordafter(str) {</span><span class="s3">\n  </span><span class="s1">var m = str.match(/,|[a-z]+|</span><span class="s3">\\</span><span class="s1">}|</span><span class="s3">\\</span><span class="s1">]|</span><span class="s3">\\</span><span class="s1">)|&gt;&gt;|</span><span class="s3">\\</span><span class="s1">|+|</span><span class="s3">\\</span><span class="s1">(/);</span><span class="s3">\n\n  </span><span class="s1">return truthy(m) &amp;&amp; (m.index === 0) ? m[0] : </span><span class="s3">\&quot;\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function postcommaToken(state) {</span><span class="s3">\n  </span><span class="s1">var objs = state.tokenStack.slice(0,-1);</span><span class="s3">\n  </span><span class="s1">var i = getTokenIndex(objs,</span><span class="s3">\&quot;</span><span class="s1">type</span><span class="s3">\&quot;</span><span class="s1">,[</span><span class="s3">\&quot;</span><span class="s1">open_paren</span><span class="s3">\&quot;</span><span class="s1">]);</span><span class="s3">\n\n  </span><span class="s1">return truthy(objs[i]) ? objs[i] : false;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function defaultToken(state) {</span><span class="s3">\n  </span><span class="s1">var objs = state.tokenStack;</span><span class="s3">\n  </span><span class="s1">var stop = getTokenIndex(objs,</span><span class="s3">\&quot;</span><span class="s1">type</span><span class="s3">\&quot;</span><span class="s1">,[</span><span class="s3">\&quot;</span><span class="s1">open_paren</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">separator</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">keyword</span><span class="s3">\&quot;</span><span class="s1">]);</span><span class="s3">\n  </span><span class="s1">var oper = getTokenIndex(objs,</span><span class="s3">\&quot;</span><span class="s1">type</span><span class="s3">\&quot;</span><span class="s1">,[</span><span class="s3">\&quot;</span><span class="s1">operator</span><span class="s3">\&quot;</span><span class="s1">]);</span><span class="s3">\n\n  </span><span class="s1">if (truthy(stop) &amp;&amp; truthy(oper) &amp;&amp; stop &lt; oper) {</span><span class="s3">\n    </span><span class="s1">return objs[stop+1];</span><span class="s3">\n  </span><span class="s1">} else if (truthy(stop)) {</span><span class="s3">\n    </span><span class="s1">return objs[stop];</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">return false;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function getToken(state,tokens) {</span><span class="s3">\n  </span><span class="s1">var objs = state.tokenStack;</span><span class="s3">\n  </span><span class="s1">var i = getTokenIndex(objs,</span><span class="s3">\&quot;</span><span class="s1">token</span><span class="s3">\&quot;</span><span class="s1">,tokens);</span><span class="s3">\n\n  </span><span class="s1">return truthy(objs[i]) ? objs[i] : false;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function getTokenIndex(objs,propname,propvals) {</span><span class="s3">\n\n  </span><span class="s1">for (var i = objs.length-1; -1 &lt; i ; i--) {</span><span class="s3">\n    </span><span class="s1">if (is_member(objs[i][propname],propvals)) {</span><span class="s3">\n      </span><span class="s1">return i;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return false;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function truthy(x) {</span><span class="s3">\n  </span><span class="s1">return (x !== false) &amp;&amp; (x != null);</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/////////////////////////////////////////////////////////////////////////////</span><span class="s3">\n</span><span class="s1">// this object defines the mode</span><span class="s3">\n\n</span><span class="s1">export const erlang = {</span><span class="s3">\n  </span><span class="s1">name: </span><span class="s3">\&quot;</span><span class="s1">erlang</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n  </span><span class="s1">startState() {</span><span class="s3">\n    </span><span class="s1">return {tokenStack: [],</span><span class="s3">\n            </span><span class="s1">in_string:  false,</span><span class="s3">\n            </span><span class="s1">in_atom:    false};</span><span class="s3">\n  </span><span class="s1">},</span><span class="s3">\n\n  </span><span class="s1">token: tokenizer,</span><span class="s3">\n\n  </span><span class="s1">indent: indenter,</span><span class="s3">\n\n  </span><span class="s1">languageData: {</span><span class="s3">\n    </span><span class="s1">commentTokens: {line: </span><span class="s3">\&quot;</span><span class="s1">%</span><span class="s3">\&quot;</span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[],</span><span class="s1">&quot;sourceRoot&quot;</span><span class="s0">:</span><span class="s1">&quot;&quot;</span><span class="s0">}</span></pre>
</body>
</html>