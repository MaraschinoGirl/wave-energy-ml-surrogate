<html>
<head>
<title>7371.63b12ce793df713ab95b.js</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #bcbec4;}
.s1 { color: #bcbec4;}
.s2 { color: #6aab73;}
.s3 { color: #2aacb8;}
.s4 { color: #cf8e6d;}
.s5 { color: #42c3d4;}
.ln { color: #4b5059; font-weight: normal; font-style: normal; }
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
7371.63b12ce793df713ab95b.js</font>
</center></td></tr></table>
<pre><a name="l1"><span class="ln">1    </span></a><span class="s0">(</span><span class="s1">self</span><span class="s0">[</span><span class="s2">&quot;webpackChunk_jupyterlab_application_top&quot;</span><span class="s0">]=</span><span class="s1">self</span><span class="s0">[</span><span class="s2">&quot;webpackChunk_jupyterlab_application_top&quot;</span><span class="s0">]||[]).</span><span class="s1">push</span><span class="s0">([[</span><span class="s3">7371</span><span class="s0">],{</span><span class="s3">26527</span><span class="s0">:</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){(</span><span class="s4">function </span><span class="s1">e</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">n</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s4">true</span><span class="s0">)</span><span class="s1">t</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">=</span><span class="s1">n</span><span class="s0">(</span><span class="s1">r</span><span class="s0">(</span><span class="s3">41709</span><span class="s0">));</span><span class="s4">else</span><span class="s0">{}})(</span><span class="s4">this</span><span class="s0">,(</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">return</span><span class="s0">(()=&gt;{</span><span class="s2">&quot;use strict&quot;</span><span class="s0">;</span><span class="s4">var </span><span class="s1">e</span><span class="s0">={</span><span class="s3">658</span><span class="s0">:</span><span class="s1">t</span><span class="s0">=&gt;{</span><span class="s1">t</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">=</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">assign</span><span class="s0">!=</span><span class="s4">null</span><span class="s0">?</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">assign</span><span class="s0">.</span><span class="s1">bind</span><span class="s0">(</span><span class="s1">Object</span><span class="s0">):</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s1">arguments</span><span class="s0">.</span><span class="s1">length</span><span class="s0">,</span><span class="s1">r</span><span class="s0">=</span><span class="s1">Array</span><span class="s0">(</span><span class="s1">e</span><span class="s0">&gt;</span><span class="s3">1</span><span class="s0">?</span><span class="s1">e</span><span class="s0">-</span><span class="s3">1</span><span class="s0">:</span><span class="s3">0</span><span class="s0">),</span><span class="s1">i</span><span class="s0">=</span><span class="s3">1</span><span class="s0">;</span><span class="s1">i</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">;</span><span class="s1">i</span><span class="s0">++){</span><span class="s1">r</span><span class="s0">[</span><span class="s1">i</span><span class="s0">-</span><span class="s3">1</span><span class="s0">]=</span><span class="s1">arguments</span><span class="s0">[</span><span class="s1">i</span><span class="s0">]}</span><span class="s1">r</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">keys</span><span class="s0">(</span><span class="s1">e</span><span class="s0">).</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">r</span><span class="s0">){</span><span class="s4">return </span><span class="s1">t</span><span class="s0">[</span><span class="s1">r</span><span class="s0">]=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">r</span><span class="s0">]}))}));</span><span class="s4">return </span><span class="s1">t</span><span class="s0">}},</span><span class="s3">548</span><span class="s0">:(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">)=&gt;{</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=[];</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s4">false</span><span class="s0">;</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s1">undefined</span><span class="s0">;</span><span class="s4">try</span><span class="s0">{</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s1">t</span><span class="s0">[</span><span class="s1">Symbol</span><span class="s0">.</span><span class="s1">iterator</span><span class="s0">](),</span><span class="s1">s</span><span class="s0">;!(</span><span class="s1">i</span><span class="s0">=(</span><span class="s1">s</span><span class="s0">=</span><span class="s1">a</span><span class="s0">.</span><span class="s1">next</span><span class="s0">()).</span><span class="s1">done</span><span class="s0">);</span><span class="s1">i</span><span class="s0">=</span><span class="s4">true</span><span class="s0">){</span><span class="s1">r</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">s</span><span class="s0">.</span><span class="s1">value</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">&amp;&amp;</span><span class="s1">r</span><span class="s0">.</span><span class="s1">length</span><span class="s0">===</span><span class="s1">e</span><span class="s0">)</span><span class="s4">break</span><span class="s0">}}</span><span class="s4">catch</span><span class="s0">(</span><span class="s1">h</span><span class="s0">){</span><span class="s1">n</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s1">o</span><span class="s0">=</span><span class="s1">h</span><span class="s0">}</span><span class="s4">finally</span><span class="s0">{</span><span class="s4">try</span><span class="s0">{</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">i</span><span class="s0">&amp;&amp;</span><span class="s1">a</span><span class="s0">[</span><span class="s2">&quot;return&quot;</span><span class="s0">])</span><span class="s1">a</span><span class="s0">[</span><span class="s2">&quot;return&quot;</span><span class="s0">]()}</span><span class="s4">finally</span><span class="s0">{</span><span class="s4">if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">)</span><span class="s4">throw </span><span class="s1">o</span><span class="s0">}}</span><span class="s4">return </span><span class="s1">r</span><span class="s0">}</span><span class="s4">return function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">Array</span><span class="s0">.</span><span class="s1">isArray</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)){</span><span class="s4">return </span><span class="s1">e</span><span class="s0">}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">Symbol</span><span class="s0">.</span><span class="s1">iterator </span><span class="s4">in </span><span class="s1">Object</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)){</span><span class="s4">return </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">)}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">throw new </span><span class="s1">TypeError</span><span class="s0">(</span><span class="s2">&quot;Invalid attempt to destructure non-iterable instance&quot;</span><span class="s0">)}}}();</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">140</span><span class="s0">).</span><span class="s1">layoutBase</span><span class="s0">.</span><span class="s1">LinkedList</span><span class="s0">;</span><span class="s4">var </span><span class="s1">o</span><span class="s0">={};</span><span class="s1">o</span><span class="s0">.</span><span class="s1">getTopMostNodes</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">={};</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">r</span><span class="s0">&lt;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">r</span><span class="s0">++){</span><span class="s1">e</span><span class="s0">[</span><span class="s1">t</span><span class="s0">[</span><span class="s1">r</span><span class="s0">].</span><span class="s1">id</span><span class="s0">()]=</span><span class="s4">true</span><span class="s0">}</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">filter</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s4">typeof </span><span class="s1">t</span><span class="s0">===</span><span class="s2">&quot;number&quot;</span><span class="s0">){</span><span class="s1">t</span><span class="s0">=</span><span class="s1">r</span><span class="s0">}</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">parent</span><span class="s0">()[</span><span class="s3">0</span><span class="s0">];</span><span class="s4">while</span><span class="s0">(</span><span class="s1">i</span><span class="s0">!=</span><span class="s4">null</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">[</span><span class="s1">i</span><span class="s0">.</span><span class="s1">id</span><span class="s0">()]){</span><span class="s4">return false</span><span class="s0">}</span><span class="s1">i</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">parent</span><span class="s0">()[</span><span class="s3">0</span><span class="s0">]}</span><span class="s4">return true</span><span class="s0">}));</span><span class="s4">return </span><span class="s1">i</span><span class="s0">};</span><span class="s1">o</span><span class="s0">.</span><span class="s1">connectComponents</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s4">new </span><span class="s1">n</span><span class="s0">;</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Set</span><span class="s0">;</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=[];</span><span class="s4">var </span><span class="s1">h</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">l</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">c</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">d</span><span class="s0">=</span><span class="s4">false</span><span class="s0">;</span><span class="s4">var </span><span class="s1">f</span><span class="s0">=</span><span class="s3">1</span><span class="s0">;</span><span class="s4">var </span><span class="s1">g</span><span class="s0">=[];</span><span class="s4">var </span><span class="s1">u</span><span class="s0">=[];</span><span class="s4">var </span><span class="s1">p</span><span class="s0">=</span><span class="s4">function </span><span class="s1">i</span><span class="s0">(){</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">collection</span><span class="s0">();</span><span class="s1">u</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">n</span><span class="s0">);</span><span class="s4">var </span><span class="s1">p</span><span class="s0">=</span><span class="s1">r</span><span class="s0">[</span><span class="s3">0</span><span class="s0">];</span><span class="s4">var </span><span class="s1">v</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">collection</span><span class="s0">();</span><span class="s1">v</span><span class="s0">.</span><span class="s1">merge</span><span class="s0">(</span><span class="s1">p</span><span class="s0">).</span><span class="s1">merge</span><span class="s0">(</span><span class="s1">p</span><span class="s0">.</span><span class="s1">descendants</span><span class="s0">().</span><span class="s1">intersection</span><span class="s0">(</span><span class="s1">e</span><span class="s0">));</span><span class="s1">s</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">p</span><span class="s0">);</span><span class="s1">v</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s1">o</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">t</span><span class="s0">);</span><span class="s1">a</span><span class="s0">.</span><span class="s1">add</span><span class="s0">(</span><span class="s1">t</span><span class="s0">);</span><span class="s1">n</span><span class="s0">.</span><span class="s1">merge</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)}));</span><span class="s4">var </span><span class="s1">y</span><span class="s0">=</span><span class="s4">function </span><span class="s1">i</span><span class="s0">(){</span><span class="s1">p</span><span class="s0">=</span><span class="s1">o</span><span class="s0">.</span><span class="s1">shift</span><span class="s0">();</span><span class="s4">var </span><span class="s1">l</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">collection</span><span class="s0">();</span><span class="s1">p</span><span class="s0">.</span><span class="s1">neighborhood</span><span class="s0">().</span><span class="s1">nodes</span><span class="s0">().</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">intersection</span><span class="s0">(</span><span class="s1">p</span><span class="s0">.</span><span class="s1">edgesWith</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)).</span><span class="s1">length</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">){</span><span class="s1">l</span><span class="s0">.</span><span class="s1">merge</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)}}));</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">c</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">c</span><span class="s0">&lt;</span><span class="s1">l</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">c</span><span class="s0">++){</span><span class="s4">var </span><span class="s1">d</span><span class="s0">=</span><span class="s1">l</span><span class="s0">[</span><span class="s1">c</span><span class="s0">];</span><span class="s1">h</span><span class="s0">=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">intersection</span><span class="s0">(</span><span class="s1">d</span><span class="s0">.</span><span class="s1">union</span><span class="s0">(</span><span class="s1">d</span><span class="s0">.</span><span class="s1">ancestors</span><span class="s0">()));</span><span class="s4">if</span><span class="s0">(</span><span class="s1">h</span><span class="s0">!=</span><span class="s4">null</span><span class="s0">&amp;&amp;!</span><span class="s1">a</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">h</span><span class="s0">[</span><span class="s3">0</span><span class="s0">])){</span><span class="s4">var </span><span class="s1">f</span><span class="s0">=</span><span class="s1">h</span><span class="s0">.</span><span class="s1">union</span><span class="s0">(</span><span class="s1">h</span><span class="s0">.</span><span class="s1">descendants</span><span class="s0">());</span><span class="s1">f</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s1">o</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">t</span><span class="s0">);</span><span class="s1">a</span><span class="s0">.</span><span class="s1">add</span><span class="s0">(</span><span class="s1">t</span><span class="s0">);</span><span class="s1">n</span><span class="s0">.</span><span class="s1">merge</span><span class="s0">(</span><span class="s1">t</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)){</span><span class="s1">s</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)}}))}}};</span><span class="s4">while</span><span class="s0">(</span><span class="s1">o</span><span class="s0">.</span><span class="s1">length</span><span class="s0">!=</span><span class="s3">0</span><span class="s0">){</span><span class="s1">y</span><span class="s0">()}</span><span class="s1">n</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s1">e</span><span class="s0">.</span><span class="s1">intersection</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">connectedEdges</span><span class="s0">()).</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">source</span><span class="s0">())&amp;&amp;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">target</span><span class="s0">())){</span><span class="s1">n</span><span class="s0">.</span><span class="s1">merge</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)}}))}));</span><span class="s4">if</span><span class="s0">(</span><span class="s1">s</span><span class="s0">.</span><span class="s1">length</span><span class="s0">==</span><span class="s1">r</span><span class="s0">.</span><span class="s1">length</span><span class="s0">){</span><span class="s1">d</span><span class="s0">=</span><span class="s4">true</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">d</span><span class="s0">||</span><span class="s1">d</span><span class="s0">&amp;&amp;</span><span class="s1">f</span><span class="s0">&gt;</span><span class="s3">1</span><span class="s0">){</span><span class="s1">l</span><span class="s0">=</span><span class="s1">s</span><span class="s0">[</span><span class="s3">0</span><span class="s0">];</span><span class="s1">c</span><span class="s0">=</span><span class="s1">l</span><span class="s0">.</span><span class="s1">connectedEdges</span><span class="s0">().</span><span class="s1">length</span><span class="s0">;</span><span class="s1">s</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">connectedEdges</span><span class="s0">().</span><span class="s1">length</span><span class="s0">&lt;</span><span class="s1">c</span><span class="s0">){</span><span class="s1">c</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">connectedEdges</span><span class="s0">().</span><span class="s1">length</span><span class="s0">;</span><span class="s1">l</span><span class="s0">=</span><span class="s1">t</span><span class="s0">}}));</span><span class="s1">g</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">l</span><span class="s0">.</span><span class="s1">id</span><span class="s0">());</span><span class="s4">var </span><span class="s1">m</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">collection</span><span class="s0">();</span><span class="s1">m</span><span class="s0">.</span><span class="s1">merge</span><span class="s0">(</span><span class="s1">s</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]);</span><span class="s1">s</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s1">m</span><span class="s0">.</span><span class="s1">merge</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)}));</span><span class="s1">s</span><span class="s0">=[];</span><span class="s1">r</span><span class="s0">=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">difference</span><span class="s0">(</span><span class="s1">m</span><span class="s0">);</span><span class="s1">f</span><span class="s0">++}};</span><span class="s4">do</span><span class="s0">{</span><span class="s1">p</span><span class="s0">()}</span><span class="s4">while</span><span class="s0">(!</span><span class="s1">d</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">i</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">g</span><span class="s0">.</span><span class="s1">length</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">){</span><span class="s1">i</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s2">&quot;dummy&quot;</span><span class="s0">+(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">size</span><span class="s0">+</span><span class="s3">1</span><span class="s0">),</span><span class="s1">g</span><span class="s0">)}}</span><span class="s4">return </span><span class="s1">u</span><span class="s0">};</span><span class="s1">o</span><span class="s0">.</span><span class="s1">relocateComponent</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">r</span><span class="s0">.</span><span class="s1">fixedNodeConstraint</span><span class="s0">){</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">Number</span><span class="s0">.</span><span class="s1">POSITIVE_INFINITY</span><span class="s0">;</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s1">Number</span><span class="s0">.</span><span class="s1">NEGATIVE_INFINITY</span><span class="s0">;</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s1">Number</span><span class="s0">.</span><span class="s1">POSITIVE_INFINITY</span><span class="s0">;</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s1">Number</span><span class="s0">.</span><span class="s1">NEGATIVE_INFINITY</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">quality</span><span class="s0">==</span><span class="s2">&quot;draft&quot;</span><span class="s0">){</span><span class="s4">var </span><span class="s1">h</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s4">var </span><span class="s1">l</span><span class="s0">=</span><span class="s4">false</span><span class="s0">;</span><span class="s4">var </span><span class="s1">c</span><span class="s0">=</span><span class="s1">undefined</span><span class="s0">;</span><span class="s4">try</span><span class="s0">{</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">d</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">nodeIndexes</span><span class="s0">[</span><span class="s1">Symbol</span><span class="s0">.</span><span class="s1">iterator</span><span class="s0">](),</span><span class="s1">f</span><span class="s0">;!(</span><span class="s1">h</span><span class="s0">=(</span><span class="s1">f</span><span class="s0">=</span><span class="s1">d</span><span class="s0">.</span><span class="s1">next</span><span class="s0">()).</span><span class="s1">done</span><span class="s0">);</span><span class="s1">h</span><span class="s0">=</span><span class="s4">true</span><span class="s0">){</span><span class="s4">var </span><span class="s1">g</span><span class="s0">=</span><span class="s1">f</span><span class="s0">.</span><span class="s1">value</span><span class="s0">;</span><span class="s4">var </span><span class="s1">u</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s1">g</span><span class="s0">,</span><span class="s3">2</span><span class="s0">);</span><span class="s4">var </span><span class="s1">p</span><span class="s0">=</span><span class="s1">u</span><span class="s0">[</span><span class="s3">0</span><span class="s0">];</span><span class="s4">var </span><span class="s1">v</span><span class="s0">=</span><span class="s1">u</span><span class="s0">[</span><span class="s3">1</span><span class="s0">];</span><span class="s4">var </span><span class="s1">y</span><span class="s0">=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">cy</span><span class="s0">.</span><span class="s1">getElementById</span><span class="s0">(</span><span class="s1">p</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">y</span><span class="s0">){</span><span class="s4">var </span><span class="s1">m</span><span class="s0">=</span><span class="s1">y</span><span class="s0">.</span><span class="s1">boundingBox</span><span class="s0">();</span><span class="s4">var </span><span class="s1">E</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">xCoords</span><span class="s0">[</span><span class="s1">v</span><span class="s0">]-</span><span class="s1">m</span><span class="s0">.</span><span class="s1">w</span><span class="s0">/</span><span class="s3">2</span><span class="s0">;</span><span class="s4">var </span><span class="s1">N</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">xCoords</span><span class="s0">[</span><span class="s1">v</span><span class="s0">]+</span><span class="s1">m</span><span class="s0">.</span><span class="s1">w</span><span class="s0">/</span><span class="s3">2</span><span class="s0">;</span><span class="s4">var </span><span class="s1">T</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">yCoords</span><span class="s0">[</span><span class="s1">v</span><span class="s0">]-</span><span class="s1">m</span><span class="s0">.</span><span class="s1">h</span><span class="s0">/</span><span class="s3">2</span><span class="s0">;</span><span class="s4">var </span><span class="s1">A</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">yCoords</span><span class="s0">[</span><span class="s1">v</span><span class="s0">]+</span><span class="s1">m</span><span class="s0">.</span><span class="s1">h</span><span class="s0">/</span><span class="s3">2</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">E</span><span class="s0">&lt;</span><span class="s1">n</span><span class="s0">)</span><span class="s1">n</span><span class="s0">=</span><span class="s1">E</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">N</span><span class="s0">&gt;</span><span class="s1">o</span><span class="s0">)</span><span class="s1">o</span><span class="s0">=</span><span class="s1">N</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">T</span><span class="s0">&lt;</span><span class="s1">a</span><span class="s0">)</span><span class="s1">a</span><span class="s0">=</span><span class="s1">T</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">A</span><span class="s0">&gt;</span><span class="s1">s</span><span class="s0">)</span><span class="s1">s</span><span class="s0">=</span><span class="s1">A</span><span class="s0">}}}</span><span class="s4">catch</span><span class="s0">(</span><span class="s1">C</span><span class="s0">){</span><span class="s1">l</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s1">c</span><span class="s0">=</span><span class="s1">C</span><span class="s0">}</span><span class="s4">finally</span><span class="s0">{</span><span class="s4">try</span><span class="s0">{</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">h</span><span class="s0">&amp;&amp;</span><span class="s1">d</span><span class="s0">.</span><span class="s1">return</span><span class="s0">){</span><span class="s1">d</span><span class="s0">.</span><span class="s1">return</span><span class="s0">()}}</span><span class="s4">finally</span><span class="s0">{</span><span class="s4">if</span><span class="s0">(</span><span class="s1">l</span><span class="s0">){</span><span class="s4">throw </span><span class="s1">c</span><span class="s0">}}}</span><span class="s4">var </span><span class="s1">w</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">x</span><span class="s0">-(</span><span class="s1">o</span><span class="s0">+</span><span class="s1">n</span><span class="s0">)/</span><span class="s3">2</span><span class="s0">;</span><span class="s4">var </span><span class="s1">L</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">y</span><span class="s0">-(</span><span class="s1">s</span><span class="s0">+</span><span class="s1">a</span><span class="s0">)/</span><span class="s3">2</span><span class="s0">;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">xCoords</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">xCoords</span><span class="s0">.</span><span class="s1">map</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">return </span><span class="s1">t</span><span class="s0">+</span><span class="s1">w</span><span class="s0">}));</span><span class="s1">e</span><span class="s0">.</span><span class="s1">yCoords</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">yCoords</span><span class="s0">.</span><span class="s1">map</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">return </span><span class="s1">t</span><span class="s0">+</span><span class="s1">L</span><span class="s0">}))}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">keys</span><span class="s0">(</span><span class="s1">e</span><span class="s0">).</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">t</span><span class="s0">];</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">getRect</span><span class="s0">().</span><span class="s1">x</span><span class="s0">;</span><span class="s4">var </span><span class="s1">h</span><span class="s0">=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">getRect</span><span class="s0">().</span><span class="s1">x</span><span class="s0">+</span><span class="s1">r</span><span class="s0">.</span><span class="s1">getRect</span><span class="s0">().</span><span class="s1">width</span><span class="s0">;</span><span class="s4">var </span><span class="s1">l</span><span class="s0">=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">getRect</span><span class="s0">().</span><span class="s1">y</span><span class="s0">;</span><span class="s4">var </span><span class="s1">c</span><span class="s0">=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">getRect</span><span class="s0">().</span><span class="s1">y</span><span class="s0">+</span><span class="s1">r</span><span class="s0">.</span><span class="s1">getRect</span><span class="s0">().</span><span class="s1">height</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">i</span><span class="s0">&lt;</span><span class="s1">n</span><span class="s0">)</span><span class="s1">n</span><span class="s0">=</span><span class="s1">i</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">h</span><span class="s0">&gt;</span><span class="s1">o</span><span class="s0">)</span><span class="s1">o</span><span class="s0">=</span><span class="s1">h</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">l</span><span class="s0">&lt;</span><span class="s1">a</span><span class="s0">)</span><span class="s1">a</span><span class="s0">=</span><span class="s1">l</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">c</span><span class="s0">&gt;</span><span class="s1">s</span><span class="s0">)</span><span class="s1">s</span><span class="s0">=</span><span class="s1">c</span><span class="s0">}));</span><span class="s4">var </span><span class="s1">I</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">x</span><span class="s0">-(</span><span class="s1">o</span><span class="s0">+</span><span class="s1">n</span><span class="s0">)/</span><span class="s3">2</span><span class="s0">;</span><span class="s4">var </span><span class="s1">_</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">y</span><span class="s0">-(</span><span class="s1">s</span><span class="s0">+</span><span class="s1">a</span><span class="s0">)/</span><span class="s3">2</span><span class="s0">;</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">keys</span><span class="s0">(</span><span class="s1">e</span><span class="s0">).</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">t</span><span class="s0">];</span><span class="s1">r</span><span class="s0">.</span><span class="s1">setCenter</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">getCenterX</span><span class="s0">()+</span><span class="s1">I</span><span class="s0">,</span><span class="s1">r</span><span class="s0">.</span><span class="s1">getCenterY</span><span class="s0">()+</span><span class="s1">_</span><span class="s0">)}))}}};</span><span class="s1">o</span><span class="s0">.</span><span class="s1">calcBoundingBox</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">Number</span><span class="s0">.</span><span class="s1">MAX_SAFE_INTEGER</span><span class="s0">;</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s1">Number</span><span class="s0">.</span><span class="s1">MIN_SAFE_INTEGER</span><span class="s0">;</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s1">Number</span><span class="s0">.</span><span class="s1">MAX_SAFE_INTEGER</span><span class="s0">;</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s1">Number</span><span class="s0">.</span><span class="s1">MIN_SAFE_INTEGER</span><span class="s0">;</span><span class="s4">var </span><span class="s1">h</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">l</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">c</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">d</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">f</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">descendants</span><span class="s0">().</span><span class="s1">not</span><span class="s0">(</span><span class="s2">&quot;:parent&quot;</span><span class="s0">);</span><span class="s4">var </span><span class="s1">g</span><span class="s0">=</span><span class="s1">f</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">u</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">u</span><span class="s0">&lt;</span><span class="s1">g</span><span class="s0">;</span><span class="s1">u</span><span class="s0">++){</span><span class="s4">var </span><span class="s1">p</span><span class="s0">=</span><span class="s1">f</span><span class="s0">[</span><span class="s1">u</span><span class="s0">];</span><span class="s1">h</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">i</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">p</span><span class="s0">.</span><span class="s1">id</span><span class="s0">())]-</span><span class="s1">p</span><span class="s0">.</span><span class="s1">width</span><span class="s0">()/</span><span class="s3">2</span><span class="s0">;</span><span class="s1">l</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">i</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">p</span><span class="s0">.</span><span class="s1">id</span><span class="s0">())]+</span><span class="s1">p</span><span class="s0">.</span><span class="s1">width</span><span class="s0">()/</span><span class="s3">2</span><span class="s0">;</span><span class="s1">c</span><span class="s0">=</span><span class="s1">r</span><span class="s0">[</span><span class="s1">i</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">p</span><span class="s0">.</span><span class="s1">id</span><span class="s0">())]-</span><span class="s1">p</span><span class="s0">.</span><span class="s1">height</span><span class="s0">()/</span><span class="s3">2</span><span class="s0">;</span><span class="s1">d</span><span class="s0">=</span><span class="s1">r</span><span class="s0">[</span><span class="s1">i</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">p</span><span class="s0">.</span><span class="s1">id</span><span class="s0">())]+</span><span class="s1">p</span><span class="s0">.</span><span class="s1">height</span><span class="s0">()/</span><span class="s3">2</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">&gt;</span><span class="s1">h</span><span class="s0">){</span><span class="s1">n</span><span class="s0">=</span><span class="s1">h</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">o</span><span class="s0">&lt;</span><span class="s1">l</span><span class="s0">){</span><span class="s1">o</span><span class="s0">=</span><span class="s1">l</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">a</span><span class="s0">&gt;</span><span class="s1">c</span><span class="s0">){</span><span class="s1">a</span><span class="s0">=</span><span class="s1">c</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">s</span><span class="s0">&lt;</span><span class="s1">d</span><span class="s0">){</span><span class="s1">s</span><span class="s0">=</span><span class="s1">d</span><span class="s0">}}</span><span class="s4">var </span><span class="s1">v</span><span class="s0">={};</span><span class="s1">v</span><span class="s0">.</span><span class="s1">topLeftX</span><span class="s0">=</span><span class="s1">n</span><span class="s0">;</span><span class="s1">v</span><span class="s0">.</span><span class="s1">topLeftY</span><span class="s0">=</span><span class="s1">a</span><span class="s0">;</span><span class="s1">v</span><span class="s0">.</span><span class="s1">width</span><span class="s0">=</span><span class="s1">o</span><span class="s0">-</span><span class="s1">n</span><span class="s0">;</span><span class="s1">v</span><span class="s0">.</span><span class="s1">height</span><span class="s0">=</span><span class="s1">s</span><span class="s0">-</span><span class="s1">a</span><span class="s0">;</span><span class="s4">return </span><span class="s1">v</span><span class="s0">};</span><span class="s1">o</span><span class="s0">.</span><span class="s1">calcParentsWithoutChildren</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">collection</span><span class="s0">();</span><span class="s1">e</span><span class="s0">.</span><span class="s1">nodes</span><span class="s0">(</span><span class="s2">&quot;:parent&quot;</span><span class="s0">).</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s4">false</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">children</span><span class="s0">().</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">css</span><span class="s0">(</span><span class="s2">&quot;display&quot;</span><span class="s0">)!=</span><span class="s2">&quot;none&quot;</span><span class="s0">){</span><span class="s1">e</span><span class="s0">=</span><span class="s4">true</span><span class="s0">}}));</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">e</span><span class="s0">){</span><span class="s1">r</span><span class="s0">.</span><span class="s1">merge</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)}}));</span><span class="s4">return </span><span class="s1">r</span><span class="s0">};</span><span class="s1">t</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">=</span><span class="s1">o</span><span class="s0">},</span><span class="s3">816</span><span class="s0">:(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">)=&gt;{</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">548</span><span class="s0">);</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">140</span><span class="s0">).</span><span class="s1">CoSELayout</span><span class="s0">;</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">140</span><span class="s0">).</span><span class="s1">CoSENode</span><span class="s0">;</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">140</span><span class="s0">).</span><span class="s1">layoutBase</span><span class="s0">.</span><span class="s1">PointD</span><span class="s0">;</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">140</span><span class="s0">).</span><span class="s1">layoutBase</span><span class="s0">.</span><span class="s1">DimensionD</span><span class="s0">;</span><span class="s4">var </span><span class="s1">h</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">140</span><span class="s0">).</span><span class="s1">layoutBase</span><span class="s0">.</span><span class="s1">LayoutConstants</span><span class="s0">;</span><span class="s4">var </span><span class="s1">l</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">140</span><span class="s0">).</span><span class="s1">layoutBase</span><span class="s0">.</span><span class="s1">FDLayoutConstants</span><span class="s0">;</span><span class="s4">var </span><span class="s1">c</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">140</span><span class="s0">).</span><span class="s1">CoSEConstants</span><span class="s0">;</span><span class="s4">var </span><span class="s1">d</span><span class="s0">=</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s4">var </span><span class="s1">d</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">cy</span><span class="s0">;</span><span class="s4">var </span><span class="s1">f</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">eles</span><span class="s0">;</span><span class="s4">var </span><span class="s1">g</span><span class="s0">=</span><span class="s1">f</span><span class="s0">.</span><span class="s1">nodes</span><span class="s0">();</span><span class="s4">var </span><span class="s1">u</span><span class="s0">=</span><span class="s1">f</span><span class="s0">.</span><span class="s1">edges</span><span class="s0">();</span><span class="s4">var </span><span class="s1">p</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">v</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">y</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">m</span><span class="s0">={};</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">randomize</span><span class="s0">){</span><span class="s1">p</span><span class="s0">=</span><span class="s1">r</span><span class="s0">[</span><span class="s2">&quot;nodeIndexes&quot;</span><span class="s0">];</span><span class="s1">v</span><span class="s0">=</span><span class="s1">r</span><span class="s0">[</span><span class="s2">&quot;xCoords&quot;</span><span class="s0">];</span><span class="s1">y</span><span class="s0">=</span><span class="s1">r</span><span class="s0">[</span><span class="s2">&quot;yCoords&quot;</span><span class="s0">]}</span><span class="s4">var </span><span class="s1">E</span><span class="s0">=</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">return typeof </span><span class="s1">e</span><span class="s0">===</span><span class="s2">&quot;function&quot;</span><span class="s0">};</span><span class="s4">var </span><span class="s1">N</span><span class="s0">=</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">E</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)){</span><span class="s4">return </span><span class="s1">e</span><span class="s0">(</span><span class="s1">r</span><span class="s0">)}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">return </span><span class="s1">e</span><span class="s0">}};</span><span class="s4">var </span><span class="s1">T</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">calcParentsWithoutChildren</span><span class="s0">(</span><span class="s1">d</span><span class="s0">,</span><span class="s1">f</span><span class="s0">);</span><span class="s4">var </span><span class="s1">A</span><span class="s0">=</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">h</span><span class="s0">){</span><span class="s4">var </span><span class="s1">l</span><span class="s0">=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">c</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">c</span><span class="s0">&lt;</span><span class="s1">l</span><span class="s0">;</span><span class="s1">c</span><span class="s0">++){</span><span class="s4">var </span><span class="s1">d</span><span class="s0">=</span><span class="s1">r</span><span class="s0">[</span><span class="s1">c</span><span class="s0">];</span><span class="s4">var </span><span class="s1">f</span><span class="s0">=</span><span class="s4">null</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">d</span><span class="s0">.</span><span class="s1">intersection</span><span class="s0">(</span><span class="s1">T</span><span class="s0">).</span><span class="s1">length</span><span class="s0">==</span><span class="s3">0</span><span class="s0">){</span><span class="s1">f</span><span class="s0">=</span><span class="s1">d</span><span class="s0">.</span><span class="s1">children</span><span class="s0">()}</span><span class="s4">var </span><span class="s1">g</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">u</span><span class="s0">=</span><span class="s1">d</span><span class="s0">.</span><span class="s1">layoutDimensions</span><span class="s0">({</span><span class="s1">nodeDimensionsIncludeLabels</span><span class="s0">:</span><span class="s1">h</span><span class="s0">.</span><span class="s1">nodeDimensionsIncludeLabels</span><span class="s0">});</span><span class="s4">if</span><span class="s0">(</span><span class="s1">d</span><span class="s0">.</span><span class="s1">outerWidth</span><span class="s0">()!=</span><span class="s4">null</span><span class="s0">&amp;&amp;</span><span class="s1">d</span><span class="s0">.</span><span class="s1">outerHeight</span><span class="s0">()!=</span><span class="s4">null</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">h</span><span class="s0">.</span><span class="s1">randomize</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">d</span><span class="s0">.</span><span class="s1">isParent</span><span class="s0">()){</span><span class="s1">g</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">add</span><span class="s0">(</span><span class="s4">new </span><span class="s1">o</span><span class="s0">(</span><span class="s1">n</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">,</span><span class="s4">new </span><span class="s1">a</span><span class="s0">(</span><span class="s1">v</span><span class="s0">[</span><span class="s1">p</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">d</span><span class="s0">.</span><span class="s1">id</span><span class="s0">())]-</span><span class="s1">u</span><span class="s0">.</span><span class="s1">w</span><span class="s0">/</span><span class="s3">2</span><span class="s0">,</span><span class="s1">y</span><span class="s0">[</span><span class="s1">p</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">d</span><span class="s0">.</span><span class="s1">id</span><span class="s0">())]-</span><span class="s1">u</span><span class="s0">.</span><span class="s1">h</span><span class="s0">/</span><span class="s3">2</span><span class="s0">),</span><span class="s4">new </span><span class="s1">s</span><span class="s0">(</span><span class="s1">parseFloat</span><span class="s0">(</span><span class="s1">u</span><span class="s0">.</span><span class="s1">w</span><span class="s0">),</span><span class="s1">parseFloat</span><span class="s0">(</span><span class="s1">u</span><span class="s0">.</span><span class="s1">h</span><span class="s0">))))}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">var </span><span class="s1">E</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">calcBoundingBox</span><span class="s0">(</span><span class="s1">d</span><span class="s0">,</span><span class="s1">v</span><span class="s0">,</span><span class="s1">y</span><span class="s0">,</span><span class="s1">p</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">d</span><span class="s0">.</span><span class="s1">intersection</span><span class="s0">(</span><span class="s1">T</span><span class="s0">).</span><span class="s1">length</span><span class="s0">==</span><span class="s3">0</span><span class="s0">){</span><span class="s1">g</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">add</span><span class="s0">(</span><span class="s4">new </span><span class="s1">o</span><span class="s0">(</span><span class="s1">n</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">,</span><span class="s4">new </span><span class="s1">a</span><span class="s0">(</span><span class="s1">E</span><span class="s0">.</span><span class="s1">topLeftX</span><span class="s0">,</span><span class="s1">E</span><span class="s0">.</span><span class="s1">topLeftY</span><span class="s0">),</span><span class="s4">new </span><span class="s1">s</span><span class="s0">(</span><span class="s1">E</span><span class="s0">.</span><span class="s1">width</span><span class="s0">,</span><span class="s1">E</span><span class="s0">.</span><span class="s1">height</span><span class="s0">)))}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">g</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">add</span><span class="s0">(</span><span class="s4">new </span><span class="s1">o</span><span class="s0">(</span><span class="s1">n</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">,</span><span class="s4">new </span><span class="s1">a</span><span class="s0">(</span><span class="s1">E</span><span class="s0">.</span><span class="s1">topLeftX</span><span class="s0">,</span><span class="s1">E</span><span class="s0">.</span><span class="s1">topLeftY</span><span class="s0">),</span><span class="s4">new </span><span class="s1">s</span><span class="s0">(</span><span class="s1">parseFloat</span><span class="s0">(</span><span class="s1">u</span><span class="s0">.</span><span class="s1">w</span><span class="s0">),</span><span class="s1">parseFloat</span><span class="s0">(</span><span class="s1">u</span><span class="s0">.</span><span class="s1">h</span><span class="s0">))))}}}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">g</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">add</span><span class="s0">(</span><span class="s4">new </span><span class="s1">o</span><span class="s0">(</span><span class="s1">n</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">,</span><span class="s4">new </span><span class="s1">a</span><span class="s0">(</span><span class="s1">d</span><span class="s0">.</span><span class="s1">position</span><span class="s0">(</span><span class="s2">&quot;x&quot;</span><span class="s0">)-</span><span class="s1">u</span><span class="s0">.</span><span class="s1">w</span><span class="s0">/</span><span class="s3">2</span><span class="s0">,</span><span class="s1">d</span><span class="s0">.</span><span class="s1">position</span><span class="s0">(</span><span class="s2">&quot;y&quot;</span><span class="s0">)-</span><span class="s1">u</span><span class="s0">.</span><span class="s1">h</span><span class="s0">/</span><span class="s3">2</span><span class="s0">),</span><span class="s4">new </span><span class="s1">s</span><span class="s0">(</span><span class="s1">parseFloat</span><span class="s0">(</span><span class="s1">u</span><span class="s0">.</span><span class="s1">w</span><span class="s0">),</span><span class="s1">parseFloat</span><span class="s0">(</span><span class="s1">u</span><span class="s0">.</span><span class="s1">h</span><span class="s0">))))}}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">g</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">add</span><span class="s0">(</span><span class="s4">new </span><span class="s1">o</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">))}</span><span class="s1">g</span><span class="s0">.</span><span class="s1">id</span><span class="s0">=</span><span class="s1">d</span><span class="s0">.</span><span class="s1">data</span><span class="s0">(</span><span class="s2">&quot;id&quot;</span><span class="s0">);</span><span class="s1">g</span><span class="s0">.</span><span class="s1">nodeRepulsion</span><span class="s0">=</span><span class="s1">N</span><span class="s0">(</span><span class="s1">h</span><span class="s0">.</span><span class="s1">nodeRepulsion</span><span class="s0">,</span><span class="s1">d</span><span class="s0">);</span><span class="s1">g</span><span class="s0">.</span><span class="s1">paddingLeft</span><span class="s0">=</span><span class="s1">parseInt</span><span class="s0">(</span><span class="s1">d</span><span class="s0">.</span><span class="s1">css</span><span class="s0">(</span><span class="s2">&quot;padding&quot;</span><span class="s0">));</span><span class="s1">g</span><span class="s0">.</span><span class="s1">paddingTop</span><span class="s0">=</span><span class="s1">parseInt</span><span class="s0">(</span><span class="s1">d</span><span class="s0">.</span><span class="s1">css</span><span class="s0">(</span><span class="s2">&quot;padding&quot;</span><span class="s0">));</span><span class="s1">g</span><span class="s0">.</span><span class="s1">paddingRight</span><span class="s0">=</span><span class="s1">parseInt</span><span class="s0">(</span><span class="s1">d</span><span class="s0">.</span><span class="s1">css</span><span class="s0">(</span><span class="s2">&quot;padding&quot;</span><span class="s0">));</span><span class="s1">g</span><span class="s0">.</span><span class="s1">paddingBottom</span><span class="s0">=</span><span class="s1">parseInt</span><span class="s0">(</span><span class="s1">d</span><span class="s0">.</span><span class="s1">css</span><span class="s0">(</span><span class="s2">&quot;padding&quot;</span><span class="s0">));</span><span class="s4">if</span><span class="s0">(</span><span class="s1">h</span><span class="s0">.</span><span class="s1">nodeDimensionsIncludeLabels</span><span class="s0">){</span><span class="s1">g</span><span class="s0">.</span><span class="s1">labelWidth</span><span class="s0">=</span><span class="s1">d</span><span class="s0">.</span><span class="s1">boundingBox</span><span class="s0">({</span><span class="s1">includeLabels</span><span class="s0">:</span><span class="s4">true</span><span class="s0">,</span><span class="s1">includeNodes</span><span class="s0">:</span><span class="s4">false</span><span class="s0">,</span><span class="s1">includeOverlays</span><span class="s0">:</span><span class="s4">false</span><span class="s0">}).</span><span class="s1">w</span><span class="s0">;</span><span class="s1">g</span><span class="s0">.</span><span class="s1">labelHeight</span><span class="s0">=</span><span class="s1">d</span><span class="s0">.</span><span class="s1">boundingBox</span><span class="s0">({</span><span class="s1">includeLabels</span><span class="s0">:</span><span class="s4">true</span><span class="s0">,</span><span class="s1">includeNodes</span><span class="s0">:</span><span class="s4">false</span><span class="s0">,</span><span class="s1">includeOverlays</span><span class="s0">:</span><span class="s4">false</span><span class="s0">}).</span><span class="s1">h</span><span class="s0">;</span><span class="s1">g</span><span class="s0">.</span><span class="s1">labelPosVertical</span><span class="s0">=</span><span class="s1">d</span><span class="s0">.</span><span class="s1">css</span><span class="s0">(</span><span class="s2">&quot;text-valign&quot;</span><span class="s0">);</span><span class="s1">g</span><span class="s0">.</span><span class="s1">labelPosHorizontal</span><span class="s0">=</span><span class="s1">d</span><span class="s0">.</span><span class="s1">css</span><span class="s0">(</span><span class="s2">&quot;text-halign&quot;</span><span class="s0">)}</span><span class="s1">m</span><span class="s0">[</span><span class="s1">d</span><span class="s0">.</span><span class="s1">data</span><span class="s0">(</span><span class="s2">&quot;id&quot;</span><span class="s0">)]=</span><span class="s1">g</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">isNaN</span><span class="s0">(</span><span class="s1">g</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">x</span><span class="s0">)){</span><span class="s1">g</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">x</span><span class="s0">=</span><span class="s3">0</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">isNaN</span><span class="s0">(</span><span class="s1">g</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">y</span><span class="s0">)){</span><span class="s1">g</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">y</span><span class="s0">=</span><span class="s3">0</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">f</span><span class="s0">!=</span><span class="s4">null</span><span class="s0">&amp;&amp;</span><span class="s1">f</span><span class="s0">.</span><span class="s1">length</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">){</span><span class="s4">var </span><span class="s1">A</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s1">A</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">getGraphManager</span><span class="s0">().</span><span class="s1">add</span><span class="s0">(</span><span class="s1">n</span><span class="s0">.</span><span class="s1">newGraph</span><span class="s0">(),</span><span class="s1">g</span><span class="s0">);</span><span class="s1">t</span><span class="s0">(</span><span class="s1">A</span><span class="s0">,</span><span class="s1">f</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">h</span><span class="s0">)}}};</span><span class="s4">var </span><span class="s1">w</span><span class="s0">=</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">r</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">n</span><span class="s0">){</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">s</span><span class="s0">&lt;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">s</span><span class="s0">++){</span><span class="s4">var </span><span class="s1">h</span><span class="s0">=</span><span class="s1">n</span><span class="s0">[</span><span class="s1">s</span><span class="s0">];</span><span class="s4">var </span><span class="s1">d</span><span class="s0">=</span><span class="s1">m</span><span class="s0">[</span><span class="s1">h</span><span class="s0">.</span><span class="s1">data</span><span class="s0">(</span><span class="s2">&quot;source&quot;</span><span class="s0">)];</span><span class="s4">var </span><span class="s1">f</span><span class="s0">=</span><span class="s1">m</span><span class="s0">[</span><span class="s1">h</span><span class="s0">.</span><span class="s1">data</span><span class="s0">(</span><span class="s2">&quot;target&quot;</span><span class="s0">)];</span><span class="s4">if</span><span class="s0">(</span><span class="s1">d</span><span class="s0">&amp;&amp;</span><span class="s1">f</span><span class="s0">&amp;&amp;</span><span class="s1">d</span><span class="s0">!==</span><span class="s1">f</span><span class="s0">&amp;&amp;</span><span class="s1">d</span><span class="s0">.</span><span class="s1">getEdgesBetween</span><span class="s0">(</span><span class="s1">f</span><span class="s0">).</span><span class="s1">length</span><span class="s0">==</span><span class="s3">0</span><span class="s0">){</span><span class="s4">var </span><span class="s1">g</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">add</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">newEdge</span><span class="s0">(),</span><span class="s1">d</span><span class="s0">,</span><span class="s1">f</span><span class="s0">);</span><span class="s1">g</span><span class="s0">.</span><span class="s1">id</span><span class="s0">=</span><span class="s1">h</span><span class="s0">.</span><span class="s1">id</span><span class="s0">();</span><span class="s1">g</span><span class="s0">.</span><span class="s1">idealLength</span><span class="s0">=</span><span class="s1">N</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">idealEdgeLength</span><span class="s0">,</span><span class="s1">h</span><span class="s0">);</span><span class="s1">g</span><span class="s0">.</span><span class="s1">edgeElasticity</span><span class="s0">=</span><span class="s1">N</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">edgeElasticity</span><span class="s0">,</span><span class="s1">h</span><span class="s0">);</span><span class="s1">o</span><span class="s0">+=</span><span class="s1">g</span><span class="s0">.</span><span class="s1">idealLength</span><span class="s0">;</span><span class="s1">a</span><span class="s0">++}}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">idealEdgeLength</span><span class="s0">!=</span><span class="s4">null</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">a</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">)</span><span class="s1">c</span><span class="s0">.</span><span class="s1">DEFAULT_EDGE_LENGTH</span><span class="s0">=</span><span class="s1">l</span><span class="s0">.</span><span class="s1">DEFAULT_EDGE_LENGTH</span><span class="s0">=</span><span class="s1">o</span><span class="s0">/</span><span class="s1">a</span><span class="s0">;</span><span class="s4">else if</span><span class="s0">(!</span><span class="s1">E</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">idealEdgeLength</span><span class="s0">))</span><span class="s1">c</span><span class="s0">.</span><span class="s1">DEFAULT_EDGE_LENGTH</span><span class="s0">=</span><span class="s1">l</span><span class="s0">.</span><span class="s1">DEFAULT_EDGE_LENGTH</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">idealEdgeLength</span><span class="s0">;</span><span class="s4">else </span><span class="s1">c</span><span class="s0">.</span><span class="s1">DEFAULT_EDGE_LENGTH</span><span class="s0">=</span><span class="s1">l</span><span class="s0">.</span><span class="s1">DEFAULT_EDGE_LENGTH</span><span class="s0">=</span><span class="s3">50</span><span class="s0">;</span><span class="s1">c</span><span class="s0">.</span><span class="s1">MIN_REPULSION_DIST</span><span class="s0">=</span><span class="s1">l</span><span class="s0">.</span><span class="s1">MIN_REPULSION_DIST</span><span class="s0">=</span><span class="s1">l</span><span class="s0">.</span><span class="s1">DEFAULT_EDGE_LENGTH</span><span class="s0">/</span><span class="s3">10</span><span class="s0">;</span><span class="s1">c</span><span class="s0">.</span><span class="s1">DEFAULT_RADIAL_SEPARATION</span><span class="s0">=</span><span class="s1">l</span><span class="s0">.</span><span class="s1">DEFAULT_EDGE_LENGTH</span><span class="s0">}};</span><span class="s4">var </span><span class="s1">L</span><span class="s0">=</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">fixedNodeConstraint</span><span class="s0">){</span><span class="s1">e</span><span class="s0">.</span><span class="s1">constraints</span><span class="s0">[</span><span class="s2">&quot;fixedNodeConstraint&quot;</span><span class="s0">]=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">fixedNodeConstraint</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">alignmentConstraint</span><span class="s0">){</span><span class="s1">e</span><span class="s0">.</span><span class="s1">constraints</span><span class="s0">[</span><span class="s2">&quot;alignmentConstraint&quot;</span><span class="s0">]=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">alignmentConstraint</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">relativePlacementConstraint</span><span class="s0">){</span><span class="s1">e</span><span class="s0">.</span><span class="s1">constraints</span><span class="s0">[</span><span class="s2">&quot;relativePlacementConstraint&quot;</span><span class="s0">]=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">relativePlacementConstraint</span><span class="s0">}};</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">nestingFactor</span><span class="s0">!=</span><span class="s4">null</span><span class="s0">)</span><span class="s1">c</span><span class="s0">.</span><span class="s1">PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR</span><span class="s0">=</span><span class="s1">l</span><span class="s0">.</span><span class="s1">PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">nestingFactor</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">gravity</span><span class="s0">!=</span><span class="s4">null</span><span class="s0">)</span><span class="s1">c</span><span class="s0">.</span><span class="s1">DEFAULT_GRAVITY_STRENGTH</span><span class="s0">=</span><span class="s1">l</span><span class="s0">.</span><span class="s1">DEFAULT_GRAVITY_STRENGTH</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">gravity</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">numIter</span><span class="s0">!=</span><span class="s4">null</span><span class="s0">)</span><span class="s1">c</span><span class="s0">.</span><span class="s1">MAX_ITERATIONS</span><span class="s0">=</span><span class="s1">l</span><span class="s0">.</span><span class="s1">MAX_ITERATIONS</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">numIter</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">gravityRange</span><span class="s0">!=</span><span class="s4">null</span><span class="s0">)</span><span class="s1">c</span><span class="s0">.</span><span class="s1">DEFAULT_GRAVITY_RANGE_FACTOR</span><span class="s0">=</span><span class="s1">l</span><span class="s0">.</span><span class="s1">DEFAULT_GRAVITY_RANGE_FACTOR</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">gravityRange</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">gravityCompound</span><span class="s0">!=</span><span class="s4">null</span><span class="s0">)</span><span class="s1">c</span><span class="s0">.</span><span class="s1">DEFAULT_COMPOUND_GRAVITY_STRENGTH</span><span class="s0">=</span><span class="s1">l</span><span class="s0">.</span><span class="s1">DEFAULT_COMPOUND_GRAVITY_STRENGTH</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">gravityCompound</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">gravityRangeCompound</span><span class="s0">!=</span><span class="s4">null</span><span class="s0">)</span><span class="s1">c</span><span class="s0">.</span><span class="s1">DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR</span><span class="s0">=</span><span class="s1">l</span><span class="s0">.</span><span class="s1">DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">gravityRangeCompound</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">initialEnergyOnIncremental</span><span class="s0">!=</span><span class="s4">null</span><span class="s0">)</span><span class="s1">c</span><span class="s0">.</span><span class="s1">DEFAULT_COOLING_FACTOR_INCREMENTAL</span><span class="s0">=</span><span class="s1">l</span><span class="s0">.</span><span class="s1">DEFAULT_COOLING_FACTOR_INCREMENTAL</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">initialEnergyOnIncremental</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">tilingCompareBy</span><span class="s0">!=</span><span class="s4">null</span><span class="s0">)</span><span class="s1">c</span><span class="s0">.</span><span class="s1">TILING_COMPARE_BY</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">tilingCompareBy</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">quality</span><span class="s0">==</span><span class="s2">&quot;proof&quot;</span><span class="s0">)</span><span class="s1">h</span><span class="s0">.</span><span class="s1">QUALITY</span><span class="s0">=</span><span class="s3">2</span><span class="s0">;</span><span class="s4">else </span><span class="s1">h</span><span class="s0">.</span><span class="s1">QUALITY</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">c</span><span class="s0">.</span><span class="s1">NODE_DIMENSIONS_INCLUDE_LABELS</span><span class="s0">=</span><span class="s1">l</span><span class="s0">.</span><span class="s1">NODE_DIMENSIONS_INCLUDE_LABELS</span><span class="s0">=</span><span class="s1">h</span><span class="s0">.</span><span class="s1">NODE_DIMENSIONS_INCLUDE_LABELS</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">nodeDimensionsIncludeLabels</span><span class="s0">;</span><span class="s1">c</span><span class="s0">.</span><span class="s1">DEFAULT_INCREMENTAL</span><span class="s0">=</span><span class="s1">l</span><span class="s0">.</span><span class="s1">DEFAULT_INCREMENTAL</span><span class="s0">=</span><span class="s1">h</span><span class="s0">.</span><span class="s1">DEFAULT_INCREMENTAL</span><span class="s0">=!</span><span class="s1">e</span><span class="s0">.</span><span class="s1">randomize</span><span class="s0">;</span><span class="s1">c</span><span class="s0">.</span><span class="s1">ANIMATE</span><span class="s0">=</span><span class="s1">l</span><span class="s0">.</span><span class="s1">ANIMATE</span><span class="s0">=</span><span class="s1">h</span><span class="s0">.</span><span class="s1">ANIMATE</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">animate</span><span class="s0">;</span><span class="s1">c</span><span class="s0">.</span><span class="s1">TILE</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">tile</span><span class="s0">;</span><span class="s1">c</span><span class="s0">.</span><span class="s1">TILING_PADDING_VERTICAL</span><span class="s0">=</span><span class="s4">typeof </span><span class="s1">e</span><span class="s0">.</span><span class="s1">tilingPaddingVertical</span><span class="s0">===</span><span class="s2">&quot;function&quot;</span><span class="s0">?</span><span class="s1">e</span><span class="s0">.</span><span class="s1">tilingPaddingVertical</span><span class="s0">.</span><span class="s1">call</span><span class="s0">():</span><span class="s1">e</span><span class="s0">.</span><span class="s1">tilingPaddingVertical</span><span class="s0">;</span><span class="s1">c</span><span class="s0">.</span><span class="s1">TILING_PADDING_HORIZONTAL</span><span class="s0">=</span><span class="s4">typeof </span><span class="s1">e</span><span class="s0">.</span><span class="s1">tilingPaddingHorizontal</span><span class="s0">===</span><span class="s2">&quot;function&quot;</span><span class="s0">?</span><span class="s1">e</span><span class="s0">.</span><span class="s1">tilingPaddingHorizontal</span><span class="s0">.</span><span class="s1">call</span><span class="s0">():</span><span class="s1">e</span><span class="s0">.</span><span class="s1">tilingPaddingHorizontal</span><span class="s0">;</span><span class="s1">c</span><span class="s0">.</span><span class="s1">DEFAULT_INCREMENTAL</span><span class="s0">=</span><span class="s1">l</span><span class="s0">.</span><span class="s1">DEFAULT_INCREMENTAL</span><span class="s0">=</span><span class="s1">h</span><span class="s0">.</span><span class="s1">DEFAULT_INCREMENTAL</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s1">c</span><span class="s0">.</span><span class="s1">PURE_INCREMENTAL</span><span class="s0">=!</span><span class="s1">e</span><span class="s0">.</span><span class="s1">randomize</span><span class="s0">;</span><span class="s1">h</span><span class="s0">.</span><span class="s1">DEFAULT_UNIFORM_LEAF_NODE_SIZES</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">uniformNodeDimensions</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">step</span><span class="s0">==</span><span class="s2">&quot;transformed&quot;</span><span class="s0">){</span><span class="s1">c</span><span class="s0">.</span><span class="s1">TRANSFORM_ON_CONSTRAINT_HANDLING</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s1">c</span><span class="s0">.</span><span class="s1">ENFORCE_CONSTRAINTS</span><span class="s0">=</span><span class="s4">false</span><span class="s0">;</span><span class="s1">c</span><span class="s0">.</span><span class="s1">APPLY_LAYOUT</span><span class="s0">=</span><span class="s4">false</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">step</span><span class="s0">==</span><span class="s2">&quot;enforced&quot;</span><span class="s0">){</span><span class="s1">c</span><span class="s0">.</span><span class="s1">TRANSFORM_ON_CONSTRAINT_HANDLING</span><span class="s0">=</span><span class="s4">false</span><span class="s0">;</span><span class="s1">c</span><span class="s0">.</span><span class="s1">ENFORCE_CONSTRAINTS</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s1">c</span><span class="s0">.</span><span class="s1">APPLY_LAYOUT</span><span class="s0">=</span><span class="s4">false</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">step</span><span class="s0">==</span><span class="s2">&quot;cose&quot;</span><span class="s0">){</span><span class="s1">c</span><span class="s0">.</span><span class="s1">TRANSFORM_ON_CONSTRAINT_HANDLING</span><span class="s0">=</span><span class="s4">false</span><span class="s0">;</span><span class="s1">c</span><span class="s0">.</span><span class="s1">ENFORCE_CONSTRAINTS</span><span class="s0">=</span><span class="s4">false</span><span class="s0">;</span><span class="s1">c</span><span class="s0">.</span><span class="s1">APPLY_LAYOUT</span><span class="s0">=</span><span class="s4">true</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">step</span><span class="s0">==</span><span class="s2">&quot;all&quot;</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">randomize</span><span class="s0">)</span><span class="s1">c</span><span class="s0">.</span><span class="s1">TRANSFORM_ON_CONSTRAINT_HANDLING</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s4">else </span><span class="s1">c</span><span class="s0">.</span><span class="s1">TRANSFORM_ON_CONSTRAINT_HANDLING</span><span class="s0">=</span><span class="s4">false</span><span class="s0">;</span><span class="s1">c</span><span class="s0">.</span><span class="s1">ENFORCE_CONSTRAINTS</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s1">c</span><span class="s0">.</span><span class="s1">APPLY_LAYOUT</span><span class="s0">=</span><span class="s4">true</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">fixedNodeConstraint</span><span class="s0">||</span><span class="s1">e</span><span class="s0">.</span><span class="s1">alignmentConstraint</span><span class="s0">||</span><span class="s1">e</span><span class="s0">.</span><span class="s1">relativePlacementConstraint</span><span class="s0">){</span><span class="s1">c</span><span class="s0">.</span><span class="s1">TREE_REDUCTION_ON_INCREMENTAL</span><span class="s0">=</span><span class="s4">false</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">c</span><span class="s0">.</span><span class="s1">TREE_REDUCTION_ON_INCREMENTAL</span><span class="s0">=</span><span class="s4">true</span><span class="s0">}</span><span class="s4">var </span><span class="s1">t</span><span class="s0">=</span><span class="s4">new </span><span class="s1">n</span><span class="s0">;</span><span class="s4">var </span><span class="s1">I</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">newGraphManager</span><span class="s0">();</span><span class="s1">A</span><span class="s0">(</span><span class="s1">I</span><span class="s0">.</span><span class="s1">addRoot</span><span class="s0">(),</span><span class="s1">i</span><span class="s0">.</span><span class="s1">getTopMostNodes</span><span class="s0">(</span><span class="s1">g</span><span class="s0">),</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">);</span><span class="s1">w</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">I</span><span class="s0">,</span><span class="s1">u</span><span class="s0">);</span><span class="s1">L</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">);</span><span class="s1">t</span><span class="s0">.</span><span class="s1">runLayout</span><span class="s0">();</span><span class="s4">return </span><span class="s1">m</span><span class="s0">};</span><span class="s1">t</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">={</span><span class="s1">coseLayout</span><span class="s0">:</span><span class="s1">d</span><span class="s0">}},</span><span class="s3">212</span><span class="s0">:(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">)=&gt;{</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">r</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">r</span><span class="s0">++){</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">r</span><span class="s0">];</span><span class="s1">i</span><span class="s0">.</span><span class="s1">enumerable</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">enumerable</span><span class="s0">||</span><span class="s4">false</span><span class="s0">;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">configurable</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s2">&quot;value&quot;</span><span class="s4">in </span><span class="s1">i</span><span class="s0">)</span><span class="s1">i</span><span class="s0">.</span><span class="s1">writable</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">.</span><span class="s1">key</span><span class="s0">,</span><span class="s1">i</span><span class="s0">)}}</span><span class="s4">return function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">)</span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">,</span><span class="s1">r</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">i</span><span class="s0">)</span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">i</span><span class="s0">);</span><span class="s4">return </span><span class="s1">e</span><span class="s0">}}();</span><span class="s4">function </span><span class="s1">n</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(!(</span><span class="s1">t </span><span class="s4">instanceof </span><span class="s1">e</span><span class="s0">)){</span><span class="s4">throw new </span><span class="s1">TypeError</span><span class="s0">(</span><span class="s2">&quot;Cannot call a class as a function&quot;</span><span class="s0">)}}</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">658</span><span class="s0">);</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">548</span><span class="s0">);</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">657</span><span class="s0">),</span><span class="s1">h</span><span class="s0">=</span><span class="s1">s</span><span class="s0">.</span><span class="s1">spectralLayout</span><span class="s0">;</span><span class="s4">var </span><span class="s1">l</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">816</span><span class="s0">),</span><span class="s1">c</span><span class="s0">=</span><span class="s1">l</span><span class="s0">.</span><span class="s1">coseLayout</span><span class="s0">;</span><span class="s4">var </span><span class="s1">d</span><span class="s0">=</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">freeze</span><span class="s0">({</span><span class="s1">quality</span><span class="s0">:</span><span class="s2">&quot;default&quot;</span><span class="s0">,</span><span class="s1">randomize</span><span class="s0">:</span><span class="s4">true</span><span class="s0">,</span><span class="s1">animate</span><span class="s0">:</span><span class="s4">true</span><span class="s0">,</span><span class="s1">animationDuration</span><span class="s0">:</span><span class="s3">1e3</span><span class="s0">,</span><span class="s1">animationEasing</span><span class="s0">:</span><span class="s1">undefined</span><span class="s0">,</span><span class="s1">fit</span><span class="s0">:</span><span class="s4">true</span><span class="s0">,</span><span class="s1">padding</span><span class="s0">:</span><span class="s3">30</span><span class="s0">,</span><span class="s1">nodeDimensionsIncludeLabels</span><span class="s0">:</span><span class="s4">false</span><span class="s0">,</span><span class="s1">uniformNodeDimensions</span><span class="s0">:</span><span class="s4">false</span><span class="s0">,</span><span class="s1">packComponents</span><span class="s0">:</span><span class="s4">true</span><span class="s0">,</span><span class="s1">step</span><span class="s0">:</span><span class="s2">&quot;all&quot;</span><span class="s0">,</span><span class="s1">samplingType</span><span class="s0">:</span><span class="s4">true</span><span class="s0">,</span><span class="s1">sampleSize</span><span class="s0">:</span><span class="s3">25</span><span class="s0">,</span><span class="s1">nodeSeparation</span><span class="s0">:</span><span class="s3">75</span><span class="s0">,</span><span class="s1">piTol</span><span class="s0">:</span><span class="s3">1e-7</span><span class="s0">,</span><span class="s1">nodeRepulsion</span><span class="s0">:</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">return </span><span class="s3">4500</span><span class="s0">},</span><span class="s1">idealEdgeLength</span><span class="s0">:</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">return </span><span class="s3">50</span><span class="s0">},</span><span class="s1">edgeElasticity</span><span class="s0">:</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">return</span><span class="s3">.45</span><span class="s0">},</span><span class="s1">nestingFactor</span><span class="s0">:</span><span class="s3">.1</span><span class="s0">,</span><span class="s1">gravity</span><span class="s0">:</span><span class="s3">.25</span><span class="s0">,</span><span class="s1">numIter</span><span class="s0">:</span><span class="s3">2500</span><span class="s0">,</span><span class="s1">tile</span><span class="s0">:</span><span class="s4">true</span><span class="s0">,</span><span class="s1">tilingCompareBy</span><span class="s0">:</span><span class="s1">undefined</span><span class="s0">,</span><span class="s1">tilingPaddingVertical</span><span class="s0">:</span><span class="s3">10</span><span class="s0">,</span><span class="s1">tilingPaddingHorizontal</span><span class="s0">:</span><span class="s3">10</span><span class="s0">,</span><span class="s1">gravityRangeCompound</span><span class="s0">:</span><span class="s3">1.5</span><span class="s0">,</span><span class="s1">gravityCompound</span><span class="s0">:</span><span class="s3">1</span><span class="s0">,</span><span class="s1">gravityRange</span><span class="s0">:</span><span class="s3">3.8</span><span class="s0">,</span><span class="s1">initialEnergyOnIncremental</span><span class="s0">:</span><span class="s3">.3</span><span class="s0">,</span><span class="s1">fixedNodeConstraint</span><span class="s0">:</span><span class="s1">undefined</span><span class="s0">,</span><span class="s1">alignmentConstraint</span><span class="s0">:</span><span class="s1">undefined</span><span class="s0">,</span><span class="s1">relativePlacementConstraint</span><span class="s0">:</span><span class="s1">undefined</span><span class="s0">,</span><span class="s1">ready</span><span class="s0">:</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(){},</span><span class="s1">stop</span><span class="s0">:</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(){}});</span><span class="s4">var </span><span class="s1">f</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s1">n</span><span class="s0">(</span><span class="s4">this</span><span class="s0">,</span><span class="s1">t</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">options</span><span class="s0">=</span><span class="s1">o</span><span class="s0">({},</span><span class="s1">d</span><span class="s0">,</span><span class="s1">e</span><span class="s0">)}</span><span class="s1">i</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,[{</span><span class="s1">key</span><span class="s0">:</span><span class="s2">&quot;run&quot;</span><span class="s0">,</span><span class="s1">value</span><span class="s0">:</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s4">this</span><span class="s0">;</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">options</span><span class="s0">;</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">cy</span><span class="s0">;</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">eles</span><span class="s0">;</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=[];</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">l</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">d</span><span class="s0">=[];</span><span class="s4">var </span><span class="s1">f</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">g</span><span class="s0">=[];</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">fixedNodeConstraint</span><span class="s0">&amp;&amp;(!</span><span class="s1">Array</span><span class="s0">.</span><span class="s1">isArray</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">fixedNodeConstraint</span><span class="s0">)||</span><span class="s1">r</span><span class="s0">.</span><span class="s1">fixedNodeConstraint</span><span class="s0">.</span><span class="s1">length</span><span class="s0">==</span><span class="s3">0</span><span class="s0">)){</span><span class="s1">r</span><span class="s0">.</span><span class="s1">fixedNodeConstraint</span><span class="s0">=</span><span class="s1">undefined</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">alignmentConstraint</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">alignmentConstraint</span><span class="s0">.</span><span class="s1">vertical</span><span class="s0">&amp;&amp;(!</span><span class="s1">Array</span><span class="s0">.</span><span class="s1">isArray</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">alignmentConstraint</span><span class="s0">.</span><span class="s1">vertical</span><span class="s0">)||</span><span class="s1">r</span><span class="s0">.</span><span class="s1">alignmentConstraint</span><span class="s0">.</span><span class="s1">vertical</span><span class="s0">.</span><span class="s1">length</span><span class="s0">==</span><span class="s3">0</span><span class="s0">)){</span><span class="s1">r</span><span class="s0">.</span><span class="s1">alignmentConstraint</span><span class="s0">.</span><span class="s1">vertical</span><span class="s0">=</span><span class="s1">undefined</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">alignmentConstraint</span><span class="s0">.</span><span class="s1">horizontal</span><span class="s0">&amp;&amp;(!</span><span class="s1">Array</span><span class="s0">.</span><span class="s1">isArray</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">alignmentConstraint</span><span class="s0">.</span><span class="s1">horizontal</span><span class="s0">)||</span><span class="s1">r</span><span class="s0">.</span><span class="s1">alignmentConstraint</span><span class="s0">.</span><span class="s1">horizontal</span><span class="s0">.</span><span class="s1">length</span><span class="s0">==</span><span class="s3">0</span><span class="s0">)){</span><span class="s1">r</span><span class="s0">.</span><span class="s1">alignmentConstraint</span><span class="s0">.</span><span class="s1">horizontal</span><span class="s0">=</span><span class="s1">undefined</span><span class="s0">}}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">relativePlacementConstraint</span><span class="s0">&amp;&amp;(!</span><span class="s1">Array</span><span class="s0">.</span><span class="s1">isArray</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">relativePlacementConstraint</span><span class="s0">)||</span><span class="s1">r</span><span class="s0">.</span><span class="s1">relativePlacementConstraint</span><span class="s0">.</span><span class="s1">length</span><span class="s0">==</span><span class="s3">0</span><span class="s0">)){</span><span class="s1">r</span><span class="s0">.</span><span class="s1">relativePlacementConstraint</span><span class="s0">=</span><span class="s1">undefined</span><span class="s0">}</span><span class="s4">var </span><span class="s1">u</span><span class="s0">=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">fixedNodeConstraint</span><span class="s0">||</span><span class="s1">r</span><span class="s0">.</span><span class="s1">alignmentConstraint</span><span class="s0">||</span><span class="s1">r</span><span class="s0">.</span><span class="s1">relativePlacementConstraint</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">u</span><span class="s0">){</span><span class="s1">r</span><span class="s0">.</span><span class="s1">tile</span><span class="s0">=</span><span class="s4">false</span><span class="s0">;</span><span class="s1">r</span><span class="s0">.</span><span class="s1">packComponents</span><span class="s0">=</span><span class="s4">false</span><span class="s0">}</span><span class="s4">var </span><span class="s1">p</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">v</span><span class="s0">=</span><span class="s4">false</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">layoutUtilities</span><span class="s0">&amp;&amp;</span><span class="s1">r</span><span class="s0">.</span><span class="s1">packComponents</span><span class="s0">){</span><span class="s1">p</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">layoutUtilities</span><span class="s0">(</span><span class="s2">&quot;get&quot;</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">p</span><span class="s0">)</span><span class="s1">p</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">layoutUtilities</span><span class="s0">();</span><span class="s1">v</span><span class="s0">=</span><span class="s4">true</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">.</span><span class="s1">nodes</span><span class="s0">().</span><span class="s1">length</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">v</span><span class="s0">){</span><span class="s4">var </span><span class="s1">y</span><span class="s0">=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">eles</span><span class="s0">.</span><span class="s1">boundingBox</span><span class="s0">();</span><span class="s1">g</span><span class="s0">.</span><span class="s1">push</span><span class="s0">({</span><span class="s1">x</span><span class="s0">:</span><span class="s1">y</span><span class="s0">.</span><span class="s1">x1</span><span class="s0">+</span><span class="s1">y</span><span class="s0">.</span><span class="s1">w</span><span class="s0">/</span><span class="s3">2</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s1">y</span><span class="s0">.</span><span class="s1">y1</span><span class="s0">+</span><span class="s1">y</span><span class="s0">.</span><span class="s1">h</span><span class="s0">/</span><span class="s3">2</span><span class="s0">});</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">randomize</span><span class="s0">){</span><span class="s4">var </span><span class="s1">m</span><span class="s0">=</span><span class="s1">h</span><span class="s0">(</span><span class="s1">r</span><span class="s0">);</span><span class="s1">o</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">m</span><span class="s0">)}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">quality</span><span class="s0">==</span><span class="s2">&quot;default&quot;</span><span class="s0">||</span><span class="s1">r</span><span class="s0">.</span><span class="s1">quality</span><span class="s0">==</span><span class="s2">&quot;proof&quot;</span><span class="s0">){</span><span class="s1">d</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">c</span><span class="s0">(</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]));</span><span class="s1">a</span><span class="s0">.</span><span class="s1">relocateComponent</span><span class="s0">(</span><span class="s1">g</span><span class="s0">[</span><span class="s3">0</span><span class="s0">],</span><span class="s1">d</span><span class="s0">[</span><span class="s3">0</span><span class="s0">],</span><span class="s1">r</span><span class="s0">)}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">a</span><span class="s0">.</span><span class="s1">relocateComponent</span><span class="s0">(</span><span class="s1">g</span><span class="s0">[</span><span class="s3">0</span><span class="s0">],</span><span class="s1">o</span><span class="s0">[</span><span class="s3">0</span><span class="s0">],</span><span class="s1">r</span><span class="s0">)}}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">var </span><span class="s1">E</span><span class="s0">=</span><span class="s1">a</span><span class="s0">.</span><span class="s1">getTopMostNodes</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">eles</span><span class="s0">.</span><span class="s1">nodes</span><span class="s0">());</span><span class="s1">f</span><span class="s0">=</span><span class="s1">a</span><span class="s0">.</span><span class="s1">connectComponents</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">r</span><span class="s0">.</span><span class="s1">eles</span><span class="s0">,</span><span class="s1">E</span><span class="s0">);</span><span class="s1">f</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">boundingBox</span><span class="s0">();</span><span class="s1">g</span><span class="s0">.</span><span class="s1">push</span><span class="s0">({</span><span class="s1">x</span><span class="s0">:</span><span class="s1">e</span><span class="s0">.</span><span class="s1">x1</span><span class="s0">+</span><span class="s1">e</span><span class="s0">.</span><span class="s1">w</span><span class="s0">/</span><span class="s3">2</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s1">e</span><span class="s0">.</span><span class="s1">y1</span><span class="s0">+</span><span class="s1">e</span><span class="s0">.</span><span class="s1">h</span><span class="s0">/</span><span class="s3">2</span><span class="s0">})}));</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">randomize</span><span class="s0">){</span><span class="s1">f</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s1">r</span><span class="s0">.</span><span class="s1">eles</span><span class="s0">=</span><span class="s1">t</span><span class="s0">;</span><span class="s1">o</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">h</span><span class="s0">(</span><span class="s1">r</span><span class="s0">))}))}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">quality</span><span class="s0">==</span><span class="s2">&quot;default&quot;</span><span class="s0">||</span><span class="s1">r</span><span class="s0">.</span><span class="s1">quality</span><span class="s0">==</span><span class="s2">&quot;proof&quot;</span><span class="s0">){</span><span class="s4">var </span><span class="s1">N</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">collection</span><span class="s0">();</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">tile</span><span class="s0">){</span><span class="s4">var </span><span class="s1">T</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Map</span><span class="s0">;</span><span class="s4">var </span><span class="s1">A</span><span class="s0">=[];</span><span class="s4">var </span><span class="s1">w</span><span class="s0">=[];</span><span class="s4">var </span><span class="s1">L</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">I</span><span class="s0">={</span><span class="s1">nodeIndexes</span><span class="s0">:</span><span class="s1">T</span><span class="s0">,</span><span class="s1">xCoords</span><span class="s0">:</span><span class="s1">A</span><span class="s0">,</span><span class="s1">yCoords</span><span class="s0">:</span><span class="s1">w</span><span class="s0">};</span><span class="s4">var </span><span class="s1">_</span><span class="s0">=[];</span><span class="s1">f</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">edges</span><span class="s0">().</span><span class="s1">length</span><span class="s0">==</span><span class="s3">0</span><span class="s0">){</span><span class="s1">t</span><span class="s0">.</span><span class="s1">nodes</span><span class="s0">().</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s1">N</span><span class="s0">.</span><span class="s1">merge</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">nodes</span><span class="s0">()[</span><span class="s1">r</span><span class="s0">]);</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">e</span><span class="s0">.</span><span class="s1">isParent</span><span class="s0">()){</span><span class="s1">I</span><span class="s0">.</span><span class="s1">nodeIndexes</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">nodes</span><span class="s0">()[</span><span class="s1">r</span><span class="s0">].</span><span class="s1">id</span><span class="s0">(),</span><span class="s1">L</span><span class="s0">++);</span><span class="s1">I</span><span class="s0">.</span><span class="s1">xCoords</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">nodes</span><span class="s0">()[</span><span class="s3">0</span><span class="s0">].</span><span class="s1">position</span><span class="s0">().</span><span class="s1">x</span><span class="s0">);</span><span class="s1">I</span><span class="s0">.</span><span class="s1">yCoords</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">nodes</span><span class="s0">()[</span><span class="s3">0</span><span class="s0">].</span><span class="s1">position</span><span class="s0">().</span><span class="s1">y</span><span class="s0">)}}));</span><span class="s1">_</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)}}));</span><span class="s4">if</span><span class="s0">(</span><span class="s1">N</span><span class="s0">.</span><span class="s1">length</span><span class="s0">&gt;</span><span class="s3">1</span><span class="s0">){</span><span class="s4">var </span><span class="s1">C</span><span class="s0">=</span><span class="s1">N</span><span class="s0">.</span><span class="s1">boundingBox</span><span class="s0">();</span><span class="s1">g</span><span class="s0">.</span><span class="s1">push</span><span class="s0">({</span><span class="s1">x</span><span class="s0">:</span><span class="s1">C</span><span class="s0">.</span><span class="s1">x1</span><span class="s0">+</span><span class="s1">C</span><span class="s0">.</span><span class="s1">w</span><span class="s0">/</span><span class="s3">2</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s1">C</span><span class="s0">.</span><span class="s1">y1</span><span class="s0">+</span><span class="s1">C</span><span class="s0">.</span><span class="s1">h</span><span class="s0">/</span><span class="s3">2</span><span class="s0">});</span><span class="s1">f</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">N</span><span class="s0">);</span><span class="s1">o</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">I</span><span class="s0">);</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">M</span><span class="s0">=</span><span class="s1">_</span><span class="s0">.</span><span class="s1">length</span><span class="s0">-</span><span class="s3">1</span><span class="s0">;</span><span class="s1">M</span><span class="s0">&gt;=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">M</span><span class="s0">--){</span><span class="s1">f</span><span class="s0">.</span><span class="s1">splice</span><span class="s0">(</span><span class="s1">_</span><span class="s0">[</span><span class="s1">M</span><span class="s0">],</span><span class="s3">1</span><span class="s0">);</span><span class="s1">o</span><span class="s0">.</span><span class="s1">splice</span><span class="s0">(</span><span class="s1">_</span><span class="s0">[</span><span class="s1">M</span><span class="s0">],</span><span class="s3">1</span><span class="s0">);</span><span class="s1">g</span><span class="s0">.</span><span class="s1">splice</span><span class="s0">(</span><span class="s1">_</span><span class="s0">[</span><span class="s1">M</span><span class="s0">],</span><span class="s3">1</span><span class="s0">)}}}</span><span class="s1">f</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s1">r</span><span class="s0">.</span><span class="s1">eles</span><span class="s0">=</span><span class="s1">t</span><span class="s0">;</span><span class="s1">d</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">c</span><span class="s0">(</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]));</span><span class="s1">a</span><span class="s0">.</span><span class="s1">relocateComponent</span><span class="s0">(</span><span class="s1">g</span><span class="s0">[</span><span class="s1">e</span><span class="s0">],</span><span class="s1">d</span><span class="s0">[</span><span class="s1">e</span><span class="s0">],</span><span class="s1">r</span><span class="s0">)}))}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">f</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s1">a</span><span class="s0">.</span><span class="s1">relocateComponent</span><span class="s0">(</span><span class="s1">g</span><span class="s0">[</span><span class="s1">e</span><span class="s0">],</span><span class="s1">o</span><span class="s0">[</span><span class="s1">e</span><span class="s0">],</span><span class="s1">r</span><span class="s0">)}))}</span><span class="s4">var </span><span class="s1">x</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Set</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">f</span><span class="s0">.</span><span class="s1">length</span><span class="s0">&gt;</span><span class="s3">1</span><span class="s0">){</span><span class="s4">var </span><span class="s1">O</span><span class="s0">=[];</span><span class="s4">var </span><span class="s1">D</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">filter</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">return </span><span class="s1">t</span><span class="s0">.</span><span class="s1">css</span><span class="s0">(</span><span class="s2">&quot;display&quot;</span><span class="s0">)==</span><span class="s2">&quot;none&quot;</span><span class="s0">}));</span><span class="s1">f</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">quality</span><span class="s0">==</span><span class="s2">&quot;draft&quot;</span><span class="s0">){</span><span class="s1">i</span><span class="s0">=</span><span class="s1">o</span><span class="s0">[</span><span class="s1">e</span><span class="s0">].</span><span class="s1">nodeIndexes</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">nodes</span><span class="s0">().</span><span class="s1">not</span><span class="s0">(</span><span class="s1">D</span><span class="s0">).</span><span class="s1">length</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">){</span><span class="s4">var </span><span class="s1">n</span><span class="s0">={};</span><span class="s1">n</span><span class="s0">.</span><span class="s1">edges</span><span class="s0">=[];</span><span class="s1">n</span><span class="s0">.</span><span class="s1">nodes</span><span class="s0">=[];</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">nodes</span><span class="s0">().</span><span class="s1">not</span><span class="s0">(</span><span class="s1">D</span><span class="s0">).</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">quality</span><span class="s0">==</span><span class="s2">&quot;draft&quot;</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isParent</span><span class="s0">()){</span><span class="s1">s</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">id</span><span class="s0">());</span><span class="s1">n</span><span class="s0">.</span><span class="s1">nodes</span><span class="s0">.</span><span class="s1">push</span><span class="s0">({</span><span class="s1">x</span><span class="s0">:</span><span class="s1">o</span><span class="s0">[</span><span class="s1">e</span><span class="s0">].</span><span class="s1">xCoords</span><span class="s0">[</span><span class="s1">s</span><span class="s0">]-</span><span class="s1">t</span><span class="s0">.</span><span class="s1">boundingbox</span><span class="s0">().</span><span class="s1">w</span><span class="s0">/</span><span class="s3">2</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s1">o</span><span class="s0">[</span><span class="s1">e</span><span class="s0">].</span><span class="s1">yCoords</span><span class="s0">[</span><span class="s1">s</span><span class="s0">]-</span><span class="s1">t</span><span class="s0">.</span><span class="s1">boundingbox</span><span class="s0">().</span><span class="s1">h</span><span class="s0">/</span><span class="s3">2</span><span class="s0">,</span><span class="s1">width</span><span class="s0">:</span><span class="s1">t</span><span class="s0">.</span><span class="s1">boundingbox</span><span class="s0">().</span><span class="s1">w</span><span class="s0">,</span><span class="s1">height</span><span class="s0">:</span><span class="s1">t</span><span class="s0">.</span><span class="s1">boundingbox</span><span class="s0">().</span><span class="s1">h</span><span class="s0">})}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">var </span><span class="s1">h</span><span class="s0">=</span><span class="s1">a</span><span class="s0">.</span><span class="s1">calcBoundingBox</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">o</span><span class="s0">[</span><span class="s1">e</span><span class="s0">].</span><span class="s1">xCoords</span><span class="s0">,</span><span class="s1">o</span><span class="s0">[</span><span class="s1">e</span><span class="s0">].</span><span class="s1">yCoords</span><span class="s0">,</span><span class="s1">i</span><span class="s0">);</span><span class="s1">n</span><span class="s0">.</span><span class="s1">nodes</span><span class="s0">.</span><span class="s1">push</span><span class="s0">({</span><span class="s1">x</span><span class="s0">:</span><span class="s1">h</span><span class="s0">.</span><span class="s1">topLeftX</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s1">h</span><span class="s0">.</span><span class="s1">topLeftY</span><span class="s0">,</span><span class="s1">width</span><span class="s0">:</span><span class="s1">h</span><span class="s0">.</span><span class="s1">width</span><span class="s0">,</span><span class="s1">height</span><span class="s0">:</span><span class="s1">h</span><span class="s0">.</span><span class="s1">height</span><span class="s0">})}}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">if</span><span class="s0">(</span><span class="s1">d</span><span class="s0">[</span><span class="s1">e</span><span class="s0">][</span><span class="s1">t</span><span class="s0">.</span><span class="s1">id</span><span class="s0">()]){</span><span class="s1">n</span><span class="s0">.</span><span class="s1">nodes</span><span class="s0">.</span><span class="s1">push</span><span class="s0">({</span><span class="s1">x</span><span class="s0">:</span><span class="s1">d</span><span class="s0">[</span><span class="s1">e</span><span class="s0">][</span><span class="s1">t</span><span class="s0">.</span><span class="s1">id</span><span class="s0">()].</span><span class="s1">getLeft</span><span class="s0">(),</span><span class="s1">y</span><span class="s0">:</span><span class="s1">d</span><span class="s0">[</span><span class="s1">e</span><span class="s0">][</span><span class="s1">t</span><span class="s0">.</span><span class="s1">id</span><span class="s0">()].</span><span class="s1">getTop</span><span class="s0">(),</span><span class="s1">width</span><span class="s0">:</span><span class="s1">d</span><span class="s0">[</span><span class="s1">e</span><span class="s0">][</span><span class="s1">t</span><span class="s0">.</span><span class="s1">id</span><span class="s0">()].</span><span class="s1">getWidth</span><span class="s0">(),</span><span class="s1">height</span><span class="s0">:</span><span class="s1">d</span><span class="s0">[</span><span class="s1">e</span><span class="s0">][</span><span class="s1">t</span><span class="s0">.</span><span class="s1">id</span><span class="s0">()].</span><span class="s1">getHeight</span><span class="s0">()})}}}));</span><span class="s1">t</span><span class="s0">.</span><span class="s1">edges</span><span class="s0">().</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">source</span><span class="s0">();</span><span class="s4">var </span><span class="s1">h</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">target</span><span class="s0">();</span><span class="s4">if</span><span class="s0">(</span><span class="s1">s</span><span class="s0">.</span><span class="s1">css</span><span class="s0">(</span><span class="s2">&quot;display&quot;</span><span class="s0">)!=</span><span class="s2">&quot;none&quot;</span><span class="s0">&amp;&amp;</span><span class="s1">h</span><span class="s0">.</span><span class="s1">css</span><span class="s0">(</span><span class="s2">&quot;display&quot;</span><span class="s0">)!=</span><span class="s2">&quot;none&quot;</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">quality</span><span class="s0">==</span><span class="s2">&quot;draft&quot;</span><span class="s0">){</span><span class="s4">var </span><span class="s1">l</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">s</span><span class="s0">.</span><span class="s1">id</span><span class="s0">());</span><span class="s4">var </span><span class="s1">c</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">h</span><span class="s0">.</span><span class="s1">id</span><span class="s0">());</span><span class="s4">var </span><span class="s1">f</span><span class="s0">=[];</span><span class="s4">var </span><span class="s1">g</span><span class="s0">=[];</span><span class="s4">if</span><span class="s0">(</span><span class="s1">s</span><span class="s0">.</span><span class="s1">isParent</span><span class="s0">()){</span><span class="s4">var </span><span class="s1">u</span><span class="s0">=</span><span class="s1">a</span><span class="s0">.</span><span class="s1">calcBoundingBox</span><span class="s0">(</span><span class="s1">s</span><span class="s0">,</span><span class="s1">o</span><span class="s0">[</span><span class="s1">e</span><span class="s0">].</span><span class="s1">xCoords</span><span class="s0">,</span><span class="s1">o</span><span class="s0">[</span><span class="s1">e</span><span class="s0">].</span><span class="s1">yCoords</span><span class="s0">,</span><span class="s1">i</span><span class="s0">);</span><span class="s1">f</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">u</span><span class="s0">.</span><span class="s1">topLeftX</span><span class="s0">+</span><span class="s1">u</span><span class="s0">.</span><span class="s1">width</span><span class="s0">/</span><span class="s3">2</span><span class="s0">);</span><span class="s1">f</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">u</span><span class="s0">.</span><span class="s1">topLeftY</span><span class="s0">+</span><span class="s1">u</span><span class="s0">.</span><span class="s1">height</span><span class="s0">/</span><span class="s3">2</span><span class="s0">)}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">f</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">o</span><span class="s0">[</span><span class="s1">e</span><span class="s0">].</span><span class="s1">xCoords</span><span class="s0">[</span><span class="s1">l</span><span class="s0">]);</span><span class="s1">f</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">o</span><span class="s0">[</span><span class="s1">e</span><span class="s0">].</span><span class="s1">yCoords</span><span class="s0">[</span><span class="s1">l</span><span class="s0">])}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">h</span><span class="s0">.</span><span class="s1">isParent</span><span class="s0">()){</span><span class="s4">var </span><span class="s1">p</span><span class="s0">=</span><span class="s1">a</span><span class="s0">.</span><span class="s1">calcBoundingBox</span><span class="s0">(</span><span class="s1">h</span><span class="s0">,</span><span class="s1">o</span><span class="s0">[</span><span class="s1">e</span><span class="s0">].</span><span class="s1">xCoords</span><span class="s0">,</span><span class="s1">o</span><span class="s0">[</span><span class="s1">e</span><span class="s0">].</span><span class="s1">yCoords</span><span class="s0">,</span><span class="s1">i</span><span class="s0">);</span><span class="s1">g</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">p</span><span class="s0">.</span><span class="s1">topLeftX</span><span class="s0">+</span><span class="s1">p</span><span class="s0">.</span><span class="s1">width</span><span class="s0">/</span><span class="s3">2</span><span class="s0">);</span><span class="s1">g</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">p</span><span class="s0">.</span><span class="s1">topLeftY</span><span class="s0">+</span><span class="s1">p</span><span class="s0">.</span><span class="s1">height</span><span class="s0">/</span><span class="s3">2</span><span class="s0">)}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">g</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">o</span><span class="s0">[</span><span class="s1">e</span><span class="s0">].</span><span class="s1">xCoords</span><span class="s0">[</span><span class="s1">c</span><span class="s0">]);</span><span class="s1">g</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">o</span><span class="s0">[</span><span class="s1">e</span><span class="s0">].</span><span class="s1">yCoords</span><span class="s0">[</span><span class="s1">c</span><span class="s0">])}</span><span class="s1">n</span><span class="s0">.</span><span class="s1">edges</span><span class="s0">.</span><span class="s1">push</span><span class="s0">({</span><span class="s1">startX</span><span class="s0">:</span><span class="s1">f</span><span class="s0">[</span><span class="s3">0</span><span class="s0">],</span><span class="s1">startY</span><span class="s0">:</span><span class="s1">f</span><span class="s0">[</span><span class="s3">1</span><span class="s0">],</span><span class="s1">endX</span><span class="s0">:</span><span class="s1">g</span><span class="s0">[</span><span class="s3">0</span><span class="s0">],</span><span class="s1">endY</span><span class="s0">:</span><span class="s1">g</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]})}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">if</span><span class="s0">(</span><span class="s1">d</span><span class="s0">[</span><span class="s1">e</span><span class="s0">][</span><span class="s1">s</span><span class="s0">.</span><span class="s1">id</span><span class="s0">()]&amp;&amp;</span><span class="s1">d</span><span class="s0">[</span><span class="s1">e</span><span class="s0">][</span><span class="s1">h</span><span class="s0">.</span><span class="s1">id</span><span class="s0">()]){</span><span class="s1">n</span><span class="s0">.</span><span class="s1">edges</span><span class="s0">.</span><span class="s1">push</span><span class="s0">({</span><span class="s1">startX</span><span class="s0">:</span><span class="s1">d</span><span class="s0">[</span><span class="s1">e</span><span class="s0">][</span><span class="s1">s</span><span class="s0">.</span><span class="s1">id</span><span class="s0">()].</span><span class="s1">getCenterX</span><span class="s0">(),</span><span class="s1">startY</span><span class="s0">:</span><span class="s1">d</span><span class="s0">[</span><span class="s1">e</span><span class="s0">][</span><span class="s1">s</span><span class="s0">.</span><span class="s1">id</span><span class="s0">()].</span><span class="s1">getCenterY</span><span class="s0">(),</span><span class="s1">endX</span><span class="s0">:</span><span class="s1">d</span><span class="s0">[</span><span class="s1">e</span><span class="s0">][</span><span class="s1">h</span><span class="s0">.</span><span class="s1">id</span><span class="s0">()].</span><span class="s1">getCenterX</span><span class="s0">(),</span><span class="s1">endY</span><span class="s0">:</span><span class="s1">d</span><span class="s0">[</span><span class="s1">e</span><span class="s0">][</span><span class="s1">h</span><span class="s0">.</span><span class="s1">id</span><span class="s0">()].</span><span class="s1">getCenterY</span><span class="s0">()})}}}}));</span><span class="s4">if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">.</span><span class="s1">nodes</span><span class="s0">.</span><span class="s1">length</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">){</span><span class="s1">O</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">n</span><span class="s0">);</span><span class="s1">x</span><span class="s0">.</span><span class="s1">add</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)}}}));</span><span class="s4">var </span><span class="s1">R</span><span class="s0">=</span><span class="s1">p</span><span class="s0">.</span><span class="s1">packComponents</span><span class="s0">(</span><span class="s1">O</span><span class="s0">,</span><span class="s1">r</span><span class="s0">.</span><span class="s1">randomize</span><span class="s0">).</span><span class="s1">shifts</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">quality</span><span class="s0">==</span><span class="s2">&quot;draft&quot;</span><span class="s0">){</span><span class="s1">o</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">xCoords</span><span class="s0">.</span><span class="s1">map</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">return </span><span class="s1">t</span><span class="s0">+</span><span class="s1">R</span><span class="s0">[</span><span class="s1">e</span><span class="s0">].</span><span class="s1">dx</span><span class="s0">}));</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">yCoords</span><span class="s0">.</span><span class="s1">map</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">return </span><span class="s1">t</span><span class="s0">+</span><span class="s1">R</span><span class="s0">[</span><span class="s1">e</span><span class="s0">].</span><span class="s1">dy</span><span class="s0">}));</span><span class="s1">t</span><span class="s0">.</span><span class="s1">xCoords</span><span class="s0">=</span><span class="s1">r</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">yCoords</span><span class="s0">=</span><span class="s1">i</span><span class="s0">}))}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">var </span><span class="s1">b</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">x</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">keys</span><span class="s0">(</span><span class="s1">d</span><span class="s0">[</span><span class="s1">t</span><span class="s0">]).</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s1">d</span><span class="s0">[</span><span class="s1">t</span><span class="s0">][</span><span class="s1">e</span><span class="s0">];</span><span class="s1">r</span><span class="s0">.</span><span class="s1">setCenter</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">getCenterX</span><span class="s0">()+</span><span class="s1">R</span><span class="s0">[</span><span class="s1">b</span><span class="s0">].</span><span class="s1">dx</span><span class="s0">,</span><span class="s1">r</span><span class="s0">.</span><span class="s1">getCenterY</span><span class="s0">()+</span><span class="s1">R</span><span class="s0">[</span><span class="s1">b</span><span class="s0">].</span><span class="s1">dy</span><span class="s0">)}));</span><span class="s1">b</span><span class="s0">++}))}}}}</span><span class="s4">var </span><span class="s1">G</span><span class="s0">=</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">quality</span><span class="s0">==</span><span class="s2">&quot;default&quot;</span><span class="s0">||</span><span class="s1">r</span><span class="s0">.</span><span class="s1">quality</span><span class="s0">==</span><span class="s2">&quot;proof&quot;</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s4">typeof </span><span class="s1">e</span><span class="s0">===</span><span class="s2">&quot;number&quot;</span><span class="s0">){</span><span class="s1">e</span><span class="s0">=</span><span class="s1">i</span><span class="s0">}</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">data</span><span class="s0">(</span><span class="s2">&quot;id&quot;</span><span class="s0">);</span><span class="s1">d</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">s </span><span class="s4">in </span><span class="s1">t</span><span class="s0">){</span><span class="s1">n</span><span class="s0">={</span><span class="s1">x</span><span class="s0">:</span><span class="s1">t</span><span class="s0">[</span><span class="s1">s</span><span class="s0">].</span><span class="s1">getRect</span><span class="s0">().</span><span class="s1">getCenterX</span><span class="s0">(),</span><span class="s1">y</span><span class="s0">:</span><span class="s1">t</span><span class="s0">[</span><span class="s1">s</span><span class="s0">].</span><span class="s1">getRect</span><span class="s0">().</span><span class="s1">getCenterY</span><span class="s0">()};</span><span class="s1">a</span><span class="s0">=</span><span class="s1">t</span><span class="s0">[</span><span class="s1">s</span><span class="s0">]}}));</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">nodeDimensionsIncludeLabels</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">a</span><span class="s0">.</span><span class="s1">labelWidth</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">a</span><span class="s0">.</span><span class="s1">labelPosHorizontal</span><span class="s0">==</span><span class="s2">&quot;left&quot;</span><span class="s0">){</span><span class="s1">n</span><span class="s0">.</span><span class="s1">x</span><span class="s0">+=</span><span class="s1">a</span><span class="s0">.</span><span class="s1">labelWidth</span><span class="s0">/</span><span class="s3">2</span><span class="s0">}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">a</span><span class="s0">.</span><span class="s1">labelPosHorizontal</span><span class="s0">==</span><span class="s2">&quot;right&quot;</span><span class="s0">){</span><span class="s1">n</span><span class="s0">.</span><span class="s1">x</span><span class="s0">-=</span><span class="s1">a</span><span class="s0">.</span><span class="s1">labelWidth</span><span class="s0">/</span><span class="s3">2</span><span class="s0">}}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">a</span><span class="s0">.</span><span class="s1">labelHeight</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">a</span><span class="s0">.</span><span class="s1">labelPosVertical</span><span class="s0">==</span><span class="s2">&quot;top&quot;</span><span class="s0">){</span><span class="s1">n</span><span class="s0">.</span><span class="s1">y</span><span class="s0">+=</span><span class="s1">a</span><span class="s0">.</span><span class="s1">labelHeight</span><span class="s0">/</span><span class="s3">2</span><span class="s0">}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">a</span><span class="s0">.</span><span class="s1">labelPosVertical</span><span class="s0">==</span><span class="s2">&quot;bottom&quot;</span><span class="s0">){</span><span class="s1">n</span><span class="s0">.</span><span class="s1">y</span><span class="s0">-=</span><span class="s1">a</span><span class="s0">.</span><span class="s1">labelHeight</span><span class="s0">/</span><span class="s3">2</span><span class="s0">}}}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">==</span><span class="s1">undefined</span><span class="s0">)</span><span class="s1">n</span><span class="s0">={</span><span class="s1">x</span><span class="s0">:</span><span class="s1">e</span><span class="s0">.</span><span class="s1">position</span><span class="s0">(</span><span class="s2">&quot;x&quot;</span><span class="s0">),</span><span class="s1">y</span><span class="s0">:</span><span class="s1">e</span><span class="s0">.</span><span class="s1">position</span><span class="s0">(</span><span class="s2">&quot;y&quot;</span><span class="s0">)};</span><span class="s4">return</span><span class="s0">{</span><span class="s1">x</span><span class="s0">:</span><span class="s1">n</span><span class="s0">.</span><span class="s1">x</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s1">n</span><span class="s0">.</span><span class="s1">y</span><span class="s0">}}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">var </span><span class="s1">h</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s1">o</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">nodeIndexes</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">id</span><span class="s0">());</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">!=</span><span class="s1">undefined</span><span class="s0">){</span><span class="s1">h</span><span class="s0">={</span><span class="s1">x</span><span class="s0">:</span><span class="s1">t</span><span class="s0">.</span><span class="s1">xCoords</span><span class="s0">[</span><span class="s1">r</span><span class="s0">],</span><span class="s1">y</span><span class="s0">:</span><span class="s1">t</span><span class="s0">.</span><span class="s1">yCoords</span><span class="s0">[</span><span class="s1">r</span><span class="s0">]}}}));</span><span class="s4">if</span><span class="s0">(</span><span class="s1">h</span><span class="s0">==</span><span class="s1">undefined</span><span class="s0">)</span><span class="s1">h</span><span class="s0">={</span><span class="s1">x</span><span class="s0">:</span><span class="s1">e</span><span class="s0">.</span><span class="s1">position</span><span class="s0">(</span><span class="s2">&quot;x&quot;</span><span class="s0">),</span><span class="s1">y</span><span class="s0">:</span><span class="s1">e</span><span class="s0">.</span><span class="s1">position</span><span class="s0">(</span><span class="s2">&quot;y&quot;</span><span class="s0">)};</span><span class="s4">return</span><span class="s0">{</span><span class="s1">x</span><span class="s0">:</span><span class="s1">h</span><span class="s0">.</span><span class="s1">x</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s1">h</span><span class="s0">.</span><span class="s1">y</span><span class="s0">}}};</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">quality</span><span class="s0">==</span><span class="s2">&quot;default&quot;</span><span class="s0">||</span><span class="s1">r</span><span class="s0">.</span><span class="s1">quality</span><span class="s0">==</span><span class="s2">&quot;proof&quot;</span><span class="s0">||</span><span class="s1">r</span><span class="s0">.</span><span class="s1">randomize</span><span class="s0">){</span><span class="s4">var </span><span class="s1">F</span><span class="s0">=</span><span class="s1">a</span><span class="s0">.</span><span class="s1">calcParentsWithoutChildren</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">n</span><span class="s0">);</span><span class="s4">var </span><span class="s1">S</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">filter</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">return </span><span class="s1">t</span><span class="s0">.</span><span class="s1">css</span><span class="s0">(</span><span class="s2">&quot;display&quot;</span><span class="s0">)==</span><span class="s2">&quot;none&quot;</span><span class="s0">}));</span><span class="s1">r</span><span class="s0">.</span><span class="s1">eles</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">not</span><span class="s0">(</span><span class="s1">S</span><span class="s0">);</span><span class="s1">n</span><span class="s0">.</span><span class="s1">nodes</span><span class="s0">().</span><span class="s1">not</span><span class="s0">(</span><span class="s2">&quot;:parent&quot;</span><span class="s0">).</span><span class="s1">not</span><span class="s0">(</span><span class="s1">S</span><span class="s0">).</span><span class="s1">layoutPositions</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">G</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">F</span><span class="s0">.</span><span class="s1">length</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">){</span><span class="s1">F</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s1">t</span><span class="s0">.</span><span class="s1">position</span><span class="s0">(</span><span class="s1">G</span><span class="s0">(</span><span class="s1">t</span><span class="s0">))}))}}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">console</span><span class="s0">.</span><span class="s1">log</span><span class="s0">(</span><span class="s2">&quot;If randomize option is set to false, then quality option must be 'default' or 'proof'.&quot;</span><span class="s0">)}}}]);</span><span class="s4">return </span><span class="s1">t</span><span class="s0">}();</span><span class="s1">t</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">=</span><span class="s1">f</span><span class="s0">},</span><span class="s3">657</span><span class="s0">:(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">)=&gt;{</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">548</span><span class="s0">);</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">140</span><span class="s0">).</span><span class="s1">layoutBase</span><span class="s0">.</span><span class="s1">Matrix</span><span class="s0">;</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">140</span><span class="s0">).</span><span class="s1">layoutBase</span><span class="s0">.</span><span class="s1">SVD</span><span class="s0">;</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">cy</span><span class="s0">;</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">eles</span><span class="s0">;</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s1">a</span><span class="s0">.</span><span class="s1">nodes</span><span class="s0">();</span><span class="s4">var </span><span class="s1">h</span><span class="s0">=</span><span class="s1">a</span><span class="s0">.</span><span class="s1">nodes</span><span class="s0">(</span><span class="s2">&quot;:parent&quot;</span><span class="s0">);</span><span class="s4">var </span><span class="s1">l</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Map</span><span class="s0">;</span><span class="s4">var </span><span class="s1">c</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Map</span><span class="s0">;</span><span class="s4">var </span><span class="s1">d</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Map</span><span class="s0">;</span><span class="s4">var </span><span class="s1">f</span><span class="s0">=[];</span><span class="s4">var </span><span class="s1">g</span><span class="s0">=[];</span><span class="s4">var </span><span class="s1">u</span><span class="s0">=[];</span><span class="s4">var </span><span class="s1">p</span><span class="s0">=[];</span><span class="s4">var </span><span class="s1">v</span><span class="s0">=[];</span><span class="s4">var </span><span class="s1">y</span><span class="s0">=[];</span><span class="s4">var </span><span class="s1">m</span><span class="s0">=[];</span><span class="s4">var </span><span class="s1">E</span><span class="s0">=[];</span><span class="s4">var </span><span class="s1">N</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">T</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">A</span><span class="s0">=</span><span class="s3">1e8</span><span class="s0">;</span><span class="s4">var </span><span class="s1">w</span><span class="s0">=</span><span class="s3">1e-9</span><span class="s0">;</span><span class="s4">var </span><span class="s1">L</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">piTol</span><span class="s0">;</span><span class="s4">var </span><span class="s1">I</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">samplingType</span><span class="s0">;</span><span class="s4">var </span><span class="s1">_</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">nodeSeparation</span><span class="s0">;</span><span class="s4">var </span><span class="s1">C</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">M</span><span class="s0">=</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s4">false</span><span class="s0">;</span><span class="s4">while</span><span class="s0">(</span><span class="s1">r</span><span class="s0">&lt;</span><span class="s1">C</span><span class="s0">){</span><span class="s1">e</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">floor</span><span class="s0">(</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">random</span><span class="s0">()*</span><span class="s1">T</span><span class="s0">);</span><span class="s1">i</span><span class="s0">=</span><span class="s4">false</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">n</span><span class="s0">&lt;</span><span class="s1">r</span><span class="s0">;</span><span class="s1">n</span><span class="s0">++){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">p</span><span class="s0">[</span><span class="s1">n</span><span class="s0">]==</span><span class="s1">e</span><span class="s0">){</span><span class="s1">i</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s4">break</span><span class="s0">}}</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">i</span><span class="s0">){</span><span class="s1">p</span><span class="s0">[</span><span class="s1">r</span><span class="s0">]=</span><span class="s1">e</span><span class="s0">;</span><span class="s1">r</span><span class="s0">++}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">continue</span><span class="s0">}}};</span><span class="s4">var </span><span class="s1">x</span><span class="s0">=</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=[];</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">h</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">l</span><span class="s0">=[];</span><span class="s4">var </span><span class="s1">d</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">g</span><span class="s0">=</span><span class="s3">1</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">u</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">u</span><span class="s0">&lt;</span><span class="s1">T</span><span class="s0">;</span><span class="s1">u</span><span class="s0">++){</span><span class="s1">l</span><span class="s0">[</span><span class="s1">u</span><span class="s0">]=</span><span class="s1">A</span><span class="s0">}</span><span class="s1">n</span><span class="s0">[</span><span class="s1">a</span><span class="s0">]=</span><span class="s1">e</span><span class="s0">;</span><span class="s1">l</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">while</span><span class="s0">(</span><span class="s1">a</span><span class="s0">&gt;=</span><span class="s1">o</span><span class="s0">){</span><span class="s1">s</span><span class="s0">=</span><span class="s1">n</span><span class="s0">[</span><span class="s1">o</span><span class="s0">++];</span><span class="s4">var </span><span class="s1">p</span><span class="s0">=</span><span class="s1">f</span><span class="s0">[</span><span class="s1">s</span><span class="s0">];</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">m</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">m</span><span class="s0">&lt;</span><span class="s1">p</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">m</span><span class="s0">++){</span><span class="s1">h</span><span class="s0">=</span><span class="s1">c</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">p</span><span class="s0">[</span><span class="s1">m</span><span class="s0">]);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">l</span><span class="s0">[</span><span class="s1">h</span><span class="s0">]==</span><span class="s1">A</span><span class="s0">){</span><span class="s1">l</span><span class="s0">[</span><span class="s1">h</span><span class="s0">]=</span><span class="s1">l</span><span class="s0">[</span><span class="s1">s</span><span class="s0">]+</span><span class="s3">1</span><span class="s0">;</span><span class="s1">n</span><span class="s0">[++</span><span class="s1">a</span><span class="s0">]=</span><span class="s1">h</span><span class="s0">}}</span><span class="s1">y</span><span class="s0">[</span><span class="s1">s</span><span class="s0">][</span><span class="s1">r</span><span class="s0">]=</span><span class="s1">l</span><span class="s0">[</span><span class="s1">s</span><span class="s0">]*</span><span class="s1">_</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">i</span><span class="s0">){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">E</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">E</span><span class="s0">&lt;</span><span class="s1">T</span><span class="s0">;</span><span class="s1">E</span><span class="s0">++){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">y</span><span class="s0">[</span><span class="s1">E</span><span class="s0">][</span><span class="s1">r</span><span class="s0">]&lt;</span><span class="s1">v</span><span class="s0">[</span><span class="s1">E</span><span class="s0">])</span><span class="s1">v</span><span class="s0">[</span><span class="s1">E</span><span class="s0">]=</span><span class="s1">y</span><span class="s0">[</span><span class="s1">E</span><span class="s0">][</span><span class="s1">r</span><span class="s0">]}</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">N</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">N</span><span class="s0">&lt;</span><span class="s1">T</span><span class="s0">;</span><span class="s1">N</span><span class="s0">++){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">v</span><span class="s0">[</span><span class="s1">N</span><span class="s0">]&gt;</span><span class="s1">d</span><span class="s0">){</span><span class="s1">d</span><span class="s0">=</span><span class="s1">v</span><span class="s0">[</span><span class="s1">N</span><span class="s0">];</span><span class="s1">g</span><span class="s0">=</span><span class="s1">N</span><span class="s0">}}}</span><span class="s4">return </span><span class="s1">g</span><span class="s0">};</span><span class="s4">var </span><span class="s1">O</span><span class="s0">=</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">e</span><span class="s0">){</span><span class="s1">M</span><span class="s0">();</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">i</span><span class="s0">&lt;</span><span class="s1">C</span><span class="s0">;</span><span class="s1">i</span><span class="s0">++){</span><span class="s1">x</span><span class="s0">(</span><span class="s1">p</span><span class="s0">[</span><span class="s1">i</span><span class="s0">],</span><span class="s1">i</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s4">false</span><span class="s0">)}}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">r</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">floor</span><span class="s0">(</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">random</span><span class="s0">()*</span><span class="s1">T</span><span class="s0">);</span><span class="s1">N</span><span class="s0">=</span><span class="s1">r</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">n</span><span class="s0">&lt;</span><span class="s1">T</span><span class="s0">;</span><span class="s1">n</span><span class="s0">++){</span><span class="s1">v</span><span class="s0">[</span><span class="s1">n</span><span class="s0">]=</span><span class="s1">A</span><span class="s0">}</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">o</span><span class="s0">&lt;</span><span class="s1">C</span><span class="s0">;</span><span class="s1">o</span><span class="s0">++){</span><span class="s1">p</span><span class="s0">[</span><span class="s1">o</span><span class="s0">]=</span><span class="s1">r</span><span class="s0">;</span><span class="s1">r</span><span class="s0">=</span><span class="s1">x</span><span class="s0">(</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">e</span><span class="s0">)}}</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">a</span><span class="s0">&lt;</span><span class="s1">T</span><span class="s0">;</span><span class="s1">a</span><span class="s0">++){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">s</span><span class="s0">&lt;</span><span class="s1">C</span><span class="s0">;</span><span class="s1">s</span><span class="s0">++){</span><span class="s1">y</span><span class="s0">[</span><span class="s1">a</span><span class="s0">][</span><span class="s1">s</span><span class="s0">]*=</span><span class="s1">y</span><span class="s0">[</span><span class="s1">a</span><span class="s0">][</span><span class="s1">s</span><span class="s0">]}}</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">h</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">h</span><span class="s0">&lt;</span><span class="s1">C</span><span class="s0">;</span><span class="s1">h</span><span class="s0">++){</span><span class="s1">m</span><span class="s0">[</span><span class="s1">h</span><span class="s0">]=[]}</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">l</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">l</span><span class="s0">&lt;</span><span class="s1">C</span><span class="s0">;</span><span class="s1">l</span><span class="s0">++){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">c</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">c</span><span class="s0">&lt;</span><span class="s1">C</span><span class="s0">;</span><span class="s1">c</span><span class="s0">++){</span><span class="s1">m</span><span class="s0">[</span><span class="s1">l</span><span class="s0">][</span><span class="s1">c</span><span class="s0">]=</span><span class="s1">y</span><span class="s0">[</span><span class="s1">p</span><span class="s0">[</span><span class="s1">c</span><span class="s0">]][</span><span class="s1">l</span><span class="s0">]}}};</span><span class="s4">var </span><span class="s1">D</span><span class="s0">=</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s1">o</span><span class="s0">.</span><span class="s1">svd</span><span class="s0">(</span><span class="s1">m</span><span class="s0">);</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">S</span><span class="s0">;</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">U</span><span class="s0">;</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">V</span><span class="s0">;</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s1">r</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]*</span><span class="s1">r</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]*</span><span class="s1">r</span><span class="s0">[</span><span class="s3">0</span><span class="s0">];</span><span class="s4">var </span><span class="s1">h</span><span class="s0">=[];</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">l</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">l</span><span class="s0">&lt;</span><span class="s1">C</span><span class="s0">;</span><span class="s1">l</span><span class="s0">++){</span><span class="s1">h</span><span class="s0">[</span><span class="s1">l</span><span class="s0">]=[];</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">c</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">c</span><span class="s0">&lt;</span><span class="s1">C</span><span class="s0">;</span><span class="s1">c</span><span class="s0">++){</span><span class="s1">h</span><span class="s0">[</span><span class="s1">l</span><span class="s0">][</span><span class="s1">c</span><span class="s0">]=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">l</span><span class="s0">==</span><span class="s1">c</span><span class="s0">){</span><span class="s1">h</span><span class="s0">[</span><span class="s1">l</span><span class="s0">][</span><span class="s1">c</span><span class="s0">]=</span><span class="s1">r</span><span class="s0">[</span><span class="s1">l</span><span class="s0">]/(</span><span class="s1">r</span><span class="s0">[</span><span class="s1">l</span><span class="s0">]*</span><span class="s1">r</span><span class="s0">[</span><span class="s1">l</span><span class="s0">]+</span><span class="s1">s</span><span class="s0">/(</span><span class="s1">r</span><span class="s0">[</span><span class="s1">l</span><span class="s0">]*</span><span class="s1">r</span><span class="s0">[</span><span class="s1">l</span><span class="s0">]))}}}</span><span class="s1">E</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">multMat</span><span class="s0">(</span><span class="s1">n</span><span class="s0">.</span><span class="s1">multMat</span><span class="s0">(</span><span class="s1">a</span><span class="s0">,</span><span class="s1">h</span><span class="s0">),</span><span class="s1">n</span><span class="s0">.</span><span class="s1">transpose</span><span class="s0">(</span><span class="s1">i</span><span class="s0">))};</span><span class="s4">var </span><span class="s1">R</span><span class="s0">=</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=[];</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=[];</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=[];</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=[];</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">h</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">h</span><span class="s0">&lt;</span><span class="s1">T</span><span class="s0">;</span><span class="s1">h</span><span class="s0">++){</span><span class="s1">i</span><span class="s0">[</span><span class="s1">h</span><span class="s0">]=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">random</span><span class="s0">();</span><span class="s1">o</span><span class="s0">[</span><span class="s1">h</span><span class="s0">]=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">random</span><span class="s0">()}</span><span class="s1">i</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">normalize</span><span class="s0">(</span><span class="s1">i</span><span class="s0">);</span><span class="s1">o</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">normalize</span><span class="s0">(</span><span class="s1">o</span><span class="s0">);</span><span class="s4">var </span><span class="s1">l</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">c</span><span class="s0">=</span><span class="s1">w</span><span class="s0">;</span><span class="s4">var </span><span class="s1">d</span><span class="s0">=</span><span class="s1">w</span><span class="s0">;</span><span class="s4">var </span><span class="s1">f</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">while</span><span class="s0">(</span><span class="s4">true</span><span class="s0">){</span><span class="s1">l</span><span class="s0">++;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">p</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">p</span><span class="s0">&lt;</span><span class="s1">T</span><span class="s0">;</span><span class="s1">p</span><span class="s0">++){</span><span class="s1">a</span><span class="s0">[</span><span class="s1">p</span><span class="s0">]=</span><span class="s1">i</span><span class="s0">[</span><span class="s1">p</span><span class="s0">]}</span><span class="s1">i</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">multGamma</span><span class="s0">(</span><span class="s1">n</span><span class="s0">.</span><span class="s1">multL</span><span class="s0">(</span><span class="s1">n</span><span class="s0">.</span><span class="s1">multGamma</span><span class="s0">(</span><span class="s1">a</span><span class="s0">),</span><span class="s1">y</span><span class="s0">,</span><span class="s1">E</span><span class="s0">));</span><span class="s1">e</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">dotProduct</span><span class="s0">(</span><span class="s1">a</span><span class="s0">,</span><span class="s1">i</span><span class="s0">);</span><span class="s1">i</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">normalize</span><span class="s0">(</span><span class="s1">i</span><span class="s0">);</span><span class="s1">c</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">dotProduct</span><span class="s0">(</span><span class="s1">a</span><span class="s0">,</span><span class="s1">i</span><span class="s0">);</span><span class="s1">f</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">abs</span><span class="s0">(</span><span class="s1">c</span><span class="s0">/</span><span class="s1">d</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">f</span><span class="s0">&lt;=</span><span class="s3">1</span><span class="s0">+</span><span class="s1">L</span><span class="s0">&amp;&amp;</span><span class="s1">f</span><span class="s0">&gt;=</span><span class="s3">1</span><span class="s0">){</span><span class="s4">break</span><span class="s0">}</span><span class="s1">d</span><span class="s0">=</span><span class="s1">c</span><span class="s0">}</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">v</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">v</span><span class="s0">&lt;</span><span class="s1">T</span><span class="s0">;</span><span class="s1">v</span><span class="s0">++){</span><span class="s1">a</span><span class="s0">[</span><span class="s1">v</span><span class="s0">]=</span><span class="s1">i</span><span class="s0">[</span><span class="s1">v</span><span class="s0">]}</span><span class="s1">l</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">d</span><span class="s0">=</span><span class="s1">w</span><span class="s0">;</span><span class="s4">while</span><span class="s0">(</span><span class="s4">true</span><span class="s0">){</span><span class="s1">l</span><span class="s0">++;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">m</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">m</span><span class="s0">&lt;</span><span class="s1">T</span><span class="s0">;</span><span class="s1">m</span><span class="s0">++){</span><span class="s1">s</span><span class="s0">[</span><span class="s1">m</span><span class="s0">]=</span><span class="s1">o</span><span class="s0">[</span><span class="s1">m</span><span class="s0">]}</span><span class="s1">s</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">minusOp</span><span class="s0">(</span><span class="s1">s</span><span class="s0">,</span><span class="s1">n</span><span class="s0">.</span><span class="s1">multCons</span><span class="s0">(</span><span class="s1">a</span><span class="s0">,</span><span class="s1">n</span><span class="s0">.</span><span class="s1">dotProduct</span><span class="s0">(</span><span class="s1">a</span><span class="s0">,</span><span class="s1">s</span><span class="s0">)));</span><span class="s1">o</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">multGamma</span><span class="s0">(</span><span class="s1">n</span><span class="s0">.</span><span class="s1">multL</span><span class="s0">(</span><span class="s1">n</span><span class="s0">.</span><span class="s1">multGamma</span><span class="s0">(</span><span class="s1">s</span><span class="s0">),</span><span class="s1">y</span><span class="s0">,</span><span class="s1">E</span><span class="s0">));</span><span class="s1">r</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">dotProduct</span><span class="s0">(</span><span class="s1">s</span><span class="s0">,</span><span class="s1">o</span><span class="s0">);</span><span class="s1">o</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">normalize</span><span class="s0">(</span><span class="s1">o</span><span class="s0">);</span><span class="s1">c</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">dotProduct</span><span class="s0">(</span><span class="s1">s</span><span class="s0">,</span><span class="s1">o</span><span class="s0">);</span><span class="s1">f</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">abs</span><span class="s0">(</span><span class="s1">c</span><span class="s0">/</span><span class="s1">d</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">f</span><span class="s0">&lt;=</span><span class="s3">1</span><span class="s0">+</span><span class="s1">L</span><span class="s0">&amp;&amp;</span><span class="s1">f</span><span class="s0">&gt;=</span><span class="s3">1</span><span class="s0">){</span><span class="s4">break</span><span class="s0">}</span><span class="s1">d</span><span class="s0">=</span><span class="s1">c</span><span class="s0">}</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">N</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">N</span><span class="s0">&lt;</span><span class="s1">T</span><span class="s0">;</span><span class="s1">N</span><span class="s0">++){</span><span class="s1">s</span><span class="s0">[</span><span class="s1">N</span><span class="s0">]=</span><span class="s1">o</span><span class="s0">[</span><span class="s1">N</span><span class="s0">]}</span><span class="s1">g</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">multCons</span><span class="s0">(</span><span class="s1">a</span><span class="s0">,</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">sqrt</span><span class="s0">(</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">abs</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)));</span><span class="s1">u</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">multCons</span><span class="s0">(</span><span class="s1">s</span><span class="s0">,</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">sqrt</span><span class="s0">(</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">abs</span><span class="s0">(</span><span class="s1">r</span><span class="s0">)))};</span><span class="s1">i</span><span class="s0">.</span><span class="s1">connectComponents</span><span class="s0">(</span><span class="s1">r</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">i</span><span class="s0">.</span><span class="s1">getTopMostNodes</span><span class="s0">(</span><span class="s1">s</span><span class="s0">),</span><span class="s1">l</span><span class="s0">);</span><span class="s1">h</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s1">i</span><span class="s0">.</span><span class="s1">connectComponents</span><span class="s0">(</span><span class="s1">r</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">i</span><span class="s0">.</span><span class="s1">getTopMostNodes</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">descendants</span><span class="s0">().</span><span class="s1">intersection</span><span class="s0">(</span><span class="s1">a</span><span class="s0">)),</span><span class="s1">l</span><span class="s0">)}));</span><span class="s4">var </span><span class="s1">b</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">G</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">G</span><span class="s0">&lt;</span><span class="s1">s</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">G</span><span class="s0">++){</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">s</span><span class="s0">[</span><span class="s1">G</span><span class="s0">].</span><span class="s1">isParent</span><span class="s0">()){</span><span class="s1">c</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">s</span><span class="s0">[</span><span class="s1">G</span><span class="s0">].</span><span class="s1">id</span><span class="s0">(),</span><span class="s1">b</span><span class="s0">++)}}</span><span class="s4">var </span><span class="s1">F</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s4">var </span><span class="s1">S</span><span class="s0">=</span><span class="s4">false</span><span class="s0">;</span><span class="s4">var </span><span class="s1">P</span><span class="s0">=</span><span class="s1">undefined</span><span class="s0">;</span><span class="s4">try</span><span class="s0">{</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">U</span><span class="s0">=</span><span class="s1">l</span><span class="s0">.</span><span class="s1">keys</span><span class="s0">()[</span><span class="s1">Symbol</span><span class="s0">.</span><span class="s1">iterator</span><span class="s0">](),</span><span class="s1">k</span><span class="s0">;!(</span><span class="s1">F</span><span class="s0">=(</span><span class="s1">k</span><span class="s0">=</span><span class="s1">U</span><span class="s0">.</span><span class="s1">next</span><span class="s0">()).</span><span class="s1">done</span><span class="s0">);</span><span class="s1">F</span><span class="s0">=</span><span class="s4">true</span><span class="s0">){</span><span class="s4">var </span><span class="s1">Y</span><span class="s0">=</span><span class="s1">k</span><span class="s0">.</span><span class="s1">value</span><span class="s0">;</span><span class="s1">c</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">Y</span><span class="s0">,</span><span class="s1">b</span><span class="s0">++)}}</span><span class="s4">catch</span><span class="s0">(</span><span class="s1">nt</span><span class="s0">){</span><span class="s1">S</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s1">P</span><span class="s0">=</span><span class="s1">nt</span><span class="s0">}</span><span class="s4">finally</span><span class="s0">{</span><span class="s4">try</span><span class="s0">{</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">F</span><span class="s0">&amp;&amp;</span><span class="s1">U</span><span class="s0">.</span><span class="s1">return</span><span class="s0">){</span><span class="s1">U</span><span class="s0">.</span><span class="s1">return</span><span class="s0">()}}</span><span class="s4">finally</span><span class="s0">{</span><span class="s4">if</span><span class="s0">(</span><span class="s1">S</span><span class="s0">){</span><span class="s4">throw </span><span class="s1">P</span><span class="s0">}}}</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">H</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">H</span><span class="s0">&lt;</span><span class="s1">c</span><span class="s0">.</span><span class="s1">size</span><span class="s0">;</span><span class="s1">H</span><span class="s0">++){</span><span class="s1">f</span><span class="s0">[</span><span class="s1">H</span><span class="s0">]=[]}</span><span class="s1">h</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">children</span><span class="s0">().</span><span class="s1">intersection</span><span class="s0">(</span><span class="s1">a</span><span class="s0">);</span><span class="s4">while</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">nodes</span><span class="s0">(</span><span class="s2">&quot;:childless&quot;</span><span class="s0">).</span><span class="s1">length</span><span class="s0">==</span><span class="s3">0</span><span class="s0">){</span><span class="s1">e</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">nodes</span><span class="s0">()[</span><span class="s3">0</span><span class="s0">].</span><span class="s1">children</span><span class="s0">().</span><span class="s1">intersection</span><span class="s0">(</span><span class="s1">a</span><span class="s0">)}</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">nodes</span><span class="s0">(</span><span class="s2">&quot;:childless&quot;</span><span class="s0">)[</span><span class="s3">0</span><span class="s0">].</span><span class="s1">connectedEdges</span><span class="s0">().</span><span class="s1">length</span><span class="s0">;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">nodes</span><span class="s0">(</span><span class="s2">&quot;:childless&quot;</span><span class="s0">).</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">connectedEdges</span><span class="s0">().</span><span class="s1">length</span><span class="s0">&lt;</span><span class="s1">i</span><span class="s0">){</span><span class="s1">i</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">connectedEdges</span><span class="s0">().</span><span class="s1">length</span><span class="s0">;</span><span class="s1">r</span><span class="s0">=</span><span class="s1">e</span><span class="s0">}}));</span><span class="s1">d</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">id</span><span class="s0">(),</span><span class="s1">e</span><span class="s0">.</span><span class="s1">nodes</span><span class="s0">(</span><span class="s2">&quot;:childless&quot;</span><span class="s0">)[</span><span class="s1">r</span><span class="s0">].</span><span class="s1">id</span><span class="s0">())}));</span><span class="s1">s</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isParent</span><span class="s0">())</span><span class="s1">e</span><span class="s0">=</span><span class="s1">c</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">d</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">id</span><span class="s0">()));</span><span class="s4">else </span><span class="s1">e</span><span class="s0">=</span><span class="s1">c</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">id</span><span class="s0">());</span><span class="s1">t</span><span class="s0">.</span><span class="s1">neighborhood</span><span class="s0">().</span><span class="s1">nodes</span><span class="s0">().</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">r</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">a</span><span class="s0">.</span><span class="s1">intersection</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">edgesWith</span><span class="s0">(</span><span class="s1">r</span><span class="s0">)).</span><span class="s1">length</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">isParent</span><span class="s0">())</span><span class="s1">f</span><span class="s0">[</span><span class="s1">e</span><span class="s0">].</span><span class="s1">push</span><span class="s0">(</span><span class="s1">d</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">id</span><span class="s0">()));</span><span class="s4">else </span><span class="s1">f</span><span class="s0">[</span><span class="s1">e</span><span class="s0">].</span><span class="s1">push</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">id</span><span class="s0">())}}))}));</span><span class="s4">var </span><span class="s1">X</span><span class="s0">=</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">c</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">);</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s1">l</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">).</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">getElementById</span><span class="s0">(</span><span class="s1">t</span><span class="s0">).</span><span class="s1">isParent</span><span class="s0">())</span><span class="s1">n</span><span class="s0">=</span><span class="s1">d</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">);</span><span class="s4">else </span><span class="s1">n</span><span class="s0">=</span><span class="s1">t</span><span class="s0">;</span><span class="s1">f</span><span class="s0">[</span><span class="s1">i</span><span class="s0">].</span><span class="s1">push</span><span class="s0">(</span><span class="s1">n</span><span class="s0">);</span><span class="s1">f</span><span class="s0">[</span><span class="s1">c</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">n</span><span class="s0">)].</span><span class="s1">push</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)}))};</span><span class="s4">var </span><span class="s1">z</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s4">var </span><span class="s1">V</span><span class="s0">=</span><span class="s4">false</span><span class="s0">;</span><span class="s4">var </span><span class="s1">B</span><span class="s0">=</span><span class="s1">undefined</span><span class="s0">;</span><span class="s4">try</span><span class="s0">{</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">W</span><span class="s0">=</span><span class="s1">l</span><span class="s0">.</span><span class="s1">keys</span><span class="s0">()[</span><span class="s1">Symbol</span><span class="s0">.</span><span class="s1">iterator</span><span class="s0">](),</span><span class="s1">j</span><span class="s0">;!(</span><span class="s1">z</span><span class="s0">=(</span><span class="s1">j</span><span class="s0">=</span><span class="s1">W</span><span class="s0">.</span><span class="s1">next</span><span class="s0">()).</span><span class="s1">done</span><span class="s0">);</span><span class="s1">z</span><span class="s0">=</span><span class="s4">true</span><span class="s0">){</span><span class="s4">var </span><span class="s1">q</span><span class="s0">=</span><span class="s1">j</span><span class="s0">.</span><span class="s1">value</span><span class="s0">;</span><span class="s1">X</span><span class="s0">(</span><span class="s1">q</span><span class="s0">)}}</span><span class="s4">catch</span><span class="s0">(</span><span class="s1">nt</span><span class="s0">){</span><span class="s1">V</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s1">B</span><span class="s0">=</span><span class="s1">nt</span><span class="s0">}</span><span class="s4">finally</span><span class="s0">{</span><span class="s4">try</span><span class="s0">{</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">z</span><span class="s0">&amp;&amp;</span><span class="s1">W</span><span class="s0">.</span><span class="s1">return</span><span class="s0">){</span><span class="s1">W</span><span class="s0">.</span><span class="s1">return</span><span class="s0">()}}</span><span class="s4">finally</span><span class="s0">{</span><span class="s4">if</span><span class="s0">(</span><span class="s1">V</span><span class="s0">){</span><span class="s4">throw </span><span class="s1">B</span><span class="s0">}}}</span><span class="s1">T</span><span class="s0">=</span><span class="s1">c</span><span class="s0">.</span><span class="s1">size</span><span class="s0">;</span><span class="s4">var </span><span class="s1">$</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">T</span><span class="s0">&gt;</span><span class="s3">2</span><span class="s0">){</span><span class="s1">C</span><span class="s0">=</span><span class="s1">T</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">sampleSize</span><span class="s0">?</span><span class="s1">T</span><span class="s0">:</span><span class="s1">e</span><span class="s0">.</span><span class="s1">sampleSize</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">K</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">K</span><span class="s0">&lt;</span><span class="s1">T</span><span class="s0">;</span><span class="s1">K</span><span class="s0">++){</span><span class="s1">y</span><span class="s0">[</span><span class="s1">K</span><span class="s0">]=[]}</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">Z</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">Z</span><span class="s0">&lt;</span><span class="s1">C</span><span class="s0">;</span><span class="s1">Z</span><span class="s0">++){</span><span class="s1">E</span><span class="s0">[</span><span class="s1">Z</span><span class="s0">]=[]}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">quality</span><span class="s0">==</span><span class="s2">&quot;draft&quot;</span><span class="s0">||</span><span class="s1">e</span><span class="s0">.</span><span class="s1">step</span><span class="s0">==</span><span class="s2">&quot;all&quot;</span><span class="s0">){</span><span class="s1">O</span><span class="s0">(</span><span class="s1">I</span><span class="s0">);</span><span class="s1">D</span><span class="s0">();</span><span class="s1">R</span><span class="s0">();</span><span class="s1">$</span><span class="s0">={</span><span class="s1">nodeIndexes</span><span class="s0">:</span><span class="s1">c</span><span class="s0">,</span><span class="s1">xCoords</span><span class="s0">:</span><span class="s1">g</span><span class="s0">,</span><span class="s1">yCoords</span><span class="s0">:</span><span class="s1">u</span><span class="s0">}}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">c</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s1">g</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">getElementById</span><span class="s0">(</span><span class="s1">e</span><span class="s0">).</span><span class="s1">position</span><span class="s0">(</span><span class="s2">&quot;x&quot;</span><span class="s0">));</span><span class="s1">u</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">getElementById</span><span class="s0">(</span><span class="s1">e</span><span class="s0">).</span><span class="s1">position</span><span class="s0">(</span><span class="s2">&quot;y&quot;</span><span class="s0">))}));</span><span class="s1">$</span><span class="s0">={</span><span class="s1">nodeIndexes</span><span class="s0">:</span><span class="s1">c</span><span class="s0">,</span><span class="s1">xCoords</span><span class="s0">:</span><span class="s1">g</span><span class="s0">,</span><span class="s1">yCoords</span><span class="s0">:</span><span class="s1">u</span><span class="s0">}}</span><span class="s4">return </span><span class="s1">$</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">var </span><span class="s1">Q</span><span class="s0">=</span><span class="s1">c</span><span class="s0">.</span><span class="s1">keys</span><span class="s0">();</span><span class="s4">var </span><span class="s1">J</span><span class="s0">=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">getElementById</span><span class="s0">(</span><span class="s1">Q</span><span class="s0">.</span><span class="s1">next</span><span class="s0">().</span><span class="s1">value</span><span class="s0">);</span><span class="s4">var </span><span class="s1">tt</span><span class="s0">=</span><span class="s1">J</span><span class="s0">.</span><span class="s1">position</span><span class="s0">();</span><span class="s4">var </span><span class="s1">et</span><span class="s0">=</span><span class="s1">J</span><span class="s0">.</span><span class="s1">outerWidth</span><span class="s0">();</span><span class="s1">g</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">tt</span><span class="s0">.</span><span class="s1">x</span><span class="s0">);</span><span class="s1">u</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">tt</span><span class="s0">.</span><span class="s1">y</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">T</span><span class="s0">==</span><span class="s3">2</span><span class="s0">){</span><span class="s4">var </span><span class="s1">rt</span><span class="s0">=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">getElementById</span><span class="s0">(</span><span class="s1">Q</span><span class="s0">.</span><span class="s1">next</span><span class="s0">().</span><span class="s1">value</span><span class="s0">);</span><span class="s4">var </span><span class="s1">it</span><span class="s0">=</span><span class="s1">rt</span><span class="s0">.</span><span class="s1">outerWidth</span><span class="s0">();</span><span class="s1">g</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">tt</span><span class="s0">.</span><span class="s1">x</span><span class="s0">+</span><span class="s1">et</span><span class="s0">/</span><span class="s3">2</span><span class="s0">+</span><span class="s1">it</span><span class="s0">/</span><span class="s3">2</span><span class="s0">+</span><span class="s1">e</span><span class="s0">.</span><span class="s1">idealEdgeLength</span><span class="s0">);</span><span class="s1">u</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">tt</span><span class="s0">.</span><span class="s1">y</span><span class="s0">)}</span><span class="s1">$</span><span class="s0">={</span><span class="s1">nodeIndexes</span><span class="s0">:</span><span class="s1">c</span><span class="s0">,</span><span class="s1">xCoords</span><span class="s0">:</span><span class="s1">g</span><span class="s0">,</span><span class="s1">yCoords</span><span class="s0">:</span><span class="s1">u</span><span class="s0">};</span><span class="s4">return </span><span class="s1">$</span><span class="s0">}};</span><span class="s1">t</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">={</span><span class="s1">spectralLayout</span><span class="s0">:</span><span class="s1">a</span><span class="s0">}},</span><span class="s3">579</span><span class="s0">:(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">)=&gt;{</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">212</span><span class="s0">);</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">e</span><span class="s0">){</span><span class="s4">return</span><span class="s0">}</span><span class="s1">e</span><span class="s0">(</span><span class="s2">&quot;layout&quot;</span><span class="s0">,</span><span class="s2">&quot;fcose&quot;</span><span class="s0">,</span><span class="s1">i</span><span class="s0">)};</span><span class="s4">if</span><span class="s0">(</span><span class="s4">typeof </span><span class="s1">cytoscape</span><span class="s0">!==</span><span class="s2">&quot;undefined&quot;</span><span class="s0">){</span><span class="s1">n</span><span class="s0">(</span><span class="s1">cytoscape</span><span class="s0">)}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">=</span><span class="s1">n</span><span class="s0">},</span><span class="s3">140</span><span class="s0">:</span><span class="s1">e</span><span class="s0">=&gt;{</span><span class="s1">e</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">=</span><span class="s1">t</span><span class="s0">}};</span><span class="s4">var </span><span class="s1">r</span><span class="s0">={};</span><span class="s4">function </span><span class="s1">i</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">r</span><span class="s0">[</span><span class="s1">t</span><span class="s0">];</span><span class="s4">if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">!==</span><span class="s1">undefined</span><span class="s0">){</span><span class="s4">return </span><span class="s1">n</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">}</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s1">r</span><span class="s0">[</span><span class="s1">t</span><span class="s0">]={</span><span class="s1">exports</span><span class="s0">:{}};</span><span class="s1">e</span><span class="s0">[</span><span class="s1">t</span><span class="s0">](</span><span class="s1">o</span><span class="s0">,</span><span class="s1">o</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">,</span><span class="s1">i</span><span class="s0">);</span><span class="s4">return </span><span class="s1">o</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">}</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">579</span><span class="s0">);</span><span class="s4">return </span><span class="s1">n</span><span class="s0">})()}))},</span><span class="s3">41709</span><span class="s0">:</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){(</span><span class="s4">function </span><span class="s1">e</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">n</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s4">true</span><span class="s0">)</span><span class="s1">t</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">=</span><span class="s1">n</span><span class="s0">(</span><span class="s1">r</span><span class="s0">(</span><span class="s3">1917</span><span class="s0">));</span><span class="s4">else</span><span class="s0">{}})(</span><span class="s4">this</span><span class="s0">,(</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">return</span><span class="s0">(()=&gt;{</span><span class="s2">&quot;use strict&quot;</span><span class="s0">;</span><span class="s4">var </span><span class="s1">e</span><span class="s0">={</span><span class="s3">45</span><span class="s0">:(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">)=&gt;{</span><span class="s4">var </span><span class="s1">i</span><span class="s0">={};</span><span class="s1">i</span><span class="s0">.</span><span class="s1">layoutBase</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">551</span><span class="s0">);</span><span class="s1">i</span><span class="s0">.</span><span class="s1">CoSEConstants</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">806</span><span class="s0">);</span><span class="s1">i</span><span class="s0">.</span><span class="s1">CoSEEdge</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">767</span><span class="s0">);</span><span class="s1">i</span><span class="s0">.</span><span class="s1">CoSEGraph</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">880</span><span class="s0">);</span><span class="s1">i</span><span class="s0">.</span><span class="s1">CoSEGraphManager</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">578</span><span class="s0">);</span><span class="s1">i</span><span class="s0">.</span><span class="s1">CoSELayout</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">765</span><span class="s0">);</span><span class="s1">i</span><span class="s0">.</span><span class="s1">CoSENode</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">991</span><span class="s0">);</span><span class="s1">i</span><span class="s0">.</span><span class="s1">ConstraintHandler</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">902</span><span class="s0">);</span><span class="s1">t</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">=</span><span class="s1">i</span><span class="s0">},</span><span class="s3">806</span><span class="s0">:(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">)=&gt;{</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">551</span><span class="s0">).</span><span class="s1">FDLayoutConstants</span><span class="s0">;</span><span class="s4">function </span><span class="s1">n</span><span class="s0">(){}</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">o </span><span class="s4">in </span><span class="s1">i</span><span class="s0">){</span><span class="s1">n</span><span class="s0">[</span><span class="s1">o</span><span class="s0">]=</span><span class="s1">i</span><span class="s0">[</span><span class="s1">o</span><span class="s0">]}</span><span class="s1">n</span><span class="s0">.</span><span class="s1">DEFAULT_USE_MULTI_LEVEL_SCALING</span><span class="s0">=</span><span class="s4">false</span><span class="s0">;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">DEFAULT_RADIAL_SEPARATION</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">DEFAULT_EDGE_LENGTH</span><span class="s0">;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">DEFAULT_COMPONENT_SEPERATION</span><span class="s0">=</span><span class="s3">60</span><span class="s0">;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">TILE</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">TILING_PADDING_VERTICAL</span><span class="s0">=</span><span class="s3">10</span><span class="s0">;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">TILING_PADDING_HORIZONTAL</span><span class="s0">=</span><span class="s3">10</span><span class="s0">;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">TRANSFORM_ON_CONSTRAINT_HANDLING</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">ENFORCE_CONSTRAINTS</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">APPLY_LAYOUT</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">RELAX_MOVEMENT_ON_CONSTRAINTS</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">TREE_REDUCTION_ON_INCREMENTAL</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">PURE_INCREMENTAL</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">DEFAULT_INCREMENTAL</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">=</span><span class="s1">n</span><span class="s0">},</span><span class="s3">767</span><span class="s0">:(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">)=&gt;{</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">551</span><span class="s0">).</span><span class="s1">FDLayoutEdge</span><span class="s0">;</span><span class="s4">function </span><span class="s1">n</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s1">i</span><span class="s0">.</span><span class="s1">call</span><span class="s0">(</span><span class="s4">this</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">)}</span><span class="s1">n</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">=</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">create</span><span class="s0">(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">);</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">o </span><span class="s4">in </span><span class="s1">i</span><span class="s0">){</span><span class="s1">n</span><span class="s0">[</span><span class="s1">o</span><span class="s0">]=</span><span class="s1">i</span><span class="s0">[</span><span class="s1">o</span><span class="s0">]}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">=</span><span class="s1">n</span><span class="s0">},</span><span class="s3">880</span><span class="s0">:(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">)=&gt;{</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">551</span><span class="s0">).</span><span class="s1">LGraph</span><span class="s0">;</span><span class="s4">function </span><span class="s1">n</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s1">i</span><span class="s0">.</span><span class="s1">call</span><span class="s0">(</span><span class="s4">this</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">)}</span><span class="s1">n</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">=</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">create</span><span class="s0">(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">);</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">o </span><span class="s4">in </span><span class="s1">i</span><span class="s0">){</span><span class="s1">n</span><span class="s0">[</span><span class="s1">o</span><span class="s0">]=</span><span class="s1">i</span><span class="s0">[</span><span class="s1">o</span><span class="s0">]}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">=</span><span class="s1">n</span><span class="s0">},</span><span class="s3">578</span><span class="s0">:(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">)=&gt;{</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">551</span><span class="s0">).</span><span class="s1">LGraphManager</span><span class="s0">;</span><span class="s4">function </span><span class="s1">n</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s1">i</span><span class="s0">.</span><span class="s1">call</span><span class="s0">(</span><span class="s4">this</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)}</span><span class="s1">n</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">=</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">create</span><span class="s0">(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">);</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">o </span><span class="s4">in </span><span class="s1">i</span><span class="s0">){</span><span class="s1">n</span><span class="s0">[</span><span class="s1">o</span><span class="s0">]=</span><span class="s1">i</span><span class="s0">[</span><span class="s1">o</span><span class="s0">]}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">=</span><span class="s1">n</span><span class="s0">},</span><span class="s3">765</span><span class="s0">:(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">)=&gt;{</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">551</span><span class="s0">).</span><span class="s1">FDLayout</span><span class="s0">;</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">578</span><span class="s0">);</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">880</span><span class="s0">);</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">991</span><span class="s0">);</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">767</span><span class="s0">);</span><span class="s4">var </span><span class="s1">h</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">806</span><span class="s0">);</span><span class="s4">var </span><span class="s1">l</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">902</span><span class="s0">);</span><span class="s4">var </span><span class="s1">c</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">551</span><span class="s0">).</span><span class="s1">FDLayoutConstants</span><span class="s0">;</span><span class="s4">var </span><span class="s1">d</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">551</span><span class="s0">).</span><span class="s1">LayoutConstants</span><span class="s0">;</span><span class="s4">var </span><span class="s1">f</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">551</span><span class="s0">).</span><span class="s1">Point</span><span class="s0">;</span><span class="s4">var </span><span class="s1">g</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">551</span><span class="s0">).</span><span class="s1">PointD</span><span class="s0">;</span><span class="s4">var </span><span class="s1">u</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">551</span><span class="s0">).</span><span class="s1">DimensionD</span><span class="s0">;</span><span class="s4">var </span><span class="s1">p</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">551</span><span class="s0">).</span><span class="s1">Layout</span><span class="s0">;</span><span class="s4">var </span><span class="s1">v</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">551</span><span class="s0">).</span><span class="s1">Integer</span><span class="s0">;</span><span class="s4">var </span><span class="s1">y</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">551</span><span class="s0">).</span><span class="s1">IGeometry</span><span class="s0">;</span><span class="s4">var </span><span class="s1">m</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">551</span><span class="s0">).</span><span class="s1">LGraph</span><span class="s0">;</span><span class="s4">var </span><span class="s1">E</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">551</span><span class="s0">).</span><span class="s1">Transform</span><span class="s0">;</span><span class="s4">var </span><span class="s1">N</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">551</span><span class="s0">).</span><span class="s1">LinkedList</span><span class="s0">;</span><span class="s4">function </span><span class="s1">T</span><span class="s0">(){</span><span class="s1">i</span><span class="s0">.</span><span class="s1">call</span><span class="s0">(</span><span class="s4">this</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">toBeTiled</span><span class="s0">={};</span><span class="s4">this</span><span class="s0">.</span><span class="s1">constraints</span><span class="s0">={}}</span><span class="s1">T</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">=</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">create</span><span class="s0">(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">);</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">A </span><span class="s4">in </span><span class="s1">i</span><span class="s0">){</span><span class="s1">T</span><span class="s0">[</span><span class="s1">A</span><span class="s0">]=</span><span class="s1">i</span><span class="s0">[</span><span class="s1">A</span><span class="s0">]}</span><span class="s1">T</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">newGraphManager</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">var </span><span class="s1">t</span><span class="s0">=</span><span class="s4">new </span><span class="s1">n</span><span class="s0">(</span><span class="s4">this</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">=</span><span class="s1">t</span><span class="s0">;</span><span class="s4">return </span><span class="s1">t</span><span class="s0">};</span><span class="s1">T</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">newGraph</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">return new </span><span class="s1">o</span><span class="s0">(</span><span class="s4">null</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)};</span><span class="s1">T</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">newNode</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">return new </span><span class="s1">a</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)};</span><span class="s1">T</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">newEdge</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">return new </span><span class="s1">s</span><span class="s0">(</span><span class="s4">null</span><span class="s0">,</span><span class="s4">null</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)};</span><span class="s1">T</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">initParameters</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s1">i</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">initParameters</span><span class="s0">.</span><span class="s1">call</span><span class="s0">(</span><span class="s4">this</span><span class="s0">,</span><span class="s1">arguments</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(!</span><span class="s4">this</span><span class="s0">.</span><span class="s1">isSubLayout</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">h</span><span class="s0">.</span><span class="s1">DEFAULT_EDGE_LENGTH</span><span class="s0">&lt;</span><span class="s3">10</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">idealEdgeLength</span><span class="s0">=</span><span class="s3">10</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">this</span><span class="s0">.</span><span class="s1">idealEdgeLength</span><span class="s0">=</span><span class="s1">h</span><span class="s0">.</span><span class="s1">DEFAULT_EDGE_LENGTH</span><span class="s0">}</span><span class="s4">this</span><span class="s0">.</span><span class="s1">useSmartIdealEdgeLengthCalculation</span><span class="s0">=</span><span class="s1">h</span><span class="s0">.</span><span class="s1">DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">gravityConstant</span><span class="s0">=</span><span class="s1">c</span><span class="s0">.</span><span class="s1">DEFAULT_GRAVITY_STRENGTH</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">compoundGravityConstant</span><span class="s0">=</span><span class="s1">c</span><span class="s0">.</span><span class="s1">DEFAULT_COMPOUND_GRAVITY_STRENGTH</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">gravityRangeFactor</span><span class="s0">=</span><span class="s1">c</span><span class="s0">.</span><span class="s1">DEFAULT_GRAVITY_RANGE_FACTOR</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">compoundGravityRangeFactor</span><span class="s0">=</span><span class="s1">c</span><span class="s0">.</span><span class="s1">DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">prunedNodesAll</span><span class="s0">=[];</span><span class="s4">this</span><span class="s0">.</span><span class="s1">growTreeIterations</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">afterGrowthIterations</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">isTreeGrowing</span><span class="s0">=</span><span class="s4">false</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">isGrowthFinished</span><span class="s0">=</span><span class="s4">false</span><span class="s0">}};</span><span class="s1">T</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">initSpringEmbedder</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s1">i</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">initSpringEmbedder</span><span class="s0">.</span><span class="s1">call</span><span class="s0">(</span><span class="s4">this</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">coolingCycle</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">maxCoolingCycle</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">maxIterations</span><span class="s0">/</span><span class="s1">c</span><span class="s0">.</span><span class="s1">CONVERGENCE_CHECK_PERIOD</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">finalTemperature</span><span class="s0">=</span><span class="s3">.04</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">coolingAdjuster</span><span class="s0">=</span><span class="s3">1</span><span class="s0">};</span><span class="s1">T</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">layout</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">var </span><span class="s1">t</span><span class="s0">=</span><span class="s1">d</span><span class="s0">.</span><span class="s1">DEFAULT_CREATE_BENDS_AS_NEEDED</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">createBendpoints</span><span class="s0">();</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">resetAllEdges</span><span class="s0">()}</span><span class="s4">this</span><span class="s0">.</span><span class="s1">level</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">classicLayout</span><span class="s0">()};</span><span class="s1">T</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">classicLayout</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">nodesWithGravity</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">calculateNodesToApplyGravitationTo</span><span class="s0">();</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">setAllNodesToApplyGravitation</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">nodesWithGravity</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">calcNoOfChildrenForAllNodes</span><span class="s0">();</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">calcLowestCommonAncestors</span><span class="s0">();</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">calcInclusionTreeDepths</span><span class="s0">();</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">getRoot</span><span class="s0">().</span><span class="s1">calcEstimatedSize</span><span class="s0">();</span><span class="s4">this</span><span class="s0">.</span><span class="s1">calcIdealEdgeLengths</span><span class="s0">();</span><span class="s4">if</span><span class="s0">(!</span><span class="s4">this</span><span class="s0">.</span><span class="s1">incremental</span><span class="s0">){</span><span class="s4">var </span><span class="s1">t</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getFlatForest</span><span class="s0">();</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">length</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">positionNodesRadially</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">this</span><span class="s0">.</span><span class="s1">reduceTrees</span><span class="s0">();</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">resetAllNodesToApplyGravitation</span><span class="s0">();</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Set</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getAllNodes</span><span class="s0">());</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">nodesWithGravity</span><span class="s0">.</span><span class="s1">filter</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">return </span><span class="s1">e</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)}));</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">setAllNodesToApplyGravitation</span><span class="s0">(</span><span class="s1">r</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">positionNodesRandomly</span><span class="s0">()}}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">if</span><span class="s0">(</span><span class="s1">h</span><span class="s0">.</span><span class="s1">TREE_REDUCTION_ON_INCREMENTAL</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">reduceTrees</span><span class="s0">();</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">resetAllNodesToApplyGravitation</span><span class="s0">();</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Set</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getAllNodes</span><span class="s0">());</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">nodesWithGravity</span><span class="s0">.</span><span class="s1">filter</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">return </span><span class="s1">e</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)}));</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">setAllNodesToApplyGravitation</span><span class="s0">(</span><span class="s1">r</span><span class="s0">)}}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">keys</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">constraints</span><span class="s0">).</span><span class="s1">length</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">){</span><span class="s1">l</span><span class="s0">.</span><span class="s1">handleConstraints</span><span class="s0">(</span><span class="s4">this</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">initConstraintVariables</span><span class="s0">()}</span><span class="s4">this</span><span class="s0">.</span><span class="s1">initSpringEmbedder</span><span class="s0">();</span><span class="s4">if</span><span class="s0">(</span><span class="s1">h</span><span class="s0">.</span><span class="s1">APPLY_LAYOUT</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">runSpringEmbedder</span><span class="s0">()}</span><span class="s4">return true</span><span class="s0">};</span><span class="s1">T</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">tick</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">totalIterations</span><span class="s0">++;</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">totalIterations</span><span class="s0">===</span><span class="s4">this</span><span class="s0">.</span><span class="s1">maxIterations</span><span class="s0">&amp;&amp;!</span><span class="s4">this</span><span class="s0">.</span><span class="s1">isTreeGrowing</span><span class="s0">&amp;&amp;!</span><span class="s4">this</span><span class="s0">.</span><span class="s1">isGrowthFinished</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">prunedNodesAll</span><span class="s0">.</span><span class="s1">length</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">isTreeGrowing</span><span class="s0">=</span><span class="s4">true</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">return true</span><span class="s0">}}</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">totalIterations</span><span class="s0">%</span><span class="s1">c</span><span class="s0">.</span><span class="s1">CONVERGENCE_CHECK_PERIOD</span><span class="s0">==</span><span class="s3">0</span><span class="s0">&amp;&amp;!</span><span class="s4">this</span><span class="s0">.</span><span class="s1">isTreeGrowing</span><span class="s0">&amp;&amp;!</span><span class="s4">this</span><span class="s0">.</span><span class="s1">isGrowthFinished</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">isConverged</span><span class="s0">()){</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">prunedNodesAll</span><span class="s0">.</span><span class="s1">length</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">isTreeGrowing</span><span class="s0">=</span><span class="s4">true</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">return true</span><span class="s0">}}</span><span class="s4">this</span><span class="s0">.</span><span class="s1">coolingCycle</span><span class="s0">++;</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">layoutQuality</span><span class="s0">==</span><span class="s3">0</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">coolingAdjuster</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">coolingCycle</span><span class="s0">}</span><span class="s4">else if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">layoutQuality</span><span class="s0">==</span><span class="s3">1</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">coolingAdjuster</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">coolingCycle</span><span class="s0">/</span><span class="s3">3</span><span class="s0">}</span><span class="s4">this</span><span class="s0">.</span><span class="s1">coolingFactor</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">max</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">initialCoolingFactor</span><span class="s0">-</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">pow</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">coolingCycle</span><span class="s0">,</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">log</span><span class="s0">(</span><span class="s3">100</span><span class="s0">*(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">initialCoolingFactor</span><span class="s0">-</span><span class="s4">this</span><span class="s0">.</span><span class="s1">finalTemperature</span><span class="s0">))/</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">log</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">maxCoolingCycle</span><span class="s0">))/</span><span class="s3">100</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">coolingAdjuster</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">finalTemperature</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">animationPeriod</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">ceil</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">initialAnimationPeriod</span><span class="s0">*</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">sqrt</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">coolingFactor</span><span class="s0">))}</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">isTreeGrowing</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">growTreeIterations</span><span class="s0">%</span><span class="s3">10</span><span class="s0">==</span><span class="s3">0</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">prunedNodesAll</span><span class="s0">.</span><span class="s1">length</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">updateBounds</span><span class="s0">();</span><span class="s4">this</span><span class="s0">.</span><span class="s1">updateGrid</span><span class="s0">();</span><span class="s4">this</span><span class="s0">.</span><span class="s1">growTree</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">prunedNodesAll</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">resetAllNodesToApplyGravitation</span><span class="s0">();</span><span class="s4">var </span><span class="s1">t</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Set</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getAllNodes</span><span class="s0">());</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">nodesWithGravity</span><span class="s0">.</span><span class="s1">filter</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">return </span><span class="s1">t</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)}));</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">setAllNodesToApplyGravitation</span><span class="s0">(</span><span class="s1">e</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">updateBounds</span><span class="s0">();</span><span class="s4">this</span><span class="s0">.</span><span class="s1">updateGrid</span><span class="s0">();</span><span class="s4">if</span><span class="s0">(</span><span class="s1">h</span><span class="s0">.</span><span class="s1">PURE_INCREMENTAL</span><span class="s0">)</span><span class="s4">this</span><span class="s0">.</span><span class="s1">coolingFactor</span><span class="s0">=</span><span class="s1">c</span><span class="s0">.</span><span class="s1">DEFAULT_COOLING_FACTOR_INCREMENTAL</span><span class="s0">/</span><span class="s3">2</span><span class="s0">;</span><span class="s4">else this</span><span class="s0">.</span><span class="s1">coolingFactor</span><span class="s0">=</span><span class="s1">c</span><span class="s0">.</span><span class="s1">DEFAULT_COOLING_FACTOR_INCREMENTAL</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">this</span><span class="s0">.</span><span class="s1">isTreeGrowing</span><span class="s0">=</span><span class="s4">false</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">isGrowthFinished</span><span class="s0">=</span><span class="s4">true</span><span class="s0">}}</span><span class="s4">this</span><span class="s0">.</span><span class="s1">growTreeIterations</span><span class="s0">++}</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">isGrowthFinished</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">isConverged</span><span class="s0">()){</span><span class="s4">return true</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">afterGrowthIterations</span><span class="s0">%</span><span class="s3">10</span><span class="s0">==</span><span class="s3">0</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">updateBounds</span><span class="s0">();</span><span class="s4">this</span><span class="s0">.</span><span class="s1">updateGrid</span><span class="s0">()}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">h</span><span class="s0">.</span><span class="s1">PURE_INCREMENTAL</span><span class="s0">)</span><span class="s4">this</span><span class="s0">.</span><span class="s1">coolingFactor</span><span class="s0">=</span><span class="s1">c</span><span class="s0">.</span><span class="s1">DEFAULT_COOLING_FACTOR_INCREMENTAL</span><span class="s0">/</span><span class="s3">2</span><span class="s0">*((</span><span class="s3">100</span><span class="s0">-</span><span class="s4">this</span><span class="s0">.</span><span class="s1">afterGrowthIterations</span><span class="s0">)/</span><span class="s3">100</span><span class="s0">);</span><span class="s4">else this</span><span class="s0">.</span><span class="s1">coolingFactor</span><span class="s0">=</span><span class="s1">c</span><span class="s0">.</span><span class="s1">DEFAULT_COOLING_FACTOR_INCREMENTAL</span><span class="s0">*((</span><span class="s3">100</span><span class="s0">-</span><span class="s4">this</span><span class="s0">.</span><span class="s1">afterGrowthIterations</span><span class="s0">)/</span><span class="s3">100</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">afterGrowthIterations</span><span class="s0">++}</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=!</span><span class="s4">this</span><span class="s0">.</span><span class="s1">isTreeGrowing</span><span class="s0">&amp;&amp;!</span><span class="s4">this</span><span class="s0">.</span><span class="s1">isGrowthFinished</span><span class="s0">;</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">growTreeIterations</span><span class="s0">%</span><span class="s3">10</span><span class="s0">==</span><span class="s3">1</span><span class="s0">&amp;&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">isTreeGrowing</span><span class="s0">||</span><span class="s4">this</span><span class="s0">.</span><span class="s1">afterGrowthIterations</span><span class="s0">%</span><span class="s3">10</span><span class="s0">==</span><span class="s3">1</span><span class="s0">&amp;&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">isGrowthFinished</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">totalDisplacement</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">updateBounds</span><span class="s0">();</span><span class="s4">this</span><span class="s0">.</span><span class="s1">calcSpringForces</span><span class="s0">();</span><span class="s4">this</span><span class="s0">.</span><span class="s1">calcRepulsionForces</span><span class="s0">(</span><span class="s1">r</span><span class="s0">,</span><span class="s1">i</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">calcGravitationalForces</span><span class="s0">();</span><span class="s4">this</span><span class="s0">.</span><span class="s1">moveNodes</span><span class="s0">();</span><span class="s4">this</span><span class="s0">.</span><span class="s1">animate</span><span class="s0">();</span><span class="s4">return false</span><span class="s0">};</span><span class="s1">T</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getPositionsData</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">var </span><span class="s1">t</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">getAllNodes</span><span class="s0">();</span><span class="s4">var </span><span class="s1">e</span><span class="s0">={};</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">r</span><span class="s0">&lt;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">r</span><span class="s0">++){</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">t</span><span class="s0">[</span><span class="s1">r</span><span class="s0">].</span><span class="s1">rect</span><span class="s0">;</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">t</span><span class="s0">[</span><span class="s1">r</span><span class="s0">].</span><span class="s1">id</span><span class="s0">;</span><span class="s1">e</span><span class="s0">[</span><span class="s1">n</span><span class="s0">]={</span><span class="s1">id</span><span class="s0">:</span><span class="s1">n</span><span class="s0">,</span><span class="s1">x</span><span class="s0">:</span><span class="s1">i</span><span class="s0">.</span><span class="s1">getCenterX</span><span class="s0">(),</span><span class="s1">y</span><span class="s0">:</span><span class="s1">i</span><span class="s0">.</span><span class="s1">getCenterY</span><span class="s0">(),</span><span class="s1">w</span><span class="s0">:</span><span class="s1">i</span><span class="s0">.</span><span class="s1">width</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s1">i</span><span class="s0">.</span><span class="s1">height</span><span class="s0">}}</span><span class="s4">return </span><span class="s1">e</span><span class="s0">};</span><span class="s1">T</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">runSpringEmbedder</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">initialAnimationPeriod</span><span class="s0">=</span><span class="s3">25</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">animationPeriod</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">initialAnimationPeriod</span><span class="s0">;</span><span class="s4">var </span><span class="s1">t</span><span class="s0">=</span><span class="s4">false</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">c</span><span class="s0">.</span><span class="s1">ANIMATE</span><span class="s0">===</span><span class="s2">&quot;during&quot;</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">emit</span><span class="s0">(</span><span class="s2">&quot;layoutstarted&quot;</span><span class="s0">)}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">while</span><span class="s0">(!</span><span class="s1">t</span><span class="s0">){</span><span class="s1">t</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">tick</span><span class="s0">()}</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">updateBounds</span><span class="s0">()}};</span><span class="s1">T</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">moveNodes</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">var </span><span class="s1">t</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getAllNodes</span><span class="s0">();</span><span class="s4">var </span><span class="s1">e</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">r</span><span class="s0">&lt;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">r</span><span class="s0">++){</span><span class="s1">e</span><span class="s0">=</span><span class="s1">t</span><span class="s0">[</span><span class="s1">r</span><span class="s0">];</span><span class="s1">e</span><span class="s0">.</span><span class="s1">calculateDisplacement</span><span class="s0">()}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">keys</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">constraints</span><span class="s0">).</span><span class="s1">length</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">updateDisplacements</span><span class="s0">()}</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">r</span><span class="s0">&lt;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">r</span><span class="s0">++){</span><span class="s1">e</span><span class="s0">=</span><span class="s1">t</span><span class="s0">[</span><span class="s1">r</span><span class="s0">];</span><span class="s1">e</span><span class="s0">.</span><span class="s1">move</span><span class="s0">()}};</span><span class="s1">T</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">initConstraintVariables</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">var </span><span class="s1">t</span><span class="s0">=</span><span class="s4">this</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">idToNodeMap</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Map</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">fixedNodeSet</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Set</span><span class="s0">;</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">getAllNodes</span><span class="s0">();</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">r</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">r</span><span class="s0">++){</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">r</span><span class="s0">];</span><span class="s4">this</span><span class="s0">.</span><span class="s1">idToNodeMap</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">id</span><span class="s0">,</span><span class="s1">i</span><span class="s0">)}</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s4">function </span><span class="s1">e</span><span class="s0">(</span><span class="s1">r</span><span class="s0">){</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">getChild</span><span class="s0">().</span><span class="s1">getNodes</span><span class="s0">();</span><span class="s4">var </span><span class="s1">n</span><span class="s0">;</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">a</span><span class="s0">&lt;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">a</span><span class="s0">++){</span><span class="s1">n</span><span class="s0">=</span><span class="s1">i</span><span class="s0">[</span><span class="s1">a</span><span class="s0">];</span><span class="s4">if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">.</span><span class="s1">getChild</span><span class="s0">()==</span><span class="s4">null</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">fixedNodeSet</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">n</span><span class="s0">.</span><span class="s1">id</span><span class="s0">)){</span><span class="s1">o</span><span class="s0">+=</span><span class="s3">100</span><span class="s0">}}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">o</span><span class="s0">+=</span><span class="s1">e</span><span class="s0">(</span><span class="s1">n</span><span class="s0">)}}</span><span class="s4">return </span><span class="s1">o</span><span class="s0">};</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">constraints</span><span class="s0">.</span><span class="s1">fixedNodeConstraint</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">constraints</span><span class="s0">.</span><span class="s1">fixedNodeConstraint</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s1">t</span><span class="s0">.</span><span class="s1">fixedNodeSet</span><span class="s0">.</span><span class="s1">add</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">nodeId</span><span class="s0">)}));</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">getAllNodes</span><span class="s0">();</span><span class="s4">var </span><span class="s1">i</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">r</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">r</span><span class="s0">++){</span><span class="s1">i</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">r</span><span class="s0">];</span><span class="s4">if</span><span class="s0">(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">getChild</span><span class="s0">()!=</span><span class="s4">null</span><span class="s0">){</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s1">n</span><span class="s0">(</span><span class="s1">i</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">o</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">){</span><span class="s1">i</span><span class="s0">.</span><span class="s1">fixedNodeWeight</span><span class="s0">=</span><span class="s1">o</span><span class="s0">}}}}</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">constraints</span><span class="s0">.</span><span class="s1">relativePlacementConstraint</span><span class="s0">){</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Map</span><span class="s0">;</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Map</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dummyToNodeForVerticalAlignment</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Map</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dummyToNodeForHorizontalAlignment</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Map</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">fixedNodesOnHorizontal</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Set</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">fixedNodesOnVertical</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Set</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">fixedNodeSet</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s1">t</span><span class="s0">.</span><span class="s1">fixedNodesOnHorizontal</span><span class="s0">.</span><span class="s1">add</span><span class="s0">(</span><span class="s1">e</span><span class="s0">);</span><span class="s1">t</span><span class="s0">.</span><span class="s1">fixedNodesOnVertical</span><span class="s0">.</span><span class="s1">add</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)}));</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">constraints</span><span class="s0">.</span><span class="s1">alignmentConstraint</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">constraints</span><span class="s0">.</span><span class="s1">alignmentConstraint</span><span class="s0">.</span><span class="s1">vertical</span><span class="s0">){</span><span class="s4">var </span><span class="s1">l</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">constraints</span><span class="s0">.</span><span class="s1">alignmentConstraint</span><span class="s0">.</span><span class="s1">vertical</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">r</span><span class="s0">&lt;</span><span class="s1">l</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">r</span><span class="s0">++){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dummyToNodeForVerticalAlignment</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s2">&quot;dummy&quot;</span><span class="s0">+</span><span class="s1">r</span><span class="s0">,[]);</span><span class="s1">l</span><span class="s0">[</span><span class="s1">r</span><span class="s0">].</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s1">a</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s2">&quot;dummy&quot;</span><span class="s0">+</span><span class="s1">r</span><span class="s0">);</span><span class="s1">t</span><span class="s0">.</span><span class="s1">dummyToNodeForVerticalAlignment</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s2">&quot;dummy&quot;</span><span class="s0">+</span><span class="s1">r</span><span class="s0">).</span><span class="s1">push</span><span class="s0">(</span><span class="s1">e</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">fixedNodeSet</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)){</span><span class="s1">t</span><span class="s0">.</span><span class="s1">fixedNodesOnHorizontal</span><span class="s0">.</span><span class="s1">add</span><span class="s0">(</span><span class="s2">&quot;dummy&quot;</span><span class="s0">+</span><span class="s1">r</span><span class="s0">)}}))}}</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">constraints</span><span class="s0">.</span><span class="s1">alignmentConstraint</span><span class="s0">.</span><span class="s1">horizontal</span><span class="s0">){</span><span class="s4">var </span><span class="s1">c</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">constraints</span><span class="s0">.</span><span class="s1">alignmentConstraint</span><span class="s0">.</span><span class="s1">horizontal</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">r</span><span class="s0">&lt;</span><span class="s1">c</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">r</span><span class="s0">++){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dummyToNodeForHorizontalAlignment</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s2">&quot;dummy&quot;</span><span class="s0">+</span><span class="s1">r</span><span class="s0">,[]);</span><span class="s1">c</span><span class="s0">[</span><span class="s1">r</span><span class="s0">].</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s1">s</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s2">&quot;dummy&quot;</span><span class="s0">+</span><span class="s1">r</span><span class="s0">);</span><span class="s1">t</span><span class="s0">.</span><span class="s1">dummyToNodeForHorizontalAlignment</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s2">&quot;dummy&quot;</span><span class="s0">+</span><span class="s1">r</span><span class="s0">).</span><span class="s1">push</span><span class="s0">(</span><span class="s1">e</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">fixedNodeSet</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)){</span><span class="s1">t</span><span class="s0">.</span><span class="s1">fixedNodesOnVertical</span><span class="s0">.</span><span class="s1">add</span><span class="s0">(</span><span class="s2">&quot;dummy&quot;</span><span class="s0">+</span><span class="s1">r</span><span class="s0">)}}))}}}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">h</span><span class="s0">.</span><span class="s1">RELAX_MOVEMENT_ON_CONSTRAINTS</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">shuffle</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">i</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s1">i</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">length</span><span class="s0">-</span><span class="s3">1</span><span class="s0">;</span><span class="s1">i</span><span class="s0">&gt;=</span><span class="s3">2</span><span class="s0">*</span><span class="s1">t</span><span class="s0">.</span><span class="s1">length</span><span class="s0">/</span><span class="s3">3</span><span class="s0">;</span><span class="s1">i</span><span class="s0">--){</span><span class="s1">e</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">floor</span><span class="s0">(</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">random</span><span class="s0">()*(</span><span class="s1">i</span><span class="s0">+</span><span class="s3">1</span><span class="s0">));</span><span class="s1">r</span><span class="s0">=</span><span class="s1">t</span><span class="s0">[</span><span class="s1">i</span><span class="s0">];</span><span class="s1">t</span><span class="s0">[</span><span class="s1">i</span><span class="s0">]=</span><span class="s1">t</span><span class="s0">[</span><span class="s1">e</span><span class="s0">];</span><span class="s1">t</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]=</span><span class="s1">r</span><span class="s0">}</span><span class="s4">return </span><span class="s1">t</span><span class="s0">};</span><span class="s4">this</span><span class="s0">.</span><span class="s1">nodesInRelativeHorizontal</span><span class="s0">=[];</span><span class="s4">this</span><span class="s0">.</span><span class="s1">nodesInRelativeVertical</span><span class="s0">=[];</span><span class="s4">this</span><span class="s0">.</span><span class="s1">nodeToRelativeConstraintMapHorizontal</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Map</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">nodeToRelativeConstraintMapVertical</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Map</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">nodeToTempPositionMapHorizontal</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Map</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">nodeToTempPositionMapVertical</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Map</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">constraints</span><span class="s0">.</span><span class="s1">relativePlacementConstraint</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">left</span><span class="s0">){</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s1">a</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">left</span><span class="s0">)?</span><span class="s1">a</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">left</span><span class="s0">):</span><span class="s1">e</span><span class="s0">.</span><span class="s1">left</span><span class="s0">;</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">a</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">right</span><span class="s0">)?</span><span class="s1">a</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">right</span><span class="s0">):</span><span class="s1">e</span><span class="s0">.</span><span class="s1">right</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">t</span><span class="s0">.</span><span class="s1">nodesInRelativeHorizontal</span><span class="s0">.</span><span class="s1">includes</span><span class="s0">(</span><span class="s1">r</span><span class="s0">)){</span><span class="s1">t</span><span class="s0">.</span><span class="s1">nodesInRelativeHorizontal</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">r</span><span class="s0">);</span><span class="s1">t</span><span class="s0">.</span><span class="s1">nodeToRelativeConstraintMapHorizontal</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">r</span><span class="s0">,[]);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">dummyToNodeForVerticalAlignment</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">r</span><span class="s0">)){</span><span class="s1">t</span><span class="s0">.</span><span class="s1">nodeToTempPositionMapHorizontal</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">r</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">idToNodeMap</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">dummyToNodeForVerticalAlignment</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">r</span><span class="s0">)[</span><span class="s3">0</span><span class="s0">]).</span><span class="s1">getCenterX</span><span class="s0">())}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">t</span><span class="s0">.</span><span class="s1">nodeToTempPositionMapHorizontal</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">r</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">idToNodeMap</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">r</span><span class="s0">).</span><span class="s1">getCenterX</span><span class="s0">())}}</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">t</span><span class="s0">.</span><span class="s1">nodesInRelativeHorizontal</span><span class="s0">.</span><span class="s1">includes</span><span class="s0">(</span><span class="s1">i</span><span class="s0">)){</span><span class="s1">t</span><span class="s0">.</span><span class="s1">nodesInRelativeHorizontal</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">i</span><span class="s0">);</span><span class="s1">t</span><span class="s0">.</span><span class="s1">nodeToRelativeConstraintMapHorizontal</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,[]);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">dummyToNodeForVerticalAlignment</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">i</span><span class="s0">)){</span><span class="s1">t</span><span class="s0">.</span><span class="s1">nodeToTempPositionMapHorizontal</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">idToNodeMap</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">dummyToNodeForVerticalAlignment</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">i</span><span class="s0">)[</span><span class="s3">0</span><span class="s0">]).</span><span class="s1">getCenterX</span><span class="s0">())}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">t</span><span class="s0">.</span><span class="s1">nodeToTempPositionMapHorizontal</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">idToNodeMap</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">i</span><span class="s0">).</span><span class="s1">getCenterX</span><span class="s0">())}}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">nodeToRelativeConstraintMapHorizontal</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">r</span><span class="s0">).</span><span class="s1">push</span><span class="s0">({</span><span class="s1">right</span><span class="s0">:</span><span class="s1">i</span><span class="s0">,</span><span class="s1">gap</span><span class="s0">:</span><span class="s1">e</span><span class="s0">.</span><span class="s1">gap</span><span class="s0">});</span><span class="s1">t</span><span class="s0">.</span><span class="s1">nodeToRelativeConstraintMapHorizontal</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">i</span><span class="s0">).</span><span class="s1">push</span><span class="s0">({</span><span class="s1">left</span><span class="s0">:</span><span class="s1">r</span><span class="s0">,</span><span class="s1">gap</span><span class="s0">:</span><span class="s1">e</span><span class="s0">.</span><span class="s1">gap</span><span class="s0">})}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">s</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">top</span><span class="s0">)?</span><span class="s1">s</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">top</span><span class="s0">):</span><span class="s1">e</span><span class="s0">.</span><span class="s1">top</span><span class="s0">;</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s1">s</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">bottom</span><span class="s0">)?</span><span class="s1">s</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">bottom</span><span class="s0">):</span><span class="s1">e</span><span class="s0">.</span><span class="s1">bottom</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">t</span><span class="s0">.</span><span class="s1">nodesInRelativeVertical</span><span class="s0">.</span><span class="s1">includes</span><span class="s0">(</span><span class="s1">n</span><span class="s0">)){</span><span class="s1">t</span><span class="s0">.</span><span class="s1">nodesInRelativeVertical</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">n</span><span class="s0">);</span><span class="s1">t</span><span class="s0">.</span><span class="s1">nodeToRelativeConstraintMapVertical</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">n</span><span class="s0">,[]);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">dummyToNodeForHorizontalAlignment</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">n</span><span class="s0">)){</span><span class="s1">t</span><span class="s0">.</span><span class="s1">nodeToTempPositionMapVertical</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">n</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">idToNodeMap</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">dummyToNodeForHorizontalAlignment</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">n</span><span class="s0">)[</span><span class="s3">0</span><span class="s0">]).</span><span class="s1">getCenterY</span><span class="s0">())}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">t</span><span class="s0">.</span><span class="s1">nodeToTempPositionMapVertical</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">n</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">idToNodeMap</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">n</span><span class="s0">).</span><span class="s1">getCenterY</span><span class="s0">())}}</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">t</span><span class="s0">.</span><span class="s1">nodesInRelativeVertical</span><span class="s0">.</span><span class="s1">includes</span><span class="s0">(</span><span class="s1">o</span><span class="s0">)){</span><span class="s1">t</span><span class="s0">.</span><span class="s1">nodesInRelativeVertical</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">o</span><span class="s0">);</span><span class="s1">t</span><span class="s0">.</span><span class="s1">nodeToRelativeConstraintMapVertical</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">o</span><span class="s0">,[]);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">dummyToNodeForHorizontalAlignment</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">o</span><span class="s0">)){</span><span class="s1">t</span><span class="s0">.</span><span class="s1">nodeToTempPositionMapVertical</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">o</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">idToNodeMap</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">dummyToNodeForHorizontalAlignment</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">o</span><span class="s0">)[</span><span class="s3">0</span><span class="s0">]).</span><span class="s1">getCenterY</span><span class="s0">())}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">t</span><span class="s0">.</span><span class="s1">nodeToTempPositionMapVertical</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">o</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">idToNodeMap</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">o</span><span class="s0">).</span><span class="s1">getCenterY</span><span class="s0">())}}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">nodeToRelativeConstraintMapVertical</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">n</span><span class="s0">).</span><span class="s1">push</span><span class="s0">({</span><span class="s1">bottom</span><span class="s0">:</span><span class="s1">o</span><span class="s0">,</span><span class="s1">gap</span><span class="s0">:</span><span class="s1">e</span><span class="s0">.</span><span class="s1">gap</span><span class="s0">});</span><span class="s1">t</span><span class="s0">.</span><span class="s1">nodeToRelativeConstraintMapVertical</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">o</span><span class="s0">).</span><span class="s1">push</span><span class="s0">({</span><span class="s1">top</span><span class="s0">:</span><span class="s1">n</span><span class="s0">,</span><span class="s1">gap</span><span class="s0">:</span><span class="s1">e</span><span class="s0">.</span><span class="s1">gap</span><span class="s0">})}}))}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">var </span><span class="s1">d</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Map</span><span class="s0">;</span><span class="s4">var </span><span class="s1">f</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Map</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">constraints</span><span class="s0">.</span><span class="s1">relativePlacementConstraint</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">left</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s1">a</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">left</span><span class="s0">)?</span><span class="s1">a</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">left</span><span class="s0">):</span><span class="s1">t</span><span class="s0">.</span><span class="s1">left</span><span class="s0">;</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s1">a</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">right</span><span class="s0">)?</span><span class="s1">a</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">right</span><span class="s0">):</span><span class="s1">t</span><span class="s0">.</span><span class="s1">right</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">d</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)){</span><span class="s1">d</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">).</span><span class="s1">push</span><span class="s0">(</span><span class="s1">r</span><span class="s0">)}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">d</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,[</span><span class="s1">r</span><span class="s0">])}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">d</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">r</span><span class="s0">)){</span><span class="s1">d</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">r</span><span class="s0">).</span><span class="s1">push</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">d</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">r</span><span class="s0">,[</span><span class="s1">e</span><span class="s0">])}}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">s</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">top</span><span class="s0">)?</span><span class="s1">s</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">top</span><span class="s0">):</span><span class="s1">t</span><span class="s0">.</span><span class="s1">top</span><span class="s0">;</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">s</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">bottom</span><span class="s0">)?</span><span class="s1">s</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">bottom</span><span class="s0">):</span><span class="s1">t</span><span class="s0">.</span><span class="s1">bottom</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">f</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">i</span><span class="s0">)){</span><span class="s1">f</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">i</span><span class="s0">).</span><span class="s1">push</span><span class="s0">(</span><span class="s1">n</span><span class="s0">)}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">f</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,[</span><span class="s1">n</span><span class="s0">])}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">f</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">n</span><span class="s0">)){</span><span class="s1">f</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">n</span><span class="s0">).</span><span class="s1">push</span><span class="s0">(</span><span class="s1">i</span><span class="s0">)}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">f</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">n</span><span class="s0">,[</span><span class="s1">i</span><span class="s0">])}}}));</span><span class="s4">var </span><span class="s1">g</span><span class="s0">=</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=[];</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=[];</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s4">new </span><span class="s1">N</span><span class="s0">;</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Set</span><span class="s0">;</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">h</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">a</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">h</span><span class="s0">)){</span><span class="s1">i</span><span class="s0">[</span><span class="s1">s</span><span class="s0">]=[];</span><span class="s1">n</span><span class="s0">[</span><span class="s1">s</span><span class="s0">]=</span><span class="s4">false</span><span class="s0">;</span><span class="s4">var </span><span class="s1">l</span><span class="s0">=</span><span class="s1">h</span><span class="s0">;</span><span class="s1">o</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">l</span><span class="s0">);</span><span class="s1">a</span><span class="s0">.</span><span class="s1">add</span><span class="s0">(</span><span class="s1">l</span><span class="s0">);</span><span class="s1">i</span><span class="s0">[</span><span class="s1">s</span><span class="s0">].</span><span class="s1">push</span><span class="s0">(</span><span class="s1">l</span><span class="s0">);</span><span class="s4">while</span><span class="s0">(</span><span class="s1">o</span><span class="s0">.</span><span class="s1">length</span><span class="s0">!=</span><span class="s3">0</span><span class="s0">){</span><span class="s1">l</span><span class="s0">=</span><span class="s1">o</span><span class="s0">.</span><span class="s1">shift</span><span class="s0">();</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">l</span><span class="s0">)){</span><span class="s1">n</span><span class="s0">[</span><span class="s1">s</span><span class="s0">]=</span><span class="s4">true</span><span class="s0">}</span><span class="s4">var </span><span class="s1">c</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">l</span><span class="s0">);</span><span class="s1">c</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">a</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)){</span><span class="s1">o</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">t</span><span class="s0">);</span><span class="s1">a</span><span class="s0">.</span><span class="s1">add</span><span class="s0">(</span><span class="s1">t</span><span class="s0">);</span><span class="s1">i</span><span class="s0">[</span><span class="s1">s</span><span class="s0">].</span><span class="s1">push</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)}}))}</span><span class="s1">s</span><span class="s0">++}}));</span><span class="s4">return</span><span class="s0">{</span><span class="s1">components</span><span class="s0">:</span><span class="s1">i</span><span class="s0">,</span><span class="s1">isFixed</span><span class="s0">:</span><span class="s1">n</span><span class="s0">}};</span><span class="s4">var </span><span class="s1">u</span><span class="s0">=</span><span class="s1">g</span><span class="s0">(</span><span class="s1">d</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">fixedNodesOnHorizontal</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">componentsOnHorizontal</span><span class="s0">=</span><span class="s1">u</span><span class="s0">.</span><span class="s1">components</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">fixedComponentsOnHorizontal</span><span class="s0">=</span><span class="s1">u</span><span class="s0">.</span><span class="s1">isFixed</span><span class="s0">;</span><span class="s4">var </span><span class="s1">p</span><span class="s0">=</span><span class="s1">g</span><span class="s0">(</span><span class="s1">f</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">fixedNodesOnVertical</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">componentsOnVertical</span><span class="s0">=</span><span class="s1">p</span><span class="s0">.</span><span class="s1">components</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">fixedComponentsOnVertical</span><span class="s0">=</span><span class="s1">p</span><span class="s0">.</span><span class="s1">isFixed</span><span class="s0">}}};</span><span class="s1">T</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">updateDisplacements</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">var </span><span class="s1">t</span><span class="s0">=</span><span class="s4">this</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">constraints</span><span class="s0">.</span><span class="s1">fixedNodeConstraint</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">constraints</span><span class="s0">.</span><span class="s1">fixedNodeConstraint</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">idToNodeMap</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">nodeId</span><span class="s0">);</span><span class="s1">r</span><span class="s0">.</span><span class="s1">displacementX</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">r</span><span class="s0">.</span><span class="s1">displacementY</span><span class="s0">=</span><span class="s3">0</span><span class="s0">}))}</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">constraints</span><span class="s0">.</span><span class="s1">alignmentConstraint</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">constraints</span><span class="s0">.</span><span class="s1">alignmentConstraint</span><span class="s0">.</span><span class="s1">vertical</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">constraints</span><span class="s0">.</span><span class="s1">alignmentConstraint</span><span class="s0">.</span><span class="s1">vertical</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">r</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">r</span><span class="s0">++){</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">n</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">[</span><span class="s1">r</span><span class="s0">].</span><span class="s1">length</span><span class="s0">;</span><span class="s1">n</span><span class="s0">++){</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">fixedNodeSet</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">e</span><span class="s0">[</span><span class="s1">r</span><span class="s0">][</span><span class="s1">n</span><span class="s0">])){</span><span class="s1">i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">break</span><span class="s0">}</span><span class="s1">i</span><span class="s0">+=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">idToNodeMap</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">[</span><span class="s1">r</span><span class="s0">][</span><span class="s1">n</span><span class="s0">]).</span><span class="s1">displacementX</span><span class="s0">}</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s1">i</span><span class="s0">/</span><span class="s1">e</span><span class="s0">[</span><span class="s1">r</span><span class="s0">].</span><span class="s1">length</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">n</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">[</span><span class="s1">r</span><span class="s0">].</span><span class="s1">length</span><span class="s0">;</span><span class="s1">n</span><span class="s0">++){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">idToNodeMap</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">[</span><span class="s1">r</span><span class="s0">][</span><span class="s1">n</span><span class="s0">]).</span><span class="s1">displacementX</span><span class="s0">=</span><span class="s1">o</span><span class="s0">}}}</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">constraints</span><span class="s0">.</span><span class="s1">alignmentConstraint</span><span class="s0">.</span><span class="s1">horizontal</span><span class="s0">){</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">constraints</span><span class="s0">.</span><span class="s1">alignmentConstraint</span><span class="s0">.</span><span class="s1">horizontal</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">r</span><span class="s0">&lt;</span><span class="s1">a</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">r</span><span class="s0">++){</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">n</span><span class="s0">&lt;</span><span class="s1">a</span><span class="s0">[</span><span class="s1">r</span><span class="s0">].</span><span class="s1">length</span><span class="s0">;</span><span class="s1">n</span><span class="s0">++){</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">fixedNodeSet</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">a</span><span class="s0">[</span><span class="s1">r</span><span class="s0">][</span><span class="s1">n</span><span class="s0">])){</span><span class="s1">s</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">break</span><span class="s0">}</span><span class="s1">s</span><span class="s0">+=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">idToNodeMap</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">a</span><span class="s0">[</span><span class="s1">r</span><span class="s0">][</span><span class="s1">n</span><span class="s0">]).</span><span class="s1">displacementY</span><span class="s0">}</span><span class="s4">var </span><span class="s1">l</span><span class="s0">=</span><span class="s1">s</span><span class="s0">/</span><span class="s1">a</span><span class="s0">[</span><span class="s1">r</span><span class="s0">].</span><span class="s1">length</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">n</span><span class="s0">&lt;</span><span class="s1">a</span><span class="s0">[</span><span class="s1">r</span><span class="s0">].</span><span class="s1">length</span><span class="s0">;</span><span class="s1">n</span><span class="s0">++){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">idToNodeMap</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">a</span><span class="s0">[</span><span class="s1">r</span><span class="s0">][</span><span class="s1">n</span><span class="s0">]).</span><span class="s1">displacementY</span><span class="s0">=</span><span class="s1">l</span><span class="s0">}}}}</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">constraints</span><span class="s0">.</span><span class="s1">relativePlacementConstraint</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">h</span><span class="s0">.</span><span class="s1">RELAX_MOVEMENT_ON_CONSTRAINTS</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">totalIterations</span><span class="s0">%</span><span class="s3">10</span><span class="s0">==</span><span class="s3">0</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">shuffle</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">nodesInRelativeHorizontal</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">shuffle</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">nodesInRelativeVertical</span><span class="s0">)}</span><span class="s4">this</span><span class="s0">.</span><span class="s1">nodesInRelativeHorizontal</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">t</span><span class="s0">.</span><span class="s1">fixedNodesOnHorizontal</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)){</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">dummyToNodeForVerticalAlignment</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)){</span><span class="s1">r</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">idToNodeMap</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">dummyToNodeForVerticalAlignment</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)[</span><span class="s3">0</span><span class="s0">]).</span><span class="s1">displacementX</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">r</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">idToNodeMap</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">).</span><span class="s1">displacementX</span><span class="s0">}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">nodeToRelativeConstraintMapHorizontal</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">).</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">i</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">right</span><span class="s0">){</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">nodeToTempPositionMapHorizontal</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">right</span><span class="s0">)-</span><span class="s1">t</span><span class="s0">.</span><span class="s1">nodeToTempPositionMapHorizontal</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)-</span><span class="s1">r</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">&lt;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">gap</span><span class="s0">){</span><span class="s1">r</span><span class="s0">-=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">gap</span><span class="s0">-</span><span class="s1">n</span><span class="s0">}}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">nodeToTempPositionMapHorizontal</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)-</span><span class="s1">t</span><span class="s0">.</span><span class="s1">nodeToTempPositionMapHorizontal</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">left</span><span class="s0">)+</span><span class="s1">r</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">&lt;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">gap</span><span class="s0">){</span><span class="s1">r</span><span class="s0">+=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">gap</span><span class="s0">-</span><span class="s1">n</span><span class="s0">}}}));</span><span class="s1">t</span><span class="s0">.</span><span class="s1">nodeToTempPositionMapHorizontal</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">nodeToTempPositionMapHorizontal</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)+</span><span class="s1">r</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">dummyToNodeForVerticalAlignment</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)){</span><span class="s1">t</span><span class="s0">.</span><span class="s1">dummyToNodeForVerticalAlignment</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">).</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s1">t</span><span class="s0">.</span><span class="s1">idToNodeMap</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">).</span><span class="s1">displacementX</span><span class="s0">=</span><span class="s1">r</span><span class="s0">}))}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">t</span><span class="s0">.</span><span class="s1">idToNodeMap</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">).</span><span class="s1">displacementX</span><span class="s0">=</span><span class="s1">r</span><span class="s0">}}}));</span><span class="s4">this</span><span class="s0">.</span><span class="s1">nodesInRelativeVertical</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">t</span><span class="s0">.</span><span class="s1">fixedNodesOnHorizontal</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)){</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">dummyToNodeForHorizontalAlignment</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)){</span><span class="s1">r</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">idToNodeMap</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">dummyToNodeForHorizontalAlignment</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)[</span><span class="s3">0</span><span class="s0">]).</span><span class="s1">displacementY</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">r</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">idToNodeMap</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">).</span><span class="s1">displacementY</span><span class="s0">}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">nodeToRelativeConstraintMapVertical</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">).</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">i</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">bottom</span><span class="s0">){</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">nodeToTempPositionMapVertical</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">bottom</span><span class="s0">)-</span><span class="s1">t</span><span class="s0">.</span><span class="s1">nodeToTempPositionMapVertical</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)-</span><span class="s1">r</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">&lt;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">gap</span><span class="s0">){</span><span class="s1">r</span><span class="s0">-=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">gap</span><span class="s0">-</span><span class="s1">n</span><span class="s0">}}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">nodeToTempPositionMapVertical</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)-</span><span class="s1">t</span><span class="s0">.</span><span class="s1">nodeToTempPositionMapVertical</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">top</span><span class="s0">)+</span><span class="s1">r</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">&lt;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">gap</span><span class="s0">){</span><span class="s1">r</span><span class="s0">+=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">gap</span><span class="s0">-</span><span class="s1">n</span><span class="s0">}}}));</span><span class="s1">t</span><span class="s0">.</span><span class="s1">nodeToTempPositionMapVertical</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">nodeToTempPositionMapVertical</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)+</span><span class="s1">r</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">dummyToNodeForHorizontalAlignment</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)){</span><span class="s1">t</span><span class="s0">.</span><span class="s1">dummyToNodeForHorizontalAlignment</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">).</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s1">t</span><span class="s0">.</span><span class="s1">idToNodeMap</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">).</span><span class="s1">displacementY</span><span class="s0">=</span><span class="s1">r</span><span class="s0">}))}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">t</span><span class="s0">.</span><span class="s1">idToNodeMap</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">).</span><span class="s1">displacementY</span><span class="s0">=</span><span class="s1">r</span><span class="s0">}}}))}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">r</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">componentsOnHorizontal</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">r</span><span class="s0">++){</span><span class="s4">var </span><span class="s1">c</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">componentsOnHorizontal</span><span class="s0">[</span><span class="s1">r</span><span class="s0">];</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">fixedComponentsOnHorizontal</span><span class="s0">[</span><span class="s1">r</span><span class="s0">]){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">n</span><span class="s0">&lt;</span><span class="s1">c</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">n</span><span class="s0">++){</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dummyToNodeForVerticalAlignment</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">c</span><span class="s0">[</span><span class="s1">n</span><span class="s0">])){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dummyToNodeForVerticalAlignment</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">c</span><span class="s0">[</span><span class="s1">n</span><span class="s0">]).</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s1">t</span><span class="s0">.</span><span class="s1">idToNodeMap</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">).</span><span class="s1">displacementX</span><span class="s0">=</span><span class="s3">0</span><span class="s0">}))}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">this</span><span class="s0">.</span><span class="s1">idToNodeMap</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">c</span><span class="s0">[</span><span class="s1">n</span><span class="s0">]).</span><span class="s1">displacementX</span><span class="s0">=</span><span class="s3">0</span><span class="s0">}}}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">var </span><span class="s1">d</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">f</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">n</span><span class="s0">&lt;</span><span class="s1">c</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">n</span><span class="s0">++){</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dummyToNodeForVerticalAlignment</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">c</span><span class="s0">[</span><span class="s1">n</span><span class="s0">])){</span><span class="s4">var </span><span class="s1">g</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dummyToNodeForVerticalAlignment</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">c</span><span class="s0">[</span><span class="s1">n</span><span class="s0">]);</span><span class="s1">d</span><span class="s0">+=</span><span class="s1">g</span><span class="s0">.</span><span class="s1">length</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">idToNodeMap</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">g</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]).</span><span class="s1">displacementX</span><span class="s0">;</span><span class="s1">f</span><span class="s0">+=</span><span class="s1">g</span><span class="s0">.</span><span class="s1">length</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">d</span><span class="s0">+=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">idToNodeMap</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">c</span><span class="s0">[</span><span class="s1">n</span><span class="s0">]).</span><span class="s1">displacementX</span><span class="s0">;</span><span class="s1">f</span><span class="s0">++}}</span><span class="s4">var </span><span class="s1">u</span><span class="s0">=</span><span class="s1">d</span><span class="s0">/</span><span class="s1">f</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">n</span><span class="s0">&lt;</span><span class="s1">c</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">n</span><span class="s0">++){</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dummyToNodeForVerticalAlignment</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">c</span><span class="s0">[</span><span class="s1">n</span><span class="s0">])){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dummyToNodeForVerticalAlignment</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">c</span><span class="s0">[</span><span class="s1">n</span><span class="s0">]).</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s1">t</span><span class="s0">.</span><span class="s1">idToNodeMap</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">).</span><span class="s1">displacementX</span><span class="s0">=</span><span class="s1">u</span><span class="s0">}))}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">this</span><span class="s0">.</span><span class="s1">idToNodeMap</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">c</span><span class="s0">[</span><span class="s1">n</span><span class="s0">]).</span><span class="s1">displacementX</span><span class="s0">=</span><span class="s1">u</span><span class="s0">}}}}</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">r</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">componentsOnVertical</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">r</span><span class="s0">++){</span><span class="s4">var </span><span class="s1">c</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">componentsOnVertical</span><span class="s0">[</span><span class="s1">r</span><span class="s0">];</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">fixedComponentsOnVertical</span><span class="s0">[</span><span class="s1">r</span><span class="s0">]){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">n</span><span class="s0">&lt;</span><span class="s1">c</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">n</span><span class="s0">++){</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dummyToNodeForHorizontalAlignment</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">c</span><span class="s0">[</span><span class="s1">n</span><span class="s0">])){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dummyToNodeForHorizontalAlignment</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">c</span><span class="s0">[</span><span class="s1">n</span><span class="s0">]).</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s1">t</span><span class="s0">.</span><span class="s1">idToNodeMap</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">).</span><span class="s1">displacementY</span><span class="s0">=</span><span class="s3">0</span><span class="s0">}))}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">this</span><span class="s0">.</span><span class="s1">idToNodeMap</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">c</span><span class="s0">[</span><span class="s1">n</span><span class="s0">]).</span><span class="s1">displacementY</span><span class="s0">=</span><span class="s3">0</span><span class="s0">}}}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">var </span><span class="s1">d</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">f</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">n</span><span class="s0">&lt;</span><span class="s1">c</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">n</span><span class="s0">++){</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dummyToNodeForHorizontalAlignment</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">c</span><span class="s0">[</span><span class="s1">n</span><span class="s0">])){</span><span class="s4">var </span><span class="s1">g</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dummyToNodeForHorizontalAlignment</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">c</span><span class="s0">[</span><span class="s1">n</span><span class="s0">]);</span><span class="s1">d</span><span class="s0">+=</span><span class="s1">g</span><span class="s0">.</span><span class="s1">length</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">idToNodeMap</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">g</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]).</span><span class="s1">displacementY</span><span class="s0">;</span><span class="s1">f</span><span class="s0">+=</span><span class="s1">g</span><span class="s0">.</span><span class="s1">length</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">d</span><span class="s0">+=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">idToNodeMap</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">c</span><span class="s0">[</span><span class="s1">n</span><span class="s0">]).</span><span class="s1">displacementY</span><span class="s0">;</span><span class="s1">f</span><span class="s0">++}}</span><span class="s4">var </span><span class="s1">u</span><span class="s0">=</span><span class="s1">d</span><span class="s0">/</span><span class="s1">f</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">n</span><span class="s0">&lt;</span><span class="s1">c</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">n</span><span class="s0">++){</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dummyToNodeForHorizontalAlignment</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">c</span><span class="s0">[</span><span class="s1">n</span><span class="s0">])){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dummyToNodeForHorizontalAlignment</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">c</span><span class="s0">[</span><span class="s1">n</span><span class="s0">]).</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s1">t</span><span class="s0">.</span><span class="s1">idToNodeMap</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">).</span><span class="s1">displacementY</span><span class="s0">=</span><span class="s1">u</span><span class="s0">}))}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">this</span><span class="s0">.</span><span class="s1">idToNodeMap</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">c</span><span class="s0">[</span><span class="s1">n</span><span class="s0">]).</span><span class="s1">displacementY</span><span class="s0">=</span><span class="s1">u</span><span class="s0">}}}}}}};</span><span class="s1">T</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">calculateNodesToApplyGravitationTo</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">var </span><span class="s1">t</span><span class="s0">=[];</span><span class="s4">var </span><span class="s1">e</span><span class="s0">;</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">getGraphs</span><span class="s0">();</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s4">var </span><span class="s1">n</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s1">n</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">n</span><span class="s0">&lt;</span><span class="s1">i</span><span class="s0">;</span><span class="s1">n</span><span class="s0">++){</span><span class="s1">e</span><span class="s0">=</span><span class="s1">r</span><span class="s0">[</span><span class="s1">n</span><span class="s0">];</span><span class="s1">e</span><span class="s0">.</span><span class="s1">updateConnected</span><span class="s0">();</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">e</span><span class="s0">.</span><span class="s1">isConnected</span><span class="s0">){</span><span class="s1">t</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">concat</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getNodes</span><span class="s0">())}}</span><span class="s4">return </span><span class="s1">t</span><span class="s0">};</span><span class="s1">T</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">createBendpoints</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">var </span><span class="s1">t</span><span class="s0">=[];</span><span class="s1">t</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">concat</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">getAllEdges</span><span class="s0">());</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Set</span><span class="s0">;</span><span class="s4">var </span><span class="s1">r</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s1">r</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">r</span><span class="s0">&lt;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">r</span><span class="s0">++){</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">t</span><span class="s0">[</span><span class="s1">r</span><span class="s0">];</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">e</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">i</span><span class="s0">)){</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">getSource</span><span class="s0">();</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">getTarget</span><span class="s0">();</span><span class="s4">if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">==</span><span class="s1">o</span><span class="s0">){</span><span class="s1">i</span><span class="s0">.</span><span class="s1">getBendpoints</span><span class="s0">().</span><span class="s1">push</span><span class="s0">(</span><span class="s4">new </span><span class="s1">g</span><span class="s0">);</span><span class="s1">i</span><span class="s0">.</span><span class="s1">getBendpoints</span><span class="s0">().</span><span class="s1">push</span><span class="s0">(</span><span class="s4">new </span><span class="s1">g</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">createDummyNodesForBendpoints</span><span class="s0">(</span><span class="s1">i</span><span class="s0">);</span><span class="s1">e</span><span class="s0">.</span><span class="s1">add</span><span class="s0">(</span><span class="s1">i</span><span class="s0">)}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=[];</span><span class="s1">a</span><span class="s0">=</span><span class="s1">a</span><span class="s0">.</span><span class="s1">concat</span><span class="s0">(</span><span class="s1">n</span><span class="s0">.</span><span class="s1">getEdgeListToNode</span><span class="s0">(</span><span class="s1">o</span><span class="s0">));</span><span class="s1">a</span><span class="s0">=</span><span class="s1">a</span><span class="s0">.</span><span class="s1">concat</span><span class="s0">(</span><span class="s1">o</span><span class="s0">.</span><span class="s1">getEdgeListToNode</span><span class="s0">(</span><span class="s1">n</span><span class="s0">));</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">e</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">a</span><span class="s0">[</span><span class="s3">0</span><span class="s0">])){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">a</span><span class="s0">.</span><span class="s1">length</span><span class="s0">&gt;</span><span class="s3">1</span><span class="s0">){</span><span class="s4">var </span><span class="s1">s</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s1">s</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">s</span><span class="s0">&lt;</span><span class="s1">a</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">s</span><span class="s0">++){</span><span class="s4">var </span><span class="s1">h</span><span class="s0">=</span><span class="s1">a</span><span class="s0">[</span><span class="s1">s</span><span class="s0">];</span><span class="s1">h</span><span class="s0">.</span><span class="s1">getBendpoints</span><span class="s0">().</span><span class="s1">push</span><span class="s0">(</span><span class="s4">new </span><span class="s1">g</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">createDummyNodesForBendpoints</span><span class="s0">(</span><span class="s1">h</span><span class="s0">)}}</span><span class="s1">a</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s1">e</span><span class="s0">.</span><span class="s1">add</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)}))}}}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">size</span><span class="s0">==</span><span class="s1">t</span><span class="s0">.</span><span class="s1">length</span><span class="s0">){</span><span class="s4">break</span><span class="s0">}}};</span><span class="s1">T</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">positionNodesRadially</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s4">new </span><span class="s1">f</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">);</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">ceil</span><span class="s0">(</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">sqrt</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">length</span><span class="s0">));</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s4">new </span><span class="s1">g</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">);</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">s</span><span class="s0">&lt;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">s</span><span class="s0">++){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">s</span><span class="s0">%</span><span class="s1">r</span><span class="s0">==</span><span class="s3">0</span><span class="s0">){</span><span class="s1">o</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">n</span><span class="s0">=</span><span class="s1">i</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">s</span><span class="s0">!=</span><span class="s3">0</span><span class="s0">){</span><span class="s1">n</span><span class="s0">+=</span><span class="s1">h</span><span class="s0">.</span><span class="s1">DEFAULT_COMPONENT_SEPERATION</span><span class="s0">}</span><span class="s1">i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">}</span><span class="s4">var </span><span class="s1">l</span><span class="s0">=</span><span class="s1">t</span><span class="s0">[</span><span class="s1">s</span><span class="s0">];</span><span class="s4">var </span><span class="s1">c</span><span class="s0">=</span><span class="s1">p</span><span class="s0">.</span><span class="s1">findCenterOfTree</span><span class="s0">(</span><span class="s1">l</span><span class="s0">);</span><span class="s1">e</span><span class="s0">.</span><span class="s1">x</span><span class="s0">=</span><span class="s1">o</span><span class="s0">;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">y</span><span class="s0">=</span><span class="s1">n</span><span class="s0">;</span><span class="s1">a</span><span class="s0">=</span><span class="s1">T</span><span class="s0">.</span><span class="s1">radialLayout</span><span class="s0">(</span><span class="s1">l</span><span class="s0">,</span><span class="s1">c</span><span class="s0">,</span><span class="s1">e</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">a</span><span class="s0">.</span><span class="s1">y</span><span class="s0">&gt;</span><span class="s1">i</span><span class="s0">){</span><span class="s1">i</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">floor</span><span class="s0">(</span><span class="s1">a</span><span class="s0">.</span><span class="s1">y</span><span class="s0">)}</span><span class="s1">o</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">floor</span><span class="s0">(</span><span class="s1">a</span><span class="s0">.</span><span class="s1">x</span><span class="s0">+</span><span class="s1">h</span><span class="s0">.</span><span class="s1">DEFAULT_COMPONENT_SEPERATION</span><span class="s0">)}</span><span class="s4">this</span><span class="s0">.</span><span class="s1">transform</span><span class="s0">(</span><span class="s4">new </span><span class="s1">g</span><span class="s0">(</span><span class="s1">d</span><span class="s0">.</span><span class="s1">WORLD_CENTER_X</span><span class="s0">-</span><span class="s1">a</span><span class="s0">.</span><span class="s1">x</span><span class="s0">/</span><span class="s3">2</span><span class="s0">,</span><span class="s1">d</span><span class="s0">.</span><span class="s1">WORLD_CENTER_Y</span><span class="s0">-</span><span class="s1">a</span><span class="s0">.</span><span class="s1">y</span><span class="s0">/</span><span class="s3">2</span><span class="s0">))};</span><span class="s1">T</span><span class="s0">.</span><span class="s1">radialLayout</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">max</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">maxDiagonalInTree</span><span class="s0">(</span><span class="s1">t</span><span class="s0">),</span><span class="s1">h</span><span class="s0">.</span><span class="s1">DEFAULT_RADIAL_SEPARATION</span><span class="s0">);</span><span class="s1">T</span><span class="s0">.</span><span class="s1">branchRadialLayout</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s4">null</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s3">359</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s1">i</span><span class="s0">);</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">m</span><span class="s0">.</span><span class="s1">calculateBounds</span><span class="s0">(</span><span class="s1">t</span><span class="s0">);</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s4">new </span><span class="s1">E</span><span class="s0">;</span><span class="s1">o</span><span class="s0">.</span><span class="s1">setDeviceOrgX</span><span class="s0">(</span><span class="s1">n</span><span class="s0">.</span><span class="s1">getMinX</span><span class="s0">());</span><span class="s1">o</span><span class="s0">.</span><span class="s1">setDeviceOrgY</span><span class="s0">(</span><span class="s1">n</span><span class="s0">.</span><span class="s1">getMinY</span><span class="s0">());</span><span class="s1">o</span><span class="s0">.</span><span class="s1">setWorldOrgX</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">x</span><span class="s0">);</span><span class="s1">o</span><span class="s0">.</span><span class="s1">setWorldOrgY</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">y</span><span class="s0">);</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">a</span><span class="s0">&lt;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">a</span><span class="s0">++){</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s1">t</span><span class="s0">[</span><span class="s1">a</span><span class="s0">];</span><span class="s1">s</span><span class="s0">.</span><span class="s1">transform</span><span class="s0">(</span><span class="s1">o</span><span class="s0">)}</span><span class="s4">var </span><span class="s1">l</span><span class="s0">=</span><span class="s4">new </span><span class="s1">g</span><span class="s0">(</span><span class="s1">n</span><span class="s0">.</span><span class="s1">getMaxX</span><span class="s0">(),</span><span class="s1">n</span><span class="s0">.</span><span class="s1">getMaxY</span><span class="s0">());</span><span class="s4">return </span><span class="s1">o</span><span class="s0">.</span><span class="s1">inverseTransformPoint</span><span class="s0">(</span><span class="s1">l</span><span class="s0">)};</span><span class="s1">T</span><span class="s0">.</span><span class="s1">branchRadialLayout</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">o</span><span class="s0">){</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=(</span><span class="s1">i</span><span class="s0">-</span><span class="s1">r</span><span class="s0">+</span><span class="s3">1</span><span class="s0">)/</span><span class="s3">2</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">a</span><span class="s0">&lt;</span><span class="s3">0</span><span class="s0">){</span><span class="s1">a</span><span class="s0">+=</span><span class="s3">180</span><span class="s0">}</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=(</span><span class="s1">a</span><span class="s0">+</span><span class="s1">r</span><span class="s0">)%</span><span class="s3">360</span><span class="s0">;</span><span class="s4">var </span><span class="s1">h</span><span class="s0">=</span><span class="s1">s</span><span class="s0">*</span><span class="s1">y</span><span class="s0">.</span><span class="s1">TWO_PI</span><span class="s0">/</span><span class="s3">360</span><span class="s0">;</span><span class="s4">var </span><span class="s1">l</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">cos</span><span class="s0">(</span><span class="s1">h</span><span class="s0">);</span><span class="s4">var </span><span class="s1">c</span><span class="s0">=</span><span class="s1">n</span><span class="s0">*</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">cos</span><span class="s0">(</span><span class="s1">h</span><span class="s0">);</span><span class="s4">var </span><span class="s1">d</span><span class="s0">=</span><span class="s1">n</span><span class="s0">*</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">sin</span><span class="s0">(</span><span class="s1">h</span><span class="s0">);</span><span class="s1">t</span><span class="s0">.</span><span class="s1">setCenter</span><span class="s0">(</span><span class="s1">c</span><span class="s0">,</span><span class="s1">d</span><span class="s0">);</span><span class="s4">var </span><span class="s1">f</span><span class="s0">=[];</span><span class="s1">f</span><span class="s0">=</span><span class="s1">f</span><span class="s0">.</span><span class="s1">concat</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getEdges</span><span class="s0">());</span><span class="s4">var </span><span class="s1">g</span><span class="s0">=</span><span class="s1">f</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">!=</span><span class="s4">null</span><span class="s0">){</span><span class="s1">g</span><span class="s0">--}</span><span class="s4">var </span><span class="s1">u</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">p</span><span class="s0">=</span><span class="s1">f</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s4">var </span><span class="s1">v</span><span class="s0">;</span><span class="s4">var </span><span class="s1">m</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getEdgesBetween</span><span class="s0">(</span><span class="s1">e</span><span class="s0">);</span><span class="s4">while</span><span class="s0">(</span><span class="s1">m</span><span class="s0">.</span><span class="s1">length</span><span class="s0">&gt;</span><span class="s3">1</span><span class="s0">){</span><span class="s4">var </span><span class="s1">E</span><span class="s0">=</span><span class="s1">m</span><span class="s0">[</span><span class="s3">0</span><span class="s0">];</span><span class="s1">m</span><span class="s0">.</span><span class="s1">splice</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s3">1</span><span class="s0">);</span><span class="s4">var </span><span class="s1">N</span><span class="s0">=</span><span class="s1">f</span><span class="s0">.</span><span class="s1">indexOf</span><span class="s0">(</span><span class="s1">E</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">N</span><span class="s0">&gt;=</span><span class="s3">0</span><span class="s0">){</span><span class="s1">f</span><span class="s0">.</span><span class="s1">splice</span><span class="s0">(</span><span class="s1">N</span><span class="s0">,</span><span class="s3">1</span><span class="s0">)}</span><span class="s1">p</span><span class="s0">--;</span><span class="s1">g</span><span class="s0">--}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">!=</span><span class="s4">null</span><span class="s0">){</span><span class="s1">v</span><span class="s0">=(</span><span class="s1">f</span><span class="s0">.</span><span class="s1">indexOf</span><span class="s0">(</span><span class="s1">m</span><span class="s0">[</span><span class="s3">0</span><span class="s0">])+</span><span class="s3">1</span><span class="s0">)%</span><span class="s1">p</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">v</span><span class="s0">=</span><span class="s3">0</span><span class="s0">}</span><span class="s4">var </span><span class="s1">A</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">abs</span><span class="s0">(</span><span class="s1">i</span><span class="s0">-</span><span class="s1">r</span><span class="s0">)/</span><span class="s1">g</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">w</span><span class="s0">=</span><span class="s1">v</span><span class="s0">;</span><span class="s1">u</span><span class="s0">!=</span><span class="s1">g</span><span class="s0">;</span><span class="s1">w</span><span class="s0">=++</span><span class="s1">w</span><span class="s0">%</span><span class="s1">p</span><span class="s0">){</span><span class="s4">var </span><span class="s1">L</span><span class="s0">=</span><span class="s1">f</span><span class="s0">[</span><span class="s1">w</span><span class="s0">].</span><span class="s1">getOtherEnd</span><span class="s0">(</span><span class="s1">t</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">L</span><span class="s0">==</span><span class="s1">e</span><span class="s0">){</span><span class="s4">continue</span><span class="s0">}</span><span class="s4">var </span><span class="s1">I</span><span class="s0">=(</span><span class="s1">r</span><span class="s0">+</span><span class="s1">u</span><span class="s0">*</span><span class="s1">A</span><span class="s0">)%</span><span class="s3">360</span><span class="s0">;</span><span class="s4">var </span><span class="s1">_</span><span class="s0">=(</span><span class="s1">I</span><span class="s0">+</span><span class="s1">A</span><span class="s0">)%</span><span class="s3">360</span><span class="s0">;</span><span class="s1">T</span><span class="s0">.</span><span class="s1">branchRadialLayout</span><span class="s0">(</span><span class="s1">L</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">I</span><span class="s0">,</span><span class="s1">_</span><span class="s0">,</span><span class="s1">n</span><span class="s0">+</span><span class="s1">o</span><span class="s0">,</span><span class="s1">o</span><span class="s0">);</span><span class="s1">u</span><span class="s0">++}};</span><span class="s1">T</span><span class="s0">.</span><span class="s1">maxDiagonalInTree</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s1">v</span><span class="s0">.</span><span class="s1">MIN_VALUE</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">r</span><span class="s0">&lt;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">r</span><span class="s0">++){</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">t</span><span class="s0">[</span><span class="s1">r</span><span class="s0">];</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">getDiagonal</span><span class="s0">();</span><span class="s4">if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">&gt;</span><span class="s1">e</span><span class="s0">){</span><span class="s1">e</span><span class="s0">=</span><span class="s1">n</span><span class="s0">}}</span><span class="s4">return </span><span class="s1">e</span><span class="s0">};</span><span class="s1">T</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">calcRepulsionRange</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return </span><span class="s3">2</span><span class="s0">*(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">level</span><span class="s0">+</span><span class="s3">1</span><span class="s0">)*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">idealEdgeLength</span><span class="s0">};</span><span class="s1">T</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">groupZeroDegreeMembers</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">var </span><span class="s1">t</span><span class="s0">=</span><span class="s4">this</span><span class="s0">;</span><span class="s4">var </span><span class="s1">e</span><span class="s0">={};</span><span class="s4">this</span><span class="s0">.</span><span class="s1">memberGroups</span><span class="s0">={};</span><span class="s4">this</span><span class="s0">.</span><span class="s1">idToDummyNode</span><span class="s0">={};</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=[];</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">getAllNodes</span><span class="s0">();</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">n</span><span class="s0">&lt;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">n</span><span class="s0">++){</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s1">i</span><span class="s0">[</span><span class="s1">n</span><span class="s0">];</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s1">o</span><span class="s0">.</span><span class="s1">getParent</span><span class="s0">();</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getNodeDegreeWithChildren</span><span class="s0">(</span><span class="s1">o</span><span class="s0">)===</span><span class="s3">0</span><span class="s0">&amp;&amp;(</span><span class="s1">s</span><span class="s0">.</span><span class="s1">id</span><span class="s0">==</span><span class="s1">undefined</span><span class="s0">||!</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getToBeTiled</span><span class="s0">(</span><span class="s1">s</span><span class="s0">))){</span><span class="s1">r</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">o</span><span class="s0">)}}</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">n</span><span class="s0">&lt;</span><span class="s1">r</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">n</span><span class="s0">++){</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s1">r</span><span class="s0">[</span><span class="s1">n</span><span class="s0">];</span><span class="s4">var </span><span class="s1">h</span><span class="s0">=</span><span class="s1">o</span><span class="s0">.</span><span class="s1">getParent</span><span class="s0">().</span><span class="s1">id</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s4">typeof </span><span class="s1">e</span><span class="s0">[</span><span class="s1">h</span><span class="s0">]===</span><span class="s2">&quot;undefined&quot;</span><span class="s0">)</span><span class="s1">e</span><span class="s0">[</span><span class="s1">h</span><span class="s0">]=[];</span><span class="s1">e</span><span class="s0">[</span><span class="s1">h</span><span class="s0">]=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">h</span><span class="s0">].</span><span class="s1">concat</span><span class="s0">(</span><span class="s1">o</span><span class="s0">)}</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">keys</span><span class="s0">(</span><span class="s1">e</span><span class="s0">).</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">r</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">[</span><span class="s1">r</span><span class="s0">].</span><span class="s1">length</span><span class="s0">&gt;</span><span class="s3">1</span><span class="s0">){</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s2">&quot;DummyCompound_&quot;</span><span class="s0">+</span><span class="s1">r</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">memberGroups</span><span class="s0">[</span><span class="s1">i</span><span class="s0">]=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">r</span><span class="s0">];</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">r</span><span class="s0">][</span><span class="s3">0</span><span class="s0">].</span><span class="s1">getParent</span><span class="s0">();</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s4">new </span><span class="s1">a</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">);</span><span class="s1">o</span><span class="s0">.</span><span class="s1">id</span><span class="s0">=</span><span class="s1">i</span><span class="s0">;</span><span class="s1">o</span><span class="s0">.</span><span class="s1">paddingLeft</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">paddingLeft</span><span class="s0">||</span><span class="s3">0</span><span class="s0">;</span><span class="s1">o</span><span class="s0">.</span><span class="s1">paddingRight</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">paddingRight</span><span class="s0">||</span><span class="s3">0</span><span class="s0">;</span><span class="s1">o</span><span class="s0">.</span><span class="s1">paddingBottom</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">paddingBottom</span><span class="s0">||</span><span class="s3">0</span><span class="s0">;</span><span class="s1">o</span><span class="s0">.</span><span class="s1">paddingTop</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">paddingTop</span><span class="s0">||</span><span class="s3">0</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">idToDummyNode</span><span class="s0">[</span><span class="s1">i</span><span class="s0">]=</span><span class="s1">o</span><span class="s0">;</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getGraphManager</span><span class="s0">().</span><span class="s1">add</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">newGraph</span><span class="s0">(),</span><span class="s1">o</span><span class="s0">);</span><span class="s4">var </span><span class="s1">h</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">getChild</span><span class="s0">();</span><span class="s1">h</span><span class="s0">.</span><span class="s1">add</span><span class="s0">(</span><span class="s1">o</span><span class="s0">);</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">l</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">l</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">[</span><span class="s1">r</span><span class="s0">].</span><span class="s1">length</span><span class="s0">;</span><span class="s1">l</span><span class="s0">++){</span><span class="s4">var </span><span class="s1">c</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">r</span><span class="s0">][</span><span class="s1">l</span><span class="s0">];</span><span class="s1">h</span><span class="s0">.</span><span class="s1">remove</span><span class="s0">(</span><span class="s1">c</span><span class="s0">);</span><span class="s1">s</span><span class="s0">.</span><span class="s1">add</span><span class="s0">(</span><span class="s1">c</span><span class="s0">)}}}))};</span><span class="s1">T</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">clearCompounds</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">var </span><span class="s1">t</span><span class="s0">={};</span><span class="s4">var </span><span class="s1">e</span><span class="s0">={};</span><span class="s4">this</span><span class="s0">.</span><span class="s1">performDFSOnCompounds</span><span class="s0">();</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">r</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">compoundOrder</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">r</span><span class="s0">++){</span><span class="s1">e</span><span class="s0">[</span><span class="s4">this</span><span class="s0">.</span><span class="s1">compoundOrder</span><span class="s0">[</span><span class="s1">r</span><span class="s0">].</span><span class="s1">id</span><span class="s0">]=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">compoundOrder</span><span class="s0">[</span><span class="s1">r</span><span class="s0">];</span><span class="s1">t</span><span class="s0">[</span><span class="s4">this</span><span class="s0">.</span><span class="s1">compoundOrder</span><span class="s0">[</span><span class="s1">r</span><span class="s0">].</span><span class="s1">id</span><span class="s0">]=[].</span><span class="s1">concat</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">compoundOrder</span><span class="s0">[</span><span class="s1">r</span><span class="s0">].</span><span class="s1">getChild</span><span class="s0">().</span><span class="s1">getNodes</span><span class="s0">());</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">remove</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">compoundOrder</span><span class="s0">[</span><span class="s1">r</span><span class="s0">].</span><span class="s1">getChild</span><span class="s0">());</span><span class="s4">this</span><span class="s0">.</span><span class="s1">compoundOrder</span><span class="s0">[</span><span class="s1">r</span><span class="s0">].</span><span class="s1">child</span><span class="s0">=</span><span class="s4">null</span><span class="s0">}</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">resetAllNodes</span><span class="s0">();</span><span class="s4">this</span><span class="s0">.</span><span class="s1">tileCompoundMembers</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">)};</span><span class="s1">T</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">clearZeroDegreeMembers</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">var </span><span class="s1">t</span><span class="s0">=</span><span class="s4">this</span><span class="s0">;</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">tiledZeroDegreePack</span><span class="s0">=[];</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">keys</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">memberGroups</span><span class="s0">).</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">r</span><span class="s0">){</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">idToDummyNode</span><span class="s0">[</span><span class="s1">r</span><span class="s0">];</span><span class="s1">e</span><span class="s0">[</span><span class="s1">r</span><span class="s0">]=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">tileNodes</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">memberGroups</span><span class="s0">[</span><span class="s1">r</span><span class="s0">],</span><span class="s1">i</span><span class="s0">.</span><span class="s1">paddingLeft</span><span class="s0">+</span><span class="s1">i</span><span class="s0">.</span><span class="s1">paddingRight</span><span class="s0">);</span><span class="s1">i</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">width</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">r</span><span class="s0">].</span><span class="s1">width</span><span class="s0">;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">height</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">r</span><span class="s0">].</span><span class="s1">height</span><span class="s0">;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">setCenter</span><span class="s0">(</span><span class="s1">e</span><span class="s0">[</span><span class="s1">r</span><span class="s0">].</span><span class="s1">centerX</span><span class="s0">,</span><span class="s1">e</span><span class="s0">[</span><span class="s1">r</span><span class="s0">].</span><span class="s1">centerY</span><span class="s0">);</span><span class="s1">i</span><span class="s0">.</span><span class="s1">labelMarginLeft</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">labelMarginTop</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">h</span><span class="s0">.</span><span class="s1">NODE_DIMENSIONS_INCLUDE_LABELS</span><span class="s0">){</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">width</span><span class="s0">;</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">height</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">labelWidth</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">labelPosHorizontal</span><span class="s0">==</span><span class="s2">&quot;left&quot;</span><span class="s0">){</span><span class="s1">i</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">x</span><span class="s0">-=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">labelWidth</span><span class="s0">;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">setWidth</span><span class="s0">(</span><span class="s1">n</span><span class="s0">+</span><span class="s1">i</span><span class="s0">.</span><span class="s1">labelWidth</span><span class="s0">);</span><span class="s1">i</span><span class="s0">.</span><span class="s1">labelMarginLeft</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">labelWidth</span><span class="s0">}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">labelPosHorizontal</span><span class="s0">==</span><span class="s2">&quot;center&quot;</span><span class="s0">&amp;&amp;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">labelWidth</span><span class="s0">&gt;</span><span class="s1">n</span><span class="s0">){</span><span class="s1">i</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">x</span><span class="s0">-=(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">labelWidth</span><span class="s0">-</span><span class="s1">n</span><span class="s0">)/</span><span class="s3">2</span><span class="s0">;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">setWidth</span><span class="s0">(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">labelWidth</span><span class="s0">);</span><span class="s1">i</span><span class="s0">.</span><span class="s1">labelMarginLeft</span><span class="s0">=(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">labelWidth</span><span class="s0">-</span><span class="s1">n</span><span class="s0">)/</span><span class="s3">2</span><span class="s0">}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">labelPosHorizontal</span><span class="s0">==</span><span class="s2">&quot;right&quot;</span><span class="s0">){</span><span class="s1">i</span><span class="s0">.</span><span class="s1">setWidth</span><span class="s0">(</span><span class="s1">n</span><span class="s0">+</span><span class="s1">i</span><span class="s0">.</span><span class="s1">labelWidth</span><span class="s0">)}}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">labelHeight</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">labelPosVertical</span><span class="s0">==</span><span class="s2">&quot;top&quot;</span><span class="s0">){</span><span class="s1">i</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">y</span><span class="s0">-=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">labelHeight</span><span class="s0">;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">setHeight</span><span class="s0">(</span><span class="s1">o</span><span class="s0">+</span><span class="s1">i</span><span class="s0">.</span><span class="s1">labelHeight</span><span class="s0">);</span><span class="s1">i</span><span class="s0">.</span><span class="s1">labelMarginTop</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">labelHeight</span><span class="s0">}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">labelPosVertical</span><span class="s0">==</span><span class="s2">&quot;center&quot;</span><span class="s0">&amp;&amp;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">labelHeight</span><span class="s0">&gt;</span><span class="s1">o</span><span class="s0">){</span><span class="s1">i</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">y</span><span class="s0">-=(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">labelHeight</span><span class="s0">-</span><span class="s1">o</span><span class="s0">)/</span><span class="s3">2</span><span class="s0">;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">setHeight</span><span class="s0">(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">labelHeight</span><span class="s0">);</span><span class="s1">i</span><span class="s0">.</span><span class="s1">labelMarginTop</span><span class="s0">=(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">labelHeight</span><span class="s0">-</span><span class="s1">o</span><span class="s0">)/</span><span class="s3">2</span><span class="s0">}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">labelPosVertical</span><span class="s0">==</span><span class="s2">&quot;bottom&quot;</span><span class="s0">){</span><span class="s1">i</span><span class="s0">.</span><span class="s1">setHeight</span><span class="s0">(</span><span class="s1">o</span><span class="s0">+</span><span class="s1">i</span><span class="s0">.</span><span class="s1">labelHeight</span><span class="s0">)}}}}))};</span><span class="s1">T</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">repopulateCompounds</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">t</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">compoundOrder</span><span class="s0">.</span><span class="s1">length</span><span class="s0">-</span><span class="s3">1</span><span class="s0">;</span><span class="s1">t</span><span class="s0">&gt;=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">t</span><span class="s0">--){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">compoundOrder</span><span class="s0">[</span><span class="s1">t</span><span class="s0">];</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">id</span><span class="s0">;</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">paddingLeft</span><span class="s0">;</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">paddingTop</span><span class="s0">;</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">labelMarginLeft</span><span class="s0">;</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">labelMarginTop</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">adjustLocations</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">tiledMemberPack</span><span class="s0">[</span><span class="s1">r</span><span class="s0">],</span><span class="s1">e</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">x</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">y</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">a</span><span class="s0">)}};</span><span class="s1">T</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">repopulateZeroDegreeMembers</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">var </span><span class="s1">t</span><span class="s0">=</span><span class="s4">this</span><span class="s0">;</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">tiledZeroDegreePack</span><span class="s0">;</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">keys</span><span class="s0">(</span><span class="s1">e</span><span class="s0">).</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">r</span><span class="s0">){</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">idToDummyNode</span><span class="s0">[</span><span class="s1">r</span><span class="s0">];</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">paddingLeft</span><span class="s0">;</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">paddingTop</span><span class="s0">;</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">labelMarginLeft</span><span class="s0">;</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">labelMarginTop</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">adjustLocations</span><span class="s0">(</span><span class="s1">e</span><span class="s0">[</span><span class="s1">r</span><span class="s0">],</span><span class="s1">i</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">x</span><span class="s0">,</span><span class="s1">i</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">y</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">s</span><span class="s0">)}))};</span><span class="s1">T</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getToBeTiled</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">id</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">toBeTiled</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]!=</span><span class="s4">null</span><span class="s0">){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">toBeTiled</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]}</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getChild</span><span class="s0">();</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">==</span><span class="s4">null</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">toBeTiled</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]=</span><span class="s4">false</span><span class="s0">;</span><span class="s4">return false</span><span class="s0">}</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">getNodes</span><span class="s0">();</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">n</span><span class="s0">&lt;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">n</span><span class="s0">++){</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s1">i</span><span class="s0">[</span><span class="s1">n</span><span class="s0">];</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getNodeDegree</span><span class="s0">(</span><span class="s1">o</span><span class="s0">)&gt;</span><span class="s3">0</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">toBeTiled</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]=</span><span class="s4">false</span><span class="s0">;</span><span class="s4">return false</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">o</span><span class="s0">.</span><span class="s1">getChild</span><span class="s0">()==</span><span class="s4">null</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">toBeTiled</span><span class="s0">[</span><span class="s1">o</span><span class="s0">.</span><span class="s1">id</span><span class="s0">]=</span><span class="s4">false</span><span class="s0">;</span><span class="s4">continue</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(!</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getToBeTiled</span><span class="s0">(</span><span class="s1">o</span><span class="s0">)){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">toBeTiled</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]=</span><span class="s4">false</span><span class="s0">;</span><span class="s4">return false</span><span class="s0">}}</span><span class="s4">this</span><span class="s0">.</span><span class="s1">toBeTiled</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]=</span><span class="s4">true</span><span class="s0">;</span><span class="s4">return true</span><span class="s0">};</span><span class="s1">T</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getNodeDegree</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">id</span><span class="s0">;</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getEdges</span><span class="s0">();</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">n</span><span class="s0">&lt;</span><span class="s1">r</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">n</span><span class="s0">++){</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s1">r</span><span class="s0">[</span><span class="s1">n</span><span class="s0">];</span><span class="s4">if</span><span class="s0">(</span><span class="s1">o</span><span class="s0">.</span><span class="s1">getSource</span><span class="s0">().</span><span class="s1">id</span><span class="s0">!==</span><span class="s1">o</span><span class="s0">.</span><span class="s1">getTarget</span><span class="s0">().</span><span class="s1">id</span><span class="s0">){</span><span class="s1">i</span><span class="s0">=</span><span class="s1">i</span><span class="s0">+</span><span class="s3">1</span><span class="s0">}}</span><span class="s4">return </span><span class="s1">i</span><span class="s0">};</span><span class="s1">T</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getNodeDegreeWithChildren</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getNodeDegree</span><span class="s0">(</span><span class="s1">t</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getChild</span><span class="s0">()==</span><span class="s4">null</span><span class="s0">){</span><span class="s4">return </span><span class="s1">e</span><span class="s0">}</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getChild</span><span class="s0">().</span><span class="s1">getNodes</span><span class="s0">();</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">i</span><span class="s0">&lt;</span><span class="s1">r</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">i</span><span class="s0">++){</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">r</span><span class="s0">[</span><span class="s1">i</span><span class="s0">];</span><span class="s1">e</span><span class="s0">+=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getNodeDegreeWithChildren</span><span class="s0">(</span><span class="s1">n</span><span class="s0">)}</span><span class="s4">return </span><span class="s1">e</span><span class="s0">};</span><span class="s1">T</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">performDFSOnCompounds</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">compoundOrder</span><span class="s0">=[];</span><span class="s4">this</span><span class="s0">.</span><span class="s1">fillCompexOrderByDFS</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">getRoot</span><span class="s0">().</span><span class="s1">getNodes</span><span class="s0">())};</span><span class="s1">T</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">fillCompexOrderByDFS</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">e</span><span class="s0">&lt;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">e</span><span class="s0">++){</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s1">t</span><span class="s0">[</span><span class="s1">e</span><span class="s0">];</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">getChild</span><span class="s0">()!=</span><span class="s4">null</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">fillCompexOrderByDFS</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">getChild</span><span class="s0">().</span><span class="s1">getNodes</span><span class="s0">())}</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getToBeTiled</span><span class="s0">(</span><span class="s1">r</span><span class="s0">)){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">compoundOrder</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">r</span><span class="s0">)}}};</span><span class="s1">T</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">adjustLocations</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">a</span><span class="s0">){</span><span class="s1">e</span><span class="s0">+=</span><span class="s1">i</span><span class="s0">+</span><span class="s1">o</span><span class="s0">;</span><span class="s1">r</span><span class="s0">+=</span><span class="s1">n</span><span class="s0">+</span><span class="s1">a</span><span class="s0">;</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s1">e</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">h</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">h</span><span class="s0">&lt;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rows</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">h</span><span class="s0">++){</span><span class="s4">var </span><span class="s1">l</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rows</span><span class="s0">[</span><span class="s1">h</span><span class="s0">];</span><span class="s1">e</span><span class="s0">=</span><span class="s1">s</span><span class="s0">;</span><span class="s4">var </span><span class="s1">c</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">d</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">d</span><span class="s0">&lt;</span><span class="s1">l</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">d</span><span class="s0">++){</span><span class="s4">var </span><span class="s1">f</span><span class="s0">=</span><span class="s1">l</span><span class="s0">[</span><span class="s1">d</span><span class="s0">];</span><span class="s1">f</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">x</span><span class="s0">=</span><span class="s1">e</span><span class="s0">;</span><span class="s1">f</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">y</span><span class="s0">=</span><span class="s1">r</span><span class="s0">;</span><span class="s1">e</span><span class="s0">+=</span><span class="s1">f</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">width</span><span class="s0">+</span><span class="s1">t</span><span class="s0">.</span><span class="s1">horizontalPadding</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">f</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">height</span><span class="s0">&gt;</span><span class="s1">c</span><span class="s0">)</span><span class="s1">c</span><span class="s0">=</span><span class="s1">f</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">height</span><span class="s0">}</span><span class="s1">r</span><span class="s0">+=</span><span class="s1">c</span><span class="s0">+</span><span class="s1">t</span><span class="s0">.</span><span class="s1">verticalPadding</span><span class="s0">}};</span><span class="s1">T</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">tileCompoundMembers</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s4">this</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">tiledMemberPack</span><span class="s0">=[];</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">keys</span><span class="s0">(</span><span class="s1">t</span><span class="s0">).</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">i</span><span class="s0">){</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">i</span><span class="s0">];</span><span class="s1">r</span><span class="s0">.</span><span class="s1">tiledMemberPack</span><span class="s0">[</span><span class="s1">i</span><span class="s0">]=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">tileNodes</span><span class="s0">(</span><span class="s1">t</span><span class="s0">[</span><span class="s1">i</span><span class="s0">],</span><span class="s1">n</span><span class="s0">.</span><span class="s1">paddingLeft</span><span class="s0">+</span><span class="s1">n</span><span class="s0">.</span><span class="s1">paddingRight</span><span class="s0">);</span><span class="s1">n</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">width</span><span class="s0">=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">tiledMemberPack</span><span class="s0">[</span><span class="s1">i</span><span class="s0">].</span><span class="s1">width</span><span class="s0">;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">height</span><span class="s0">=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">tiledMemberPack</span><span class="s0">[</span><span class="s1">i</span><span class="s0">].</span><span class="s1">height</span><span class="s0">;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">setCenter</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">tiledMemberPack</span><span class="s0">[</span><span class="s1">i</span><span class="s0">].</span><span class="s1">centerX</span><span class="s0">,</span><span class="s1">r</span><span class="s0">.</span><span class="s1">tiledMemberPack</span><span class="s0">[</span><span class="s1">i</span><span class="s0">].</span><span class="s1">centerY</span><span class="s0">);</span><span class="s1">n</span><span class="s0">.</span><span class="s1">labelMarginLeft</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">labelMarginTop</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">h</span><span class="s0">.</span><span class="s1">NODE_DIMENSIONS_INCLUDE_LABELS</span><span class="s0">){</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">width</span><span class="s0">;</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">height</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">.</span><span class="s1">labelWidth</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">.</span><span class="s1">labelPosHorizontal</span><span class="s0">==</span><span class="s2">&quot;left&quot;</span><span class="s0">){</span><span class="s1">n</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">x</span><span class="s0">-=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">labelWidth</span><span class="s0">;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">setWidth</span><span class="s0">(</span><span class="s1">o</span><span class="s0">+</span><span class="s1">n</span><span class="s0">.</span><span class="s1">labelWidth</span><span class="s0">);</span><span class="s1">n</span><span class="s0">.</span><span class="s1">labelMarginLeft</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">labelWidth</span><span class="s0">}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">.</span><span class="s1">labelPosHorizontal</span><span class="s0">==</span><span class="s2">&quot;center&quot;</span><span class="s0">&amp;&amp;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">labelWidth</span><span class="s0">&gt;</span><span class="s1">o</span><span class="s0">){</span><span class="s1">n</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">x</span><span class="s0">-=(</span><span class="s1">n</span><span class="s0">.</span><span class="s1">labelWidth</span><span class="s0">-</span><span class="s1">o</span><span class="s0">)/</span><span class="s3">2</span><span class="s0">;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">setWidth</span><span class="s0">(</span><span class="s1">n</span><span class="s0">.</span><span class="s1">labelWidth</span><span class="s0">);</span><span class="s1">n</span><span class="s0">.</span><span class="s1">labelMarginLeft</span><span class="s0">=(</span><span class="s1">n</span><span class="s0">.</span><span class="s1">labelWidth</span><span class="s0">-</span><span class="s1">o</span><span class="s0">)/</span><span class="s3">2</span><span class="s0">}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">.</span><span class="s1">labelPosHorizontal</span><span class="s0">==</span><span class="s2">&quot;right&quot;</span><span class="s0">){</span><span class="s1">n</span><span class="s0">.</span><span class="s1">setWidth</span><span class="s0">(</span><span class="s1">o</span><span class="s0">+</span><span class="s1">n</span><span class="s0">.</span><span class="s1">labelWidth</span><span class="s0">)}}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">.</span><span class="s1">labelHeight</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">.</span><span class="s1">labelPosVertical</span><span class="s0">==</span><span class="s2">&quot;top&quot;</span><span class="s0">){</span><span class="s1">n</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">y</span><span class="s0">-=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">labelHeight</span><span class="s0">;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">setHeight</span><span class="s0">(</span><span class="s1">a</span><span class="s0">+</span><span class="s1">n</span><span class="s0">.</span><span class="s1">labelHeight</span><span class="s0">);</span><span class="s1">n</span><span class="s0">.</span><span class="s1">labelMarginTop</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">labelHeight</span><span class="s0">}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">.</span><span class="s1">labelPosVertical</span><span class="s0">==</span><span class="s2">&quot;center&quot;</span><span class="s0">&amp;&amp;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">labelHeight</span><span class="s0">&gt;</span><span class="s1">a</span><span class="s0">){</span><span class="s1">n</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">y</span><span class="s0">-=(</span><span class="s1">n</span><span class="s0">.</span><span class="s1">labelHeight</span><span class="s0">-</span><span class="s1">a</span><span class="s0">)/</span><span class="s3">2</span><span class="s0">;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">setHeight</span><span class="s0">(</span><span class="s1">n</span><span class="s0">.</span><span class="s1">labelHeight</span><span class="s0">);</span><span class="s1">n</span><span class="s0">.</span><span class="s1">labelMarginTop</span><span class="s0">=(</span><span class="s1">n</span><span class="s0">.</span><span class="s1">labelHeight</span><span class="s0">-</span><span class="s1">a</span><span class="s0">)/</span><span class="s3">2</span><span class="s0">}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">.</span><span class="s1">labelPosVertical</span><span class="s0">==</span><span class="s2">&quot;bottom&quot;</span><span class="s0">){</span><span class="s1">n</span><span class="s0">.</span><span class="s1">setHeight</span><span class="s0">(</span><span class="s1">a</span><span class="s0">+</span><span class="s1">n</span><span class="s0">.</span><span class="s1">labelHeight</span><span class="s0">)}}}}))};</span><span class="s1">T</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">tileNodes</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">tileNodesByFavoringDim</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s4">true</span><span class="s0">);</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">tileNodesByFavoringDim</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s4">false</span><span class="s0">);</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getOrgRatio</span><span class="s0">(</span><span class="s1">r</span><span class="s0">);</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getOrgRatio</span><span class="s0">(</span><span class="s1">i</span><span class="s0">);</span><span class="s4">var </span><span class="s1">a</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">o</span><span class="s0">&lt;</span><span class="s1">n</span><span class="s0">){</span><span class="s1">a</span><span class="s0">=</span><span class="s1">i</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">a</span><span class="s0">=</span><span class="s1">r</span><span class="s0">}</span><span class="s4">return </span><span class="s1">a</span><span class="s0">};</span><span class="s1">T</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getOrgRatio</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">width</span><span class="s0">;</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">height</span><span class="s0">;</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">e</span><span class="s0">/</span><span class="s1">r</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">i</span><span class="s0">&lt;</span><span class="s3">1</span><span class="s0">){</span><span class="s1">i</span><span class="s0">=</span><span class="s3">1</span><span class="s0">/</span><span class="s1">i</span><span class="s0">}</span><span class="s4">return </span><span class="s1">i</span><span class="s0">};</span><span class="s1">T</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">calcIdealRowWidth</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s1">h</span><span class="s0">.</span><span class="s1">TILING_PADDING_VERTICAL</span><span class="s0">;</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">h</span><span class="s0">.</span><span class="s1">TILING_PADDING_HORIZONTAL</span><span class="s0">;</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s1">o</span><span class="s0">+=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getWidth</span><span class="s0">();</span><span class="s1">a</span><span class="s0">+=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getHeight</span><span class="s0">();</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getWidth</span><span class="s0">()&gt;</span><span class="s1">s</span><span class="s0">){</span><span class="s1">s</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getWidth</span><span class="s0">()}}));</span><span class="s4">var </span><span class="s1">l</span><span class="s0">=</span><span class="s1">o</span><span class="s0">/</span><span class="s1">n</span><span class="s0">;</span><span class="s4">var </span><span class="s1">c</span><span class="s0">=</span><span class="s1">a</span><span class="s0">/</span><span class="s1">n</span><span class="s0">;</span><span class="s4">var </span><span class="s1">d</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">pow</span><span class="s0">(</span><span class="s1">r</span><span class="s0">-</span><span class="s1">i</span><span class="s0">,</span><span class="s3">2</span><span class="s0">)+</span><span class="s3">4</span><span class="s0">*(</span><span class="s1">l</span><span class="s0">+</span><span class="s1">i</span><span class="s0">)*(</span><span class="s1">c</span><span class="s0">+</span><span class="s1">r</span><span class="s0">)*</span><span class="s1">n</span><span class="s0">;</span><span class="s4">var </span><span class="s1">f</span><span class="s0">=(</span><span class="s1">i</span><span class="s0">-</span><span class="s1">r</span><span class="s0">+</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">sqrt</span><span class="s0">(</span><span class="s1">d</span><span class="s0">))/(</span><span class="s3">2</span><span class="s0">*(</span><span class="s1">l</span><span class="s0">+</span><span class="s1">i</span><span class="s0">));</span><span class="s4">var </span><span class="s1">g</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s1">g</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">ceil</span><span class="s0">(</span><span class="s1">f</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">g</span><span class="s0">==</span><span class="s1">f</span><span class="s0">){</span><span class="s1">g</span><span class="s0">++}}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">g</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">floor</span><span class="s0">(</span><span class="s1">f</span><span class="s0">)}</span><span class="s4">var </span><span class="s1">u</span><span class="s0">=</span><span class="s1">g</span><span class="s0">*(</span><span class="s1">l</span><span class="s0">+</span><span class="s1">i</span><span class="s0">)-</span><span class="s1">i</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">s</span><span class="s0">&gt;</span><span class="s1">u</span><span class="s0">){</span><span class="s1">u</span><span class="s0">=</span><span class="s1">s</span><span class="s0">}</span><span class="s1">u</span><span class="s0">+=</span><span class="s1">i</span><span class="s0">*</span><span class="s3">2</span><span class="s0">;</span><span class="s4">return </span><span class="s1">u</span><span class="s0">};</span><span class="s1">T</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">tileNodesByFavoringDim</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">h</span><span class="s0">.</span><span class="s1">TILING_PADDING_VERTICAL</span><span class="s0">;</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">h</span><span class="s0">.</span><span class="s1">TILING_PADDING_HORIZONTAL</span><span class="s0">;</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s1">h</span><span class="s0">.</span><span class="s1">TILING_COMPARE_BY</span><span class="s0">;</span><span class="s4">var </span><span class="s1">a</span><span class="s0">={</span><span class="s1">rows</span><span class="s0">:[],</span><span class="s1">rowWidth</span><span class="s0">:[],</span><span class="s1">rowHeight</span><span class="s0">:[],</span><span class="s1">width</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">height</span><span class="s0">:</span><span class="s1">e</span><span class="s0">,</span><span class="s1">verticalPadding</span><span class="s0">:</span><span class="s1">i</span><span class="s0">,</span><span class="s1">horizontalPadding</span><span class="s0">:</span><span class="s1">n</span><span class="s0">,</span><span class="s1">centerX</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">centerY</span><span class="s0">:</span><span class="s3">0</span><span class="s0">};</span><span class="s4">if</span><span class="s0">(</span><span class="s1">o</span><span class="s0">){</span><span class="s1">a</span><span class="s0">.</span><span class="s1">idealRowWidth</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">calcIdealRowWidth</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">r</span><span class="s0">)}</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">return </span><span class="s1">e</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">width</span><span class="s0">*</span><span class="s1">e</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">height</span><span class="s0">};</span><span class="s4">var </span><span class="s1">l</span><span class="s0">=</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s4">return </span><span class="s1">s</span><span class="s0">(</span><span class="s1">r</span><span class="s0">)-</span><span class="s1">s</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)};</span><span class="s1">t</span><span class="s0">.</span><span class="s1">sort</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s1">l</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">a</span><span class="s0">.</span><span class="s1">idealRowWidth</span><span class="s0">){</span><span class="s1">r</span><span class="s0">=</span><span class="s1">o</span><span class="s0">;</span><span class="s4">return </span><span class="s1">r</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">id</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">id</span><span class="s0">)}</span><span class="s4">return </span><span class="s1">r</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">)}));</span><span class="s4">var </span><span class="s1">c</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">d</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">f</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">f</span><span class="s0">&lt;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">f</span><span class="s0">++){</span><span class="s4">var </span><span class="s1">g</span><span class="s0">=</span><span class="s1">t</span><span class="s0">[</span><span class="s1">f</span><span class="s0">];</span><span class="s1">c</span><span class="s0">+=</span><span class="s1">g</span><span class="s0">.</span><span class="s1">getCenterX</span><span class="s0">();</span><span class="s1">d</span><span class="s0">+=</span><span class="s1">g</span><span class="s0">.</span><span class="s1">getCenterY</span><span class="s0">()}</span><span class="s1">a</span><span class="s0">.</span><span class="s1">centerX</span><span class="s0">=</span><span class="s1">c</span><span class="s0">/</span><span class="s1">t</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">a</span><span class="s0">.</span><span class="s1">centerY</span><span class="s0">=</span><span class="s1">d</span><span class="s0">/</span><span class="s1">t</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">f</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">f</span><span class="s0">&lt;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">f</span><span class="s0">++){</span><span class="s4">var </span><span class="s1">g</span><span class="s0">=</span><span class="s1">t</span><span class="s0">[</span><span class="s1">f</span><span class="s0">];</span><span class="s4">if</span><span class="s0">(</span><span class="s1">a</span><span class="s0">.</span><span class="s1">rows</span><span class="s0">.</span><span class="s1">length</span><span class="s0">==</span><span class="s3">0</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">insertNodeToRow</span><span class="s0">(</span><span class="s1">a</span><span class="s0">,</span><span class="s1">g</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s1">e</span><span class="s0">)}</span><span class="s4">else if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">canAddHorizontal</span><span class="s0">(</span><span class="s1">a</span><span class="s0">,</span><span class="s1">g</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">width</span><span class="s0">,</span><span class="s1">g</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">height</span><span class="s0">)){</span><span class="s4">var </span><span class="s1">u</span><span class="s0">=</span><span class="s1">a</span><span class="s0">.</span><span class="s1">rows</span><span class="s0">.</span><span class="s1">length</span><span class="s0">-</span><span class="s3">1</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">a</span><span class="s0">.</span><span class="s1">idealRowWidth</span><span class="s0">){</span><span class="s1">u</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getShortestRowIndex</span><span class="s0">(</span><span class="s1">a</span><span class="s0">)}</span><span class="s4">this</span><span class="s0">.</span><span class="s1">insertNodeToRow</span><span class="s0">(</span><span class="s1">a</span><span class="s0">,</span><span class="s1">g</span><span class="s0">,</span><span class="s1">u</span><span class="s0">,</span><span class="s1">e</span><span class="s0">)}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">this</span><span class="s0">.</span><span class="s1">insertNodeToRow</span><span class="s0">(</span><span class="s1">a</span><span class="s0">,</span><span class="s1">g</span><span class="s0">,</span><span class="s1">a</span><span class="s0">.</span><span class="s1">rows</span><span class="s0">.</span><span class="s1">length</span><span class="s0">,</span><span class="s1">e</span><span class="s0">)}</span><span class="s4">this</span><span class="s0">.</span><span class="s1">shiftToLastRow</span><span class="s0">(</span><span class="s1">a</span><span class="s0">)}</span><span class="s4">return </span><span class="s1">a</span><span class="s0">};</span><span class="s1">T</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">insertNodeToRow</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">i</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">==</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rows</span><span class="s0">.</span><span class="s1">length</span><span class="s0">){</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=[];</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rows</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">o</span><span class="s0">);</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rowWidth</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">n</span><span class="s0">);</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rowHeight</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s3">0</span><span class="s0">)}</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rowWidth</span><span class="s0">[</span><span class="s1">r</span><span class="s0">]+</span><span class="s1">e</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">width</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rows</span><span class="s0">[</span><span class="s1">r</span><span class="s0">].</span><span class="s1">length</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">){</span><span class="s1">a</span><span class="s0">+=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">horizontalPadding</span><span class="s0">}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rowWidth</span><span class="s0">[</span><span class="s1">r</span><span class="s0">]=</span><span class="s1">a</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">width</span><span class="s0">&lt;</span><span class="s1">a</span><span class="s0">){</span><span class="s1">t</span><span class="s0">.</span><span class="s1">width</span><span class="s0">=</span><span class="s1">a</span><span class="s0">}</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">height</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">)</span><span class="s1">s</span><span class="s0">+=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">verticalPadding</span><span class="s0">;</span><span class="s4">var </span><span class="s1">h</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">s</span><span class="s0">&gt;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rowHeight</span><span class="s0">[</span><span class="s1">r</span><span class="s0">]){</span><span class="s1">h</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rowHeight</span><span class="s0">[</span><span class="s1">r</span><span class="s0">];</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rowHeight</span><span class="s0">[</span><span class="s1">r</span><span class="s0">]=</span><span class="s1">s</span><span class="s0">;</span><span class="s1">h</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rowHeight</span><span class="s0">[</span><span class="s1">r</span><span class="s0">]-</span><span class="s1">h</span><span class="s0">}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">height</span><span class="s0">+=</span><span class="s1">h</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rows</span><span class="s0">[</span><span class="s1">r</span><span class="s0">].</span><span class="s1">push</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)};</span><span class="s1">T</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getShortestRowIndex</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=-</span><span class="s3">1</span><span class="s0">;</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s1">Number</span><span class="s0">.</span><span class="s1">MAX_VALUE</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">i</span><span class="s0">&lt;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rows</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">i</span><span class="s0">++){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rowWidth</span><span class="s0">[</span><span class="s1">i</span><span class="s0">]&lt;</span><span class="s1">r</span><span class="s0">){</span><span class="s1">e</span><span class="s0">=</span><span class="s1">i</span><span class="s0">;</span><span class="s1">r</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rowWidth</span><span class="s0">[</span><span class="s1">i</span><span class="s0">]}}</span><span class="s4">return </span><span class="s1">e</span><span class="s0">};</span><span class="s1">T</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getLongestRowIndex</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=-</span><span class="s3">1</span><span class="s0">;</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s1">Number</span><span class="s0">.</span><span class="s1">MIN_VALUE</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">i</span><span class="s0">&lt;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rows</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">i</span><span class="s0">++){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rowWidth</span><span class="s0">[</span><span class="s1">i</span><span class="s0">]&gt;</span><span class="s1">r</span><span class="s0">){</span><span class="s1">e</span><span class="s0">=</span><span class="s1">i</span><span class="s0">;</span><span class="s1">r</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rowWidth</span><span class="s0">[</span><span class="s1">i</span><span class="s0">]}}</span><span class="s4">return </span><span class="s1">e</span><span class="s0">};</span><span class="s1">T</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">canAddHorizontal</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">idealRowWidth</span><span class="s0">){</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rows</span><span class="s0">.</span><span class="s1">length</span><span class="s0">-</span><span class="s3">1</span><span class="s0">;</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rowWidth</span><span class="s0">[</span><span class="s1">i</span><span class="s0">];</span><span class="s4">return </span><span class="s1">n</span><span class="s0">+</span><span class="s1">e</span><span class="s0">+</span><span class="s1">t</span><span class="s0">.</span><span class="s1">horizontalPadding</span><span class="s0">&lt;=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">idealRowWidth</span><span class="s0">}</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getShortestRowIndex</span><span class="s0">(</span><span class="s1">t</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">o</span><span class="s0">&lt;</span><span class="s3">0</span><span class="s0">){</span><span class="s4">return true</span><span class="s0">}</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rowWidth</span><span class="s0">[</span><span class="s1">o</span><span class="s0">];</span><span class="s4">if</span><span class="s0">(</span><span class="s1">a</span><span class="s0">+</span><span class="s1">t</span><span class="s0">.</span><span class="s1">horizontalPadding</span><span class="s0">+</span><span class="s1">e</span><span class="s0">&lt;=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">width</span><span class="s0">)</span><span class="s4">return true</span><span class="s0">;</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rowHeight</span><span class="s0">[</span><span class="s1">o</span><span class="s0">]&lt;</span><span class="s1">r</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">o</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">)</span><span class="s1">s</span><span class="s0">=</span><span class="s1">r</span><span class="s0">+</span><span class="s1">t</span><span class="s0">.</span><span class="s1">verticalPadding</span><span class="s0">-</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rowHeight</span><span class="s0">[</span><span class="s1">o</span><span class="s0">]}</span><span class="s4">var </span><span class="s1">h</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">width</span><span class="s0">-</span><span class="s1">a</span><span class="s0">&gt;=</span><span class="s1">e</span><span class="s0">+</span><span class="s1">t</span><span class="s0">.</span><span class="s1">horizontalPadding</span><span class="s0">){</span><span class="s1">h</span><span class="s0">=(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">height</span><span class="s0">+</span><span class="s1">s</span><span class="s0">)/(</span><span class="s1">a</span><span class="s0">+</span><span class="s1">e</span><span class="s0">+</span><span class="s1">t</span><span class="s0">.</span><span class="s1">horizontalPadding</span><span class="s0">)}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">h</span><span class="s0">=(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">height</span><span class="s0">+</span><span class="s1">s</span><span class="s0">)/</span><span class="s1">t</span><span class="s0">.</span><span class="s1">width</span><span class="s0">}</span><span class="s1">s</span><span class="s0">=</span><span class="s1">r</span><span class="s0">+</span><span class="s1">t</span><span class="s0">.</span><span class="s1">verticalPadding</span><span class="s0">;</span><span class="s4">var </span><span class="s1">l</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">width</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">){</span><span class="s1">l</span><span class="s0">=(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">height</span><span class="s0">+</span><span class="s1">s</span><span class="s0">)/</span><span class="s1">e</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">l</span><span class="s0">=(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">height</span><span class="s0">+</span><span class="s1">s</span><span class="s0">)/</span><span class="s1">t</span><span class="s0">.</span><span class="s1">width</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">l</span><span class="s0">&lt;</span><span class="s3">1</span><span class="s0">)</span><span class="s1">l</span><span class="s0">=</span><span class="s3">1</span><span class="s0">/</span><span class="s1">l</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">h</span><span class="s0">&lt;</span><span class="s3">1</span><span class="s0">)</span><span class="s1">h</span><span class="s0">=</span><span class="s3">1</span><span class="s0">/</span><span class="s1">h</span><span class="s0">;</span><span class="s4">return </span><span class="s1">h</span><span class="s0">&lt;</span><span class="s1">l</span><span class="s0">};</span><span class="s1">T</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">shiftToLastRow</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getLongestRowIndex</span><span class="s0">(</span><span class="s1">t</span><span class="s0">);</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rowWidth</span><span class="s0">.</span><span class="s1">length</span><span class="s0">-</span><span class="s3">1</span><span class="s0">;</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rows</span><span class="s0">[</span><span class="s1">e</span><span class="s0">];</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">i</span><span class="s0">[</span><span class="s1">i</span><span class="s0">.</span><span class="s1">length</span><span class="s0">-</span><span class="s3">1</span><span class="s0">];</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">width</span><span class="s0">+</span><span class="s1">t</span><span class="s0">.</span><span class="s1">horizontalPadding</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">width</span><span class="s0">-</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rowWidth</span><span class="s0">[</span><span class="s1">r</span><span class="s0">]&gt;</span><span class="s1">o</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">!=</span><span class="s1">r</span><span class="s0">){</span><span class="s1">i</span><span class="s0">.</span><span class="s1">splice</span><span class="s0">(-</span><span class="s3">1</span><span class="s0">,</span><span class="s3">1</span><span class="s0">);</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rows</span><span class="s0">[</span><span class="s1">r</span><span class="s0">].</span><span class="s1">push</span><span class="s0">(</span><span class="s1">n</span><span class="s0">);</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rowWidth</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rowWidth</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]-</span><span class="s1">o</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rowWidth</span><span class="s0">[</span><span class="s1">r</span><span class="s0">]=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rowWidth</span><span class="s0">[</span><span class="s1">r</span><span class="s0">]+</span><span class="s1">o</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">width</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rowWidth</span><span class="s0">[</span><span class="s1">instance</span><span class="s0">.</span><span class="s1">getLongestRowIndex</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)];</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s1">Number</span><span class="s0">.</span><span class="s1">MIN_VALUE</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">s</span><span class="s0">&lt;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">s</span><span class="s0">++){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">i</span><span class="s0">[</span><span class="s1">s</span><span class="s0">].</span><span class="s1">height</span><span class="s0">&gt;</span><span class="s1">a</span><span class="s0">)</span><span class="s1">a</span><span class="s0">=</span><span class="s1">i</span><span class="s0">[</span><span class="s1">s</span><span class="s0">].</span><span class="s1">height</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">)</span><span class="s1">a</span><span class="s0">+=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">verticalPadding</span><span class="s0">;</span><span class="s4">var </span><span class="s1">h</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rowHeight</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]+</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rowHeight</span><span class="s0">[</span><span class="s1">r</span><span class="s0">];</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rowHeight</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]=</span><span class="s1">a</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rowHeight</span><span class="s0">[</span><span class="s1">r</span><span class="s0">]&lt;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">height</span><span class="s0">+</span><span class="s1">t</span><span class="s0">.</span><span class="s1">verticalPadding</span><span class="s0">)</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rowHeight</span><span class="s0">[</span><span class="s1">r</span><span class="s0">]=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">height</span><span class="s0">+</span><span class="s1">t</span><span class="s0">.</span><span class="s1">verticalPadding</span><span class="s0">;</span><span class="s4">var </span><span class="s1">l</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rowHeight</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]+</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rowHeight</span><span class="s0">[</span><span class="s1">r</span><span class="s0">];</span><span class="s1">t</span><span class="s0">.</span><span class="s1">height</span><span class="s0">+=</span><span class="s1">l</span><span class="s0">-</span><span class="s1">h</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">shiftToLastRow</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)}};</span><span class="s1">T</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">tilingPreLayout</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">h</span><span class="s0">.</span><span class="s1">TILE</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">groupZeroDegreeMembers</span><span class="s0">();</span><span class="s4">this</span><span class="s0">.</span><span class="s1">clearCompounds</span><span class="s0">();</span><span class="s4">this</span><span class="s0">.</span><span class="s1">clearZeroDegreeMembers</span><span class="s0">()}};</span><span class="s1">T</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">tilingPostLayout</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">h</span><span class="s0">.</span><span class="s1">TILE</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">repopulateZeroDegreeMembers</span><span class="s0">();</span><span class="s4">this</span><span class="s0">.</span><span class="s1">repopulateCompounds</span><span class="s0">()}};</span><span class="s1">T</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">reduceTrees</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">var </span><span class="s1">t</span><span class="s0">=[];</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s4">var </span><span class="s1">r</span><span class="s0">;</span><span class="s4">while</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">getAllNodes</span><span class="s0">();</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=[];</span><span class="s1">e</span><span class="s0">=</span><span class="s4">false</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">o</span><span class="s0">&lt;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">o</span><span class="s0">++){</span><span class="s1">r</span><span class="s0">=</span><span class="s1">i</span><span class="s0">[</span><span class="s1">o</span><span class="s0">];</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">getEdges</span><span class="s0">().</span><span class="s1">length</span><span class="s0">==</span><span class="s3">1</span><span class="s0">&amp;&amp;!</span><span class="s1">r</span><span class="s0">.</span><span class="s1">getEdges</span><span class="s0">()[</span><span class="s3">0</span><span class="s0">].</span><span class="s1">isInterGraph</span><span class="s0">&amp;&amp;</span><span class="s1">r</span><span class="s0">.</span><span class="s1">getChild</span><span class="s0">()==</span><span class="s4">null</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">h</span><span class="s0">.</span><span class="s1">PURE_INCREMENTAL</span><span class="s0">){</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">getEdges</span><span class="s0">()[</span><span class="s3">0</span><span class="s0">].</span><span class="s1">getOtherEnd</span><span class="s0">(</span><span class="s1">r</span><span class="s0">);</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s4">new </span><span class="s1">u</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">getCenterX</span><span class="s0">()-</span><span class="s1">a</span><span class="s0">.</span><span class="s1">getCenterX</span><span class="s0">(),</span><span class="s1">r</span><span class="s0">.</span><span class="s1">getCenterY</span><span class="s0">()-</span><span class="s1">a</span><span class="s0">.</span><span class="s1">getCenterY</span><span class="s0">());</span><span class="s1">n</span><span class="s0">.</span><span class="s1">push</span><span class="s0">([</span><span class="s1">r</span><span class="s0">,</span><span class="s1">r</span><span class="s0">.</span><span class="s1">getEdges</span><span class="s0">()[</span><span class="s3">0</span><span class="s0">],</span><span class="s1">r</span><span class="s0">.</span><span class="s1">getOwner</span><span class="s0">(),</span><span class="s1">s</span><span class="s0">])}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">n</span><span class="s0">.</span><span class="s1">push</span><span class="s0">([</span><span class="s1">r</span><span class="s0">,</span><span class="s1">r</span><span class="s0">.</span><span class="s1">getEdges</span><span class="s0">()[</span><span class="s3">0</span><span class="s0">],</span><span class="s1">r</span><span class="s0">.</span><span class="s1">getOwner</span><span class="s0">()])}</span><span class="s1">e</span><span class="s0">=</span><span class="s4">true</span><span class="s0">}}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">==</span><span class="s4">true</span><span class="s0">){</span><span class="s4">var </span><span class="s1">l</span><span class="s0">=[];</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">c</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">c</span><span class="s0">&lt;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">c</span><span class="s0">++){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">[</span><span class="s1">c</span><span class="s0">][</span><span class="s3">0</span><span class="s0">].</span><span class="s1">getEdges</span><span class="s0">().</span><span class="s1">length</span><span class="s0">==</span><span class="s3">1</span><span class="s0">){</span><span class="s1">l</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">n</span><span class="s0">[</span><span class="s1">c</span><span class="s0">]);</span><span class="s1">n</span><span class="s0">[</span><span class="s1">c</span><span class="s0">][</span><span class="s3">0</span><span class="s0">].</span><span class="s1">getOwner</span><span class="s0">().</span><span class="s1">remove</span><span class="s0">(</span><span class="s1">n</span><span class="s0">[</span><span class="s1">c</span><span class="s0">][</span><span class="s3">0</span><span class="s0">])}}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">l</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">resetAllNodes</span><span class="s0">();</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">resetAllEdges</span><span class="s0">()}}</span><span class="s4">this</span><span class="s0">.</span><span class="s1">prunedNodesAll</span><span class="s0">=</span><span class="s1">t</span><span class="s0">};</span><span class="s1">T</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">growTree</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s1">t</span><span class="s0">[</span><span class="s1">e</span><span class="s0">-</span><span class="s3">1</span><span class="s0">];</span><span class="s4">var </span><span class="s1">i</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">n</span><span class="s0">&lt;</span><span class="s1">r</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">n</span><span class="s0">++){</span><span class="s1">i</span><span class="s0">=</span><span class="s1">r</span><span class="s0">[</span><span class="s1">n</span><span class="s0">];</span><span class="s4">this</span><span class="s0">.</span><span class="s1">findPlaceforPrunedNode</span><span class="s0">(</span><span class="s1">i</span><span class="s0">);</span><span class="s1">i</span><span class="s0">[</span><span class="s3">2</span><span class="s0">].</span><span class="s1">add</span><span class="s0">(</span><span class="s1">i</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]);</span><span class="s1">i</span><span class="s0">[</span><span class="s3">2</span><span class="s0">].</span><span class="s1">add</span><span class="s0">(</span><span class="s1">i</span><span class="s0">[</span><span class="s3">1</span><span class="s0">],</span><span class="s1">i</span><span class="s0">[</span><span class="s3">1</span><span class="s0">].</span><span class="s1">source</span><span class="s0">,</span><span class="s1">i</span><span class="s0">[</span><span class="s3">1</span><span class="s0">].</span><span class="s1">target</span><span class="s0">)}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">splice</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">length</span><span class="s0">-</span><span class="s3">1</span><span class="s0">,</span><span class="s3">1</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">resetAllNodes</span><span class="s0">();</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">resetAllEdges</span><span class="s0">()};</span><span class="s1">T</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">findPlaceforPrunedNode</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">;</span><span class="s4">var </span><span class="s1">r</span><span class="s0">;</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">t</span><span class="s0">[</span><span class="s3">0</span><span class="s0">];</span><span class="s4">if</span><span class="s0">(</span><span class="s1">i</span><span class="s0">==</span><span class="s1">t</span><span class="s0">[</span><span class="s3">1</span><span class="s0">].</span><span class="s1">source</span><span class="s0">){</span><span class="s1">r</span><span class="s0">=</span><span class="s1">t</span><span class="s0">[</span><span class="s3">1</span><span class="s0">].</span><span class="s1">target</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">r</span><span class="s0">=</span><span class="s1">t</span><span class="s0">[</span><span class="s3">1</span><span class="s0">].</span><span class="s1">source</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">h</span><span class="s0">.</span><span class="s1">PURE_INCREMENTAL</span><span class="s0">){</span><span class="s1">i</span><span class="s0">.</span><span class="s1">setCenter</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">getCenterX</span><span class="s0">()+</span><span class="s1">t</span><span class="s0">[</span><span class="s3">3</span><span class="s0">].</span><span class="s1">getWidth</span><span class="s0">(),</span><span class="s1">r</span><span class="s0">.</span><span class="s1">getCenterY</span><span class="s0">()+</span><span class="s1">t</span><span class="s0">[</span><span class="s3">3</span><span class="s0">].</span><span class="s1">getHeight</span><span class="s0">())}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">startX</span><span class="s0">;</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">finishX</span><span class="s0">;</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">startY</span><span class="s0">;</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">finishY</span><span class="s0">;</span><span class="s4">var </span><span class="s1">l</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">d</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">f</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">g</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">u</span><span class="s0">=[</span><span class="s1">l</span><span class="s0">,</span><span class="s1">f</span><span class="s0">,</span><span class="s1">d</span><span class="s0">,</span><span class="s1">g</span><span class="s0">];</span><span class="s4">if</span><span class="s0">(</span><span class="s1">a</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">p</span><span class="s0">=</span><span class="s1">n</span><span class="s0">;</span><span class="s1">p</span><span class="s0">&lt;=</span><span class="s1">o</span><span class="s0">;</span><span class="s1">p</span><span class="s0">++){</span><span class="s1">u</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]+=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">grid</span><span class="s0">[</span><span class="s1">p</span><span class="s0">][</span><span class="s1">a</span><span class="s0">-</span><span class="s3">1</span><span class="s0">].</span><span class="s1">length</span><span class="s0">+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">grid</span><span class="s0">[</span><span class="s1">p</span><span class="s0">][</span><span class="s1">a</span><span class="s0">].</span><span class="s1">length</span><span class="s0">-</span><span class="s3">1</span><span class="s0">}}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">o</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">grid</span><span class="s0">.</span><span class="s1">length</span><span class="s0">-</span><span class="s3">1</span><span class="s0">){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">p</span><span class="s0">=</span><span class="s1">a</span><span class="s0">;</span><span class="s1">p</span><span class="s0">&lt;=</span><span class="s1">s</span><span class="s0">;</span><span class="s1">p</span><span class="s0">++){</span><span class="s1">u</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]+=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">grid</span><span class="s0">[</span><span class="s1">o</span><span class="s0">+</span><span class="s3">1</span><span class="s0">][</span><span class="s1">p</span><span class="s0">].</span><span class="s1">length</span><span class="s0">+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">grid</span><span class="s0">[</span><span class="s1">o</span><span class="s0">][</span><span class="s1">p</span><span class="s0">].</span><span class="s1">length</span><span class="s0">-</span><span class="s3">1</span><span class="s0">}}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">s</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">grid</span><span class="s0">[</span><span class="s3">0</span><span class="s0">].</span><span class="s1">length</span><span class="s0">-</span><span class="s3">1</span><span class="s0">){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">p</span><span class="s0">=</span><span class="s1">n</span><span class="s0">;</span><span class="s1">p</span><span class="s0">&lt;=</span><span class="s1">o</span><span class="s0">;</span><span class="s1">p</span><span class="s0">++){</span><span class="s1">u</span><span class="s0">[</span><span class="s3">2</span><span class="s0">]+=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">grid</span><span class="s0">[</span><span class="s1">p</span><span class="s0">][</span><span class="s1">s</span><span class="s0">+</span><span class="s3">1</span><span class="s0">].</span><span class="s1">length</span><span class="s0">+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">grid</span><span class="s0">[</span><span class="s1">p</span><span class="s0">][</span><span class="s1">s</span><span class="s0">].</span><span class="s1">length</span><span class="s0">-</span><span class="s3">1</span><span class="s0">}}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">p</span><span class="s0">=</span><span class="s1">a</span><span class="s0">;</span><span class="s1">p</span><span class="s0">&lt;=</span><span class="s1">s</span><span class="s0">;</span><span class="s1">p</span><span class="s0">++){</span><span class="s1">u</span><span class="s0">[</span><span class="s3">3</span><span class="s0">]+=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">grid</span><span class="s0">[</span><span class="s1">n</span><span class="s0">-</span><span class="s3">1</span><span class="s0">][</span><span class="s1">p</span><span class="s0">].</span><span class="s1">length</span><span class="s0">+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">grid</span><span class="s0">[</span><span class="s1">n</span><span class="s0">][</span><span class="s1">p</span><span class="s0">].</span><span class="s1">length</span><span class="s0">-</span><span class="s3">1</span><span class="s0">}}</span><span class="s4">var </span><span class="s1">y</span><span class="s0">=</span><span class="s1">v</span><span class="s0">.</span><span class="s1">MAX_VALUE</span><span class="s0">;</span><span class="s4">var </span><span class="s1">m</span><span class="s0">;</span><span class="s4">var </span><span class="s1">E</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">N</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">N</span><span class="s0">&lt;</span><span class="s1">u</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">N</span><span class="s0">++){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">u</span><span class="s0">[</span><span class="s1">N</span><span class="s0">]&lt;</span><span class="s1">y</span><span class="s0">){</span><span class="s1">y</span><span class="s0">=</span><span class="s1">u</span><span class="s0">[</span><span class="s1">N</span><span class="s0">];</span><span class="s1">m</span><span class="s0">=</span><span class="s3">1</span><span class="s0">;</span><span class="s1">E</span><span class="s0">=</span><span class="s1">N</span><span class="s0">}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">u</span><span class="s0">[</span><span class="s1">N</span><span class="s0">]==</span><span class="s1">y</span><span class="s0">){</span><span class="s1">m</span><span class="s0">++}}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">m</span><span class="s0">==</span><span class="s3">3</span><span class="s0">&amp;&amp;</span><span class="s1">y</span><span class="s0">==</span><span class="s3">0</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">u</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]==</span><span class="s3">0</span><span class="s0">&amp;&amp;</span><span class="s1">u</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]==</span><span class="s3">0</span><span class="s0">&amp;&amp;</span><span class="s1">u</span><span class="s0">[</span><span class="s3">2</span><span class="s0">]==</span><span class="s3">0</span><span class="s0">){</span><span class="s1">e</span><span class="s0">=</span><span class="s3">1</span><span class="s0">}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">u</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]==</span><span class="s3">0</span><span class="s0">&amp;&amp;</span><span class="s1">u</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]==</span><span class="s3">0</span><span class="s0">&amp;&amp;</span><span class="s1">u</span><span class="s0">[</span><span class="s3">3</span><span class="s0">]==</span><span class="s3">0</span><span class="s0">){</span><span class="s1">e</span><span class="s0">=</span><span class="s3">0</span><span class="s0">}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">u</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]==</span><span class="s3">0</span><span class="s0">&amp;&amp;</span><span class="s1">u</span><span class="s0">[</span><span class="s3">2</span><span class="s0">]==</span><span class="s3">0</span><span class="s0">&amp;&amp;</span><span class="s1">u</span><span class="s0">[</span><span class="s3">3</span><span class="s0">]==</span><span class="s3">0</span><span class="s0">){</span><span class="s1">e</span><span class="s0">=</span><span class="s3">3</span><span class="s0">}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">u</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]==</span><span class="s3">0</span><span class="s0">&amp;&amp;</span><span class="s1">u</span><span class="s0">[</span><span class="s3">2</span><span class="s0">]==</span><span class="s3">0</span><span class="s0">&amp;&amp;</span><span class="s1">u</span><span class="s0">[</span><span class="s3">3</span><span class="s0">]==</span><span class="s3">0</span><span class="s0">){</span><span class="s1">e</span><span class="s0">=</span><span class="s3">2</span><span class="s0">}}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">m</span><span class="s0">==</span><span class="s3">2</span><span class="s0">&amp;&amp;</span><span class="s1">y</span><span class="s0">==</span><span class="s3">0</span><span class="s0">){</span><span class="s4">var </span><span class="s1">T</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">floor</span><span class="s0">(</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">random</span><span class="s0">()*</span><span class="s3">2</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">u</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]==</span><span class="s3">0</span><span class="s0">&amp;&amp;</span><span class="s1">u</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]==</span><span class="s3">0</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">T</span><span class="s0">==</span><span class="s3">0</span><span class="s0">){</span><span class="s1">e</span><span class="s0">=</span><span class="s3">0</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">e</span><span class="s0">=</span><span class="s3">1</span><span class="s0">}}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">u</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]==</span><span class="s3">0</span><span class="s0">&amp;&amp;</span><span class="s1">u</span><span class="s0">[</span><span class="s3">2</span><span class="s0">]==</span><span class="s3">0</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">T</span><span class="s0">==</span><span class="s3">0</span><span class="s0">){</span><span class="s1">e</span><span class="s0">=</span><span class="s3">0</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">e</span><span class="s0">=</span><span class="s3">2</span><span class="s0">}}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">u</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]==</span><span class="s3">0</span><span class="s0">&amp;&amp;</span><span class="s1">u</span><span class="s0">[</span><span class="s3">3</span><span class="s0">]==</span><span class="s3">0</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">T</span><span class="s0">==</span><span class="s3">0</span><span class="s0">){</span><span class="s1">e</span><span class="s0">=</span><span class="s3">0</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">e</span><span class="s0">=</span><span class="s3">3</span><span class="s0">}}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">u</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]==</span><span class="s3">0</span><span class="s0">&amp;&amp;</span><span class="s1">u</span><span class="s0">[</span><span class="s3">2</span><span class="s0">]==</span><span class="s3">0</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">T</span><span class="s0">==</span><span class="s3">0</span><span class="s0">){</span><span class="s1">e</span><span class="s0">=</span><span class="s3">1</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">e</span><span class="s0">=</span><span class="s3">2</span><span class="s0">}}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">u</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]==</span><span class="s3">0</span><span class="s0">&amp;&amp;</span><span class="s1">u</span><span class="s0">[</span><span class="s3">3</span><span class="s0">]==</span><span class="s3">0</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">T</span><span class="s0">==</span><span class="s3">0</span><span class="s0">){</span><span class="s1">e</span><span class="s0">=</span><span class="s3">1</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">e</span><span class="s0">=</span><span class="s3">3</span><span class="s0">}}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">if</span><span class="s0">(</span><span class="s1">T</span><span class="s0">==</span><span class="s3">0</span><span class="s0">){</span><span class="s1">e</span><span class="s0">=</span><span class="s3">2</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">e</span><span class="s0">=</span><span class="s3">3</span><span class="s0">}}}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">m</span><span class="s0">==</span><span class="s3">4</span><span class="s0">&amp;&amp;</span><span class="s1">y</span><span class="s0">==</span><span class="s3">0</span><span class="s0">){</span><span class="s4">var </span><span class="s1">T</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">floor</span><span class="s0">(</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">random</span><span class="s0">()*</span><span class="s3">4</span><span class="s0">);</span><span class="s1">e</span><span class="s0">=</span><span class="s1">T</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">e</span><span class="s0">=</span><span class="s1">E</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">==</span><span class="s3">0</span><span class="s0">){</span><span class="s1">i</span><span class="s0">.</span><span class="s1">setCenter</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">getCenterX</span><span class="s0">(),</span><span class="s1">r</span><span class="s0">.</span><span class="s1">getCenterY</span><span class="s0">()-</span><span class="s1">r</span><span class="s0">.</span><span class="s1">getHeight</span><span class="s0">()/</span><span class="s3">2</span><span class="s0">-</span><span class="s1">c</span><span class="s0">.</span><span class="s1">DEFAULT_EDGE_LENGTH</span><span class="s0">-</span><span class="s1">i</span><span class="s0">.</span><span class="s1">getHeight</span><span class="s0">()/</span><span class="s3">2</span><span class="s0">)}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">==</span><span class="s3">1</span><span class="s0">){</span><span class="s1">i</span><span class="s0">.</span><span class="s1">setCenter</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">getCenterX</span><span class="s0">()+</span><span class="s1">r</span><span class="s0">.</span><span class="s1">getWidth</span><span class="s0">()/</span><span class="s3">2</span><span class="s0">+</span><span class="s1">c</span><span class="s0">.</span><span class="s1">DEFAULT_EDGE_LENGTH</span><span class="s0">+</span><span class="s1">i</span><span class="s0">.</span><span class="s1">getWidth</span><span class="s0">()/</span><span class="s3">2</span><span class="s0">,</span><span class="s1">r</span><span class="s0">.</span><span class="s1">getCenterY</span><span class="s0">())}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">==</span><span class="s3">2</span><span class="s0">){</span><span class="s1">i</span><span class="s0">.</span><span class="s1">setCenter</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">getCenterX</span><span class="s0">(),</span><span class="s1">r</span><span class="s0">.</span><span class="s1">getCenterY</span><span class="s0">()+</span><span class="s1">r</span><span class="s0">.</span><span class="s1">getHeight</span><span class="s0">()/</span><span class="s3">2</span><span class="s0">+</span><span class="s1">c</span><span class="s0">.</span><span class="s1">DEFAULT_EDGE_LENGTH</span><span class="s0">+</span><span class="s1">i</span><span class="s0">.</span><span class="s1">getHeight</span><span class="s0">()/</span><span class="s3">2</span><span class="s0">)}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">i</span><span class="s0">.</span><span class="s1">setCenter</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">getCenterX</span><span class="s0">()-</span><span class="s1">r</span><span class="s0">.</span><span class="s1">getWidth</span><span class="s0">()/</span><span class="s3">2</span><span class="s0">-</span><span class="s1">c</span><span class="s0">.</span><span class="s1">DEFAULT_EDGE_LENGTH</span><span class="s0">-</span><span class="s1">i</span><span class="s0">.</span><span class="s1">getWidth</span><span class="s0">()/</span><span class="s3">2</span><span class="s0">,</span><span class="s1">r</span><span class="s0">.</span><span class="s1">getCenterY</span><span class="s0">())}}};</span><span class="s1">t</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">=</span><span class="s1">T</span><span class="s0">},</span><span class="s3">991</span><span class="s0">:(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">)=&gt;{</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">551</span><span class="s0">).</span><span class="s1">FDLayoutNode</span><span class="s0">;</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">551</span><span class="s0">).</span><span class="s1">IMath</span><span class="s0">;</span><span class="s4">function </span><span class="s1">o</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">n</span><span class="s0">){</span><span class="s1">i</span><span class="s0">.</span><span class="s1">call</span><span class="s0">(</span><span class="s4">this</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">n</span><span class="s0">)}</span><span class="s1">o</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">=</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">create</span><span class="s0">(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">);</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">a </span><span class="s4">in </span><span class="s1">i</span><span class="s0">){</span><span class="s1">o</span><span class="s0">[</span><span class="s1">a</span><span class="s0">]=</span><span class="s1">i</span><span class="s0">[</span><span class="s1">a</span><span class="s0">]}</span><span class="s1">o</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">calculateDisplacement</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">var </span><span class="s1">t</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">getLayout</span><span class="s0">();</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getChild</span><span class="s0">()!=</span><span class="s4">null</span><span class="s0">&amp;&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">fixedNodeWeight</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">displacementX</span><span class="s0">+=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">coolingFactor</span><span class="s0">*(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">springForceX</span><span class="s0">+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">repulsionForceX</span><span class="s0">+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">gravitationForceX</span><span class="s0">)/</span><span class="s4">this</span><span class="s0">.</span><span class="s1">fixedNodeWeight</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">displacementY</span><span class="s0">+=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">coolingFactor</span><span class="s0">*(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">springForceY</span><span class="s0">+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">repulsionForceY</span><span class="s0">+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">gravitationForceY</span><span class="s0">)/</span><span class="s4">this</span><span class="s0">.</span><span class="s1">fixedNodeWeight</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">this</span><span class="s0">.</span><span class="s1">displacementX</span><span class="s0">+=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">coolingFactor</span><span class="s0">*(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">springForceX</span><span class="s0">+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">repulsionForceX</span><span class="s0">+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">gravitationForceX</span><span class="s0">)/</span><span class="s4">this</span><span class="s0">.</span><span class="s1">noOfChildren</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">displacementY</span><span class="s0">+=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">coolingFactor</span><span class="s0">*(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">springForceY</span><span class="s0">+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">repulsionForceY</span><span class="s0">+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">gravitationForceY</span><span class="s0">)/</span><span class="s4">this</span><span class="s0">.</span><span class="s1">noOfChildren</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">abs</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">displacementX</span><span class="s0">)&gt;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">coolingFactor</span><span class="s0">*</span><span class="s1">t</span><span class="s0">.</span><span class="s1">maxNodeDisplacement</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">displacementX</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">coolingFactor</span><span class="s0">*</span><span class="s1">t</span><span class="s0">.</span><span class="s1">maxNodeDisplacement</span><span class="s0">*</span><span class="s1">n</span><span class="s0">.</span><span class="s1">sign</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">displacementX</span><span class="s0">)}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">abs</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">displacementY</span><span class="s0">)&gt;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">coolingFactor</span><span class="s0">*</span><span class="s1">t</span><span class="s0">.</span><span class="s1">maxNodeDisplacement</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">displacementY</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">coolingFactor</span><span class="s0">*</span><span class="s1">t</span><span class="s0">.</span><span class="s1">maxNodeDisplacement</span><span class="s0">*</span><span class="s1">n</span><span class="s0">.</span><span class="s1">sign</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">displacementY</span><span class="s0">)}</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">child</span><span class="s0">&amp;&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">child</span><span class="s0">.</span><span class="s1">getNodes</span><span class="s0">().</span><span class="s1">length</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">propogateDisplacementToChildren</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">displacementX</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">displacementY</span><span class="s0">)}};</span><span class="s1">o</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">propogateDisplacementToChildren</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getChild</span><span class="s0">().</span><span class="s1">getNodes</span><span class="s0">();</span><span class="s4">var </span><span class="s1">i</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">n</span><span class="s0">&lt;</span><span class="s1">r</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">n</span><span class="s0">++){</span><span class="s1">i</span><span class="s0">=</span><span class="s1">r</span><span class="s0">[</span><span class="s1">n</span><span class="s0">];</span><span class="s4">if</span><span class="s0">(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">getChild</span><span class="s0">()==</span><span class="s4">null</span><span class="s0">){</span><span class="s1">i</span><span class="s0">.</span><span class="s1">displacementX</span><span class="s0">+=</span><span class="s1">t</span><span class="s0">;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">displacementY</span><span class="s0">+=</span><span class="s1">e</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">i</span><span class="s0">.</span><span class="s1">propogateDisplacementToChildren</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">)}}};</span><span class="s1">o</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">move</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">var </span><span class="s1">t</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">getLayout</span><span class="s0">();</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">child</span><span class="s0">==</span><span class="s4">null</span><span class="s0">||</span><span class="s4">this</span><span class="s0">.</span><span class="s1">child</span><span class="s0">.</span><span class="s1">getNodes</span><span class="s0">().</span><span class="s1">length</span><span class="s0">==</span><span class="s3">0</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">moveBy</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">displacementX</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">displacementY</span><span class="s0">);</span><span class="s1">t</span><span class="s0">.</span><span class="s1">totalDisplacement</span><span class="s0">+=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">abs</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">displacementX</span><span class="s0">)+</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">abs</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">displacementY</span><span class="s0">)}</span><span class="s4">this</span><span class="s0">.</span><span class="s1">springForceX</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">springForceY</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">repulsionForceX</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">repulsionForceY</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">gravitationForceX</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">gravitationForceY</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">displacementX</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">displacementY</span><span class="s0">=</span><span class="s3">0</span><span class="s0">};</span><span class="s1">o</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">setPred1</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">pred1</span><span class="s0">=</span><span class="s1">t</span><span class="s0">};</span><span class="s1">o</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getPred1</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return </span><span class="s1">pred1</span><span class="s0">};</span><span class="s1">o</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getPred2</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return </span><span class="s1">pred2</span><span class="s0">};</span><span class="s1">o</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">setNext</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">next</span><span class="s0">=</span><span class="s1">t</span><span class="s0">};</span><span class="s1">o</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getNext</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return </span><span class="s1">next</span><span class="s0">};</span><span class="s1">o</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">setProcessed</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">processed</span><span class="s0">=</span><span class="s1">t</span><span class="s0">};</span><span class="s1">o</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">isProcessed</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return </span><span class="s1">processed</span><span class="s0">};</span><span class="s1">t</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">=</span><span class="s1">o</span><span class="s0">},</span><span class="s3">902</span><span class="s0">:(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">)=&gt;{</span><span class="s4">function </span><span class="s1">i</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">Array</span><span class="s0">.</span><span class="s1">isArray</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">r</span><span class="s0">=</span><span class="s1">Array</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">length</span><span class="s0">);</span><span class="s1">e</span><span class="s0">&lt;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">e</span><span class="s0">++){</span><span class="s1">r</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]=</span><span class="s1">t</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]}</span><span class="s4">return </span><span class="s1">r</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">return </span><span class="s1">Array</span><span class="s0">.</span><span class="s1">from</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)}}</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">806</span><span class="s0">);</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">551</span><span class="s0">).</span><span class="s1">LinkedList</span><span class="s0">;</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">551</span><span class="s0">).</span><span class="s1">Matrix</span><span class="s0">;</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">551</span><span class="s0">).</span><span class="s1">SVD</span><span class="s0">;</span><span class="s4">function </span><span class="s1">h</span><span class="s0">(){}</span><span class="s1">h</span><span class="s0">.</span><span class="s1">handleConstraints</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">={};</span><span class="s1">e</span><span class="s0">.</span><span class="s1">fixedNodeConstraint</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">constraints</span><span class="s0">.</span><span class="s1">fixedNodeConstraint</span><span class="s0">;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">alignmentConstraint</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">constraints</span><span class="s0">.</span><span class="s1">alignmentConstraint</span><span class="s0">;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">relativePlacementConstraint</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">constraints</span><span class="s0">.</span><span class="s1">relativePlacementConstraint</span><span class="s0">;</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Map</span><span class="s0">;</span><span class="s4">var </span><span class="s1">h</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Map</span><span class="s0">;</span><span class="s4">var </span><span class="s1">l</span><span class="s0">=[];</span><span class="s4">var </span><span class="s1">c</span><span class="s0">=[];</span><span class="s4">var </span><span class="s1">d</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getAllNodes</span><span class="s0">();</span><span class="s4">var </span><span class="s1">f</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">g</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">g</span><span class="s0">&lt;</span><span class="s1">d</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">g</span><span class="s0">++){</span><span class="s4">var </span><span class="s1">u</span><span class="s0">=</span><span class="s1">d</span><span class="s0">[</span><span class="s1">g</span><span class="s0">];</span><span class="s4">if</span><span class="s0">(</span><span class="s1">u</span><span class="s0">.</span><span class="s1">getChild</span><span class="s0">()==</span><span class="s4">null</span><span class="s0">){</span><span class="s1">h</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">u</span><span class="s0">.</span><span class="s1">id</span><span class="s0">,</span><span class="s1">f</span><span class="s0">++);</span><span class="s1">l</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">u</span><span class="s0">.</span><span class="s1">getCenterX</span><span class="s0">());</span><span class="s1">c</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">u</span><span class="s0">.</span><span class="s1">getCenterY</span><span class="s0">());</span><span class="s1">r</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">u</span><span class="s0">.</span><span class="s1">id</span><span class="s0">,</span><span class="s1">u</span><span class="s0">)}}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">relativePlacementConstraint</span><span class="s0">){</span><span class="s1">e</span><span class="s0">.</span><span class="s1">relativePlacementConstraint</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">t</span><span class="s0">.</span><span class="s1">gap</span><span class="s0">&amp;&amp;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">gap</span><span class="s0">!=</span><span class="s3">0</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">left</span><span class="s0">){</span><span class="s1">t</span><span class="s0">.</span><span class="s1">gap</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">DEFAULT_EDGE_LENGTH</span><span class="s0">+</span><span class="s1">r</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">left</span><span class="s0">).</span><span class="s1">getWidth</span><span class="s0">()/</span><span class="s3">2</span><span class="s0">+</span><span class="s1">r</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">right</span><span class="s0">).</span><span class="s1">getWidth</span><span class="s0">()/</span><span class="s3">2</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">t</span><span class="s0">.</span><span class="s1">gap</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">DEFAULT_EDGE_LENGTH</span><span class="s0">+</span><span class="s1">r</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">top</span><span class="s0">).</span><span class="s1">getHeight</span><span class="s0">()/</span><span class="s3">2</span><span class="s0">+</span><span class="s1">r</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">bottom</span><span class="s0">).</span><span class="s1">getHeight</span><span class="s0">()/</span><span class="s3">2</span><span class="s0">}}}))}</span><span class="s4">var </span><span class="s1">p</span><span class="s0">=</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s4">return</span><span class="s0">{</span><span class="s1">x</span><span class="s0">:</span><span class="s1">e</span><span class="s0">.</span><span class="s1">x</span><span class="s0">-</span><span class="s1">r</span><span class="s0">.</span><span class="s1">x</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s1">e</span><span class="s0">.</span><span class="s1">y</span><span class="s0">-</span><span class="s1">r</span><span class="s0">.</span><span class="s1">y</span><span class="s0">}};</span><span class="s4">var </span><span class="s1">v</span><span class="s0">=</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s1">r</span><span class="s0">+=</span><span class="s1">l</span><span class="s0">[</span><span class="s1">h</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)];</span><span class="s1">i</span><span class="s0">+=</span><span class="s1">c</span><span class="s0">[</span><span class="s1">h</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)]}));</span><span class="s4">return</span><span class="s0">{</span><span class="s1">x</span><span class="s0">:</span><span class="s1">r</span><span class="s0">/</span><span class="s1">e</span><span class="s0">.</span><span class="s1">size</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s1">i</span><span class="s0">/</span><span class="s1">e</span><span class="s0">.</span><span class="s1">size</span><span class="s0">}};</span><span class="s4">var </span><span class="s1">y</span><span class="s0">=</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">s</span><span class="s0">){</span><span class="s4">function </span><span class="s1">d</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Set</span><span class="s0">(</span><span class="s1">t</span><span class="s0">);</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s4">false</span><span class="s0">;</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s1">undefined</span><span class="s0">;</span><span class="s4">try</span><span class="s0">{</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">Symbol</span><span class="s0">.</span><span class="s1">iterator</span><span class="s0">](),</span><span class="s1">s</span><span class="s0">;!(</span><span class="s1">i</span><span class="s0">=(</span><span class="s1">s</span><span class="s0">=</span><span class="s1">a</span><span class="s0">.</span><span class="s1">next</span><span class="s0">()).</span><span class="s1">done</span><span class="s0">);</span><span class="s1">i</span><span class="s0">=</span><span class="s4">true</span><span class="s0">){</span><span class="s4">var </span><span class="s1">h</span><span class="s0">=</span><span class="s1">s</span><span class="s0">.</span><span class="s1">value</span><span class="s0">;</span><span class="s1">r</span><span class="s0">.</span><span class="s1">add</span><span class="s0">(</span><span class="s1">h</span><span class="s0">)}}</span><span class="s4">catch</span><span class="s0">(</span><span class="s1">l</span><span class="s0">){</span><span class="s1">n</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s1">o</span><span class="s0">=</span><span class="s1">l</span><span class="s0">}</span><span class="s4">finally</span><span class="s0">{</span><span class="s4">try</span><span class="s0">{</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">i</span><span class="s0">&amp;&amp;</span><span class="s1">a</span><span class="s0">.</span><span class="s1">return</span><span class="s0">){</span><span class="s1">a</span><span class="s0">.</span><span class="s1">return</span><span class="s0">()}}</span><span class="s4">finally</span><span class="s0">{</span><span class="s4">if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">){</span><span class="s4">throw </span><span class="s1">o</span><span class="s0">}}}</span><span class="s4">return </span><span class="s1">r</span><span class="s0">}</span><span class="s4">var </span><span class="s1">f</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Map</span><span class="s0">;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s1">f</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s3">0</span><span class="s0">)}));</span><span class="s1">e</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s1">t</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s1">f</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">id</span><span class="s0">,</span><span class="s1">f</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">id</span><span class="s0">)+</span><span class="s3">1</span><span class="s0">)}))}));</span><span class="s4">var </span><span class="s1">g</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Map</span><span class="s0">;</span><span class="s4">var </span><span class="s1">u</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Map</span><span class="s0">;</span><span class="s4">var </span><span class="s1">p</span><span class="s0">=</span><span class="s4">new </span><span class="s1">o</span><span class="s0">;</span><span class="s1">f</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">==</span><span class="s3">0</span><span class="s0">){</span><span class="s1">p</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">e</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">n</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">==</span><span class="s2">&quot;horizontal&quot;</span><span class="s0">){</span><span class="s1">g</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">h</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)?</span><span class="s1">l</span><span class="s0">[</span><span class="s1">h</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)]:</span><span class="s1">a</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">))}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">g</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">h</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)?</span><span class="s1">c</span><span class="s0">[</span><span class="s1">h</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)]:</span><span class="s1">a</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">))}}}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">g</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">Number</span><span class="s0">.</span><span class="s1">NEGATIVE_INFINITY</span><span class="s0">)}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">){</span><span class="s1">u</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s4">new </span><span class="s1">Set</span><span class="s0">([</span><span class="s1">e</span><span class="s0">]))}}));</span><span class="s4">if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">){</span><span class="s1">s</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=[];</span><span class="s1">t</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)){</span><span class="s1">e</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)}}));</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">){</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">==</span><span class="s2">&quot;horizontal&quot;</span><span class="s0">){</span><span class="s1">g</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">h</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)?</span><span class="s1">l</span><span class="s0">[</span><span class="s1">h</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)]:</span><span class="s1">a</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">));</span><span class="s1">i</span><span class="s0">+=</span><span class="s1">g</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">g</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">h</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)?</span><span class="s1">c</span><span class="s0">[</span><span class="s1">h</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)]:</span><span class="s1">a</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">));</span><span class="s1">i</span><span class="s0">+=</span><span class="s1">g</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)}}));</span><span class="s1">i</span><span class="s0">=</span><span class="s1">i</span><span class="s0">/</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">n</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)){</span><span class="s1">g</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">)}}))}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">==</span><span class="s2">&quot;horizontal&quot;</span><span class="s0">){</span><span class="s1">o</span><span class="s0">+=</span><span class="s1">h</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)?</span><span class="s1">l</span><span class="s0">[</span><span class="s1">h</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)]:</span><span class="s1">a</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">o</span><span class="s0">+=</span><span class="s1">h</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)?</span><span class="s1">c</span><span class="s0">[</span><span class="s1">h</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)]:</span><span class="s1">a</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)}}));</span><span class="s1">o</span><span class="s0">=</span><span class="s1">o</span><span class="s0">/</span><span class="s1">t</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s1">g</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">o</span><span class="s0">)}))}}))}</span><span class="s4">var </span><span class="s1">v</span><span class="s0">=</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(){</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">p</span><span class="s0">.</span><span class="s1">shift</span><span class="s0">();</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">i</span><span class="s0">);</span><span class="s1">o</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">g</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">id</span><span class="s0">)&lt;</span><span class="s1">g</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">i</span><span class="s0">)+</span><span class="s1">t</span><span class="s0">.</span><span class="s1">gap</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">&amp;&amp;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">id</span><span class="s0">)){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">==</span><span class="s2">&quot;horizontal&quot;</span><span class="s0">){</span><span class="s1">e</span><span class="s0">=</span><span class="s1">h</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">id</span><span class="s0">)?</span><span class="s1">l</span><span class="s0">[</span><span class="s1">h</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">id</span><span class="s0">)]:</span><span class="s1">a</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">id</span><span class="s0">)}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">e</span><span class="s0">=</span><span class="s1">h</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">id</span><span class="s0">)?</span><span class="s1">c</span><span class="s0">[</span><span class="s1">h</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">id</span><span class="s0">)]:</span><span class="s1">a</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">id</span><span class="s0">)}</span><span class="s1">g</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">id</span><span class="s0">,</span><span class="s1">e</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">&lt;</span><span class="s1">g</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">i</span><span class="s0">)+</span><span class="s1">t</span><span class="s0">.</span><span class="s1">gap</span><span class="s0">){</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s1">g</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">i</span><span class="s0">)+</span><span class="s1">t</span><span class="s0">.</span><span class="s1">gap</span><span class="s0">-</span><span class="s1">e</span><span class="s0">;</span><span class="s1">u</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">i</span><span class="s0">).</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s1">g</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">g</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)-</span><span class="s1">o</span><span class="s0">)}))}}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">g</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">id</span><span class="s0">,</span><span class="s1">g</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">i</span><span class="s0">)+</span><span class="s1">t</span><span class="s0">.</span><span class="s1">gap</span><span class="s0">)}}</span><span class="s1">f</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">id</span><span class="s0">,</span><span class="s1">f</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">id</span><span class="s0">)-</span><span class="s3">1</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">f</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">id</span><span class="s0">)==</span><span class="s3">0</span><span class="s0">){</span><span class="s1">p</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">id</span><span class="s0">)}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">){</span><span class="s1">u</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">id</span><span class="s0">,</span><span class="s1">d</span><span class="s0">(</span><span class="s1">u</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">i</span><span class="s0">),</span><span class="s1">u</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">id</span><span class="s0">)))}}))};</span><span class="s4">while</span><span class="s0">(</span><span class="s1">p</span><span class="s0">.</span><span class="s1">length</span><span class="s0">!=</span><span class="s3">0</span><span class="s0">){</span><span class="s1">v</span><span class="s0">()}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">){</span><span class="s4">var </span><span class="s1">y</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Set</span><span class="s0">;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">length</span><span class="s0">==</span><span class="s3">0</span><span class="s0">){</span><span class="s1">y</span><span class="s0">.</span><span class="s1">add</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)}}));</span><span class="s4">var </span><span class="s1">m</span><span class="s0">=[];</span><span class="s1">u</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">y</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)){</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s4">false</span><span class="s0">;</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s4">false</span><span class="s0">;</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s1">undefined</span><span class="s0">;</span><span class="s4">try</span><span class="s0">{</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">h</span><span class="s0">=</span><span class="s1">t</span><span class="s0">[</span><span class="s1">Symbol</span><span class="s0">.</span><span class="s1">iterator</span><span class="s0">](),</span><span class="s1">l</span><span class="s0">;!(</span><span class="s1">o</span><span class="s0">=(</span><span class="s1">l</span><span class="s0">=</span><span class="s1">h</span><span class="s0">.</span><span class="s1">next</span><span class="s0">()).</span><span class="s1">done</span><span class="s0">);</span><span class="s1">o</span><span class="s0">=</span><span class="s4">true</span><span class="s0">){</span><span class="s4">var </span><span class="s1">c</span><span class="s0">=</span><span class="s1">l</span><span class="s0">.</span><span class="s1">value</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">c</span><span class="s0">)){</span><span class="s1">r</span><span class="s0">=</span><span class="s4">true</span><span class="s0">}}}</span><span class="s4">catch</span><span class="s0">(</span><span class="s1">g</span><span class="s0">){</span><span class="s1">a</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s1">s</span><span class="s0">=</span><span class="s1">g</span><span class="s0">}</span><span class="s4">finally</span><span class="s0">{</span><span class="s4">try</span><span class="s0">{</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">o</span><span class="s0">&amp;&amp;</span><span class="s1">h</span><span class="s0">.</span><span class="s1">return</span><span class="s0">){</span><span class="s1">h</span><span class="s0">.</span><span class="s1">return</span><span class="s0">()}}</span><span class="s4">finally</span><span class="s0">{</span><span class="s4">if</span><span class="s0">(</span><span class="s1">a</span><span class="s0">){</span><span class="s4">throw </span><span class="s1">s</span><span class="s0">}}}</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">r</span><span class="s0">){</span><span class="s4">var </span><span class="s1">d</span><span class="s0">=</span><span class="s4">false</span><span class="s0">;</span><span class="s4">var </span><span class="s1">f</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s1">m</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">has</span><span class="s0">([].</span><span class="s1">concat</span><span class="s0">(</span><span class="s1">i</span><span class="s0">(</span><span class="s1">t</span><span class="s0">))[</span><span class="s3">0</span><span class="s0">])){</span><span class="s1">d</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s1">f</span><span class="s0">=</span><span class="s1">r</span><span class="s0">}}));</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">d</span><span class="s0">){</span><span class="s1">m</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s4">new </span><span class="s1">Set</span><span class="s0">(</span><span class="s1">t</span><span class="s0">))}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">t</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s1">m</span><span class="s0">[</span><span class="s1">f</span><span class="s0">].</span><span class="s1">add</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)}))}}}}));</span><span class="s1">m</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">Number</span><span class="s0">.</span><span class="s1">POSITIVE_INFINITY</span><span class="s0">;</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">Number</span><span class="s0">.</span><span class="s1">POSITIVE_INFINITY</span><span class="s0">;</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s1">Number</span><span class="s0">.</span><span class="s1">NEGATIVE_INFINITY</span><span class="s0">;</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s1">Number</span><span class="s0">.</span><span class="s1">NEGATIVE_INFINITY</span><span class="s0">;</span><span class="s4">var </span><span class="s1">d</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s4">var </span><span class="s1">f</span><span class="s0">=</span><span class="s4">false</span><span class="s0">;</span><span class="s4">var </span><span class="s1">u</span><span class="s0">=</span><span class="s1">undefined</span><span class="s0">;</span><span class="s4">try</span><span class="s0">{</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">p</span><span class="s0">=</span><span class="s1">t</span><span class="s0">[</span><span class="s1">Symbol</span><span class="s0">.</span><span class="s1">iterator</span><span class="s0">](),</span><span class="s1">v</span><span class="s0">;!(</span><span class="s1">d</span><span class="s0">=(</span><span class="s1">v</span><span class="s0">=</span><span class="s1">p</span><span class="s0">.</span><span class="s1">next</span><span class="s0">()).</span><span class="s1">done</span><span class="s0">);</span><span class="s1">d</span><span class="s0">=</span><span class="s4">true</span><span class="s0">){</span><span class="s4">var </span><span class="s1">y</span><span class="s0">=</span><span class="s1">v</span><span class="s0">.</span><span class="s1">value</span><span class="s0">;</span><span class="s4">var </span><span class="s1">m</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">==</span><span class="s2">&quot;horizontal&quot;</span><span class="s0">){</span><span class="s1">m</span><span class="s0">=</span><span class="s1">h</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">y</span><span class="s0">)?</span><span class="s1">l</span><span class="s0">[</span><span class="s1">h</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">y</span><span class="s0">)]:</span><span class="s1">a</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">y</span><span class="s0">)}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">m</span><span class="s0">=</span><span class="s1">h</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">y</span><span class="s0">)?</span><span class="s1">c</span><span class="s0">[</span><span class="s1">h</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">y</span><span class="s0">)]:</span><span class="s1">a</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">y</span><span class="s0">)}</span><span class="s4">var </span><span class="s1">E</span><span class="s0">=</span><span class="s1">g</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">y</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">m</span><span class="s0">&lt;</span><span class="s1">i</span><span class="s0">){</span><span class="s1">i</span><span class="s0">=</span><span class="s1">m</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">m</span><span class="s0">&gt;</span><span class="s1">o</span><span class="s0">){</span><span class="s1">o</span><span class="s0">=</span><span class="s1">m</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">E</span><span class="s0">&lt;</span><span class="s1">n</span><span class="s0">){</span><span class="s1">n</span><span class="s0">=</span><span class="s1">E</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">E</span><span class="s0">&gt;</span><span class="s1">s</span><span class="s0">){</span><span class="s1">s</span><span class="s0">=</span><span class="s1">E</span><span class="s0">}}}</span><span class="s4">catch</span><span class="s0">(</span><span class="s1">C</span><span class="s0">){</span><span class="s1">f</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s1">u</span><span class="s0">=</span><span class="s1">C</span><span class="s0">}</span><span class="s4">finally</span><span class="s0">{</span><span class="s4">try</span><span class="s0">{</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">d</span><span class="s0">&amp;&amp;</span><span class="s1">p</span><span class="s0">.</span><span class="s1">return</span><span class="s0">){</span><span class="s1">p</span><span class="s0">.</span><span class="s1">return</span><span class="s0">()}}</span><span class="s4">finally</span><span class="s0">{</span><span class="s4">if</span><span class="s0">(</span><span class="s1">f</span><span class="s0">){</span><span class="s4">throw </span><span class="s1">u</span><span class="s0">}}}</span><span class="s4">var </span><span class="s1">N</span><span class="s0">=(</span><span class="s1">i</span><span class="s0">+</span><span class="s1">o</span><span class="s0">)/</span><span class="s3">2</span><span class="s0">-(</span><span class="s1">n</span><span class="s0">+</span><span class="s1">s</span><span class="s0">)/</span><span class="s3">2</span><span class="s0">;</span><span class="s4">var </span><span class="s1">T</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s4">var </span><span class="s1">A</span><span class="s0">=</span><span class="s4">false</span><span class="s0">;</span><span class="s4">var </span><span class="s1">w</span><span class="s0">=</span><span class="s1">undefined</span><span class="s0">;</span><span class="s4">try</span><span class="s0">{</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">L</span><span class="s0">=</span><span class="s1">t</span><span class="s0">[</span><span class="s1">Symbol</span><span class="s0">.</span><span class="s1">iterator</span><span class="s0">](),</span><span class="s1">I</span><span class="s0">;!(</span><span class="s1">T</span><span class="s0">=(</span><span class="s1">I</span><span class="s0">=</span><span class="s1">L</span><span class="s0">.</span><span class="s1">next</span><span class="s0">()).</span><span class="s1">done</span><span class="s0">);</span><span class="s1">T</span><span class="s0">=</span><span class="s4">true</span><span class="s0">){</span><span class="s4">var </span><span class="s1">_</span><span class="s0">=</span><span class="s1">I</span><span class="s0">.</span><span class="s1">value</span><span class="s0">;</span><span class="s1">g</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">_</span><span class="s0">,</span><span class="s1">g</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">_</span><span class="s0">)+</span><span class="s1">N</span><span class="s0">)}}</span><span class="s4">catch</span><span class="s0">(</span><span class="s1">C</span><span class="s0">){</span><span class="s1">A</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s1">w</span><span class="s0">=</span><span class="s1">C</span><span class="s0">}</span><span class="s4">finally</span><span class="s0">{</span><span class="s4">try</span><span class="s0">{</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">T</span><span class="s0">&amp;&amp;</span><span class="s1">L</span><span class="s0">.</span><span class="s1">return</span><span class="s0">){</span><span class="s1">L</span><span class="s0">.</span><span class="s1">return</span><span class="s0">()}}</span><span class="s4">finally</span><span class="s0">{</span><span class="s4">if</span><span class="s0">(</span><span class="s1">A</span><span class="s0">){</span><span class="s4">throw </span><span class="s1">w</span><span class="s0">}}}}))}</span><span class="s4">return </span><span class="s1">g</span><span class="s0">};</span><span class="s4">var </span><span class="s1">m</span><span class="s0">=</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">o</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">left</span><span class="s0">){</span><span class="s1">l</span><span class="s0">[</span><span class="s1">h</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">left</span><span class="s0">)]-</span><span class="s1">l</span><span class="s0">[</span><span class="s1">h</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">right</span><span class="s0">)]&gt;=</span><span class="s3">0</span><span class="s0">?</span><span class="s1">r</span><span class="s0">++:</span><span class="s1">i</span><span class="s0">++}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">c</span><span class="s0">[</span><span class="s1">h</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">top</span><span class="s0">)]-</span><span class="s1">c</span><span class="s0">[</span><span class="s1">h</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">bottom</span><span class="s0">)]&gt;=</span><span class="s3">0</span><span class="s0">?</span><span class="s1">n</span><span class="s0">++:</span><span class="s1">o</span><span class="s0">++}}));</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">&gt;</span><span class="s1">i</span><span class="s0">&amp;&amp;</span><span class="s1">n</span><span class="s0">&gt;</span><span class="s1">o</span><span class="s0">){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">a</span><span class="s0">&lt;</span><span class="s1">h</span><span class="s0">.</span><span class="s1">size</span><span class="s0">;</span><span class="s1">a</span><span class="s0">++){</span><span class="s1">l</span><span class="s0">[</span><span class="s1">a</span><span class="s0">]=-</span><span class="s3">1</span><span class="s0">*</span><span class="s1">l</span><span class="s0">[</span><span class="s1">a</span><span class="s0">];</span><span class="s1">c</span><span class="s0">[</span><span class="s1">a</span><span class="s0">]=-</span><span class="s3">1</span><span class="s0">*</span><span class="s1">c</span><span class="s0">[</span><span class="s1">a</span><span class="s0">]}}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">&gt;</span><span class="s1">i</span><span class="s0">){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">s</span><span class="s0">&lt;</span><span class="s1">h</span><span class="s0">.</span><span class="s1">size</span><span class="s0">;</span><span class="s1">s</span><span class="s0">++){</span><span class="s1">l</span><span class="s0">[</span><span class="s1">s</span><span class="s0">]=-</span><span class="s3">1</span><span class="s0">*</span><span class="s1">l</span><span class="s0">[</span><span class="s1">s</span><span class="s0">]}}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">&gt;</span><span class="s1">o</span><span class="s0">){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">d</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">d</span><span class="s0">&lt;</span><span class="s1">h</span><span class="s0">.</span><span class="s1">size</span><span class="s0">;</span><span class="s1">d</span><span class="s0">++){</span><span class="s1">c</span><span class="s0">[</span><span class="s1">d</span><span class="s0">]=-</span><span class="s3">1</span><span class="s0">*</span><span class="s1">c</span><span class="s0">[</span><span class="s1">d</span><span class="s0">]}}};</span><span class="s4">var </span><span class="s1">E</span><span class="s0">=</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=[];</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s4">new </span><span class="s1">o</span><span class="s0">;</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Set</span><span class="s0">;</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">o</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">n</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">o</span><span class="s0">)){</span><span class="s1">r</span><span class="s0">[</span><span class="s1">a</span><span class="s0">]=[];</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s1">o</span><span class="s0">;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">s</span><span class="s0">);</span><span class="s1">n</span><span class="s0">.</span><span class="s1">add</span><span class="s0">(</span><span class="s1">s</span><span class="s0">);</span><span class="s1">r</span><span class="s0">[</span><span class="s1">a</span><span class="s0">].</span><span class="s1">push</span><span class="s0">(</span><span class="s1">s</span><span class="s0">);</span><span class="s4">while</span><span class="s0">(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">length</span><span class="s0">!=</span><span class="s3">0</span><span class="s0">){</span><span class="s1">s</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">shift</span><span class="s0">();</span><span class="s4">var </span><span class="s1">h</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">s</span><span class="s0">);</span><span class="s1">h</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">n</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">id</span><span class="s0">)){</span><span class="s1">i</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">id</span><span class="s0">);</span><span class="s1">n</span><span class="s0">.</span><span class="s1">add</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">id</span><span class="s0">);</span><span class="s1">r</span><span class="s0">[</span><span class="s1">a</span><span class="s0">].</span><span class="s1">push</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">id</span><span class="s0">)}}))}</span><span class="s1">a</span><span class="s0">++}}));</span><span class="s4">return </span><span class="s1">r</span><span class="s0">};</span><span class="s4">var </span><span class="s1">N</span><span class="s0">=</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Map</span><span class="s0">;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s1">r</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,[])}));</span><span class="s1">e</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s1">t</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s1">r</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">).</span><span class="s1">push</span><span class="s0">(</span><span class="s1">t</span><span class="s0">);</span><span class="s1">r</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">id</span><span class="s0">).</span><span class="s1">push</span><span class="s0">({</span><span class="s1">id</span><span class="s0">:</span><span class="s1">e</span><span class="s0">,</span><span class="s1">gap</span><span class="s0">:</span><span class="s1">t</span><span class="s0">.</span><span class="s1">gap</span><span class="s0">,</span><span class="s1">direction</span><span class="s0">:</span><span class="s1">t</span><span class="s0">.</span><span class="s1">direction</span><span class="s0">})}))}));</span><span class="s4">return </span><span class="s1">r</span><span class="s0">};</span><span class="s4">var </span><span class="s1">T</span><span class="s0">=</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Map</span><span class="s0">;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s1">r</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,[])}));</span><span class="s1">e</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s1">t</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s1">r</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">id</span><span class="s0">).</span><span class="s1">push</span><span class="s0">({</span><span class="s1">id</span><span class="s0">:</span><span class="s1">e</span><span class="s0">,</span><span class="s1">gap</span><span class="s0">:</span><span class="s1">t</span><span class="s0">.</span><span class="s1">gap</span><span class="s0">,</span><span class="s1">direction</span><span class="s0">:</span><span class="s1">t</span><span class="s0">.</span><span class="s1">direction</span><span class="s0">})}))}));</span><span class="s4">return </span><span class="s1">r</span><span class="s0">};</span><span class="s4">var </span><span class="s1">A</span><span class="s0">=[];</span><span class="s4">var </span><span class="s1">w</span><span class="s0">=[];</span><span class="s4">var </span><span class="s1">L</span><span class="s0">=</span><span class="s4">false</span><span class="s0">;</span><span class="s4">var </span><span class="s1">I</span><span class="s0">=</span><span class="s4">false</span><span class="s0">;</span><span class="s4">var </span><span class="s1">_</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Set</span><span class="s0">;</span><span class="s4">var </span><span class="s1">C</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Map</span><span class="s0">;</span><span class="s4">var </span><span class="s1">M</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Map</span><span class="s0">;</span><span class="s4">var </span><span class="s1">x</span><span class="s0">=[];</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">fixedNodeConstraint</span><span class="s0">){</span><span class="s1">e</span><span class="s0">.</span><span class="s1">fixedNodeConstraint</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s1">_</span><span class="s0">.</span><span class="s1">add</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">nodeId</span><span class="s0">)}))}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">relativePlacementConstraint</span><span class="s0">){</span><span class="s1">e</span><span class="s0">.</span><span class="s1">relativePlacementConstraint</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">left</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">C</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">left</span><span class="s0">)){</span><span class="s1">C</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">left</span><span class="s0">).</span><span class="s1">push</span><span class="s0">({</span><span class="s1">id</span><span class="s0">:</span><span class="s1">t</span><span class="s0">.</span><span class="s1">right</span><span class="s0">,</span><span class="s1">gap</span><span class="s0">:</span><span class="s1">t</span><span class="s0">.</span><span class="s1">gap</span><span class="s0">,</span><span class="s1">direction</span><span class="s0">:</span><span class="s2">&quot;horizontal&quot;</span><span class="s0">})}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">C</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">left</span><span class="s0">,[{</span><span class="s1">id</span><span class="s0">:</span><span class="s1">t</span><span class="s0">.</span><span class="s1">right</span><span class="s0">,</span><span class="s1">gap</span><span class="s0">:</span><span class="s1">t</span><span class="s0">.</span><span class="s1">gap</span><span class="s0">,</span><span class="s1">direction</span><span class="s0">:</span><span class="s2">&quot;horizontal&quot;</span><span class="s0">}])}</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">C</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">right</span><span class="s0">)){</span><span class="s1">C</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">right</span><span class="s0">,[])}}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">if</span><span class="s0">(</span><span class="s1">C</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">top</span><span class="s0">)){</span><span class="s1">C</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">top</span><span class="s0">).</span><span class="s1">push</span><span class="s0">({</span><span class="s1">id</span><span class="s0">:</span><span class="s1">t</span><span class="s0">.</span><span class="s1">bottom</span><span class="s0">,</span><span class="s1">gap</span><span class="s0">:</span><span class="s1">t</span><span class="s0">.</span><span class="s1">gap</span><span class="s0">,</span><span class="s1">direction</span><span class="s0">:</span><span class="s2">&quot;vertical&quot;</span><span class="s0">})}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">C</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">top</span><span class="s0">,[{</span><span class="s1">id</span><span class="s0">:</span><span class="s1">t</span><span class="s0">.</span><span class="s1">bottom</span><span class="s0">,</span><span class="s1">gap</span><span class="s0">:</span><span class="s1">t</span><span class="s0">.</span><span class="s1">gap</span><span class="s0">,</span><span class="s1">direction</span><span class="s0">:</span><span class="s2">&quot;vertical&quot;</span><span class="s0">}])}</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">C</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">bottom</span><span class="s0">)){</span><span class="s1">C</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">bottom</span><span class="s0">,[])}}}));</span><span class="s1">M</span><span class="s0">=</span><span class="s1">N</span><span class="s0">(</span><span class="s1">C</span><span class="s0">);</span><span class="s1">x</span><span class="s0">=</span><span class="s1">E</span><span class="s0">(</span><span class="s1">M</span><span class="s0">)}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">.</span><span class="s1">TRANSFORM_ON_CONSTRAINT_HANDLING</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">fixedNodeConstraint</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">fixedNodeConstraint</span><span class="s0">.</span><span class="s1">length</span><span class="s0">&gt;</span><span class="s3">1</span><span class="s0">){</span><span class="s1">e</span><span class="s0">.</span><span class="s1">fixedNodeConstraint</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s1">A</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]=[</span><span class="s1">t</span><span class="s0">.</span><span class="s1">position</span><span class="s0">.</span><span class="s1">x</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">position</span><span class="s0">.</span><span class="s1">y</span><span class="s0">];</span><span class="s1">w</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]=[</span><span class="s1">l</span><span class="s0">[</span><span class="s1">h</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">nodeId</span><span class="s0">)],</span><span class="s1">c</span><span class="s0">[</span><span class="s1">h</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">nodeId</span><span class="s0">)]]}));</span><span class="s1">L</span><span class="s0">=</span><span class="s4">true</span><span class="s0">}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">alignmentConstraint</span><span class="s0">){(</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">var </span><span class="s1">t</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">alignmentConstraint</span><span class="s0">.</span><span class="s1">vertical</span><span class="s0">){</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">alignmentConstraint</span><span class="s0">.</span><span class="s1">vertical</span><span class="s0">;</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s4">function </span><span class="s1">e</span><span class="s0">(</span><span class="s1">n</span><span class="s0">){</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Set</span><span class="s0">;</span><span class="s1">r</span><span class="s0">[</span><span class="s1">n</span><span class="s0">].</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s1">o</span><span class="s0">.</span><span class="s1">add</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)}));</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Set</span><span class="s0">([].</span><span class="s1">concat</span><span class="s0">(</span><span class="s1">i</span><span class="s0">(</span><span class="s1">o</span><span class="s0">)).</span><span class="s1">filter</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">return </span><span class="s1">_</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)})));</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">a</span><span class="s0">.</span><span class="s1">size</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">)</span><span class="s1">s</span><span class="s0">=</span><span class="s1">l</span><span class="s0">[</span><span class="s1">h</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">a</span><span class="s0">.</span><span class="s1">values</span><span class="s0">().</span><span class="s1">next</span><span class="s0">().</span><span class="s1">value</span><span class="s0">)];</span><span class="s4">else </span><span class="s1">s</span><span class="s0">=</span><span class="s1">v</span><span class="s0">(</span><span class="s1">o</span><span class="s0">).</span><span class="s1">x</span><span class="s0">;</span><span class="s1">r</span><span class="s0">[</span><span class="s1">n</span><span class="s0">].</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s1">A</span><span class="s0">[</span><span class="s1">t</span><span class="s0">]=[</span><span class="s1">s</span><span class="s0">,</span><span class="s1">c</span><span class="s0">[</span><span class="s1">h</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)]];</span><span class="s1">w</span><span class="s0">[</span><span class="s1">t</span><span class="s0">]=[</span><span class="s1">l</span><span class="s0">[</span><span class="s1">h</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)],</span><span class="s1">c</span><span class="s0">[</span><span class="s1">h</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)]];</span><span class="s1">t</span><span class="s0">++}))};</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">o</span><span class="s0">&lt;</span><span class="s1">r</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">o</span><span class="s0">++){</span><span class="s1">n</span><span class="s0">(</span><span class="s1">o</span><span class="s0">)}</span><span class="s1">L</span><span class="s0">=</span><span class="s4">true</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">alignmentConstraint</span><span class="s0">.</span><span class="s1">horizontal</span><span class="s0">){</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">alignmentConstraint</span><span class="s0">.</span><span class="s1">horizontal</span><span class="s0">;</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s4">function </span><span class="s1">e</span><span class="s0">(</span><span class="s1">r</span><span class="s0">){</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Set</span><span class="s0">;</span><span class="s1">a</span><span class="s0">[</span><span class="s1">r</span><span class="s0">].</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s1">n</span><span class="s0">.</span><span class="s1">add</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)}));</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Set</span><span class="s0">([].</span><span class="s1">concat</span><span class="s0">(</span><span class="s1">i</span><span class="s0">(</span><span class="s1">n</span><span class="s0">)).</span><span class="s1">filter</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">return </span><span class="s1">_</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)})));</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">o</span><span class="s0">.</span><span class="s1">size</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">)</span><span class="s1">s</span><span class="s0">=</span><span class="s1">l</span><span class="s0">[</span><span class="s1">h</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">o</span><span class="s0">.</span><span class="s1">values</span><span class="s0">().</span><span class="s1">next</span><span class="s0">().</span><span class="s1">value</span><span class="s0">)];</span><span class="s4">else </span><span class="s1">s</span><span class="s0">=</span><span class="s1">v</span><span class="s0">(</span><span class="s1">n</span><span class="s0">).</span><span class="s1">y</span><span class="s0">;</span><span class="s1">a</span><span class="s0">[</span><span class="s1">r</span><span class="s0">].</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s1">A</span><span class="s0">[</span><span class="s1">t</span><span class="s0">]=[</span><span class="s1">l</span><span class="s0">[</span><span class="s1">h</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)],</span><span class="s1">s</span><span class="s0">];</span><span class="s1">w</span><span class="s0">[</span><span class="s1">t</span><span class="s0">]=[</span><span class="s1">l</span><span class="s0">[</span><span class="s1">h</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)],</span><span class="s1">c</span><span class="s0">[</span><span class="s1">h</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)]];</span><span class="s1">t</span><span class="s0">++}))};</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">d</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">d</span><span class="s0">&lt;</span><span class="s1">a</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">d</span><span class="s0">++){</span><span class="s1">s</span><span class="s0">(</span><span class="s1">d</span><span class="s0">)}</span><span class="s1">L</span><span class="s0">=</span><span class="s4">true</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">relativePlacementConstraint</span><span class="s0">){</span><span class="s1">I</span><span class="s0">=</span><span class="s4">true</span><span class="s0">}})()}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">relativePlacementConstraint</span><span class="s0">){</span><span class="s4">var </span><span class="s1">O</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">D</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">R</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">R</span><span class="s0">&lt;</span><span class="s1">x</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">R</span><span class="s0">++){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">x</span><span class="s0">[</span><span class="s1">R</span><span class="s0">].</span><span class="s1">length</span><span class="s0">&gt;</span><span class="s1">O</span><span class="s0">){</span><span class="s1">O</span><span class="s0">=</span><span class="s1">x</span><span class="s0">[</span><span class="s1">R</span><span class="s0">].</span><span class="s1">length</span><span class="s0">;</span><span class="s1">D</span><span class="s0">=</span><span class="s1">R</span><span class="s0">}}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">O</span><span class="s0">&lt;</span><span class="s1">M</span><span class="s0">.</span><span class="s1">size</span><span class="s0">/</span><span class="s3">2</span><span class="s0">){</span><span class="s1">m</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">relativePlacementConstraint</span><span class="s0">);</span><span class="s1">L</span><span class="s0">=</span><span class="s4">false</span><span class="s0">;</span><span class="s1">I</span><span class="s0">=</span><span class="s4">false</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">var </span><span class="s1">b</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Map</span><span class="s0">;</span><span class="s4">var </span><span class="s1">G</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Map</span><span class="s0">;</span><span class="s4">var </span><span class="s1">F</span><span class="s0">=[];</span><span class="s1">x</span><span class="s0">[</span><span class="s1">D</span><span class="s0">].</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s1">C</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">).</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">direction</span><span class="s0">==</span><span class="s2">&quot;horizontal&quot;</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">b</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)){</span><span class="s1">b</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">).</span><span class="s1">push</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">b</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,[</span><span class="s1">e</span><span class="s0">])}</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">b</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">id</span><span class="s0">)){</span><span class="s1">b</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">id</span><span class="s0">,[])}</span><span class="s1">F</span><span class="s0">.</span><span class="s1">push</span><span class="s0">({</span><span class="s1">left</span><span class="s0">:</span><span class="s1">t</span><span class="s0">,</span><span class="s1">right</span><span class="s0">:</span><span class="s1">e</span><span class="s0">.</span><span class="s1">id</span><span class="s0">})}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">if</span><span class="s0">(</span><span class="s1">G</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)){</span><span class="s1">G</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">).</span><span class="s1">push</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">G</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,[</span><span class="s1">e</span><span class="s0">])}</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">G</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">id</span><span class="s0">)){</span><span class="s1">G</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">id</span><span class="s0">,[])}</span><span class="s1">F</span><span class="s0">.</span><span class="s1">push</span><span class="s0">({</span><span class="s1">top</span><span class="s0">:</span><span class="s1">t</span><span class="s0">,</span><span class="s1">bottom</span><span class="s0">:</span><span class="s1">e</span><span class="s0">.</span><span class="s1">id</span><span class="s0">})}}))}));</span><span class="s1">m</span><span class="s0">(</span><span class="s1">F</span><span class="s0">);</span><span class="s1">I</span><span class="s0">=</span><span class="s4">false</span><span class="s0">;</span><span class="s4">var </span><span class="s1">S</span><span class="s0">=</span><span class="s1">y</span><span class="s0">(</span><span class="s1">b</span><span class="s0">,</span><span class="s2">&quot;horizontal&quot;</span><span class="s0">);</span><span class="s4">var </span><span class="s1">P</span><span class="s0">=</span><span class="s1">y</span><span class="s0">(</span><span class="s1">G</span><span class="s0">,</span><span class="s2">&quot;vertical&quot;</span><span class="s0">);</span><span class="s1">x</span><span class="s0">[</span><span class="s1">D</span><span class="s0">].</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s1">w</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]=[</span><span class="s1">l</span><span class="s0">[</span><span class="s1">h</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)],</span><span class="s1">c</span><span class="s0">[</span><span class="s1">h</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)]];</span><span class="s1">A</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]=[];</span><span class="s4">if</span><span class="s0">(</span><span class="s1">S</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)){</span><span class="s1">A</span><span class="s0">[</span><span class="s1">e</span><span class="s0">][</span><span class="s3">0</span><span class="s0">]=</span><span class="s1">S</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">A</span><span class="s0">[</span><span class="s1">e</span><span class="s0">][</span><span class="s3">0</span><span class="s0">]=</span><span class="s1">l</span><span class="s0">[</span><span class="s1">h</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)]}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">P</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)){</span><span class="s1">A</span><span class="s0">[</span><span class="s1">e</span><span class="s0">][</span><span class="s3">1</span><span class="s0">]=</span><span class="s1">P</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">A</span><span class="s0">[</span><span class="s1">e</span><span class="s0">][</span><span class="s3">1</span><span class="s0">]=</span><span class="s1">c</span><span class="s0">[</span><span class="s1">h</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)]}}));</span><span class="s1">L</span><span class="s0">=</span><span class="s4">true</span><span class="s0">}}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">L</span><span class="s0">){</span><span class="s4">var </span><span class="s1">U</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">k</span><span class="s0">=</span><span class="s1">a</span><span class="s0">.</span><span class="s1">transpose</span><span class="s0">(</span><span class="s1">A</span><span class="s0">);</span><span class="s4">var </span><span class="s1">Y</span><span class="s0">=</span><span class="s1">a</span><span class="s0">.</span><span class="s1">transpose</span><span class="s0">(</span><span class="s1">w</span><span class="s0">);</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">H</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">H</span><span class="s0">&lt;</span><span class="s1">k</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">H</span><span class="s0">++){</span><span class="s1">k</span><span class="s0">[</span><span class="s1">H</span><span class="s0">]=</span><span class="s1">a</span><span class="s0">.</span><span class="s1">multGamma</span><span class="s0">(</span><span class="s1">k</span><span class="s0">[</span><span class="s1">H</span><span class="s0">]);</span><span class="s1">Y</span><span class="s0">[</span><span class="s1">H</span><span class="s0">]=</span><span class="s1">a</span><span class="s0">.</span><span class="s1">multGamma</span><span class="s0">(</span><span class="s1">Y</span><span class="s0">[</span><span class="s1">H</span><span class="s0">])}</span><span class="s4">var </span><span class="s1">X</span><span class="s0">=</span><span class="s1">a</span><span class="s0">.</span><span class="s1">multMat</span><span class="s0">(</span><span class="s1">k</span><span class="s0">,</span><span class="s1">a</span><span class="s0">.</span><span class="s1">transpose</span><span class="s0">(</span><span class="s1">Y</span><span class="s0">));</span><span class="s4">var </span><span class="s1">z</span><span class="s0">=</span><span class="s1">s</span><span class="s0">.</span><span class="s1">svd</span><span class="s0">(</span><span class="s1">X</span><span class="s0">);</span><span class="s1">U</span><span class="s0">=</span><span class="s1">a</span><span class="s0">.</span><span class="s1">multMat</span><span class="s0">(</span><span class="s1">z</span><span class="s0">.</span><span class="s1">V</span><span class="s0">,</span><span class="s1">a</span><span class="s0">.</span><span class="s1">transpose</span><span class="s0">(</span><span class="s1">z</span><span class="s0">.</span><span class="s1">U</span><span class="s0">));</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">V</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">V</span><span class="s0">&lt;</span><span class="s1">h</span><span class="s0">.</span><span class="s1">size</span><span class="s0">;</span><span class="s1">V</span><span class="s0">++){</span><span class="s4">var </span><span class="s1">B</span><span class="s0">=[</span><span class="s1">l</span><span class="s0">[</span><span class="s1">V</span><span class="s0">],</span><span class="s1">c</span><span class="s0">[</span><span class="s1">V</span><span class="s0">]];</span><span class="s4">var </span><span class="s1">W</span><span class="s0">=[</span><span class="s1">U</span><span class="s0">[</span><span class="s3">0</span><span class="s0">][</span><span class="s3">0</span><span class="s0">],</span><span class="s1">U</span><span class="s0">[</span><span class="s3">1</span><span class="s0">][</span><span class="s3">0</span><span class="s0">]];</span><span class="s4">var </span><span class="s1">j</span><span class="s0">=[</span><span class="s1">U</span><span class="s0">[</span><span class="s3">0</span><span class="s0">][</span><span class="s3">1</span><span class="s0">],</span><span class="s1">U</span><span class="s0">[</span><span class="s3">1</span><span class="s0">][</span><span class="s3">1</span><span class="s0">]];</span><span class="s1">l</span><span class="s0">[</span><span class="s1">V</span><span class="s0">]=</span><span class="s1">a</span><span class="s0">.</span><span class="s1">dotProduct</span><span class="s0">(</span><span class="s1">B</span><span class="s0">,</span><span class="s1">W</span><span class="s0">);</span><span class="s1">c</span><span class="s0">[</span><span class="s1">V</span><span class="s0">]=</span><span class="s1">a</span><span class="s0">.</span><span class="s1">dotProduct</span><span class="s0">(</span><span class="s1">B</span><span class="s0">,</span><span class="s1">j</span><span class="s0">)}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">I</span><span class="s0">){</span><span class="s1">m</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">relativePlacementConstraint</span><span class="s0">)}}}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">.</span><span class="s1">ENFORCE_CONSTRAINTS</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">fixedNodeConstraint</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">fixedNodeConstraint</span><span class="s0">.</span><span class="s1">length</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">){</span><span class="s4">var </span><span class="s1">q</span><span class="s0">={</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">};</span><span class="s1">e</span><span class="s0">.</span><span class="s1">fixedNodeConstraint</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">var </span><span class="s1">r</span><span class="s0">={</span><span class="s1">x</span><span class="s0">:</span><span class="s1">l</span><span class="s0">[</span><span class="s1">h</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">nodeId</span><span class="s0">)],</span><span class="s1">y</span><span class="s0">:</span><span class="s1">c</span><span class="s0">[</span><span class="s1">h</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">nodeId</span><span class="s0">)]};</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">position</span><span class="s0">;</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">p</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">r</span><span class="s0">);</span><span class="s1">q</span><span class="s0">.</span><span class="s1">x</span><span class="s0">+=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">x</span><span class="s0">;</span><span class="s1">q</span><span class="s0">.</span><span class="s1">y</span><span class="s0">+=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">y</span><span class="s0">}));</span><span class="s1">q</span><span class="s0">.</span><span class="s1">x</span><span class="s0">/=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">fixedNodeConstraint</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">q</span><span class="s0">.</span><span class="s1">y</span><span class="s0">/=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">fixedNodeConstraint</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">l</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s1">l</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]+=</span><span class="s1">q</span><span class="s0">.</span><span class="s1">x</span><span class="s0">}));</span><span class="s1">c</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s1">c</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]+=</span><span class="s1">q</span><span class="s0">.</span><span class="s1">y</span><span class="s0">}));</span><span class="s1">e</span><span class="s0">.</span><span class="s1">fixedNodeConstraint</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s1">l</span><span class="s0">[</span><span class="s1">h</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">nodeId</span><span class="s0">)]=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">position</span><span class="s0">.</span><span class="s1">x</span><span class="s0">;</span><span class="s1">c</span><span class="s0">[</span><span class="s1">h</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">nodeId</span><span class="s0">)]=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">position</span><span class="s0">.</span><span class="s1">y</span><span class="s0">}))}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">alignmentConstraint</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">alignmentConstraint</span><span class="s0">.</span><span class="s1">vertical</span><span class="s0">){</span><span class="s4">var </span><span class="s1">$</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">alignmentConstraint</span><span class="s0">.</span><span class="s1">vertical</span><span class="s0">;</span><span class="s4">var </span><span class="s1">K</span><span class="s0">=</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Set</span><span class="s0">;</span><span class="s1">$</span><span class="s0">[</span><span class="s1">e</span><span class="s0">].</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s1">r</span><span class="s0">.</span><span class="s1">add</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)}));</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Set</span><span class="s0">([].</span><span class="s1">concat</span><span class="s0">(</span><span class="s1">i</span><span class="s0">(</span><span class="s1">r</span><span class="s0">)).</span><span class="s1">filter</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">return </span><span class="s1">_</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)})));</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">.</span><span class="s1">size</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">)</span><span class="s1">o</span><span class="s0">=</span><span class="s1">l</span><span class="s0">[</span><span class="s1">h</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">n</span><span class="s0">.</span><span class="s1">values</span><span class="s0">().</span><span class="s1">next</span><span class="s0">().</span><span class="s1">value</span><span class="s0">)];</span><span class="s4">else </span><span class="s1">o</span><span class="s0">=</span><span class="s1">v</span><span class="s0">(</span><span class="s1">r</span><span class="s0">).</span><span class="s1">x</span><span class="s0">;</span><span class="s1">r</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">_</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">t</span><span class="s0">))</span><span class="s1">l</span><span class="s0">[</span><span class="s1">h</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)]=</span><span class="s1">o</span><span class="s0">}))};</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">Z</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">Z</span><span class="s0">&lt;</span><span class="s1">$</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">Z</span><span class="s0">++){</span><span class="s1">K</span><span class="s0">(</span><span class="s1">Z</span><span class="s0">)}}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">alignmentConstraint</span><span class="s0">.</span><span class="s1">horizontal</span><span class="s0">){</span><span class="s4">var </span><span class="s1">Q</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">alignmentConstraint</span><span class="s0">.</span><span class="s1">horizontal</span><span class="s0">;</span><span class="s4">var </span><span class="s1">J</span><span class="s0">=</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Set</span><span class="s0">;</span><span class="s1">Q</span><span class="s0">[</span><span class="s1">e</span><span class="s0">].</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s1">r</span><span class="s0">.</span><span class="s1">add</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)}));</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Set</span><span class="s0">([].</span><span class="s1">concat</span><span class="s0">(</span><span class="s1">i</span><span class="s0">(</span><span class="s1">r</span><span class="s0">)).</span><span class="s1">filter</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">return </span><span class="s1">_</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)})));</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">.</span><span class="s1">size</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">)</span><span class="s1">o</span><span class="s0">=</span><span class="s1">c</span><span class="s0">[</span><span class="s1">h</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">n</span><span class="s0">.</span><span class="s1">values</span><span class="s0">().</span><span class="s1">next</span><span class="s0">().</span><span class="s1">value</span><span class="s0">)];</span><span class="s4">else </span><span class="s1">o</span><span class="s0">=</span><span class="s1">v</span><span class="s0">(</span><span class="s1">r</span><span class="s0">).</span><span class="s1">y</span><span class="s0">;</span><span class="s1">r</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">_</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">t</span><span class="s0">))</span><span class="s1">c</span><span class="s0">[</span><span class="s1">h</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)]=</span><span class="s1">o</span><span class="s0">}))};</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">tt</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">tt</span><span class="s0">&lt;</span><span class="s1">Q</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">tt</span><span class="s0">++){</span><span class="s1">J</span><span class="s0">(</span><span class="s1">tt</span><span class="s0">)}}}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">relativePlacementConstraint</span><span class="s0">){(</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">var </span><span class="s1">t</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Map</span><span class="s0">;</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Map</span><span class="s0">;</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Map</span><span class="s0">;</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Map</span><span class="s0">;</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Map</span><span class="s0">;</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Map</span><span class="s0">;</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Set</span><span class="s0">;</span><span class="s4">var </span><span class="s1">d</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Set</span><span class="s0">;</span><span class="s1">_</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s1">s</span><span class="s0">.</span><span class="s1">add</span><span class="s0">(</span><span class="s1">t</span><span class="s0">);</span><span class="s1">d</span><span class="s0">.</span><span class="s1">add</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)}));</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">alignmentConstraint</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">alignmentConstraint</span><span class="s0">.</span><span class="s1">vertical</span><span class="s0">){</span><span class="s4">var </span><span class="s1">f</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">alignmentConstraint</span><span class="s0">.</span><span class="s1">vertical</span><span class="s0">;</span><span class="s4">var </span><span class="s1">g</span><span class="s0">=</span><span class="s4">function </span><span class="s1">e</span><span class="s0">(</span><span class="s1">r</span><span class="s0">){</span><span class="s1">i</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s2">&quot;dummy&quot;</span><span class="s0">+</span><span class="s1">r</span><span class="s0">,[]);</span><span class="s1">f</span><span class="s0">[</span><span class="s1">r</span><span class="s0">].</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s1">t</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s2">&quot;dummy&quot;</span><span class="s0">+</span><span class="s1">r</span><span class="s0">);</span><span class="s1">i</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s2">&quot;dummy&quot;</span><span class="s0">+</span><span class="s1">r</span><span class="s0">).</span><span class="s1">push</span><span class="s0">(</span><span class="s1">e</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">_</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)){</span><span class="s1">s</span><span class="s0">.</span><span class="s1">add</span><span class="s0">(</span><span class="s2">&quot;dummy&quot;</span><span class="s0">+</span><span class="s1">r</span><span class="s0">)}}));</span><span class="s1">o</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s2">&quot;dummy&quot;</span><span class="s0">+</span><span class="s1">r</span><span class="s0">,</span><span class="s1">l</span><span class="s0">[</span><span class="s1">h</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">f</span><span class="s0">[</span><span class="s1">r</span><span class="s0">][</span><span class="s3">0</span><span class="s0">])])};</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">u</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">u</span><span class="s0">&lt;</span><span class="s1">f</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">u</span><span class="s0">++){</span><span class="s1">g</span><span class="s0">(</span><span class="s1">u</span><span class="s0">)}}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">alignmentConstraint</span><span class="s0">.</span><span class="s1">horizontal</span><span class="s0">){</span><span class="s4">var </span><span class="s1">p</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">alignmentConstraint</span><span class="s0">.</span><span class="s1">horizontal</span><span class="s0">;</span><span class="s4">var </span><span class="s1">v</span><span class="s0">=</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s1">n</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s2">&quot;dummy&quot;</span><span class="s0">+</span><span class="s1">e</span><span class="s0">,[]);</span><span class="s1">p</span><span class="s0">[</span><span class="s1">e</span><span class="s0">].</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s1">r</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;dummy&quot;</span><span class="s0">+</span><span class="s1">e</span><span class="s0">);</span><span class="s1">n</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s2">&quot;dummy&quot;</span><span class="s0">+</span><span class="s1">e</span><span class="s0">).</span><span class="s1">push</span><span class="s0">(</span><span class="s1">t</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">_</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)){</span><span class="s1">d</span><span class="s0">.</span><span class="s1">add</span><span class="s0">(</span><span class="s2">&quot;dummy&quot;</span><span class="s0">+</span><span class="s1">e</span><span class="s0">)}}));</span><span class="s1">a</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s2">&quot;dummy&quot;</span><span class="s0">+</span><span class="s1">e</span><span class="s0">,</span><span class="s1">c</span><span class="s0">[</span><span class="s1">h</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">p</span><span class="s0">[</span><span class="s1">e</span><span class="s0">][</span><span class="s3">0</span><span class="s0">])])};</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">m</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">m</span><span class="s0">&lt;</span><span class="s1">p</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">m</span><span class="s0">++){</span><span class="s1">v</span><span class="s0">(</span><span class="s1">m</span><span class="s0">)}}}</span><span class="s4">var </span><span class="s1">A</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Map</span><span class="s0">;</span><span class="s4">var </span><span class="s1">w</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Map</span><span class="s0">;</span><span class="s4">var </span><span class="s1">L</span><span class="s0">=</span><span class="s4">function </span><span class="s1">e</span><span class="s0">(</span><span class="s1">i</span><span class="s0">){</span><span class="s1">C</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">i</span><span class="s0">).</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">[</span><span class="s2">&quot;direction&quot;</span><span class="s0">]==</span><span class="s2">&quot;horizontal&quot;</span><span class="s0">){</span><span class="s1">n</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">i</span><span class="s0">)?</span><span class="s1">t</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">i</span><span class="s0">):</span><span class="s1">i</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">id</span><span class="s0">)){</span><span class="s1">o</span><span class="s0">={</span><span class="s1">id</span><span class="s0">:</span><span class="s1">t</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">id</span><span class="s0">),</span><span class="s1">gap</span><span class="s0">:</span><span class="s1">e</span><span class="s0">.</span><span class="s1">gap</span><span class="s0">,</span><span class="s1">direction</span><span class="s0">:</span><span class="s1">e</span><span class="s0">.</span><span class="s1">direction</span><span class="s0">}}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">o</span><span class="s0">=</span><span class="s1">e</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">A</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">n</span><span class="s0">)){</span><span class="s1">A</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">n</span><span class="s0">).</span><span class="s1">push</span><span class="s0">(</span><span class="s1">o</span><span class="s0">)}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">A</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">n</span><span class="s0">,[</span><span class="s1">o</span><span class="s0">])}</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">A</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">o</span><span class="s0">.</span><span class="s1">id</span><span class="s0">)){</span><span class="s1">A</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">o</span><span class="s0">.</span><span class="s1">id</span><span class="s0">,[])}}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">n</span><span class="s0">=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">i</span><span class="s0">)?</span><span class="s1">r</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">i</span><span class="s0">):</span><span class="s1">i</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">id</span><span class="s0">)){</span><span class="s1">o</span><span class="s0">={</span><span class="s1">id</span><span class="s0">:</span><span class="s1">r</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">id</span><span class="s0">),</span><span class="s1">gap</span><span class="s0">:</span><span class="s1">e</span><span class="s0">.</span><span class="s1">gap</span><span class="s0">,</span><span class="s1">direction</span><span class="s0">:</span><span class="s1">e</span><span class="s0">.</span><span class="s1">direction</span><span class="s0">}}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">o</span><span class="s0">=</span><span class="s1">e</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">w</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">n</span><span class="s0">)){</span><span class="s1">w</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">n</span><span class="s0">).</span><span class="s1">push</span><span class="s0">(</span><span class="s1">o</span><span class="s0">)}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">w</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">n</span><span class="s0">,[</span><span class="s1">o</span><span class="s0">])}</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">w</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">o</span><span class="s0">.</span><span class="s1">id</span><span class="s0">)){</span><span class="s1">w</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">o</span><span class="s0">.</span><span class="s1">id</span><span class="s0">,[])}}}))};</span><span class="s4">var </span><span class="s1">I</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s4">var </span><span class="s1">M</span><span class="s0">=</span><span class="s4">false</span><span class="s0">;</span><span class="s4">var </span><span class="s1">x</span><span class="s0">=</span><span class="s1">undefined</span><span class="s0">;</span><span class="s4">try</span><span class="s0">{</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">O</span><span class="s0">=</span><span class="s1">C</span><span class="s0">.</span><span class="s1">keys</span><span class="s0">()[</span><span class="s1">Symbol</span><span class="s0">.</span><span class="s1">iterator</span><span class="s0">](),</span><span class="s1">D</span><span class="s0">;!(</span><span class="s1">I</span><span class="s0">=(</span><span class="s1">D</span><span class="s0">=</span><span class="s1">O</span><span class="s0">.</span><span class="s1">next</span><span class="s0">()).</span><span class="s1">done</span><span class="s0">);</span><span class="s1">I</span><span class="s0">=</span><span class="s4">true</span><span class="s0">){</span><span class="s4">var </span><span class="s1">R</span><span class="s0">=</span><span class="s1">D</span><span class="s0">.</span><span class="s1">value</span><span class="s0">;</span><span class="s1">L</span><span class="s0">(</span><span class="s1">R</span><span class="s0">)}}</span><span class="s4">catch</span><span class="s0">(</span><span class="s1">rt</span><span class="s0">){</span><span class="s1">M</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s1">x</span><span class="s0">=</span><span class="s1">rt</span><span class="s0">}</span><span class="s4">finally</span><span class="s0">{</span><span class="s4">try</span><span class="s0">{</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">I</span><span class="s0">&amp;&amp;</span><span class="s1">O</span><span class="s0">.</span><span class="s1">return</span><span class="s0">){</span><span class="s1">O</span><span class="s0">.</span><span class="s1">return</span><span class="s0">()}}</span><span class="s4">finally</span><span class="s0">{</span><span class="s4">if</span><span class="s0">(</span><span class="s1">M</span><span class="s0">){</span><span class="s4">throw </span><span class="s1">x</span><span class="s0">}}}</span><span class="s4">var </span><span class="s1">b</span><span class="s0">=</span><span class="s1">N</span><span class="s0">(</span><span class="s1">A</span><span class="s0">);</span><span class="s4">var </span><span class="s1">G</span><span class="s0">=</span><span class="s1">N</span><span class="s0">(</span><span class="s1">w</span><span class="s0">);</span><span class="s4">var </span><span class="s1">F</span><span class="s0">=</span><span class="s1">E</span><span class="s0">(</span><span class="s1">b</span><span class="s0">);</span><span class="s4">var </span><span class="s1">S</span><span class="s0">=</span><span class="s1">E</span><span class="s0">(</span><span class="s1">G</span><span class="s0">);</span><span class="s4">var </span><span class="s1">P</span><span class="s0">=</span><span class="s1">T</span><span class="s0">(</span><span class="s1">A</span><span class="s0">);</span><span class="s4">var </span><span class="s1">U</span><span class="s0">=</span><span class="s1">T</span><span class="s0">(</span><span class="s1">w</span><span class="s0">);</span><span class="s4">var </span><span class="s1">k</span><span class="s0">=[];</span><span class="s4">var </span><span class="s1">Y</span><span class="s0">=[];</span><span class="s1">F</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s1">k</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]=[];</span><span class="s1">t</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">P</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">).</span><span class="s1">length</span><span class="s0">==</span><span class="s3">0</span><span class="s0">){</span><span class="s1">k</span><span class="s0">[</span><span class="s1">e</span><span class="s0">].</span><span class="s1">push</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)}}))}));</span><span class="s1">S</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s1">Y</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]=[];</span><span class="s1">t</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">U</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">).</span><span class="s1">length</span><span class="s0">==</span><span class="s3">0</span><span class="s0">){</span><span class="s1">Y</span><span class="s0">[</span><span class="s1">e</span><span class="s0">].</span><span class="s1">push</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)}}))}));</span><span class="s4">var </span><span class="s1">H</span><span class="s0">=</span><span class="s1">y</span><span class="s0">(</span><span class="s1">A</span><span class="s0">,</span><span class="s2">&quot;horizontal&quot;</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">k</span><span class="s0">);</span><span class="s4">var </span><span class="s1">X</span><span class="s0">=</span><span class="s1">y</span><span class="s0">(</span><span class="s1">w</span><span class="s0">,</span><span class="s2">&quot;vertical&quot;</span><span class="s0">,</span><span class="s1">d</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">Y</span><span class="s0">);</span><span class="s4">var </span><span class="s1">z</span><span class="s0">=</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)){</span><span class="s1">i</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">).</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s1">l</span><span class="s0">[</span><span class="s1">h</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)]=</span><span class="s1">H</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)}))}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">l</span><span class="s0">[</span><span class="s1">h</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)]=</span><span class="s1">H</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)}};</span><span class="s4">var </span><span class="s1">V</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s4">var </span><span class="s1">B</span><span class="s0">=</span><span class="s4">false</span><span class="s0">;</span><span class="s4">var </span><span class="s1">W</span><span class="s0">=</span><span class="s1">undefined</span><span class="s0">;</span><span class="s4">try</span><span class="s0">{</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">j</span><span class="s0">=</span><span class="s1">H</span><span class="s0">.</span><span class="s1">keys</span><span class="s0">()[</span><span class="s1">Symbol</span><span class="s0">.</span><span class="s1">iterator</span><span class="s0">](),</span><span class="s1">q</span><span class="s0">;!(</span><span class="s1">V</span><span class="s0">=(</span><span class="s1">q</span><span class="s0">=</span><span class="s1">j</span><span class="s0">.</span><span class="s1">next</span><span class="s0">()).</span><span class="s1">done</span><span class="s0">);</span><span class="s1">V</span><span class="s0">=</span><span class="s4">true</span><span class="s0">){</span><span class="s4">var </span><span class="s1">$</span><span class="s0">=</span><span class="s1">q</span><span class="s0">.</span><span class="s1">value</span><span class="s0">;</span><span class="s1">z</span><span class="s0">(</span><span class="s1">$</span><span class="s0">)}}</span><span class="s4">catch</span><span class="s0">(</span><span class="s1">rt</span><span class="s0">){</span><span class="s1">B</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s1">W</span><span class="s0">=</span><span class="s1">rt</span><span class="s0">}</span><span class="s4">finally</span><span class="s0">{</span><span class="s4">try</span><span class="s0">{</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">V</span><span class="s0">&amp;&amp;</span><span class="s1">j</span><span class="s0">.</span><span class="s1">return</span><span class="s0">){</span><span class="s1">j</span><span class="s0">.</span><span class="s1">return</span><span class="s0">()}}</span><span class="s4">finally</span><span class="s0">{</span><span class="s4">if</span><span class="s0">(</span><span class="s1">B</span><span class="s0">){</span><span class="s4">throw </span><span class="s1">W</span><span class="s0">}}}</span><span class="s4">var </span><span class="s1">K</span><span class="s0">=</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)){</span><span class="s1">n</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">).</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s1">c</span><span class="s0">[</span><span class="s1">h</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)]=</span><span class="s1">X</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)}))}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">c</span><span class="s0">[</span><span class="s1">h</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)]=</span><span class="s1">X</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)}};</span><span class="s4">var </span><span class="s1">Z</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s4">var </span><span class="s1">Q</span><span class="s0">=</span><span class="s4">false</span><span class="s0">;</span><span class="s4">var </span><span class="s1">J</span><span class="s0">=</span><span class="s1">undefined</span><span class="s0">;</span><span class="s4">try</span><span class="s0">{</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">tt</span><span class="s0">=</span><span class="s1">X</span><span class="s0">.</span><span class="s1">keys</span><span class="s0">()[</span><span class="s1">Symbol</span><span class="s0">.</span><span class="s1">iterator</span><span class="s0">](),</span><span class="s1">et</span><span class="s0">;!(</span><span class="s1">Z</span><span class="s0">=(</span><span class="s1">et</span><span class="s0">=</span><span class="s1">tt</span><span class="s0">.</span><span class="s1">next</span><span class="s0">()).</span><span class="s1">done</span><span class="s0">);</span><span class="s1">Z</span><span class="s0">=</span><span class="s4">true</span><span class="s0">){</span><span class="s4">var </span><span class="s1">$</span><span class="s0">=</span><span class="s1">et</span><span class="s0">.</span><span class="s1">value</span><span class="s0">;</span><span class="s1">K</span><span class="s0">(</span><span class="s1">$</span><span class="s0">)}}</span><span class="s4">catch</span><span class="s0">(</span><span class="s1">rt</span><span class="s0">){</span><span class="s1">Q</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s1">J</span><span class="s0">=</span><span class="s1">rt</span><span class="s0">}</span><span class="s4">finally</span><span class="s0">{</span><span class="s4">try</span><span class="s0">{</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">Z</span><span class="s0">&amp;&amp;</span><span class="s1">tt</span><span class="s0">.</span><span class="s1">return</span><span class="s0">){</span><span class="s1">tt</span><span class="s0">.</span><span class="s1">return</span><span class="s0">()}}</span><span class="s4">finally</span><span class="s0">{</span><span class="s4">if</span><span class="s0">(</span><span class="s1">Q</span><span class="s0">){</span><span class="s4">throw </span><span class="s1">J</span><span class="s0">}}}})()}}</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">et</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">et</span><span class="s0">&lt;</span><span class="s1">d</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">et</span><span class="s0">++){</span><span class="s4">var </span><span class="s1">rt</span><span class="s0">=</span><span class="s1">d</span><span class="s0">[</span><span class="s1">et</span><span class="s0">];</span><span class="s4">if</span><span class="s0">(</span><span class="s1">rt</span><span class="s0">.</span><span class="s1">getChild</span><span class="s0">()==</span><span class="s4">null</span><span class="s0">){</span><span class="s1">rt</span><span class="s0">.</span><span class="s1">setCenter</span><span class="s0">(</span><span class="s1">l</span><span class="s0">[</span><span class="s1">h</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">rt</span><span class="s0">.</span><span class="s1">id</span><span class="s0">)],</span><span class="s1">c</span><span class="s0">[</span><span class="s1">h</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">rt</span><span class="s0">.</span><span class="s1">id</span><span class="s0">)])}}};</span><span class="s1">t</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">=</span><span class="s1">h</span><span class="s0">},</span><span class="s3">551</span><span class="s0">:</span><span class="s1">e</span><span class="s0">=&gt;{</span><span class="s1">e</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">=</span><span class="s1">t</span><span class="s0">}};</span><span class="s4">var </span><span class="s1">r</span><span class="s0">={};</span><span class="s4">function </span><span class="s1">i</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">r</span><span class="s0">[</span><span class="s1">t</span><span class="s0">];</span><span class="s4">if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">!==</span><span class="s1">undefined</span><span class="s0">){</span><span class="s4">return </span><span class="s1">n</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">}</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s1">r</span><span class="s0">[</span><span class="s1">t</span><span class="s0">]={</span><span class="s1">exports</span><span class="s0">:{}};</span><span class="s1">e</span><span class="s0">[</span><span class="s1">t</span><span class="s0">](</span><span class="s1">o</span><span class="s0">,</span><span class="s1">o</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">,</span><span class="s1">i</span><span class="s0">);</span><span class="s4">return </span><span class="s1">o</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">}</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">45</span><span class="s0">);</span><span class="s4">return </span><span class="s1">n</span><span class="s0">})()}))},</span><span class="s3">1917</span><span class="s0">:</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){(</span><span class="s4">function </span><span class="s1">e</span><span class="s0">(</span><span class="s1">r</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s4">true</span><span class="s0">)</span><span class="s1">t</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">=</span><span class="s1">i</span><span class="s0">();</span><span class="s4">else</span><span class="s0">{}})(</span><span class="s4">this</span><span class="s0">,(</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">={};</span><span class="s4">function </span><span class="s1">r</span><span class="s0">(</span><span class="s1">i</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">[</span><span class="s1">i</span><span class="s0">]){</span><span class="s4">return </span><span class="s1">e</span><span class="s0">[</span><span class="s1">i</span><span class="s0">].</span><span class="s1">exports</span><span class="s0">}</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">i</span><span class="s0">]={</span><span class="s1">i</span><span class="s0">,</span><span class="s1">l</span><span class="s0">:</span><span class="s4">false</span><span class="s0">,</span><span class="s1">exports</span><span class="s0">:{}};</span><span class="s1">t</span><span class="s0">[</span><span class="s1">i</span><span class="s0">].</span><span class="s1">call</span><span class="s0">(</span><span class="s1">n</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">n</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">,</span><span class="s1">r</span><span class="s0">);</span><span class="s1">n</span><span class="s0">.</span><span class="s1">l</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s4">return </span><span class="s1">n</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">}</span><span class="s1">r</span><span class="s0">.</span><span class="s1">m</span><span class="s0">=</span><span class="s1">t</span><span class="s0">;</span><span class="s1">r</span><span class="s0">.</span><span class="s1">c</span><span class="s0">=</span><span class="s1">e</span><span class="s0">;</span><span class="s1">r</span><span class="s0">.</span><span class="s1">i</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">return </span><span class="s1">t</span><span class="s0">};</span><span class="s1">r</span><span class="s0">.</span><span class="s1">d</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">r</span><span class="s0">.</span><span class="s1">o</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">)){</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,{</span><span class="s1">configurable</span><span class="s0">:</span><span class="s4">false</span><span class="s0">,</span><span class="s1">enumerable</span><span class="s0">:</span><span class="s4">true</span><span class="s0">,</span><span class="s1">get</span><span class="s0">:</span><span class="s1">i</span><span class="s0">})}};</span><span class="s1">r</span><span class="s0">.</span><span class="s1">n</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s1">t</span><span class="s0">&amp;&amp;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">__esModule</span><span class="s0">?</span><span class="s4">function </span><span class="s1">e</span><span class="s0">(){</span><span class="s4">return </span><span class="s1">t</span><span class="s0">[</span><span class="s2">&quot;default&quot;</span><span class="s0">]}:</span><span class="s4">function </span><span class="s1">e</span><span class="s0">(){</span><span class="s4">return </span><span class="s1">t</span><span class="s0">};</span><span class="s1">r</span><span class="s0">.</span><span class="s1">d</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s2">&quot;a&quot;</span><span class="s0">,</span><span class="s1">e</span><span class="s0">);</span><span class="s4">return </span><span class="s1">e</span><span class="s0">};</span><span class="s1">r</span><span class="s0">.</span><span class="s1">o</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">return </span><span class="s1">Object</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">hasOwnProperty</span><span class="s0">.</span><span class="s1">call</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">)};</span><span class="s1">r</span><span class="s0">.</span><span class="s1">p</span><span class="s0">=</span><span class="s2">&quot;&quot;</span><span class="s0">;</span><span class="s4">return </span><span class="s1">r</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">s</span><span class="s0">=</span><span class="s3">28</span><span class="s0">)}([</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s2">&quot;use strict&quot;</span><span class="s0">;</span><span class="s4">function </span><span class="s1">i</span><span class="s0">(){}</span><span class="s1">i</span><span class="s0">.</span><span class="s1">QUALITY</span><span class="s0">=</span><span class="s3">1</span><span class="s0">;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">DEFAULT_CREATE_BENDS_AS_NEEDED</span><span class="s0">=</span><span class="s4">false</span><span class="s0">;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">DEFAULT_INCREMENTAL</span><span class="s0">=</span><span class="s4">false</span><span class="s0">;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">DEFAULT_ANIMATION_ON_LAYOUT</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">DEFAULT_ANIMATION_DURING_LAYOUT</span><span class="s0">=</span><span class="s4">false</span><span class="s0">;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">DEFAULT_ANIMATION_PERIOD</span><span class="s0">=</span><span class="s3">50</span><span class="s0">;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">DEFAULT_UNIFORM_LEAF_NODE_SIZES</span><span class="s0">=</span><span class="s4">false</span><span class="s0">;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">DEFAULT_GRAPH_MARGIN</span><span class="s0">=</span><span class="s3">15</span><span class="s0">;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">NODE_DIMENSIONS_INCLUDE_LABELS</span><span class="s0">=</span><span class="s4">false</span><span class="s0">;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">SIMPLE_NODE_SIZE</span><span class="s0">=</span><span class="s3">40</span><span class="s0">;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">SIMPLE_NODE_HALF_SIZE</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">SIMPLE_NODE_SIZE</span><span class="s0">/</span><span class="s3">2</span><span class="s0">;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">EMPTY_COMPOUND_NODE_SIZE</span><span class="s0">=</span><span class="s3">40</span><span class="s0">;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">MIN_EDGE_LENGTH</span><span class="s0">=</span><span class="s3">1</span><span class="s0">;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">WORLD_BOUNDARY</span><span class="s0">=</span><span class="s3">1e6</span><span class="s0">;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">INITIAL_WORLD_BOUNDARY</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">WORLD_BOUNDARY</span><span class="s0">/</span><span class="s3">1e3</span><span class="s0">;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">WORLD_CENTER_X</span><span class="s0">=</span><span class="s3">1200</span><span class="s0">;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">WORLD_CENTER_Y</span><span class="s0">=</span><span class="s3">900</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">=</span><span class="s1">i</span><span class="s0">},</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s2">&quot;use strict&quot;</span><span class="s0">;</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">2</span><span class="s0">);</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">8</span><span class="s0">);</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">9</span><span class="s0">);</span><span class="s4">function </span><span class="s1">a</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s1">i</span><span class="s0">.</span><span class="s1">call</span><span class="s0">(</span><span class="s4">this</span><span class="s0">,</span><span class="s1">r</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">isOverlapingSourceAndTarget</span><span class="s0">=</span><span class="s4">false</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">vGraphObject</span><span class="s0">=</span><span class="s1">r</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">bendpoints</span><span class="s0">=[];</span><span class="s4">this</span><span class="s0">.</span><span class="s1">source</span><span class="s0">=</span><span class="s1">t</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">target</span><span class="s0">=</span><span class="s1">e</span><span class="s0">}</span><span class="s1">a</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">=</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">create</span><span class="s0">(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">);</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">s </span><span class="s4">in </span><span class="s1">i</span><span class="s0">){</span><span class="s1">a</span><span class="s0">[</span><span class="s1">s</span><span class="s0">]=</span><span class="s1">i</span><span class="s0">[</span><span class="s1">s</span><span class="s0">]}</span><span class="s1">a</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getSource</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">source</span><span class="s0">};</span><span class="s1">a</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getTarget</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">target</span><span class="s0">};</span><span class="s1">a</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">isInterGraph</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">isInterGraph</span><span class="s0">};</span><span class="s1">a</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getLength</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">length</span><span class="s0">};</span><span class="s1">a</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">isOverlapingSourceAndTarget</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">isOverlapingSourceAndTarget</span><span class="s0">};</span><span class="s1">a</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getBendpoints</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">bendpoints</span><span class="s0">};</span><span class="s1">a</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getLca</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">lca</span><span class="s0">};</span><span class="s1">a</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getSourceInLca</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">sourceInLca</span><span class="s0">};</span><span class="s1">a</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getTargetInLca</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">targetInLca</span><span class="s0">};</span><span class="s1">a</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getOtherEnd</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">source</span><span class="s0">===</span><span class="s1">t</span><span class="s0">){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">target</span><span class="s0">}</span><span class="s4">else if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">target</span><span class="s0">===</span><span class="s1">t</span><span class="s0">){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">source</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">throw</span><span class="s2">&quot;Node is not incident with this edge&quot;</span><span class="s0">}};</span><span class="s1">a</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getOtherEndInGraph</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getOtherEnd</span><span class="s0">(</span><span class="s1">t</span><span class="s0">);</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getGraphManager</span><span class="s0">().</span><span class="s1">getRoot</span><span class="s0">();</span><span class="s4">while</span><span class="s0">(</span><span class="s4">true</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">getOwner</span><span class="s0">()==</span><span class="s1">e</span><span class="s0">){</span><span class="s4">return </span><span class="s1">r</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">getOwner</span><span class="s0">()==</span><span class="s1">i</span><span class="s0">){</span><span class="s4">break</span><span class="s0">}</span><span class="s1">r</span><span class="s0">=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">getOwner</span><span class="s0">().</span><span class="s1">getParent</span><span class="s0">()}</span><span class="s4">return null</span><span class="s0">};</span><span class="s1">a</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">updateLength</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">var </span><span class="s1">t</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Array</span><span class="s0">(</span><span class="s3">4</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">isOverlapingSourceAndTarget</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">getIntersection</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">target</span><span class="s0">.</span><span class="s1">getRect</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">source</span><span class="s0">.</span><span class="s1">getRect</span><span class="s0">(),</span><span class="s1">t</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(!</span><span class="s4">this</span><span class="s0">.</span><span class="s1">isOverlapingSourceAndTarget</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">lengthX</span><span class="s0">=</span><span class="s1">t</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]-</span><span class="s1">t</span><span class="s0">[</span><span class="s3">2</span><span class="s0">];</span><span class="s4">this</span><span class="s0">.</span><span class="s1">lengthY</span><span class="s0">=</span><span class="s1">t</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]-</span><span class="s1">t</span><span class="s0">[</span><span class="s3">3</span><span class="s0">];</span><span class="s4">if</span><span class="s0">(</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">abs</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">lengthX</span><span class="s0">)&lt;</span><span class="s3">1</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">lengthX</span><span class="s0">=</span><span class="s1">o</span><span class="s0">.</span><span class="s1">sign</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">lengthX</span><span class="s0">)}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">abs</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">lengthY</span><span class="s0">)&lt;</span><span class="s3">1</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">lengthY</span><span class="s0">=</span><span class="s1">o</span><span class="s0">.</span><span class="s1">sign</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">lengthY</span><span class="s0">)}</span><span class="s4">this</span><span class="s0">.</span><span class="s1">length</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">sqrt</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">lengthX</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">lengthX</span><span class="s0">+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">lengthY</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">lengthY</span><span class="s0">)}};</span><span class="s1">a</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">updateLengthSimple</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">lengthX</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">target</span><span class="s0">.</span><span class="s1">getCenterX</span><span class="s0">()-</span><span class="s4">this</span><span class="s0">.</span><span class="s1">source</span><span class="s0">.</span><span class="s1">getCenterX</span><span class="s0">();</span><span class="s4">this</span><span class="s0">.</span><span class="s1">lengthY</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">target</span><span class="s0">.</span><span class="s1">getCenterY</span><span class="s0">()-</span><span class="s4">this</span><span class="s0">.</span><span class="s1">source</span><span class="s0">.</span><span class="s1">getCenterY</span><span class="s0">();</span><span class="s4">if</span><span class="s0">(</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">abs</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">lengthX</span><span class="s0">)&lt;</span><span class="s3">1</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">lengthX</span><span class="s0">=</span><span class="s1">o</span><span class="s0">.</span><span class="s1">sign</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">lengthX</span><span class="s0">)}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">abs</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">lengthY</span><span class="s0">)&lt;</span><span class="s3">1</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">lengthY</span><span class="s0">=</span><span class="s1">o</span><span class="s0">.</span><span class="s1">sign</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">lengthY</span><span class="s0">)}</span><span class="s4">this</span><span class="s0">.</span><span class="s1">length</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">sqrt</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">lengthX</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">lengthX</span><span class="s0">+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">lengthY</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">lengthY</span><span class="s0">)};</span><span class="s1">t</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">=</span><span class="s1">a</span><span class="s0">},</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s2">&quot;use strict&quot;</span><span class="s0">;</span><span class="s4">function </span><span class="s1">i</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">vGraphObject</span><span class="s0">=</span><span class="s1">t</span><span class="s0">}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">=</span><span class="s1">i</span><span class="s0">},</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s2">&quot;use strict&quot;</span><span class="s0">;</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">2</span><span class="s0">);</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">10</span><span class="s0">);</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">13</span><span class="s0">);</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">0</span><span class="s0">);</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">16</span><span class="s0">);</span><span class="s4">var </span><span class="s1">h</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">5</span><span class="s0">);</span><span class="s4">function </span><span class="s1">l</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">a</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">==</span><span class="s4">null</span><span class="s0">&amp;&amp;</span><span class="s1">a</span><span class="s0">==</span><span class="s4">null</span><span class="s0">){</span><span class="s1">a</span><span class="s0">=</span><span class="s1">e</span><span class="s0">}</span><span class="s1">i</span><span class="s0">.</span><span class="s1">call</span><span class="s0">(</span><span class="s4">this</span><span class="s0">,</span><span class="s1">a</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">!=</span><span class="s4">null</span><span class="s0">)</span><span class="s1">t</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">estimatedSize</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">MIN_VALUE</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">inclusionTreeDepth</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">MAX_VALUE</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">vGraphObject</span><span class="s0">=</span><span class="s1">a</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">edges</span><span class="s0">=[];</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">=</span><span class="s1">t</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">!=</span><span class="s4">null</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">!=</span><span class="s4">null</span><span class="s0">)</span><span class="s4">this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">=</span><span class="s4">new </span><span class="s1">o</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">x</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">y</span><span class="s0">,</span><span class="s1">r</span><span class="s0">.</span><span class="s1">width</span><span class="s0">,</span><span class="s1">r</span><span class="s0">.</span><span class="s1">height</span><span class="s0">);</span><span class="s4">else this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">=</span><span class="s4">new </span><span class="s1">o</span><span class="s0">}</span><span class="s1">l</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">=</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">create</span><span class="s0">(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">);</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">c </span><span class="s4">in </span><span class="s1">i</span><span class="s0">){</span><span class="s1">l</span><span class="s0">[</span><span class="s1">c</span><span class="s0">]=</span><span class="s1">i</span><span class="s0">[</span><span class="s1">c</span><span class="s0">]}</span><span class="s1">l</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getEdges</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">edges</span><span class="s0">};</span><span class="s1">l</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getChild</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">child</span><span class="s0">};</span><span class="s1">l</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getOwner</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">owner</span><span class="s0">};</span><span class="s1">l</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getWidth</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">width</span><span class="s0">};</span><span class="s1">l</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">setWidth</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">width</span><span class="s0">=</span><span class="s1">t</span><span class="s0">};</span><span class="s1">l</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getHeight</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">height</span><span class="s0">};</span><span class="s1">l</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">setHeight</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">height</span><span class="s0">=</span><span class="s1">t</span><span class="s0">};</span><span class="s1">l</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getCenterX</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">x</span><span class="s0">+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">width</span><span class="s0">/</span><span class="s3">2</span><span class="s0">};</span><span class="s1">l</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getCenterY</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">y</span><span class="s0">+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">height</span><span class="s0">/</span><span class="s3">2</span><span class="s0">};</span><span class="s1">l</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getCenter</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return new </span><span class="s1">h</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">x</span><span class="s0">+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">width</span><span class="s0">/</span><span class="s3">2</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">y</span><span class="s0">+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">height</span><span class="s0">/</span><span class="s3">2</span><span class="s0">)};</span><span class="s1">l</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getLocation</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return new </span><span class="s1">h</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">x</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">y</span><span class="s0">)};</span><span class="s1">l</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getRect</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">};</span><span class="s1">l</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getDiagonal</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return </span><span class="s1">Math</span><span class="s0">.</span><span class="s1">sqrt</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">width</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">width</span><span class="s0">+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">height</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">height</span><span class="s0">)};</span><span class="s1">l</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getHalfTheDiagonal</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return </span><span class="s1">Math</span><span class="s0">.</span><span class="s1">sqrt</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">height</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">height</span><span class="s0">+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">width</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">width</span><span class="s0">)/</span><span class="s3">2</span><span class="s0">};</span><span class="s1">l</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">setRect</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">x</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">x</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">y</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">y</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">width</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">width</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">height</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">height</span><span class="s0">};</span><span class="s1">l</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">setCenter</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">x</span><span class="s0">=</span><span class="s1">t</span><span class="s0">-</span><span class="s4">this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">width</span><span class="s0">/</span><span class="s3">2</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">y</span><span class="s0">=</span><span class="s1">e</span><span class="s0">-</span><span class="s4">this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">height</span><span class="s0">/</span><span class="s3">2</span><span class="s0">};</span><span class="s1">l</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">setLocation</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">x</span><span class="s0">=</span><span class="s1">t</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">y</span><span class="s0">=</span><span class="s1">e</span><span class="s0">};</span><span class="s1">l</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">moveBy</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">x</span><span class="s0">+=</span><span class="s1">t</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">y</span><span class="s0">+=</span><span class="s1">e</span><span class="s0">};</span><span class="s1">l</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getEdgeListToNode</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=[];</span><span class="s4">var </span><span class="s1">r</span><span class="s0">;</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s4">this</span><span class="s0">;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">edges</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">r</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">target</span><span class="s0">==</span><span class="s1">t</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">source</span><span class="s0">!=</span><span class="s1">i</span><span class="s0">)</span><span class="s4">throw</span><span class="s2">&quot;Incorrect edge source!&quot;</span><span class="s0">;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">r</span><span class="s0">)}}));</span><span class="s4">return </span><span class="s1">e</span><span class="s0">};</span><span class="s1">l</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getEdgesBetween</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=[];</span><span class="s4">var </span><span class="s1">r</span><span class="s0">;</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s4">this</span><span class="s0">;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">edges</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">r</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(!(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">source</span><span class="s0">==</span><span class="s1">i</span><span class="s0">||</span><span class="s1">r</span><span class="s0">.</span><span class="s1">target</span><span class="s0">==</span><span class="s1">i</span><span class="s0">))</span><span class="s4">throw</span><span class="s2">&quot;Incorrect edge source and/or target&quot;</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">target</span><span class="s0">==</span><span class="s1">t</span><span class="s0">||</span><span class="s1">r</span><span class="s0">.</span><span class="s1">source</span><span class="s0">==</span><span class="s1">t</span><span class="s0">){</span><span class="s1">e</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">r</span><span class="s0">)}}));</span><span class="s4">return </span><span class="s1">e</span><span class="s0">};</span><span class="s1">l</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getNeighborsList</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">var </span><span class="s1">t</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Set</span><span class="s0">;</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s4">this</span><span class="s0">;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">edges</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">r</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">source</span><span class="s0">==</span><span class="s1">e</span><span class="s0">){</span><span class="s1">t</span><span class="s0">.</span><span class="s1">add</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">target</span><span class="s0">)}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">target</span><span class="s0">!=</span><span class="s1">e</span><span class="s0">){</span><span class="s4">throw</span><span class="s2">&quot;Incorrect incidency!&quot;</span><span class="s0">}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">add</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">source</span><span class="s0">)}}));</span><span class="s4">return </span><span class="s1">t</span><span class="s0">};</span><span class="s1">l</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">withChildren</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">var </span><span class="s1">t</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Set</span><span class="s0">;</span><span class="s4">var </span><span class="s1">e</span><span class="s0">;</span><span class="s4">var </span><span class="s1">r</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">add</span><span class="s0">(</span><span class="s4">this</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">child</span><span class="s0">!=</span><span class="s4">null</span><span class="s0">){</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">child</span><span class="s0">.</span><span class="s1">getNodes</span><span class="s0">();</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">n</span><span class="s0">&lt;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">n</span><span class="s0">++){</span><span class="s1">e</span><span class="s0">=</span><span class="s1">i</span><span class="s0">[</span><span class="s1">n</span><span class="s0">];</span><span class="s1">r</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">withChildren</span><span class="s0">();</span><span class="s1">r</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s1">t</span><span class="s0">.</span><span class="s1">add</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)}))}}</span><span class="s4">return </span><span class="s1">t</span><span class="s0">};</span><span class="s1">l</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getNoOfChildren</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">var </span><span class="s1">t</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">e</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">child</span><span class="s0">==</span><span class="s4">null</span><span class="s0">){</span><span class="s1">t</span><span class="s0">=</span><span class="s3">1</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">child</span><span class="s0">.</span><span class="s1">getNodes</span><span class="s0">();</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">i</span><span class="s0">&lt;</span><span class="s1">r</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">i</span><span class="s0">++){</span><span class="s1">e</span><span class="s0">=</span><span class="s1">r</span><span class="s0">[</span><span class="s1">i</span><span class="s0">];</span><span class="s1">t</span><span class="s0">+=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getNoOfChildren</span><span class="s0">()}}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">==</span><span class="s3">0</span><span class="s0">){</span><span class="s1">t</span><span class="s0">=</span><span class="s3">1</span><span class="s0">}</span><span class="s4">return </span><span class="s1">t</span><span class="s0">};</span><span class="s1">l</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getEstimatedSize</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">estimatedSize</span><span class="s0">==</span><span class="s1">n</span><span class="s0">.</span><span class="s1">MIN_VALUE</span><span class="s0">){</span><span class="s4">throw</span><span class="s2">&quot;assert failed&quot;</span><span class="s0">}</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">estimatedSize</span><span class="s0">};</span><span class="s1">l</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">calcEstimatedSize</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">child</span><span class="s0">==</span><span class="s4">null</span><span class="s0">){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">estimatedSize</span><span class="s0">=(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">width</span><span class="s0">+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">height</span><span class="s0">)/</span><span class="s3">2</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">this</span><span class="s0">.</span><span class="s1">estimatedSize</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">child</span><span class="s0">.</span><span class="s1">calcEstimatedSize</span><span class="s0">();</span><span class="s4">this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">width</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">estimatedSize</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">height</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">estimatedSize</span><span class="s0">;</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">estimatedSize</span><span class="s0">}};</span><span class="s1">l</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">scatter</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">var </span><span class="s1">t</span><span class="s0">;</span><span class="s4">var </span><span class="s1">e</span><span class="s0">;</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=-</span><span class="s1">a</span><span class="s0">.</span><span class="s1">INITIAL_WORLD_BOUNDARY</span><span class="s0">;</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">a</span><span class="s0">.</span><span class="s1">INITIAL_WORLD_BOUNDARY</span><span class="s0">;</span><span class="s1">t</span><span class="s0">=</span><span class="s1">a</span><span class="s0">.</span><span class="s1">WORLD_CENTER_X</span><span class="s0">+</span><span class="s1">s</span><span class="s0">.</span><span class="s1">nextDouble</span><span class="s0">()*(</span><span class="s1">i</span><span class="s0">-</span><span class="s1">r</span><span class="s0">)+</span><span class="s1">r</span><span class="s0">;</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=-</span><span class="s1">a</span><span class="s0">.</span><span class="s1">INITIAL_WORLD_BOUNDARY</span><span class="s0">;</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s1">a</span><span class="s0">.</span><span class="s1">INITIAL_WORLD_BOUNDARY</span><span class="s0">;</span><span class="s1">e</span><span class="s0">=</span><span class="s1">a</span><span class="s0">.</span><span class="s1">WORLD_CENTER_Y</span><span class="s0">+</span><span class="s1">s</span><span class="s0">.</span><span class="s1">nextDouble</span><span class="s0">()*(</span><span class="s1">o</span><span class="s0">-</span><span class="s1">n</span><span class="s0">)+</span><span class="s1">n</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">x</span><span class="s0">=</span><span class="s1">t</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">y</span><span class="s0">=</span><span class="s1">e</span><span class="s0">};</span><span class="s1">l</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">updateBounds</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getChild</span><span class="s0">()==</span><span class="s4">null</span><span class="s0">){</span><span class="s4">throw</span><span class="s2">&quot;assert failed&quot;</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getChild</span><span class="s0">().</span><span class="s1">getNodes</span><span class="s0">().</span><span class="s1">length</span><span class="s0">!=</span><span class="s3">0</span><span class="s0">){</span><span class="s4">var </span><span class="s1">t</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getChild</span><span class="s0">();</span><span class="s1">t</span><span class="s0">.</span><span class="s1">updateBounds</span><span class="s0">(</span><span class="s4">true</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">x</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getLeft</span><span class="s0">();</span><span class="s4">this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">y</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getTop</span><span class="s0">();</span><span class="s4">this</span><span class="s0">.</span><span class="s1">setWidth</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getRight</span><span class="s0">()-</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getLeft</span><span class="s0">());</span><span class="s4">this</span><span class="s0">.</span><span class="s1">setHeight</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getBottom</span><span class="s0">()-</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getTop</span><span class="s0">());</span><span class="s4">if</span><span class="s0">(</span><span class="s1">a</span><span class="s0">.</span><span class="s1">NODE_DIMENSIONS_INCLUDE_LABELS</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getRight</span><span class="s0">()-</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getLeft</span><span class="s0">();</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getBottom</span><span class="s0">()-</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getTop</span><span class="s0">();</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">labelWidth</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">labelPosHorizontal</span><span class="s0">==</span><span class="s2">&quot;left&quot;</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">x</span><span class="s0">-=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">labelWidth</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">setWidth</span><span class="s0">(</span><span class="s1">e</span><span class="s0">+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">labelWidth</span><span class="s0">)}</span><span class="s4">else if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">labelPosHorizontal</span><span class="s0">==</span><span class="s2">&quot;center&quot;</span><span class="s0">&amp;&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">labelWidth</span><span class="s0">&gt;</span><span class="s1">e</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">x</span><span class="s0">-=(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">labelWidth</span><span class="s0">-</span><span class="s1">e</span><span class="s0">)/</span><span class="s3">2</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">setWidth</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">labelWidth</span><span class="s0">)}</span><span class="s4">else if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">labelPosHorizontal</span><span class="s0">==</span><span class="s2">&quot;right&quot;</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">setWidth</span><span class="s0">(</span><span class="s1">e</span><span class="s0">+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">labelWidth</span><span class="s0">)}}</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">labelHeight</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">labelPosVertical</span><span class="s0">==</span><span class="s2">&quot;top&quot;</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">y</span><span class="s0">-=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">labelHeight</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">setHeight</span><span class="s0">(</span><span class="s1">r</span><span class="s0">+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">labelHeight</span><span class="s0">)}</span><span class="s4">else if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">labelPosVertical</span><span class="s0">==</span><span class="s2">&quot;center&quot;</span><span class="s0">&amp;&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">labelHeight</span><span class="s0">&gt;</span><span class="s1">r</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">y</span><span class="s0">-=(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">labelHeight</span><span class="s0">-</span><span class="s1">r</span><span class="s0">)/</span><span class="s3">2</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">setHeight</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">labelHeight</span><span class="s0">)}</span><span class="s4">else if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">labelPosVertical</span><span class="s0">==</span><span class="s2">&quot;bottom&quot;</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">setHeight</span><span class="s0">(</span><span class="s1">r</span><span class="s0">+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">labelHeight</span><span class="s0">)}}}}};</span><span class="s1">l</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getInclusionTreeDepth</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">inclusionTreeDepth</span><span class="s0">==</span><span class="s1">n</span><span class="s0">.</span><span class="s1">MAX_VALUE</span><span class="s0">){</span><span class="s4">throw</span><span class="s2">&quot;assert failed&quot;</span><span class="s0">}</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">inclusionTreeDepth</span><span class="s0">};</span><span class="s1">l</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">transform</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">x</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">&gt;</span><span class="s1">a</span><span class="s0">.</span><span class="s1">WORLD_BOUNDARY</span><span class="s0">){</span><span class="s1">e</span><span class="s0">=</span><span class="s1">a</span><span class="s0">.</span><span class="s1">WORLD_BOUNDARY</span><span class="s0">}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">&lt;-</span><span class="s1">a</span><span class="s0">.</span><span class="s1">WORLD_BOUNDARY</span><span class="s0">){</span><span class="s1">e</span><span class="s0">=-</span><span class="s1">a</span><span class="s0">.</span><span class="s1">WORLD_BOUNDARY</span><span class="s0">}</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">y</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">&gt;</span><span class="s1">a</span><span class="s0">.</span><span class="s1">WORLD_BOUNDARY</span><span class="s0">){</span><span class="s1">r</span><span class="s0">=</span><span class="s1">a</span><span class="s0">.</span><span class="s1">WORLD_BOUNDARY</span><span class="s0">}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">&lt;-</span><span class="s1">a</span><span class="s0">.</span><span class="s1">WORLD_BOUNDARY</span><span class="s0">){</span><span class="s1">r</span><span class="s0">=-</span><span class="s1">a</span><span class="s0">.</span><span class="s1">WORLD_BOUNDARY</span><span class="s0">}</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s4">new </span><span class="s1">h</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">);</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">inverseTransformPoint</span><span class="s0">(</span><span class="s1">i</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">setLocation</span><span class="s0">(</span><span class="s1">n</span><span class="s0">.</span><span class="s1">x</span><span class="s0">,</span><span class="s1">n</span><span class="s0">.</span><span class="s1">y</span><span class="s0">)};</span><span class="s1">l</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getLeft</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">x</span><span class="s0">};</span><span class="s1">l</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getRight</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">x</span><span class="s0">+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">width</span><span class="s0">};</span><span class="s1">l</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getTop</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">y</span><span class="s0">};</span><span class="s1">l</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getBottom</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">y</span><span class="s0">+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">.</span><span class="s1">height</span><span class="s0">};</span><span class="s1">l</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getParent</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">owner</span><span class="s0">==</span><span class="s4">null</span><span class="s0">){</span><span class="s4">return null</span><span class="s0">}</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">owner</span><span class="s0">.</span><span class="s1">getParent</span><span class="s0">()};</span><span class="s1">t</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">=</span><span class="s1">l</span><span class="s0">},</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s2">&quot;use strict&quot;</span><span class="s0">;</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">0</span><span class="s0">);</span><span class="s4">function </span><span class="s1">n</span><span class="s0">(){}</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">o </span><span class="s4">in </span><span class="s1">i</span><span class="s0">){</span><span class="s1">n</span><span class="s0">[</span><span class="s1">o</span><span class="s0">]=</span><span class="s1">i</span><span class="s0">[</span><span class="s1">o</span><span class="s0">]}</span><span class="s1">n</span><span class="s0">.</span><span class="s1">MAX_ITERATIONS</span><span class="s0">=</span><span class="s3">2500</span><span class="s0">;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">DEFAULT_EDGE_LENGTH</span><span class="s0">=</span><span class="s3">50</span><span class="s0">;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">DEFAULT_SPRING_STRENGTH</span><span class="s0">=</span><span class="s3">.45</span><span class="s0">;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">DEFAULT_REPULSION_STRENGTH</span><span class="s0">=</span><span class="s3">4500</span><span class="s0">;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">DEFAULT_GRAVITY_STRENGTH</span><span class="s0">=</span><span class="s3">.4</span><span class="s0">;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">DEFAULT_COMPOUND_GRAVITY_STRENGTH</span><span class="s0">=</span><span class="s3">1</span><span class="s0">;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">DEFAULT_GRAVITY_RANGE_FACTOR</span><span class="s0">=</span><span class="s3">3.8</span><span class="s0">;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR</span><span class="s0">=</span><span class="s3">1.5</span><span class="s0">;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">DEFAULT_COOLING_FACTOR_INCREMENTAL</span><span class="s0">=</span><span class="s3">.3</span><span class="s0">;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">COOLING_ADAPTATION_FACTOR</span><span class="s0">=</span><span class="s3">.33</span><span class="s0">;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">ADAPTATION_LOWER_NODE_LIMIT</span><span class="s0">=</span><span class="s3">1e3</span><span class="s0">;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">ADAPTATION_UPPER_NODE_LIMIT</span><span class="s0">=</span><span class="s3">5e3</span><span class="s0">;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">MAX_NODE_DISPLACEMENT_INCREMENTAL</span><span class="s0">=</span><span class="s3">100</span><span class="s0">;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">MAX_NODE_DISPLACEMENT</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">MAX_NODE_DISPLACEMENT_INCREMENTAL</span><span class="s0">*</span><span class="s3">3</span><span class="s0">;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">MIN_REPULSION_DIST</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">DEFAULT_EDGE_LENGTH</span><span class="s0">/</span><span class="s3">10</span><span class="s0">;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">CONVERGENCE_CHECK_PERIOD</span><span class="s0">=</span><span class="s3">100</span><span class="s0">;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR</span><span class="s0">=</span><span class="s3">.1</span><span class="s0">;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">MIN_EDGE_LENGTH</span><span class="s0">=</span><span class="s3">1</span><span class="s0">;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">GRID_CALCULATION_CHECK_PERIOD</span><span class="s0">=</span><span class="s3">10</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">=</span><span class="s1">n</span><span class="s0">},</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s2">&quot;use strict&quot;</span><span class="s0">;</span><span class="s4">function </span><span class="s1">i</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">==</span><span class="s4">null</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">==</span><span class="s4">null</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">x</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">y</span><span class="s0">=</span><span class="s3">0</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">this</span><span class="s0">.</span><span class="s1">x</span><span class="s0">=</span><span class="s1">t</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">y</span><span class="s0">=</span><span class="s1">e</span><span class="s0">}}</span><span class="s1">i</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getX</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">x</span><span class="s0">};</span><span class="s1">i</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getY</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">y</span><span class="s0">};</span><span class="s1">i</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">setX</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">x</span><span class="s0">=</span><span class="s1">t</span><span class="s0">};</span><span class="s1">i</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">setY</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">y</span><span class="s0">=</span><span class="s1">t</span><span class="s0">};</span><span class="s1">i</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getDifference</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">return new </span><span class="s1">DimensionD</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">x</span><span class="s0">-</span><span class="s1">t</span><span class="s0">.</span><span class="s1">x</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">y</span><span class="s0">-</span><span class="s1">t</span><span class="s0">.</span><span class="s1">y</span><span class="s0">)};</span><span class="s1">i</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getCopy</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return new </span><span class="s1">i</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">x</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">y</span><span class="s0">)};</span><span class="s1">i</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">translate</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">x</span><span class="s0">+=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">width</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">y</span><span class="s0">+=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">height</span><span class="s0">;</span><span class="s4">return this</span><span class="s0">};</span><span class="s1">t</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">=</span><span class="s1">i</span><span class="s0">},</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s2">&quot;use strict&quot;</span><span class="s0">;</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">2</span><span class="s0">);</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">10</span><span class="s0">);</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">0</span><span class="s0">);</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">7</span><span class="s0">);</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">3</span><span class="s0">);</span><span class="s4">var </span><span class="s1">h</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">1</span><span class="s0">);</span><span class="s4">var </span><span class="s1">l</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">13</span><span class="s0">);</span><span class="s4">var </span><span class="s1">c</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">12</span><span class="s0">);</span><span class="s4">var </span><span class="s1">d</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">11</span><span class="s0">);</span><span class="s4">function </span><span class="s1">f</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s1">i</span><span class="s0">.</span><span class="s1">call</span><span class="s0">(</span><span class="s4">this</span><span class="s0">,</span><span class="s1">r</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">estimatedSize</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">MIN_VALUE</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">margin</span><span class="s0">=</span><span class="s1">o</span><span class="s0">.</span><span class="s1">DEFAULT_GRAPH_MARGIN</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">edges</span><span class="s0">=[];</span><span class="s4">this</span><span class="s0">.</span><span class="s1">nodes</span><span class="s0">=[];</span><span class="s4">this</span><span class="s0">.</span><span class="s1">isConnected</span><span class="s0">=</span><span class="s4">false</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">parent</span><span class="s0">=</span><span class="s1">t</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">!=</span><span class="s4">null</span><span class="s0">&amp;&amp;</span><span class="s1">e </span><span class="s4">instanceof </span><span class="s1">a</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">=</span><span class="s1">e</span><span class="s0">}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">!=</span><span class="s4">null</span><span class="s0">&amp;&amp;</span><span class="s1">e </span><span class="s4">instanceof </span><span class="s1">Layout</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">}}</span><span class="s1">f</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">=</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">create</span><span class="s0">(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">);</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">g </span><span class="s4">in </span><span class="s1">i</span><span class="s0">){</span><span class="s1">f</span><span class="s0">[</span><span class="s1">g</span><span class="s0">]=</span><span class="s1">i</span><span class="s0">[</span><span class="s1">g</span><span class="s0">]}</span><span class="s1">f</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getNodes</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">nodes</span><span class="s0">};</span><span class="s1">f</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getEdges</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">edges</span><span class="s0">};</span><span class="s1">f</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getGraphManager</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">};</span><span class="s1">f</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getParent</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">parent</span><span class="s0">};</span><span class="s1">f</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getLeft</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">left</span><span class="s0">};</span><span class="s1">f</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getRight</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">right</span><span class="s0">};</span><span class="s1">f</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getTop</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">top</span><span class="s0">};</span><span class="s1">f</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getBottom</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">bottom</span><span class="s0">};</span><span class="s1">f</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">isConnected</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">isConnected</span><span class="s0">};</span><span class="s1">f</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">add</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">==</span><span class="s4">null</span><span class="s0">&amp;&amp;</span><span class="s1">r</span><span class="s0">==</span><span class="s4">null</span><span class="s0">){</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">t</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">==</span><span class="s4">null</span><span class="s0">){</span><span class="s4">throw</span><span class="s2">&quot;Graph has no graph mgr!&quot;</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getNodes</span><span class="s0">().</span><span class="s1">indexOf</span><span class="s0">(</span><span class="s1">i</span><span class="s0">)&gt;-</span><span class="s3">1</span><span class="s0">){</span><span class="s4">throw</span><span class="s2">&quot;Node already in graph!&quot;</span><span class="s0">}</span><span class="s1">i</span><span class="s0">.</span><span class="s1">owner</span><span class="s0">=</span><span class="s4">this</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getNodes</span><span class="s0">().</span><span class="s1">push</span><span class="s0">(</span><span class="s1">i</span><span class="s0">);</span><span class="s4">return </span><span class="s1">i</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">t</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(!(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getNodes</span><span class="s0">().</span><span class="s1">indexOf</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)&gt;-</span><span class="s3">1</span><span class="s0">&amp;&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getNodes</span><span class="s0">().</span><span class="s1">indexOf</span><span class="s0">(</span><span class="s1">r</span><span class="s0">)&gt;-</span><span class="s3">1</span><span class="s0">)){</span><span class="s4">throw</span><span class="s2">&quot;Source or target not in graph!&quot;</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(!(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">owner</span><span class="s0">==</span><span class="s1">r</span><span class="s0">.</span><span class="s1">owner</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">owner</span><span class="s0">==</span><span class="s4">this</span><span class="s0">)){</span><span class="s4">throw</span><span class="s2">&quot;Both owners must be this graph!&quot;</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">owner</span><span class="s0">!=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">owner</span><span class="s0">){</span><span class="s4">return null</span><span class="s0">}</span><span class="s1">n</span><span class="s0">.</span><span class="s1">source</span><span class="s0">=</span><span class="s1">e</span><span class="s0">;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">target</span><span class="s0">=</span><span class="s1">r</span><span class="s0">;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">isInterGraph</span><span class="s0">=</span><span class="s4">false</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getEdges</span><span class="s0">().</span><span class="s1">push</span><span class="s0">(</span><span class="s1">n</span><span class="s0">);</span><span class="s1">e</span><span class="s0">.</span><span class="s1">edges</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">n</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">!=</span><span class="s1">e</span><span class="s0">){</span><span class="s1">r</span><span class="s0">.</span><span class="s1">edges</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">n</span><span class="s0">)}</span><span class="s4">return </span><span class="s1">n</span><span class="s0">}};</span><span class="s1">f</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">remove</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s1">t</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t </span><span class="s4">instanceof </span><span class="s1">s</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">==</span><span class="s4">null</span><span class="s0">){</span><span class="s4">throw</span><span class="s2">&quot;Node is null!&quot;</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(!(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">owner</span><span class="s0">!=</span><span class="s4">null</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">owner</span><span class="s0">==</span><span class="s4">this</span><span class="s0">)){</span><span class="s4">throw</span><span class="s2">&quot;Owner graph is invalid!&quot;</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">==</span><span class="s4">null</span><span class="s0">){</span><span class="s4">throw</span><span class="s2">&quot;Owner graph manager is invalid!&quot;</span><span class="s0">}</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">edges</span><span class="s0">.</span><span class="s1">slice</span><span class="s0">();</span><span class="s4">var </span><span class="s1">i</span><span class="s0">;</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">o</span><span class="s0">&lt;</span><span class="s1">n</span><span class="s0">;</span><span class="s1">o</span><span class="s0">++){</span><span class="s1">i</span><span class="s0">=</span><span class="s1">r</span><span class="s0">[</span><span class="s1">o</span><span class="s0">];</span><span class="s4">if</span><span class="s0">(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">isInterGraph</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">remove</span><span class="s0">(</span><span class="s1">i</span><span class="s0">)}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">i</span><span class="s0">.</span><span class="s1">source</span><span class="s0">.</span><span class="s1">owner</span><span class="s0">.</span><span class="s1">remove</span><span class="s0">(</span><span class="s1">i</span><span class="s0">)}}</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">nodes</span><span class="s0">.</span><span class="s1">indexOf</span><span class="s0">(</span><span class="s1">e</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">a</span><span class="s0">==-</span><span class="s3">1</span><span class="s0">){</span><span class="s4">throw</span><span class="s2">&quot;Node not in owner node list!&quot;</span><span class="s0">}</span><span class="s4">this</span><span class="s0">.</span><span class="s1">nodes</span><span class="s0">.</span><span class="s1">splice</span><span class="s0">(</span><span class="s1">a</span><span class="s0">,</span><span class="s3">1</span><span class="s0">)}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">t </span><span class="s4">instanceof </span><span class="s1">h</span><span class="s0">){</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">t</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">i</span><span class="s0">==</span><span class="s4">null</span><span class="s0">){</span><span class="s4">throw</span><span class="s2">&quot;Edge is null!&quot;</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(!(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">source</span><span class="s0">!=</span><span class="s4">null</span><span class="s0">&amp;&amp;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">target</span><span class="s0">!=</span><span class="s4">null</span><span class="s0">)){</span><span class="s4">throw</span><span class="s2">&quot;Source and/or target is null!&quot;</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(!(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">source</span><span class="s0">.</span><span class="s1">owner</span><span class="s0">!=</span><span class="s4">null</span><span class="s0">&amp;&amp;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">target</span><span class="s0">.</span><span class="s1">owner</span><span class="s0">!=</span><span class="s4">null</span><span class="s0">&amp;&amp;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">source</span><span class="s0">.</span><span class="s1">owner</span><span class="s0">==</span><span class="s4">this</span><span class="s0">&amp;&amp;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">target</span><span class="s0">.</span><span class="s1">owner</span><span class="s0">==</span><span class="s4">this</span><span class="s0">)){</span><span class="s4">throw</span><span class="s2">&quot;Source and/or target owner is invalid!&quot;</span><span class="s0">}</span><span class="s4">var </span><span class="s1">l</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">source</span><span class="s0">.</span><span class="s1">edges</span><span class="s0">.</span><span class="s1">indexOf</span><span class="s0">(</span><span class="s1">i</span><span class="s0">);</span><span class="s4">var </span><span class="s1">c</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">target</span><span class="s0">.</span><span class="s1">edges</span><span class="s0">.</span><span class="s1">indexOf</span><span class="s0">(</span><span class="s1">i</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(!(</span><span class="s1">l</span><span class="s0">&gt;-</span><span class="s3">1</span><span class="s0">&amp;&amp;</span><span class="s1">c</span><span class="s0">&gt;-</span><span class="s3">1</span><span class="s0">)){</span><span class="s4">throw</span><span class="s2">&quot;Source and/or target doesn't know this edge!&quot;</span><span class="s0">}</span><span class="s1">i</span><span class="s0">.</span><span class="s1">source</span><span class="s0">.</span><span class="s1">edges</span><span class="s0">.</span><span class="s1">splice</span><span class="s0">(</span><span class="s1">l</span><span class="s0">,</span><span class="s3">1</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">target</span><span class="s0">!=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">source</span><span class="s0">){</span><span class="s1">i</span><span class="s0">.</span><span class="s1">target</span><span class="s0">.</span><span class="s1">edges</span><span class="s0">.</span><span class="s1">splice</span><span class="s0">(</span><span class="s1">c</span><span class="s0">,</span><span class="s3">1</span><span class="s0">)}</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">source</span><span class="s0">.</span><span class="s1">owner</span><span class="s0">.</span><span class="s1">getEdges</span><span class="s0">().</span><span class="s1">indexOf</span><span class="s0">(</span><span class="s1">i</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">a</span><span class="s0">==-</span><span class="s3">1</span><span class="s0">){</span><span class="s4">throw</span><span class="s2">&quot;Not in owner's edge list!&quot;</span><span class="s0">}</span><span class="s1">i</span><span class="s0">.</span><span class="s1">source</span><span class="s0">.</span><span class="s1">owner</span><span class="s0">.</span><span class="s1">getEdges</span><span class="s0">().</span><span class="s1">splice</span><span class="s0">(</span><span class="s1">a</span><span class="s0">,</span><span class="s3">1</span><span class="s0">)}};</span><span class="s1">f</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">updateLeftTop</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">var </span><span class="s1">t</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">MAX_VALUE</span><span class="s0">;</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">MAX_VALUE</span><span class="s0">;</span><span class="s4">var </span><span class="s1">r</span><span class="s0">;</span><span class="s4">var </span><span class="s1">i</span><span class="s0">;</span><span class="s4">var </span><span class="s1">o</span><span class="s0">;</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getNodes</span><span class="s0">();</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s1">a</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">h</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">h</span><span class="s0">&lt;</span><span class="s1">s</span><span class="s0">;</span><span class="s1">h</span><span class="s0">++){</span><span class="s4">var </span><span class="s1">l</span><span class="s0">=</span><span class="s1">a</span><span class="s0">[</span><span class="s1">h</span><span class="s0">];</span><span class="s1">r</span><span class="s0">=</span><span class="s1">l</span><span class="s0">.</span><span class="s1">getTop</span><span class="s0">();</span><span class="s1">i</span><span class="s0">=</span><span class="s1">l</span><span class="s0">.</span><span class="s1">getLeft</span><span class="s0">();</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">&gt;</span><span class="s1">r</span><span class="s0">){</span><span class="s1">t</span><span class="s0">=</span><span class="s1">r</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">&gt;</span><span class="s1">i</span><span class="s0">){</span><span class="s1">e</span><span class="s0">=</span><span class="s1">i</span><span class="s0">}}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">==</span><span class="s1">n</span><span class="s0">.</span><span class="s1">MAX_VALUE</span><span class="s0">){</span><span class="s4">return null</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">a</span><span class="s0">[</span><span class="s3">0</span><span class="s0">].</span><span class="s1">getParent</span><span class="s0">().</span><span class="s1">paddingLeft</span><span class="s0">!=</span><span class="s1">undefined</span><span class="s0">){</span><span class="s1">o</span><span class="s0">=</span><span class="s1">a</span><span class="s0">[</span><span class="s3">0</span><span class="s0">].</span><span class="s1">getParent</span><span class="s0">().</span><span class="s1">paddingLeft</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">o</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">margin</span><span class="s0">}</span><span class="s4">this</span><span class="s0">.</span><span class="s1">left</span><span class="s0">=</span><span class="s1">e</span><span class="s0">-</span><span class="s1">o</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">top</span><span class="s0">=</span><span class="s1">t</span><span class="s0">-</span><span class="s1">o</span><span class="s0">;</span><span class="s4">return new </span><span class="s1">c</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">left</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">top</span><span class="s0">)};</span><span class="s1">f</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">updateBounds</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">MAX_VALUE</span><span class="s0">;</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=-</span><span class="s1">n</span><span class="s0">.</span><span class="s1">MAX_VALUE</span><span class="s0">;</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">MAX_VALUE</span><span class="s0">;</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=-</span><span class="s1">n</span><span class="s0">.</span><span class="s1">MAX_VALUE</span><span class="s0">;</span><span class="s4">var </span><span class="s1">a</span><span class="s0">;</span><span class="s4">var </span><span class="s1">s</span><span class="s0">;</span><span class="s4">var </span><span class="s1">h</span><span class="s0">;</span><span class="s4">var </span><span class="s1">c</span><span class="s0">;</span><span class="s4">var </span><span class="s1">d</span><span class="s0">;</span><span class="s4">var </span><span class="s1">f</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">nodes</span><span class="s0">;</span><span class="s4">var </span><span class="s1">g</span><span class="s0">=</span><span class="s1">f</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">u</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">u</span><span class="s0">&lt;</span><span class="s1">g</span><span class="s0">;</span><span class="s1">u</span><span class="s0">++){</span><span class="s4">var </span><span class="s1">p</span><span class="s0">=</span><span class="s1">f</span><span class="s0">[</span><span class="s1">u</span><span class="s0">];</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">&amp;&amp;</span><span class="s1">p</span><span class="s0">.</span><span class="s1">child</span><span class="s0">!=</span><span class="s4">null</span><span class="s0">){</span><span class="s1">p</span><span class="s0">.</span><span class="s1">updateBounds</span><span class="s0">()}</span><span class="s1">a</span><span class="s0">=</span><span class="s1">p</span><span class="s0">.</span><span class="s1">getLeft</span><span class="s0">();</span><span class="s1">s</span><span class="s0">=</span><span class="s1">p</span><span class="s0">.</span><span class="s1">getRight</span><span class="s0">();</span><span class="s1">h</span><span class="s0">=</span><span class="s1">p</span><span class="s0">.</span><span class="s1">getTop</span><span class="s0">();</span><span class="s1">c</span><span class="s0">=</span><span class="s1">p</span><span class="s0">.</span><span class="s1">getBottom</span><span class="s0">();</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">&gt;</span><span class="s1">a</span><span class="s0">){</span><span class="s1">e</span><span class="s0">=</span><span class="s1">a</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">&lt;</span><span class="s1">s</span><span class="s0">){</span><span class="s1">r</span><span class="s0">=</span><span class="s1">s</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">i</span><span class="s0">&gt;</span><span class="s1">h</span><span class="s0">){</span><span class="s1">i</span><span class="s0">=</span><span class="s1">h</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">o</span><span class="s0">&lt;</span><span class="s1">c</span><span class="s0">){</span><span class="s1">o</span><span class="s0">=</span><span class="s1">c</span><span class="s0">}}</span><span class="s4">var </span><span class="s1">v</span><span class="s0">=</span><span class="s4">new </span><span class="s1">l</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">r</span><span class="s0">-</span><span class="s1">e</span><span class="s0">,</span><span class="s1">o</span><span class="s0">-</span><span class="s1">i</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">==</span><span class="s1">n</span><span class="s0">.</span><span class="s1">MAX_VALUE</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">left</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">parent</span><span class="s0">.</span><span class="s1">getLeft</span><span class="s0">();</span><span class="s4">this</span><span class="s0">.</span><span class="s1">right</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">parent</span><span class="s0">.</span><span class="s1">getRight</span><span class="s0">();</span><span class="s4">this</span><span class="s0">.</span><span class="s1">top</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">parent</span><span class="s0">.</span><span class="s1">getTop</span><span class="s0">();</span><span class="s4">this</span><span class="s0">.</span><span class="s1">bottom</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">parent</span><span class="s0">.</span><span class="s1">getBottom</span><span class="s0">()}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">f</span><span class="s0">[</span><span class="s3">0</span><span class="s0">].</span><span class="s1">getParent</span><span class="s0">().</span><span class="s1">paddingLeft</span><span class="s0">!=</span><span class="s1">undefined</span><span class="s0">){</span><span class="s1">d</span><span class="s0">=</span><span class="s1">f</span><span class="s0">[</span><span class="s3">0</span><span class="s0">].</span><span class="s1">getParent</span><span class="s0">().</span><span class="s1">paddingLeft</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">d</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">margin</span><span class="s0">}</span><span class="s4">this</span><span class="s0">.</span><span class="s1">left</span><span class="s0">=</span><span class="s1">v</span><span class="s0">.</span><span class="s1">x</span><span class="s0">-</span><span class="s1">d</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">right</span><span class="s0">=</span><span class="s1">v</span><span class="s0">.</span><span class="s1">x</span><span class="s0">+</span><span class="s1">v</span><span class="s0">.</span><span class="s1">width</span><span class="s0">+</span><span class="s1">d</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">top</span><span class="s0">=</span><span class="s1">v</span><span class="s0">.</span><span class="s1">y</span><span class="s0">-</span><span class="s1">d</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">bottom</span><span class="s0">=</span><span class="s1">v</span><span class="s0">.</span><span class="s1">y</span><span class="s0">+</span><span class="s1">v</span><span class="s0">.</span><span class="s1">height</span><span class="s0">+</span><span class="s1">d</span><span class="s0">};</span><span class="s1">f</span><span class="s0">.</span><span class="s1">calculateBounds</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">MAX_VALUE</span><span class="s0">;</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=-</span><span class="s1">n</span><span class="s0">.</span><span class="s1">MAX_VALUE</span><span class="s0">;</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">MAX_VALUE</span><span class="s0">;</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=-</span><span class="s1">n</span><span class="s0">.</span><span class="s1">MAX_VALUE</span><span class="s0">;</span><span class="s4">var </span><span class="s1">a</span><span class="s0">;</span><span class="s4">var </span><span class="s1">s</span><span class="s0">;</span><span class="s4">var </span><span class="s1">h</span><span class="s0">;</span><span class="s4">var </span><span class="s1">c</span><span class="s0">;</span><span class="s4">var </span><span class="s1">d</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">f</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">f</span><span class="s0">&lt;</span><span class="s1">d</span><span class="s0">;</span><span class="s1">f</span><span class="s0">++){</span><span class="s4">var </span><span class="s1">g</span><span class="s0">=</span><span class="s1">t</span><span class="s0">[</span><span class="s1">f</span><span class="s0">];</span><span class="s1">a</span><span class="s0">=</span><span class="s1">g</span><span class="s0">.</span><span class="s1">getLeft</span><span class="s0">();</span><span class="s1">s</span><span class="s0">=</span><span class="s1">g</span><span class="s0">.</span><span class="s1">getRight</span><span class="s0">();</span><span class="s1">h</span><span class="s0">=</span><span class="s1">g</span><span class="s0">.</span><span class="s1">getTop</span><span class="s0">();</span><span class="s1">c</span><span class="s0">=</span><span class="s1">g</span><span class="s0">.</span><span class="s1">getBottom</span><span class="s0">();</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">&gt;</span><span class="s1">a</span><span class="s0">){</span><span class="s1">e</span><span class="s0">=</span><span class="s1">a</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">&lt;</span><span class="s1">s</span><span class="s0">){</span><span class="s1">r</span><span class="s0">=</span><span class="s1">s</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">i</span><span class="s0">&gt;</span><span class="s1">h</span><span class="s0">){</span><span class="s1">i</span><span class="s0">=</span><span class="s1">h</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">o</span><span class="s0">&lt;</span><span class="s1">c</span><span class="s0">){</span><span class="s1">o</span><span class="s0">=</span><span class="s1">c</span><span class="s0">}}</span><span class="s4">var </span><span class="s1">u</span><span class="s0">=</span><span class="s4">new </span><span class="s1">l</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">r</span><span class="s0">-</span><span class="s1">e</span><span class="s0">,</span><span class="s1">o</span><span class="s0">-</span><span class="s1">i</span><span class="s0">);</span><span class="s4">return </span><span class="s1">u</span><span class="s0">};</span><span class="s1">f</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getInclusionTreeDepth</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">==</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">getRoot</span><span class="s0">()){</span><span class="s4">return </span><span class="s3">1</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">parent</span><span class="s0">.</span><span class="s1">getInclusionTreeDepth</span><span class="s0">()}};</span><span class="s1">f</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getEstimatedSize</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">estimatedSize</span><span class="s0">==</span><span class="s1">n</span><span class="s0">.</span><span class="s1">MIN_VALUE</span><span class="s0">){</span><span class="s4">throw</span><span class="s2">&quot;assert failed&quot;</span><span class="s0">}</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">estimatedSize</span><span class="s0">};</span><span class="s1">f</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">calcEstimatedSize</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">var </span><span class="s1">t</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">nodes</span><span class="s0">;</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">i</span><span class="s0">&lt;</span><span class="s1">r</span><span class="s0">;</span><span class="s1">i</span><span class="s0">++){</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">i</span><span class="s0">];</span><span class="s1">t</span><span class="s0">+=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">calcEstimatedSize</span><span class="s0">()}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">==</span><span class="s3">0</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">estimatedSize</span><span class="s0">=</span><span class="s1">o</span><span class="s0">.</span><span class="s1">EMPTY_COMPOUND_NODE_SIZE</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">this</span><span class="s0">.</span><span class="s1">estimatedSize</span><span class="s0">=</span><span class="s1">t</span><span class="s0">/</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">sqrt</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">nodes</span><span class="s0">.</span><span class="s1">length</span><span class="s0">)}</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">estimatedSize</span><span class="s0">};</span><span class="s1">f</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">updateConnected</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">var </span><span class="s1">t</span><span class="s0">=</span><span class="s4">this</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">nodes</span><span class="s0">.</span><span class="s1">length</span><span class="s0">==</span><span class="s3">0</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">isConnected</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s4">return</span><span class="s0">}</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s4">new </span><span class="s1">d</span><span class="s0">;</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Set</span><span class="s0">;</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">nodes</span><span class="s0">[</span><span class="s3">0</span><span class="s0">];</span><span class="s4">var </span><span class="s1">n</span><span class="s0">;</span><span class="s4">var </span><span class="s1">o</span><span class="s0">;</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">withChildren</span><span class="s0">();</span><span class="s1">a</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s1">e</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">t</span><span class="s0">);</span><span class="s1">r</span><span class="s0">.</span><span class="s1">add</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)}));</span><span class="s4">while</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">!==</span><span class="s3">0</span><span class="s0">){</span><span class="s1">i</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">shift</span><span class="s0">();</span><span class="s1">n</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">getEdges</span><span class="s0">();</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">h</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">h</span><span class="s0">&lt;</span><span class="s1">s</span><span class="s0">;</span><span class="s1">h</span><span class="s0">++){</span><span class="s4">var </span><span class="s1">l</span><span class="s0">=</span><span class="s1">n</span><span class="s0">[</span><span class="s1">h</span><span class="s0">];</span><span class="s1">o</span><span class="s0">=</span><span class="s1">l</span><span class="s0">.</span><span class="s1">getOtherEndInGraph</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s4">this</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">o</span><span class="s0">!=</span><span class="s4">null</span><span class="s0">&amp;&amp;!</span><span class="s1">r</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">o</span><span class="s0">)){</span><span class="s4">var </span><span class="s1">c</span><span class="s0">=</span><span class="s1">o</span><span class="s0">.</span><span class="s1">withChildren</span><span class="s0">();</span><span class="s1">c</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s1">e</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">t</span><span class="s0">);</span><span class="s1">r</span><span class="s0">.</span><span class="s1">add</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)}))}}}</span><span class="s4">this</span><span class="s0">.</span><span class="s1">isConnected</span><span class="s0">=</span><span class="s4">false</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">size</span><span class="s0">&gt;=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">nodes</span><span class="s0">.</span><span class="s1">length</span><span class="s0">){</span><span class="s4">var </span><span class="s1">f</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">r</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">owner</span><span class="s0">==</span><span class="s1">t</span><span class="s0">){</span><span class="s1">f</span><span class="s0">++}}));</span><span class="s4">if</span><span class="s0">(</span><span class="s1">f</span><span class="s0">==</span><span class="s4">this</span><span class="s0">.</span><span class="s1">nodes</span><span class="s0">.</span><span class="s1">length</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">isConnected</span><span class="s0">=</span><span class="s4">true</span><span class="s0">}}};</span><span class="s1">t</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">=</span><span class="s1">f</span><span class="s0">},</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s2">&quot;use strict&quot;</span><span class="s0">;</span><span class="s4">var </span><span class="s1">i</span><span class="s0">;</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">1</span><span class="s0">);</span><span class="s4">function </span><span class="s1">o</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s1">i</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">6</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">layout</span><span class="s0">=</span><span class="s1">t</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphs</span><span class="s0">=[];</span><span class="s4">this</span><span class="s0">.</span><span class="s1">edges</span><span class="s0">=[]}</span><span class="s1">o</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">addRoot</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">var </span><span class="s1">t</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">layout</span><span class="s0">.</span><span class="s1">newGraph</span><span class="s0">();</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">layout</span><span class="s0">.</span><span class="s1">newNode</span><span class="s0">(</span><span class="s4">null</span><span class="s0">);</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">add</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">setRootGraph</span><span class="s0">(</span><span class="s1">r</span><span class="s0">);</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">rootGraph</span><span class="s0">};</span><span class="s1">o</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">add</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">n</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">==</span><span class="s4">null</span><span class="s0">&amp;&amp;</span><span class="s1">i</span><span class="s0">==</span><span class="s4">null</span><span class="s0">&amp;&amp;</span><span class="s1">n</span><span class="s0">==</span><span class="s4">null</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">==</span><span class="s4">null</span><span class="s0">){</span><span class="s4">throw</span><span class="s2">&quot;Graph is null!&quot;</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">==</span><span class="s4">null</span><span class="s0">){</span><span class="s4">throw</span><span class="s2">&quot;Parent node is null!&quot;</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphs</span><span class="s0">.</span><span class="s1">indexOf</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)&gt;-</span><span class="s3">1</span><span class="s0">){</span><span class="s4">throw</span><span class="s2">&quot;Graph already in this graph mgr!&quot;</span><span class="s0">}</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphs</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">t</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">parent</span><span class="s0">!=</span><span class="s4">null</span><span class="s0">){</span><span class="s4">throw</span><span class="s2">&quot;Already has a parent!&quot;</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">child</span><span class="s0">!=</span><span class="s4">null</span><span class="s0">){</span><span class="s4">throw</span><span class="s2">&quot;Already has a child!&quot;</span><span class="s0">}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">parent</span><span class="s0">=</span><span class="s1">e</span><span class="s0">;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">child</span><span class="s0">=</span><span class="s1">t</span><span class="s0">;</span><span class="s4">return </span><span class="s1">t</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">n</span><span class="s0">=</span><span class="s1">r</span><span class="s0">;</span><span class="s1">i</span><span class="s0">=</span><span class="s1">e</span><span class="s0">;</span><span class="s1">r</span><span class="s0">=</span><span class="s1">t</span><span class="s0">;</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">getOwner</span><span class="s0">();</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">getOwner</span><span class="s0">();</span><span class="s4">if</span><span class="s0">(!(</span><span class="s1">o</span><span class="s0">!=</span><span class="s4">null</span><span class="s0">&amp;&amp;</span><span class="s1">o</span><span class="s0">.</span><span class="s1">getGraphManager</span><span class="s0">()==</span><span class="s4">this</span><span class="s0">)){</span><span class="s4">throw</span><span class="s2">&quot;Source not in this graph mgr!&quot;</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(!(</span><span class="s1">a</span><span class="s0">!=</span><span class="s4">null</span><span class="s0">&amp;&amp;</span><span class="s1">a</span><span class="s0">.</span><span class="s1">getGraphManager</span><span class="s0">()==</span><span class="s4">this</span><span class="s0">)){</span><span class="s4">throw</span><span class="s2">&quot;Target not in this graph mgr!&quot;</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">o</span><span class="s0">==</span><span class="s1">a</span><span class="s0">){</span><span class="s1">r</span><span class="s0">.</span><span class="s1">isInterGraph</span><span class="s0">=</span><span class="s4">false</span><span class="s0">;</span><span class="s4">return </span><span class="s1">o</span><span class="s0">.</span><span class="s1">add</span><span class="s0">(</span><span class="s1">r</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">n</span><span class="s0">)}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">r</span><span class="s0">.</span><span class="s1">isInterGraph</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s1">r</span><span class="s0">.</span><span class="s1">source</span><span class="s0">=</span><span class="s1">i</span><span class="s0">;</span><span class="s1">r</span><span class="s0">.</span><span class="s1">target</span><span class="s0">=</span><span class="s1">n</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">edges</span><span class="s0">.</span><span class="s1">indexOf</span><span class="s0">(</span><span class="s1">r</span><span class="s0">)&gt;-</span><span class="s3">1</span><span class="s0">){</span><span class="s4">throw</span><span class="s2">&quot;Edge already in inter-graph edge list!&quot;</span><span class="s0">}</span><span class="s4">this</span><span class="s0">.</span><span class="s1">edges</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">r</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(!(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">source</span><span class="s0">!=</span><span class="s4">null</span><span class="s0">&amp;&amp;</span><span class="s1">r</span><span class="s0">.</span><span class="s1">target</span><span class="s0">!=</span><span class="s4">null</span><span class="s0">)){</span><span class="s4">throw</span><span class="s2">&quot;Edge source and/or target is null!&quot;</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(!(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">source</span><span class="s0">.</span><span class="s1">edges</span><span class="s0">.</span><span class="s1">indexOf</span><span class="s0">(</span><span class="s1">r</span><span class="s0">)==-</span><span class="s3">1</span><span class="s0">&amp;&amp;</span><span class="s1">r</span><span class="s0">.</span><span class="s1">target</span><span class="s0">.</span><span class="s1">edges</span><span class="s0">.</span><span class="s1">indexOf</span><span class="s0">(</span><span class="s1">r</span><span class="s0">)==-</span><span class="s3">1</span><span class="s0">)){</span><span class="s4">throw</span><span class="s2">&quot;Edge already in source and/or target incidency list!&quot;</span><span class="s0">}</span><span class="s1">r</span><span class="s0">.</span><span class="s1">source</span><span class="s0">.</span><span class="s1">edges</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">r</span><span class="s0">);</span><span class="s1">r</span><span class="s0">.</span><span class="s1">target</span><span class="s0">.</span><span class="s1">edges</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">r</span><span class="s0">);</span><span class="s4">return </span><span class="s1">r</span><span class="s0">}}};</span><span class="s1">o</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">remove</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t </span><span class="s4">instanceof </span><span class="s1">i</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s1">t</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getGraphManager</span><span class="s0">()!=</span><span class="s4">this</span><span class="s0">){</span><span class="s4">throw</span><span class="s2">&quot;Graph not in this graph mgr&quot;</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(!(</span><span class="s1">e</span><span class="s0">==</span><span class="s4">this</span><span class="s0">.</span><span class="s1">rootGraph</span><span class="s0">||</span><span class="s1">e</span><span class="s0">.</span><span class="s1">parent</span><span class="s0">!=</span><span class="s4">null</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">parent</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">==</span><span class="s4">this</span><span class="s0">)){</span><span class="s4">throw</span><span class="s2">&quot;Invalid parent node!&quot;</span><span class="s0">}</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=[];</span><span class="s1">r</span><span class="s0">=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">concat</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getEdges</span><span class="s0">());</span><span class="s4">var </span><span class="s1">o</span><span class="s0">;</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">s</span><span class="s0">&lt;</span><span class="s1">a</span><span class="s0">;</span><span class="s1">s</span><span class="s0">++){</span><span class="s1">o</span><span class="s0">=</span><span class="s1">r</span><span class="s0">[</span><span class="s1">s</span><span class="s0">];</span><span class="s1">e</span><span class="s0">.</span><span class="s1">remove</span><span class="s0">(</span><span class="s1">o</span><span class="s0">)}</span><span class="s4">var </span><span class="s1">h</span><span class="s0">=[];</span><span class="s1">h</span><span class="s0">=</span><span class="s1">h</span><span class="s0">.</span><span class="s1">concat</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getNodes</span><span class="s0">());</span><span class="s4">var </span><span class="s1">l</span><span class="s0">;</span><span class="s1">a</span><span class="s0">=</span><span class="s1">h</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">s</span><span class="s0">&lt;</span><span class="s1">a</span><span class="s0">;</span><span class="s1">s</span><span class="s0">++){</span><span class="s1">l</span><span class="s0">=</span><span class="s1">h</span><span class="s0">[</span><span class="s1">s</span><span class="s0">];</span><span class="s1">e</span><span class="s0">.</span><span class="s1">remove</span><span class="s0">(</span><span class="s1">l</span><span class="s0">)}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">==</span><span class="s4">this</span><span class="s0">.</span><span class="s1">rootGraph</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">setRootGraph</span><span class="s0">(</span><span class="s4">null</span><span class="s0">)}</span><span class="s4">var </span><span class="s1">c</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphs</span><span class="s0">.</span><span class="s1">indexOf</span><span class="s0">(</span><span class="s1">e</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphs</span><span class="s0">.</span><span class="s1">splice</span><span class="s0">(</span><span class="s1">c</span><span class="s0">,</span><span class="s3">1</span><span class="s0">);</span><span class="s1">e</span><span class="s0">.</span><span class="s1">parent</span><span class="s0">=</span><span class="s4">null</span><span class="s0">}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">t </span><span class="s4">instanceof </span><span class="s1">n</span><span class="s0">){</span><span class="s1">o</span><span class="s0">=</span><span class="s1">t</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">o</span><span class="s0">==</span><span class="s4">null</span><span class="s0">){</span><span class="s4">throw</span><span class="s2">&quot;Edge is null!&quot;</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">o</span><span class="s0">.</span><span class="s1">isInterGraph</span><span class="s0">){</span><span class="s4">throw</span><span class="s2">&quot;Not an inter-graph edge!&quot;</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(!(</span><span class="s1">o</span><span class="s0">.</span><span class="s1">source</span><span class="s0">!=</span><span class="s4">null</span><span class="s0">&amp;&amp;</span><span class="s1">o</span><span class="s0">.</span><span class="s1">target</span><span class="s0">!=</span><span class="s4">null</span><span class="s0">)){</span><span class="s4">throw</span><span class="s2">&quot;Source and/or target is null!&quot;</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(!(</span><span class="s1">o</span><span class="s0">.</span><span class="s1">source</span><span class="s0">.</span><span class="s1">edges</span><span class="s0">.</span><span class="s1">indexOf</span><span class="s0">(</span><span class="s1">o</span><span class="s0">)!=-</span><span class="s3">1</span><span class="s0">&amp;&amp;</span><span class="s1">o</span><span class="s0">.</span><span class="s1">target</span><span class="s0">.</span><span class="s1">edges</span><span class="s0">.</span><span class="s1">indexOf</span><span class="s0">(</span><span class="s1">o</span><span class="s0">)!=-</span><span class="s3">1</span><span class="s0">)){</span><span class="s4">throw</span><span class="s2">&quot;Source and/or target doesn't know this edge!&quot;</span><span class="s0">}</span><span class="s4">var </span><span class="s1">c</span><span class="s0">=</span><span class="s1">o</span><span class="s0">.</span><span class="s1">source</span><span class="s0">.</span><span class="s1">edges</span><span class="s0">.</span><span class="s1">indexOf</span><span class="s0">(</span><span class="s1">o</span><span class="s0">);</span><span class="s1">o</span><span class="s0">.</span><span class="s1">source</span><span class="s0">.</span><span class="s1">edges</span><span class="s0">.</span><span class="s1">splice</span><span class="s0">(</span><span class="s1">c</span><span class="s0">,</span><span class="s3">1</span><span class="s0">);</span><span class="s1">c</span><span class="s0">=</span><span class="s1">o</span><span class="s0">.</span><span class="s1">target</span><span class="s0">.</span><span class="s1">edges</span><span class="s0">.</span><span class="s1">indexOf</span><span class="s0">(</span><span class="s1">o</span><span class="s0">);</span><span class="s1">o</span><span class="s0">.</span><span class="s1">target</span><span class="s0">.</span><span class="s1">edges</span><span class="s0">.</span><span class="s1">splice</span><span class="s0">(</span><span class="s1">c</span><span class="s0">,</span><span class="s3">1</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(!(</span><span class="s1">o</span><span class="s0">.</span><span class="s1">source</span><span class="s0">.</span><span class="s1">owner</span><span class="s0">!=</span><span class="s4">null</span><span class="s0">&amp;&amp;</span><span class="s1">o</span><span class="s0">.</span><span class="s1">source</span><span class="s0">.</span><span class="s1">owner</span><span class="s0">.</span><span class="s1">getGraphManager</span><span class="s0">()!=</span><span class="s4">null</span><span class="s0">)){</span><span class="s4">throw</span><span class="s2">&quot;Edge owner graph or owner graph manager is null!&quot;</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">o</span><span class="s0">.</span><span class="s1">source</span><span class="s0">.</span><span class="s1">owner</span><span class="s0">.</span><span class="s1">getGraphManager</span><span class="s0">().</span><span class="s1">edges</span><span class="s0">.</span><span class="s1">indexOf</span><span class="s0">(</span><span class="s1">o</span><span class="s0">)==-</span><span class="s3">1</span><span class="s0">){</span><span class="s4">throw</span><span class="s2">&quot;Not in owner graph manager's edge list!&quot;</span><span class="s0">}</span><span class="s4">var </span><span class="s1">c</span><span class="s0">=</span><span class="s1">o</span><span class="s0">.</span><span class="s1">source</span><span class="s0">.</span><span class="s1">owner</span><span class="s0">.</span><span class="s1">getGraphManager</span><span class="s0">().</span><span class="s1">edges</span><span class="s0">.</span><span class="s1">indexOf</span><span class="s0">(</span><span class="s1">o</span><span class="s0">);</span><span class="s1">o</span><span class="s0">.</span><span class="s1">source</span><span class="s0">.</span><span class="s1">owner</span><span class="s0">.</span><span class="s1">getGraphManager</span><span class="s0">().</span><span class="s1">edges</span><span class="s0">.</span><span class="s1">splice</span><span class="s0">(</span><span class="s1">c</span><span class="s0">,</span><span class="s3">1</span><span class="s0">)}};</span><span class="s1">o</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">updateBounds</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">rootGraph</span><span class="s0">.</span><span class="s1">updateBounds</span><span class="s0">(</span><span class="s4">true</span><span class="s0">)};</span><span class="s1">o</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getGraphs</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">graphs</span><span class="s0">};</span><span class="s1">o</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getAllNodes</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">allNodes</span><span class="s0">==</span><span class="s4">null</span><span class="s0">){</span><span class="s4">var </span><span class="s1">t</span><span class="s0">=[];</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getGraphs</span><span class="s0">();</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">i</span><span class="s0">&lt;</span><span class="s1">r</span><span class="s0">;</span><span class="s1">i</span><span class="s0">++){</span><span class="s1">t</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">concat</span><span class="s0">(</span><span class="s1">e</span><span class="s0">[</span><span class="s1">i</span><span class="s0">].</span><span class="s1">getNodes</span><span class="s0">())}</span><span class="s4">this</span><span class="s0">.</span><span class="s1">allNodes</span><span class="s0">=</span><span class="s1">t</span><span class="s0">}</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">allNodes</span><span class="s0">};</span><span class="s1">o</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">resetAllNodes</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">allNodes</span><span class="s0">=</span><span class="s4">null</span><span class="s0">};</span><span class="s1">o</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">resetAllEdges</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">allEdges</span><span class="s0">=</span><span class="s4">null</span><span class="s0">};</span><span class="s1">o</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">resetAllNodesToApplyGravitation</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">allNodesToApplyGravitation</span><span class="s0">=</span><span class="s4">null</span><span class="s0">};</span><span class="s1">o</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getAllEdges</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">allEdges</span><span class="s0">==</span><span class="s4">null</span><span class="s0">){</span><span class="s4">var </span><span class="s1">t</span><span class="s0">=[];</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getGraphs</span><span class="s0">();</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">i</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">i</span><span class="s0">++){</span><span class="s1">t</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">concat</span><span class="s0">(</span><span class="s1">e</span><span class="s0">[</span><span class="s1">i</span><span class="s0">].</span><span class="s1">getEdges</span><span class="s0">())}</span><span class="s1">t</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">concat</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">edges</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">allEdges</span><span class="s0">=</span><span class="s1">t</span><span class="s0">}</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">allEdges</span><span class="s0">};</span><span class="s1">o</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getAllNodesToApplyGravitation</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">allNodesToApplyGravitation</span><span class="s0">};</span><span class="s1">o</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">setAllNodesToApplyGravitation</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">allNodesToApplyGravitation</span><span class="s0">!=</span><span class="s4">null</span><span class="s0">){</span><span class="s4">throw</span><span class="s2">&quot;assert failed&quot;</span><span class="s0">}</span><span class="s4">this</span><span class="s0">.</span><span class="s1">allNodesToApplyGravitation</span><span class="s0">=</span><span class="s1">t</span><span class="s0">};</span><span class="s1">o</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getRoot</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">rootGraph</span><span class="s0">};</span><span class="s1">o</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">setRootGraph</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getGraphManager</span><span class="s0">()!=</span><span class="s4">this</span><span class="s0">){</span><span class="s4">throw</span><span class="s2">&quot;Root not in this graph mgr!&quot;</span><span class="s0">}</span><span class="s4">this</span><span class="s0">.</span><span class="s1">rootGraph</span><span class="s0">=</span><span class="s1">t</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">parent</span><span class="s0">==</span><span class="s4">null</span><span class="s0">){</span><span class="s1">t</span><span class="s0">.</span><span class="s1">parent</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">layout</span><span class="s0">.</span><span class="s1">newNode</span><span class="s0">(</span><span class="s2">&quot;Root node&quot;</span><span class="s0">)}};</span><span class="s1">o</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getLayout</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">layout</span><span class="s0">};</span><span class="s1">o</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">isOneAncestorOfOther</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(!(</span><span class="s1">t</span><span class="s0">!=</span><span class="s4">null</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">!=</span><span class="s4">null</span><span class="s0">)){</span><span class="s4">throw</span><span class="s2">&quot;assert failed&quot;</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">==</span><span class="s1">e</span><span class="s0">){</span><span class="s4">return true</span><span class="s0">}</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getOwner</span><span class="s0">();</span><span class="s4">var </span><span class="s1">i</span><span class="s0">;</span><span class="s4">do</span><span class="s0">{</span><span class="s1">i</span><span class="s0">=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">getParent</span><span class="s0">();</span><span class="s4">if</span><span class="s0">(</span><span class="s1">i</span><span class="s0">==</span><span class="s4">null</span><span class="s0">){</span><span class="s4">break</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">i</span><span class="s0">==</span><span class="s1">e</span><span class="s0">){</span><span class="s4">return true</span><span class="s0">}</span><span class="s1">r</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">getOwner</span><span class="s0">();</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">==</span><span class="s4">null</span><span class="s0">){</span><span class="s4">break</span><span class="s0">}}</span><span class="s4">while</span><span class="s0">(</span><span class="s4">true</span><span class="s0">);</span><span class="s1">r</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getOwner</span><span class="s0">();</span><span class="s4">do</span><span class="s0">{</span><span class="s1">i</span><span class="s0">=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">getParent</span><span class="s0">();</span><span class="s4">if</span><span class="s0">(</span><span class="s1">i</span><span class="s0">==</span><span class="s4">null</span><span class="s0">){</span><span class="s4">break</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">i</span><span class="s0">==</span><span class="s1">t</span><span class="s0">){</span><span class="s4">return true</span><span class="s0">}</span><span class="s1">r</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">getOwner</span><span class="s0">();</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">==</span><span class="s4">null</span><span class="s0">){</span><span class="s4">break</span><span class="s0">}}</span><span class="s4">while</span><span class="s0">(</span><span class="s4">true</span><span class="s0">);</span><span class="s4">return false</span><span class="s0">};</span><span class="s1">o</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">calcLowestCommonAncestors</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">var </span><span class="s1">t</span><span class="s0">;</span><span class="s4">var </span><span class="s1">e</span><span class="s0">;</span><span class="s4">var </span><span class="s1">r</span><span class="s0">;</span><span class="s4">var </span><span class="s1">i</span><span class="s0">;</span><span class="s4">var </span><span class="s1">n</span><span class="s0">;</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getAllEdges</span><span class="s0">();</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s1">o</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">s</span><span class="s0">&lt;</span><span class="s1">a</span><span class="s0">;</span><span class="s1">s</span><span class="s0">++){</span><span class="s1">t</span><span class="s0">=</span><span class="s1">o</span><span class="s0">[</span><span class="s1">s</span><span class="s0">];</span><span class="s1">e</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">source</span><span class="s0">;</span><span class="s1">r</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">target</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">lca</span><span class="s0">=</span><span class="s4">null</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">sourceInLca</span><span class="s0">=</span><span class="s1">e</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">targetInLca</span><span class="s0">=</span><span class="s1">r</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">==</span><span class="s1">r</span><span class="s0">){</span><span class="s1">t</span><span class="s0">.</span><span class="s1">lca</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getOwner</span><span class="s0">();</span><span class="s4">continue</span><span class="s0">}</span><span class="s1">i</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getOwner</span><span class="s0">();</span><span class="s4">while</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">lca</span><span class="s0">==</span><span class="s4">null</span><span class="s0">){</span><span class="s1">t</span><span class="s0">.</span><span class="s1">targetInLca</span><span class="s0">=</span><span class="s1">r</span><span class="s0">;</span><span class="s1">n</span><span class="s0">=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">getOwner</span><span class="s0">();</span><span class="s4">while</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">lca</span><span class="s0">==</span><span class="s4">null</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">==</span><span class="s1">i</span><span class="s0">){</span><span class="s1">t</span><span class="s0">.</span><span class="s1">lca</span><span class="s0">=</span><span class="s1">n</span><span class="s0">;</span><span class="s4">break</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">==</span><span class="s4">this</span><span class="s0">.</span><span class="s1">rootGraph</span><span class="s0">){</span><span class="s4">break</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">lca</span><span class="s0">!=</span><span class="s4">null</span><span class="s0">){</span><span class="s4">throw</span><span class="s2">&quot;assert failed&quot;</span><span class="s0">}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">targetInLca</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">getParent</span><span class="s0">();</span><span class="s1">n</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">targetInLca</span><span class="s0">.</span><span class="s1">getOwner</span><span class="s0">()}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">i</span><span class="s0">==</span><span class="s4">this</span><span class="s0">.</span><span class="s1">rootGraph</span><span class="s0">){</span><span class="s4">break</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">lca</span><span class="s0">==</span><span class="s4">null</span><span class="s0">){</span><span class="s1">t</span><span class="s0">.</span><span class="s1">sourceInLca</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">getParent</span><span class="s0">();</span><span class="s1">i</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">sourceInLca</span><span class="s0">.</span><span class="s1">getOwner</span><span class="s0">()}}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">lca</span><span class="s0">==</span><span class="s4">null</span><span class="s0">){</span><span class="s4">throw</span><span class="s2">&quot;assert failed&quot;</span><span class="s0">}}};</span><span class="s1">o</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">calcLowestCommonAncestor</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">==</span><span class="s1">e</span><span class="s0">){</span><span class="s4">return </span><span class="s1">t</span><span class="s0">.</span><span class="s1">getOwner</span><span class="s0">()}</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getOwner</span><span class="s0">();</span><span class="s4">do</span><span class="s0">{</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">==</span><span class="s4">null</span><span class="s0">){</span><span class="s4">break</span><span class="s0">}</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getOwner</span><span class="s0">();</span><span class="s4">do</span><span class="s0">{</span><span class="s4">if</span><span class="s0">(</span><span class="s1">i</span><span class="s0">==</span><span class="s4">null</span><span class="s0">){</span><span class="s4">break</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">i</span><span class="s0">==</span><span class="s1">r</span><span class="s0">){</span><span class="s4">return </span><span class="s1">i</span><span class="s0">}</span><span class="s1">i</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">getParent</span><span class="s0">().</span><span class="s1">getOwner</span><span class="s0">()}</span><span class="s4">while</span><span class="s0">(</span><span class="s4">true</span><span class="s0">);</span><span class="s1">r</span><span class="s0">=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">getParent</span><span class="s0">().</span><span class="s1">getOwner</span><span class="s0">()}</span><span class="s4">while</span><span class="s0">(</span><span class="s4">true</span><span class="s0">);</span><span class="s4">return </span><span class="s1">r</span><span class="s0">};</span><span class="s1">o</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">calcInclusionTreeDepths</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">==</span><span class="s4">null</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">==</span><span class="s4">null</span><span class="s0">){</span><span class="s1">t</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">rootGraph</span><span class="s0">;</span><span class="s1">e</span><span class="s0">=</span><span class="s3">1</span><span class="s0">}</span><span class="s4">var </span><span class="s1">r</span><span class="s0">;</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getNodes</span><span class="s0">();</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">o</span><span class="s0">&lt;</span><span class="s1">n</span><span class="s0">;</span><span class="s1">o</span><span class="s0">++){</span><span class="s1">r</span><span class="s0">=</span><span class="s1">i</span><span class="s0">[</span><span class="s1">o</span><span class="s0">];</span><span class="s1">r</span><span class="s0">.</span><span class="s1">inclusionTreeDepth</span><span class="s0">=</span><span class="s1">e</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">child</span><span class="s0">!=</span><span class="s4">null</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">calcInclusionTreeDepths</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">child</span><span class="s0">,</span><span class="s1">e</span><span class="s0">+</span><span class="s3">1</span><span class="s0">)}}};</span><span class="s1">o</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">includesInvalidEdge</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">var </span><span class="s1">t</span><span class="s0">;</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=[];</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">edges</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">i</span><span class="s0">&lt;</span><span class="s1">r</span><span class="s0">;</span><span class="s1">i</span><span class="s0">++){</span><span class="s1">t</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">edges</span><span class="s0">[</span><span class="s1">i</span><span class="s0">];</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">isOneAncestorOfOther</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">source</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">target</span><span class="s0">)){</span><span class="s1">e</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)}}</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">i</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">i</span><span class="s0">++){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">remove</span><span class="s0">(</span><span class="s1">e</span><span class="s0">[</span><span class="s1">i</span><span class="s0">])}</span><span class="s4">return false</span><span class="s0">};</span><span class="s1">t</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">=</span><span class="s1">o</span><span class="s0">},</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s2">&quot;use strict&quot;</span><span class="s0">;</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">12</span><span class="s0">);</span><span class="s4">function </span><span class="s1">n</span><span class="s0">(){}</span><span class="s1">n</span><span class="s0">.</span><span class="s1">calcSeparationAmount</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">t</span><span class="s0">.</span><span class="s1">intersects</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)){</span><span class="s4">throw</span><span class="s2">&quot;assert failed&quot;</span><span class="s0">}</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Array</span><span class="s0">(</span><span class="s3">2</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">decideDirectionsForOverlappingNodes</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">n</span><span class="s0">);</span><span class="s1">r</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">min</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getRight</span><span class="s0">(),</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getRight</span><span class="s0">())-</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">max</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">x</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">x</span><span class="s0">);</span><span class="s1">r</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">min</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getBottom</span><span class="s0">(),</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getBottom</span><span class="s0">())-</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">max</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">y</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">y</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getX</span><span class="s0">()&lt;=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getX</span><span class="s0">()&amp;&amp;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getRight</span><span class="s0">()&gt;=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getRight</span><span class="s0">()){</span><span class="s1">r</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]+=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">min</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getX</span><span class="s0">()-</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getX</span><span class="s0">(),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getRight</span><span class="s0">()-</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getRight</span><span class="s0">())}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getX</span><span class="s0">()&lt;=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getX</span><span class="s0">()&amp;&amp;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getRight</span><span class="s0">()&gt;=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getRight</span><span class="s0">()){</span><span class="s1">r</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]+=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">min</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getX</span><span class="s0">()-</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getX</span><span class="s0">(),</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getRight</span><span class="s0">()-</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getRight</span><span class="s0">())}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getY</span><span class="s0">()&lt;=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getY</span><span class="s0">()&amp;&amp;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getBottom</span><span class="s0">()&gt;=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getBottom</span><span class="s0">()){</span><span class="s1">r</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]+=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">min</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getY</span><span class="s0">()-</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getY</span><span class="s0">(),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getBottom</span><span class="s0">()-</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getBottom</span><span class="s0">())}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getY</span><span class="s0">()&lt;=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getY</span><span class="s0">()&amp;&amp;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getBottom</span><span class="s0">()&gt;=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getBottom</span><span class="s0">()){</span><span class="s1">r</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]+=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">min</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getY</span><span class="s0">()-</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getY</span><span class="s0">(),</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getBottom</span><span class="s0">()-</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getBottom</span><span class="s0">())}</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">abs</span><span class="s0">((</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getCenterY</span><span class="s0">()-</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getCenterY</span><span class="s0">())/(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getCenterX</span><span class="s0">()-</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getCenterX</span><span class="s0">()));</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getCenterY</span><span class="s0">()===</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getCenterY</span><span class="s0">()&amp;&amp;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getCenterX</span><span class="s0">()===</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getCenterX</span><span class="s0">()){</span><span class="s1">o</span><span class="s0">=</span><span class="s3">1</span><span class="s0">}</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s1">o</span><span class="s0">*</span><span class="s1">r</span><span class="s0">[</span><span class="s3">0</span><span class="s0">];</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s1">r</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]/</span><span class="s1">o</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]&lt;</span><span class="s1">s</span><span class="s0">){</span><span class="s1">s</span><span class="s0">=</span><span class="s1">r</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">a</span><span class="s0">=</span><span class="s1">r</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]}</span><span class="s1">r</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]=-</span><span class="s3">1</span><span class="s0">*</span><span class="s1">n</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]*(</span><span class="s1">s</span><span class="s0">/</span><span class="s3">2</span><span class="s0">+</span><span class="s1">i</span><span class="s0">);</span><span class="s1">r</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]=-</span><span class="s3">1</span><span class="s0">*</span><span class="s1">n</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]*(</span><span class="s1">a</span><span class="s0">/</span><span class="s3">2</span><span class="s0">+</span><span class="s1">i</span><span class="s0">)};</span><span class="s1">n</span><span class="s0">.</span><span class="s1">decideDirectionsForOverlappingNodes</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getCenterX</span><span class="s0">()&lt;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getCenterX</span><span class="s0">()){</span><span class="s1">r</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]=-</span><span class="s3">1</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">r</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]=</span><span class="s3">1</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getCenterY</span><span class="s0">()&lt;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getCenterY</span><span class="s0">()){</span><span class="s1">r</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]=-</span><span class="s3">1</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">r</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]=</span><span class="s3">1</span><span class="s0">}};</span><span class="s1">n</span><span class="s0">.</span><span class="s1">getIntersection2</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getCenterX</span><span class="s0">();</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getCenterY</span><span class="s0">();</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getCenterX</span><span class="s0">();</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getCenterY</span><span class="s0">();</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">intersects</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)){</span><span class="s1">r</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]=</span><span class="s1">i</span><span class="s0">;</span><span class="s1">r</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]=</span><span class="s1">n</span><span class="s0">;</span><span class="s1">r</span><span class="s0">[</span><span class="s3">2</span><span class="s0">]=</span><span class="s1">o</span><span class="s0">;</span><span class="s1">r</span><span class="s0">[</span><span class="s3">3</span><span class="s0">]=</span><span class="s1">a</span><span class="s0">;</span><span class="s4">return true</span><span class="s0">}</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getX</span><span class="s0">();</span><span class="s4">var </span><span class="s1">h</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getY</span><span class="s0">();</span><span class="s4">var </span><span class="s1">l</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getRight</span><span class="s0">();</span><span class="s4">var </span><span class="s1">c</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getX</span><span class="s0">();</span><span class="s4">var </span><span class="s1">d</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getBottom</span><span class="s0">();</span><span class="s4">var </span><span class="s1">f</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getRight</span><span class="s0">();</span><span class="s4">var </span><span class="s1">g</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getWidthHalf</span><span class="s0">();</span><span class="s4">var </span><span class="s1">u</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getHeightHalf</span><span class="s0">();</span><span class="s4">var </span><span class="s1">p</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getX</span><span class="s0">();</span><span class="s4">var </span><span class="s1">v</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getY</span><span class="s0">();</span><span class="s4">var </span><span class="s1">y</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getRight</span><span class="s0">();</span><span class="s4">var </span><span class="s1">m</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getX</span><span class="s0">();</span><span class="s4">var </span><span class="s1">E</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getBottom</span><span class="s0">();</span><span class="s4">var </span><span class="s1">N</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getRight</span><span class="s0">();</span><span class="s4">var </span><span class="s1">T</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getWidthHalf</span><span class="s0">();</span><span class="s4">var </span><span class="s1">A</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getHeightHalf</span><span class="s0">();</span><span class="s4">var </span><span class="s1">w</span><span class="s0">=</span><span class="s4">false</span><span class="s0">;</span><span class="s4">var </span><span class="s1">L</span><span class="s0">=</span><span class="s4">false</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">i</span><span class="s0">===</span><span class="s1">o</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">&gt;</span><span class="s1">a</span><span class="s0">){</span><span class="s1">r</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]=</span><span class="s1">i</span><span class="s0">;</span><span class="s1">r</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]=</span><span class="s1">h</span><span class="s0">;</span><span class="s1">r</span><span class="s0">[</span><span class="s3">2</span><span class="s0">]=</span><span class="s1">o</span><span class="s0">;</span><span class="s1">r</span><span class="s0">[</span><span class="s3">3</span><span class="s0">]=</span><span class="s1">E</span><span class="s0">;</span><span class="s4">return false</span><span class="s0">}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">&lt;</span><span class="s1">a</span><span class="s0">){</span><span class="s1">r</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]=</span><span class="s1">i</span><span class="s0">;</span><span class="s1">r</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]=</span><span class="s1">d</span><span class="s0">;</span><span class="s1">r</span><span class="s0">[</span><span class="s3">2</span><span class="s0">]=</span><span class="s1">o</span><span class="s0">;</span><span class="s1">r</span><span class="s0">[</span><span class="s3">3</span><span class="s0">]=</span><span class="s1">v</span><span class="s0">;</span><span class="s4">return false</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{}}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">===</span><span class="s1">a</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">i</span><span class="s0">&gt;</span><span class="s1">o</span><span class="s0">){</span><span class="s1">r</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]=</span><span class="s1">s</span><span class="s0">;</span><span class="s1">r</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]=</span><span class="s1">n</span><span class="s0">;</span><span class="s1">r</span><span class="s0">[</span><span class="s3">2</span><span class="s0">]=</span><span class="s1">y</span><span class="s0">;</span><span class="s1">r</span><span class="s0">[</span><span class="s3">3</span><span class="s0">]=</span><span class="s1">a</span><span class="s0">;</span><span class="s4">return false</span><span class="s0">}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">i</span><span class="s0">&lt;</span><span class="s1">o</span><span class="s0">){</span><span class="s1">r</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]=</span><span class="s1">l</span><span class="s0">;</span><span class="s1">r</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]=</span><span class="s1">n</span><span class="s0">;</span><span class="s1">r</span><span class="s0">[</span><span class="s3">2</span><span class="s0">]=</span><span class="s1">p</span><span class="s0">;</span><span class="s1">r</span><span class="s0">[</span><span class="s3">3</span><span class="s0">]=</span><span class="s1">a</span><span class="s0">;</span><span class="s4">return false</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{}}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">var </span><span class="s1">I</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">height</span><span class="s0">/</span><span class="s1">t</span><span class="s0">.</span><span class="s1">width</span><span class="s0">;</span><span class="s4">var </span><span class="s1">_</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">height</span><span class="s0">/</span><span class="s1">e</span><span class="s0">.</span><span class="s1">width</span><span class="s0">;</span><span class="s4">var </span><span class="s1">C</span><span class="s0">=(</span><span class="s1">a</span><span class="s0">-</span><span class="s1">n</span><span class="s0">)/(</span><span class="s1">o</span><span class="s0">-</span><span class="s1">i</span><span class="s0">);</span><span class="s4">var </span><span class="s1">M</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">x</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">O</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">D</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">R</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">b</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(-</span><span class="s1">I</span><span class="s0">===</span><span class="s1">C</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">i</span><span class="s0">&gt;</span><span class="s1">o</span><span class="s0">){</span><span class="s1">r</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]=</span><span class="s1">c</span><span class="s0">;</span><span class="s1">r</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]=</span><span class="s1">d</span><span class="s0">;</span><span class="s1">w</span><span class="s0">=</span><span class="s4">true</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">r</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]=</span><span class="s1">l</span><span class="s0">;</span><span class="s1">r</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]=</span><span class="s1">h</span><span class="s0">;</span><span class="s1">w</span><span class="s0">=</span><span class="s4">true</span><span class="s0">}}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">I</span><span class="s0">===</span><span class="s1">C</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">i</span><span class="s0">&gt;</span><span class="s1">o</span><span class="s0">){</span><span class="s1">r</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]=</span><span class="s1">s</span><span class="s0">;</span><span class="s1">r</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]=</span><span class="s1">h</span><span class="s0">;</span><span class="s1">w</span><span class="s0">=</span><span class="s4">true</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">r</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]=</span><span class="s1">f</span><span class="s0">;</span><span class="s1">r</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]=</span><span class="s1">d</span><span class="s0">;</span><span class="s1">w</span><span class="s0">=</span><span class="s4">true</span><span class="s0">}}</span><span class="s4">if</span><span class="s0">(-</span><span class="s1">_</span><span class="s0">===</span><span class="s1">C</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">o</span><span class="s0">&gt;</span><span class="s1">i</span><span class="s0">){</span><span class="s1">r</span><span class="s0">[</span><span class="s3">2</span><span class="s0">]=</span><span class="s1">m</span><span class="s0">;</span><span class="s1">r</span><span class="s0">[</span><span class="s3">3</span><span class="s0">]=</span><span class="s1">E</span><span class="s0">;</span><span class="s1">L</span><span class="s0">=</span><span class="s4">true</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">r</span><span class="s0">[</span><span class="s3">2</span><span class="s0">]=</span><span class="s1">y</span><span class="s0">;</span><span class="s1">r</span><span class="s0">[</span><span class="s3">3</span><span class="s0">]=</span><span class="s1">v</span><span class="s0">;</span><span class="s1">L</span><span class="s0">=</span><span class="s4">true</span><span class="s0">}}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">_</span><span class="s0">===</span><span class="s1">C</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">o</span><span class="s0">&gt;</span><span class="s1">i</span><span class="s0">){</span><span class="s1">r</span><span class="s0">[</span><span class="s3">2</span><span class="s0">]=</span><span class="s1">p</span><span class="s0">;</span><span class="s1">r</span><span class="s0">[</span><span class="s3">3</span><span class="s0">]=</span><span class="s1">v</span><span class="s0">;</span><span class="s1">L</span><span class="s0">=</span><span class="s4">true</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">r</span><span class="s0">[</span><span class="s3">2</span><span class="s0">]=</span><span class="s1">N</span><span class="s0">;</span><span class="s1">r</span><span class="s0">[</span><span class="s3">3</span><span class="s0">]=</span><span class="s1">E</span><span class="s0">;</span><span class="s1">L</span><span class="s0">=</span><span class="s4">true</span><span class="s0">}}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">w</span><span class="s0">&amp;&amp;</span><span class="s1">L</span><span class="s0">){</span><span class="s4">return false</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">i</span><span class="s0">&gt;</span><span class="s1">o</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">&gt;</span><span class="s1">a</span><span class="s0">){</span><span class="s1">M</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getCardinalDirection</span><span class="s0">(</span><span class="s1">I</span><span class="s0">,</span><span class="s1">C</span><span class="s0">,</span><span class="s3">4</span><span class="s0">);</span><span class="s1">x</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getCardinalDirection</span><span class="s0">(</span><span class="s1">_</span><span class="s0">,</span><span class="s1">C</span><span class="s0">,</span><span class="s3">2</span><span class="s0">)}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">M</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getCardinalDirection</span><span class="s0">(-</span><span class="s1">I</span><span class="s0">,</span><span class="s1">C</span><span class="s0">,</span><span class="s3">3</span><span class="s0">);</span><span class="s1">x</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getCardinalDirection</span><span class="s0">(-</span><span class="s1">_</span><span class="s0">,</span><span class="s1">C</span><span class="s0">,</span><span class="s3">1</span><span class="s0">)}}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">&gt;</span><span class="s1">a</span><span class="s0">){</span><span class="s1">M</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getCardinalDirection</span><span class="s0">(-</span><span class="s1">I</span><span class="s0">,</span><span class="s1">C</span><span class="s0">,</span><span class="s3">1</span><span class="s0">);</span><span class="s1">x</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getCardinalDirection</span><span class="s0">(-</span><span class="s1">_</span><span class="s0">,</span><span class="s1">C</span><span class="s0">,</span><span class="s3">3</span><span class="s0">)}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">M</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getCardinalDirection</span><span class="s0">(</span><span class="s1">I</span><span class="s0">,</span><span class="s1">C</span><span class="s0">,</span><span class="s3">2</span><span class="s0">);</span><span class="s1">x</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getCardinalDirection</span><span class="s0">(</span><span class="s1">_</span><span class="s0">,</span><span class="s1">C</span><span class="s0">,</span><span class="s3">4</span><span class="s0">)}}</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">w</span><span class="s0">){</span><span class="s4">switch</span><span class="s0">(</span><span class="s1">M</span><span class="s0">){</span><span class="s4">case </span><span class="s3">1</span><span class="s0">:</span><span class="s1">D</span><span class="s0">=</span><span class="s1">h</span><span class="s0">;</span><span class="s1">O</span><span class="s0">=</span><span class="s1">i</span><span class="s0">+-</span><span class="s1">u</span><span class="s0">/</span><span class="s1">C</span><span class="s0">;</span><span class="s1">r</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]=</span><span class="s1">O</span><span class="s0">;</span><span class="s1">r</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]=</span><span class="s1">D</span><span class="s0">;</span><span class="s4">break</span><span class="s0">;</span><span class="s4">case </span><span class="s3">2</span><span class="s0">:</span><span class="s1">O</span><span class="s0">=</span><span class="s1">f</span><span class="s0">;</span><span class="s1">D</span><span class="s0">=</span><span class="s1">n</span><span class="s0">+</span><span class="s1">g</span><span class="s0">*</span><span class="s1">C</span><span class="s0">;</span><span class="s1">r</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]=</span><span class="s1">O</span><span class="s0">;</span><span class="s1">r</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]=</span><span class="s1">D</span><span class="s0">;</span><span class="s4">break</span><span class="s0">;</span><span class="s4">case </span><span class="s3">3</span><span class="s0">:</span><span class="s1">D</span><span class="s0">=</span><span class="s1">d</span><span class="s0">;</span><span class="s1">O</span><span class="s0">=</span><span class="s1">i</span><span class="s0">+</span><span class="s1">u</span><span class="s0">/</span><span class="s1">C</span><span class="s0">;</span><span class="s1">r</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]=</span><span class="s1">O</span><span class="s0">;</span><span class="s1">r</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]=</span><span class="s1">D</span><span class="s0">;</span><span class="s4">break</span><span class="s0">;</span><span class="s4">case </span><span class="s3">4</span><span class="s0">:</span><span class="s1">O</span><span class="s0">=</span><span class="s1">c</span><span class="s0">;</span><span class="s1">D</span><span class="s0">=</span><span class="s1">n</span><span class="s0">+-</span><span class="s1">g</span><span class="s0">*</span><span class="s1">C</span><span class="s0">;</span><span class="s1">r</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]=</span><span class="s1">O</span><span class="s0">;</span><span class="s1">r</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]=</span><span class="s1">D</span><span class="s0">;</span><span class="s4">break</span><span class="s0">}}</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">L</span><span class="s0">){</span><span class="s4">switch</span><span class="s0">(</span><span class="s1">x</span><span class="s0">){</span><span class="s4">case </span><span class="s3">1</span><span class="s0">:</span><span class="s1">b</span><span class="s0">=</span><span class="s1">v</span><span class="s0">;</span><span class="s1">R</span><span class="s0">=</span><span class="s1">o</span><span class="s0">+-</span><span class="s1">A</span><span class="s0">/</span><span class="s1">C</span><span class="s0">;</span><span class="s1">r</span><span class="s0">[</span><span class="s3">2</span><span class="s0">]=</span><span class="s1">R</span><span class="s0">;</span><span class="s1">r</span><span class="s0">[</span><span class="s3">3</span><span class="s0">]=</span><span class="s1">b</span><span class="s0">;</span><span class="s4">break</span><span class="s0">;</span><span class="s4">case </span><span class="s3">2</span><span class="s0">:</span><span class="s1">R</span><span class="s0">=</span><span class="s1">N</span><span class="s0">;</span><span class="s1">b</span><span class="s0">=</span><span class="s1">a</span><span class="s0">+</span><span class="s1">T</span><span class="s0">*</span><span class="s1">C</span><span class="s0">;</span><span class="s1">r</span><span class="s0">[</span><span class="s3">2</span><span class="s0">]=</span><span class="s1">R</span><span class="s0">;</span><span class="s1">r</span><span class="s0">[</span><span class="s3">3</span><span class="s0">]=</span><span class="s1">b</span><span class="s0">;</span><span class="s4">break</span><span class="s0">;</span><span class="s4">case </span><span class="s3">3</span><span class="s0">:</span><span class="s1">b</span><span class="s0">=</span><span class="s1">E</span><span class="s0">;</span><span class="s1">R</span><span class="s0">=</span><span class="s1">o</span><span class="s0">+</span><span class="s1">A</span><span class="s0">/</span><span class="s1">C</span><span class="s0">;</span><span class="s1">r</span><span class="s0">[</span><span class="s3">2</span><span class="s0">]=</span><span class="s1">R</span><span class="s0">;</span><span class="s1">r</span><span class="s0">[</span><span class="s3">3</span><span class="s0">]=</span><span class="s1">b</span><span class="s0">;</span><span class="s4">break</span><span class="s0">;</span><span class="s4">case </span><span class="s3">4</span><span class="s0">:</span><span class="s1">R</span><span class="s0">=</span><span class="s1">m</span><span class="s0">;</span><span class="s1">b</span><span class="s0">=</span><span class="s1">a</span><span class="s0">+-</span><span class="s1">T</span><span class="s0">*</span><span class="s1">C</span><span class="s0">;</span><span class="s1">r</span><span class="s0">[</span><span class="s3">2</span><span class="s0">]=</span><span class="s1">R</span><span class="s0">;</span><span class="s1">r</span><span class="s0">[</span><span class="s3">3</span><span class="s0">]=</span><span class="s1">b</span><span class="s0">;</span><span class="s4">break</span><span class="s0">}}}</span><span class="s4">return false</span><span class="s0">};</span><span class="s1">n</span><span class="s0">.</span><span class="s1">getCardinalDirection</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">&gt;</span><span class="s1">e</span><span class="s0">){</span><span class="s4">return </span><span class="s1">r</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">return </span><span class="s3">1</span><span class="s0">+</span><span class="s1">r</span><span class="s0">%</span><span class="s3">4</span><span class="s0">}};</span><span class="s1">n</span><span class="s0">.</span><span class="s1">getIntersection</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">n</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">==</span><span class="s4">null</span><span class="s0">){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">getIntersection2</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">)}</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">x</span><span class="s0">;</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">y</span><span class="s0">;</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">x</span><span class="s0">;</span><span class="s4">var </span><span class="s1">h</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">y</span><span class="s0">;</span><span class="s4">var </span><span class="s1">l</span><span class="s0">=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">x</span><span class="s0">;</span><span class="s4">var </span><span class="s1">c</span><span class="s0">=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">y</span><span class="s0">;</span><span class="s4">var </span><span class="s1">d</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">x</span><span class="s0">;</span><span class="s4">var </span><span class="s1">f</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">y</span><span class="s0">;</span><span class="s4">var </span><span class="s1">g</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">,</span><span class="s1">u</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">p</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">,</span><span class="s1">v</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">,</span><span class="s1">m</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">,</span><span class="s1">E</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">,</span><span class="s1">N</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">T</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s1">p</span><span class="s0">=</span><span class="s1">h</span><span class="s0">-</span><span class="s1">a</span><span class="s0">;</span><span class="s1">y</span><span class="s0">=</span><span class="s1">o</span><span class="s0">-</span><span class="s1">s</span><span class="s0">;</span><span class="s1">E</span><span class="s0">=</span><span class="s1">s</span><span class="s0">*</span><span class="s1">a</span><span class="s0">-</span><span class="s1">o</span><span class="s0">*</span><span class="s1">h</span><span class="s0">;</span><span class="s1">v</span><span class="s0">=</span><span class="s1">f</span><span class="s0">-</span><span class="s1">c</span><span class="s0">;</span><span class="s1">m</span><span class="s0">=</span><span class="s1">l</span><span class="s0">-</span><span class="s1">d</span><span class="s0">;</span><span class="s1">N</span><span class="s0">=</span><span class="s1">d</span><span class="s0">*</span><span class="s1">c</span><span class="s0">-</span><span class="s1">l</span><span class="s0">*</span><span class="s1">f</span><span class="s0">;</span><span class="s1">T</span><span class="s0">=</span><span class="s1">p</span><span class="s0">*</span><span class="s1">m</span><span class="s0">-</span><span class="s1">v</span><span class="s0">*</span><span class="s1">y</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">T</span><span class="s0">===</span><span class="s3">0</span><span class="s0">){</span><span class="s4">return null</span><span class="s0">}</span><span class="s1">g</span><span class="s0">=(</span><span class="s1">y</span><span class="s0">*</span><span class="s1">N</span><span class="s0">-</span><span class="s1">m</span><span class="s0">*</span><span class="s1">E</span><span class="s0">)/</span><span class="s1">T</span><span class="s0">;</span><span class="s1">u</span><span class="s0">=(</span><span class="s1">v</span><span class="s0">*</span><span class="s1">E</span><span class="s0">-</span><span class="s1">p</span><span class="s0">*</span><span class="s1">N</span><span class="s0">)/</span><span class="s1">T</span><span class="s0">;</span><span class="s4">return new </span><span class="s1">i</span><span class="s0">(</span><span class="s1">g</span><span class="s0">,</span><span class="s1">u</span><span class="s0">)};</span><span class="s1">n</span><span class="s0">.</span><span class="s1">angleOfVector</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">!==</span><span class="s1">r</span><span class="s0">){</span><span class="s1">n</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">atan</span><span class="s0">((</span><span class="s1">i</span><span class="s0">-</span><span class="s1">e</span><span class="s0">)/(</span><span class="s1">r</span><span class="s0">-</span><span class="s1">t</span><span class="s0">));</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">&lt;</span><span class="s1">t</span><span class="s0">){</span><span class="s1">n</span><span class="s0">+=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">PI</span><span class="s0">}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">i</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">){</span><span class="s1">n</span><span class="s0">+=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">TWO_PI</span><span class="s0">}}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">i</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">){</span><span class="s1">n</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">ONE_AND_HALF_PI</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">n</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">HALF_PI</span><span class="s0">}</span><span class="s4">return </span><span class="s1">n</span><span class="s0">};</span><span class="s1">n</span><span class="s0">.</span><span class="s1">doIntersect</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">x</span><span class="s0">;</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">y</span><span class="s0">;</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">x</span><span class="s0">;</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">y</span><span class="s0">;</span><span class="s4">var </span><span class="s1">h</span><span class="s0">=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">x</span><span class="s0">;</span><span class="s4">var </span><span class="s1">l</span><span class="s0">=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">y</span><span class="s0">;</span><span class="s4">var </span><span class="s1">c</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">x</span><span class="s0">;</span><span class="s4">var </span><span class="s1">d</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">y</span><span class="s0">;</span><span class="s4">var </span><span class="s1">f</span><span class="s0">=(</span><span class="s1">a</span><span class="s0">-</span><span class="s1">n</span><span class="s0">)*(</span><span class="s1">d</span><span class="s0">-</span><span class="s1">l</span><span class="s0">)-(</span><span class="s1">c</span><span class="s0">-</span><span class="s1">h</span><span class="s0">)*(</span><span class="s1">s</span><span class="s0">-</span><span class="s1">o</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">f</span><span class="s0">===</span><span class="s3">0</span><span class="s0">){</span><span class="s4">return false</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">var </span><span class="s1">g</span><span class="s0">=((</span><span class="s1">d</span><span class="s0">-</span><span class="s1">l</span><span class="s0">)*(</span><span class="s1">c</span><span class="s0">-</span><span class="s1">n</span><span class="s0">)+(</span><span class="s1">h</span><span class="s0">-</span><span class="s1">c</span><span class="s0">)*(</span><span class="s1">d</span><span class="s0">-</span><span class="s1">o</span><span class="s0">))/</span><span class="s1">f</span><span class="s0">;</span><span class="s4">var </span><span class="s1">u</span><span class="s0">=((</span><span class="s1">o</span><span class="s0">-</span><span class="s1">s</span><span class="s0">)*(</span><span class="s1">c</span><span class="s0">-</span><span class="s1">n</span><span class="s0">)+(</span><span class="s1">a</span><span class="s0">-</span><span class="s1">n</span><span class="s0">)*(</span><span class="s1">d</span><span class="s0">-</span><span class="s1">o</span><span class="s0">))/</span><span class="s1">f</span><span class="s0">;</span><span class="s4">return </span><span class="s3">0</span><span class="s0">&lt;</span><span class="s1">g</span><span class="s0">&amp;&amp;</span><span class="s1">g</span><span class="s0">&lt;</span><span class="s3">1</span><span class="s0">&amp;&amp;</span><span class="s3">0</span><span class="s0">&lt;</span><span class="s1">u</span><span class="s0">&amp;&amp;</span><span class="s1">u</span><span class="s0">&lt;</span><span class="s3">1</span><span class="s0">}};</span><span class="s1">n</span><span class="s0">.</span><span class="s1">findCircleLineIntersections</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">a</span><span class="s0">){</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=(</span><span class="s1">r</span><span class="s0">-</span><span class="s1">t</span><span class="s0">)*(</span><span class="s1">r</span><span class="s0">-</span><span class="s1">t</span><span class="s0">)+(</span><span class="s1">i</span><span class="s0">-</span><span class="s1">e</span><span class="s0">)*(</span><span class="s1">i</span><span class="s0">-</span><span class="s1">e</span><span class="s0">);</span><span class="s4">var </span><span class="s1">h</span><span class="s0">=</span><span class="s3">2</span><span class="s0">*((</span><span class="s1">t</span><span class="s0">-</span><span class="s1">n</span><span class="s0">)*(</span><span class="s1">r</span><span class="s0">-</span><span class="s1">t</span><span class="s0">)+(</span><span class="s1">e</span><span class="s0">-</span><span class="s1">o</span><span class="s0">)*(</span><span class="s1">i</span><span class="s0">-</span><span class="s1">e</span><span class="s0">));</span><span class="s4">var </span><span class="s1">l</span><span class="s0">=(</span><span class="s1">t</span><span class="s0">-</span><span class="s1">n</span><span class="s0">)*(</span><span class="s1">t</span><span class="s0">-</span><span class="s1">n</span><span class="s0">)+(</span><span class="s1">e</span><span class="s0">-</span><span class="s1">o</span><span class="s0">)*(</span><span class="s1">e</span><span class="s0">-</span><span class="s1">o</span><span class="s0">)-</span><span class="s1">a</span><span class="s0">*</span><span class="s1">a</span><span class="s0">;</span><span class="s4">var </span><span class="s1">c</span><span class="s0">=</span><span class="s1">h</span><span class="s0">*</span><span class="s1">h</span><span class="s0">-</span><span class="s3">4</span><span class="s0">*</span><span class="s1">s</span><span class="s0">*</span><span class="s1">l</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">c</span><span class="s0">&gt;=</span><span class="s3">0</span><span class="s0">){</span><span class="s4">var </span><span class="s1">d</span><span class="s0">=(-</span><span class="s1">h</span><span class="s0">+</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">sqrt</span><span class="s0">(</span><span class="s1">h</span><span class="s0">*</span><span class="s1">h</span><span class="s0">-</span><span class="s3">4</span><span class="s0">*</span><span class="s1">s</span><span class="s0">*</span><span class="s1">l</span><span class="s0">))/(</span><span class="s3">2</span><span class="s0">*</span><span class="s1">s</span><span class="s0">);</span><span class="s4">var </span><span class="s1">f</span><span class="s0">=(-</span><span class="s1">h</span><span class="s0">-</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">sqrt</span><span class="s0">(</span><span class="s1">h</span><span class="s0">*</span><span class="s1">h</span><span class="s0">-</span><span class="s3">4</span><span class="s0">*</span><span class="s1">s</span><span class="s0">*</span><span class="s1">l</span><span class="s0">))/(</span><span class="s3">2</span><span class="s0">*</span><span class="s1">s</span><span class="s0">);</span><span class="s4">var </span><span class="s1">g</span><span class="s0">=</span><span class="s4">null</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">d</span><span class="s0">&gt;=</span><span class="s3">0</span><span class="s0">&amp;&amp;</span><span class="s1">d</span><span class="s0">&lt;=</span><span class="s3">1</span><span class="s0">){</span><span class="s4">return</span><span class="s0">[</span><span class="s1">d</span><span class="s0">]}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">f</span><span class="s0">&gt;=</span><span class="s3">0</span><span class="s0">&amp;&amp;</span><span class="s1">f</span><span class="s0">&lt;=</span><span class="s3">1</span><span class="s0">){</span><span class="s4">return</span><span class="s0">[</span><span class="s1">f</span><span class="s0">]}</span><span class="s4">return </span><span class="s1">g</span><span class="s0">}</span><span class="s4">else return null</span><span class="s0">};</span><span class="s1">n</span><span class="s0">.</span><span class="s1">HALF_PI</span><span class="s0">=</span><span class="s3">.5</span><span class="s0">*</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">PI</span><span class="s0">;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">ONE_AND_HALF_PI</span><span class="s0">=</span><span class="s3">1.5</span><span class="s0">*</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">PI</span><span class="s0">;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">TWO_PI</span><span class="s0">=</span><span class="s3">2</span><span class="s0">*</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">PI</span><span class="s0">;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">THREE_PI</span><span class="s0">=</span><span class="s3">3</span><span class="s0">*</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">PI</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">=</span><span class="s1">n</span><span class="s0">},</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s2">&quot;use strict&quot;</span><span class="s0">;</span><span class="s4">function </span><span class="s1">i</span><span class="s0">(){}</span><span class="s1">i</span><span class="s0">.</span><span class="s1">sign</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">){</span><span class="s4">return </span><span class="s3">1</span><span class="s0">}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">&lt;</span><span class="s3">0</span><span class="s0">){</span><span class="s4">return</span><span class="s0">-</span><span class="s3">1</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">return </span><span class="s3">0</span><span class="s0">}};</span><span class="s1">i</span><span class="s0">.</span><span class="s1">floor</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">return </span><span class="s1">t</span><span class="s0">&lt;</span><span class="s3">0</span><span class="s0">?</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">ceil</span><span class="s0">(</span><span class="s1">t</span><span class="s0">):</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">floor</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)};</span><span class="s1">i</span><span class="s0">.</span><span class="s1">ceil</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">return </span><span class="s1">t</span><span class="s0">&lt;</span><span class="s3">0</span><span class="s0">?</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">floor</span><span class="s0">(</span><span class="s1">t</span><span class="s0">):</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">ceil</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)};</span><span class="s1">t</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">=</span><span class="s1">i</span><span class="s0">},</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s2">&quot;use strict&quot;</span><span class="s0">;</span><span class="s4">function </span><span class="s1">i</span><span class="s0">(){}</span><span class="s1">i</span><span class="s0">.</span><span class="s1">MAX_VALUE</span><span class="s0">=</span><span class="s3">2147483647</span><span class="s0">;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">MIN_VALUE</span><span class="s0">=-</span><span class="s3">2147483648</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">=</span><span class="s1">i</span><span class="s0">},</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s2">&quot;use strict&quot;</span><span class="s0">;</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">r</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">r</span><span class="s0">++){</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">r</span><span class="s0">];</span><span class="s1">i</span><span class="s0">.</span><span class="s1">enumerable</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">enumerable</span><span class="s0">||</span><span class="s4">false</span><span class="s0">;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">configurable</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s2">&quot;value&quot;</span><span class="s4">in </span><span class="s1">i</span><span class="s0">)</span><span class="s1">i</span><span class="s0">.</span><span class="s1">writable</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">.</span><span class="s1">key</span><span class="s0">,</span><span class="s1">i</span><span class="s0">)}}</span><span class="s4">return function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">)</span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">,</span><span class="s1">r</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">i</span><span class="s0">)</span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">i</span><span class="s0">);</span><span class="s4">return </span><span class="s1">e</span><span class="s0">}}();</span><span class="s4">function </span><span class="s1">n</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(!(</span><span class="s1">t </span><span class="s4">instanceof </span><span class="s1">e</span><span class="s0">)){</span><span class="s4">throw new </span><span class="s1">TypeError</span><span class="s0">(</span><span class="s2">&quot;Cannot call a class as a function&quot;</span><span class="s0">)}}</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">return</span><span class="s0">{</span><span class="s1">value</span><span class="s0">:</span><span class="s1">e</span><span class="s0">,</span><span class="s1">next</span><span class="s0">:</span><span class="s4">null</span><span class="s0">,</span><span class="s1">prev</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}};</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">n</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">!==</span><span class="s4">null</span><span class="s0">){</span><span class="s1">e</span><span class="s0">.</span><span class="s1">next</span><span class="s0">=</span><span class="s1">r</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">n</span><span class="s0">.</span><span class="s1">head</span><span class="s0">=</span><span class="s1">r</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">i</span><span class="s0">!==</span><span class="s4">null</span><span class="s0">){</span><span class="s1">i</span><span class="s0">.</span><span class="s1">prev</span><span class="s0">=</span><span class="s1">r</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">n</span><span class="s0">.</span><span class="s1">tail</span><span class="s0">=</span><span class="s1">r</span><span class="s0">}</span><span class="s1">r</span><span class="s0">.</span><span class="s1">prev</span><span class="s0">=</span><span class="s1">e</span><span class="s0">;</span><span class="s1">r</span><span class="s0">.</span><span class="s1">next</span><span class="s0">=</span><span class="s1">i</span><span class="s0">;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">length</span><span class="s0">++;</span><span class="s4">return </span><span class="s1">r</span><span class="s0">};</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">prev</span><span class="s0">,</span><span class="s1">n</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">next</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">i</span><span class="s0">!==</span><span class="s4">null</span><span class="s0">){</span><span class="s1">i</span><span class="s0">.</span><span class="s1">next</span><span class="s0">=</span><span class="s1">n</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">r</span><span class="s0">.</span><span class="s1">head</span><span class="s0">=</span><span class="s1">n</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">!==</span><span class="s4">null</span><span class="s0">){</span><span class="s1">n</span><span class="s0">.</span><span class="s1">prev</span><span class="s0">=</span><span class="s1">i</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">r</span><span class="s0">.</span><span class="s1">tail</span><span class="s0">=</span><span class="s1">i</span><span class="s0">}</span><span class="s1">e</span><span class="s0">.</span><span class="s1">prev</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">next</span><span class="s0">=</span><span class="s4">null</span><span class="s0">;</span><span class="s1">r</span><span class="s0">.</span><span class="s1">length</span><span class="s0">--;</span><span class="s4">return </span><span class="s1">e</span><span class="s0">};</span><span class="s4">var </span><span class="s1">h</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s4">this</span><span class="s0">;</span><span class="s1">n</span><span class="s0">(</span><span class="s4">this</span><span class="s0">,</span><span class="s1">t</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">length</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">head</span><span class="s0">=</span><span class="s4">null</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">tail</span><span class="s0">=</span><span class="s4">null</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">!=</span><span class="s4">null</span><span class="s0">){</span><span class="s1">e</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">return </span><span class="s1">r</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)}))}}</span><span class="s1">i</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,[{</span><span class="s1">key</span><span class="s0">:</span><span class="s2">&quot;size&quot;</span><span class="s0">,</span><span class="s1">value</span><span class="s0">:</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">length</span><span class="s0">}},{</span><span class="s1">key</span><span class="s0">:</span><span class="s2">&quot;insertBefore&quot;</span><span class="s0">,</span><span class="s1">value</span><span class="s0">:</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s4">return </span><span class="s1">a</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">prev</span><span class="s0">,</span><span class="s1">o</span><span class="s0">(</span><span class="s1">e</span><span class="s0">),</span><span class="s1">r</span><span class="s0">,</span><span class="s4">this</span><span class="s0">)}},{</span><span class="s1">key</span><span class="s0">:</span><span class="s2">&quot;insertAfter&quot;</span><span class="s0">,</span><span class="s1">value</span><span class="s0">:</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s4">return </span><span class="s1">a</span><span class="s0">(</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">(</span><span class="s1">e</span><span class="s0">),</span><span class="s1">r</span><span class="s0">.</span><span class="s1">next</span><span class="s0">,</span><span class="s4">this</span><span class="s0">)}},{</span><span class="s1">key</span><span class="s0">:</span><span class="s2">&quot;insertNodeBefore&quot;</span><span class="s0">,</span><span class="s1">value</span><span class="s0">:</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s4">return </span><span class="s1">a</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">prev</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s4">this</span><span class="s0">)}},{</span><span class="s1">key</span><span class="s0">:</span><span class="s2">&quot;insertNodeAfter&quot;</span><span class="s0">,</span><span class="s1">value</span><span class="s0">:</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s4">return </span><span class="s1">a</span><span class="s0">(</span><span class="s1">r</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">.</span><span class="s1">next</span><span class="s0">,</span><span class="s4">this</span><span class="s0">)}},{</span><span class="s1">key</span><span class="s0">:</span><span class="s2">&quot;push&quot;</span><span class="s0">,</span><span class="s1">value</span><span class="s0">:</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">return </span><span class="s1">a</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">tail</span><span class="s0">,</span><span class="s1">o</span><span class="s0">(</span><span class="s1">e</span><span class="s0">),</span><span class="s4">null</span><span class="s0">,</span><span class="s4">this</span><span class="s0">)}},{</span><span class="s1">key</span><span class="s0">:</span><span class="s2">&quot;unshift&quot;</span><span class="s0">,</span><span class="s1">value</span><span class="s0">:</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">return </span><span class="s1">a</span><span class="s0">(</span><span class="s4">null</span><span class="s0">,</span><span class="s1">o</span><span class="s0">(</span><span class="s1">e</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">head</span><span class="s0">,</span><span class="s4">this</span><span class="s0">)}},{</span><span class="s1">key</span><span class="s0">:</span><span class="s2">&quot;remove&quot;</span><span class="s0">,</span><span class="s1">value</span><span class="s0">:</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">return </span><span class="s1">s</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s4">this</span><span class="s0">)}},{</span><span class="s1">key</span><span class="s0">:</span><span class="s2">&quot;pop&quot;</span><span class="s0">,</span><span class="s1">value</span><span class="s0">:</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(){</span><span class="s4">return </span><span class="s1">s</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">tail</span><span class="s0">,</span><span class="s4">this</span><span class="s0">).</span><span class="s1">value</span><span class="s0">}},{</span><span class="s1">key</span><span class="s0">:</span><span class="s2">&quot;popNode&quot;</span><span class="s0">,</span><span class="s1">value</span><span class="s0">:</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(){</span><span class="s4">return </span><span class="s1">s</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">tail</span><span class="s0">,</span><span class="s4">this</span><span class="s0">)}},{</span><span class="s1">key</span><span class="s0">:</span><span class="s2">&quot;shift&quot;</span><span class="s0">,</span><span class="s1">value</span><span class="s0">:</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(){</span><span class="s4">return </span><span class="s1">s</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">head</span><span class="s0">,</span><span class="s4">this</span><span class="s0">).</span><span class="s1">value</span><span class="s0">}},{</span><span class="s1">key</span><span class="s0">:</span><span class="s2">&quot;shiftNode&quot;</span><span class="s0">,</span><span class="s1">value</span><span class="s0">:</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(){</span><span class="s4">return </span><span class="s1">s</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">head</span><span class="s0">,</span><span class="s4">this</span><span class="s0">)}},{</span><span class="s1">key</span><span class="s0">:</span><span class="s2">&quot;get_object_at&quot;</span><span class="s0">,</span><span class="s1">value</span><span class="s0">:</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">&lt;=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">length</span><span class="s0">()){</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s3">1</span><span class="s0">;</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">head</span><span class="s0">;</span><span class="s4">while</span><span class="s0">(</span><span class="s1">r</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">){</span><span class="s1">i</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">next</span><span class="s0">;</span><span class="s1">r</span><span class="s0">++}</span><span class="s4">return </span><span class="s1">i</span><span class="s0">.</span><span class="s1">value</span><span class="s0">}}},{</span><span class="s1">key</span><span class="s0">:</span><span class="s2">&quot;set_object_at&quot;</span><span class="s0">,</span><span class="s1">value</span><span class="s0">:</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">&lt;=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">length</span><span class="s0">()){</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s3">1</span><span class="s0">;</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">head</span><span class="s0">;</span><span class="s4">while</span><span class="s0">(</span><span class="s1">i</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">){</span><span class="s1">n</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">next</span><span class="s0">;</span><span class="s1">i</span><span class="s0">++}</span><span class="s1">n</span><span class="s0">.</span><span class="s1">value</span><span class="s0">=</span><span class="s1">r</span><span class="s0">}}}]);</span><span class="s4">return </span><span class="s1">t</span><span class="s0">}();</span><span class="s1">t</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">=</span><span class="s1">h</span><span class="s0">},</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s2">&quot;use strict&quot;</span><span class="s0">;</span><span class="s4">function </span><span class="s1">i</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">x</span><span class="s0">=</span><span class="s4">null</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">y</span><span class="s0">=</span><span class="s4">null</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">==</span><span class="s4">null</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">==</span><span class="s4">null</span><span class="s0">&amp;&amp;</span><span class="s1">r</span><span class="s0">==</span><span class="s4">null</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">x</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">y</span><span class="s0">=</span><span class="s3">0</span><span class="s0">}</span><span class="s4">else if</span><span class="s0">(</span><span class="s4">typeof </span><span class="s1">t</span><span class="s0">==</span><span class="s2">&quot;number&quot;</span><span class="s0">&amp;&amp;</span><span class="s4">typeof </span><span class="s1">e</span><span class="s0">==</span><span class="s2">&quot;number&quot;</span><span class="s0">&amp;&amp;</span><span class="s1">r</span><span class="s0">==</span><span class="s4">null</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">x</span><span class="s0">=</span><span class="s1">t</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">y</span><span class="s0">=</span><span class="s1">e</span><span class="s0">}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">constructor</span><span class="s0">.</span><span class="s1">name</span><span class="s0">==</span><span class="s2">&quot;Point&quot;</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">==</span><span class="s4">null</span><span class="s0">&amp;&amp;</span><span class="s1">r</span><span class="s0">==</span><span class="s4">null</span><span class="s0">){</span><span class="s1">r</span><span class="s0">=</span><span class="s1">t</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">x</span><span class="s0">=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">x</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">y</span><span class="s0">=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">y</span><span class="s0">}}</span><span class="s1">i</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getX</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">x</span><span class="s0">};</span><span class="s1">i</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getY</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">y</span><span class="s0">};</span><span class="s1">i</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getLocation</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return new </span><span class="s1">i</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">x</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">y</span><span class="s0">)};</span><span class="s1">i</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">setLocation</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">constructor</span><span class="s0">.</span><span class="s1">name</span><span class="s0">==</span><span class="s2">&quot;Point&quot;</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">==</span><span class="s4">null</span><span class="s0">&amp;&amp;</span><span class="s1">r</span><span class="s0">==</span><span class="s4">null</span><span class="s0">){</span><span class="s1">r</span><span class="s0">=</span><span class="s1">t</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">setLocation</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">x</span><span class="s0">,</span><span class="s1">r</span><span class="s0">.</span><span class="s1">y</span><span class="s0">)}</span><span class="s4">else if</span><span class="s0">(</span><span class="s4">typeof </span><span class="s1">t</span><span class="s0">==</span><span class="s2">&quot;number&quot;</span><span class="s0">&amp;&amp;</span><span class="s4">typeof </span><span class="s1">e</span><span class="s0">==</span><span class="s2">&quot;number&quot;</span><span class="s0">&amp;&amp;</span><span class="s1">r</span><span class="s0">==</span><span class="s4">null</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">parseInt</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)==</span><span class="s1">t</span><span class="s0">&amp;&amp;</span><span class="s1">parseInt</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)==</span><span class="s1">e</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">move</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">)}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">this</span><span class="s0">.</span><span class="s1">x</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">floor</span><span class="s0">(</span><span class="s1">t</span><span class="s0">+</span><span class="s3">.5</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">y</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">floor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">+</span><span class="s3">.5</span><span class="s0">)}}};</span><span class="s1">i</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">move</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">x</span><span class="s0">=</span><span class="s1">t</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">y</span><span class="s0">=</span><span class="s1">e</span><span class="s0">};</span><span class="s1">i</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">translate</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">x</span><span class="s0">+=</span><span class="s1">t</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">y</span><span class="s0">+=</span><span class="s1">e</span><span class="s0">};</span><span class="s1">i</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">equals</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">constructor</span><span class="s0">.</span><span class="s1">name</span><span class="s0">==</span><span class="s2">&quot;Point&quot;</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s1">t</span><span class="s0">;</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">x</span><span class="s0">==</span><span class="s1">e</span><span class="s0">.</span><span class="s1">x</span><span class="s0">&amp;&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">y</span><span class="s0">==</span><span class="s1">e</span><span class="s0">.</span><span class="s1">y</span><span class="s0">}</span><span class="s4">return this</span><span class="s0">==</span><span class="s1">t</span><span class="s0">};</span><span class="s1">i</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">toString</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return</span><span class="s0">(</span><span class="s4">new </span><span class="s1">i</span><span class="s0">).</span><span class="s1">constructor</span><span class="s0">.</span><span class="s1">name</span><span class="s0">+</span><span class="s2">&quot;[x=&quot;</span><span class="s0">+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">x</span><span class="s0">+</span><span class="s2">&quot;,y=&quot;</span><span class="s0">+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">y</span><span class="s0">+</span><span class="s2">&quot;]&quot;</span><span class="s0">};</span><span class="s1">t</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">=</span><span class="s1">i</span><span class="s0">},</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s2">&quot;use strict&quot;</span><span class="s0">;</span><span class="s4">function </span><span class="s1">i</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">x</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">y</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">width</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">height</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">!=</span><span class="s4">null</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">!=</span><span class="s4">null</span><span class="s0">&amp;&amp;</span><span class="s1">r</span><span class="s0">!=</span><span class="s4">null</span><span class="s0">&amp;&amp;</span><span class="s1">i</span><span class="s0">!=</span><span class="s4">null</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">x</span><span class="s0">=</span><span class="s1">t</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">y</span><span class="s0">=</span><span class="s1">e</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">width</span><span class="s0">=</span><span class="s1">r</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">height</span><span class="s0">=</span><span class="s1">i</span><span class="s0">}}</span><span class="s1">i</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getX</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">x</span><span class="s0">};</span><span class="s1">i</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">setX</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">x</span><span class="s0">=</span><span class="s1">t</span><span class="s0">};</span><span class="s1">i</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getY</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">y</span><span class="s0">};</span><span class="s1">i</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">setY</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">y</span><span class="s0">=</span><span class="s1">t</span><span class="s0">};</span><span class="s1">i</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getWidth</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">width</span><span class="s0">};</span><span class="s1">i</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">setWidth</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">width</span><span class="s0">=</span><span class="s1">t</span><span class="s0">};</span><span class="s1">i</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getHeight</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">height</span><span class="s0">};</span><span class="s1">i</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">setHeight</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">height</span><span class="s0">=</span><span class="s1">t</span><span class="s0">};</span><span class="s1">i</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getRight</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">x</span><span class="s0">+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">width</span><span class="s0">};</span><span class="s1">i</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getBottom</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">y</span><span class="s0">+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">height</span><span class="s0">};</span><span class="s1">i</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">intersects</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getRight</span><span class="s0">()&lt;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">x</span><span class="s0">){</span><span class="s4">return false</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getBottom</span><span class="s0">()&lt;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">y</span><span class="s0">){</span><span class="s4">return false</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getRight</span><span class="s0">()&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">x</span><span class="s0">){</span><span class="s4">return false</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getBottom</span><span class="s0">()&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">y</span><span class="s0">){</span><span class="s4">return false</span><span class="s0">}</span><span class="s4">return true</span><span class="s0">};</span><span class="s1">i</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getCenterX</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">x</span><span class="s0">+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">width</span><span class="s0">/</span><span class="s3">2</span><span class="s0">};</span><span class="s1">i</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getMinX</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">getX</span><span class="s0">()};</span><span class="s1">i</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getMaxX</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">getX</span><span class="s0">()+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">width</span><span class="s0">};</span><span class="s1">i</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getCenterY</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">y</span><span class="s0">+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">height</span><span class="s0">/</span><span class="s3">2</span><span class="s0">};</span><span class="s1">i</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getMinY</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">getY</span><span class="s0">()};</span><span class="s1">i</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getMaxY</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">getY</span><span class="s0">()+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">height</span><span class="s0">};</span><span class="s1">i</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getWidthHalf</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">width</span><span class="s0">/</span><span class="s3">2</span><span class="s0">};</span><span class="s1">i</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getHeightHalf</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">height</span><span class="s0">/</span><span class="s3">2</span><span class="s0">};</span><span class="s1">t</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">=</span><span class="s1">i</span><span class="s0">},</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s2">&quot;use strict&quot;</span><span class="s0">;</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s4">typeof </span><span class="s1">Symbol</span><span class="s0">===</span><span class="s2">&quot;function&quot;</span><span class="s0">&amp;&amp;</span><span class="s4">typeof </span><span class="s1">Symbol</span><span class="s0">.</span><span class="s1">iterator</span><span class="s0">===</span><span class="s2">&quot;symbol&quot;</span><span class="s0">?</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">return typeof </span><span class="s1">t</span><span class="s0">}:</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">return </span><span class="s1">t</span><span class="s0">&amp;&amp;</span><span class="s4">typeof </span><span class="s1">Symbol</span><span class="s0">===</span><span class="s2">&quot;function&quot;</span><span class="s0">&amp;&amp;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">constructor</span><span class="s0">===</span><span class="s1">Symbol</span><span class="s0">&amp;&amp;</span><span class="s1">t</span><span class="s0">!==</span><span class="s1">Symbol</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">?</span><span class="s2">&quot;symbol&quot;</span><span class="s0">:</span><span class="s4">typeof </span><span class="s1">t</span><span class="s0">};</span><span class="s4">function </span><span class="s1">n</span><span class="s0">(){}</span><span class="s1">n</span><span class="s0">.</span><span class="s1">lastID</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">createID</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">.</span><span class="s1">isPrimitive</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)){</span><span class="s4">return </span><span class="s1">t</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">uniqueID</span><span class="s0">!=</span><span class="s4">null</span><span class="s0">){</span><span class="s4">return </span><span class="s1">t</span><span class="s0">.</span><span class="s1">uniqueID</span><span class="s0">}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">uniqueID</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">getString</span><span class="s0">();</span><span class="s1">n</span><span class="s0">.</span><span class="s1">lastID</span><span class="s0">++;</span><span class="s4">return </span><span class="s1">t</span><span class="s0">.</span><span class="s1">uniqueID</span><span class="s0">};</span><span class="s1">n</span><span class="s0">.</span><span class="s1">getString</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">==</span><span class="s4">null</span><span class="s0">)</span><span class="s1">t</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">lastID</span><span class="s0">;</span><span class="s4">return</span><span class="s2">&quot;Object#&quot;</span><span class="s0">+</span><span class="s1">t</span><span class="s0">+</span><span class="s2">&quot;&quot;</span><span class="s0">};</span><span class="s1">n</span><span class="s0">.</span><span class="s1">isPrimitive</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s4">typeof </span><span class="s1">t</span><span class="s0">===</span><span class="s2">&quot;undefined&quot;</span><span class="s0">?</span><span class="s2">&quot;undefined&quot;</span><span class="s0">:</span><span class="s1">i</span><span class="s0">(</span><span class="s1">t</span><span class="s0">);</span><span class="s4">return </span><span class="s1">t</span><span class="s0">==</span><span class="s4">null</span><span class="s0">||</span><span class="s1">e</span><span class="s0">!=</span><span class="s2">&quot;object&quot;</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">!=</span><span class="s2">&quot;function&quot;</span><span class="s0">};</span><span class="s1">t</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">=</span><span class="s1">n</span><span class="s0">},</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s2">&quot;use strict&quot;</span><span class="s0">;</span><span class="s4">function </span><span class="s1">i</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">Array</span><span class="s0">.</span><span class="s1">isArray</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">r</span><span class="s0">=</span><span class="s1">Array</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">length</span><span class="s0">);</span><span class="s1">e</span><span class="s0">&lt;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">e</span><span class="s0">++){</span><span class="s1">r</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]=</span><span class="s1">t</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]}</span><span class="s4">return </span><span class="s1">r</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">return </span><span class="s1">Array</span><span class="s0">.</span><span class="s1">from</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)}}</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">0</span><span class="s0">);</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">7</span><span class="s0">);</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">3</span><span class="s0">);</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">1</span><span class="s0">);</span><span class="s4">var </span><span class="s1">h</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">6</span><span class="s0">);</span><span class="s4">var </span><span class="s1">l</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">5</span><span class="s0">);</span><span class="s4">var </span><span class="s1">c</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">17</span><span class="s0">);</span><span class="s4">var </span><span class="s1">d</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">29</span><span class="s0">);</span><span class="s4">function </span><span class="s1">f</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s1">d</span><span class="s0">.</span><span class="s1">call</span><span class="s0">(</span><span class="s4">this</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">layoutQuality</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">QUALITY</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">createBendsAsNeeded</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">DEFAULT_CREATE_BENDS_AS_NEEDED</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">incremental</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">DEFAULT_INCREMENTAL</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">animationOnLayout</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">DEFAULT_ANIMATION_ON_LAYOUT</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">animationDuringLayout</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">DEFAULT_ANIMATION_DURING_LAYOUT</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">animationPeriod</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">DEFAULT_ANIMATION_PERIOD</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">uniformLeafNodeSizes</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">DEFAULT_UNIFORM_LEAF_NODE_SIZES</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">edgeToDummyNodes</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Map</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">=</span><span class="s4">new </span><span class="s1">o</span><span class="s0">(</span><span class="s4">this</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">isLayoutFinished</span><span class="s0">=</span><span class="s4">false</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">isSubLayout</span><span class="s0">=</span><span class="s4">false</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">isRemoteUse</span><span class="s0">=</span><span class="s4">false</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">!=</span><span class="s4">null</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">isRemoteUse</span><span class="s0">=</span><span class="s1">t</span><span class="s0">}}</span><span class="s1">f</span><span class="s0">.</span><span class="s1">RANDOM_SEED</span><span class="s0">=</span><span class="s3">1</span><span class="s0">;</span><span class="s1">f</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">=</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">create</span><span class="s0">(</span><span class="s1">d</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">);</span><span class="s1">f</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getGraphManager</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">};</span><span class="s1">f</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getAllNodes</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">getAllNodes</span><span class="s0">()};</span><span class="s1">f</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getAllEdges</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">getAllEdges</span><span class="s0">()};</span><span class="s1">f</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getAllNodesToApplyGravitation</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">getAllNodesToApplyGravitation</span><span class="s0">()};</span><span class="s1">f</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">newGraphManager</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">var </span><span class="s1">t</span><span class="s0">=</span><span class="s4">new </span><span class="s1">o</span><span class="s0">(</span><span class="s4">this</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">=</span><span class="s1">t</span><span class="s0">;</span><span class="s4">return </span><span class="s1">t</span><span class="s0">};</span><span class="s1">f</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">newGraph</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">return new </span><span class="s1">h</span><span class="s0">(</span><span class="s4">null</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)};</span><span class="s1">f</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">newNode</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">return new </span><span class="s1">a</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)};</span><span class="s1">f</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">newEdge</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">return new </span><span class="s1">s</span><span class="s0">(</span><span class="s4">null</span><span class="s0">,</span><span class="s4">null</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)};</span><span class="s1">f</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">checkLayoutSuccess</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">getRoot</span><span class="s0">()==</span><span class="s4">null</span><span class="s0">||</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">getRoot</span><span class="s0">().</span><span class="s1">getNodes</span><span class="s0">().</span><span class="s1">length</span><span class="s0">==</span><span class="s3">0</span><span class="s0">||</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">includesInvalidEdge</span><span class="s0">()};</span><span class="s1">f</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">runLayout</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">isLayoutFinished</span><span class="s0">=</span><span class="s4">false</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">tilingPreLayout</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">tilingPreLayout</span><span class="s0">()}</span><span class="s4">this</span><span class="s0">.</span><span class="s1">initParameters</span><span class="s0">();</span><span class="s4">var </span><span class="s1">t</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">checkLayoutSuccess</span><span class="s0">()){</span><span class="s1">t</span><span class="s0">=</span><span class="s4">false</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">t</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">layout</span><span class="s0">()}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">.</span><span class="s1">ANIMATE</span><span class="s0">===</span><span class="s2">&quot;during&quot;</span><span class="s0">){</span><span class="s4">return false</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(!</span><span class="s4">this</span><span class="s0">.</span><span class="s1">isSubLayout</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">doPostLayout</span><span class="s0">()}}</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">tilingPostLayout</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">tilingPostLayout</span><span class="s0">()}</span><span class="s4">this</span><span class="s0">.</span><span class="s1">isLayoutFinished</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s4">return </span><span class="s1">t</span><span class="s0">};</span><span class="s1">f</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">doPostLayout</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">if</span><span class="s0">(!</span><span class="s4">this</span><span class="s0">.</span><span class="s1">incremental</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">transform</span><span class="s0">()}</span><span class="s4">this</span><span class="s0">.</span><span class="s1">update</span><span class="s0">()};</span><span class="s1">f</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">update2</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">createBendsAsNeeded</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">createBendpointsFromDummyNodes</span><span class="s0">();</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">resetAllEdges</span><span class="s0">()}</span><span class="s4">if</span><span class="s0">(!</span><span class="s4">this</span><span class="s0">.</span><span class="s1">isRemoteUse</span><span class="s0">){</span><span class="s4">var </span><span class="s1">t</span><span class="s0">;</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">getAllEdges</span><span class="s0">();</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">r</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">r</span><span class="s0">++){</span><span class="s1">t</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">r</span><span class="s0">]}</span><span class="s4">var </span><span class="s1">i</span><span class="s0">;</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">getRoot</span><span class="s0">().</span><span class="s1">getNodes</span><span class="s0">();</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">r</span><span class="s0">&lt;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">r</span><span class="s0">++){</span><span class="s1">i</span><span class="s0">=</span><span class="s1">n</span><span class="s0">[</span><span class="s1">r</span><span class="s0">]}</span><span class="s4">this</span><span class="s0">.</span><span class="s1">update</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">getRoot</span><span class="s0">())}};</span><span class="s1">f</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">update</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">==</span><span class="s4">null</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">update2</span><span class="s0">()}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">t </span><span class="s4">instanceof </span><span class="s1">a</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s1">t</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getChild</span><span class="s0">()!=</span><span class="s4">null</span><span class="s0">){</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getChild</span><span class="s0">().</span><span class="s1">getNodes</span><span class="s0">();</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">i</span><span class="s0">&lt;</span><span class="s1">r</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">i</span><span class="s0">++){</span><span class="s1">update</span><span class="s0">(</span><span class="s1">r</span><span class="s0">[</span><span class="s1">i</span><span class="s0">])}}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">vGraphObject</span><span class="s0">!=</span><span class="s4">null</span><span class="s0">){</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">vGraphObject</span><span class="s0">;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">update</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)}}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">t </span><span class="s4">instanceof </span><span class="s1">s</span><span class="s0">){</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s1">t</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">o</span><span class="s0">.</span><span class="s1">vGraphObject</span><span class="s0">!=</span><span class="s4">null</span><span class="s0">){</span><span class="s4">var </span><span class="s1">l</span><span class="s0">=</span><span class="s1">o</span><span class="s0">.</span><span class="s1">vGraphObject</span><span class="s0">;</span><span class="s1">l</span><span class="s0">.</span><span class="s1">update</span><span class="s0">(</span><span class="s1">o</span><span class="s0">)}}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">t </span><span class="s4">instanceof </span><span class="s1">h</span><span class="s0">){</span><span class="s4">var </span><span class="s1">c</span><span class="s0">=</span><span class="s1">t</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">c</span><span class="s0">.</span><span class="s1">vGraphObject</span><span class="s0">!=</span><span class="s4">null</span><span class="s0">){</span><span class="s4">var </span><span class="s1">d</span><span class="s0">=</span><span class="s1">c</span><span class="s0">.</span><span class="s1">vGraphObject</span><span class="s0">;</span><span class="s1">d</span><span class="s0">.</span><span class="s1">update</span><span class="s0">(</span><span class="s1">c</span><span class="s0">)}}};</span><span class="s1">f</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">initParameters</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">if</span><span class="s0">(!</span><span class="s4">this</span><span class="s0">.</span><span class="s1">isSubLayout</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">layoutQuality</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">QUALITY</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">animationDuringLayout</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">DEFAULT_ANIMATION_DURING_LAYOUT</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">animationPeriod</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">DEFAULT_ANIMATION_PERIOD</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">animationOnLayout</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">DEFAULT_ANIMATION_ON_LAYOUT</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">incremental</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">DEFAULT_INCREMENTAL</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">createBendsAsNeeded</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">DEFAULT_CREATE_BENDS_AS_NEEDED</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">uniformLeafNodeSizes</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">DEFAULT_UNIFORM_LEAF_NODE_SIZES</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">animationDuringLayout</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">animationOnLayout</span><span class="s0">=</span><span class="s4">false</span><span class="s0">}};</span><span class="s1">f</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">transform</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">==</span><span class="s1">undefined</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">transform</span><span class="s0">(</span><span class="s4">new </span><span class="s1">l</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">))}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s4">new </span><span class="s1">c</span><span class="s0">;</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">getRoot</span><span class="s0">().</span><span class="s1">updateLeftTop</span><span class="s0">();</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">!=</span><span class="s4">null</span><span class="s0">){</span><span class="s1">e</span><span class="s0">.</span><span class="s1">setWorldOrgX</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">x</span><span class="s0">);</span><span class="s1">e</span><span class="s0">.</span><span class="s1">setWorldOrgY</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">y</span><span class="s0">);</span><span class="s1">e</span><span class="s0">.</span><span class="s1">setDeviceOrgX</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">x</span><span class="s0">);</span><span class="s1">e</span><span class="s0">.</span><span class="s1">setDeviceOrgY</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">y</span><span class="s0">);</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getAllNodes</span><span class="s0">();</span><span class="s4">var </span><span class="s1">n</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">o</span><span class="s0">&lt;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">o</span><span class="s0">++){</span><span class="s1">n</span><span class="s0">=</span><span class="s1">i</span><span class="s0">[</span><span class="s1">o</span><span class="s0">];</span><span class="s1">n</span><span class="s0">.</span><span class="s1">transform</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)}}}};</span><span class="s1">f</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">positionNodesRandomly</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">==</span><span class="s1">undefined</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">positionNodesRandomly</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getGraphManager</span><span class="s0">().</span><span class="s1">getRoot</span><span class="s0">());</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getGraphManager</span><span class="s0">().</span><span class="s1">getRoot</span><span class="s0">().</span><span class="s1">updateBounds</span><span class="s0">(</span><span class="s4">true</span><span class="s0">)}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">var </span><span class="s1">e</span><span class="s0">;</span><span class="s4">var </span><span class="s1">r</span><span class="s0">;</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getNodes</span><span class="s0">();</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">n</span><span class="s0">&lt;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">n</span><span class="s0">++){</span><span class="s1">e</span><span class="s0">=</span><span class="s1">i</span><span class="s0">[</span><span class="s1">n</span><span class="s0">];</span><span class="s1">r</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getChild</span><span class="s0">();</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">==</span><span class="s4">null</span><span class="s0">){</span><span class="s1">e</span><span class="s0">.</span><span class="s1">scatter</span><span class="s0">()}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">getNodes</span><span class="s0">().</span><span class="s1">length</span><span class="s0">==</span><span class="s3">0</span><span class="s0">){</span><span class="s1">e</span><span class="s0">.</span><span class="s1">scatter</span><span class="s0">()}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">this</span><span class="s0">.</span><span class="s1">positionNodesRandomly</span><span class="s0">(</span><span class="s1">r</span><span class="s0">);</span><span class="s1">e</span><span class="s0">.</span><span class="s1">updateBounds</span><span class="s0">()}}}};</span><span class="s1">f</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getFlatForest</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">var </span><span class="s1">t</span><span class="s0">=[];</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">getRoot</span><span class="s0">().</span><span class="s1">getNodes</span><span class="s0">();</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">o</span><span class="s0">&lt;</span><span class="s1">r</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">o</span><span class="s0">++){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">[</span><span class="s1">o</span><span class="s0">].</span><span class="s1">getChild</span><span class="s0">()!=</span><span class="s4">null</span><span class="s0">){</span><span class="s1">n</span><span class="s0">=</span><span class="s4">false</span><span class="s0">}}</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">n</span><span class="s0">){</span><span class="s4">return </span><span class="s1">t</span><span class="s0">}</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Set</span><span class="s0">;</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=[];</span><span class="s4">var </span><span class="s1">h</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Map</span><span class="s0">;</span><span class="s4">var </span><span class="s1">l</span><span class="s0">=[];</span><span class="s1">l</span><span class="s0">=</span><span class="s1">l</span><span class="s0">.</span><span class="s1">concat</span><span class="s0">(</span><span class="s1">r</span><span class="s0">);</span><span class="s4">while</span><span class="s0">(</span><span class="s1">l</span><span class="s0">.</span><span class="s1">length</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">){</span><span class="s1">s</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">l</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]);</span><span class="s4">while</span><span class="s0">(</span><span class="s1">s</span><span class="s0">.</span><span class="s1">length</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">){</span><span class="s4">var </span><span class="s1">c</span><span class="s0">=</span><span class="s1">s</span><span class="s0">[</span><span class="s3">0</span><span class="s0">];</span><span class="s1">s</span><span class="s0">.</span><span class="s1">splice</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s3">1</span><span class="s0">);</span><span class="s1">a</span><span class="s0">.</span><span class="s1">add</span><span class="s0">(</span><span class="s1">c</span><span class="s0">);</span><span class="s4">var </span><span class="s1">d</span><span class="s0">=</span><span class="s1">c</span><span class="s0">.</span><span class="s1">getEdges</span><span class="s0">();</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">o</span><span class="s0">&lt;</span><span class="s1">d</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">o</span><span class="s0">++){</span><span class="s4">var </span><span class="s1">f</span><span class="s0">=</span><span class="s1">d</span><span class="s0">[</span><span class="s1">o</span><span class="s0">].</span><span class="s1">getOtherEnd</span><span class="s0">(</span><span class="s1">c</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">h</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">c</span><span class="s0">)!=</span><span class="s1">f</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">a</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">f</span><span class="s0">)){</span><span class="s1">s</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">f</span><span class="s0">);</span><span class="s1">h</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">f</span><span class="s0">,</span><span class="s1">c</span><span class="s0">)}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">e</span><span class="s0">=</span><span class="s4">false</span><span class="s0">;</span><span class="s4">break</span><span class="s0">}}}}</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">e</span><span class="s0">){</span><span class="s1">t</span><span class="s0">=[]}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">var </span><span class="s1">g</span><span class="s0">=[].</span><span class="s1">concat</span><span class="s0">(</span><span class="s1">i</span><span class="s0">(</span><span class="s1">a</span><span class="s0">));</span><span class="s1">t</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">g</span><span class="s0">);</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">o</span><span class="s0">&lt;</span><span class="s1">g</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">o</span><span class="s0">++){</span><span class="s4">var </span><span class="s1">u</span><span class="s0">=</span><span class="s1">g</span><span class="s0">[</span><span class="s1">o</span><span class="s0">];</span><span class="s4">var </span><span class="s1">p</span><span class="s0">=</span><span class="s1">l</span><span class="s0">.</span><span class="s1">indexOf</span><span class="s0">(</span><span class="s1">u</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">p</span><span class="s0">&gt;-</span><span class="s3">1</span><span class="s0">){</span><span class="s1">l</span><span class="s0">.</span><span class="s1">splice</span><span class="s0">(</span><span class="s1">p</span><span class="s0">,</span><span class="s3">1</span><span class="s0">)}}</span><span class="s1">a</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Set</span><span class="s0">;</span><span class="s1">h</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Map</span><span class="s0">}}</span><span class="s4">return </span><span class="s1">t</span><span class="s0">};</span><span class="s1">f</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">createDummyNodesForBendpoints</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=[];</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">source</span><span class="s0">;</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">calcLowestCommonAncestor</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">source</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">target</span><span class="s0">);</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">n</span><span class="s0">&lt;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">bendpoints</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">n</span><span class="s0">++){</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">newNode</span><span class="s0">(</span><span class="s4">null</span><span class="s0">);</span><span class="s1">o</span><span class="s0">.</span><span class="s1">setRect</span><span class="s0">(</span><span class="s4">new </span><span class="s1">Point</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">),</span><span class="s4">new </span><span class="s1">Dimension</span><span class="s0">(</span><span class="s3">1</span><span class="s0">,</span><span class="s3">1</span><span class="s0">));</span><span class="s1">i</span><span class="s0">.</span><span class="s1">add</span><span class="s0">(</span><span class="s1">o</span><span class="s0">);</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">newEdge</span><span class="s0">(</span><span class="s4">null</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">add</span><span class="s0">(</span><span class="s1">a</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">);</span><span class="s1">e</span><span class="s0">.</span><span class="s1">add</span><span class="s0">(</span><span class="s1">o</span><span class="s0">);</span><span class="s1">r</span><span class="s0">=</span><span class="s1">o</span><span class="s0">}</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">newEdge</span><span class="s0">(</span><span class="s4">null</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">add</span><span class="s0">(</span><span class="s1">a</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">target</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">edgeToDummyNodes</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isInterGraph</span><span class="s0">()){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">remove</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">i</span><span class="s0">.</span><span class="s1">remove</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)}</span><span class="s4">return </span><span class="s1">e</span><span class="s0">};</span><span class="s1">f</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">createBendpointsFromDummyNodes</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">var </span><span class="s1">t</span><span class="s0">=[];</span><span class="s1">t</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">concat</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">getAllEdges</span><span class="s0">());</span><span class="s1">t</span><span class="s0">=[].</span><span class="s1">concat</span><span class="s0">(</span><span class="s1">i</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">edgeToDummyNodes</span><span class="s0">.</span><span class="s1">keys</span><span class="s0">())).</span><span class="s1">concat</span><span class="s0">(</span><span class="s1">t</span><span class="s0">);</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">e</span><span class="s0">&lt;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">e</span><span class="s0">++){</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s1">t</span><span class="s0">[</span><span class="s1">e</span><span class="s0">];</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">bendpoints</span><span class="s0">.</span><span class="s1">length</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">){</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">edgeToDummyNodes</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">r</span><span class="s0">);</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">o</span><span class="s0">&lt;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">o</span><span class="s0">++){</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s1">n</span><span class="s0">[</span><span class="s1">o</span><span class="s0">];</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s4">new </span><span class="s1">l</span><span class="s0">(</span><span class="s1">a</span><span class="s0">.</span><span class="s1">getCenterX</span><span class="s0">(),</span><span class="s1">a</span><span class="s0">.</span><span class="s1">getCenterY</span><span class="s0">());</span><span class="s4">var </span><span class="s1">h</span><span class="s0">=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">bendpoints</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">o</span><span class="s0">);</span><span class="s1">h</span><span class="s0">.</span><span class="s1">x</span><span class="s0">=</span><span class="s1">s</span><span class="s0">.</span><span class="s1">x</span><span class="s0">;</span><span class="s1">h</span><span class="s0">.</span><span class="s1">y</span><span class="s0">=</span><span class="s1">s</span><span class="s0">.</span><span class="s1">y</span><span class="s0">;</span><span class="s1">a</span><span class="s0">.</span><span class="s1">getOwner</span><span class="s0">().</span><span class="s1">remove</span><span class="s0">(</span><span class="s1">a</span><span class="s0">)}</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">add</span><span class="s0">(</span><span class="s1">r</span><span class="s0">,</span><span class="s1">r</span><span class="s0">.</span><span class="s1">source</span><span class="s0">,</span><span class="s1">r</span><span class="s0">.</span><span class="s1">target</span><span class="s0">)}}};</span><span class="s1">f</span><span class="s0">.</span><span class="s1">transform</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">!=</span><span class="s1">undefined</span><span class="s0">&amp;&amp;</span><span class="s1">i</span><span class="s0">!=</span><span class="s1">undefined</span><span class="s0">){</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">e</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">&lt;=</span><span class="s3">50</span><span class="s0">){</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s1">e</span><span class="s0">/</span><span class="s1">r</span><span class="s0">;</span><span class="s1">n</span><span class="s0">-=(</span><span class="s1">e</span><span class="s0">-</span><span class="s1">o</span><span class="s0">)/</span><span class="s3">50</span><span class="s0">*(</span><span class="s3">50</span><span class="s0">-</span><span class="s1">t</span><span class="s0">)}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s1">e</span><span class="s0">*</span><span class="s1">i</span><span class="s0">;</span><span class="s1">n</span><span class="s0">+=(</span><span class="s1">a</span><span class="s0">-</span><span class="s1">e</span><span class="s0">)/</span><span class="s3">50</span><span class="s0">*(</span><span class="s1">t</span><span class="s0">-</span><span class="s3">50</span><span class="s0">)}</span><span class="s4">return </span><span class="s1">n</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">var </span><span class="s1">s</span><span class="s0">,</span><span class="s1">h</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">&lt;=</span><span class="s3">50</span><span class="s0">){</span><span class="s1">s</span><span class="s0">=</span><span class="s3">9</span><span class="s0">*</span><span class="s1">e</span><span class="s0">/</span><span class="s3">500</span><span class="s0">;</span><span class="s1">h</span><span class="s0">=</span><span class="s1">e</span><span class="s0">/</span><span class="s3">10</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">s</span><span class="s0">=</span><span class="s3">9</span><span class="s0">*</span><span class="s1">e</span><span class="s0">/</span><span class="s3">50</span><span class="s0">;</span><span class="s1">h</span><span class="s0">=-</span><span class="s3">8</span><span class="s0">*</span><span class="s1">e</span><span class="s0">}</span><span class="s4">return </span><span class="s1">s</span><span class="s0">*</span><span class="s1">t</span><span class="s0">+</span><span class="s1">h</span><span class="s0">}};</span><span class="s1">f</span><span class="s0">.</span><span class="s1">findCenterOfTree</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=[];</span><span class="s1">e</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">concat</span><span class="s0">(</span><span class="s1">t</span><span class="s0">);</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=[];</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Map</span><span class="s0">;</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s4">false</span><span class="s0">;</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s4">null</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">==</span><span class="s3">1</span><span class="s0">||</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">==</span><span class="s3">2</span><span class="s0">){</span><span class="s1">n</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s1">o</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]}</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">a</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">a</span><span class="s0">++){</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">a</span><span class="s0">];</span><span class="s4">var </span><span class="s1">h</span><span class="s0">=</span><span class="s1">s</span><span class="s0">.</span><span class="s1">getNeighborsList</span><span class="s0">().</span><span class="s1">size</span><span class="s0">;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">s</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">getNeighborsList</span><span class="s0">().</span><span class="s1">size</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">h</span><span class="s0">==</span><span class="s3">1</span><span class="s0">){</span><span class="s1">r</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">s</span><span class="s0">)}}</span><span class="s4">var </span><span class="s1">l</span><span class="s0">=[];</span><span class="s1">l</span><span class="s0">=</span><span class="s1">l</span><span class="s0">.</span><span class="s1">concat</span><span class="s0">(</span><span class="s1">r</span><span class="s0">);</span><span class="s4">while</span><span class="s0">(!</span><span class="s1">n</span><span class="s0">){</span><span class="s4">var </span><span class="s1">c</span><span class="s0">=[];</span><span class="s1">c</span><span class="s0">=</span><span class="s1">c</span><span class="s0">.</span><span class="s1">concat</span><span class="s0">(</span><span class="s1">l</span><span class="s0">);</span><span class="s1">l</span><span class="s0">=[];</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">a</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">a</span><span class="s0">++){</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">a</span><span class="s0">];</span><span class="s4">var </span><span class="s1">d</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">indexOf</span><span class="s0">(</span><span class="s1">s</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">d</span><span class="s0">&gt;=</span><span class="s3">0</span><span class="s0">){</span><span class="s1">e</span><span class="s0">.</span><span class="s1">splice</span><span class="s0">(</span><span class="s1">d</span><span class="s0">,</span><span class="s3">1</span><span class="s0">)}</span><span class="s4">var </span><span class="s1">f</span><span class="s0">=</span><span class="s1">s</span><span class="s0">.</span><span class="s1">getNeighborsList</span><span class="s0">();</span><span class="s1">f</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">indexOf</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)&lt;</span><span class="s3">0</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">);</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">e</span><span class="s0">-</span><span class="s3">1</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">==</span><span class="s3">1</span><span class="s0">){</span><span class="s1">l</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)}</span><span class="s1">i</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">n</span><span class="s0">)}}))}</span><span class="s1">r</span><span class="s0">=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">concat</span><span class="s0">(</span><span class="s1">l</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">==</span><span class="s3">1</span><span class="s0">||</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">==</span><span class="s3">2</span><span class="s0">){</span><span class="s1">n</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s1">o</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]}}</span><span class="s4">return </span><span class="s1">o</span><span class="s0">};</span><span class="s1">f</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">setGraphManager</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">=</span><span class="s1">t</span><span class="s0">};</span><span class="s1">t</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">=</span><span class="s1">f</span><span class="s0">},</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s2">&quot;use strict&quot;</span><span class="s0">;</span><span class="s4">function </span><span class="s1">i</span><span class="s0">(){}</span><span class="s1">i</span><span class="s0">.</span><span class="s1">seed</span><span class="s0">=</span><span class="s3">1</span><span class="s0">;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">x</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">nextDouble</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s1">i</span><span class="s0">.</span><span class="s1">x</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">sin</span><span class="s0">(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">seed</span><span class="s0">++)*</span><span class="s3">1e4</span><span class="s0">;</span><span class="s4">return </span><span class="s1">i</span><span class="s0">.</span><span class="s1">x</span><span class="s0">-</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">floor</span><span class="s0">(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">x</span><span class="s0">)};</span><span class="s1">t</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">=</span><span class="s1">i</span><span class="s0">},</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s2">&quot;use strict&quot;</span><span class="s0">;</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">5</span><span class="s0">);</span><span class="s4">function </span><span class="s1">n</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">lworldOrgX</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">lworldOrgY</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">ldeviceOrgX</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">ldeviceOrgY</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">lworldExtX</span><span class="s0">=</span><span class="s3">1</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">lworldExtY</span><span class="s0">=</span><span class="s3">1</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">ldeviceExtX</span><span class="s0">=</span><span class="s3">1</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">ldeviceExtY</span><span class="s0">=</span><span class="s3">1</span><span class="s0">}</span><span class="s1">n</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getWorldOrgX</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">lworldOrgX</span><span class="s0">};</span><span class="s1">n</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">setWorldOrgX</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">lworldOrgX</span><span class="s0">=</span><span class="s1">t</span><span class="s0">};</span><span class="s1">n</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getWorldOrgY</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">lworldOrgY</span><span class="s0">};</span><span class="s1">n</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">setWorldOrgY</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">lworldOrgY</span><span class="s0">=</span><span class="s1">t</span><span class="s0">};</span><span class="s1">n</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getWorldExtX</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">lworldExtX</span><span class="s0">};</span><span class="s1">n</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">setWorldExtX</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">lworldExtX</span><span class="s0">=</span><span class="s1">t</span><span class="s0">};</span><span class="s1">n</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getWorldExtY</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">lworldExtY</span><span class="s0">};</span><span class="s1">n</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">setWorldExtY</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">lworldExtY</span><span class="s0">=</span><span class="s1">t</span><span class="s0">};</span><span class="s1">n</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getDeviceOrgX</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">ldeviceOrgX</span><span class="s0">};</span><span class="s1">n</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">setDeviceOrgX</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">ldeviceOrgX</span><span class="s0">=</span><span class="s1">t</span><span class="s0">};</span><span class="s1">n</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getDeviceOrgY</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">ldeviceOrgY</span><span class="s0">};</span><span class="s1">n</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">setDeviceOrgY</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">ldeviceOrgY</span><span class="s0">=</span><span class="s1">t</span><span class="s0">};</span><span class="s1">n</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getDeviceExtX</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">ldeviceExtX</span><span class="s0">};</span><span class="s1">n</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">setDeviceExtX</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">ldeviceExtX</span><span class="s0">=</span><span class="s1">t</span><span class="s0">};</span><span class="s1">n</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getDeviceExtY</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">ldeviceExtY</span><span class="s0">};</span><span class="s1">n</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">setDeviceExtY</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">ldeviceExtY</span><span class="s0">=</span><span class="s1">t</span><span class="s0">};</span><span class="s1">n</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">transformX</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">lworldExtX</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">!=</span><span class="s3">0</span><span class="s0">){</span><span class="s1">e</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">ldeviceOrgX</span><span class="s0">+(</span><span class="s1">t</span><span class="s0">-</span><span class="s4">this</span><span class="s0">.</span><span class="s1">lworldOrgX</span><span class="s0">)*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">ldeviceExtX</span><span class="s0">/</span><span class="s1">r</span><span class="s0">}</span><span class="s4">return </span><span class="s1">e</span><span class="s0">};</span><span class="s1">n</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">transformY</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">lworldExtY</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">!=</span><span class="s3">0</span><span class="s0">){</span><span class="s1">e</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">ldeviceOrgY</span><span class="s0">+(</span><span class="s1">t</span><span class="s0">-</span><span class="s4">this</span><span class="s0">.</span><span class="s1">lworldOrgY</span><span class="s0">)*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">ldeviceExtY</span><span class="s0">/</span><span class="s1">r</span><span class="s0">}</span><span class="s4">return </span><span class="s1">e</span><span class="s0">};</span><span class="s1">n</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">inverseTransformX</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">ldeviceExtX</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">!=</span><span class="s3">0</span><span class="s0">){</span><span class="s1">e</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">lworldOrgX</span><span class="s0">+(</span><span class="s1">t</span><span class="s0">-</span><span class="s4">this</span><span class="s0">.</span><span class="s1">ldeviceOrgX</span><span class="s0">)*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">lworldExtX</span><span class="s0">/</span><span class="s1">r</span><span class="s0">}</span><span class="s4">return </span><span class="s1">e</span><span class="s0">};</span><span class="s1">n</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">inverseTransformY</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">ldeviceExtY</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">!=</span><span class="s3">0</span><span class="s0">){</span><span class="s1">e</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">lworldOrgY</span><span class="s0">+(</span><span class="s1">t</span><span class="s0">-</span><span class="s4">this</span><span class="s0">.</span><span class="s1">ldeviceOrgY</span><span class="s0">)*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">lworldExtY</span><span class="s0">/</span><span class="s1">r</span><span class="s0">}</span><span class="s4">return </span><span class="s1">e</span><span class="s0">};</span><span class="s1">n</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">inverseTransformPoint</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s4">new </span><span class="s1">i</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">inverseTransformX</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">x</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">inverseTransformY</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">y</span><span class="s0">));</span><span class="s4">return </span><span class="s1">e</span><span class="s0">};</span><span class="s1">t</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">=</span><span class="s1">n</span><span class="s0">},</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s2">&quot;use strict&quot;</span><span class="s0">;</span><span class="s4">function </span><span class="s1">i</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">Array</span><span class="s0">.</span><span class="s1">isArray</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">r</span><span class="s0">=</span><span class="s1">Array</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">length</span><span class="s0">);</span><span class="s1">e</span><span class="s0">&lt;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">e</span><span class="s0">++){</span><span class="s1">r</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]=</span><span class="s1">t</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]}</span><span class="s4">return </span><span class="s1">r</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">return </span><span class="s1">Array</span><span class="s0">.</span><span class="s1">from</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)}}</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">15</span><span class="s0">);</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">4</span><span class="s0">);</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">0</span><span class="s0">);</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">8</span><span class="s0">);</span><span class="s4">var </span><span class="s1">h</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">9</span><span class="s0">);</span><span class="s4">function </span><span class="s1">l</span><span class="s0">(){</span><span class="s1">n</span><span class="s0">.</span><span class="s1">call</span><span class="s0">(</span><span class="s4">this</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">useSmartIdealEdgeLengthCalculation</span><span class="s0">=</span><span class="s1">o</span><span class="s0">.</span><span class="s1">DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">gravityConstant</span><span class="s0">=</span><span class="s1">o</span><span class="s0">.</span><span class="s1">DEFAULT_GRAVITY_STRENGTH</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">compoundGravityConstant</span><span class="s0">=</span><span class="s1">o</span><span class="s0">.</span><span class="s1">DEFAULT_COMPOUND_GRAVITY_STRENGTH</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">gravityRangeFactor</span><span class="s0">=</span><span class="s1">o</span><span class="s0">.</span><span class="s1">DEFAULT_GRAVITY_RANGE_FACTOR</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">compoundGravityRangeFactor</span><span class="s0">=</span><span class="s1">o</span><span class="s0">.</span><span class="s1">DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">displacementThresholdPerNode</span><span class="s0">=</span><span class="s3">3</span><span class="s0">*</span><span class="s1">o</span><span class="s0">.</span><span class="s1">DEFAULT_EDGE_LENGTH</span><span class="s0">/</span><span class="s3">100</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">coolingFactor</span><span class="s0">=</span><span class="s1">o</span><span class="s0">.</span><span class="s1">DEFAULT_COOLING_FACTOR_INCREMENTAL</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">initialCoolingFactor</span><span class="s0">=</span><span class="s1">o</span><span class="s0">.</span><span class="s1">DEFAULT_COOLING_FACTOR_INCREMENTAL</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">totalDisplacement</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">oldTotalDisplacement</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">maxIterations</span><span class="s0">=</span><span class="s1">o</span><span class="s0">.</span><span class="s1">MAX_ITERATIONS</span><span class="s0">}</span><span class="s1">l</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">=</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">create</span><span class="s0">(</span><span class="s1">n</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">);</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">c </span><span class="s4">in </span><span class="s1">n</span><span class="s0">){</span><span class="s1">l</span><span class="s0">[</span><span class="s1">c</span><span class="s0">]=</span><span class="s1">n</span><span class="s0">[</span><span class="s1">c</span><span class="s0">]}</span><span class="s1">l</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">initParameters</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s1">n</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">initParameters</span><span class="s0">.</span><span class="s1">call</span><span class="s0">(</span><span class="s4">this</span><span class="s0">,</span><span class="s1">arguments</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">totalIterations</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">notAnimatedIterations</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">useFRGridVariant</span><span class="s0">=</span><span class="s1">o</span><span class="s0">.</span><span class="s1">DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">grid</span><span class="s0">=[]};</span><span class="s1">l</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">calcIdealEdgeLengths</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">var </span><span class="s1">t</span><span class="s0">;</span><span class="s4">var </span><span class="s1">e</span><span class="s0">;</span><span class="s4">var </span><span class="s1">r</span><span class="s0">;</span><span class="s4">var </span><span class="s1">i</span><span class="s0">;</span><span class="s4">var </span><span class="s1">n</span><span class="s0">;</span><span class="s4">var </span><span class="s1">s</span><span class="s0">;</span><span class="s4">var </span><span class="s1">h</span><span class="s0">;</span><span class="s4">var </span><span class="s1">l</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getGraphManager</span><span class="s0">().</span><span class="s1">getAllEdges</span><span class="s0">();</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">c</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">c</span><span class="s0">&lt;</span><span class="s1">l</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">c</span><span class="s0">++){</span><span class="s1">t</span><span class="s0">=</span><span class="s1">l</span><span class="s0">[</span><span class="s1">c</span><span class="s0">];</span><span class="s1">e</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">idealLength</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isInterGraph</span><span class="s0">){</span><span class="s1">i</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getSource</span><span class="s0">();</span><span class="s1">n</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getTarget</span><span class="s0">();</span><span class="s1">s</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getSourceInLca</span><span class="s0">().</span><span class="s1">getEstimatedSize</span><span class="s0">();</span><span class="s1">h</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getTargetInLca</span><span class="s0">().</span><span class="s1">getEstimatedSize</span><span class="s0">();</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">useSmartIdealEdgeLengthCalculation</span><span class="s0">){</span><span class="s1">t</span><span class="s0">.</span><span class="s1">idealLength</span><span class="s0">+=</span><span class="s1">s</span><span class="s0">+</span><span class="s1">h</span><span class="s0">-</span><span class="s3">2</span><span class="s0">*</span><span class="s1">a</span><span class="s0">.</span><span class="s1">SIMPLE_NODE_SIZE</span><span class="s0">}</span><span class="s1">r</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getLca</span><span class="s0">().</span><span class="s1">getInclusionTreeDepth</span><span class="s0">();</span><span class="s1">t</span><span class="s0">.</span><span class="s1">idealLength</span><span class="s0">+=</span><span class="s1">e</span><span class="s0">*</span><span class="s1">o</span><span class="s0">.</span><span class="s1">PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR</span><span class="s0">*(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">getInclusionTreeDepth</span><span class="s0">()+</span><span class="s1">n</span><span class="s0">.</span><span class="s1">getInclusionTreeDepth</span><span class="s0">()-</span><span class="s3">2</span><span class="s0">*</span><span class="s1">r</span><span class="s0">)}}};</span><span class="s1">l</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">initSpringEmbedder</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">var </span><span class="s1">t</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getAllNodes</span><span class="s0">().</span><span class="s1">length</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">incremental</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">&gt;</span><span class="s1">o</span><span class="s0">.</span><span class="s1">ADAPTATION_LOWER_NODE_LIMIT</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">coolingFactor</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">max</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">coolingFactor</span><span class="s0">*</span><span class="s1">o</span><span class="s0">.</span><span class="s1">COOLING_ADAPTATION_FACTOR</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">coolingFactor</span><span class="s0">-(</span><span class="s1">t</span><span class="s0">-</span><span class="s1">o</span><span class="s0">.</span><span class="s1">ADAPTATION_LOWER_NODE_LIMIT</span><span class="s0">)/(</span><span class="s1">o</span><span class="s0">.</span><span class="s1">ADAPTATION_UPPER_NODE_LIMIT</span><span class="s0">-</span><span class="s1">o</span><span class="s0">.</span><span class="s1">ADAPTATION_LOWER_NODE_LIMIT</span><span class="s0">)*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">coolingFactor</span><span class="s0">*(</span><span class="s3">1</span><span class="s0">-</span><span class="s1">o</span><span class="s0">.</span><span class="s1">COOLING_ADAPTATION_FACTOR</span><span class="s0">))}</span><span class="s4">this</span><span class="s0">.</span><span class="s1">maxNodeDisplacement</span><span class="s0">=</span><span class="s1">o</span><span class="s0">.</span><span class="s1">MAX_NODE_DISPLACEMENT_INCREMENTAL</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">&gt;</span><span class="s1">o</span><span class="s0">.</span><span class="s1">ADAPTATION_LOWER_NODE_LIMIT</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">coolingFactor</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">max</span><span class="s0">(</span><span class="s1">o</span><span class="s0">.</span><span class="s1">COOLING_ADAPTATION_FACTOR</span><span class="s0">,</span><span class="s3">1</span><span class="s0">-(</span><span class="s1">t</span><span class="s0">-</span><span class="s1">o</span><span class="s0">.</span><span class="s1">ADAPTATION_LOWER_NODE_LIMIT</span><span class="s0">)/(</span><span class="s1">o</span><span class="s0">.</span><span class="s1">ADAPTATION_UPPER_NODE_LIMIT</span><span class="s0">-</span><span class="s1">o</span><span class="s0">.</span><span class="s1">ADAPTATION_LOWER_NODE_LIMIT</span><span class="s0">)*(</span><span class="s3">1</span><span class="s0">-</span><span class="s1">o</span><span class="s0">.</span><span class="s1">COOLING_ADAPTATION_FACTOR</span><span class="s0">))}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">this</span><span class="s0">.</span><span class="s1">coolingFactor</span><span class="s0">=</span><span class="s3">1</span><span class="s0">}</span><span class="s4">this</span><span class="s0">.</span><span class="s1">initialCoolingFactor</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">coolingFactor</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">maxNodeDisplacement</span><span class="s0">=</span><span class="s1">o</span><span class="s0">.</span><span class="s1">MAX_NODE_DISPLACEMENT</span><span class="s0">}</span><span class="s4">this</span><span class="s0">.</span><span class="s1">maxIterations</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">max</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getAllNodes</span><span class="s0">().</span><span class="s1">length</span><span class="s0">*</span><span class="s3">5</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">maxIterations</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">displacementThresholdPerNode</span><span class="s0">=</span><span class="s3">3</span><span class="s0">*</span><span class="s1">o</span><span class="s0">.</span><span class="s1">DEFAULT_EDGE_LENGTH</span><span class="s0">/</span><span class="s3">100</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">totalDisplacementThreshold</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">displacementThresholdPerNode</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getAllNodes</span><span class="s0">().</span><span class="s1">length</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">repulsionRange</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">calcRepulsionRange</span><span class="s0">()};</span><span class="s1">l</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">calcSpringForces</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">var </span><span class="s1">t</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getAllEdges</span><span class="s0">();</span><span class="s4">var </span><span class="s1">e</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">r</span><span class="s0">&lt;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">r</span><span class="s0">++){</span><span class="s1">e</span><span class="s0">=</span><span class="s1">t</span><span class="s0">[</span><span class="s1">r</span><span class="s0">];</span><span class="s4">this</span><span class="s0">.</span><span class="s1">calcSpringForce</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">idealLength</span><span class="s0">)}};</span><span class="s1">l</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">calcRepulsionForces</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">var </span><span class="s1">t</span><span class="s0">=</span><span class="s1">arguments</span><span class="s0">.</span><span class="s1">length</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">&amp;&amp;</span><span class="s1">arguments</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]!==</span><span class="s1">undefined</span><span class="s0">?</span><span class="s1">arguments</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]:</span><span class="s4">true</span><span class="s0">;</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s1">arguments</span><span class="s0">.</span><span class="s1">length</span><span class="s0">&gt;</span><span class="s3">1</span><span class="s0">&amp;&amp;</span><span class="s1">arguments</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]!==</span><span class="s1">undefined</span><span class="s0">?</span><span class="s1">arguments</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]:</span><span class="s4">false</span><span class="s0">;</span><span class="s4">var </span><span class="s1">r</span><span class="s0">,</span><span class="s1">i</span><span class="s0">;</span><span class="s4">var </span><span class="s1">n</span><span class="s0">,</span><span class="s1">a</span><span class="s0">;</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getAllNodes</span><span class="s0">();</span><span class="s4">var </span><span class="s1">h</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">useFRGridVariant</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">totalIterations</span><span class="s0">%</span><span class="s1">o</span><span class="s0">.</span><span class="s1">GRID_CALCULATION_CHECK_PERIOD</span><span class="s0">==</span><span class="s3">1</span><span class="s0">&amp;&amp;</span><span class="s1">t</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">updateGrid</span><span class="s0">()}</span><span class="s1">h</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Set</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s1">r</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">r</span><span class="s0">&lt;</span><span class="s1">s</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">r</span><span class="s0">++){</span><span class="s1">n</span><span class="s0">=</span><span class="s1">s</span><span class="s0">[</span><span class="s1">r</span><span class="s0">];</span><span class="s4">this</span><span class="s0">.</span><span class="s1">calculateRepulsionForceOfANode</span><span class="s0">(</span><span class="s1">n</span><span class="s0">,</span><span class="s1">h</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">);</span><span class="s1">h</span><span class="s0">.</span><span class="s1">add</span><span class="s0">(</span><span class="s1">n</span><span class="s0">)}}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">for</span><span class="s0">(</span><span class="s1">r</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">r</span><span class="s0">&lt;</span><span class="s1">s</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">r</span><span class="s0">++){</span><span class="s1">n</span><span class="s0">=</span><span class="s1">s</span><span class="s0">[</span><span class="s1">r</span><span class="s0">];</span><span class="s4">for</span><span class="s0">(</span><span class="s1">i</span><span class="s0">=</span><span class="s1">r</span><span class="s0">+</span><span class="s3">1</span><span class="s0">;</span><span class="s1">i</span><span class="s0">&lt;</span><span class="s1">s</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">i</span><span class="s0">++){</span><span class="s1">a</span><span class="s0">=</span><span class="s1">s</span><span class="s0">[</span><span class="s1">i</span><span class="s0">];</span><span class="s4">if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">.</span><span class="s1">getOwner</span><span class="s0">()!=</span><span class="s1">a</span><span class="s0">.</span><span class="s1">getOwner</span><span class="s0">()){</span><span class="s4">continue</span><span class="s0">}</span><span class="s4">this</span><span class="s0">.</span><span class="s1">calcRepulsionForce</span><span class="s0">(</span><span class="s1">n</span><span class="s0">,</span><span class="s1">a</span><span class="s0">)}}}};</span><span class="s1">l</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">calcGravitationalForces</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">var </span><span class="s1">t</span><span class="s0">;</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getAllNodesToApplyGravitation</span><span class="s0">();</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">r</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">r</span><span class="s0">++){</span><span class="s1">t</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">r</span><span class="s0">];</span><span class="s4">this</span><span class="s0">.</span><span class="s1">calcGravitationalForce</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)}};</span><span class="s1">l</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">moveNodes</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">var </span><span class="s1">t</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getAllNodes</span><span class="s0">();</span><span class="s4">var </span><span class="s1">e</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">r</span><span class="s0">&lt;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">r</span><span class="s0">++){</span><span class="s1">e</span><span class="s0">=</span><span class="s1">t</span><span class="s0">[</span><span class="s1">r</span><span class="s0">];</span><span class="s1">e</span><span class="s0">.</span><span class="s1">move</span><span class="s0">()}};</span><span class="s1">l</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">calcSpringForce</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getSource</span><span class="s0">();</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getTarget</span><span class="s0">();</span><span class="s4">var </span><span class="s1">n</span><span class="s0">;</span><span class="s4">var </span><span class="s1">o</span><span class="s0">;</span><span class="s4">var </span><span class="s1">a</span><span class="s0">;</span><span class="s4">var </span><span class="s1">s</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">uniformLeafNodeSizes</span><span class="s0">&amp;&amp;</span><span class="s1">r</span><span class="s0">.</span><span class="s1">getChild</span><span class="s0">()==</span><span class="s4">null</span><span class="s0">&amp;&amp;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">getChild</span><span class="s0">()==</span><span class="s4">null</span><span class="s0">){</span><span class="s1">t</span><span class="s0">.</span><span class="s1">updateLengthSimple</span><span class="s0">()}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">t</span><span class="s0">.</span><span class="s1">updateLength</span><span class="s0">();</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isOverlapingSourceAndTarget</span><span class="s0">){</span><span class="s4">return</span><span class="s0">}}</span><span class="s1">n</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getLength</span><span class="s0">();</span><span class="s4">if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">==</span><span class="s3">0</span><span class="s0">)</span><span class="s4">return</span><span class="s0">;</span><span class="s1">o</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">edgeElasticity</span><span class="s0">*(</span><span class="s1">n</span><span class="s0">-</span><span class="s1">e</span><span class="s0">);</span><span class="s1">a</span><span class="s0">=</span><span class="s1">o</span><span class="s0">*(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">lengthX</span><span class="s0">/</span><span class="s1">n</span><span class="s0">);</span><span class="s1">s</span><span class="s0">=</span><span class="s1">o</span><span class="s0">*(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">lengthY</span><span class="s0">/</span><span class="s1">n</span><span class="s0">);</span><span class="s1">r</span><span class="s0">.</span><span class="s1">springForceX</span><span class="s0">+=</span><span class="s1">a</span><span class="s0">;</span><span class="s1">r</span><span class="s0">.</span><span class="s1">springForceY</span><span class="s0">+=</span><span class="s1">s</span><span class="s0">;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">springForceX</span><span class="s0">-=</span><span class="s1">a</span><span class="s0">;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">springForceY</span><span class="s0">-=</span><span class="s1">s</span><span class="s0">};</span><span class="s1">l</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">calcRepulsionForce</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getRect</span><span class="s0">();</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getRect</span><span class="s0">();</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Array</span><span class="s0">(</span><span class="s3">2</span><span class="s0">);</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Array</span><span class="s0">(</span><span class="s3">4</span><span class="s0">);</span><span class="s4">var </span><span class="s1">l</span><span class="s0">;</span><span class="s4">var </span><span class="s1">c</span><span class="s0">;</span><span class="s4">var </span><span class="s1">d</span><span class="s0">;</span><span class="s4">var </span><span class="s1">f</span><span class="s0">;</span><span class="s4">var </span><span class="s1">g</span><span class="s0">;</span><span class="s4">var </span><span class="s1">u</span><span class="s0">;</span><span class="s4">var </span><span class="s1">p</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">intersects</span><span class="s0">(</span><span class="s1">i</span><span class="s0">)){</span><span class="s1">s</span><span class="s0">.</span><span class="s1">calcSeparationAmount</span><span class="s0">(</span><span class="s1">r</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">o</span><span class="s0">.</span><span class="s1">DEFAULT_EDGE_LENGTH</span><span class="s0">/</span><span class="s3">2</span><span class="s0">);</span><span class="s1">u</span><span class="s0">=</span><span class="s3">2</span><span class="s0">*</span><span class="s1">n</span><span class="s0">[</span><span class="s3">0</span><span class="s0">];</span><span class="s1">p</span><span class="s0">=</span><span class="s3">2</span><span class="s0">*</span><span class="s1">n</span><span class="s0">[</span><span class="s3">1</span><span class="s0">];</span><span class="s4">var </span><span class="s1">v</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">noOfChildren</span><span class="s0">*</span><span class="s1">e</span><span class="s0">.</span><span class="s1">noOfChildren</span><span class="s0">/(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">noOfChildren</span><span class="s0">+</span><span class="s1">e</span><span class="s0">.</span><span class="s1">noOfChildren</span><span class="s0">);</span><span class="s1">t</span><span class="s0">.</span><span class="s1">repulsionForceX</span><span class="s0">-=</span><span class="s1">v</span><span class="s0">*</span><span class="s1">u</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">repulsionForceY</span><span class="s0">-=</span><span class="s1">v</span><span class="s0">*</span><span class="s1">p</span><span class="s0">;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">repulsionForceX</span><span class="s0">+=</span><span class="s1">v</span><span class="s0">*</span><span class="s1">u</span><span class="s0">;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">repulsionForceY</span><span class="s0">+=</span><span class="s1">v</span><span class="s0">*</span><span class="s1">p</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">uniformLeafNodeSizes</span><span class="s0">&amp;&amp;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getChild</span><span class="s0">()==</span><span class="s4">null</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getChild</span><span class="s0">()==</span><span class="s4">null</span><span class="s0">){</span><span class="s1">l</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">getCenterX</span><span class="s0">()-</span><span class="s1">r</span><span class="s0">.</span><span class="s1">getCenterX</span><span class="s0">();</span><span class="s1">c</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">getCenterY</span><span class="s0">()-</span><span class="s1">r</span><span class="s0">.</span><span class="s1">getCenterY</span><span class="s0">()}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">s</span><span class="s0">.</span><span class="s1">getIntersection</span><span class="s0">(</span><span class="s1">r</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">a</span><span class="s0">);</span><span class="s1">l</span><span class="s0">=</span><span class="s1">a</span><span class="s0">[</span><span class="s3">2</span><span class="s0">]-</span><span class="s1">a</span><span class="s0">[</span><span class="s3">0</span><span class="s0">];</span><span class="s1">c</span><span class="s0">=</span><span class="s1">a</span><span class="s0">[</span><span class="s3">3</span><span class="s0">]-</span><span class="s1">a</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">abs</span><span class="s0">(</span><span class="s1">l</span><span class="s0">)&lt;</span><span class="s1">o</span><span class="s0">.</span><span class="s1">MIN_REPULSION_DIST</span><span class="s0">){</span><span class="s1">l</span><span class="s0">=</span><span class="s1">h</span><span class="s0">.</span><span class="s1">sign</span><span class="s0">(</span><span class="s1">l</span><span class="s0">)*</span><span class="s1">o</span><span class="s0">.</span><span class="s1">MIN_REPULSION_DIST</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">abs</span><span class="s0">(</span><span class="s1">c</span><span class="s0">)&lt;</span><span class="s1">o</span><span class="s0">.</span><span class="s1">MIN_REPULSION_DIST</span><span class="s0">){</span><span class="s1">c</span><span class="s0">=</span><span class="s1">h</span><span class="s0">.</span><span class="s1">sign</span><span class="s0">(</span><span class="s1">c</span><span class="s0">)*</span><span class="s1">o</span><span class="s0">.</span><span class="s1">MIN_REPULSION_DIST</span><span class="s0">}</span><span class="s1">d</span><span class="s0">=</span><span class="s1">l</span><span class="s0">*</span><span class="s1">l</span><span class="s0">+</span><span class="s1">c</span><span class="s0">*</span><span class="s1">c</span><span class="s0">;</span><span class="s1">f</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">sqrt</span><span class="s0">(</span><span class="s1">d</span><span class="s0">);</span><span class="s1">g</span><span class="s0">=(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">nodeRepulsion</span><span class="s0">/</span><span class="s3">2</span><span class="s0">+</span><span class="s1">e</span><span class="s0">.</span><span class="s1">nodeRepulsion</span><span class="s0">/</span><span class="s3">2</span><span class="s0">)*</span><span class="s1">t</span><span class="s0">.</span><span class="s1">noOfChildren</span><span class="s0">*</span><span class="s1">e</span><span class="s0">.</span><span class="s1">noOfChildren</span><span class="s0">/</span><span class="s1">d</span><span class="s0">;</span><span class="s1">u</span><span class="s0">=</span><span class="s1">g</span><span class="s0">*</span><span class="s1">l</span><span class="s0">/</span><span class="s1">f</span><span class="s0">;</span><span class="s1">p</span><span class="s0">=</span><span class="s1">g</span><span class="s0">*</span><span class="s1">c</span><span class="s0">/</span><span class="s1">f</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">repulsionForceX</span><span class="s0">-=</span><span class="s1">u</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">repulsionForceY</span><span class="s0">-=</span><span class="s1">p</span><span class="s0">;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">repulsionForceX</span><span class="s0">+=</span><span class="s1">u</span><span class="s0">;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">repulsionForceY</span><span class="s0">+=</span><span class="s1">p</span><span class="s0">}};</span><span class="s1">l</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">calcGravitationalForce</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">;</span><span class="s4">var </span><span class="s1">r</span><span class="s0">;</span><span class="s4">var </span><span class="s1">i</span><span class="s0">;</span><span class="s4">var </span><span class="s1">n</span><span class="s0">;</span><span class="s4">var </span><span class="s1">o</span><span class="s0">;</span><span class="s4">var </span><span class="s1">a</span><span class="s0">;</span><span class="s4">var </span><span class="s1">s</span><span class="s0">;</span><span class="s4">var </span><span class="s1">h</span><span class="s0">;</span><span class="s1">e</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getOwner</span><span class="s0">();</span><span class="s1">r</span><span class="s0">=(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getRight</span><span class="s0">()+</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getLeft</span><span class="s0">())/</span><span class="s3">2</span><span class="s0">;</span><span class="s1">i</span><span class="s0">=(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getTop</span><span class="s0">()+</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getBottom</span><span class="s0">())/</span><span class="s3">2</span><span class="s0">;</span><span class="s1">n</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getCenterX</span><span class="s0">()-</span><span class="s1">r</span><span class="s0">;</span><span class="s1">o</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getCenterY</span><span class="s0">()-</span><span class="s1">i</span><span class="s0">;</span><span class="s1">a</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">abs</span><span class="s0">(</span><span class="s1">n</span><span class="s0">)+</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getWidth</span><span class="s0">()/</span><span class="s3">2</span><span class="s0">;</span><span class="s1">s</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">abs</span><span class="s0">(</span><span class="s1">o</span><span class="s0">)+</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getHeight</span><span class="s0">()/</span><span class="s3">2</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getOwner</span><span class="s0">()==</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">getRoot</span><span class="s0">()){</span><span class="s1">h</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getEstimatedSize</span><span class="s0">()*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">gravityRangeFactor</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">a</span><span class="s0">&gt;</span><span class="s1">h</span><span class="s0">||</span><span class="s1">s</span><span class="s0">&gt;</span><span class="s1">h</span><span class="s0">){</span><span class="s1">t</span><span class="s0">.</span><span class="s1">gravitationForceX</span><span class="s0">=-</span><span class="s4">this</span><span class="s0">.</span><span class="s1">gravityConstant</span><span class="s0">*</span><span class="s1">n</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">gravitationForceY</span><span class="s0">=-</span><span class="s4">this</span><span class="s0">.</span><span class="s1">gravityConstant</span><span class="s0">*</span><span class="s1">o</span><span class="s0">}}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">h</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getEstimatedSize</span><span class="s0">()*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">compoundGravityRangeFactor</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">a</span><span class="s0">&gt;</span><span class="s1">h</span><span class="s0">||</span><span class="s1">s</span><span class="s0">&gt;</span><span class="s1">h</span><span class="s0">){</span><span class="s1">t</span><span class="s0">.</span><span class="s1">gravitationForceX</span><span class="s0">=-</span><span class="s4">this</span><span class="s0">.</span><span class="s1">gravityConstant</span><span class="s0">*</span><span class="s1">n</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">compoundGravityConstant</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">gravitationForceY</span><span class="s0">=-</span><span class="s4">this</span><span class="s0">.</span><span class="s1">gravityConstant</span><span class="s0">*</span><span class="s1">o</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">compoundGravityConstant</span><span class="s0">}}};</span><span class="s1">l</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">isConverged</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">var </span><span class="s1">t</span><span class="s0">;</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s4">false</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">totalIterations</span><span class="s0">&gt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">maxIterations</span><span class="s0">/</span><span class="s3">3</span><span class="s0">){</span><span class="s1">e</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">abs</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">totalDisplacement</span><span class="s0">-</span><span class="s4">this</span><span class="s0">.</span><span class="s1">oldTotalDisplacement</span><span class="s0">)&lt;</span><span class="s3">2</span><span class="s0">}</span><span class="s1">t</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">totalDisplacement</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">totalDisplacementThreshold</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">oldTotalDisplacement</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">totalDisplacement</span><span class="s0">;</span><span class="s4">return </span><span class="s1">t</span><span class="s0">||</span><span class="s1">e</span><span class="s0">};</span><span class="s1">l</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">animate</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">animationDuringLayout</span><span class="s0">&amp;&amp;!</span><span class="s4">this</span><span class="s0">.</span><span class="s1">isSubLayout</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">notAnimatedIterations</span><span class="s0">==</span><span class="s4">this</span><span class="s0">.</span><span class="s1">animationPeriod</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">update</span><span class="s0">();</span><span class="s4">this</span><span class="s0">.</span><span class="s1">notAnimatedIterations</span><span class="s0">=</span><span class="s3">0</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">this</span><span class="s0">.</span><span class="s1">notAnimatedIterations</span><span class="s0">++}}};</span><span class="s1">l</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">calcNoOfChildrenForAllNodes</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">var </span><span class="s1">t</span><span class="s0">;</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">getAllNodes</span><span class="s0">();</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">r</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">r</span><span class="s0">++){</span><span class="s1">t</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">r</span><span class="s0">];</span><span class="s1">t</span><span class="s0">.</span><span class="s1">noOfChildren</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getNoOfChildren</span><span class="s0">()}};</span><span class="s1">l</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">calcGrid</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">e</span><span class="s0">=</span><span class="s1">parseInt</span><span class="s0">(</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">ceil</span><span class="s0">((</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getRight</span><span class="s0">()-</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getLeft</span><span class="s0">())/</span><span class="s4">this</span><span class="s0">.</span><span class="s1">repulsionRange</span><span class="s0">));</span><span class="s1">r</span><span class="s0">=</span><span class="s1">parseInt</span><span class="s0">(</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">ceil</span><span class="s0">((</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getBottom</span><span class="s0">()-</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getTop</span><span class="s0">())/</span><span class="s4">this</span><span class="s0">.</span><span class="s1">repulsionRange</span><span class="s0">));</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Array</span><span class="s0">(</span><span class="s1">e</span><span class="s0">);</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">n</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">;</span><span class="s1">n</span><span class="s0">++){</span><span class="s1">i</span><span class="s0">[</span><span class="s1">n</span><span class="s0">]=</span><span class="s4">new </span><span class="s1">Array</span><span class="s0">(</span><span class="s1">r</span><span class="s0">)}</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">n</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">;</span><span class="s1">n</span><span class="s0">++){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">o</span><span class="s0">&lt;</span><span class="s1">r</span><span class="s0">;</span><span class="s1">o</span><span class="s0">++){</span><span class="s1">i</span><span class="s0">[</span><span class="s1">n</span><span class="s0">][</span><span class="s1">o</span><span class="s0">]=</span><span class="s4">new </span><span class="s1">Array</span><span class="s0">}}</span><span class="s4">return </span><span class="s1">i</span><span class="s0">};</span><span class="s1">l</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">addNodeToGrid</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">i</span><span class="s0">=</span><span class="s1">parseInt</span><span class="s0">(</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">floor</span><span class="s0">((</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getRect</span><span class="s0">().</span><span class="s1">x</span><span class="s0">-</span><span class="s1">e</span><span class="s0">)/</span><span class="s4">this</span><span class="s0">.</span><span class="s1">repulsionRange</span><span class="s0">));</span><span class="s1">n</span><span class="s0">=</span><span class="s1">parseInt</span><span class="s0">(</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">floor</span><span class="s0">((</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getRect</span><span class="s0">().</span><span class="s1">width</span><span class="s0">+</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getRect</span><span class="s0">().</span><span class="s1">x</span><span class="s0">-</span><span class="s1">e</span><span class="s0">)/</span><span class="s4">this</span><span class="s0">.</span><span class="s1">repulsionRange</span><span class="s0">));</span><span class="s1">o</span><span class="s0">=</span><span class="s1">parseInt</span><span class="s0">(</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">floor</span><span class="s0">((</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getRect</span><span class="s0">().</span><span class="s1">y</span><span class="s0">-</span><span class="s1">r</span><span class="s0">)/</span><span class="s4">this</span><span class="s0">.</span><span class="s1">repulsionRange</span><span class="s0">));</span><span class="s1">a</span><span class="s0">=</span><span class="s1">parseInt</span><span class="s0">(</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">floor</span><span class="s0">((</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getRect</span><span class="s0">().</span><span class="s1">height</span><span class="s0">+</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getRect</span><span class="s0">().</span><span class="s1">y</span><span class="s0">-</span><span class="s1">r</span><span class="s0">)/</span><span class="s4">this</span><span class="s0">.</span><span class="s1">repulsionRange</span><span class="s0">));</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s1">i</span><span class="s0">;</span><span class="s1">s</span><span class="s0">&lt;=</span><span class="s1">n</span><span class="s0">;</span><span class="s1">s</span><span class="s0">++){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">h</span><span class="s0">=</span><span class="s1">o</span><span class="s0">;</span><span class="s1">h</span><span class="s0">&lt;=</span><span class="s1">a</span><span class="s0">;</span><span class="s1">h</span><span class="s0">++){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">grid</span><span class="s0">[</span><span class="s1">s</span><span class="s0">][</span><span class="s1">h</span><span class="s0">].</span><span class="s1">push</span><span class="s0">(</span><span class="s1">t</span><span class="s0">);</span><span class="s1">t</span><span class="s0">.</span><span class="s1">setGridCoordinates</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">a</span><span class="s0">)}}};</span><span class="s1">l</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">updateGrid</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">var </span><span class="s1">t</span><span class="s0">;</span><span class="s4">var </span><span class="s1">e</span><span class="s0">;</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getAllNodes</span><span class="s0">();</span><span class="s4">this</span><span class="s0">.</span><span class="s1">grid</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">calcGrid</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">getRoot</span><span class="s0">());</span><span class="s4">for</span><span class="s0">(</span><span class="s1">t</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">t</span><span class="s0">&lt;</span><span class="s1">r</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">t</span><span class="s0">++){</span><span class="s1">e</span><span class="s0">=</span><span class="s1">r</span><span class="s0">[</span><span class="s1">t</span><span class="s0">];</span><span class="s4">this</span><span class="s0">.</span><span class="s1">addNodeToGrid</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">getRoot</span><span class="s0">().</span><span class="s1">getLeft</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">graphManager</span><span class="s0">.</span><span class="s1">getRoot</span><span class="s0">().</span><span class="s1">getTop</span><span class="s0">())}};</span><span class="s1">l</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">calculateRepulsionForceOfANode</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">n</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">totalIterations</span><span class="s0">%</span><span class="s1">o</span><span class="s0">.</span><span class="s1">GRID_CALCULATION_CHECK_PERIOD</span><span class="s0">==</span><span class="s3">1</span><span class="s0">&amp;&amp;</span><span class="s1">r</span><span class="s0">||</span><span class="s1">n</span><span class="s0">){</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Set</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">surrounding</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Array</span><span class="s0">;</span><span class="s4">var </span><span class="s1">s</span><span class="s0">;</span><span class="s4">var </span><span class="s1">h</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">grid</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">l</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">startX</span><span class="s0">-</span><span class="s3">1</span><span class="s0">;</span><span class="s1">l</span><span class="s0">&lt;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">finishX</span><span class="s0">+</span><span class="s3">2</span><span class="s0">;</span><span class="s1">l</span><span class="s0">++){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">c</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">startY</span><span class="s0">-</span><span class="s3">1</span><span class="s0">;</span><span class="s1">c</span><span class="s0">&lt;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">finishY</span><span class="s0">+</span><span class="s3">2</span><span class="s0">;</span><span class="s1">c</span><span class="s0">++){</span><span class="s4">if</span><span class="s0">(!(</span><span class="s1">l</span><span class="s0">&lt;</span><span class="s3">0</span><span class="s0">||</span><span class="s1">c</span><span class="s0">&lt;</span><span class="s3">0</span><span class="s0">||</span><span class="s1">l</span><span class="s0">&gt;=</span><span class="s1">h</span><span class="s0">.</span><span class="s1">length</span><span class="s0">||</span><span class="s1">c</span><span class="s0">&gt;=</span><span class="s1">h</span><span class="s0">[</span><span class="s3">0</span><span class="s0">].</span><span class="s1">length</span><span class="s0">)){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">d</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">d</span><span class="s0">&lt;</span><span class="s1">h</span><span class="s0">[</span><span class="s1">l</span><span class="s0">][</span><span class="s1">c</span><span class="s0">].</span><span class="s1">length</span><span class="s0">;</span><span class="s1">d</span><span class="s0">++){</span><span class="s1">s</span><span class="s0">=</span><span class="s1">h</span><span class="s0">[</span><span class="s1">l</span><span class="s0">][</span><span class="s1">c</span><span class="s0">][</span><span class="s1">d</span><span class="s0">];</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getOwner</span><span class="s0">()!=</span><span class="s1">s</span><span class="s0">.</span><span class="s1">getOwner</span><span class="s0">()||</span><span class="s1">t</span><span class="s0">==</span><span class="s1">s</span><span class="s0">){</span><span class="s4">continue</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">e</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">s</span><span class="s0">)&amp;&amp;!</span><span class="s1">a</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">s</span><span class="s0">)){</span><span class="s4">var </span><span class="s1">f</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">abs</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getCenterX</span><span class="s0">()-</span><span class="s1">s</span><span class="s0">.</span><span class="s1">getCenterX</span><span class="s0">())-(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getWidth</span><span class="s0">()/</span><span class="s3">2</span><span class="s0">+</span><span class="s1">s</span><span class="s0">.</span><span class="s1">getWidth</span><span class="s0">()/</span><span class="s3">2</span><span class="s0">);</span><span class="s4">var </span><span class="s1">g</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">abs</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getCenterY</span><span class="s0">()-</span><span class="s1">s</span><span class="s0">.</span><span class="s1">getCenterY</span><span class="s0">())-(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getHeight</span><span class="s0">()/</span><span class="s3">2</span><span class="s0">+</span><span class="s1">s</span><span class="s0">.</span><span class="s1">getHeight</span><span class="s0">()/</span><span class="s3">2</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">f</span><span class="s0">&lt;=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">repulsionRange</span><span class="s0">&amp;&amp;</span><span class="s1">g</span><span class="s0">&lt;=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">repulsionRange</span><span class="s0">){</span><span class="s1">a</span><span class="s0">.</span><span class="s1">add</span><span class="s0">(</span><span class="s1">s</span><span class="s0">)}}}}}}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">surrounding</span><span class="s0">=[].</span><span class="s1">concat</span><span class="s0">(</span><span class="s1">i</span><span class="s0">(</span><span class="s1">a</span><span class="s0">))}</span><span class="s4">for</span><span class="s0">(</span><span class="s1">l</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">l</span><span class="s0">&lt;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">surrounding</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">l</span><span class="s0">++){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">calcRepulsionForce</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">surrounding</span><span class="s0">[</span><span class="s1">l</span><span class="s0">])}};</span><span class="s1">l</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">calcRepulsionRange</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return </span><span class="s3">0</span><span class="s0">};</span><span class="s1">t</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">=</span><span class="s1">l</span><span class="s0">},</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s2">&quot;use strict&quot;</span><span class="s0">;</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">1</span><span class="s0">);</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">4</span><span class="s0">);</span><span class="s4">function </span><span class="s1">o</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s1">i</span><span class="s0">.</span><span class="s1">call</span><span class="s0">(</span><span class="s4">this</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">idealLength</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">DEFAULT_EDGE_LENGTH</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">edgeElasticity</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">DEFAULT_SPRING_STRENGTH</span><span class="s0">}</span><span class="s1">o</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">=</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">create</span><span class="s0">(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">);</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">a </span><span class="s4">in </span><span class="s1">i</span><span class="s0">){</span><span class="s1">o</span><span class="s0">[</span><span class="s1">a</span><span class="s0">]=</span><span class="s1">i</span><span class="s0">[</span><span class="s1">a</span><span class="s0">]}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">=</span><span class="s1">o</span><span class="s0">},</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s2">&quot;use strict&quot;</span><span class="s0">;</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">3</span><span class="s0">);</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">4</span><span class="s0">);</span><span class="s4">function </span><span class="s1">o</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">){</span><span class="s1">i</span><span class="s0">.</span><span class="s1">call</span><span class="s0">(</span><span class="s4">this</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">nodeRepulsion</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">DEFAULT_REPULSION_STRENGTH</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">springForceX</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">springForceY</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">repulsionForceX</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">repulsionForceY</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">gravitationForceX</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">gravitationForceY</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">displacementX</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">displacementY</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">startX</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">finishX</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">startY</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">finishY</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">surrounding</span><span class="s0">=[]}</span><span class="s1">o</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">=</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">create</span><span class="s0">(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">);</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">a </span><span class="s4">in </span><span class="s1">i</span><span class="s0">){</span><span class="s1">o</span><span class="s0">[</span><span class="s1">a</span><span class="s0">]=</span><span class="s1">i</span><span class="s0">[</span><span class="s1">a</span><span class="s0">]}</span><span class="s1">o</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">setGridCoordinates</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">startX</span><span class="s0">=</span><span class="s1">t</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">finishX</span><span class="s0">=</span><span class="s1">e</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">startY</span><span class="s0">=</span><span class="s1">r</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">finishY</span><span class="s0">=</span><span class="s1">i</span><span class="s0">};</span><span class="s1">t</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">=</span><span class="s1">o</span><span class="s0">},</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s2">&quot;use strict&quot;</span><span class="s0">;</span><span class="s4">function </span><span class="s1">i</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">width</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">height</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">!==</span><span class="s4">null</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">!==</span><span class="s4">null</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">height</span><span class="s0">=</span><span class="s1">e</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">width</span><span class="s0">=</span><span class="s1">t</span><span class="s0">}}</span><span class="s1">i</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getWidth</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">width</span><span class="s0">};</span><span class="s1">i</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">setWidth</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">width</span><span class="s0">=</span><span class="s1">t</span><span class="s0">};</span><span class="s1">i</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">getHeight</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">height</span><span class="s0">};</span><span class="s1">i</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">setHeight</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">height</span><span class="s0">=</span><span class="s1">t</span><span class="s0">};</span><span class="s1">t</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">=</span><span class="s1">i</span><span class="s0">},</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s2">&quot;use strict&quot;</span><span class="s0">;</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">14</span><span class="s0">);</span><span class="s4">function </span><span class="s1">n</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">map</span><span class="s0">={};</span><span class="s4">this</span><span class="s0">.</span><span class="s1">keys</span><span class="s0">=[]}</span><span class="s1">n</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">put</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">createID</span><span class="s0">(</span><span class="s1">t</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(!</span><span class="s4">this</span><span class="s0">.</span><span class="s1">contains</span><span class="s0">(</span><span class="s1">r</span><span class="s0">)){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">map</span><span class="s0">[</span><span class="s1">r</span><span class="s0">]=</span><span class="s1">e</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">keys</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)}};</span><span class="s1">n</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">contains</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">createID</span><span class="s0">(</span><span class="s1">t</span><span class="s0">);</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">map</span><span class="s0">[</span><span class="s1">t</span><span class="s0">]!=</span><span class="s4">null</span><span class="s0">};</span><span class="s1">n</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">get</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">createID</span><span class="s0">(</span><span class="s1">t</span><span class="s0">);</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">map</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]};</span><span class="s1">n</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">keySet</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">keys</span><span class="s0">};</span><span class="s1">t</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">=</span><span class="s1">n</span><span class="s0">},</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s2">&quot;use strict&quot;</span><span class="s0">;</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">14</span><span class="s0">);</span><span class="s4">function </span><span class="s1">n</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">set</span><span class="s0">={}}</span><span class="s1">n</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">add</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">createID</span><span class="s0">(</span><span class="s1">t</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(!</span><span class="s4">this</span><span class="s0">.</span><span class="s1">contains</span><span class="s0">(</span><span class="s1">e</span><span class="s0">))</span><span class="s4">this</span><span class="s0">.</span><span class="s1">set</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]=</span><span class="s1">t</span><span class="s0">};</span><span class="s1">n</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">remove</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">delete this</span><span class="s0">.</span><span class="s1">set</span><span class="s0">[</span><span class="s1">i</span><span class="s0">.</span><span class="s1">createID</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)]};</span><span class="s1">n</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">clear</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">set</span><span class="s0">={}};</span><span class="s1">n</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">contains</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">set</span><span class="s0">[</span><span class="s1">i</span><span class="s0">.</span><span class="s1">createID</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)]==</span><span class="s1">t</span><span class="s0">};</span><span class="s1">n</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">isEmpty</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">size</span><span class="s0">()===</span><span class="s3">0</span><span class="s0">};</span><span class="s1">n</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">size</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return </span><span class="s1">Object</span><span class="s0">.</span><span class="s1">keys</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">set</span><span class="s0">).</span><span class="s1">length</span><span class="s0">};</span><span class="s1">n</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">addAllTo</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">keys</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">set</span><span class="s0">);</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">i</span><span class="s0">&lt;</span><span class="s1">r</span><span class="s0">;</span><span class="s1">i</span><span class="s0">++){</span><span class="s1">t</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">set</span><span class="s0">[</span><span class="s1">e</span><span class="s0">[</span><span class="s1">i</span><span class="s0">]])}};</span><span class="s1">n</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">size</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return </span><span class="s1">Object</span><span class="s0">.</span><span class="s1">keys</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">set</span><span class="s0">).</span><span class="s1">length</span><span class="s0">};</span><span class="s1">n</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">addAll</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">r</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">;</span><span class="s1">r</span><span class="s0">++){</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">t</span><span class="s0">[</span><span class="s1">r</span><span class="s0">];</span><span class="s4">this</span><span class="s0">.</span><span class="s1">add</span><span class="s0">(</span><span class="s1">i</span><span class="s0">)}};</span><span class="s1">t</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">=</span><span class="s1">n</span><span class="s0">},</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s2">&quot;use strict&quot;</span><span class="s0">;</span><span class="s4">function </span><span class="s1">i</span><span class="s0">(){}</span><span class="s1">i</span><span class="s0">.</span><span class="s1">multMat</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=[];</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">i</span><span class="s0">&lt;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">i</span><span class="s0">++){</span><span class="s1">r</span><span class="s0">[</span><span class="s1">i</span><span class="s0">]=[];</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">n</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">[</span><span class="s3">0</span><span class="s0">].</span><span class="s1">length</span><span class="s0">;</span><span class="s1">n</span><span class="s0">++){</span><span class="s1">r</span><span class="s0">[</span><span class="s1">i</span><span class="s0">][</span><span class="s1">n</span><span class="s0">]=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">o</span><span class="s0">&lt;</span><span class="s1">t</span><span class="s0">[</span><span class="s3">0</span><span class="s0">].</span><span class="s1">length</span><span class="s0">;</span><span class="s1">o</span><span class="s0">++){</span><span class="s1">r</span><span class="s0">[</span><span class="s1">i</span><span class="s0">][</span><span class="s1">n</span><span class="s0">]+=</span><span class="s1">t</span><span class="s0">[</span><span class="s1">i</span><span class="s0">][</span><span class="s1">o</span><span class="s0">]*</span><span class="s1">e</span><span class="s0">[</span><span class="s1">o</span><span class="s0">][</span><span class="s1">n</span><span class="s0">]}}}</span><span class="s4">return </span><span class="s1">r</span><span class="s0">};</span><span class="s1">i</span><span class="s0">.</span><span class="s1">transpose</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=[];</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">r</span><span class="s0">&lt;</span><span class="s1">t</span><span class="s0">[</span><span class="s3">0</span><span class="s0">].</span><span class="s1">length</span><span class="s0">;</span><span class="s1">r</span><span class="s0">++){</span><span class="s1">e</span><span class="s0">[</span><span class="s1">r</span><span class="s0">]=[];</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">i</span><span class="s0">&lt;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">i</span><span class="s0">++){</span><span class="s1">e</span><span class="s0">[</span><span class="s1">r</span><span class="s0">][</span><span class="s1">i</span><span class="s0">]=</span><span class="s1">t</span><span class="s0">[</span><span class="s1">i</span><span class="s0">][</span><span class="s1">r</span><span class="s0">]}}</span><span class="s4">return </span><span class="s1">e</span><span class="s0">};</span><span class="s1">i</span><span class="s0">.</span><span class="s1">multCons</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=[];</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">i</span><span class="s0">&lt;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">i</span><span class="s0">++){</span><span class="s1">r</span><span class="s0">[</span><span class="s1">i</span><span class="s0">]=</span><span class="s1">t</span><span class="s0">[</span><span class="s1">i</span><span class="s0">]*</span><span class="s1">e</span><span class="s0">}</span><span class="s4">return </span><span class="s1">r</span><span class="s0">};</span><span class="s1">i</span><span class="s0">.</span><span class="s1">minusOp</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=[];</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">i</span><span class="s0">&lt;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">i</span><span class="s0">++){</span><span class="s1">r</span><span class="s0">[</span><span class="s1">i</span><span class="s0">]=</span><span class="s1">t</span><span class="s0">[</span><span class="s1">i</span><span class="s0">]-</span><span class="s1">e</span><span class="s0">[</span><span class="s1">i</span><span class="s0">]}</span><span class="s4">return </span><span class="s1">r</span><span class="s0">};</span><span class="s1">i</span><span class="s0">.</span><span class="s1">dotProduct</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">i</span><span class="s0">&lt;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">i</span><span class="s0">++){</span><span class="s1">r</span><span class="s0">+=</span><span class="s1">t</span><span class="s0">[</span><span class="s1">i</span><span class="s0">]*</span><span class="s1">e</span><span class="s0">[</span><span class="s1">i</span><span class="s0">]}</span><span class="s4">return </span><span class="s1">r</span><span class="s0">};</span><span class="s1">i</span><span class="s0">.</span><span class="s1">mag</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">return </span><span class="s1">Math</span><span class="s0">.</span><span class="s1">sqrt</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dotProduct</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">t</span><span class="s0">))};</span><span class="s1">i</span><span class="s0">.</span><span class="s1">normalize</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=[];</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">mag</span><span class="s0">(</span><span class="s1">t</span><span class="s0">);</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">i</span><span class="s0">&lt;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">i</span><span class="s0">++){</span><span class="s1">e</span><span class="s0">[</span><span class="s1">i</span><span class="s0">]=</span><span class="s1">t</span><span class="s0">[</span><span class="s1">i</span><span class="s0">]/</span><span class="s1">r</span><span class="s0">}</span><span class="s4">return </span><span class="s1">e</span><span class="s0">};</span><span class="s1">i</span><span class="s0">.</span><span class="s1">multGamma</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=[];</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">i</span><span class="s0">&lt;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">i</span><span class="s0">++){</span><span class="s1">r</span><span class="s0">+=</span><span class="s1">t</span><span class="s0">[</span><span class="s1">i</span><span class="s0">]}</span><span class="s1">r</span><span class="s0">*=-</span><span class="s3">1</span><span class="s0">/</span><span class="s1">t</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">n</span><span class="s0">&lt;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">n</span><span class="s0">++){</span><span class="s1">e</span><span class="s0">[</span><span class="s1">n</span><span class="s0">]=</span><span class="s1">r</span><span class="s0">+</span><span class="s1">t</span><span class="s0">[</span><span class="s1">n</span><span class="s0">]}</span><span class="s4">return </span><span class="s1">e</span><span class="s0">};</span><span class="s1">i</span><span class="s0">.</span><span class="s1">multL</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=[];</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=[];</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=[];</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">a</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">[</span><span class="s3">0</span><span class="s0">].</span><span class="s1">length</span><span class="s0">;</span><span class="s1">a</span><span class="s0">++){</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">h</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">h</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">h</span><span class="s0">++){</span><span class="s1">s</span><span class="s0">+=-</span><span class="s3">.5</span><span class="s0">*</span><span class="s1">e</span><span class="s0">[</span><span class="s1">h</span><span class="s0">][</span><span class="s1">a</span><span class="s0">]*</span><span class="s1">t</span><span class="s0">[</span><span class="s1">h</span><span class="s0">]}</span><span class="s1">n</span><span class="s0">[</span><span class="s1">a</span><span class="s0">]=</span><span class="s1">s</span><span class="s0">}</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">l</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">l</span><span class="s0">&lt;</span><span class="s1">r</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">l</span><span class="s0">++){</span><span class="s4">var </span><span class="s1">c</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">d</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">d</span><span class="s0">&lt;</span><span class="s1">r</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">d</span><span class="s0">++){</span><span class="s1">c</span><span class="s0">+=</span><span class="s1">r</span><span class="s0">[</span><span class="s1">l</span><span class="s0">][</span><span class="s1">d</span><span class="s0">]*</span><span class="s1">n</span><span class="s0">[</span><span class="s1">d</span><span class="s0">]}</span><span class="s1">o</span><span class="s0">[</span><span class="s1">l</span><span class="s0">]=</span><span class="s1">c</span><span class="s0">}</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">f</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">f</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">f</span><span class="s0">++){</span><span class="s4">var </span><span class="s1">g</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">u</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">u</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">[</span><span class="s3">0</span><span class="s0">].</span><span class="s1">length</span><span class="s0">;</span><span class="s1">u</span><span class="s0">++){</span><span class="s1">g</span><span class="s0">+=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">f</span><span class="s0">][</span><span class="s1">u</span><span class="s0">]*</span><span class="s1">o</span><span class="s0">[</span><span class="s1">u</span><span class="s0">]}</span><span class="s1">i</span><span class="s0">[</span><span class="s1">f</span><span class="s0">]=</span><span class="s1">g</span><span class="s0">}</span><span class="s4">return </span><span class="s1">i</span><span class="s0">};</span><span class="s1">t</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">=</span><span class="s1">i</span><span class="s0">},</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s2">&quot;use strict&quot;</span><span class="s0">;</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">r</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">r</span><span class="s0">++){</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">r</span><span class="s0">];</span><span class="s1">i</span><span class="s0">.</span><span class="s1">enumerable</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">enumerable</span><span class="s0">||</span><span class="s4">false</span><span class="s0">;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">configurable</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s2">&quot;value&quot;</span><span class="s4">in </span><span class="s1">i</span><span class="s0">)</span><span class="s1">i</span><span class="s0">.</span><span class="s1">writable</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">.</span><span class="s1">key</span><span class="s0">,</span><span class="s1">i</span><span class="s0">)}}</span><span class="s4">return function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">)</span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">,</span><span class="s1">r</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">i</span><span class="s0">)</span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">i</span><span class="s0">);</span><span class="s4">return </span><span class="s1">e</span><span class="s0">}}();</span><span class="s4">function </span><span class="s1">n</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(!(</span><span class="s1">t </span><span class="s4">instanceof </span><span class="s1">e</span><span class="s0">)){</span><span class="s4">throw new </span><span class="s1">TypeError</span><span class="s0">(</span><span class="s2">&quot;Cannot call a class as a function&quot;</span><span class="s0">)}}</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">11</span><span class="s0">);</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s1">n</span><span class="s0">(</span><span class="s4">this</span><span class="s0">,</span><span class="s1">t</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">!==</span><span class="s4">null</span><span class="s0">||</span><span class="s1">r</span><span class="s0">!==</span><span class="s1">undefined</span><span class="s0">)</span><span class="s4">this</span><span class="s0">.</span><span class="s1">compareFunction</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_defaultCompareFunction</span><span class="s0">;</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e </span><span class="s4">instanceof </span><span class="s1">o</span><span class="s0">)</span><span class="s1">i</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">size</span><span class="s0">();</span><span class="s4">else </span><span class="s1">i</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_quicksort</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s1">i</span><span class="s0">-</span><span class="s3">1</span><span class="s0">)}</span><span class="s1">i</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,[{</span><span class="s1">key</span><span class="s0">:</span><span class="s2">&quot;_quicksort&quot;</span><span class="s0">,</span><span class="s1">value</span><span class="s0">:</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">&lt;</span><span class="s1">i</span><span class="s0">){</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_partition</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">i</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_quicksort</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">n</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_quicksort</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">n</span><span class="s0">+</span><span class="s3">1</span><span class="s0">,</span><span class="s1">i</span><span class="s0">)}}},{</span><span class="s1">key</span><span class="s0">:</span><span class="s2">&quot;_partition&quot;</span><span class="s0">,</span><span class="s1">value</span><span class="s0">:</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">);</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s1">r</span><span class="s0">;</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s1">i</span><span class="s0">;</span><span class="s4">while</span><span class="s0">(</span><span class="s4">true</span><span class="s0">){</span><span class="s4">while</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">compareFunction</span><span class="s0">(</span><span class="s1">n</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">a</span><span class="s0">))){</span><span class="s1">a</span><span class="s0">--}</span><span class="s4">while</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">compareFunction</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">o</span><span class="s0">),</span><span class="s1">n</span><span class="s0">)){</span><span class="s1">o</span><span class="s0">++}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">o</span><span class="s0">&lt;</span><span class="s1">a</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_swap</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">a</span><span class="s0">);</span><span class="s1">o</span><span class="s0">++;</span><span class="s1">a</span><span class="s0">--}</span><span class="s4">else return </span><span class="s1">a</span><span class="s0">}}},{</span><span class="s1">key</span><span class="s0">:</span><span class="s2">&quot;_get&quot;</span><span class="s0">,</span><span class="s1">value</span><span class="s0">:</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e </span><span class="s4">instanceof </span><span class="s1">o</span><span class="s0">)</span><span class="s4">return </span><span class="s1">e</span><span class="s0">.</span><span class="s1">get_object_at</span><span class="s0">(</span><span class="s1">r</span><span class="s0">);</span><span class="s4">else return </span><span class="s1">e</span><span class="s0">[</span><span class="s1">r</span><span class="s0">]}},{</span><span class="s1">key</span><span class="s0">:</span><span class="s2">&quot;_set&quot;</span><span class="s0">,</span><span class="s1">value</span><span class="s0">:</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e </span><span class="s4">instanceof </span><span class="s1">o</span><span class="s0">)</span><span class="s1">e</span><span class="s0">.</span><span class="s1">set_object_at</span><span class="s0">(</span><span class="s1">r</span><span class="s0">,</span><span class="s1">i</span><span class="s0">);</span><span class="s4">else </span><span class="s1">e</span><span class="s0">[</span><span class="s1">r</span><span class="s0">]=</span><span class="s1">i</span><span class="s0">}},{</span><span class="s1">key</span><span class="s0">:</span><span class="s2">&quot;_swap&quot;</span><span class="s0">,</span><span class="s1">value</span><span class="s0">:</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_set</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">i</span><span class="s0">));</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_set</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">n</span><span class="s0">)}},{</span><span class="s1">key</span><span class="s0">:</span><span class="s2">&quot;_defaultCompareFunction&quot;</span><span class="s0">,</span><span class="s1">value</span><span class="s0">:</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s4">return </span><span class="s1">r</span><span class="s0">&gt;</span><span class="s1">e</span><span class="s0">}}]);</span><span class="s4">return </span><span class="s1">t</span><span class="s0">}();</span><span class="s1">t</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">=</span><span class="s1">a</span><span class="s0">},</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s2">&quot;use strict&quot;</span><span class="s0">;</span><span class="s4">function </span><span class="s1">i</span><span class="s0">(){}</span><span class="s1">i</span><span class="s0">.</span><span class="s1">svd</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">U</span><span class="s0">=</span><span class="s4">null</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">V</span><span class="s0">=</span><span class="s4">null</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">s</span><span class="s0">=</span><span class="s4">null</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">m</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">n</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">m</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">n</span><span class="s0">=</span><span class="s1">t</span><span class="s0">[</span><span class="s3">0</span><span class="s0">].</span><span class="s1">length</span><span class="s0">;</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">min</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">m</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">n</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">s</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=[];</span><span class="s4">while</span><span class="s0">(</span><span class="s1">t</span><span class="s0">-- &gt;</span><span class="s3">0</span><span class="s0">){</span><span class="s1">e</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s3">0</span><span class="s0">)}</span><span class="s4">return </span><span class="s1">e</span><span class="s0">}(</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">min</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">m</span><span class="s0">+</span><span class="s3">1</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">n</span><span class="s0">));</span><span class="s4">this</span><span class="s0">.</span><span class="s1">U</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">==</span><span class="s3">0</span><span class="s0">){</span><span class="s4">return </span><span class="s3">0</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=[];</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">i</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">[</span><span class="s3">0</span><span class="s0">];</span><span class="s1">i</span><span class="s0">++){</span><span class="s1">r</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">slice</span><span class="s0">(</span><span class="s3">1</span><span class="s0">)))}</span><span class="s4">return </span><span class="s1">r</span><span class="s0">}};</span><span class="s4">return </span><span class="s1">e</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)}([</span><span class="s4">this</span><span class="s0">.</span><span class="s1">m</span><span class="s0">,</span><span class="s1">e</span><span class="s0">]);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">V</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">==</span><span class="s3">0</span><span class="s0">){</span><span class="s4">return </span><span class="s3">0</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=[];</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">i</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">[</span><span class="s3">0</span><span class="s0">];</span><span class="s1">i</span><span class="s0">++){</span><span class="s1">r</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">slice</span><span class="s0">(</span><span class="s3">1</span><span class="s0">)))}</span><span class="s4">return </span><span class="s1">r</span><span class="s0">}};</span><span class="s4">return </span><span class="s1">e</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)}([</span><span class="s4">this</span><span class="s0">.</span><span class="s1">n</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">n</span><span class="s0">]);</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=[];</span><span class="s4">while</span><span class="s0">(</span><span class="s1">t</span><span class="s0">-- &gt;</span><span class="s3">0</span><span class="s0">){</span><span class="s1">e</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s3">0</span><span class="s0">)}</span><span class="s4">return </span><span class="s1">e</span><span class="s0">}(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">n</span><span class="s0">);</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=[];</span><span class="s4">while</span><span class="s0">(</span><span class="s1">t</span><span class="s0">-- &gt;</span><span class="s3">0</span><span class="s0">){</span><span class="s1">e</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s3">0</span><span class="s0">)}</span><span class="s4">return </span><span class="s1">e</span><span class="s0">}(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">m</span><span class="s0">);</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">min</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">m</span><span class="s0">-</span><span class="s3">1</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">n</span><span class="s0">);</span><span class="s4">var </span><span class="s1">h</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">max</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">min</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">n</span><span class="s0">-</span><span class="s3">2</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">m</span><span class="s0">));</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">l</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">l</span><span class="s0">&lt;</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">max</span><span class="s0">(</span><span class="s1">s</span><span class="s0">,</span><span class="s1">h</span><span class="s0">);</span><span class="s1">l</span><span class="s0">++){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">l</span><span class="s0">&lt;</span><span class="s1">s</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">s</span><span class="s0">[</span><span class="s1">l</span><span class="s0">]=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">c</span><span class="s0">=</span><span class="s1">l</span><span class="s0">;</span><span class="s1">c</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">m</span><span class="s0">;</span><span class="s1">c</span><span class="s0">++){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">s</span><span class="s0">[</span><span class="s1">l</span><span class="s0">]=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">hypot</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">s</span><span class="s0">[</span><span class="s1">l</span><span class="s0">],</span><span class="s1">t</span><span class="s0">[</span><span class="s1">c</span><span class="s0">][</span><span class="s1">l</span><span class="s0">])}</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">s</span><span class="s0">[</span><span class="s1">l</span><span class="s0">]!==</span><span class="s3">0</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">[</span><span class="s1">l</span><span class="s0">][</span><span class="s1">l</span><span class="s0">]&lt;</span><span class="s3">0</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">s</span><span class="s0">[</span><span class="s1">l</span><span class="s0">]=-</span><span class="s4">this</span><span class="s0">.</span><span class="s1">s</span><span class="s0">[</span><span class="s1">l</span><span class="s0">]}</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">d</span><span class="s0">=</span><span class="s1">l</span><span class="s0">;</span><span class="s1">d</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">m</span><span class="s0">;</span><span class="s1">d</span><span class="s0">++){</span><span class="s1">t</span><span class="s0">[</span><span class="s1">d</span><span class="s0">][</span><span class="s1">l</span><span class="s0">]/=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">s</span><span class="s0">[</span><span class="s1">l</span><span class="s0">]}</span><span class="s1">t</span><span class="s0">[</span><span class="s1">l</span><span class="s0">][</span><span class="s1">l</span><span class="s0">]+=</span><span class="s3">1</span><span class="s0">}</span><span class="s4">this</span><span class="s0">.</span><span class="s1">s</span><span class="s0">[</span><span class="s1">l</span><span class="s0">]=-</span><span class="s4">this</span><span class="s0">.</span><span class="s1">s</span><span class="s0">[</span><span class="s1">l</span><span class="s0">]}</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">f</span><span class="s0">=</span><span class="s1">l</span><span class="s0">+</span><span class="s3">1</span><span class="s0">;</span><span class="s1">f</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">n</span><span class="s0">;</span><span class="s1">f</span><span class="s0">++){</span><span class="s4">if</span><span class="s0">(</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">return </span><span class="s1">t</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">}(</span><span class="s1">l</span><span class="s0">&lt;</span><span class="s1">s</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">s</span><span class="s0">[</span><span class="s1">l</span><span class="s0">]!==</span><span class="s3">0</span><span class="s0">)){</span><span class="s4">var </span><span class="s1">g</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">u</span><span class="s0">=</span><span class="s1">l</span><span class="s0">;</span><span class="s1">u</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">m</span><span class="s0">;</span><span class="s1">u</span><span class="s0">++){</span><span class="s1">g</span><span class="s0">+=</span><span class="s1">t</span><span class="s0">[</span><span class="s1">u</span><span class="s0">][</span><span class="s1">l</span><span class="s0">]*</span><span class="s1">t</span><span class="s0">[</span><span class="s1">u</span><span class="s0">][</span><span class="s1">f</span><span class="s0">]}</span><span class="s1">g</span><span class="s0">=-</span><span class="s1">g</span><span class="s0">/</span><span class="s1">t</span><span class="s0">[</span><span class="s1">l</span><span class="s0">][</span><span class="s1">l</span><span class="s0">];</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">p</span><span class="s0">=</span><span class="s1">l</span><span class="s0">;</span><span class="s1">p</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">m</span><span class="s0">;</span><span class="s1">p</span><span class="s0">++){</span><span class="s1">t</span><span class="s0">[</span><span class="s1">p</span><span class="s0">][</span><span class="s1">f</span><span class="s0">]+=</span><span class="s1">g</span><span class="s0">*</span><span class="s1">t</span><span class="s0">[</span><span class="s1">p</span><span class="s0">][</span><span class="s1">l</span><span class="s0">]}}</span><span class="s1">r</span><span class="s0">[</span><span class="s1">f</span><span class="s0">]=</span><span class="s1">t</span><span class="s0">[</span><span class="s1">l</span><span class="s0">][</span><span class="s1">f</span><span class="s0">]}</span><span class="s4">if</span><span class="s0">(</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">return </span><span class="s1">t</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">}(</span><span class="s1">o</span><span class="s0">,</span><span class="s1">l</span><span class="s0">&lt;</span><span class="s1">s</span><span class="s0">)){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">v</span><span class="s0">=</span><span class="s1">l</span><span class="s0">;</span><span class="s1">v</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">m</span><span class="s0">;</span><span class="s1">v</span><span class="s0">++){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">U</span><span class="s0">[</span><span class="s1">v</span><span class="s0">][</span><span class="s1">l</span><span class="s0">]=</span><span class="s1">t</span><span class="s0">[</span><span class="s1">v</span><span class="s0">][</span><span class="s1">l</span><span class="s0">]}}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">l</span><span class="s0">&lt;</span><span class="s1">h</span><span class="s0">){</span><span class="s1">r</span><span class="s0">[</span><span class="s1">l</span><span class="s0">]=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">y</span><span class="s0">=</span><span class="s1">l</span><span class="s0">+</span><span class="s3">1</span><span class="s0">;</span><span class="s1">y</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">n</span><span class="s0">;</span><span class="s1">y</span><span class="s0">++){</span><span class="s1">r</span><span class="s0">[</span><span class="s1">l</span><span class="s0">]=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">hypot</span><span class="s0">(</span><span class="s1">r</span><span class="s0">[</span><span class="s1">l</span><span class="s0">],</span><span class="s1">r</span><span class="s0">[</span><span class="s1">y</span><span class="s0">])}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">[</span><span class="s1">l</span><span class="s0">]!==</span><span class="s3">0</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">[</span><span class="s1">l</span><span class="s0">+</span><span class="s3">1</span><span class="s0">]&lt;</span><span class="s3">0</span><span class="s0">){</span><span class="s1">r</span><span class="s0">[</span><span class="s1">l</span><span class="s0">]=-</span><span class="s1">r</span><span class="s0">[</span><span class="s1">l</span><span class="s0">]}</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">m</span><span class="s0">=</span><span class="s1">l</span><span class="s0">+</span><span class="s3">1</span><span class="s0">;</span><span class="s1">m</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">n</span><span class="s0">;</span><span class="s1">m</span><span class="s0">++){</span><span class="s1">r</span><span class="s0">[</span><span class="s1">m</span><span class="s0">]/=</span><span class="s1">r</span><span class="s0">[</span><span class="s1">l</span><span class="s0">]}</span><span class="s1">r</span><span class="s0">[</span><span class="s1">l</span><span class="s0">+</span><span class="s3">1</span><span class="s0">]+=</span><span class="s3">1</span><span class="s0">}</span><span class="s1">r</span><span class="s0">[</span><span class="s1">l</span><span class="s0">]=-</span><span class="s1">r</span><span class="s0">[</span><span class="s1">l</span><span class="s0">];</span><span class="s4">if</span><span class="s0">(</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">return </span><span class="s1">t</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">}(</span><span class="s1">l</span><span class="s0">+</span><span class="s3">1</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">m</span><span class="s0">,</span><span class="s1">r</span><span class="s0">[</span><span class="s1">l</span><span class="s0">]!==</span><span class="s3">0</span><span class="s0">)){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">E</span><span class="s0">=</span><span class="s1">l</span><span class="s0">+</span><span class="s3">1</span><span class="s0">;</span><span class="s1">E</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">m</span><span class="s0">;</span><span class="s1">E</span><span class="s0">++){</span><span class="s1">n</span><span class="s0">[</span><span class="s1">E</span><span class="s0">]=</span><span class="s3">0</span><span class="s0">}</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">N</span><span class="s0">=</span><span class="s1">l</span><span class="s0">+</span><span class="s3">1</span><span class="s0">;</span><span class="s1">N</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">n</span><span class="s0">;</span><span class="s1">N</span><span class="s0">++){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">T</span><span class="s0">=</span><span class="s1">l</span><span class="s0">+</span><span class="s3">1</span><span class="s0">;</span><span class="s1">T</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">m</span><span class="s0">;</span><span class="s1">T</span><span class="s0">++){</span><span class="s1">n</span><span class="s0">[</span><span class="s1">T</span><span class="s0">]+=</span><span class="s1">r</span><span class="s0">[</span><span class="s1">N</span><span class="s0">]*</span><span class="s1">t</span><span class="s0">[</span><span class="s1">T</span><span class="s0">][</span><span class="s1">N</span><span class="s0">]}}</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">A</span><span class="s0">=</span><span class="s1">l</span><span class="s0">+</span><span class="s3">1</span><span class="s0">;</span><span class="s1">A</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">n</span><span class="s0">;</span><span class="s1">A</span><span class="s0">++){</span><span class="s4">var </span><span class="s1">w</span><span class="s0">=-</span><span class="s1">r</span><span class="s0">[</span><span class="s1">A</span><span class="s0">]/</span><span class="s1">r</span><span class="s0">[</span><span class="s1">l</span><span class="s0">+</span><span class="s3">1</span><span class="s0">];</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">L</span><span class="s0">=</span><span class="s1">l</span><span class="s0">+</span><span class="s3">1</span><span class="s0">;</span><span class="s1">L</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">m</span><span class="s0">;</span><span class="s1">L</span><span class="s0">++){</span><span class="s1">t</span><span class="s0">[</span><span class="s1">L</span><span class="s0">][</span><span class="s1">A</span><span class="s0">]+=</span><span class="s1">w</span><span class="s0">*</span><span class="s1">n</span><span class="s0">[</span><span class="s1">L</span><span class="s0">]}}}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">a</span><span class="s0">){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">I</span><span class="s0">=</span><span class="s1">l</span><span class="s0">+</span><span class="s3">1</span><span class="s0">;</span><span class="s1">I</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">n</span><span class="s0">;</span><span class="s1">I</span><span class="s0">++){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">V</span><span class="s0">[</span><span class="s1">I</span><span class="s0">][</span><span class="s1">l</span><span class="s0">]=</span><span class="s1">r</span><span class="s0">[</span><span class="s1">I</span><span class="s0">]}}}}</span><span class="s4">var </span><span class="s1">_</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">min</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">n</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">m</span><span class="s0">+</span><span class="s3">1</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">s</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">n</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">s</span><span class="s0">[</span><span class="s1">s</span><span class="s0">]=</span><span class="s1">t</span><span class="s0">[</span><span class="s1">s</span><span class="s0">][</span><span class="s1">s</span><span class="s0">]}</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">m</span><span class="s0">&lt;</span><span class="s1">_</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">s</span><span class="s0">[</span><span class="s1">_</span><span class="s0">-</span><span class="s3">1</span><span class="s0">]=</span><span class="s3">0</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">h</span><span class="s0">+</span><span class="s3">1</span><span class="s0">&lt;</span><span class="s1">_</span><span class="s0">){</span><span class="s1">r</span><span class="s0">[</span><span class="s1">h</span><span class="s0">]=</span><span class="s1">t</span><span class="s0">[</span><span class="s1">h</span><span class="s0">][</span><span class="s1">_</span><span class="s0">-</span><span class="s3">1</span><span class="s0">]}</span><span class="s1">r</span><span class="s0">[</span><span class="s1">_</span><span class="s0">-</span><span class="s3">1</span><span class="s0">]=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">o</span><span class="s0">){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">C</span><span class="s0">=</span><span class="s1">s</span><span class="s0">;</span><span class="s1">C</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">;</span><span class="s1">C</span><span class="s0">++){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">M</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">M</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">m</span><span class="s0">;</span><span class="s1">M</span><span class="s0">++){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">U</span><span class="s0">[</span><span class="s1">M</span><span class="s0">][</span><span class="s1">C</span><span class="s0">]=</span><span class="s3">0</span><span class="s0">}</span><span class="s4">this</span><span class="s0">.</span><span class="s1">U</span><span class="s0">[</span><span class="s1">C</span><span class="s0">][</span><span class="s1">C</span><span class="s0">]=</span><span class="s3">1</span><span class="s0">}</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">x</span><span class="s0">=</span><span class="s1">s</span><span class="s0">-</span><span class="s3">1</span><span class="s0">;</span><span class="s1">x</span><span class="s0">&gt;=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">x</span><span class="s0">--){</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">s</span><span class="s0">[</span><span class="s1">x</span><span class="s0">]!==</span><span class="s3">0</span><span class="s0">){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">O</span><span class="s0">=</span><span class="s1">x</span><span class="s0">+</span><span class="s3">1</span><span class="s0">;</span><span class="s1">O</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">;</span><span class="s1">O</span><span class="s0">++){</span><span class="s4">var </span><span class="s1">D</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">R</span><span class="s0">=</span><span class="s1">x</span><span class="s0">;</span><span class="s1">R</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">m</span><span class="s0">;</span><span class="s1">R</span><span class="s0">++){</span><span class="s1">D</span><span class="s0">+=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">U</span><span class="s0">[</span><span class="s1">R</span><span class="s0">][</span><span class="s1">x</span><span class="s0">]*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">U</span><span class="s0">[</span><span class="s1">R</span><span class="s0">][</span><span class="s1">O</span><span class="s0">]}</span><span class="s1">D</span><span class="s0">=-</span><span class="s1">D</span><span class="s0">/</span><span class="s4">this</span><span class="s0">.</span><span class="s1">U</span><span class="s0">[</span><span class="s1">x</span><span class="s0">][</span><span class="s1">x</span><span class="s0">];</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">b</span><span class="s0">=</span><span class="s1">x</span><span class="s0">;</span><span class="s1">b</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">m</span><span class="s0">;</span><span class="s1">b</span><span class="s0">++){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">U</span><span class="s0">[</span><span class="s1">b</span><span class="s0">][</span><span class="s1">O</span><span class="s0">]+=</span><span class="s1">D</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">U</span><span class="s0">[</span><span class="s1">b</span><span class="s0">][</span><span class="s1">x</span><span class="s0">]}}</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">G</span><span class="s0">=</span><span class="s1">x</span><span class="s0">;</span><span class="s1">G</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">m</span><span class="s0">;</span><span class="s1">G</span><span class="s0">++){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">U</span><span class="s0">[</span><span class="s1">G</span><span class="s0">][</span><span class="s1">x</span><span class="s0">]=-</span><span class="s4">this</span><span class="s0">.</span><span class="s1">U</span><span class="s0">[</span><span class="s1">G</span><span class="s0">][</span><span class="s1">x</span><span class="s0">]}</span><span class="s4">this</span><span class="s0">.</span><span class="s1">U</span><span class="s0">[</span><span class="s1">x</span><span class="s0">][</span><span class="s1">x</span><span class="s0">]=</span><span class="s3">1</span><span class="s0">+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">U</span><span class="s0">[</span><span class="s1">x</span><span class="s0">][</span><span class="s1">x</span><span class="s0">];</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">F</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">F</span><span class="s0">&lt;</span><span class="s1">x</span><span class="s0">-</span><span class="s3">1</span><span class="s0">;</span><span class="s1">F</span><span class="s0">++){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">U</span><span class="s0">[</span><span class="s1">F</span><span class="s0">][</span><span class="s1">x</span><span class="s0">]=</span><span class="s3">0</span><span class="s0">}}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">S</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">S</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">m</span><span class="s0">;</span><span class="s1">S</span><span class="s0">++){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">U</span><span class="s0">[</span><span class="s1">S</span><span class="s0">][</span><span class="s1">x</span><span class="s0">]=</span><span class="s3">0</span><span class="s0">}</span><span class="s4">this</span><span class="s0">.</span><span class="s1">U</span><span class="s0">[</span><span class="s1">x</span><span class="s0">][</span><span class="s1">x</span><span class="s0">]=</span><span class="s3">1</span><span class="s0">}}}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">a</span><span class="s0">){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">P</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">n</span><span class="s0">-</span><span class="s3">1</span><span class="s0">;</span><span class="s1">P</span><span class="s0">&gt;=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">P</span><span class="s0">--){</span><span class="s4">if</span><span class="s0">(</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">return </span><span class="s1">t</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">}(</span><span class="s1">P</span><span class="s0">&lt;</span><span class="s1">h</span><span class="s0">,</span><span class="s1">r</span><span class="s0">[</span><span class="s1">P</span><span class="s0">]!==</span><span class="s3">0</span><span class="s0">)){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">U</span><span class="s0">=</span><span class="s1">P</span><span class="s0">+</span><span class="s3">1</span><span class="s0">;</span><span class="s1">U</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">;</span><span class="s1">U</span><span class="s0">++){</span><span class="s4">var </span><span class="s1">k</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">Y</span><span class="s0">=</span><span class="s1">P</span><span class="s0">+</span><span class="s3">1</span><span class="s0">;</span><span class="s1">Y</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">n</span><span class="s0">;</span><span class="s1">Y</span><span class="s0">++){</span><span class="s1">k</span><span class="s0">+=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">V</span><span class="s0">[</span><span class="s1">Y</span><span class="s0">][</span><span class="s1">P</span><span class="s0">]*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">V</span><span class="s0">[</span><span class="s1">Y</span><span class="s0">][</span><span class="s1">U</span><span class="s0">]}</span><span class="s1">k</span><span class="s0">=-</span><span class="s1">k</span><span class="s0">/</span><span class="s4">this</span><span class="s0">.</span><span class="s1">V</span><span class="s0">[</span><span class="s1">P</span><span class="s0">+</span><span class="s3">1</span><span class="s0">][</span><span class="s1">P</span><span class="s0">];</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">H</span><span class="s0">=</span><span class="s1">P</span><span class="s0">+</span><span class="s3">1</span><span class="s0">;</span><span class="s1">H</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">n</span><span class="s0">;</span><span class="s1">H</span><span class="s0">++){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">V</span><span class="s0">[</span><span class="s1">H</span><span class="s0">][</span><span class="s1">U</span><span class="s0">]+=</span><span class="s1">k</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">V</span><span class="s0">[</span><span class="s1">H</span><span class="s0">][</span><span class="s1">P</span><span class="s0">]}}}</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">X</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">X</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">n</span><span class="s0">;</span><span class="s1">X</span><span class="s0">++){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">V</span><span class="s0">[</span><span class="s1">X</span><span class="s0">][</span><span class="s1">P</span><span class="s0">]=</span><span class="s3">0</span><span class="s0">}</span><span class="s4">this</span><span class="s0">.</span><span class="s1">V</span><span class="s0">[</span><span class="s1">P</span><span class="s0">][</span><span class="s1">P</span><span class="s0">]=</span><span class="s3">1</span><span class="s0">}}</span><span class="s4">var </span><span class="s1">z</span><span class="s0">=</span><span class="s1">_</span><span class="s0">-</span><span class="s3">1</span><span class="s0">;</span><span class="s4">var </span><span class="s1">V</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">B</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">pow</span><span class="s0">(</span><span class="s3">2</span><span class="s0">,-</span><span class="s3">52</span><span class="s0">);</span><span class="s4">var </span><span class="s1">W</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">pow</span><span class="s0">(</span><span class="s3">2</span><span class="s0">,-</span><span class="s3">966</span><span class="s0">);</span><span class="s4">while</span><span class="s0">(</span><span class="s1">_</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">){</span><span class="s4">var </span><span class="s1">j</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">q</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s1">j</span><span class="s0">=</span><span class="s1">_</span><span class="s0">-</span><span class="s3">2</span><span class="s0">;</span><span class="s1">j</span><span class="s0">&gt;=-</span><span class="s3">1</span><span class="s0">;</span><span class="s1">j</span><span class="s0">--){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">j</span><span class="s0">===-</span><span class="s3">1</span><span class="s0">){</span><span class="s4">break</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">abs</span><span class="s0">(</span><span class="s1">r</span><span class="s0">[</span><span class="s1">j</span><span class="s0">])&lt;=</span><span class="s1">W</span><span class="s0">+</span><span class="s1">B</span><span class="s0">*(</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">abs</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">s</span><span class="s0">[</span><span class="s1">j</span><span class="s0">])+</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">abs</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">s</span><span class="s0">[</span><span class="s1">j</span><span class="s0">+</span><span class="s3">1</span><span class="s0">]))){</span><span class="s1">r</span><span class="s0">[</span><span class="s1">j</span><span class="s0">]=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">break</span><span class="s0">}}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">j</span><span class="s0">===</span><span class="s1">_</span><span class="s0">-</span><span class="s3">2</span><span class="s0">){</span><span class="s1">q</span><span class="s0">=</span><span class="s3">4</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">var </span><span class="s1">$</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s1">$</span><span class="s0">=</span><span class="s1">_</span><span class="s0">-</span><span class="s3">1</span><span class="s0">;</span><span class="s1">$</span><span class="s0">&gt;=</span><span class="s1">j</span><span class="s0">;</span><span class="s1">$</span><span class="s0">--){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">$</span><span class="s0">===</span><span class="s1">j</span><span class="s0">){</span><span class="s4">break</span><span class="s0">}</span><span class="s4">var </span><span class="s1">K</span><span class="s0">=(</span><span class="s1">$</span><span class="s0">!==</span><span class="s1">_</span><span class="s0">?</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">abs</span><span class="s0">(</span><span class="s1">r</span><span class="s0">[</span><span class="s1">$</span><span class="s0">]):</span><span class="s3">0</span><span class="s0">)+(</span><span class="s1">$</span><span class="s0">!==</span><span class="s1">j</span><span class="s0">+</span><span class="s3">1</span><span class="s0">?</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">abs</span><span class="s0">(</span><span class="s1">r</span><span class="s0">[</span><span class="s1">$</span><span class="s0">-</span><span class="s3">1</span><span class="s0">]):</span><span class="s3">0</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">abs</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">s</span><span class="s0">[</span><span class="s1">$</span><span class="s0">])&lt;=</span><span class="s1">W</span><span class="s0">+</span><span class="s1">B</span><span class="s0">*</span><span class="s1">K</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">s</span><span class="s0">[</span><span class="s1">$</span><span class="s0">]=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">break</span><span class="s0">}}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">$</span><span class="s0">===</span><span class="s1">j</span><span class="s0">){</span><span class="s1">q</span><span class="s0">=</span><span class="s3">3</span><span class="s0">}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">$</span><span class="s0">===</span><span class="s1">_</span><span class="s0">-</span><span class="s3">1</span><span class="s0">){</span><span class="s1">q</span><span class="s0">=</span><span class="s3">1</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">q</span><span class="s0">=</span><span class="s3">2</span><span class="s0">;</span><span class="s1">j</span><span class="s0">=</span><span class="s1">$</span><span class="s0">}}</span><span class="s1">j</span><span class="s0">++;</span><span class="s4">switch</span><span class="s0">(</span><span class="s1">q</span><span class="s0">){</span><span class="s4">case </span><span class="s3">1</span><span class="s0">:{</span><span class="s4">var </span><span class="s1">Z</span><span class="s0">=</span><span class="s1">r</span><span class="s0">[</span><span class="s1">_</span><span class="s0">-</span><span class="s3">2</span><span class="s0">];</span><span class="s1">r</span><span class="s0">[</span><span class="s1">_</span><span class="s0">-</span><span class="s3">2</span><span class="s0">]=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">Q</span><span class="s0">=</span><span class="s1">_</span><span class="s0">-</span><span class="s3">2</span><span class="s0">;</span><span class="s1">Q</span><span class="s0">&gt;=</span><span class="s1">j</span><span class="s0">;</span><span class="s1">Q</span><span class="s0">--){</span><span class="s4">var </span><span class="s1">J</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">hypot</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">s</span><span class="s0">[</span><span class="s1">Q</span><span class="s0">],</span><span class="s1">Z</span><span class="s0">);</span><span class="s4">var </span><span class="s1">tt</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">s</span><span class="s0">[</span><span class="s1">Q</span><span class="s0">]/</span><span class="s1">J</span><span class="s0">;</span><span class="s4">var </span><span class="s1">et</span><span class="s0">=</span><span class="s1">Z</span><span class="s0">/</span><span class="s1">J</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">s</span><span class="s0">[</span><span class="s1">Q</span><span class="s0">]=</span><span class="s1">J</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">Q</span><span class="s0">!==</span><span class="s1">j</span><span class="s0">){</span><span class="s1">Z</span><span class="s0">=-</span><span class="s1">et</span><span class="s0">*</span><span class="s1">r</span><span class="s0">[</span><span class="s1">Q</span><span class="s0">-</span><span class="s3">1</span><span class="s0">];</span><span class="s1">r</span><span class="s0">[</span><span class="s1">Q</span><span class="s0">-</span><span class="s3">1</span><span class="s0">]=</span><span class="s1">tt</span><span class="s0">*</span><span class="s1">r</span><span class="s0">[</span><span class="s1">Q</span><span class="s0">-</span><span class="s3">1</span><span class="s0">]}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">a</span><span class="s0">){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">rt</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">rt</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">n</span><span class="s0">;</span><span class="s1">rt</span><span class="s0">++){</span><span class="s1">J</span><span class="s0">=</span><span class="s1">tt</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">V</span><span class="s0">[</span><span class="s1">rt</span><span class="s0">][</span><span class="s1">Q</span><span class="s0">]+</span><span class="s1">et</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">V</span><span class="s0">[</span><span class="s1">rt</span><span class="s0">][</span><span class="s1">_</span><span class="s0">-</span><span class="s3">1</span><span class="s0">];</span><span class="s4">this</span><span class="s0">.</span><span class="s1">V</span><span class="s0">[</span><span class="s1">rt</span><span class="s0">][</span><span class="s1">_</span><span class="s0">-</span><span class="s3">1</span><span class="s0">]=-</span><span class="s1">et</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">V</span><span class="s0">[</span><span class="s1">rt</span><span class="s0">][</span><span class="s1">Q</span><span class="s0">]+</span><span class="s1">tt</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">V</span><span class="s0">[</span><span class="s1">rt</span><span class="s0">][</span><span class="s1">_</span><span class="s0">-</span><span class="s3">1</span><span class="s0">];</span><span class="s4">this</span><span class="s0">.</span><span class="s1">V</span><span class="s0">[</span><span class="s1">rt</span><span class="s0">][</span><span class="s1">Q</span><span class="s0">]=</span><span class="s1">J</span><span class="s0">}}}};</span><span class="s4">break</span><span class="s0">;</span><span class="s4">case </span><span class="s3">2</span><span class="s0">:{</span><span class="s4">var </span><span class="s1">it</span><span class="s0">=</span><span class="s1">r</span><span class="s0">[</span><span class="s1">j</span><span class="s0">-</span><span class="s3">1</span><span class="s0">];</span><span class="s1">r</span><span class="s0">[</span><span class="s1">j</span><span class="s0">-</span><span class="s3">1</span><span class="s0">]=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">nt</span><span class="s0">=</span><span class="s1">j</span><span class="s0">;</span><span class="s1">nt</span><span class="s0">&lt;</span><span class="s1">_</span><span class="s0">;</span><span class="s1">nt</span><span class="s0">++){</span><span class="s4">var </span><span class="s1">ot</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">hypot</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">s</span><span class="s0">[</span><span class="s1">nt</span><span class="s0">],</span><span class="s1">it</span><span class="s0">);</span><span class="s4">var </span><span class="s1">at</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">s</span><span class="s0">[</span><span class="s1">nt</span><span class="s0">]/</span><span class="s1">ot</span><span class="s0">;</span><span class="s4">var </span><span class="s1">st</span><span class="s0">=</span><span class="s1">it</span><span class="s0">/</span><span class="s1">ot</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">s</span><span class="s0">[</span><span class="s1">nt</span><span class="s0">]=</span><span class="s1">ot</span><span class="s0">;</span><span class="s1">it</span><span class="s0">=-</span><span class="s1">st</span><span class="s0">*</span><span class="s1">r</span><span class="s0">[</span><span class="s1">nt</span><span class="s0">];</span><span class="s1">r</span><span class="s0">[</span><span class="s1">nt</span><span class="s0">]=</span><span class="s1">at</span><span class="s0">*</span><span class="s1">r</span><span class="s0">[</span><span class="s1">nt</span><span class="s0">];</span><span class="s4">if</span><span class="s0">(</span><span class="s1">o</span><span class="s0">){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">ht</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">ht</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">m</span><span class="s0">;</span><span class="s1">ht</span><span class="s0">++){</span><span class="s1">ot</span><span class="s0">=</span><span class="s1">at</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">U</span><span class="s0">[</span><span class="s1">ht</span><span class="s0">][</span><span class="s1">nt</span><span class="s0">]+</span><span class="s1">st</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">U</span><span class="s0">[</span><span class="s1">ht</span><span class="s0">][</span><span class="s1">j</span><span class="s0">-</span><span class="s3">1</span><span class="s0">];</span><span class="s4">this</span><span class="s0">.</span><span class="s1">U</span><span class="s0">[</span><span class="s1">ht</span><span class="s0">][</span><span class="s1">j</span><span class="s0">-</span><span class="s3">1</span><span class="s0">]=-</span><span class="s1">st</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">U</span><span class="s0">[</span><span class="s1">ht</span><span class="s0">][</span><span class="s1">nt</span><span class="s0">]+</span><span class="s1">at</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">U</span><span class="s0">[</span><span class="s1">ht</span><span class="s0">][</span><span class="s1">j</span><span class="s0">-</span><span class="s3">1</span><span class="s0">];</span><span class="s4">this</span><span class="s0">.</span><span class="s1">U</span><span class="s0">[</span><span class="s1">ht</span><span class="s0">][</span><span class="s1">nt</span><span class="s0">]=</span><span class="s1">ot</span><span class="s0">}}}};</span><span class="s4">break</span><span class="s0">;</span><span class="s4">case </span><span class="s3">3</span><span class="s0">:{</span><span class="s4">var </span><span class="s1">lt</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">max</span><span class="s0">(</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">max</span><span class="s0">(</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">max</span><span class="s0">(</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">max</span><span class="s0">(</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">abs</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">s</span><span class="s0">[</span><span class="s1">_</span><span class="s0">-</span><span class="s3">1</span><span class="s0">]),</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">abs</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">s</span><span class="s0">[</span><span class="s1">_</span><span class="s0">-</span><span class="s3">2</span><span class="s0">])),</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">abs</span><span class="s0">(</span><span class="s1">r</span><span class="s0">[</span><span class="s1">_</span><span class="s0">-</span><span class="s3">2</span><span class="s0">])),</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">abs</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">s</span><span class="s0">[</span><span class="s1">j</span><span class="s0">])),</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">abs</span><span class="s0">(</span><span class="s1">r</span><span class="s0">[</span><span class="s1">j</span><span class="s0">]));</span><span class="s4">var </span><span class="s1">ct</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">s</span><span class="s0">[</span><span class="s1">_</span><span class="s0">-</span><span class="s3">1</span><span class="s0">]/</span><span class="s1">lt</span><span class="s0">;</span><span class="s4">var </span><span class="s1">dt</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">s</span><span class="s0">[</span><span class="s1">_</span><span class="s0">-</span><span class="s3">2</span><span class="s0">]/</span><span class="s1">lt</span><span class="s0">;</span><span class="s4">var </span><span class="s1">ft</span><span class="s0">=</span><span class="s1">r</span><span class="s0">[</span><span class="s1">_</span><span class="s0">-</span><span class="s3">2</span><span class="s0">]/</span><span class="s1">lt</span><span class="s0">;</span><span class="s4">var </span><span class="s1">gt</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">s</span><span class="s0">[</span><span class="s1">j</span><span class="s0">]/</span><span class="s1">lt</span><span class="s0">;</span><span class="s4">var </span><span class="s1">ut</span><span class="s0">=</span><span class="s1">r</span><span class="s0">[</span><span class="s1">j</span><span class="s0">]/</span><span class="s1">lt</span><span class="s0">;</span><span class="s4">var </span><span class="s1">pt</span><span class="s0">=((</span><span class="s1">dt</span><span class="s0">+</span><span class="s1">ct</span><span class="s0">)*(</span><span class="s1">dt</span><span class="s0">-</span><span class="s1">ct</span><span class="s0">)+</span><span class="s1">ft</span><span class="s0">*</span><span class="s1">ft</span><span class="s0">)/</span><span class="s3">2</span><span class="s0">;</span><span class="s4">var </span><span class="s1">vt</span><span class="s0">=</span><span class="s1">ct</span><span class="s0">*</span><span class="s1">ft</span><span class="s0">*(</span><span class="s1">ct</span><span class="s0">*</span><span class="s1">ft</span><span class="s0">);</span><span class="s4">var </span><span class="s1">yt</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">return </span><span class="s1">t</span><span class="s0">||</span><span class="s1">e</span><span class="s0">}(</span><span class="s1">pt</span><span class="s0">!==</span><span class="s3">0</span><span class="s0">,</span><span class="s1">vt</span><span class="s0">!==</span><span class="s3">0</span><span class="s0">)){</span><span class="s1">yt</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">sqrt</span><span class="s0">(</span><span class="s1">pt</span><span class="s0">*</span><span class="s1">pt</span><span class="s0">+</span><span class="s1">vt</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">pt</span><span class="s0">&lt;</span><span class="s3">0</span><span class="s0">){</span><span class="s1">yt</span><span class="s0">=-</span><span class="s1">yt</span><span class="s0">}</span><span class="s1">yt</span><span class="s0">=</span><span class="s1">vt</span><span class="s0">/(</span><span class="s1">pt</span><span class="s0">+</span><span class="s1">yt</span><span class="s0">)}</span><span class="s4">var </span><span class="s1">mt</span><span class="s0">=(</span><span class="s1">gt</span><span class="s0">+</span><span class="s1">ct</span><span class="s0">)*(</span><span class="s1">gt</span><span class="s0">-</span><span class="s1">ct</span><span class="s0">)+</span><span class="s1">yt</span><span class="s0">;</span><span class="s4">var </span><span class="s1">Et</span><span class="s0">=</span><span class="s1">gt</span><span class="s0">*</span><span class="s1">ut</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">Nt</span><span class="s0">=</span><span class="s1">j</span><span class="s0">;</span><span class="s1">Nt</span><span class="s0">&lt;</span><span class="s1">_</span><span class="s0">-</span><span class="s3">1</span><span class="s0">;</span><span class="s1">Nt</span><span class="s0">++){</span><span class="s4">var </span><span class="s1">Tt</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">hypot</span><span class="s0">(</span><span class="s1">mt</span><span class="s0">,</span><span class="s1">Et</span><span class="s0">);</span><span class="s4">var </span><span class="s1">At</span><span class="s0">=</span><span class="s1">mt</span><span class="s0">/</span><span class="s1">Tt</span><span class="s0">;</span><span class="s4">var </span><span class="s1">wt</span><span class="s0">=</span><span class="s1">Et</span><span class="s0">/</span><span class="s1">Tt</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">Nt</span><span class="s0">!==</span><span class="s1">j</span><span class="s0">){</span><span class="s1">r</span><span class="s0">[</span><span class="s1">Nt</span><span class="s0">-</span><span class="s3">1</span><span class="s0">]=</span><span class="s1">Tt</span><span class="s0">}</span><span class="s1">mt</span><span class="s0">=</span><span class="s1">At</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">s</span><span class="s0">[</span><span class="s1">Nt</span><span class="s0">]+</span><span class="s1">wt</span><span class="s0">*</span><span class="s1">r</span><span class="s0">[</span><span class="s1">Nt</span><span class="s0">];</span><span class="s1">r</span><span class="s0">[</span><span class="s1">Nt</span><span class="s0">]=</span><span class="s1">At</span><span class="s0">*</span><span class="s1">r</span><span class="s0">[</span><span class="s1">Nt</span><span class="s0">]-</span><span class="s1">wt</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">s</span><span class="s0">[</span><span class="s1">Nt</span><span class="s0">];</span><span class="s1">Et</span><span class="s0">=</span><span class="s1">wt</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">s</span><span class="s0">[</span><span class="s1">Nt</span><span class="s0">+</span><span class="s3">1</span><span class="s0">];</span><span class="s4">this</span><span class="s0">.</span><span class="s1">s</span><span class="s0">[</span><span class="s1">Nt</span><span class="s0">+</span><span class="s3">1</span><span class="s0">]=</span><span class="s1">At</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">s</span><span class="s0">[</span><span class="s1">Nt</span><span class="s0">+</span><span class="s3">1</span><span class="s0">];</span><span class="s4">if</span><span class="s0">(</span><span class="s1">a</span><span class="s0">){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">Lt</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">Lt</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">n</span><span class="s0">;</span><span class="s1">Lt</span><span class="s0">++){</span><span class="s1">Tt</span><span class="s0">=</span><span class="s1">At</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">V</span><span class="s0">[</span><span class="s1">Lt</span><span class="s0">][</span><span class="s1">Nt</span><span class="s0">]+</span><span class="s1">wt</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">V</span><span class="s0">[</span><span class="s1">Lt</span><span class="s0">][</span><span class="s1">Nt</span><span class="s0">+</span><span class="s3">1</span><span class="s0">];</span><span class="s4">this</span><span class="s0">.</span><span class="s1">V</span><span class="s0">[</span><span class="s1">Lt</span><span class="s0">][</span><span class="s1">Nt</span><span class="s0">+</span><span class="s3">1</span><span class="s0">]=-</span><span class="s1">wt</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">V</span><span class="s0">[</span><span class="s1">Lt</span><span class="s0">][</span><span class="s1">Nt</span><span class="s0">]+</span><span class="s1">At</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">V</span><span class="s0">[</span><span class="s1">Lt</span><span class="s0">][</span><span class="s1">Nt</span><span class="s0">+</span><span class="s3">1</span><span class="s0">];</span><span class="s4">this</span><span class="s0">.</span><span class="s1">V</span><span class="s0">[</span><span class="s1">Lt</span><span class="s0">][</span><span class="s1">Nt</span><span class="s0">]=</span><span class="s1">Tt</span><span class="s0">}}</span><span class="s1">Tt</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">hypot</span><span class="s0">(</span><span class="s1">mt</span><span class="s0">,</span><span class="s1">Et</span><span class="s0">);</span><span class="s1">At</span><span class="s0">=</span><span class="s1">mt</span><span class="s0">/</span><span class="s1">Tt</span><span class="s0">;</span><span class="s1">wt</span><span class="s0">=</span><span class="s1">Et</span><span class="s0">/</span><span class="s1">Tt</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">s</span><span class="s0">[</span><span class="s1">Nt</span><span class="s0">]=</span><span class="s1">Tt</span><span class="s0">;</span><span class="s1">mt</span><span class="s0">=</span><span class="s1">At</span><span class="s0">*</span><span class="s1">r</span><span class="s0">[</span><span class="s1">Nt</span><span class="s0">]+</span><span class="s1">wt</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">s</span><span class="s0">[</span><span class="s1">Nt</span><span class="s0">+</span><span class="s3">1</span><span class="s0">];</span><span class="s4">this</span><span class="s0">.</span><span class="s1">s</span><span class="s0">[</span><span class="s1">Nt</span><span class="s0">+</span><span class="s3">1</span><span class="s0">]=-</span><span class="s1">wt</span><span class="s0">*</span><span class="s1">r</span><span class="s0">[</span><span class="s1">Nt</span><span class="s0">]+</span><span class="s1">At</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">s</span><span class="s0">[</span><span class="s1">Nt</span><span class="s0">+</span><span class="s3">1</span><span class="s0">];</span><span class="s1">Et</span><span class="s0">=</span><span class="s1">wt</span><span class="s0">*</span><span class="s1">r</span><span class="s0">[</span><span class="s1">Nt</span><span class="s0">+</span><span class="s3">1</span><span class="s0">];</span><span class="s1">r</span><span class="s0">[</span><span class="s1">Nt</span><span class="s0">+</span><span class="s3">1</span><span class="s0">]=</span><span class="s1">At</span><span class="s0">*</span><span class="s1">r</span><span class="s0">[</span><span class="s1">Nt</span><span class="s0">+</span><span class="s3">1</span><span class="s0">];</span><span class="s4">if</span><span class="s0">(</span><span class="s1">o</span><span class="s0">&amp;&amp;</span><span class="s1">Nt</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">m</span><span class="s0">-</span><span class="s3">1</span><span class="s0">){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">It</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">It</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">m</span><span class="s0">;</span><span class="s1">It</span><span class="s0">++){</span><span class="s1">Tt</span><span class="s0">=</span><span class="s1">At</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">U</span><span class="s0">[</span><span class="s1">It</span><span class="s0">][</span><span class="s1">Nt</span><span class="s0">]+</span><span class="s1">wt</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">U</span><span class="s0">[</span><span class="s1">It</span><span class="s0">][</span><span class="s1">Nt</span><span class="s0">+</span><span class="s3">1</span><span class="s0">];</span><span class="s4">this</span><span class="s0">.</span><span class="s1">U</span><span class="s0">[</span><span class="s1">It</span><span class="s0">][</span><span class="s1">Nt</span><span class="s0">+</span><span class="s3">1</span><span class="s0">]=-</span><span class="s1">wt</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">U</span><span class="s0">[</span><span class="s1">It</span><span class="s0">][</span><span class="s1">Nt</span><span class="s0">]+</span><span class="s1">At</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">U</span><span class="s0">[</span><span class="s1">It</span><span class="s0">][</span><span class="s1">Nt</span><span class="s0">+</span><span class="s3">1</span><span class="s0">];</span><span class="s4">this</span><span class="s0">.</span><span class="s1">U</span><span class="s0">[</span><span class="s1">It</span><span class="s0">][</span><span class="s1">Nt</span><span class="s0">]=</span><span class="s1">Tt</span><span class="s0">}}}</span><span class="s1">r</span><span class="s0">[</span><span class="s1">_</span><span class="s0">-</span><span class="s3">2</span><span class="s0">]=</span><span class="s1">mt</span><span class="s0">;</span><span class="s1">V</span><span class="s0">=</span><span class="s1">V</span><span class="s0">+</span><span class="s3">1</span><span class="s0">};</span><span class="s4">break</span><span class="s0">;</span><span class="s4">case </span><span class="s3">4</span><span class="s0">:{</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">s</span><span class="s0">[</span><span class="s1">j</span><span class="s0">]&lt;=</span><span class="s3">0</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">s</span><span class="s0">[</span><span class="s1">j</span><span class="s0">]=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">s</span><span class="s0">[</span><span class="s1">j</span><span class="s0">]&lt;</span><span class="s3">0</span><span class="s0">?-</span><span class="s4">this</span><span class="s0">.</span><span class="s1">s</span><span class="s0">[</span><span class="s1">j</span><span class="s0">]:</span><span class="s3">0</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">a</span><span class="s0">){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">_t</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">_t</span><span class="s0">&lt;=</span><span class="s1">z</span><span class="s0">;</span><span class="s1">_t</span><span class="s0">++){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">V</span><span class="s0">[</span><span class="s1">_t</span><span class="s0">][</span><span class="s1">j</span><span class="s0">]=-</span><span class="s4">this</span><span class="s0">.</span><span class="s1">V</span><span class="s0">[</span><span class="s1">_t</span><span class="s0">][</span><span class="s1">j</span><span class="s0">]}}}</span><span class="s4">while</span><span class="s0">(</span><span class="s1">j</span><span class="s0">&lt;</span><span class="s1">z</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">s</span><span class="s0">[</span><span class="s1">j</span><span class="s0">]&gt;=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">s</span><span class="s0">[</span><span class="s1">j</span><span class="s0">+</span><span class="s3">1</span><span class="s0">]){</span><span class="s4">break</span><span class="s0">}</span><span class="s4">var </span><span class="s1">Ct</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">s</span><span class="s0">[</span><span class="s1">j</span><span class="s0">];</span><span class="s4">this</span><span class="s0">.</span><span class="s1">s</span><span class="s0">[</span><span class="s1">j</span><span class="s0">]=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">s</span><span class="s0">[</span><span class="s1">j</span><span class="s0">+</span><span class="s3">1</span><span class="s0">];</span><span class="s4">this</span><span class="s0">.</span><span class="s1">s</span><span class="s0">[</span><span class="s1">j</span><span class="s0">+</span><span class="s3">1</span><span class="s0">]=</span><span class="s1">Ct</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">a</span><span class="s0">&amp;&amp;</span><span class="s1">j</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">n</span><span class="s0">-</span><span class="s3">1</span><span class="s0">){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">Mt</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">Mt</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">n</span><span class="s0">;</span><span class="s1">Mt</span><span class="s0">++){</span><span class="s1">Ct</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">V</span><span class="s0">[</span><span class="s1">Mt</span><span class="s0">][</span><span class="s1">j</span><span class="s0">+</span><span class="s3">1</span><span class="s0">];</span><span class="s4">this</span><span class="s0">.</span><span class="s1">V</span><span class="s0">[</span><span class="s1">Mt</span><span class="s0">][</span><span class="s1">j</span><span class="s0">+</span><span class="s3">1</span><span class="s0">]=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">V</span><span class="s0">[</span><span class="s1">Mt</span><span class="s0">][</span><span class="s1">j</span><span class="s0">];</span><span class="s4">this</span><span class="s0">.</span><span class="s1">V</span><span class="s0">[</span><span class="s1">Mt</span><span class="s0">][</span><span class="s1">j</span><span class="s0">]=</span><span class="s1">Ct</span><span class="s0">}}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">o</span><span class="s0">&amp;&amp;</span><span class="s1">j</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">m</span><span class="s0">-</span><span class="s3">1</span><span class="s0">){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">xt</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">xt</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">m</span><span class="s0">;</span><span class="s1">xt</span><span class="s0">++){</span><span class="s1">Ct</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">U</span><span class="s0">[</span><span class="s1">xt</span><span class="s0">][</span><span class="s1">j</span><span class="s0">+</span><span class="s3">1</span><span class="s0">];</span><span class="s4">this</span><span class="s0">.</span><span class="s1">U</span><span class="s0">[</span><span class="s1">xt</span><span class="s0">][</span><span class="s1">j</span><span class="s0">+</span><span class="s3">1</span><span class="s0">]=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">U</span><span class="s0">[</span><span class="s1">xt</span><span class="s0">][</span><span class="s1">j</span><span class="s0">];</span><span class="s4">this</span><span class="s0">.</span><span class="s1">U</span><span class="s0">[</span><span class="s1">xt</span><span class="s0">][</span><span class="s1">j</span><span class="s0">]=</span><span class="s1">Ct</span><span class="s0">}}</span><span class="s1">j</span><span class="s0">++}</span><span class="s1">V</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">_</span><span class="s0">--};</span><span class="s4">break</span><span class="s0">}}</span><span class="s4">var </span><span class="s1">Ot</span><span class="s0">={</span><span class="s1">U</span><span class="s0">:</span><span class="s4">this</span><span class="s0">.</span><span class="s1">U</span><span class="s0">,</span><span class="s1">V</span><span class="s0">:</span><span class="s4">this</span><span class="s0">.</span><span class="s1">V</span><span class="s0">,</span><span class="s1">S</span><span class="s0">:</span><span class="s4">this</span><span class="s0">.</span><span class="s1">s</span><span class="s0">};</span><span class="s4">return </span><span class="s1">Ot</span><span class="s0">};</span><span class="s1">i</span><span class="s0">.</span><span class="s1">hypot</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">abs</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)&gt;</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">abs</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)){</span><span class="s1">r</span><span class="s0">=</span><span class="s1">e</span><span class="s0">/</span><span class="s1">t</span><span class="s0">;</span><span class="s1">r</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">abs</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)*</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">sqrt</span><span class="s0">(</span><span class="s3">1</span><span class="s0">+</span><span class="s1">r</span><span class="s0">*</span><span class="s1">r</span><span class="s0">)}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">!=</span><span class="s3">0</span><span class="s0">){</span><span class="s1">r</span><span class="s0">=</span><span class="s1">t</span><span class="s0">/</span><span class="s1">e</span><span class="s0">;</span><span class="s1">r</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">abs</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)*</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">sqrt</span><span class="s0">(</span><span class="s3">1</span><span class="s0">+</span><span class="s1">r</span><span class="s0">*</span><span class="s1">r</span><span class="s0">)}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">r</span><span class="s0">=</span><span class="s3">0</span><span class="s0">}</span><span class="s4">return </span><span class="s1">r</span><span class="s0">};</span><span class="s1">t</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">=</span><span class="s1">i</span><span class="s0">},</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s2">&quot;use strict&quot;</span><span class="s0">;</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">r</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">r</span><span class="s0">++){</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">r</span><span class="s0">];</span><span class="s1">i</span><span class="s0">.</span><span class="s1">enumerable</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">enumerable</span><span class="s0">||</span><span class="s4">false</span><span class="s0">;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">configurable</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s2">&quot;value&quot;</span><span class="s4">in </span><span class="s1">i</span><span class="s0">)</span><span class="s1">i</span><span class="s0">.</span><span class="s1">writable</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">.</span><span class="s1">key</span><span class="s0">,</span><span class="s1">i</span><span class="s0">)}}</span><span class="s4">return function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">)</span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">,</span><span class="s1">r</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">i</span><span class="s0">)</span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">i</span><span class="s0">);</span><span class="s4">return </span><span class="s1">e</span><span class="s0">}}();</span><span class="s4">function </span><span class="s1">n</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(!(</span><span class="s1">t </span><span class="s4">instanceof </span><span class="s1">e</span><span class="s0">)){</span><span class="s4">throw new </span><span class="s1">TypeError</span><span class="s0">(</span><span class="s2">&quot;Cannot call a class as a function&quot;</span><span class="s0">)}}</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">arguments</span><span class="s0">.</span><span class="s1">length</span><span class="s0">&gt;</span><span class="s3">2</span><span class="s0">&amp;&amp;</span><span class="s1">arguments</span><span class="s0">[</span><span class="s3">2</span><span class="s0">]!==</span><span class="s1">undefined</span><span class="s0">?</span><span class="s1">arguments</span><span class="s0">[</span><span class="s3">2</span><span class="s0">]:</span><span class="s3">1</span><span class="s0">;</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s1">arguments</span><span class="s0">.</span><span class="s1">length</span><span class="s0">&gt;</span><span class="s3">3</span><span class="s0">&amp;&amp;</span><span class="s1">arguments</span><span class="s0">[</span><span class="s3">3</span><span class="s0">]!==</span><span class="s1">undefined</span><span class="s0">?</span><span class="s1">arguments</span><span class="s0">[</span><span class="s3">3</span><span class="s0">]:-</span><span class="s3">1</span><span class="s0">;</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s1">arguments</span><span class="s0">.</span><span class="s1">length</span><span class="s0">&gt;</span><span class="s3">4</span><span class="s0">&amp;&amp;</span><span class="s1">arguments</span><span class="s0">[</span><span class="s3">4</span><span class="s0">]!==</span><span class="s1">undefined</span><span class="s0">?</span><span class="s1">arguments</span><span class="s0">[</span><span class="s3">4</span><span class="s0">]:-</span><span class="s3">1</span><span class="s0">;</span><span class="s1">n</span><span class="s0">(</span><span class="s4">this</span><span class="s0">,</span><span class="s1">t</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">sequence1</span><span class="s0">=</span><span class="s1">e</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">sequence2</span><span class="s0">=</span><span class="s1">r</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">match_score</span><span class="s0">=</span><span class="s1">i</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">mismatch_penalty</span><span class="s0">=</span><span class="s1">o</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">gap_penalty</span><span class="s0">=</span><span class="s1">a</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">iMax</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">+</span><span class="s3">1</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">jMax</span><span class="s0">=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">length</span><span class="s0">+</span><span class="s3">1</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">grid</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Array</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">iMax</span><span class="s0">);</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">s</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">iMax</span><span class="s0">;</span><span class="s1">s</span><span class="s0">++){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">grid</span><span class="s0">[</span><span class="s1">s</span><span class="s0">]=</span><span class="s4">new </span><span class="s1">Array</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">jMax</span><span class="s0">);</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">h</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">h</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">jMax</span><span class="s0">;</span><span class="s1">h</span><span class="s0">++){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">grid</span><span class="s0">[</span><span class="s1">s</span><span class="s0">][</span><span class="s1">h</span><span class="s0">]=</span><span class="s3">0</span><span class="s0">}}</span><span class="s4">this</span><span class="s0">.</span><span class="s1">tracebackGrid</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Array</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">iMax</span><span class="s0">);</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">l</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">l</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">iMax</span><span class="s0">;</span><span class="s1">l</span><span class="s0">++){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">tracebackGrid</span><span class="s0">[</span><span class="s1">l</span><span class="s0">]=</span><span class="s4">new </span><span class="s1">Array</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">jMax</span><span class="s0">);</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">c</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">c</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">jMax</span><span class="s0">;</span><span class="s1">c</span><span class="s0">++){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">tracebackGrid</span><span class="s0">[</span><span class="s1">l</span><span class="s0">][</span><span class="s1">c</span><span class="s0">]=[</span><span class="s4">null</span><span class="s0">,</span><span class="s4">null</span><span class="s0">,</span><span class="s4">null</span><span class="s0">]}}</span><span class="s4">this</span><span class="s0">.</span><span class="s1">alignments</span><span class="s0">=[];</span><span class="s4">this</span><span class="s0">.</span><span class="s1">score</span><span class="s0">=-</span><span class="s3">1</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">computeGrids</span><span class="s0">()}</span><span class="s1">i</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,[{</span><span class="s1">key</span><span class="s0">:</span><span class="s2">&quot;getScore&quot;</span><span class="s0">,</span><span class="s1">value</span><span class="s0">:</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">score</span><span class="s0">}},{</span><span class="s1">key</span><span class="s0">:</span><span class="s2">&quot;getAlignments&quot;</span><span class="s0">,</span><span class="s1">value</span><span class="s0">:</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">alignments</span><span class="s0">}},{</span><span class="s1">key</span><span class="s0">:</span><span class="s2">&quot;computeGrids&quot;</span><span class="s0">,</span><span class="s1">value</span><span class="s0">:</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s3">1</span><span class="s0">;</span><span class="s1">e</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">jMax</span><span class="s0">;</span><span class="s1">e</span><span class="s0">++){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">grid</span><span class="s0">[</span><span class="s3">0</span><span class="s0">][</span><span class="s1">e</span><span class="s0">]=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">grid</span><span class="s0">[</span><span class="s3">0</span><span class="s0">][</span><span class="s1">e</span><span class="s0">-</span><span class="s3">1</span><span class="s0">]+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">gap_penalty</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">tracebackGrid</span><span class="s0">[</span><span class="s3">0</span><span class="s0">][</span><span class="s1">e</span><span class="s0">]=[</span><span class="s4">false</span><span class="s0">,</span><span class="s4">false</span><span class="s0">,</span><span class="s4">true</span><span class="s0">]}</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s3">1</span><span class="s0">;</span><span class="s1">r</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">iMax</span><span class="s0">;</span><span class="s1">r</span><span class="s0">++){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">grid</span><span class="s0">[</span><span class="s1">r</span><span class="s0">][</span><span class="s3">0</span><span class="s0">]=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">grid</span><span class="s0">[</span><span class="s1">r</span><span class="s0">-</span><span class="s3">1</span><span class="s0">][</span><span class="s3">0</span><span class="s0">]+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">gap_penalty</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">tracebackGrid</span><span class="s0">[</span><span class="s1">r</span><span class="s0">][</span><span class="s3">0</span><span class="s0">]=[</span><span class="s4">false</span><span class="s0">,</span><span class="s4">true</span><span class="s0">,</span><span class="s4">false</span><span class="s0">]}</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s3">1</span><span class="s0">;</span><span class="s1">i</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">iMax</span><span class="s0">;</span><span class="s1">i</span><span class="s0">++){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s3">1</span><span class="s0">;</span><span class="s1">n</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">jMax</span><span class="s0">;</span><span class="s1">n</span><span class="s0">++){</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">sequence1</span><span class="s0">[</span><span class="s1">i</span><span class="s0">-</span><span class="s3">1</span><span class="s0">]===</span><span class="s4">this</span><span class="s0">.</span><span class="s1">sequence2</span><span class="s0">[</span><span class="s1">n</span><span class="s0">-</span><span class="s3">1</span><span class="s0">])</span><span class="s1">o</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">grid</span><span class="s0">[</span><span class="s1">i</span><span class="s0">-</span><span class="s3">1</span><span class="s0">][</span><span class="s1">n</span><span class="s0">-</span><span class="s3">1</span><span class="s0">]+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">match_score</span><span class="s0">;</span><span class="s4">else </span><span class="s1">o</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">grid</span><span class="s0">[</span><span class="s1">i</span><span class="s0">-</span><span class="s3">1</span><span class="s0">][</span><span class="s1">n</span><span class="s0">-</span><span class="s3">1</span><span class="s0">]+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">mismatch_penalty</span><span class="s0">;</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">grid</span><span class="s0">[</span><span class="s1">i</span><span class="s0">-</span><span class="s3">1</span><span class="s0">][</span><span class="s1">n</span><span class="s0">]+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">gap_penalty</span><span class="s0">;</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">grid</span><span class="s0">[</span><span class="s1">i</span><span class="s0">][</span><span class="s1">n</span><span class="s0">-</span><span class="s3">1</span><span class="s0">]+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">gap_penalty</span><span class="s0">;</span><span class="s4">var </span><span class="s1">h</span><span class="s0">=[</span><span class="s1">o</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">s</span><span class="s0">];</span><span class="s4">var </span><span class="s1">l</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">arrayAllMaxIndexes</span><span class="s0">(</span><span class="s1">h</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">grid</span><span class="s0">[</span><span class="s1">i</span><span class="s0">][</span><span class="s1">n</span><span class="s0">]=</span><span class="s1">h</span><span class="s0">[</span><span class="s1">l</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]];</span><span class="s4">this</span><span class="s0">.</span><span class="s1">tracebackGrid</span><span class="s0">[</span><span class="s1">i</span><span class="s0">][</span><span class="s1">n</span><span class="s0">]=[</span><span class="s1">l</span><span class="s0">.</span><span class="s1">includes</span><span class="s0">(</span><span class="s3">0</span><span class="s0">),</span><span class="s1">l</span><span class="s0">.</span><span class="s1">includes</span><span class="s0">(</span><span class="s3">1</span><span class="s0">),</span><span class="s1">l</span><span class="s0">.</span><span class="s1">includes</span><span class="s0">(</span><span class="s3">2</span><span class="s0">)]}}</span><span class="s4">this</span><span class="s0">.</span><span class="s1">score</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">grid</span><span class="s0">[</span><span class="s4">this</span><span class="s0">.</span><span class="s1">iMax</span><span class="s0">-</span><span class="s3">1</span><span class="s0">][</span><span class="s4">this</span><span class="s0">.</span><span class="s1">jMax</span><span class="s0">-</span><span class="s3">1</span><span class="s0">]}},{</span><span class="s1">key</span><span class="s0">:</span><span class="s2">&quot;alignmentTraceback&quot;</span><span class="s0">,</span><span class="s1">value</span><span class="s0">:</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(){</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=[];</span><span class="s1">e</span><span class="s0">.</span><span class="s1">push</span><span class="s0">({</span><span class="s1">pos</span><span class="s0">:[</span><span class="s4">this</span><span class="s0">.</span><span class="s1">sequence1</span><span class="s0">.</span><span class="s1">length</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">sequence2</span><span class="s0">.</span><span class="s1">length</span><span class="s0">],</span><span class="s1">seq1</span><span class="s0">:</span><span class="s2">&quot;&quot;</span><span class="s0">,</span><span class="s1">seq2</span><span class="s0">:</span><span class="s2">&quot;&quot;</span><span class="s0">});</span><span class="s4">while</span><span class="s0">(</span><span class="s1">e</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]){</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s3">0</span><span class="s0">];</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">tracebackGrid</span><span class="s0">[</span><span class="s1">r</span><span class="s0">.</span><span class="s1">pos</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]][</span><span class="s1">r</span><span class="s0">.</span><span class="s1">pos</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]];</span><span class="s4">if</span><span class="s0">(</span><span class="s1">i</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]){</span><span class="s1">e</span><span class="s0">.</span><span class="s1">push</span><span class="s0">({</span><span class="s1">pos</span><span class="s0">:[</span><span class="s1">r</span><span class="s0">.</span><span class="s1">pos</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]-</span><span class="s3">1</span><span class="s0">,</span><span class="s1">r</span><span class="s0">.</span><span class="s1">pos</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]-</span><span class="s3">1</span><span class="s0">],</span><span class="s1">seq1</span><span class="s0">:</span><span class="s4">this</span><span class="s0">.</span><span class="s1">sequence1</span><span class="s0">[</span><span class="s1">r</span><span class="s0">.</span><span class="s1">pos</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]-</span><span class="s3">1</span><span class="s0">]+</span><span class="s1">r</span><span class="s0">.</span><span class="s1">seq1</span><span class="s0">,</span><span class="s1">seq2</span><span class="s0">:</span><span class="s4">this</span><span class="s0">.</span><span class="s1">sequence2</span><span class="s0">[</span><span class="s1">r</span><span class="s0">.</span><span class="s1">pos</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]-</span><span class="s3">1</span><span class="s0">]+</span><span class="s1">r</span><span class="s0">.</span><span class="s1">seq2</span><span class="s0">})}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">i</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]){</span><span class="s1">e</span><span class="s0">.</span><span class="s1">push</span><span class="s0">({</span><span class="s1">pos</span><span class="s0">:[</span><span class="s1">r</span><span class="s0">.</span><span class="s1">pos</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]-</span><span class="s3">1</span><span class="s0">,</span><span class="s1">r</span><span class="s0">.</span><span class="s1">pos</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]],</span><span class="s1">seq1</span><span class="s0">:</span><span class="s4">this</span><span class="s0">.</span><span class="s1">sequence1</span><span class="s0">[</span><span class="s1">r</span><span class="s0">.</span><span class="s1">pos</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]-</span><span class="s3">1</span><span class="s0">]+</span><span class="s1">r</span><span class="s0">.</span><span class="s1">seq1</span><span class="s0">,</span><span class="s1">seq2</span><span class="s0">:</span><span class="s2">&quot;-&quot;</span><span class="s0">+</span><span class="s1">r</span><span class="s0">.</span><span class="s1">seq2</span><span class="s0">})}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">i</span><span class="s0">[</span><span class="s3">2</span><span class="s0">]){</span><span class="s1">e</span><span class="s0">.</span><span class="s1">push</span><span class="s0">({</span><span class="s1">pos</span><span class="s0">:[</span><span class="s1">r</span><span class="s0">.</span><span class="s1">pos</span><span class="s0">[</span><span class="s3">0</span><span class="s0">],</span><span class="s1">r</span><span class="s0">.</span><span class="s1">pos</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]-</span><span class="s3">1</span><span class="s0">],</span><span class="s1">seq1</span><span class="s0">:</span><span class="s2">&quot;-&quot;</span><span class="s0">+</span><span class="s1">r</span><span class="s0">.</span><span class="s1">seq1</span><span class="s0">,</span><span class="s1">seq2</span><span class="s0">:</span><span class="s4">this</span><span class="s0">.</span><span class="s1">sequence2</span><span class="s0">[</span><span class="s1">r</span><span class="s0">.</span><span class="s1">pos</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]-</span><span class="s3">1</span><span class="s0">]+</span><span class="s1">r</span><span class="s0">.</span><span class="s1">seq2</span><span class="s0">})}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">pos</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]===</span><span class="s3">0</span><span class="s0">&amp;&amp;</span><span class="s1">r</span><span class="s0">.</span><span class="s1">pos</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]===</span><span class="s3">0</span><span class="s0">)</span><span class="s4">this</span><span class="s0">.</span><span class="s1">alignments</span><span class="s0">.</span><span class="s1">push</span><span class="s0">({</span><span class="s1">sequence1</span><span class="s0">:</span><span class="s1">r</span><span class="s0">.</span><span class="s1">seq1</span><span class="s0">,</span><span class="s1">sequence2</span><span class="s0">:</span><span class="s1">r</span><span class="s0">.</span><span class="s1">seq2</span><span class="s0">});</span><span class="s1">e</span><span class="s0">.</span><span class="s1">shift</span><span class="s0">()}</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">alignments</span><span class="s0">}},{</span><span class="s1">key</span><span class="s0">:</span><span class="s2">&quot;getAllIndexes&quot;</span><span class="s0">,</span><span class="s1">value</span><span class="s0">:</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=[],</span><span class="s1">n</span><span class="s0">=-</span><span class="s3">1</span><span class="s0">;</span><span class="s4">while</span><span class="s0">((</span><span class="s1">n</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">indexOf</span><span class="s0">(</span><span class="s1">r</span><span class="s0">,</span><span class="s1">n</span><span class="s0">+</span><span class="s3">1</span><span class="s0">))!==-</span><span class="s3">1</span><span class="s0">){</span><span class="s1">i</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">n</span><span class="s0">)}</span><span class="s4">return </span><span class="s1">i</span><span class="s0">}},{</span><span class="s1">key</span><span class="s0">:</span><span class="s2">&quot;arrayAllMaxIndexes&quot;</span><span class="s0">,</span><span class="s1">value</span><span class="s0">:</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">getAllIndexes</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">max</span><span class="s0">.</span><span class="s1">apply</span><span class="s0">(</span><span class="s4">null</span><span class="s0">,</span><span class="s1">e</span><span class="s0">))}}]);</span><span class="s4">return </span><span class="s1">t</span><span class="s0">}();</span><span class="s1">t</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">=</span><span class="s1">o</span><span class="s0">},</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s2">&quot;use strict&quot;</span><span class="s0">;</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(){</span><span class="s4">return</span><span class="s0">};</span><span class="s1">i</span><span class="s0">.</span><span class="s1">FDLayout</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">18</span><span class="s0">);</span><span class="s1">i</span><span class="s0">.</span><span class="s1">FDLayoutConstants</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">4</span><span class="s0">);</span><span class="s1">i</span><span class="s0">.</span><span class="s1">FDLayoutEdge</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">19</span><span class="s0">);</span><span class="s1">i</span><span class="s0">.</span><span class="s1">FDLayoutNode</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">20</span><span class="s0">);</span><span class="s1">i</span><span class="s0">.</span><span class="s1">DimensionD</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">21</span><span class="s0">);</span><span class="s1">i</span><span class="s0">.</span><span class="s1">HashMap</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">22</span><span class="s0">);</span><span class="s1">i</span><span class="s0">.</span><span class="s1">HashSet</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">23</span><span class="s0">);</span><span class="s1">i</span><span class="s0">.</span><span class="s1">IGeometry</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">8</span><span class="s0">);</span><span class="s1">i</span><span class="s0">.</span><span class="s1">IMath</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">9</span><span class="s0">);</span><span class="s1">i</span><span class="s0">.</span><span class="s1">Integer</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">10</span><span class="s0">);</span><span class="s1">i</span><span class="s0">.</span><span class="s1">Point</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">12</span><span class="s0">);</span><span class="s1">i</span><span class="s0">.</span><span class="s1">PointD</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">5</span><span class="s0">);</span><span class="s1">i</span><span class="s0">.</span><span class="s1">RandomSeed</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">16</span><span class="s0">);</span><span class="s1">i</span><span class="s0">.</span><span class="s1">RectangleD</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">13</span><span class="s0">);</span><span class="s1">i</span><span class="s0">.</span><span class="s1">Transform</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">17</span><span class="s0">);</span><span class="s1">i</span><span class="s0">.</span><span class="s1">UniqueIDGeneretor</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">14</span><span class="s0">);</span><span class="s1">i</span><span class="s0">.</span><span class="s1">Quicksort</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">25</span><span class="s0">);</span><span class="s1">i</span><span class="s0">.</span><span class="s1">LinkedList</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">11</span><span class="s0">);</span><span class="s1">i</span><span class="s0">.</span><span class="s1">LGraphObject</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">2</span><span class="s0">);</span><span class="s1">i</span><span class="s0">.</span><span class="s1">LGraph</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">6</span><span class="s0">);</span><span class="s1">i</span><span class="s0">.</span><span class="s1">LEdge</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">1</span><span class="s0">);</span><span class="s1">i</span><span class="s0">.</span><span class="s1">LGraphManager</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">7</span><span class="s0">);</span><span class="s1">i</span><span class="s0">.</span><span class="s1">LNode</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">3</span><span class="s0">);</span><span class="s1">i</span><span class="s0">.</span><span class="s1">Layout</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">15</span><span class="s0">);</span><span class="s1">i</span><span class="s0">.</span><span class="s1">LayoutConstants</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">0</span><span class="s0">);</span><span class="s1">i</span><span class="s0">.</span><span class="s1">NeedlemanWunsch</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">27</span><span class="s0">);</span><span class="s1">i</span><span class="s0">.</span><span class="s1">Matrix</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">24</span><span class="s0">);</span><span class="s1">i</span><span class="s0">.</span><span class="s1">SVD</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">26</span><span class="s0">);</span><span class="s1">t</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">=</span><span class="s1">i</span><span class="s0">},</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s2">&quot;use strict&quot;</span><span class="s0">;</span><span class="s4">function </span><span class="s1">i</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">listeners</span><span class="s0">=[]}</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">addListener</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">listeners</span><span class="s0">.</span><span class="s1">push</span><span class="s0">({</span><span class="s1">event</span><span class="s0">:</span><span class="s1">t</span><span class="s0">,</span><span class="s1">callback</span><span class="s0">:</span><span class="s1">e</span><span class="s0">})};</span><span class="s1">n</span><span class="s0">.</span><span class="s1">removeListener</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">listeners</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">r</span><span class="s0">&gt;=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">r</span><span class="s0">--){</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">listeners</span><span class="s0">[</span><span class="s1">r</span><span class="s0">];</span><span class="s4">if</span><span class="s0">(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">event</span><span class="s0">===</span><span class="s1">t</span><span class="s0">&amp;&amp;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">callback</span><span class="s0">===</span><span class="s1">e</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">listeners</span><span class="s0">.</span><span class="s1">splice</span><span class="s0">(</span><span class="s1">r</span><span class="s0">,</span><span class="s3">1</span><span class="s0">)}}};</span><span class="s1">n</span><span class="s0">.</span><span class="s1">emit</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">r</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">listeners</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">r</span><span class="s0">++){</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">listeners</span><span class="s0">[</span><span class="s1">r</span><span class="s0">];</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">===</span><span class="s1">i</span><span class="s0">.</span><span class="s1">event</span><span class="s0">){</span><span class="s1">i</span><span class="s0">.</span><span class="s1">callback</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)}}};</span><span class="s1">t</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">=</span><span class="s1">i</span><span class="s0">}])}))},</span><span class="s3">17371</span><span class="s0">:(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">)=&gt;{</span><span class="s2">&quot;use strict&quot;</span><span class="s0">;</span><span class="s1">r</span><span class="s0">.</span><span class="s1">d</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,{</span><span class="s1">diagram</span><span class="s0">:()=&gt;</span><span class="s1">yt</span><span class="s0">});</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">68232</span><span class="s0">);</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">76261</span><span class="s0">);</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">19163</span><span class="s0">);</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">13249</span><span class="s0">);</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">96049</span><span class="s0">);</span><span class="s4">var </span><span class="s1">h</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">93113</span><span class="s0">);</span><span class="s4">var </span><span class="s1">l</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">75905</span><span class="s0">);</span><span class="s4">var </span><span class="s1">c</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">24010</span><span class="s0">);</span><span class="s4">var </span><span class="s1">d</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">76405</span><span class="s0">);</span><span class="s4">var </span><span class="s1">f</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">26527</span><span class="s0">);</span><span class="s4">var </span><span class="s1">g</span><span class="s0">=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">n</span><span class="s0">(</span><span class="s1">f</span><span class="s0">);</span><span class="s4">var </span><span class="s1">u</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">24982</span><span class="s0">);</span><span class="s4">var </span><span class="s1">p</span><span class="s0">={</span><span class="s1">L</span><span class="s0">:</span><span class="s2">&quot;left&quot;</span><span class="s0">,</span><span class="s1">R</span><span class="s0">:</span><span class="s2">&quot;right&quot;</span><span class="s0">,</span><span class="s1">T</span><span class="s0">:</span><span class="s2">&quot;top&quot;</span><span class="s0">,</span><span class="s1">B</span><span class="s0">:</span><span class="s2">&quot;bottom&quot;</span><span class="s0">};</span><span class="s4">var </span><span class="s1">v</span><span class="s0">={</span><span class="s1">L</span><span class="s0">:(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)((</span><span class="s1">t</span><span class="s0">=&gt;</span><span class="s2">`</span><span class="s1">$</span><span class="s0">{</span><span class="s1">t</span><span class="s0">}</span><span class="s2">,</span><span class="s1">$</span><span class="s0">{</span><span class="s1">t</span><span class="s0">/</span><span class="s3">2</span><span class="s0">} </span><span class="s2">0,</span><span class="s1">$</span><span class="s0">{</span><span class="s1">t</span><span class="s0">} </span><span class="s2">0,0`</span><span class="s0">),</span><span class="s2">&quot;L&quot;</span><span class="s0">),</span><span class="s1">R</span><span class="s0">:(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)((</span><span class="s1">t</span><span class="s0">=&gt;</span><span class="s2">`0,</span><span class="s1">$</span><span class="s0">{</span><span class="s1">t</span><span class="s0">/</span><span class="s3">2</span><span class="s0">} </span><span class="s1">$</span><span class="s0">{</span><span class="s1">t</span><span class="s0">}</span><span class="s2">,0 </span><span class="s1">$</span><span class="s0">{</span><span class="s1">t</span><span class="s0">}</span><span class="s2">,</span><span class="s1">$</span><span class="s0">{</span><span class="s1">t</span><span class="s0">}</span><span class="s2">`</span><span class="s0">),</span><span class="s2">&quot;R&quot;</span><span class="s0">),</span><span class="s1">T</span><span class="s0">:(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)((</span><span class="s1">t</span><span class="s0">=&gt;</span><span class="s2">`0,0 </span><span class="s1">$</span><span class="s0">{</span><span class="s1">t</span><span class="s0">}</span><span class="s2">,0 </span><span class="s1">$</span><span class="s0">{</span><span class="s1">t</span><span class="s0">/</span><span class="s3">2</span><span class="s0">}</span><span class="s2">,</span><span class="s1">$</span><span class="s0">{</span><span class="s1">t</span><span class="s0">}</span><span class="s2">`</span><span class="s0">),</span><span class="s2">&quot;T&quot;</span><span class="s0">),</span><span class="s1">B</span><span class="s0">:(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)((</span><span class="s1">t</span><span class="s0">=&gt;</span><span class="s2">`</span><span class="s1">$</span><span class="s0">{</span><span class="s1">t</span><span class="s0">/</span><span class="s3">2</span><span class="s0">}</span><span class="s2">,0 </span><span class="s1">$</span><span class="s0">{</span><span class="s1">t</span><span class="s0">}</span><span class="s2">,</span><span class="s1">$</span><span class="s0">{</span><span class="s1">t</span><span class="s0">} </span><span class="s2">0,</span><span class="s1">$</span><span class="s0">{</span><span class="s1">t</span><span class="s0">}</span><span class="s2">`</span><span class="s0">),</span><span class="s2">&quot;B&quot;</span><span class="s0">)};</span><span class="s4">var </span><span class="s1">y</span><span class="s0">={</span><span class="s1">L</span><span class="s0">:(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)(((</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">)=&gt;</span><span class="s1">t</span><span class="s0">-</span><span class="s1">e</span><span class="s0">+</span><span class="s3">2</span><span class="s0">),</span><span class="s2">&quot;L&quot;</span><span class="s0">),</span><span class="s1">R</span><span class="s0">:(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)(((</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">)=&gt;</span><span class="s1">t</span><span class="s0">-</span><span class="s3">2</span><span class="s0">),</span><span class="s2">&quot;R&quot;</span><span class="s0">),</span><span class="s1">T</span><span class="s0">:(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)(((</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">)=&gt;</span><span class="s1">t</span><span class="s0">-</span><span class="s1">e</span><span class="s0">+</span><span class="s3">2</span><span class="s0">),</span><span class="s2">&quot;T&quot;</span><span class="s0">),</span><span class="s1">B</span><span class="s0">:(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)(((</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">)=&gt;</span><span class="s1">t</span><span class="s0">-</span><span class="s3">2</span><span class="s0">),</span><span class="s2">&quot;B&quot;</span><span class="s0">)};</span><span class="s4">var </span><span class="s1">m</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">N</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)){</span><span class="s4">return </span><span class="s1">t</span><span class="s0">===</span><span class="s2">&quot;L&quot;</span><span class="s0">?</span><span class="s2">&quot;R&quot;</span><span class="s0">:</span><span class="s2">&quot;L&quot;</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">return </span><span class="s1">t</span><span class="s0">===</span><span class="s2">&quot;T&quot;</span><span class="s0">?</span><span class="s2">&quot;B&quot;</span><span class="s0">:</span><span class="s2">&quot;T&quot;</span><span class="s0">}}),</span><span class="s2">&quot;getOppositeArchitectureDirection&quot;</span><span class="s0">);</span><span class="s4">var </span><span class="s1">E</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">const </span><span class="s1">e</span><span class="s0">=</span><span class="s1">t</span><span class="s0">;</span><span class="s4">return </span><span class="s1">e</span><span class="s0">===</span><span class="s2">&quot;L&quot;</span><span class="s0">||</span><span class="s1">e</span><span class="s0">===</span><span class="s2">&quot;R&quot;</span><span class="s0">||</span><span class="s1">e</span><span class="s0">===</span><span class="s2">&quot;T&quot;</span><span class="s0">||</span><span class="s1">e</span><span class="s0">===</span><span class="s2">&quot;B&quot;</span><span class="s0">}),</span><span class="s2">&quot;isArchitectureDirection&quot;</span><span class="s0">);</span><span class="s4">var </span><span class="s1">N</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">const </span><span class="s1">e</span><span class="s0">=</span><span class="s1">t</span><span class="s0">;</span><span class="s4">return </span><span class="s1">e</span><span class="s0">===</span><span class="s2">&quot;L&quot;</span><span class="s0">||</span><span class="s1">e</span><span class="s0">===</span><span class="s2">&quot;R&quot;</span><span class="s0">}),</span><span class="s2">&quot;isArchitectureDirectionX&quot;</span><span class="s0">);</span><span class="s4">var </span><span class="s1">T</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">const </span><span class="s1">e</span><span class="s0">=</span><span class="s1">t</span><span class="s0">;</span><span class="s4">return </span><span class="s1">e</span><span class="s0">===</span><span class="s2">&quot;T&quot;</span><span class="s0">||</span><span class="s1">e</span><span class="s0">===</span><span class="s2">&quot;B&quot;</span><span class="s0">}),</span><span class="s2">&quot;isArchitectureDirectionY&quot;</span><span class="s0">);</span><span class="s4">var </span><span class="s1">A</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">const </span><span class="s1">r</span><span class="s0">=</span><span class="s1">N</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)&amp;&amp;</span><span class="s1">T</span><span class="s0">(</span><span class="s1">e</span><span class="s0">);</span><span class="s4">const </span><span class="s1">i</span><span class="s0">=</span><span class="s1">T</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)&amp;&amp;</span><span class="s1">N</span><span class="s0">(</span><span class="s1">e</span><span class="s0">);</span><span class="s4">return </span><span class="s1">r</span><span class="s0">||</span><span class="s1">i</span><span class="s0">}),</span><span class="s2">&quot;isArchitectureDirectionXY&quot;</span><span class="s0">);</span><span class="s4">var </span><span class="s1">w</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">const </span><span class="s1">e</span><span class="s0">=</span><span class="s1">t</span><span class="s0">[</span><span class="s3">0</span><span class="s0">];</span><span class="s4">const </span><span class="s1">r</span><span class="s0">=</span><span class="s1">t</span><span class="s0">[</span><span class="s3">1</span><span class="s0">];</span><span class="s4">const </span><span class="s1">i</span><span class="s0">=</span><span class="s1">N</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)&amp;&amp;</span><span class="s1">T</span><span class="s0">(</span><span class="s1">r</span><span class="s0">);</span><span class="s4">const </span><span class="s1">n</span><span class="s0">=</span><span class="s1">T</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)&amp;&amp;</span><span class="s1">N</span><span class="s0">(</span><span class="s1">r</span><span class="s0">);</span><span class="s4">return </span><span class="s1">i</span><span class="s0">||</span><span class="s1">n</span><span class="s0">}),</span><span class="s2">&quot;isArchitecturePairXY&quot;</span><span class="s0">);</span><span class="s4">var </span><span class="s1">L</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">return </span><span class="s1">t</span><span class="s0">!==</span><span class="s2">&quot;LL&quot;</span><span class="s0">&amp;&amp;</span><span class="s1">t</span><span class="s0">!==</span><span class="s2">&quot;RR&quot;</span><span class="s0">&amp;&amp;</span><span class="s1">t</span><span class="s0">!==</span><span class="s2">&quot;TT&quot;</span><span class="s0">&amp;&amp;</span><span class="s1">t</span><span class="s0">!==</span><span class="s2">&quot;BB&quot;</span><span class="s0">}),</span><span class="s2">&quot;isValidArchitectureDirectionPair&quot;</span><span class="s0">);</span><span class="s4">var </span><span class="s1">I</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">const </span><span class="s1">r</span><span class="s0">=</span><span class="s2">`</span><span class="s1">$</span><span class="s0">{</span><span class="s1">t</span><span class="s0">}</span><span class="s1">$</span><span class="s0">{</span><span class="s1">e</span><span class="s0">}</span><span class="s2">`</span><span class="s0">;</span><span class="s4">return </span><span class="s1">L</span><span class="s0">(</span><span class="s1">r</span><span class="s0">)?</span><span class="s1">r</span><span class="s0">:</span><span class="s4">void </span><span class="s3">0</span><span class="s0">}),</span><span class="s2">&quot;getArchitectureDirectionPair&quot;</span><span class="s0">);</span><span class="s4">var </span><span class="s1">_</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)((</span><span class="s4">function</span><span class="s0">([</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">],</span><span class="s1">r</span><span class="s0">){</span><span class="s4">const </span><span class="s1">i</span><span class="s0">=</span><span class="s1">r</span><span class="s0">[</span><span class="s3">0</span><span class="s0">];</span><span class="s4">const </span><span class="s1">n</span><span class="s0">=</span><span class="s1">r</span><span class="s0">[</span><span class="s3">1</span><span class="s0">];</span><span class="s4">if</span><span class="s0">(</span><span class="s1">N</span><span class="s0">(</span><span class="s1">i</span><span class="s0">)){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">T</span><span class="s0">(</span><span class="s1">n</span><span class="s0">)){</span><span class="s4">return</span><span class="s0">[</span><span class="s1">t</span><span class="s0">+(</span><span class="s1">i</span><span class="s0">===</span><span class="s2">&quot;L&quot;</span><span class="s0">?-</span><span class="s3">1</span><span class="s0">:</span><span class="s3">1</span><span class="s0">),</span><span class="s1">e</span><span class="s0">+(</span><span class="s1">n</span><span class="s0">===</span><span class="s2">&quot;T&quot;</span><span class="s0">?</span><span class="s3">1</span><span class="s0">:-</span><span class="s3">1</span><span class="s0">)]}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">return</span><span class="s0">[</span><span class="s1">t</span><span class="s0">+(</span><span class="s1">i</span><span class="s0">===</span><span class="s2">&quot;L&quot;</span><span class="s0">?-</span><span class="s3">1</span><span class="s0">:</span><span class="s3">1</span><span class="s0">),</span><span class="s1">e</span><span class="s0">]}}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">if</span><span class="s0">(</span><span class="s1">N</span><span class="s0">(</span><span class="s1">n</span><span class="s0">)){</span><span class="s4">return</span><span class="s0">[</span><span class="s1">t</span><span class="s0">+(</span><span class="s1">n</span><span class="s0">===</span><span class="s2">&quot;L&quot;</span><span class="s0">?</span><span class="s3">1</span><span class="s0">:-</span><span class="s3">1</span><span class="s0">),</span><span class="s1">e</span><span class="s0">+(</span><span class="s1">i</span><span class="s0">===</span><span class="s2">&quot;T&quot;</span><span class="s0">?</span><span class="s3">1</span><span class="s0">:-</span><span class="s3">1</span><span class="s0">)]}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">return</span><span class="s0">[</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">+(</span><span class="s1">i</span><span class="s0">===</span><span class="s2">&quot;T&quot;</span><span class="s0">?</span><span class="s3">1</span><span class="s0">:-</span><span class="s3">1</span><span class="s0">)]}}}),</span><span class="s2">&quot;shiftPositionByArchitectureDirectionPair&quot;</span><span class="s0">);</span><span class="s4">var </span><span class="s1">C</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">===</span><span class="s2">&quot;LT&quot;</span><span class="s0">||</span><span class="s1">t</span><span class="s0">===</span><span class="s2">&quot;TL&quot;</span><span class="s0">){</span><span class="s4">return</span><span class="s0">[</span><span class="s3">1</span><span class="s0">,</span><span class="s3">1</span><span class="s0">]}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">===</span><span class="s2">&quot;BL&quot;</span><span class="s0">||</span><span class="s1">t</span><span class="s0">===</span><span class="s2">&quot;LB&quot;</span><span class="s0">){</span><span class="s4">return</span><span class="s0">[</span><span class="s3">1</span><span class="s0">,-</span><span class="s3">1</span><span class="s0">]}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">===</span><span class="s2">&quot;BR&quot;</span><span class="s0">||</span><span class="s1">t</span><span class="s0">===</span><span class="s2">&quot;RB&quot;</span><span class="s0">){</span><span class="s4">return</span><span class="s0">[-</span><span class="s3">1</span><span class="s0">,-</span><span class="s3">1</span><span class="s0">]}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">return</span><span class="s0">[-</span><span class="s3">1</span><span class="s0">,</span><span class="s3">1</span><span class="s0">]}}),</span><span class="s2">&quot;getArchitectureDirectionXYFactors&quot;</span><span class="s0">);</span><span class="s4">var </span><span class="s1">M</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">A</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">)){</span><span class="s4">return</span><span class="s2">&quot;bend&quot;</span><span class="s0">}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">N</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)){</span><span class="s4">return</span><span class="s2">&quot;horizontal&quot;</span><span class="s0">}</span><span class="s4">return</span><span class="s2">&quot;vertical&quot;</span><span class="s0">}),</span><span class="s2">&quot;getArchitectureDirectionAlignment&quot;</span><span class="s0">);</span><span class="s4">var </span><span class="s1">x</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">const </span><span class="s1">e</span><span class="s0">=</span><span class="s1">t</span><span class="s0">;</span><span class="s4">return </span><span class="s1">e</span><span class="s0">.</span><span class="s1">type</span><span class="s0">===</span><span class="s2">&quot;service&quot;</span><span class="s0">}),</span><span class="s2">&quot;isArchitectureService&quot;</span><span class="s0">);</span><span class="s4">var </span><span class="s1">O</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">const </span><span class="s1">e</span><span class="s0">=</span><span class="s1">t</span><span class="s0">;</span><span class="s4">return </span><span class="s1">e</span><span class="s0">.</span><span class="s1">type</span><span class="s0">===</span><span class="s2">&quot;junction&quot;</span><span class="s0">}),</span><span class="s2">&quot;isArchitectureJunction&quot;</span><span class="s0">);</span><span class="s4">var </span><span class="s1">D</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)((</span><span class="s1">t</span><span class="s0">=&gt;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">data</span><span class="s0">()),</span><span class="s2">&quot;edgeData&quot;</span><span class="s0">);</span><span class="s4">var </span><span class="s1">R</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)((</span><span class="s1">t</span><span class="s0">=&gt;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">data</span><span class="s0">()),</span><span class="s2">&quot;nodeData&quot;</span><span class="s0">);</span><span class="s4">var </span><span class="s1">b</span><span class="s0">=</span><span class="s1">l</span><span class="s0">.</span><span class="s1">UI</span><span class="s0">.</span><span class="s1">architecture</span><span class="s0">;</span><span class="s4">var </span><span class="s1">G</span><span class="s0">=</span><span class="s4">new </span><span class="s1">a</span><span class="s0">.</span><span class="s1">m</span><span class="s0">((()=&gt;({</span><span class="s1">nodes</span><span class="s0">:{},</span><span class="s1">groups</span><span class="s0">:{},</span><span class="s1">edges</span><span class="s0">:[],</span><span class="s1">registeredIds</span><span class="s0">:{},</span><span class="s1">config</span><span class="s0">:</span><span class="s1">b</span><span class="s0">,</span><span class="s1">dataStructures</span><span class="s0">:</span><span class="s4">void </span><span class="s3">0</span><span class="s0">,</span><span class="s1">elements</span><span class="s0">:{}})));</span><span class="s4">var </span><span class="s1">F</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)((()=&gt;{</span><span class="s1">G</span><span class="s0">.</span><span class="s1">reset</span><span class="s0">();(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">IU</span><span class="s0">)()}),</span><span class="s2">&quot;clear&quot;</span><span class="s0">);</span><span class="s4">var </span><span class="s1">S</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)((</span><span class="s4">function</span><span class="s0">({</span><span class="s1">id</span><span class="s0">:</span><span class="s1">t</span><span class="s0">,</span><span class="s1">icon</span><span class="s0">:</span><span class="s1">e</span><span class="s0">,</span><span class="s4">in</span><span class="s0">:</span><span class="s1">r</span><span class="s0">,</span><span class="s1">title</span><span class="s0">:</span><span class="s1">i</span><span class="s0">,</span><span class="s1">iconText</span><span class="s0">:</span><span class="s1">n</span><span class="s0">}){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">G</span><span class="s0">.</span><span class="s1">records</span><span class="s0">.</span><span class="s1">registeredIds</span><span class="s0">[</span><span class="s1">t</span><span class="s0">]!==</span><span class="s4">void </span><span class="s3">0</span><span class="s0">){</span><span class="s4">throw new </span><span class="s1">Error</span><span class="s0">(</span><span class="s2">`The service id [</span><span class="s1">$</span><span class="s0">{</span><span class="s1">t</span><span class="s0">}</span><span class="s2">] is already in use by another </span><span class="s1">$</span><span class="s0">{</span><span class="s1">G</span><span class="s0">.</span><span class="s1">records</span><span class="s0">.</span><span class="s1">registeredIds</span><span class="s0">[</span><span class="s1">t</span><span class="s0">]}</span><span class="s2">`</span><span class="s0">)}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">!==</span><span class="s4">void </span><span class="s3">0</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">===</span><span class="s1">r</span><span class="s0">){</span><span class="s4">throw new </span><span class="s1">Error</span><span class="s0">(</span><span class="s2">`The service [</span><span class="s1">$</span><span class="s0">{</span><span class="s1">t</span><span class="s0">}</span><span class="s2">] cannot be placed within itself`</span><span class="s0">)}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">G</span><span class="s0">.</span><span class="s1">records</span><span class="s0">.</span><span class="s1">registeredIds</span><span class="s0">[</span><span class="s1">r</span><span class="s0">]===</span><span class="s4">void </span><span class="s3">0</span><span class="s0">){</span><span class="s4">throw new </span><span class="s1">Error</span><span class="s0">(</span><span class="s2">`The service [</span><span class="s1">$</span><span class="s0">{</span><span class="s1">t</span><span class="s0">}</span><span class="s2">]'s parent does not exist. Please make sure the parent is created before this service`</span><span class="s0">)}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">G</span><span class="s0">.</span><span class="s1">records</span><span class="s0">.</span><span class="s1">registeredIds</span><span class="s0">[</span><span class="s1">r</span><span class="s0">]===</span><span class="s2">&quot;node&quot;</span><span class="s0">){</span><span class="s4">throw new </span><span class="s1">Error</span><span class="s0">(</span><span class="s2">`The service [</span><span class="s1">$</span><span class="s0">{</span><span class="s1">t</span><span class="s0">}</span><span class="s2">]'s parent is not a group`</span><span class="s0">)}}</span><span class="s1">G</span><span class="s0">.</span><span class="s1">records</span><span class="s0">.</span><span class="s1">registeredIds</span><span class="s0">[</span><span class="s1">t</span><span class="s0">]=</span><span class="s2">&quot;node&quot;</span><span class="s0">;</span><span class="s1">G</span><span class="s0">.</span><span class="s1">records</span><span class="s0">.</span><span class="s1">nodes</span><span class="s0">[</span><span class="s1">t</span><span class="s0">]={</span><span class="s1">id</span><span class="s0">:</span><span class="s1">t</span><span class="s0">,</span><span class="s1">type</span><span class="s0">:</span><span class="s2">&quot;service&quot;</span><span class="s0">,</span><span class="s1">icon</span><span class="s0">:</span><span class="s1">e</span><span class="s0">,</span><span class="s1">iconText</span><span class="s0">:</span><span class="s1">n</span><span class="s0">,</span><span class="s1">title</span><span class="s0">:</span><span class="s1">i</span><span class="s0">,</span><span class="s1">edges</span><span class="s0">:[],</span><span class="s4">in</span><span class="s0">:</span><span class="s1">r</span><span class="s0">}}),</span><span class="s2">&quot;addService&quot;</span><span class="s0">);</span><span class="s4">var </span><span class="s1">P</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)((()=&gt;</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">values</span><span class="s0">(</span><span class="s1">G</span><span class="s0">.</span><span class="s1">records</span><span class="s0">.</span><span class="s1">nodes</span><span class="s0">).</span><span class="s1">filter</span><span class="s0">(</span><span class="s1">x</span><span class="s0">)),</span><span class="s2">&quot;getServices&quot;</span><span class="s0">);</span><span class="s4">var </span><span class="s1">U</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)((</span><span class="s4">function</span><span class="s0">({</span><span class="s1">id</span><span class="s0">:</span><span class="s1">t</span><span class="s0">,</span><span class="s4">in</span><span class="s0">:</span><span class="s1">e</span><span class="s0">}){</span><span class="s1">G</span><span class="s0">.</span><span class="s1">records</span><span class="s0">.</span><span class="s1">registeredIds</span><span class="s0">[</span><span class="s1">t</span><span class="s0">]=</span><span class="s2">&quot;node&quot;</span><span class="s0">;</span><span class="s1">G</span><span class="s0">.</span><span class="s1">records</span><span class="s0">.</span><span class="s1">nodes</span><span class="s0">[</span><span class="s1">t</span><span class="s0">]={</span><span class="s1">id</span><span class="s0">:</span><span class="s1">t</span><span class="s0">,</span><span class="s1">type</span><span class="s0">:</span><span class="s2">&quot;junction&quot;</span><span class="s0">,</span><span class="s1">edges</span><span class="s0">:[],</span><span class="s4">in</span><span class="s0">:</span><span class="s1">e</span><span class="s0">}}),</span><span class="s2">&quot;addJunction&quot;</span><span class="s0">);</span><span class="s4">var </span><span class="s1">k</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)((()=&gt;</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">values</span><span class="s0">(</span><span class="s1">G</span><span class="s0">.</span><span class="s1">records</span><span class="s0">.</span><span class="s1">nodes</span><span class="s0">).</span><span class="s1">filter</span><span class="s0">(</span><span class="s1">O</span><span class="s0">)),</span><span class="s2">&quot;getJunctions&quot;</span><span class="s0">);</span><span class="s4">var </span><span class="s1">Y</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)((()=&gt;</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">values</span><span class="s0">(</span><span class="s1">G</span><span class="s0">.</span><span class="s1">records</span><span class="s0">.</span><span class="s1">nodes</span><span class="s0">)),</span><span class="s2">&quot;getNodes&quot;</span><span class="s0">);</span><span class="s4">var </span><span class="s1">H</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)((</span><span class="s1">t</span><span class="s0">=&gt;</span><span class="s1">G</span><span class="s0">.</span><span class="s1">records</span><span class="s0">.</span><span class="s1">nodes</span><span class="s0">[</span><span class="s1">t</span><span class="s0">]),</span><span class="s2">&quot;getNode&quot;</span><span class="s0">);</span><span class="s4">var </span><span class="s1">X</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)((</span><span class="s4">function</span><span class="s0">({</span><span class="s1">id</span><span class="s0">:</span><span class="s1">t</span><span class="s0">,</span><span class="s1">icon</span><span class="s0">:</span><span class="s1">e</span><span class="s0">,</span><span class="s4">in</span><span class="s0">:</span><span class="s1">r</span><span class="s0">,</span><span class="s1">title</span><span class="s0">:</span><span class="s1">i</span><span class="s0">}){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">G</span><span class="s0">.</span><span class="s1">records</span><span class="s0">.</span><span class="s1">registeredIds</span><span class="s0">[</span><span class="s1">t</span><span class="s0">]!==</span><span class="s4">void </span><span class="s3">0</span><span class="s0">){</span><span class="s4">throw new </span><span class="s1">Error</span><span class="s0">(</span><span class="s2">`The group id [</span><span class="s1">$</span><span class="s0">{</span><span class="s1">t</span><span class="s0">}</span><span class="s2">] is already in use by another </span><span class="s1">$</span><span class="s0">{</span><span class="s1">G</span><span class="s0">.</span><span class="s1">records</span><span class="s0">.</span><span class="s1">registeredIds</span><span class="s0">[</span><span class="s1">t</span><span class="s0">]}</span><span class="s2">`</span><span class="s0">)}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">!==</span><span class="s4">void </span><span class="s3">0</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">===</span><span class="s1">r</span><span class="s0">){</span><span class="s4">throw new </span><span class="s1">Error</span><span class="s0">(</span><span class="s2">`The group [</span><span class="s1">$</span><span class="s0">{</span><span class="s1">t</span><span class="s0">}</span><span class="s2">] cannot be placed within itself`</span><span class="s0">)}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">G</span><span class="s0">.</span><span class="s1">records</span><span class="s0">.</span><span class="s1">registeredIds</span><span class="s0">[</span><span class="s1">r</span><span class="s0">]===</span><span class="s4">void </span><span class="s3">0</span><span class="s0">){</span><span class="s4">throw new </span><span class="s1">Error</span><span class="s0">(</span><span class="s2">`The group [</span><span class="s1">$</span><span class="s0">{</span><span class="s1">t</span><span class="s0">}</span><span class="s2">]'s parent does not exist. Please make sure the parent is created before this group`</span><span class="s0">)}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">G</span><span class="s0">.</span><span class="s1">records</span><span class="s0">.</span><span class="s1">registeredIds</span><span class="s0">[</span><span class="s1">r</span><span class="s0">]===</span><span class="s2">&quot;node&quot;</span><span class="s0">){</span><span class="s4">throw new </span><span class="s1">Error</span><span class="s0">(</span><span class="s2">`The group [</span><span class="s1">$</span><span class="s0">{</span><span class="s1">t</span><span class="s0">}</span><span class="s2">]'s parent is not a group`</span><span class="s0">)}}</span><span class="s1">G</span><span class="s0">.</span><span class="s1">records</span><span class="s0">.</span><span class="s1">registeredIds</span><span class="s0">[</span><span class="s1">t</span><span class="s0">]=</span><span class="s2">&quot;group&quot;</span><span class="s0">;</span><span class="s1">G</span><span class="s0">.</span><span class="s1">records</span><span class="s0">.</span><span class="s1">groups</span><span class="s0">[</span><span class="s1">t</span><span class="s0">]={</span><span class="s1">id</span><span class="s0">:</span><span class="s1">t</span><span class="s0">,</span><span class="s1">icon</span><span class="s0">:</span><span class="s1">e</span><span class="s0">,</span><span class="s1">title</span><span class="s0">:</span><span class="s1">i</span><span class="s0">,</span><span class="s4">in</span><span class="s0">:</span><span class="s1">r</span><span class="s0">}}),</span><span class="s2">&quot;addGroup&quot;</span><span class="s0">);</span><span class="s4">var </span><span class="s1">z</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)((()=&gt;</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">values</span><span class="s0">(</span><span class="s1">G</span><span class="s0">.</span><span class="s1">records</span><span class="s0">.</span><span class="s1">groups</span><span class="s0">)),</span><span class="s2">&quot;getGroups&quot;</span><span class="s0">);</span><span class="s4">var </span><span class="s1">V</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)((</span><span class="s4">function</span><span class="s0">({</span><span class="s1">lhsId</span><span class="s0">:</span><span class="s1">t</span><span class="s0">,</span><span class="s1">rhsId</span><span class="s0">:</span><span class="s1">e</span><span class="s0">,</span><span class="s1">lhsDir</span><span class="s0">:</span><span class="s1">r</span><span class="s0">,</span><span class="s1">rhsDir</span><span class="s0">:</span><span class="s1">i</span><span class="s0">,</span><span class="s1">lhsInto</span><span class="s0">:</span><span class="s1">n</span><span class="s0">,</span><span class="s1">rhsInto</span><span class="s0">:</span><span class="s1">o</span><span class="s0">,</span><span class="s1">lhsGroup</span><span class="s0">:</span><span class="s1">a</span><span class="s0">,</span><span class="s1">rhsGroup</span><span class="s0">:</span><span class="s1">s</span><span class="s0">,</span><span class="s1">title</span><span class="s0">:</span><span class="s1">h</span><span class="s0">}){</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">E</span><span class="s0">(</span><span class="s1">r</span><span class="s0">)){</span><span class="s4">throw new </span><span class="s1">Error</span><span class="s0">(</span><span class="s2">`Invalid direction given for left hand side of edge </span><span class="s1">$</span><span class="s0">{</span><span class="s1">t</span><span class="s0">}</span><span class="s2">--</span><span class="s1">$</span><span class="s0">{</span><span class="s1">e</span><span class="s0">}</span><span class="s2">. Expected (L,R,T,B) got </span><span class="s1">$</span><span class="s0">{</span><span class="s1">r</span><span class="s0">}</span><span class="s2">`</span><span class="s0">)}</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">E</span><span class="s0">(</span><span class="s1">i</span><span class="s0">)){</span><span class="s4">throw new </span><span class="s1">Error</span><span class="s0">(</span><span class="s2">`Invalid direction given for right hand side of edge </span><span class="s1">$</span><span class="s0">{</span><span class="s1">t</span><span class="s0">}</span><span class="s2">--</span><span class="s1">$</span><span class="s0">{</span><span class="s1">e</span><span class="s0">}</span><span class="s2">. Expected (L,R,T,B) got </span><span class="s1">$</span><span class="s0">{</span><span class="s1">i</span><span class="s0">}</span><span class="s2">`</span><span class="s0">)}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">G</span><span class="s0">.</span><span class="s1">records</span><span class="s0">.</span><span class="s1">nodes</span><span class="s0">[</span><span class="s1">t</span><span class="s0">]===</span><span class="s4">void </span><span class="s3">0</span><span class="s0">&amp;&amp;</span><span class="s1">G</span><span class="s0">.</span><span class="s1">records</span><span class="s0">.</span><span class="s1">groups</span><span class="s0">[</span><span class="s1">t</span><span class="s0">]===</span><span class="s4">void </span><span class="s3">0</span><span class="s0">){</span><span class="s4">throw new </span><span class="s1">Error</span><span class="s0">(</span><span class="s2">`The left-hand id [</span><span class="s1">$</span><span class="s0">{</span><span class="s1">t</span><span class="s0">}</span><span class="s2">] does not yet exist. Please create the service/group before declaring an edge to it.`</span><span class="s0">)}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">G</span><span class="s0">.</span><span class="s1">records</span><span class="s0">.</span><span class="s1">nodes</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]===</span><span class="s4">void </span><span class="s3">0</span><span class="s0">&amp;&amp;</span><span class="s1">G</span><span class="s0">.</span><span class="s1">records</span><span class="s0">.</span><span class="s1">groups</span><span class="s0">[</span><span class="s1">t</span><span class="s0">]===</span><span class="s4">void </span><span class="s3">0</span><span class="s0">){</span><span class="s4">throw new </span><span class="s1">Error</span><span class="s0">(</span><span class="s2">`The right-hand id [</span><span class="s1">$</span><span class="s0">{</span><span class="s1">e</span><span class="s0">}</span><span class="s2">] does not yet exist. Please create the service/group before declaring an edge to it.`</span><span class="s0">)}</span><span class="s4">const </span><span class="s1">l</span><span class="s0">=</span><span class="s1">G</span><span class="s0">.</span><span class="s1">records</span><span class="s0">.</span><span class="s1">nodes</span><span class="s0">[</span><span class="s1">t</span><span class="s0">].</span><span class="s1">in</span><span class="s0">;</span><span class="s4">const </span><span class="s1">c</span><span class="s0">=</span><span class="s1">G</span><span class="s0">.</span><span class="s1">records</span><span class="s0">.</span><span class="s1">nodes</span><span class="s0">[</span><span class="s1">e</span><span class="s0">].</span><span class="s1">in</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">a</span><span class="s0">&amp;&amp;</span><span class="s1">l</span><span class="s0">&amp;&amp;</span><span class="s1">c</span><span class="s0">&amp;&amp;</span><span class="s1">l</span><span class="s0">==</span><span class="s1">c</span><span class="s0">){</span><span class="s4">throw new </span><span class="s1">Error</span><span class="s0">(</span><span class="s2">`The left-hand id [</span><span class="s1">$</span><span class="s0">{</span><span class="s1">t</span><span class="s0">}</span><span class="s2">] is modified to traverse the group boundary, but the edge does not pass through two groups.`</span><span class="s0">)}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">s</span><span class="s0">&amp;&amp;</span><span class="s1">l</span><span class="s0">&amp;&amp;</span><span class="s1">c</span><span class="s0">&amp;&amp;</span><span class="s1">l</span><span class="s0">==</span><span class="s1">c</span><span class="s0">){</span><span class="s4">throw new </span><span class="s1">Error</span><span class="s0">(</span><span class="s2">`The right-hand id [</span><span class="s1">$</span><span class="s0">{</span><span class="s1">e</span><span class="s0">}</span><span class="s2">] is modified to traverse the group boundary, but the edge does not pass through two groups.`</span><span class="s0">)}</span><span class="s4">const </span><span class="s1">d</span><span class="s0">={</span><span class="s1">lhsId</span><span class="s0">:</span><span class="s1">t</span><span class="s0">,</span><span class="s1">lhsDir</span><span class="s0">:</span><span class="s1">r</span><span class="s0">,</span><span class="s1">lhsInto</span><span class="s0">:</span><span class="s1">n</span><span class="s0">,</span><span class="s1">lhsGroup</span><span class="s0">:</span><span class="s1">a</span><span class="s0">,</span><span class="s1">rhsId</span><span class="s0">:</span><span class="s1">e</span><span class="s0">,</span><span class="s1">rhsDir</span><span class="s0">:</span><span class="s1">i</span><span class="s0">,</span><span class="s1">rhsInto</span><span class="s0">:</span><span class="s1">o</span><span class="s0">,</span><span class="s1">rhsGroup</span><span class="s0">:</span><span class="s1">s</span><span class="s0">,</span><span class="s1">title</span><span class="s0">:</span><span class="s1">h</span><span class="s0">};</span><span class="s1">G</span><span class="s0">.</span><span class="s1">records</span><span class="s0">.</span><span class="s1">edges</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">d</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">G</span><span class="s0">.</span><span class="s1">records</span><span class="s0">.</span><span class="s1">nodes</span><span class="s0">[</span><span class="s1">t</span><span class="s0">]&amp;&amp;</span><span class="s1">G</span><span class="s0">.</span><span class="s1">records</span><span class="s0">.</span><span class="s1">nodes</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]){</span><span class="s1">G</span><span class="s0">.</span><span class="s1">records</span><span class="s0">.</span><span class="s1">nodes</span><span class="s0">[</span><span class="s1">t</span><span class="s0">].</span><span class="s1">edges</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">G</span><span class="s0">.</span><span class="s1">records</span><span class="s0">.</span><span class="s1">edges</span><span class="s0">[</span><span class="s1">G</span><span class="s0">.</span><span class="s1">records</span><span class="s0">.</span><span class="s1">edges</span><span class="s0">.</span><span class="s1">length</span><span class="s0">-</span><span class="s3">1</span><span class="s0">]);</span><span class="s1">G</span><span class="s0">.</span><span class="s1">records</span><span class="s0">.</span><span class="s1">nodes</span><span class="s0">[</span><span class="s1">e</span><span class="s0">].</span><span class="s1">edges</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">G</span><span class="s0">.</span><span class="s1">records</span><span class="s0">.</span><span class="s1">edges</span><span class="s0">[</span><span class="s1">G</span><span class="s0">.</span><span class="s1">records</span><span class="s0">.</span><span class="s1">edges</span><span class="s0">.</span><span class="s1">length</span><span class="s0">-</span><span class="s3">1</span><span class="s0">])}}),</span><span class="s2">&quot;addEdge&quot;</span><span class="s0">);</span><span class="s4">var </span><span class="s1">B</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)((()=&gt;</span><span class="s1">G</span><span class="s0">.</span><span class="s1">records</span><span class="s0">.</span><span class="s1">edges</span><span class="s0">),</span><span class="s2">&quot;getEdges&quot;</span><span class="s0">);</span><span class="s4">var </span><span class="s1">W</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)((()=&gt;{</span><span class="s4">if</span><span class="s0">(</span><span class="s1">G</span><span class="s0">.</span><span class="s1">records</span><span class="s0">.</span><span class="s1">dataStructures</span><span class="s0">===</span><span class="s4">void </span><span class="s3">0</span><span class="s0">){</span><span class="s4">const </span><span class="s1">t</span><span class="s0">={};</span><span class="s4">const </span><span class="s1">e</span><span class="s0">=</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">entries</span><span class="s0">(</span><span class="s1">G</span><span class="s0">.</span><span class="s1">records</span><span class="s0">.</span><span class="s1">nodes</span><span class="s0">).</span><span class="s1">reduce</span><span class="s0">(((</span><span class="s1">e</span><span class="s0">,[</span><span class="s1">r</span><span class="s0">,</span><span class="s1">i</span><span class="s0">])=&gt;{</span><span class="s1">e</span><span class="s0">[</span><span class="s1">r</span><span class="s0">]=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">edges</span><span class="s0">.</span><span class="s1">reduce</span><span class="s0">(((</span><span class="s1">e</span><span class="s0">,</span><span class="s1">i</span><span class="s0">)=&gt;{</span><span class="s4">const </span><span class="s1">n</span><span class="s0">=</span><span class="s1">H</span><span class="s0">(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">lhsId</span><span class="s0">)?.</span><span class="s1">in</span><span class="s0">;</span><span class="s4">const </span><span class="s1">o</span><span class="s0">=</span><span class="s1">H</span><span class="s0">(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">rhsId</span><span class="s0">)?.</span><span class="s1">in</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">&amp;&amp;</span><span class="s1">o</span><span class="s0">&amp;&amp;</span><span class="s1">n</span><span class="s0">!==</span><span class="s1">o</span><span class="s0">){</span><span class="s4">const </span><span class="s1">e</span><span class="s0">=</span><span class="s1">M</span><span class="s0">(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">lhsDir</span><span class="s0">,</span><span class="s1">i</span><span class="s0">.</span><span class="s1">rhsDir</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">!==</span><span class="s2">&quot;bend&quot;</span><span class="s0">){</span><span class="s1">t</span><span class="s0">[</span><span class="s1">n</span><span class="s0">]??={};</span><span class="s1">t</span><span class="s0">[</span><span class="s1">n</span><span class="s0">][</span><span class="s1">o</span><span class="s0">]=</span><span class="s1">e</span><span class="s0">;</span><span class="s1">t</span><span class="s0">[</span><span class="s1">o</span><span class="s0">]??={};</span><span class="s1">t</span><span class="s0">[</span><span class="s1">o</span><span class="s0">][</span><span class="s1">n</span><span class="s0">]=</span><span class="s1">e</span><span class="s0">}}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">lhsId</span><span class="s0">===</span><span class="s1">r</span><span class="s0">){</span><span class="s4">const </span><span class="s1">t</span><span class="s0">=</span><span class="s1">I</span><span class="s0">(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">lhsDir</span><span class="s0">,</span><span class="s1">i</span><span class="s0">.</span><span class="s1">rhsDir</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s1">e</span><span class="s0">[</span><span class="s1">t</span><span class="s0">]=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">rhsId</span><span class="s0">}}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">const </span><span class="s1">t</span><span class="s0">=</span><span class="s1">I</span><span class="s0">(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">rhsDir</span><span class="s0">,</span><span class="s1">i</span><span class="s0">.</span><span class="s1">lhsDir</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s1">e</span><span class="s0">[</span><span class="s1">t</span><span class="s0">]=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">lhsId</span><span class="s0">}}</span><span class="s4">return </span><span class="s1">e</span><span class="s0">}),{});</span><span class="s4">return </span><span class="s1">e</span><span class="s0">}),{});</span><span class="s4">const </span><span class="s1">r</span><span class="s0">=</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">keys</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)[</span><span class="s3">0</span><span class="s0">];</span><span class="s4">const </span><span class="s1">i</span><span class="s0">={[</span><span class="s1">r</span><span class="s0">]:</span><span class="s3">1</span><span class="s0">};</span><span class="s4">const </span><span class="s1">n</span><span class="s0">=</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">keys</span><span class="s0">(</span><span class="s1">e</span><span class="s0">).</span><span class="s1">reduce</span><span class="s0">(((</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">)=&gt;</span><span class="s1">e</span><span class="s0">===</span><span class="s1">r</span><span class="s0">?</span><span class="s1">t</span><span class="s0">:{</span><span class="s1">...t</span><span class="s0">,[</span><span class="s1">e</span><span class="s0">]:</span><span class="s3">1</span><span class="s0">}),{});</span><span class="s4">const </span><span class="s1">o</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)((</span><span class="s1">t</span><span class="s0">=&gt;{</span><span class="s4">const </span><span class="s1">r</span><span class="s0">={[</span><span class="s1">t</span><span class="s0">]:[</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">]};</span><span class="s4">const </span><span class="s1">o</span><span class="s0">=[</span><span class="s1">t</span><span class="s0">];</span><span class="s4">while</span><span class="s0">(</span><span class="s1">o</span><span class="s0">.</span><span class="s1">length</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">){</span><span class="s4">const </span><span class="s1">t</span><span class="s0">=</span><span class="s1">o</span><span class="s0">.</span><span class="s1">shift</span><span class="s0">();</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s1">i</span><span class="s0">[</span><span class="s1">t</span><span class="s0">]=</span><span class="s3">1</span><span class="s0">;</span><span class="s4">delete </span><span class="s1">n</span><span class="s0">[</span><span class="s1">t</span><span class="s0">];</span><span class="s4">const </span><span class="s1">a</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">t</span><span class="s0">];</span><span class="s4">const</span><span class="s0">[</span><span class="s1">s</span><span class="s0">,</span><span class="s1">h</span><span class="s0">]=</span><span class="s1">r</span><span class="s0">[</span><span class="s1">t</span><span class="s0">];</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">entries</span><span class="s0">(</span><span class="s1">a</span><span class="s0">).</span><span class="s1">forEach</span><span class="s0">((([</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">])=&gt;{</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">i</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]){</span><span class="s1">r</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]=</span><span class="s1">_</span><span class="s0">([</span><span class="s1">s</span><span class="s0">,</span><span class="s1">h</span><span class="s0">],</span><span class="s1">t</span><span class="s0">);</span><span class="s1">o</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)}}))}}</span><span class="s4">return </span><span class="s1">r</span><span class="s0">}),</span><span class="s2">&quot;BFS&quot;</span><span class="s0">);</span><span class="s4">const </span><span class="s1">a</span><span class="s0">=[</span><span class="s1">o</span><span class="s0">(</span><span class="s1">r</span><span class="s0">)];</span><span class="s4">while</span><span class="s0">(</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">keys</span><span class="s0">(</span><span class="s1">n</span><span class="s0">).</span><span class="s1">length</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">){</span><span class="s1">a</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">o</span><span class="s0">(</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">keys</span><span class="s0">(</span><span class="s1">n</span><span class="s0">)[</span><span class="s3">0</span><span class="s0">]))}</span><span class="s1">G</span><span class="s0">.</span><span class="s1">records</span><span class="s0">.</span><span class="s1">dataStructures</span><span class="s0">={</span><span class="s1">adjList</span><span class="s0">:</span><span class="s1">e</span><span class="s0">,</span><span class="s1">spatialMaps</span><span class="s0">:</span><span class="s1">a</span><span class="s0">,</span><span class="s1">groupAlignments</span><span class="s0">:</span><span class="s1">t</span><span class="s0">}}</span><span class="s4">return </span><span class="s1">G</span><span class="s0">.</span><span class="s1">records</span><span class="s0">.</span><span class="s1">dataStructures</span><span class="s0">}),</span><span class="s2">&quot;getDataStructures&quot;</span><span class="s0">);</span><span class="s4">var </span><span class="s1">j</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)(((</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">)=&gt;{</span><span class="s1">G</span><span class="s0">.</span><span class="s1">records</span><span class="s0">.</span><span class="s1">elements</span><span class="s0">[</span><span class="s1">t</span><span class="s0">]=</span><span class="s1">e</span><span class="s0">}),</span><span class="s2">&quot;setElementForId&quot;</span><span class="s0">);</span><span class="s4">var </span><span class="s1">q</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)((</span><span class="s1">t</span><span class="s0">=&gt;</span><span class="s1">G</span><span class="s0">.</span><span class="s1">records</span><span class="s0">.</span><span class="s1">elements</span><span class="s0">[</span><span class="s1">t</span><span class="s0">]),</span><span class="s2">&quot;getElementById&quot;</span><span class="s0">);</span><span class="s4">var </span><span class="s1">$</span><span class="s0">={</span><span class="s1">clear</span><span class="s0">:</span><span class="s1">F</span><span class="s0">,</span><span class="s1">setDiagramTitle</span><span class="s0">:</span><span class="s1">l</span><span class="s0">.</span><span class="s1">ke</span><span class="s0">,</span><span class="s1">getDiagramTitle</span><span class="s0">:</span><span class="s1">l</span><span class="s0">.</span><span class="s1">ab</span><span class="s0">,</span><span class="s1">setAccTitle</span><span class="s0">:</span><span class="s1">l</span><span class="s0">.</span><span class="s1">SV</span><span class="s0">,</span><span class="s1">getAccTitle</span><span class="s0">:</span><span class="s1">l</span><span class="s0">.</span><span class="s1">iN</span><span class="s0">,</span><span class="s1">setAccDescription</span><span class="s0">:</span><span class="s1">l</span><span class="s0">.</span><span class="s1">EI</span><span class="s0">,</span><span class="s1">getAccDescription</span><span class="s0">:</span><span class="s1">l</span><span class="s0">.</span><span class="s1">m7</span><span class="s0">,</span><span class="s1">addService</span><span class="s0">:</span><span class="s1">S</span><span class="s0">,</span><span class="s1">getServices</span><span class="s0">:</span><span class="s1">P</span><span class="s0">,</span><span class="s1">addJunction</span><span class="s0">:</span><span class="s1">U</span><span class="s0">,</span><span class="s1">getJunctions</span><span class="s0">:</span><span class="s1">k</span><span class="s0">,</span><span class="s1">getNodes</span><span class="s0">:</span><span class="s1">Y</span><span class="s0">,</span><span class="s1">getNode</span><span class="s0">:</span><span class="s1">H</span><span class="s0">,</span><span class="s1">addGroup</span><span class="s0">:</span><span class="s1">X</span><span class="s0">,</span><span class="s1">getGroups</span><span class="s0">:</span><span class="s1">z</span><span class="s0">,</span><span class="s1">addEdge</span><span class="s0">:</span><span class="s1">V</span><span class="s0">,</span><span class="s1">getEdges</span><span class="s0">:</span><span class="s1">B</span><span class="s0">,</span><span class="s1">setElementForId</span><span class="s0">:</span><span class="s1">j</span><span class="s0">,</span><span class="s1">getElementById</span><span class="s0">:</span><span class="s1">q</span><span class="s0">,</span><span class="s1">getDataStructures</span><span class="s0">:</span><span class="s1">W</span><span class="s0">};</span><span class="s4">function </span><span class="s1">K</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">const </span><span class="s1">e</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">D7</span><span class="s0">)().</span><span class="s1">architecture</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">?.[</span><span class="s1">t</span><span class="s0">]){</span><span class="s4">return </span><span class="s1">e</span><span class="s0">[</span><span class="s1">t</span><span class="s0">]}</span><span class="s4">return </span><span class="s1">b</span><span class="s0">[</span><span class="s1">t</span><span class="s0">]}(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)(</span><span class="s1">K</span><span class="s0">,</span><span class="s2">&quot;getConfigField&quot;</span><span class="s0">);</span><span class="s4">var </span><span class="s1">Z</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)(((</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">)=&gt;{(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">o</span><span class="s0">.</span><span class="s1">S</span><span class="s0">)(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">);</span><span class="s1">t</span><span class="s0">.</span><span class="s1">groups</span><span class="s0">.</span><span class="s1">map</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">addGroup</span><span class="s0">);</span><span class="s1">t</span><span class="s0">.</span><span class="s1">services</span><span class="s0">.</span><span class="s1">map</span><span class="s0">((</span><span class="s1">t</span><span class="s0">=&gt;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">addService</span><span class="s0">({</span><span class="s1">...t</span><span class="s0">,</span><span class="s1">type</span><span class="s0">:</span><span class="s2">&quot;service&quot;</span><span class="s0">})));</span><span class="s1">t</span><span class="s0">.</span><span class="s1">junctions</span><span class="s0">.</span><span class="s1">map</span><span class="s0">((</span><span class="s1">t</span><span class="s0">=&gt;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">addJunction</span><span class="s0">({</span><span class="s1">...t</span><span class="s0">,</span><span class="s1">type</span><span class="s0">:</span><span class="s2">&quot;junction&quot;</span><span class="s0">})));</span><span class="s1">t</span><span class="s0">.</span><span class="s1">edges</span><span class="s0">.</span><span class="s1">map</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">addEdge</span><span class="s0">)}),</span><span class="s2">&quot;populateDb&quot;</span><span class="s0">);</span><span class="s4">var </span><span class="s1">Q</span><span class="s0">={</span><span class="s1">parse</span><span class="s0">:(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)((</span><span class="s1">async t</span><span class="s0">=&gt;{</span><span class="s4">const </span><span class="s1">e</span><span class="s0">=</span><span class="s4">await</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">c</span><span class="s0">.</span><span class="s1">qg</span><span class="s0">)(</span><span class="s2">&quot;architecture&quot;</span><span class="s0">,</span><span class="s1">t</span><span class="s0">);</span><span class="s1">l</span><span class="s0">.</span><span class="s1">Rm</span><span class="s0">.</span><span class="s1">debug</span><span class="s0">(</span><span class="s1">e</span><span class="s0">);</span><span class="s1">Z</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">$</span><span class="s0">)}),</span><span class="s2">&quot;parse&quot;</span><span class="s0">)};</span><span class="s4">var </span><span class="s1">J</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)((</span><span class="s1">t</span><span class="s0">=&gt;</span><span class="s2">`</span><span class="s4">\n  </span><span class="s2">.edge {</span><span class="s4">\n    </span><span class="s2">stroke-width: </span><span class="s1">$</span><span class="s0">{</span><span class="s1">t</span><span class="s0">.</span><span class="s1">archEdgeWidth</span><span class="s0">}</span><span class="s2">;</span><span class="s4">\n    </span><span class="s2">stroke: </span><span class="s1">$</span><span class="s0">{</span><span class="s1">t</span><span class="s0">.</span><span class="s1">archEdgeColor</span><span class="s0">}</span><span class="s2">;</span><span class="s4">\n    </span><span class="s2">fill: none;</span><span class="s4">\n  </span><span class="s2">}</span><span class="s4">\n\n  </span><span class="s2">.arrow {</span><span class="s4">\n    </span><span class="s2">fill: </span><span class="s1">$</span><span class="s0">{</span><span class="s1">t</span><span class="s0">.</span><span class="s1">archEdgeArrowColor</span><span class="s0">}</span><span class="s2">;</span><span class="s4">\n  </span><span class="s2">}</span><span class="s4">\n\n  </span><span class="s2">.node-bkg {</span><span class="s4">\n    </span><span class="s2">fill: none;</span><span class="s4">\n    </span><span class="s2">stroke: </span><span class="s1">$</span><span class="s0">{</span><span class="s1">t</span><span class="s0">.</span><span class="s1">archGroupBorderColor</span><span class="s0">}</span><span class="s2">;</span><span class="s4">\n    </span><span class="s2">stroke-width: </span><span class="s1">$</span><span class="s0">{</span><span class="s1">t</span><span class="s0">.</span><span class="s1">archGroupBorderWidth</span><span class="s0">}</span><span class="s2">;</span><span class="s4">\n    </span><span class="s2">stroke-dasharray: 8;</span><span class="s4">\n  </span><span class="s2">}</span><span class="s4">\n  </span><span class="s2">.node-icon-text {</span><span class="s4">\n    </span><span class="s2">display: flex; </span><span class="s4">\n    </span><span class="s2">align-items: center;</span><span class="s4">\n  </span><span class="s2">}</span><span class="s4">\n  \n  </span><span class="s2">.node-icon-text &gt; div {</span><span class="s4">\n    </span><span class="s2">color: #fff;</span><span class="s4">\n    </span><span class="s2">margin: 1px;</span><span class="s4">\n    </span><span class="s2">height: fit-content;</span><span class="s4">\n    </span><span class="s2">text-align: center;</span><span class="s4">\n    </span><span class="s2">overflow: hidden;</span><span class="s4">\n    </span><span class="s2">display: -webkit-box;</span><span class="s4">\n    </span><span class="s2">-webkit-box-orient: vertical;</span><span class="s4">\n  </span><span class="s2">}</span><span class="s4">\n</span><span class="s2">`</span><span class="s0">),</span><span class="s2">&quot;getStyles&quot;</span><span class="s0">);</span><span class="s4">var </span><span class="s1">tt</span><span class="s0">=</span><span class="s1">J</span><span class="s0">;</span><span class="s4">var </span><span class="s1">et</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)((</span><span class="s1">t</span><span class="s0">=&gt;</span><span class="s2">`&lt;g&gt;&lt;rect width=&quot;80&quot; height=&quot;80&quot; style=&quot;fill: #087ebf; stroke-width: 0px;&quot;/&gt;</span><span class="s1">$</span><span class="s0">{</span><span class="s1">t</span><span class="s0">}</span><span class="s2">&lt;/g&gt;`</span><span class="s0">),</span><span class="s2">&quot;wrapIcon&quot;</span><span class="s0">);</span><span class="s4">var </span><span class="s1">rt</span><span class="s0">={</span><span class="s1">prefix</span><span class="s0">:</span><span class="s2">&quot;mermaid-architecture&quot;</span><span class="s0">,</span><span class="s1">height</span><span class="s0">:</span><span class="s3">80</span><span class="s0">,</span><span class="s1">width</span><span class="s0">:</span><span class="s3">80</span><span class="s0">,</span><span class="s1">icons</span><span class="s0">:{</span><span class="s1">database</span><span class="s0">:{</span><span class="s1">body</span><span class="s0">:</span><span class="s1">et</span><span class="s0">(</span><span class="s2">'&lt;path id=&quot;b&quot; data-name=&quot;4&quot; d=&quot;m20,57.86c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14&quot; style=&quot;fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;&quot;/&gt;&lt;path id=&quot;c&quot; data-name=&quot;3&quot; d=&quot;m20,45.95c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14&quot; style=&quot;fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;&quot;/&gt;&lt;path id=&quot;d&quot; data-name=&quot;2&quot; d=&quot;m20,34.05c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14&quot; style=&quot;fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;&quot;/&gt;&lt;ellipse id=&quot;e&quot; data-name=&quot;1&quot; cx=&quot;40&quot; cy=&quot;22.14&quot; rx=&quot;20&quot; ry=&quot;7.14&quot; style=&quot;fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;&quot;/&gt;&lt;line x1=&quot;20&quot; y1=&quot;57.86&quot; x2=&quot;20&quot; y2=&quot;22.14&quot; style=&quot;fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;&quot;/&gt;&lt;line x1=&quot;60&quot; y1=&quot;57.86&quot; x2=&quot;60&quot; y2=&quot;22.14&quot; style=&quot;fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;&quot;/&gt;'</span><span class="s0">)},</span><span class="s1">server</span><span class="s0">:{</span><span class="s1">body</span><span class="s0">:</span><span class="s1">et</span><span class="s0">(</span><span class="s2">'&lt;rect x=&quot;17.5&quot; y=&quot;17.5&quot; width=&quot;45&quot; height=&quot;45&quot; rx=&quot;2&quot; ry=&quot;2&quot; style=&quot;fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;&quot;/&gt;&lt;line x1=&quot;17.5&quot; y1=&quot;32.5&quot; x2=&quot;62.5&quot; y2=&quot;32.5&quot; style=&quot;fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;&quot;/&gt;&lt;line x1=&quot;17.5&quot; y1=&quot;47.5&quot; x2=&quot;62.5&quot; y2=&quot;47.5&quot; style=&quot;fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;&quot;/&gt;&lt;g&gt;&lt;path d=&quot;m56.25,25c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z&quot; style=&quot;fill: #fff; stroke-width: 0px;&quot;/&gt;&lt;path d=&quot;m56.25,25c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z&quot; style=&quot;fill: none; stroke: #fff; stroke-miterlimit: 10;&quot;/&gt;&lt;/g&gt;&lt;g&gt;&lt;path d=&quot;m56.25,40c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z&quot; style=&quot;fill: #fff; stroke-width: 0px;&quot;/&gt;&lt;path d=&quot;m56.25,40c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z&quot; style=&quot;fill: none; stroke: #fff; stroke-miterlimit: 10;&quot;/&gt;&lt;/g&gt;&lt;g&gt;&lt;path d=&quot;m56.25,55c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z&quot; style=&quot;fill: #fff; stroke-width: 0px;&quot;/&gt;&lt;path d=&quot;m56.25,55c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z&quot; style=&quot;fill: none; stroke: #fff; stroke-miterlimit: 10;&quot;/&gt;&lt;/g&gt;&lt;g&gt;&lt;circle cx=&quot;32.5&quot; cy=&quot;25&quot; r=&quot;.75&quot; style=&quot;fill: #fff; stroke: #fff; stroke-miterlimit: 10;&quot;/&gt;&lt;circle cx=&quot;27.5&quot; cy=&quot;25&quot; r=&quot;.75&quot; style=&quot;fill: #fff; stroke: #fff; stroke-miterlimit: 10;&quot;/&gt;&lt;circle cx=&quot;22.5&quot; cy=&quot;25&quot; r=&quot;.75&quot; style=&quot;fill: #fff; stroke: #fff; stroke-miterlimit: 10;&quot;/&gt;&lt;/g&gt;&lt;g&gt;&lt;circle cx=&quot;32.5&quot; cy=&quot;40&quot; r=&quot;.75&quot; style=&quot;fill: #fff; stroke: #fff; stroke-miterlimit: 10;&quot;/&gt;&lt;circle cx=&quot;27.5&quot; cy=&quot;40&quot; r=&quot;.75&quot; style=&quot;fill: #fff; stroke: #fff; stroke-miterlimit: 10;&quot;/&gt;&lt;circle cx=&quot;22.5&quot; cy=&quot;40&quot; r=&quot;.75&quot; style=&quot;fill: #fff; stroke: #fff; stroke-miterlimit: 10;&quot;/&gt;&lt;/g&gt;&lt;g&gt;&lt;circle cx=&quot;32.5&quot; cy=&quot;55&quot; r=&quot;.75&quot; style=&quot;fill: #fff; stroke: #fff; stroke-miterlimit: 10;&quot;/&gt;&lt;circle cx=&quot;27.5&quot; cy=&quot;55&quot; r=&quot;.75&quot; style=&quot;fill: #fff; stroke: #fff; stroke-miterlimit: 10;&quot;/&gt;&lt;circle cx=&quot;22.5&quot; cy=&quot;55&quot; r=&quot;.75&quot; style=&quot;fill: #fff; stroke: #fff; stroke-miterlimit: 10;&quot;/&gt;&lt;/g&gt;'</span><span class="s0">)},</span><span class="s1">disk</span><span class="s0">:{</span><span class="s1">body</span><span class="s0">:</span><span class="s1">et</span><span class="s0">(</span><span class="s2">'&lt;rect x=&quot;20&quot; y=&quot;15&quot; width=&quot;40&quot; height=&quot;50&quot; rx=&quot;1&quot; ry=&quot;1&quot; style=&quot;fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;&quot;/&gt;&lt;ellipse cx=&quot;24&quot; cy=&quot;19.17&quot; rx=&quot;.8&quot; ry=&quot;.83&quot; style=&quot;fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;&quot;/&gt;&lt;ellipse cx=&quot;56&quot; cy=&quot;19.17&quot; rx=&quot;.8&quot; ry=&quot;.83&quot; style=&quot;fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;&quot;/&gt;&lt;ellipse cx=&quot;24&quot; cy=&quot;60.83&quot; rx=&quot;.8&quot; ry=&quot;.83&quot; style=&quot;fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;&quot;/&gt;&lt;ellipse cx=&quot;56&quot; cy=&quot;60.83&quot; rx=&quot;.8&quot; ry=&quot;.83&quot; style=&quot;fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;&quot;/&gt;&lt;ellipse cx=&quot;40&quot; cy=&quot;33.75&quot; rx=&quot;14&quot; ry=&quot;14.58&quot; style=&quot;fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;&quot;/&gt;&lt;ellipse cx=&quot;40&quot; cy=&quot;33.75&quot; rx=&quot;4&quot; ry=&quot;4.17&quot; style=&quot;fill: #fff; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;&quot;/&gt;&lt;path d=&quot;m37.51,42.52l-4.83,13.22c-.26.71-1.1,1.02-1.76.64l-4.18-2.42c-.66-.38-.81-1.26-.33-1.84l9.01-10.8c.88-1.05,2.56-.08,2.09,1.2Z&quot; style=&quot;fill: #fff; stroke-width: 0px;&quot;/&gt;'</span><span class="s0">)},</span><span class="s1">internet</span><span class="s0">:{</span><span class="s1">body</span><span class="s0">:</span><span class="s1">et</span><span class="s0">(</span><span class="s2">'&lt;circle cx=&quot;40&quot; cy=&quot;40&quot; r=&quot;22.5&quot; style=&quot;fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;&quot;/&gt;&lt;line x1=&quot;40&quot; y1=&quot;17.5&quot; x2=&quot;40&quot; y2=&quot;62.5&quot; style=&quot;fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;&quot;/&gt;&lt;line x1=&quot;17.5&quot; y1=&quot;40&quot; x2=&quot;62.5&quot; y2=&quot;40&quot; style=&quot;fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;&quot;/&gt;&lt;path d=&quot;m39.99,17.51c-15.28,11.1-15.28,33.88,0,44.98&quot; style=&quot;fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;&quot;/&gt;&lt;path d=&quot;m40.01,17.51c15.28,11.1,15.28,33.88,0,44.98&quot; style=&quot;fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;&quot;/&gt;&lt;line x1=&quot;19.75&quot; y1=&quot;30.1&quot; x2=&quot;60.25&quot; y2=&quot;30.1&quot; style=&quot;fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;&quot;/&gt;&lt;line x1=&quot;19.75&quot; y1=&quot;49.9&quot; x2=&quot;60.25&quot; y2=&quot;49.9&quot; style=&quot;fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;&quot;/&gt;'</span><span class="s0">)},</span><span class="s1">cloud</span><span class="s0">:{</span><span class="s1">body</span><span class="s0">:</span><span class="s1">et</span><span class="s0">(</span><span class="s2">'&lt;path d=&quot;m65,47.5c0,2.76-2.24,5-5,5H20c-2.76,0-5-2.24-5-5,0-1.87,1.03-3.51,2.56-4.36-.04-.21-.06-.42-.06-.64,0-2.6,2.48-4.74,5.65-4.97,1.65-4.51,6.34-7.76,11.85-7.76.86,0,1.69.08,2.5.23,2.09-1.57,4.69-2.5,7.5-2.5,6.1,0,11.19,4.38,12.28,10.17,2.14.56,3.72,2.51,3.72,4.83,0,.03,0,.07-.01.1,2.29.46,4.01,2.48,4.01,4.9Z&quot; style=&quot;fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;&quot;/&gt;'</span><span class="s0">)},</span><span class="s1">unknown</span><span class="s0">:</span><span class="s1">i</span><span class="s0">.</span><span class="s1">Gc</span><span class="s0">,</span><span class="s1">blank</span><span class="s0">:{</span><span class="s1">body</span><span class="s0">:</span><span class="s1">et</span><span class="s0">(</span><span class="s2">&quot;&quot;</span><span class="s0">)}}};</span><span class="s4">var </span><span class="s1">it</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)((</span><span class="s1">async </span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">const </span><span class="s1">r</span><span class="s0">=</span><span class="s1">K</span><span class="s0">(</span><span class="s2">&quot;padding&quot;</span><span class="s0">);</span><span class="s4">const </span><span class="s1">i</span><span class="s0">=</span><span class="s1">K</span><span class="s0">(</span><span class="s2">&quot;iconSize&quot;</span><span class="s0">);</span><span class="s4">const </span><span class="s1">o</span><span class="s0">=</span><span class="s1">i</span><span class="s0">/</span><span class="s3">2</span><span class="s0">;</span><span class="s4">const </span><span class="s1">a</span><span class="s0">=</span><span class="s1">i</span><span class="s0">/</span><span class="s3">6</span><span class="s0">;</span><span class="s4">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">a</span><span class="s0">/</span><span class="s3">2</span><span class="s0">;</span><span class="s4">await </span><span class="s1">Promise</span><span class="s0">.</span><span class="s1">all</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">edges</span><span class="s0">().</span><span class="s1">map</span><span class="s0">((</span><span class="s1">async e</span><span class="s0">=&gt;{</span><span class="s4">const</span><span class="s0">{</span><span class="s1">source</span><span class="s0">:</span><span class="s1">i</span><span class="s0">,</span><span class="s1">sourceDir</span><span class="s0">:</span><span class="s1">h</span><span class="s0">,</span><span class="s1">sourceArrow</span><span class="s0">:</span><span class="s1">c</span><span class="s0">,</span><span class="s1">sourceGroup</span><span class="s0">:</span><span class="s1">d</span><span class="s0">,</span><span class="s1">target</span><span class="s0">:</span><span class="s1">f</span><span class="s0">,</span><span class="s1">targetDir</span><span class="s0">:</span><span class="s1">g</span><span class="s0">,</span><span class="s1">targetArrow</span><span class="s0">:</span><span class="s1">u</span><span class="s0">,</span><span class="s1">targetGroup</span><span class="s0">:</span><span class="s1">p</span><span class="s0">,</span><span class="s1">label</span><span class="s0">:</span><span class="s1">m</span><span class="s0">}=</span><span class="s1">D</span><span class="s0">(</span><span class="s1">e</span><span class="s0">);</span><span class="s4">let</span><span class="s0">{</span><span class="s1">x</span><span class="s0">:</span><span class="s1">E</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s1">L</span><span class="s0">}=</span><span class="s1">e</span><span class="s0">[</span><span class="s3">0</span><span class="s0">].</span><span class="s1">sourceEndpoint</span><span class="s0">();</span><span class="s4">const</span><span class="s0">{</span><span class="s1">x</span><span class="s0">:</span><span class="s1">_</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s1">M</span><span class="s0">}=</span><span class="s1">e</span><span class="s0">[</span><span class="s3">0</span><span class="s0">].</span><span class="s1">midpoint</span><span class="s0">();</span><span class="s4">let</span><span class="s0">{</span><span class="s1">x</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s1">O</span><span class="s0">}=</span><span class="s1">e</span><span class="s0">[</span><span class="s3">0</span><span class="s0">].</span><span class="s1">targetEndpoint</span><span class="s0">();</span><span class="s4">const </span><span class="s1">R</span><span class="s0">=</span><span class="s1">r</span><span class="s0">+</span><span class="s3">4</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">d</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">N</span><span class="s0">(</span><span class="s1">h</span><span class="s0">)){</span><span class="s1">E</span><span class="s0">+=</span><span class="s1">h</span><span class="s0">===</span><span class="s2">&quot;L&quot;</span><span class="s0">?-</span><span class="s1">R</span><span class="s0">:</span><span class="s1">R</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">L</span><span class="s0">+=</span><span class="s1">h</span><span class="s0">===</span><span class="s2">&quot;T&quot;</span><span class="s0">?-</span><span class="s1">R</span><span class="s0">:</span><span class="s1">R</span><span class="s0">+</span><span class="s3">18</span><span class="s0">}}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">p</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">N</span><span class="s0">(</span><span class="s1">g</span><span class="s0">)){</span><span class="s1">x</span><span class="s0">+=</span><span class="s1">g</span><span class="s0">===</span><span class="s2">&quot;L&quot;</span><span class="s0">?-</span><span class="s1">R</span><span class="s0">:</span><span class="s1">R</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">O</span><span class="s0">+=</span><span class="s1">g</span><span class="s0">===</span><span class="s2">&quot;T&quot;</span><span class="s0">?-</span><span class="s1">R</span><span class="s0">:</span><span class="s1">R</span><span class="s0">+</span><span class="s3">18</span><span class="s0">}}</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">d</span><span class="s0">&amp;&amp;</span><span class="s1">$</span><span class="s0">.</span><span class="s1">getNode</span><span class="s0">(</span><span class="s1">i</span><span class="s0">)?.</span><span class="s1">type</span><span class="s0">===</span><span class="s2">&quot;junction&quot;</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">N</span><span class="s0">(</span><span class="s1">h</span><span class="s0">)){</span><span class="s1">E</span><span class="s0">+=</span><span class="s1">h</span><span class="s0">===</span><span class="s2">&quot;L&quot;</span><span class="s0">?</span><span class="s1">o</span><span class="s0">:-</span><span class="s1">o</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">L</span><span class="s0">+=</span><span class="s1">h</span><span class="s0">===</span><span class="s2">&quot;T&quot;</span><span class="s0">?</span><span class="s1">o</span><span class="s0">:-</span><span class="s1">o</span><span class="s0">}}</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">p</span><span class="s0">&amp;&amp;</span><span class="s1">$</span><span class="s0">.</span><span class="s1">getNode</span><span class="s0">(</span><span class="s1">f</span><span class="s0">)?.</span><span class="s1">type</span><span class="s0">===</span><span class="s2">&quot;junction&quot;</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">N</span><span class="s0">(</span><span class="s1">g</span><span class="s0">)){</span><span class="s1">x</span><span class="s0">+=</span><span class="s1">g</span><span class="s0">===</span><span class="s2">&quot;L&quot;</span><span class="s0">?</span><span class="s1">o</span><span class="s0">:-</span><span class="s1">o</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">O</span><span class="s0">+=</span><span class="s1">g</span><span class="s0">===</span><span class="s2">&quot;T&quot;</span><span class="s0">?</span><span class="s1">o</span><span class="s0">:-</span><span class="s1">o</span><span class="s0">}}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">[</span><span class="s3">0</span><span class="s0">].</span><span class="s1">_private</span><span class="s0">.</span><span class="s1">rscratch</span><span class="s0">){</span><span class="s4">const </span><span class="s1">e</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">insert</span><span class="s0">(</span><span class="s2">&quot;g&quot;</span><span class="s0">);</span><span class="s1">e</span><span class="s0">.</span><span class="s1">insert</span><span class="s0">(</span><span class="s2">&quot;path&quot;</span><span class="s0">).</span><span class="s1">attr</span><span class="s0">(</span><span class="s2">&quot;d&quot;</span><span class="s0">,</span><span class="s2">`M </span><span class="s1">$</span><span class="s0">{</span><span class="s1">E</span><span class="s0">}</span><span class="s2">,</span><span class="s1">$</span><span class="s0">{</span><span class="s1">L</span><span class="s0">} </span><span class="s2">L </span><span class="s1">$</span><span class="s0">{</span><span class="s1">_</span><span class="s0">}</span><span class="s2">,</span><span class="s1">$</span><span class="s0">{</span><span class="s1">M</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s1">x</span><span class="s0">}</span><span class="s2">,</span><span class="s1">$</span><span class="s0">{</span><span class="s1">O</span><span class="s0">} </span><span class="s2">`</span><span class="s0">).</span><span class="s1">attr</span><span class="s0">(</span><span class="s2">&quot;class&quot;</span><span class="s0">,</span><span class="s2">&quot;edge&quot;</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">c</span><span class="s0">){</span><span class="s4">const </span><span class="s1">t</span><span class="s0">=</span><span class="s1">N</span><span class="s0">(</span><span class="s1">h</span><span class="s0">)?</span><span class="s1">y</span><span class="s0">[</span><span class="s1">h</span><span class="s0">](</span><span class="s1">E</span><span class="s0">,</span><span class="s1">a</span><span class="s0">):</span><span class="s1">E</span><span class="s0">-</span><span class="s1">s</span><span class="s0">;</span><span class="s4">const </span><span class="s1">r</span><span class="s0">=</span><span class="s1">T</span><span class="s0">(</span><span class="s1">h</span><span class="s0">)?</span><span class="s1">y</span><span class="s0">[</span><span class="s1">h</span><span class="s0">](</span><span class="s1">L</span><span class="s0">,</span><span class="s1">a</span><span class="s0">):</span><span class="s1">L</span><span class="s0">-</span><span class="s1">s</span><span class="s0">;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">insert</span><span class="s0">(</span><span class="s2">&quot;polygon&quot;</span><span class="s0">).</span><span class="s1">attr</span><span class="s0">(</span><span class="s2">&quot;points&quot;</span><span class="s0">,</span><span class="s1">v</span><span class="s0">[</span><span class="s1">h</span><span class="s0">](</span><span class="s1">a</span><span class="s0">)).</span><span class="s1">attr</span><span class="s0">(</span><span class="s2">&quot;transform&quot;</span><span class="s0">,</span><span class="s2">`translate(</span><span class="s1">$</span><span class="s0">{</span><span class="s1">t</span><span class="s0">}</span><span class="s2">,</span><span class="s1">$</span><span class="s0">{</span><span class="s1">r</span><span class="s0">}</span><span class="s2">)`</span><span class="s0">).</span><span class="s1">attr</span><span class="s0">(</span><span class="s2">&quot;class&quot;</span><span class="s0">,</span><span class="s2">&quot;arrow&quot;</span><span class="s0">)}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">u</span><span class="s0">){</span><span class="s4">const </span><span class="s1">t</span><span class="s0">=</span><span class="s1">N</span><span class="s0">(</span><span class="s1">g</span><span class="s0">)?</span><span class="s1">y</span><span class="s0">[</span><span class="s1">g</span><span class="s0">](</span><span class="s1">x</span><span class="s0">,</span><span class="s1">a</span><span class="s0">):</span><span class="s1">x</span><span class="s0">-</span><span class="s1">s</span><span class="s0">;</span><span class="s4">const </span><span class="s1">r</span><span class="s0">=</span><span class="s1">T</span><span class="s0">(</span><span class="s1">g</span><span class="s0">)?</span><span class="s1">y</span><span class="s0">[</span><span class="s1">g</span><span class="s0">](</span><span class="s1">O</span><span class="s0">,</span><span class="s1">a</span><span class="s0">):</span><span class="s1">O</span><span class="s0">-</span><span class="s1">s</span><span class="s0">;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">insert</span><span class="s0">(</span><span class="s2">&quot;polygon&quot;</span><span class="s0">).</span><span class="s1">attr</span><span class="s0">(</span><span class="s2">&quot;points&quot;</span><span class="s0">,</span><span class="s1">v</span><span class="s0">[</span><span class="s1">g</span><span class="s0">](</span><span class="s1">a</span><span class="s0">)).</span><span class="s1">attr</span><span class="s0">(</span><span class="s2">&quot;transform&quot;</span><span class="s0">,</span><span class="s2">`translate(</span><span class="s1">$</span><span class="s0">{</span><span class="s1">t</span><span class="s0">}</span><span class="s2">,</span><span class="s1">$</span><span class="s0">{</span><span class="s1">r</span><span class="s0">}</span><span class="s2">)`</span><span class="s0">).</span><span class="s1">attr</span><span class="s0">(</span><span class="s2">&quot;class&quot;</span><span class="s0">,</span><span class="s2">&quot;arrow&quot;</span><span class="s0">)}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">m</span><span class="s0">){</span><span class="s4">const </span><span class="s1">t</span><span class="s0">=!</span><span class="s1">A</span><span class="s0">(</span><span class="s1">h</span><span class="s0">,</span><span class="s1">g</span><span class="s0">)?</span><span class="s1">N</span><span class="s0">(</span><span class="s1">h</span><span class="s0">)?</span><span class="s2">&quot;X&quot;</span><span class="s0">:</span><span class="s2">&quot;Y&quot;</span><span class="s0">:</span><span class="s2">&quot;XY&quot;</span><span class="s0">;</span><span class="s4">let </span><span class="s1">r</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">===</span><span class="s2">&quot;X&quot;</span><span class="s0">){</span><span class="s1">r</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">abs</span><span class="s0">(</span><span class="s1">E</span><span class="s0">-</span><span class="s1">x</span><span class="s0">)}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">===</span><span class="s2">&quot;Y&quot;</span><span class="s0">){</span><span class="s1">r</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">abs</span><span class="s0">(</span><span class="s1">L</span><span class="s0">-</span><span class="s1">O</span><span class="s0">)/</span><span class="s3">1.5</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">r</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">abs</span><span class="s0">(</span><span class="s1">E</span><span class="s0">-</span><span class="s1">x</span><span class="s0">)/</span><span class="s3">2</span><span class="s0">}</span><span class="s4">const </span><span class="s1">i</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">append</span><span class="s0">(</span><span class="s2">&quot;g&quot;</span><span class="s0">);</span><span class="s4">await</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">n</span><span class="s0">.</span><span class="s1">GZ</span><span class="s0">)(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">m</span><span class="s0">,{</span><span class="s1">useHtmlLabels</span><span class="s0">:</span><span class="s4">false</span><span class="s0">,</span><span class="s1">width</span><span class="s0">:</span><span class="s1">r</span><span class="s0">,</span><span class="s1">classes</span><span class="s0">:</span><span class="s2">&quot;architecture-service-label&quot;</span><span class="s0">},(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">D7</span><span class="s0">)());</span><span class="s1">i</span><span class="s0">.</span><span class="s1">attr</span><span class="s0">(</span><span class="s2">&quot;dy&quot;</span><span class="s0">,</span><span class="s2">&quot;1em&quot;</span><span class="s0">).</span><span class="s1">attr</span><span class="s0">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="s0">,</span><span class="s2">&quot;middle&quot;</span><span class="s0">).</span><span class="s1">attr</span><span class="s0">(</span><span class="s2">&quot;dominant-baseline&quot;</span><span class="s0">,</span><span class="s2">&quot;middle&quot;</span><span class="s0">).</span><span class="s1">attr</span><span class="s0">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="s0">,</span><span class="s2">&quot;middle&quot;</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">===</span><span class="s2">&quot;X&quot;</span><span class="s0">){</span><span class="s1">i</span><span class="s0">.</span><span class="s1">attr</span><span class="s0">(</span><span class="s2">&quot;transform&quot;</span><span class="s0">,</span><span class="s2">&quot;translate(&quot;</span><span class="s0">+</span><span class="s1">_</span><span class="s0">+</span><span class="s2">&quot;, &quot;</span><span class="s0">+</span><span class="s1">M</span><span class="s0">+</span><span class="s2">&quot;)&quot;</span><span class="s0">)}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">===</span><span class="s2">&quot;Y&quot;</span><span class="s0">){</span><span class="s1">i</span><span class="s0">.</span><span class="s1">attr</span><span class="s0">(</span><span class="s2">&quot;transform&quot;</span><span class="s0">,</span><span class="s2">&quot;translate(&quot;</span><span class="s0">+</span><span class="s1">_</span><span class="s0">+</span><span class="s2">&quot;, &quot;</span><span class="s0">+</span><span class="s1">M</span><span class="s0">+</span><span class="s2">&quot;) rotate(-90)&quot;</span><span class="s0">)}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">===</span><span class="s2">&quot;XY&quot;</span><span class="s0">){</span><span class="s4">const </span><span class="s1">t</span><span class="s0">=</span><span class="s1">I</span><span class="s0">(</span><span class="s1">h</span><span class="s0">,</span><span class="s1">g</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">&amp;&amp;</span><span class="s1">w</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)){</span><span class="s4">const </span><span class="s1">e</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">node</span><span class="s0">().</span><span class="s1">getBoundingClientRect</span><span class="s0">();</span><span class="s4">const</span><span class="s0">[</span><span class="s1">r</span><span class="s0">,</span><span class="s1">n</span><span class="s0">]=</span><span class="s1">C</span><span class="s0">(</span><span class="s1">t</span><span class="s0">);</span><span class="s1">i</span><span class="s0">.</span><span class="s1">attr</span><span class="s0">(</span><span class="s2">&quot;dominant-baseline&quot;</span><span class="s0">,</span><span class="s2">&quot;auto&quot;</span><span class="s0">).</span><span class="s1">attr</span><span class="s0">(</span><span class="s2">&quot;transform&quot;</span><span class="s0">,</span><span class="s2">`rotate(</span><span class="s1">$</span><span class="s0">{-</span><span class="s3">1</span><span class="s0">*</span><span class="s1">r</span><span class="s0">*</span><span class="s1">n</span><span class="s0">*</span><span class="s3">45</span><span class="s0">}</span><span class="s2">)`</span><span class="s0">);</span><span class="s4">const </span><span class="s1">o</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">node</span><span class="s0">().</span><span class="s1">getBoundingClientRect</span><span class="s0">();</span><span class="s1">i</span><span class="s0">.</span><span class="s1">attr</span><span class="s0">(</span><span class="s2">&quot;transform&quot;</span><span class="s0">,</span><span class="s2">`</span><span class="s4">\n                </span><span class="s2">translate(</span><span class="s1">$</span><span class="s0">{</span><span class="s1">_</span><span class="s0">}</span><span class="s2">, </span><span class="s1">$</span><span class="s0">{</span><span class="s1">M</span><span class="s0">-</span><span class="s1">e</span><span class="s0">.</span><span class="s1">height</span><span class="s0">/</span><span class="s3">2</span><span class="s0">}</span><span class="s2">)</span><span class="s4">\n                </span><span class="s2">translate(</span><span class="s1">$</span><span class="s0">{</span><span class="s1">r</span><span class="s0">*</span><span class="s1">o</span><span class="s0">.</span><span class="s1">width</span><span class="s0">/</span><span class="s3">2</span><span class="s0">}</span><span class="s2">, </span><span class="s1">$</span><span class="s0">{</span><span class="s1">n</span><span class="s0">*</span><span class="s1">o</span><span class="s0">.</span><span class="s1">height</span><span class="s0">/</span><span class="s3">2</span><span class="s0">}</span><span class="s2">)</span><span class="s4">\n                </span><span class="s2">rotate(</span><span class="s1">$</span><span class="s0">{-</span><span class="s3">1</span><span class="s0">*</span><span class="s1">r</span><span class="s0">*</span><span class="s1">n</span><span class="s0">*</span><span class="s3">45</span><span class="s0">}</span><span class="s2">, 0, </span><span class="s1">$</span><span class="s0">{</span><span class="s1">e</span><span class="s0">.</span><span class="s1">height</span><span class="s0">/</span><span class="s3">2</span><span class="s0">}</span><span class="s2">)</span><span class="s4">\n              </span><span class="s2">`</span><span class="s0">)}}}}})))}),</span><span class="s2">&quot;drawEdges&quot;</span><span class="s0">);</span><span class="s4">var </span><span class="s1">nt</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)((</span><span class="s1">async </span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">const </span><span class="s1">r</span><span class="s0">=</span><span class="s1">K</span><span class="s0">(</span><span class="s2">&quot;padding&quot;</span><span class="s0">);</span><span class="s4">const </span><span class="s1">o</span><span class="s0">=</span><span class="s1">r</span><span class="s0">*</span><span class="s3">.75</span><span class="s0">;</span><span class="s4">const </span><span class="s1">a</span><span class="s0">=</span><span class="s1">K</span><span class="s0">(</span><span class="s2">&quot;fontSize&quot;</span><span class="s0">);</span><span class="s4">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">K</span><span class="s0">(</span><span class="s2">&quot;iconSize&quot;</span><span class="s0">);</span><span class="s4">const </span><span class="s1">h</span><span class="s0">=</span><span class="s1">s</span><span class="s0">/</span><span class="s3">2</span><span class="s0">;</span><span class="s4">await </span><span class="s1">Promise</span><span class="s0">.</span><span class="s1">all</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">nodes</span><span class="s0">().</span><span class="s1">map</span><span class="s0">((</span><span class="s1">async e</span><span class="s0">=&gt;{</span><span class="s4">const </span><span class="s1">r</span><span class="s0">=</span><span class="s1">R</span><span class="s0">(</span><span class="s1">e</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">type</span><span class="s0">===</span><span class="s2">&quot;group&quot;</span><span class="s0">){</span><span class="s4">const</span><span class="s0">{</span><span class="s1">h</span><span class="s0">:</span><span class="s1">s</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s1">c</span><span class="s0">,</span><span class="s1">x1</span><span class="s0">:</span><span class="s1">d</span><span class="s0">,</span><span class="s1">y1</span><span class="s0">:</span><span class="s1">f</span><span class="s0">}=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">boundingBox</span><span class="s0">();</span><span class="s1">t</span><span class="s0">.</span><span class="s1">append</span><span class="s0">(</span><span class="s2">&quot;rect&quot;</span><span class="s0">).</span><span class="s1">attr</span><span class="s0">(</span><span class="s2">&quot;x&quot;</span><span class="s0">,</span><span class="s1">d</span><span class="s0">+</span><span class="s1">h</span><span class="s0">).</span><span class="s1">attr</span><span class="s0">(</span><span class="s2">&quot;y&quot;</span><span class="s0">,</span><span class="s1">f</span><span class="s0">+</span><span class="s1">h</span><span class="s0">).</span><span class="s1">attr</span><span class="s0">(</span><span class="s2">&quot;width&quot;</span><span class="s0">,</span><span class="s1">c</span><span class="s0">).</span><span class="s1">attr</span><span class="s0">(</span><span class="s2">&quot;height&quot;</span><span class="s0">,</span><span class="s1">s</span><span class="s0">).</span><span class="s1">attr</span><span class="s0">(</span><span class="s2">&quot;class&quot;</span><span class="s0">,</span><span class="s2">&quot;node-bkg&quot;</span><span class="s0">);</span><span class="s4">const </span><span class="s1">g</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">append</span><span class="s0">(</span><span class="s2">&quot;g&quot;</span><span class="s0">);</span><span class="s4">let </span><span class="s1">u</span><span class="s0">=</span><span class="s1">d</span><span class="s0">;</span><span class="s4">let </span><span class="s1">p</span><span class="s0">=</span><span class="s1">f</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">icon</span><span class="s0">){</span><span class="s4">const </span><span class="s1">t</span><span class="s0">=</span><span class="s1">g</span><span class="s0">.</span><span class="s1">append</span><span class="s0">(</span><span class="s2">&quot;g&quot;</span><span class="s0">);</span><span class="s1">t</span><span class="s0">.</span><span class="s1">html</span><span class="s0">(</span><span class="s2">`&lt;g&gt;</span><span class="s1">$</span><span class="s0">{</span><span class="s4">await</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">i</span><span class="s0">.</span><span class="s1">WY</span><span class="s0">)(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">icon</span><span class="s0">,{</span><span class="s1">height</span><span class="s0">:</span><span class="s1">o</span><span class="s0">,</span><span class="s1">width</span><span class="s0">:</span><span class="s1">o</span><span class="s0">,</span><span class="s1">fallbackPrefix</span><span class="s0">:</span><span class="s1">rt</span><span class="s0">.</span><span class="s1">prefix</span><span class="s0">})}</span><span class="s2">&lt;/g&gt;`</span><span class="s0">);</span><span class="s1">t</span><span class="s0">.</span><span class="s1">attr</span><span class="s0">(</span><span class="s2">&quot;transform&quot;</span><span class="s0">,</span><span class="s2">&quot;translate(&quot;</span><span class="s0">+(</span><span class="s1">u</span><span class="s0">+</span><span class="s1">h</span><span class="s0">+</span><span class="s3">1</span><span class="s0">)+</span><span class="s2">&quot;, &quot;</span><span class="s0">+(</span><span class="s1">p</span><span class="s0">+</span><span class="s1">h</span><span class="s0">+</span><span class="s3">1</span><span class="s0">)+</span><span class="s2">&quot;)&quot;</span><span class="s0">);</span><span class="s1">u</span><span class="s0">+=</span><span class="s1">o</span><span class="s0">;</span><span class="s1">p</span><span class="s0">+=</span><span class="s1">a</span><span class="s0">/</span><span class="s3">2</span><span class="s0">-</span><span class="s3">1</span><span class="s0">-</span><span class="s3">2</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">label</span><span class="s0">){</span><span class="s4">const </span><span class="s1">t</span><span class="s0">=</span><span class="s1">g</span><span class="s0">.</span><span class="s1">append</span><span class="s0">(</span><span class="s2">&quot;g&quot;</span><span class="s0">);</span><span class="s4">await</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">n</span><span class="s0">.</span><span class="s1">GZ</span><span class="s0">)(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">r</span><span class="s0">.</span><span class="s1">label</span><span class="s0">,{</span><span class="s1">useHtmlLabels</span><span class="s0">:</span><span class="s4">false</span><span class="s0">,</span><span class="s1">width</span><span class="s0">:</span><span class="s1">c</span><span class="s0">,</span><span class="s1">classes</span><span class="s0">:</span><span class="s2">&quot;architecture-service-label&quot;</span><span class="s0">},(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">D7</span><span class="s0">)());</span><span class="s1">t</span><span class="s0">.</span><span class="s1">attr</span><span class="s0">(</span><span class="s2">&quot;dy&quot;</span><span class="s0">,</span><span class="s2">&quot;1em&quot;</span><span class="s0">).</span><span class="s1">attr</span><span class="s0">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="s0">,</span><span class="s2">&quot;middle&quot;</span><span class="s0">).</span><span class="s1">attr</span><span class="s0">(</span><span class="s2">&quot;dominant-baseline&quot;</span><span class="s0">,</span><span class="s2">&quot;start&quot;</span><span class="s0">).</span><span class="s1">attr</span><span class="s0">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="s0">,</span><span class="s2">&quot;start&quot;</span><span class="s0">);</span><span class="s1">t</span><span class="s0">.</span><span class="s1">attr</span><span class="s0">(</span><span class="s2">&quot;transform&quot;</span><span class="s0">,</span><span class="s2">&quot;translate(&quot;</span><span class="s0">+(</span><span class="s1">u</span><span class="s0">+</span><span class="s1">h</span><span class="s0">+</span><span class="s3">4</span><span class="s0">)+</span><span class="s2">&quot;, &quot;</span><span class="s0">+(</span><span class="s1">p</span><span class="s0">+</span><span class="s1">h</span><span class="s0">+</span><span class="s3">2</span><span class="s0">)+</span><span class="s2">&quot;)&quot;</span><span class="s0">)}}})))}),</span><span class="s2">&quot;drawGroups&quot;</span><span class="s0">);</span><span class="s4">var </span><span class="s1">ot</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)((</span><span class="s1">async </span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">const </span><span class="s1">o of r</span><span class="s0">){</span><span class="s4">const </span><span class="s1">r</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">append</span><span class="s0">(</span><span class="s2">&quot;g&quot;</span><span class="s0">);</span><span class="s4">const </span><span class="s1">a</span><span class="s0">=</span><span class="s1">K</span><span class="s0">(</span><span class="s2">&quot;iconSize&quot;</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">o</span><span class="s0">.</span><span class="s1">title</span><span class="s0">){</span><span class="s4">const </span><span class="s1">t</span><span class="s0">=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">append</span><span class="s0">(</span><span class="s2">&quot;g&quot;</span><span class="s0">);</span><span class="s4">await</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">n</span><span class="s0">.</span><span class="s1">GZ</span><span class="s0">)(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">o</span><span class="s0">.</span><span class="s1">title</span><span class="s0">,{</span><span class="s1">useHtmlLabels</span><span class="s0">:</span><span class="s4">false</span><span class="s0">,</span><span class="s1">width</span><span class="s0">:</span><span class="s1">a</span><span class="s0">*</span><span class="s3">1.5</span><span class="s0">,</span><span class="s1">classes</span><span class="s0">:</span><span class="s2">&quot;architecture-service-label&quot;</span><span class="s0">},(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">D7</span><span class="s0">)());</span><span class="s1">t</span><span class="s0">.</span><span class="s1">attr</span><span class="s0">(</span><span class="s2">&quot;dy&quot;</span><span class="s0">,</span><span class="s2">&quot;1em&quot;</span><span class="s0">).</span><span class="s1">attr</span><span class="s0">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="s0">,</span><span class="s2">&quot;middle&quot;</span><span class="s0">).</span><span class="s1">attr</span><span class="s0">(</span><span class="s2">&quot;dominant-baseline&quot;</span><span class="s0">,</span><span class="s2">&quot;middle&quot;</span><span class="s0">).</span><span class="s1">attr</span><span class="s0">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="s0">,</span><span class="s2">&quot;middle&quot;</span><span class="s0">);</span><span class="s1">t</span><span class="s0">.</span><span class="s1">attr</span><span class="s0">(</span><span class="s2">&quot;transform&quot;</span><span class="s0">,</span><span class="s2">&quot;translate(&quot;</span><span class="s0">+</span><span class="s1">a</span><span class="s0">/</span><span class="s3">2</span><span class="s0">+</span><span class="s2">&quot;, &quot;</span><span class="s0">+</span><span class="s1">a</span><span class="s0">+</span><span class="s2">&quot;)&quot;</span><span class="s0">)}</span><span class="s4">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">append</span><span class="s0">(</span><span class="s2">&quot;g&quot;</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">o</span><span class="s0">.</span><span class="s1">icon</span><span class="s0">){</span><span class="s1">s</span><span class="s0">.</span><span class="s1">html</span><span class="s0">(</span><span class="s2">`&lt;g&gt;</span><span class="s1">$</span><span class="s0">{</span><span class="s4">await</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">i</span><span class="s0">.</span><span class="s1">WY</span><span class="s0">)(</span><span class="s1">o</span><span class="s0">.</span><span class="s1">icon</span><span class="s0">,{</span><span class="s1">height</span><span class="s0">:</span><span class="s1">a</span><span class="s0">,</span><span class="s1">width</span><span class="s0">:</span><span class="s1">a</span><span class="s0">,</span><span class="s1">fallbackPrefix</span><span class="s0">:</span><span class="s1">rt</span><span class="s0">.</span><span class="s1">prefix</span><span class="s0">})}</span><span class="s2">&lt;/g&gt;`</span><span class="s0">)}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">o</span><span class="s0">.</span><span class="s1">iconText</span><span class="s0">){</span><span class="s1">s</span><span class="s0">.</span><span class="s1">html</span><span class="s0">(</span><span class="s2">`&lt;g&gt;</span><span class="s1">$</span><span class="s0">{</span><span class="s4">await</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">i</span><span class="s0">.</span><span class="s1">WY</span><span class="s0">)(</span><span class="s2">&quot;blank&quot;</span><span class="s0">,{</span><span class="s1">height</span><span class="s0">:</span><span class="s1">a</span><span class="s0">,</span><span class="s1">width</span><span class="s0">:</span><span class="s1">a</span><span class="s0">,</span><span class="s1">fallbackPrefix</span><span class="s0">:</span><span class="s1">rt</span><span class="s0">.</span><span class="s1">prefix</span><span class="s0">})}</span><span class="s2">&lt;/g&gt;`</span><span class="s0">);</span><span class="s4">const </span><span class="s1">t</span><span class="s0">=</span><span class="s1">s</span><span class="s0">.</span><span class="s1">append</span><span class="s0">(</span><span class="s2">&quot;g&quot;</span><span class="s0">);</span><span class="s4">const </span><span class="s1">e</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">append</span><span class="s0">(</span><span class="s2">&quot;foreignObject&quot;</span><span class="s0">).</span><span class="s1">attr</span><span class="s0">(</span><span class="s2">&quot;width&quot;</span><span class="s0">,</span><span class="s1">a</span><span class="s0">).</span><span class="s1">attr</span><span class="s0">(</span><span class="s2">&quot;height&quot;</span><span class="s0">,</span><span class="s1">a</span><span class="s0">);</span><span class="s4">const </span><span class="s1">r</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">append</span><span class="s0">(</span><span class="s2">&quot;div&quot;</span><span class="s0">).</span><span class="s1">attr</span><span class="s0">(</span><span class="s2">&quot;class&quot;</span><span class="s0">,</span><span class="s2">&quot;node-icon-text&quot;</span><span class="s0">).</span><span class="s1">attr</span><span class="s0">(</span><span class="s2">&quot;style&quot;</span><span class="s0">,</span><span class="s2">`height: </span><span class="s1">$</span><span class="s0">{</span><span class="s1">a</span><span class="s0">}</span><span class="s2">px;`</span><span class="s0">).</span><span class="s1">append</span><span class="s0">(</span><span class="s2">&quot;div&quot;</span><span class="s0">).</span><span class="s1">html</span><span class="s0">(</span><span class="s1">o</span><span class="s0">.</span><span class="s1">iconText</span><span class="s0">);</span><span class="s4">const </span><span class="s1">n</span><span class="s0">=</span><span class="s1">parseInt</span><span class="s0">(</span><span class="s1">window</span><span class="s0">.</span><span class="s1">getComputedStyle</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">node</span><span class="s0">(),</span><span class="s4">null</span><span class="s0">).</span><span class="s1">getPropertyValue</span><span class="s0">(</span><span class="s2">&quot;font-size&quot;</span><span class="s0">).</span><span class="s1">replace</span><span class="s0">(</span><span class="s5">/\D/g</span><span class="s0">,</span><span class="s2">&quot;&quot;</span><span class="s0">))??</span><span class="s3">16</span><span class="s0">;</span><span class="s1">r</span><span class="s0">.</span><span class="s1">attr</span><span class="s0">(</span><span class="s2">&quot;style&quot;</span><span class="s0">,</span><span class="s2">`-webkit-line-clamp: </span><span class="s1">$</span><span class="s0">{</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">floor</span><span class="s0">((</span><span class="s1">a</span><span class="s0">-</span><span class="s3">2</span><span class="s0">)/</span><span class="s1">n</span><span class="s0">)}</span><span class="s2">;`</span><span class="s0">)}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">s</span><span class="s0">.</span><span class="s1">append</span><span class="s0">(</span><span class="s2">&quot;path&quot;</span><span class="s0">).</span><span class="s1">attr</span><span class="s0">(</span><span class="s2">&quot;class&quot;</span><span class="s0">,</span><span class="s2">&quot;node-bkg&quot;</span><span class="s0">).</span><span class="s1">attr</span><span class="s0">(</span><span class="s2">&quot;id&quot;</span><span class="s0">,</span><span class="s2">&quot;node-&quot;</span><span class="s0">+</span><span class="s1">o</span><span class="s0">.</span><span class="s1">id</span><span class="s0">).</span><span class="s1">attr</span><span class="s0">(</span><span class="s2">&quot;d&quot;</span><span class="s0">,</span><span class="s2">`M0 </span><span class="s1">$</span><span class="s0">{</span><span class="s1">a</span><span class="s0">} </span><span class="s2">v</span><span class="s1">$</span><span class="s0">{-</span><span class="s1">a</span><span class="s0">} </span><span class="s2">q0,-5 5,-5 h</span><span class="s1">$</span><span class="s0">{</span><span class="s1">a</span><span class="s0">} </span><span class="s2">q5,0 5,5 v</span><span class="s1">$</span><span class="s0">{</span><span class="s1">a</span><span class="s0">} </span><span class="s2">H0 Z`</span><span class="s0">)}</span><span class="s1">r</span><span class="s0">.</span><span class="s1">attr</span><span class="s0">(</span><span class="s2">&quot;class&quot;</span><span class="s0">,</span><span class="s2">&quot;architecture-service&quot;</span><span class="s0">);</span><span class="s4">const</span><span class="s0">{</span><span class="s1">width</span><span class="s0">:</span><span class="s1">h</span><span class="s0">,</span><span class="s1">height</span><span class="s0">:</span><span class="s1">c</span><span class="s0">}=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">_groups</span><span class="s0">[</span><span class="s3">0</span><span class="s0">][</span><span class="s3">0</span><span class="s0">].</span><span class="s1">getBBox</span><span class="s0">();</span><span class="s1">o</span><span class="s0">.</span><span class="s1">width</span><span class="s0">=</span><span class="s1">h</span><span class="s0">;</span><span class="s1">o</span><span class="s0">.</span><span class="s1">height</span><span class="s0">=</span><span class="s1">c</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">setElementForId</span><span class="s0">(</span><span class="s1">o</span><span class="s0">.</span><span class="s1">id</span><span class="s0">,</span><span class="s1">r</span><span class="s0">)}</span><span class="s4">return </span><span class="s3">0</span><span class="s0">}),</span><span class="s2">&quot;drawServices&quot;</span><span class="s0">);</span><span class="s4">var </span><span class="s1">at</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)((</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s1">r</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s1">r</span><span class="s0">=&gt;{</span><span class="s4">const </span><span class="s1">i</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">append</span><span class="s0">(</span><span class="s2">&quot;g&quot;</span><span class="s0">);</span><span class="s4">const </span><span class="s1">n</span><span class="s0">=</span><span class="s1">K</span><span class="s0">(</span><span class="s2">&quot;iconSize&quot;</span><span class="s0">);</span><span class="s4">const </span><span class="s1">o</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">append</span><span class="s0">(</span><span class="s2">&quot;g&quot;</span><span class="s0">);</span><span class="s1">o</span><span class="s0">.</span><span class="s1">append</span><span class="s0">(</span><span class="s2">&quot;rect&quot;</span><span class="s0">).</span><span class="s1">attr</span><span class="s0">(</span><span class="s2">&quot;id&quot;</span><span class="s0">,</span><span class="s2">&quot;node-&quot;</span><span class="s0">+</span><span class="s1">r</span><span class="s0">.</span><span class="s1">id</span><span class="s0">).</span><span class="s1">attr</span><span class="s0">(</span><span class="s2">&quot;fill-opacity&quot;</span><span class="s0">,</span><span class="s2">&quot;0&quot;</span><span class="s0">).</span><span class="s1">attr</span><span class="s0">(</span><span class="s2">&quot;width&quot;</span><span class="s0">,</span><span class="s1">n</span><span class="s0">).</span><span class="s1">attr</span><span class="s0">(</span><span class="s2">&quot;height&quot;</span><span class="s0">,</span><span class="s1">n</span><span class="s0">);</span><span class="s1">i</span><span class="s0">.</span><span class="s1">attr</span><span class="s0">(</span><span class="s2">&quot;class&quot;</span><span class="s0">,</span><span class="s2">&quot;architecture-junction&quot;</span><span class="s0">);</span><span class="s4">const</span><span class="s0">{</span><span class="s1">width</span><span class="s0">:</span><span class="s1">a</span><span class="s0">,</span><span class="s1">height</span><span class="s0">:</span><span class="s1">s</span><span class="s0">}=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">_groups</span><span class="s0">[</span><span class="s3">0</span><span class="s0">][</span><span class="s3">0</span><span class="s0">].</span><span class="s1">getBBox</span><span class="s0">();</span><span class="s1">i</span><span class="s0">.</span><span class="s1">width</span><span class="s0">=</span><span class="s1">a</span><span class="s0">;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">height</span><span class="s0">=</span><span class="s1">s</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">setElementForId</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">id</span><span class="s0">,</span><span class="s1">i</span><span class="s0">)}))}),</span><span class="s2">&quot;drawJunctions&quot;</span><span class="s0">);(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">i</span><span class="s0">.</span><span class="s1">pC</span><span class="s0">)([{</span><span class="s1">name</span><span class="s0">:</span><span class="s1">rt</span><span class="s0">.</span><span class="s1">prefix</span><span class="s0">,</span><span class="s1">icons</span><span class="s0">:</span><span class="s1">rt</span><span class="s0">}]);</span><span class="s1">d</span><span class="s0">.</span><span class="s1">A</span><span class="s0">.</span><span class="s1">use</span><span class="s0">(</span><span class="s1">g</span><span class="s0">());</span><span class="s4">function </span><span class="s1">st</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s1">t</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s1">t</span><span class="s0">=&gt;{</span><span class="s1">e</span><span class="s0">.</span><span class="s1">add</span><span class="s0">({</span><span class="s1">group</span><span class="s0">:</span><span class="s2">&quot;nodes&quot;</span><span class="s0">,</span><span class="s1">data</span><span class="s0">:{</span><span class="s1">type</span><span class="s0">:</span><span class="s2">&quot;service&quot;</span><span class="s0">,</span><span class="s1">id</span><span class="s0">:</span><span class="s1">t</span><span class="s0">.</span><span class="s1">id</span><span class="s0">,</span><span class="s1">icon</span><span class="s0">:</span><span class="s1">t</span><span class="s0">.</span><span class="s1">icon</span><span class="s0">,</span><span class="s1">label</span><span class="s0">:</span><span class="s1">t</span><span class="s0">.</span><span class="s1">title</span><span class="s0">,</span><span class="s1">parent</span><span class="s0">:</span><span class="s1">t</span><span class="s0">.</span><span class="s1">in</span><span class="s0">,</span><span class="s1">width</span><span class="s0">:</span><span class="s1">K</span><span class="s0">(</span><span class="s2">&quot;iconSize&quot;</span><span class="s0">),</span><span class="s1">height</span><span class="s0">:</span><span class="s1">K</span><span class="s0">(</span><span class="s2">&quot;iconSize&quot;</span><span class="s0">)},</span><span class="s1">classes</span><span class="s0">:</span><span class="s2">&quot;node-service&quot;</span><span class="s0">})}))}(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)(</span><span class="s1">st</span><span class="s0">,</span><span class="s2">&quot;addServices&quot;</span><span class="s0">);</span><span class="s4">function </span><span class="s1">ht</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s1">t</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s1">t</span><span class="s0">=&gt;{</span><span class="s1">e</span><span class="s0">.</span><span class="s1">add</span><span class="s0">({</span><span class="s1">group</span><span class="s0">:</span><span class="s2">&quot;nodes&quot;</span><span class="s0">,</span><span class="s1">data</span><span class="s0">:{</span><span class="s1">type</span><span class="s0">:</span><span class="s2">&quot;junction&quot;</span><span class="s0">,</span><span class="s1">id</span><span class="s0">:</span><span class="s1">t</span><span class="s0">.</span><span class="s1">id</span><span class="s0">,</span><span class="s1">parent</span><span class="s0">:</span><span class="s1">t</span><span class="s0">.</span><span class="s1">in</span><span class="s0">,</span><span class="s1">width</span><span class="s0">:</span><span class="s1">K</span><span class="s0">(</span><span class="s2">&quot;iconSize&quot;</span><span class="s0">),</span><span class="s1">height</span><span class="s0">:</span><span class="s1">K</span><span class="s0">(</span><span class="s2">&quot;iconSize&quot;</span><span class="s0">)},</span><span class="s1">classes</span><span class="s0">:</span><span class="s2">&quot;node-junction&quot;</span><span class="s0">})}))}(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)(</span><span class="s1">ht</span><span class="s0">,</span><span class="s2">&quot;addJunctions&quot;</span><span class="s0">);</span><span class="s4">function </span><span class="s1">lt</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s1">e</span><span class="s0">.</span><span class="s1">nodes</span><span class="s0">().</span><span class="s1">map</span><span class="s0">((</span><span class="s1">e</span><span class="s0">=&gt;{</span><span class="s4">const </span><span class="s1">r</span><span class="s0">=</span><span class="s1">R</span><span class="s0">(</span><span class="s1">e</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">type</span><span class="s0">===</span><span class="s2">&quot;group&quot;</span><span class="s0">){</span><span class="s4">return</span><span class="s0">}</span><span class="s1">r</span><span class="s0">.</span><span class="s1">x</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">position</span><span class="s0">().</span><span class="s1">x</span><span class="s0">;</span><span class="s1">r</span><span class="s0">.</span><span class="s1">y</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">position</span><span class="s0">().</span><span class="s1">y</span><span class="s0">;</span><span class="s4">const </span><span class="s1">i</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getElementById</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">id</span><span class="s0">);</span><span class="s1">i</span><span class="s0">.</span><span class="s1">attr</span><span class="s0">(</span><span class="s2">&quot;transform&quot;</span><span class="s0">,</span><span class="s2">&quot;translate(&quot;</span><span class="s0">+(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">x</span><span class="s0">||</span><span class="s3">0</span><span class="s0">)+</span><span class="s2">&quot;,&quot;</span><span class="s0">+(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">y</span><span class="s0">||</span><span class="s3">0</span><span class="s0">)+</span><span class="s2">&quot;)&quot;</span><span class="s0">)}))}(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)(</span><span class="s1">lt</span><span class="s0">,</span><span class="s2">&quot;positionNodes&quot;</span><span class="s0">);</span><span class="s4">function </span><span class="s1">ct</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s1">t</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s1">t</span><span class="s0">=&gt;{</span><span class="s1">e</span><span class="s0">.</span><span class="s1">add</span><span class="s0">({</span><span class="s1">group</span><span class="s0">:</span><span class="s2">&quot;nodes&quot;</span><span class="s0">,</span><span class="s1">data</span><span class="s0">:{</span><span class="s1">type</span><span class="s0">:</span><span class="s2">&quot;group&quot;</span><span class="s0">,</span><span class="s1">id</span><span class="s0">:</span><span class="s1">t</span><span class="s0">.</span><span class="s1">id</span><span class="s0">,</span><span class="s1">icon</span><span class="s0">:</span><span class="s1">t</span><span class="s0">.</span><span class="s1">icon</span><span class="s0">,</span><span class="s1">label</span><span class="s0">:</span><span class="s1">t</span><span class="s0">.</span><span class="s1">title</span><span class="s0">,</span><span class="s1">parent</span><span class="s0">:</span><span class="s1">t</span><span class="s0">.</span><span class="s1">in</span><span class="s0">},</span><span class="s1">classes</span><span class="s0">:</span><span class="s2">&quot;node-group&quot;</span><span class="s0">})}))}(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)(</span><span class="s1">ct</span><span class="s0">,</span><span class="s2">&quot;addGroups&quot;</span><span class="s0">);</span><span class="s4">function </span><span class="s1">dt</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s1">t</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s1">t</span><span class="s0">=&gt;{</span><span class="s4">const</span><span class="s0">{</span><span class="s1">lhsId</span><span class="s0">:</span><span class="s1">r</span><span class="s0">,</span><span class="s1">rhsId</span><span class="s0">:</span><span class="s1">i</span><span class="s0">,</span><span class="s1">lhsInto</span><span class="s0">:</span><span class="s1">n</span><span class="s0">,</span><span class="s1">lhsGroup</span><span class="s0">:</span><span class="s1">o</span><span class="s0">,</span><span class="s1">rhsInto</span><span class="s0">:</span><span class="s1">a</span><span class="s0">,</span><span class="s1">lhsDir</span><span class="s0">:</span><span class="s1">s</span><span class="s0">,</span><span class="s1">rhsDir</span><span class="s0">:</span><span class="s1">h</span><span class="s0">,</span><span class="s1">rhsGroup</span><span class="s0">:</span><span class="s1">l</span><span class="s0">,</span><span class="s1">title</span><span class="s0">:</span><span class="s1">c</span><span class="s0">}=</span><span class="s1">t</span><span class="s0">;</span><span class="s4">const </span><span class="s1">d</span><span class="s0">=</span><span class="s1">A</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">lhsDir</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rhsDir</span><span class="s0">)?</span><span class="s2">&quot;segments&quot;</span><span class="s0">:</span><span class="s2">&quot;straight&quot;</span><span class="s0">;</span><span class="s4">const </span><span class="s1">f</span><span class="s0">={</span><span class="s1">id</span><span class="s0">:</span><span class="s2">`</span><span class="s1">$</span><span class="s0">{</span><span class="s1">r</span><span class="s0">}</span><span class="s2">-</span><span class="s1">$</span><span class="s0">{</span><span class="s1">i</span><span class="s0">}</span><span class="s2">`</span><span class="s0">,</span><span class="s1">label</span><span class="s0">:</span><span class="s1">c</span><span class="s0">,</span><span class="s1">source</span><span class="s0">:</span><span class="s1">r</span><span class="s0">,</span><span class="s1">sourceDir</span><span class="s0">:</span><span class="s1">s</span><span class="s0">,</span><span class="s1">sourceArrow</span><span class="s0">:</span><span class="s1">n</span><span class="s0">,</span><span class="s1">sourceGroup</span><span class="s0">:</span><span class="s1">o</span><span class="s0">,</span><span class="s1">sourceEndpoint</span><span class="s0">:</span><span class="s1">s</span><span class="s0">===</span><span class="s2">&quot;L&quot;</span><span class="s0">?</span><span class="s2">&quot;0 50%&quot;</span><span class="s0">:</span><span class="s1">s</span><span class="s0">===</span><span class="s2">&quot;R&quot;</span><span class="s0">?</span><span class="s2">&quot;100% 50%&quot;</span><span class="s0">:</span><span class="s1">s</span><span class="s0">===</span><span class="s2">&quot;T&quot;</span><span class="s0">?</span><span class="s2">&quot;50% 0&quot;</span><span class="s0">:</span><span class="s2">&quot;50% 100%&quot;</span><span class="s0">,</span><span class="s1">target</span><span class="s0">:</span><span class="s1">i</span><span class="s0">,</span><span class="s1">targetDir</span><span class="s0">:</span><span class="s1">h</span><span class="s0">,</span><span class="s1">targetArrow</span><span class="s0">:</span><span class="s1">a</span><span class="s0">,</span><span class="s1">targetGroup</span><span class="s0">:</span><span class="s1">l</span><span class="s0">,</span><span class="s1">targetEndpoint</span><span class="s0">:</span><span class="s1">h</span><span class="s0">===</span><span class="s2">&quot;L&quot;</span><span class="s0">?</span><span class="s2">&quot;0 50%&quot;</span><span class="s0">:</span><span class="s1">h</span><span class="s0">===</span><span class="s2">&quot;R&quot;</span><span class="s0">?</span><span class="s2">&quot;100% 50%&quot;</span><span class="s0">:</span><span class="s1">h</span><span class="s0">===</span><span class="s2">&quot;T&quot;</span><span class="s0">?</span><span class="s2">&quot;50% 0&quot;</span><span class="s0">:</span><span class="s2">&quot;50% 100%&quot;</span><span class="s0">};</span><span class="s1">e</span><span class="s0">.</span><span class="s1">add</span><span class="s0">({</span><span class="s1">group</span><span class="s0">:</span><span class="s2">&quot;edges&quot;</span><span class="s0">,</span><span class="s1">data</span><span class="s0">:</span><span class="s1">f</span><span class="s0">,</span><span class="s1">classes</span><span class="s0">:</span><span class="s1">d</span><span class="s0">})}))}(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)(</span><span class="s1">dt</span><span class="s0">,</span><span class="s2">&quot;addEdges&quot;</span><span class="s0">);</span><span class="s4">function </span><span class="s1">ft</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s4">const </span><span class="s1">i</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)(((</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">)=&gt;</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">entries</span><span class="s0">(</span><span class="s1">t</span><span class="s0">).</span><span class="s1">reduce</span><span class="s0">(((</span><span class="s1">t</span><span class="s0">,[</span><span class="s1">i</span><span class="s0">,</span><span class="s1">n</span><span class="s0">])=&gt;{</span><span class="s4">let </span><span class="s1">o</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">const </span><span class="s1">a</span><span class="s0">=</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">entries</span><span class="s0">(</span><span class="s1">n</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">a</span><span class="s0">.</span><span class="s1">length</span><span class="s0">===</span><span class="s3">1</span><span class="s0">){</span><span class="s1">t</span><span class="s0">[</span><span class="s1">i</span><span class="s0">]=</span><span class="s1">a</span><span class="s0">[</span><span class="s3">0</span><span class="s0">][</span><span class="s3">1</span><span class="s0">];</span><span class="s4">return </span><span class="s1">t</span><span class="s0">}</span><span class="s4">for</span><span class="s0">(</span><span class="s4">let </span><span class="s1">s</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">s</span><span class="s0">&lt;</span><span class="s1">a</span><span class="s0">.</span><span class="s1">length</span><span class="s0">-</span><span class="s3">1</span><span class="s0">;</span><span class="s1">s</span><span class="s0">++){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">let </span><span class="s1">n</span><span class="s0">=</span><span class="s1">s</span><span class="s0">+</span><span class="s3">1</span><span class="s0">;</span><span class="s1">n</span><span class="s0">&lt;</span><span class="s1">a</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">n</span><span class="s0">++){</span><span class="s4">const</span><span class="s0">[</span><span class="s1">h</span><span class="s0">,</span><span class="s1">l</span><span class="s0">]=</span><span class="s1">a</span><span class="s0">[</span><span class="s1">s</span><span class="s0">];</span><span class="s4">const</span><span class="s0">[</span><span class="s1">c</span><span class="s0">,</span><span class="s1">d</span><span class="s0">]=</span><span class="s1">a</span><span class="s0">[</span><span class="s1">n</span><span class="s0">];</span><span class="s4">const </span><span class="s1">f</span><span class="s0">=</span><span class="s1">r</span><span class="s0">[</span><span class="s1">h</span><span class="s0">]?.[</span><span class="s1">c</span><span class="s0">];</span><span class="s4">if</span><span class="s0">(</span><span class="s1">f</span><span class="s0">===</span><span class="s1">e</span><span class="s0">){</span><span class="s1">t</span><span class="s0">[</span><span class="s1">i</span><span class="s0">]??=[];</span><span class="s1">t</span><span class="s0">[</span><span class="s1">i</span><span class="s0">]=[</span><span class="s1">...t</span><span class="s0">[</span><span class="s1">i</span><span class="s0">],</span><span class="s1">...l</span><span class="s0">,</span><span class="s1">...d</span><span class="s0">]}</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">h</span><span class="s0">===</span><span class="s2">&quot;default&quot;</span><span class="s0">||</span><span class="s1">c</span><span class="s0">===</span><span class="s2">&quot;default&quot;</span><span class="s0">){</span><span class="s1">t</span><span class="s0">[</span><span class="s1">i</span><span class="s0">]??=[];</span><span class="s1">t</span><span class="s0">[</span><span class="s1">i</span><span class="s0">]=[</span><span class="s1">...t</span><span class="s0">[</span><span class="s1">i</span><span class="s0">],</span><span class="s1">...l</span><span class="s0">,</span><span class="s1">...d</span><span class="s0">]}</span><span class="s4">else</span><span class="s0">{</span><span class="s4">const </span><span class="s1">e</span><span class="s0">=</span><span class="s2">`</span><span class="s1">$</span><span class="s0">{</span><span class="s1">i</span><span class="s0">}</span><span class="s2">-</span><span class="s1">$</span><span class="s0">{</span><span class="s1">o</span><span class="s0">++}</span><span class="s2">`</span><span class="s0">;</span><span class="s1">t</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]=</span><span class="s1">l</span><span class="s0">;</span><span class="s4">const </span><span class="s1">r</span><span class="s0">=</span><span class="s2">`</span><span class="s1">$</span><span class="s0">{</span><span class="s1">i</span><span class="s0">}</span><span class="s2">-</span><span class="s1">$</span><span class="s0">{</span><span class="s1">o</span><span class="s0">++}</span><span class="s2">`</span><span class="s0">;</span><span class="s1">t</span><span class="s0">[</span><span class="s1">r</span><span class="s0">]=</span><span class="s1">d</span><span class="s0">}}}</span><span class="s4">return </span><span class="s1">t</span><span class="s0">}),{})),</span><span class="s2">&quot;flattenAlignments&quot;</span><span class="s0">);</span><span class="s4">const </span><span class="s1">n</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">map</span><span class="s0">((</span><span class="s1">e</span><span class="s0">=&gt;{</span><span class="s4">const </span><span class="s1">r</span><span class="s0">={};</span><span class="s4">const </span><span class="s1">n</span><span class="s0">={};</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">entries</span><span class="s0">(</span><span class="s1">e</span><span class="s0">).</span><span class="s1">forEach</span><span class="s0">((([</span><span class="s1">e</span><span class="s0">,[</span><span class="s1">i</span><span class="s0">,</span><span class="s1">o</span><span class="s0">]])=&gt;{</span><span class="s4">const </span><span class="s1">a</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getNode</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)?.</span><span class="s1">in</span><span class="s0">??</span><span class="s2">&quot;default&quot;</span><span class="s0">;</span><span class="s1">r</span><span class="s0">[</span><span class="s1">o</span><span class="s0">]??={};</span><span class="s1">r</span><span class="s0">[</span><span class="s1">o</span><span class="s0">][</span><span class="s1">a</span><span class="s0">]??=[];</span><span class="s1">r</span><span class="s0">[</span><span class="s1">o</span><span class="s0">][</span><span class="s1">a</span><span class="s0">].</span><span class="s1">push</span><span class="s0">(</span><span class="s1">e</span><span class="s0">);</span><span class="s1">n</span><span class="s0">[</span><span class="s1">i</span><span class="s0">]??={};</span><span class="s1">n</span><span class="s0">[</span><span class="s1">i</span><span class="s0">][</span><span class="s1">a</span><span class="s0">]??=[];</span><span class="s1">n</span><span class="s0">[</span><span class="s1">i</span><span class="s0">][</span><span class="s1">a</span><span class="s0">].</span><span class="s1">push</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)}));</span><span class="s4">return</span><span class="s0">{</span><span class="s1">horiz</span><span class="s0">:</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">values</span><span class="s0">(</span><span class="s1">i</span><span class="s0">(</span><span class="s1">r</span><span class="s0">,</span><span class="s2">&quot;horizontal&quot;</span><span class="s0">)).</span><span class="s1">filter</span><span class="s0">((</span><span class="s1">t</span><span class="s0">=&gt;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">length</span><span class="s0">&gt;</span><span class="s3">1</span><span class="s0">)),</span><span class="s1">vert</span><span class="s0">:</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">values</span><span class="s0">(</span><span class="s1">i</span><span class="s0">(</span><span class="s1">n</span><span class="s0">,</span><span class="s2">&quot;vertical&quot;</span><span class="s0">)).</span><span class="s1">filter</span><span class="s0">((</span><span class="s1">t</span><span class="s0">=&gt;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">length</span><span class="s0">&gt;</span><span class="s3">1</span><span class="s0">))}}));</span><span class="s4">const</span><span class="s0">[</span><span class="s1">o</span><span class="s0">,</span><span class="s1">a</span><span class="s0">]=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">reduce</span><span class="s0">((([</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">],{</span><span class="s1">horiz</span><span class="s0">:</span><span class="s1">r</span><span class="s0">,</span><span class="s1">vert</span><span class="s0">:</span><span class="s1">i</span><span class="s0">})=&gt;[[</span><span class="s1">...t</span><span class="s0">,</span><span class="s1">...r</span><span class="s0">],[</span><span class="s1">...e</span><span class="s0">,</span><span class="s1">...i</span><span class="s0">]]),[[],[]]);</span><span class="s4">return</span><span class="s0">{</span><span class="s1">horizontal</span><span class="s0">:</span><span class="s1">o</span><span class="s0">,</span><span class="s1">vertical</span><span class="s0">:</span><span class="s1">a</span><span class="s0">}}(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)(</span><span class="s1">ft</span><span class="s0">,</span><span class="s2">&quot;getAlignments&quot;</span><span class="s0">);</span><span class="s4">function </span><span class="s1">gt</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">const </span><span class="s1">e</span><span class="s0">=[];</span><span class="s4">const </span><span class="s1">r</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)((</span><span class="s1">t</span><span class="s0">=&gt;</span><span class="s2">`</span><span class="s1">$</span><span class="s0">{</span><span class="s1">t</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]}</span><span class="s2">,</span><span class="s1">$</span><span class="s0">{</span><span class="s1">t</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]}</span><span class="s2">`</span><span class="s0">),</span><span class="s2">&quot;posToStr&quot;</span><span class="s0">);</span><span class="s4">const </span><span class="s1">i</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)((</span><span class="s1">t</span><span class="s0">=&gt;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">split</span><span class="s0">(</span><span class="s2">&quot;,&quot;</span><span class="s0">).</span><span class="s1">map</span><span class="s0">((</span><span class="s1">t</span><span class="s0">=&gt;</span><span class="s1">parseInt</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)))),</span><span class="s2">&quot;strToPos&quot;</span><span class="s0">);</span><span class="s1">t</span><span class="s0">.</span><span class="s1">forEach</span><span class="s0">((</span><span class="s1">t</span><span class="s0">=&gt;{</span><span class="s4">const </span><span class="s1">n</span><span class="s0">=</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">fromEntries</span><span class="s0">(</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">entries</span><span class="s0">(</span><span class="s1">t</span><span class="s0">).</span><span class="s1">map</span><span class="s0">((([</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">])=&gt;[</span><span class="s1">r</span><span class="s0">(</span><span class="s1">e</span><span class="s0">),</span><span class="s1">t</span><span class="s0">])));</span><span class="s4">const </span><span class="s1">o</span><span class="s0">=[</span><span class="s1">r</span><span class="s0">([</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">])];</span><span class="s4">const </span><span class="s1">a</span><span class="s0">={};</span><span class="s4">const </span><span class="s1">s</span><span class="s0">={</span><span class="s1">L</span><span class="s0">:[-</span><span class="s3">1</span><span class="s0">,</span><span class="s3">0</span><span class="s0">],</span><span class="s1">R</span><span class="s0">:[</span><span class="s3">1</span><span class="s0">,</span><span class="s3">0</span><span class="s0">],</span><span class="s1">T</span><span class="s0">:[</span><span class="s3">0</span><span class="s0">,</span><span class="s3">1</span><span class="s0">],</span><span class="s1">B</span><span class="s0">:[</span><span class="s3">0</span><span class="s0">,-</span><span class="s3">1</span><span class="s0">]};</span><span class="s4">while</span><span class="s0">(</span><span class="s1">o</span><span class="s0">.</span><span class="s1">length</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">){</span><span class="s4">const </span><span class="s1">t</span><span class="s0">=</span><span class="s1">o</span><span class="s0">.</span><span class="s1">shift</span><span class="s0">();</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s1">a</span><span class="s0">[</span><span class="s1">t</span><span class="s0">]=</span><span class="s3">1</span><span class="s0">;</span><span class="s4">const </span><span class="s1">h</span><span class="s0">=</span><span class="s1">n</span><span class="s0">[</span><span class="s1">t</span><span class="s0">];</span><span class="s4">if</span><span class="s0">(</span><span class="s1">h</span><span class="s0">){</span><span class="s4">const </span><span class="s1">l</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s1">t</span><span class="s0">);</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">entries</span><span class="s0">(</span><span class="s1">s</span><span class="s0">).</span><span class="s1">forEach</span><span class="s0">((([</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">])=&gt;{</span><span class="s4">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">r</span><span class="s0">([</span><span class="s1">l</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]+</span><span class="s1">i</span><span class="s0">[</span><span class="s3">0</span><span class="s0">],</span><span class="s1">l</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]+</span><span class="s1">i</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]]);</span><span class="s4">const </span><span class="s1">c</span><span class="s0">=</span><span class="s1">n</span><span class="s0">[</span><span class="s1">s</span><span class="s0">];</span><span class="s4">if</span><span class="s0">(</span><span class="s1">c</span><span class="s0">&amp;&amp;!</span><span class="s1">a</span><span class="s0">[</span><span class="s1">s</span><span class="s0">]){</span><span class="s1">o</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">s</span><span class="s0">);</span><span class="s1">e</span><span class="s0">.</span><span class="s1">push</span><span class="s0">({[</span><span class="s1">p</span><span class="s0">[</span><span class="s1">t</span><span class="s0">]]:</span><span class="s1">c</span><span class="s0">,[</span><span class="s1">p</span><span class="s0">[</span><span class="s1">m</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)]]:</span><span class="s1">h</span><span class="s0">,</span><span class="s1">gap</span><span class="s0">:</span><span class="s3">1.5</span><span class="s0">*</span><span class="s1">K</span><span class="s0">(</span><span class="s2">&quot;iconSize&quot;</span><span class="s0">)})}}))}}}}));</span><span class="s4">return </span><span class="s1">e</span><span class="s0">}(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)(</span><span class="s1">gt</span><span class="s0">,</span><span class="s2">&quot;getRelativeConstraints&quot;</span><span class="s0">);</span><span class="s4">function </span><span class="s1">ut</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,{</span><span class="s1">spatialMaps</span><span class="s0">:</span><span class="s1">o</span><span class="s0">,</span><span class="s1">groupAlignments</span><span class="s0">:</span><span class="s1">a</span><span class="s0">}){</span><span class="s4">return new </span><span class="s1">Promise</span><span class="s0">((</span><span class="s1">s</span><span class="s0">=&gt;{</span><span class="s4">const </span><span class="s1">h</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">u</span><span class="s0">.</span><span class="s1">Ltv</span><span class="s0">)(</span><span class="s2">&quot;body&quot;</span><span class="s0">).</span><span class="s1">append</span><span class="s0">(</span><span class="s2">&quot;div&quot;</span><span class="s0">).</span><span class="s1">attr</span><span class="s0">(</span><span class="s2">&quot;id&quot;</span><span class="s0">,</span><span class="s2">&quot;cy&quot;</span><span class="s0">).</span><span class="s1">attr</span><span class="s0">(</span><span class="s2">&quot;style&quot;</span><span class="s0">,</span><span class="s2">&quot;display:none&quot;</span><span class="s0">);</span><span class="s4">const </span><span class="s1">c</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">d</span><span class="s0">.</span><span class="s1">A</span><span class="s0">)({</span><span class="s1">container</span><span class="s0">:</span><span class="s1">document</span><span class="s0">.</span><span class="s1">getElementById</span><span class="s0">(</span><span class="s2">&quot;cy&quot;</span><span class="s0">),</span><span class="s1">style</span><span class="s0">:[{</span><span class="s1">selector</span><span class="s0">:</span><span class="s2">&quot;edge&quot;</span><span class="s0">,</span><span class="s1">style</span><span class="s0">:{</span><span class="s2">&quot;curve-style&quot;</span><span class="s0">:</span><span class="s2">&quot;straight&quot;</span><span class="s0">,</span><span class="s1">label</span><span class="s0">:</span><span class="s2">&quot;data(label)&quot;</span><span class="s0">,</span><span class="s2">&quot;source-endpoint&quot;</span><span class="s0">:</span><span class="s2">&quot;data(sourceEndpoint)&quot;</span><span class="s0">,</span><span class="s2">&quot;target-endpoint&quot;</span><span class="s0">:</span><span class="s2">&quot;data(targetEndpoint)&quot;</span><span class="s0">}},{</span><span class="s1">selector</span><span class="s0">:</span><span class="s2">&quot;edge.segments&quot;</span><span class="s0">,</span><span class="s1">style</span><span class="s0">:{</span><span class="s2">&quot;curve-style&quot;</span><span class="s0">:</span><span class="s2">&quot;segments&quot;</span><span class="s0">,</span><span class="s2">&quot;segment-weights&quot;</span><span class="s0">:</span><span class="s2">&quot;0&quot;</span><span class="s0">,</span><span class="s2">&quot;segment-distances&quot;</span><span class="s0">:[</span><span class="s3">.5</span><span class="s0">],</span><span class="s2">&quot;edge-distances&quot;</span><span class="s0">:</span><span class="s2">&quot;endpoints&quot;</span><span class="s0">,</span><span class="s2">&quot;source-endpoint&quot;</span><span class="s0">:</span><span class="s2">&quot;data(sourceEndpoint)&quot;</span><span class="s0">,</span><span class="s2">&quot;target-endpoint&quot;</span><span class="s0">:</span><span class="s2">&quot;data(targetEndpoint)&quot;</span><span class="s0">}},{</span><span class="s1">selector</span><span class="s0">:</span><span class="s2">&quot;node&quot;</span><span class="s0">,</span><span class="s1">style</span><span class="s0">:{</span><span class="s2">&quot;compound-sizing-wrt-labels&quot;</span><span class="s0">:</span><span class="s2">&quot;include&quot;</span><span class="s0">}},{</span><span class="s1">selector</span><span class="s0">:</span><span class="s2">&quot;node[label]&quot;</span><span class="s0">,</span><span class="s1">style</span><span class="s0">:{</span><span class="s2">&quot;text-valign&quot;</span><span class="s0">:</span><span class="s2">&quot;bottom&quot;</span><span class="s0">,</span><span class="s2">&quot;text-halign&quot;</span><span class="s0">:</span><span class="s2">&quot;center&quot;</span><span class="s0">,</span><span class="s2">&quot;font-size&quot;</span><span class="s0">:</span><span class="s2">`</span><span class="s1">$</span><span class="s0">{</span><span class="s1">K</span><span class="s0">(</span><span class="s2">&quot;fontSize&quot;</span><span class="s0">)}</span><span class="s2">px`</span><span class="s0">}},{</span><span class="s1">selector</span><span class="s0">:</span><span class="s2">&quot;.node-service&quot;</span><span class="s0">,</span><span class="s1">style</span><span class="s0">:{</span><span class="s1">label</span><span class="s0">:</span><span class="s2">&quot;data(label)&quot;</span><span class="s0">,</span><span class="s1">width</span><span class="s0">:</span><span class="s2">&quot;data(width)&quot;</span><span class="s0">,</span><span class="s1">height</span><span class="s0">:</span><span class="s2">&quot;data(height)&quot;</span><span class="s0">}},{</span><span class="s1">selector</span><span class="s0">:</span><span class="s2">&quot;.node-junction&quot;</span><span class="s0">,</span><span class="s1">style</span><span class="s0">:{</span><span class="s1">width</span><span class="s0">:</span><span class="s2">&quot;data(width)&quot;</span><span class="s0">,</span><span class="s1">height</span><span class="s0">:</span><span class="s2">&quot;data(height)&quot;</span><span class="s0">}},{</span><span class="s1">selector</span><span class="s0">:</span><span class="s2">&quot;.node-group&quot;</span><span class="s0">,</span><span class="s1">style</span><span class="s0">:{</span><span class="s1">padding</span><span class="s0">:</span><span class="s2">`</span><span class="s1">$</span><span class="s0">{</span><span class="s1">K</span><span class="s0">(</span><span class="s2">&quot;padding&quot;</span><span class="s0">)}</span><span class="s2">px`</span><span class="s0">}}]});</span><span class="s1">h</span><span class="s0">.</span><span class="s1">remove</span><span class="s0">();</span><span class="s1">ct</span><span class="s0">(</span><span class="s1">r</span><span class="s0">,</span><span class="s1">c</span><span class="s0">);</span><span class="s1">st</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">c</span><span class="s0">);</span><span class="s1">ht</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">c</span><span class="s0">);</span><span class="s1">dt</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">c</span><span class="s0">);</span><span class="s4">const </span><span class="s1">f</span><span class="s0">=</span><span class="s1">ft</span><span class="s0">(</span><span class="s1">n</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">a</span><span class="s0">);</span><span class="s4">const </span><span class="s1">g</span><span class="s0">=</span><span class="s1">gt</span><span class="s0">(</span><span class="s1">o</span><span class="s0">);</span><span class="s4">const </span><span class="s1">p</span><span class="s0">=</span><span class="s1">c</span><span class="s0">.</span><span class="s1">layout</span><span class="s0">({</span><span class="s1">name</span><span class="s0">:</span><span class="s2">&quot;fcose&quot;</span><span class="s0">,</span><span class="s1">quality</span><span class="s0">:</span><span class="s2">&quot;proof&quot;</span><span class="s0">,</span><span class="s1">styleEnabled</span><span class="s0">:</span><span class="s4">false</span><span class="s0">,</span><span class="s1">animate</span><span class="s0">:</span><span class="s4">false</span><span class="s0">,</span><span class="s1">nodeDimensionsIncludeLabels</span><span class="s0">:</span><span class="s4">false</span><span class="s0">,</span><span class="s1">idealEdgeLength</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">const</span><span class="s0">[</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">]=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">connectedNodes</span><span class="s0">();</span><span class="s4">const</span><span class="s0">{</span><span class="s1">parent</span><span class="s0">:</span><span class="s1">i</span><span class="s0">}=</span><span class="s1">R</span><span class="s0">(</span><span class="s1">e</span><span class="s0">);</span><span class="s4">const</span><span class="s0">{</span><span class="s1">parent</span><span class="s0">:</span><span class="s1">n</span><span class="s0">}=</span><span class="s1">R</span><span class="s0">(</span><span class="s1">r</span><span class="s0">);</span><span class="s4">const </span><span class="s1">o</span><span class="s0">=</span><span class="s1">i</span><span class="s0">===</span><span class="s1">n</span><span class="s0">?</span><span class="s3">1.5</span><span class="s0">*</span><span class="s1">K</span><span class="s0">(</span><span class="s2">&quot;iconSize&quot;</span><span class="s0">):</span><span class="s3">.5</span><span class="s0">*</span><span class="s1">K</span><span class="s0">(</span><span class="s2">&quot;iconSize&quot;</span><span class="s0">);</span><span class="s4">return </span><span class="s1">o</span><span class="s0">},</span><span class="s1">edgeElasticity</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">const</span><span class="s0">[</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">]=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">connectedNodes</span><span class="s0">();</span><span class="s4">const</span><span class="s0">{</span><span class="s1">parent</span><span class="s0">:</span><span class="s1">i</span><span class="s0">}=</span><span class="s1">R</span><span class="s0">(</span><span class="s1">e</span><span class="s0">);</span><span class="s4">const</span><span class="s0">{</span><span class="s1">parent</span><span class="s0">:</span><span class="s1">n</span><span class="s0">}=</span><span class="s1">R</span><span class="s0">(</span><span class="s1">r</span><span class="s0">);</span><span class="s4">const </span><span class="s1">o</span><span class="s0">=</span><span class="s1">i</span><span class="s0">===</span><span class="s1">n</span><span class="s0">?</span><span class="s3">.45</span><span class="s0">:</span><span class="s3">.001</span><span class="s0">;</span><span class="s4">return </span><span class="s1">o</span><span class="s0">},</span><span class="s1">alignmentConstraint</span><span class="s0">:</span><span class="s1">f</span><span class="s0">,</span><span class="s1">relativePlacementConstraint</span><span class="s0">:</span><span class="s1">g</span><span class="s0">});</span><span class="s1">p</span><span class="s0">.</span><span class="s1">one</span><span class="s0">(</span><span class="s2">&quot;layoutstop&quot;</span><span class="s0">,(()=&gt;{</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s4">let </span><span class="s1">n</span><span class="s0">,</span><span class="s1">o</span><span class="s0">;</span><span class="s4">const</span><span class="s0">{</span><span class="s1">x</span><span class="s0">:</span><span class="s1">a</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s1">s</span><span class="s0">}=</span><span class="s1">t</span><span class="s0">;</span><span class="s4">const</span><span class="s0">{</span><span class="s1">x</span><span class="s0">:</span><span class="s1">h</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s1">l</span><span class="s0">}=</span><span class="s1">e</span><span class="s0">;</span><span class="s1">o</span><span class="s0">=(</span><span class="s1">i</span><span class="s0">-</span><span class="s1">s</span><span class="s0">+(</span><span class="s1">a</span><span class="s0">-</span><span class="s1">r</span><span class="s0">)*(</span><span class="s1">s</span><span class="s0">-</span><span class="s1">l</span><span class="s0">)/(</span><span class="s1">a</span><span class="s0">-</span><span class="s1">h</span><span class="s0">))/</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">sqrt</span><span class="s0">(</span><span class="s3">1</span><span class="s0">+</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">pow</span><span class="s0">((</span><span class="s1">s</span><span class="s0">-</span><span class="s1">l</span><span class="s0">)/(</span><span class="s1">a</span><span class="s0">-</span><span class="s1">h</span><span class="s0">),</span><span class="s3">2</span><span class="s0">));</span><span class="s1">n</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">sqrt</span><span class="s0">(</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">pow</span><span class="s0">(</span><span class="s1">i</span><span class="s0">-</span><span class="s1">s</span><span class="s0">,</span><span class="s3">2</span><span class="s0">)+</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">pow</span><span class="s0">(</span><span class="s1">r</span><span class="s0">-</span><span class="s1">a</span><span class="s0">,</span><span class="s3">2</span><span class="s0">)-</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">pow</span><span class="s0">(</span><span class="s1">o</span><span class="s0">,</span><span class="s3">2</span><span class="s0">));</span><span class="s4">const </span><span class="s1">c</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">sqrt</span><span class="s0">(</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">pow</span><span class="s0">(</span><span class="s1">h</span><span class="s0">-</span><span class="s1">a</span><span class="s0">,</span><span class="s3">2</span><span class="s0">)+</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">pow</span><span class="s0">(</span><span class="s1">l</span><span class="s0">-</span><span class="s1">s</span><span class="s0">,</span><span class="s3">2</span><span class="s0">));</span><span class="s1">n</span><span class="s0">=</span><span class="s1">n</span><span class="s0">/</span><span class="s1">c</span><span class="s0">;</span><span class="s4">let </span><span class="s1">d</span><span class="s0">=(</span><span class="s1">h</span><span class="s0">-</span><span class="s1">a</span><span class="s0">)*(</span><span class="s1">i</span><span class="s0">-</span><span class="s1">s</span><span class="s0">)-(</span><span class="s1">l</span><span class="s0">-</span><span class="s1">s</span><span class="s0">)*(</span><span class="s1">r</span><span class="s0">-</span><span class="s1">a</span><span class="s0">);</span><span class="s4">switch</span><span class="s0">(</span><span class="s4">true</span><span class="s0">){</span><span class="s4">case </span><span class="s1">d</span><span class="s0">&gt;=</span><span class="s3">0</span><span class="s0">:</span><span class="s1">d</span><span class="s0">=</span><span class="s3">1</span><span class="s0">;</span><span class="s4">break</span><span class="s0">;</span><span class="s4">case </span><span class="s1">d</span><span class="s0">&lt;</span><span class="s3">0</span><span class="s0">:</span><span class="s1">d</span><span class="s0">=-</span><span class="s3">1</span><span class="s0">;</span><span class="s4">break</span><span class="s0">}</span><span class="s4">let </span><span class="s1">f</span><span class="s0">=(</span><span class="s1">h</span><span class="s0">-</span><span class="s1">a</span><span class="s0">)*(</span><span class="s1">r</span><span class="s0">-</span><span class="s1">a</span><span class="s0">)+(</span><span class="s1">l</span><span class="s0">-</span><span class="s1">s</span><span class="s0">)*(</span><span class="s1">i</span><span class="s0">-</span><span class="s1">s</span><span class="s0">);</span><span class="s4">switch</span><span class="s0">(</span><span class="s4">true</span><span class="s0">){</span><span class="s4">case </span><span class="s1">f</span><span class="s0">&gt;=</span><span class="s3">0</span><span class="s0">:</span><span class="s1">f</span><span class="s0">=</span><span class="s3">1</span><span class="s0">;</span><span class="s4">break</span><span class="s0">;</span><span class="s4">case </span><span class="s1">f</span><span class="s0">&lt;</span><span class="s3">0</span><span class="s0">:</span><span class="s1">f</span><span class="s0">=-</span><span class="s3">1</span><span class="s0">;</span><span class="s4">break</span><span class="s0">}</span><span class="s1">o</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">abs</span><span class="s0">(</span><span class="s1">o</span><span class="s0">)*</span><span class="s1">d</span><span class="s0">;</span><span class="s1">n</span><span class="s0">=</span><span class="s1">n</span><span class="s0">*</span><span class="s1">f</span><span class="s0">;</span><span class="s4">return</span><span class="s0">{</span><span class="s1">distances</span><span class="s0">:</span><span class="s1">o</span><span class="s0">,</span><span class="s1">weights</span><span class="s0">:</span><span class="s1">n</span><span class="s0">}}(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;getSegmentWeights&quot;</span><span class="s0">);</span><span class="s1">c</span><span class="s0">.</span><span class="s1">startBatch</span><span class="s0">();</span><span class="s4">for</span><span class="s0">(</span><span class="s4">const </span><span class="s1">e of Object</span><span class="s0">.</span><span class="s1">values</span><span class="s0">(</span><span class="s1">c</span><span class="s0">.</span><span class="s1">edges</span><span class="s0">())){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">data</span><span class="s0">?.()){</span><span class="s4">const</span><span class="s0">{</span><span class="s1">x</span><span class="s0">:</span><span class="s1">r</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s1">i</span><span class="s0">}=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">source</span><span class="s0">().</span><span class="s1">position</span><span class="s0">();</span><span class="s4">const</span><span class="s0">{</span><span class="s1">x</span><span class="s0">:</span><span class="s1">n</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s1">o</span><span class="s0">}=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">target</span><span class="s0">().</span><span class="s1">position</span><span class="s0">();</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">!==</span><span class="s1">n</span><span class="s0">&amp;&amp;</span><span class="s1">i</span><span class="s0">!==</span><span class="s1">o</span><span class="s0">){</span><span class="s4">const </span><span class="s1">r</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">sourceEndpoint</span><span class="s0">();</span><span class="s4">const </span><span class="s1">i</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">targetEndpoint</span><span class="s0">();</span><span class="s4">const</span><span class="s0">{</span><span class="s1">sourceDir</span><span class="s0">:</span><span class="s1">n</span><span class="s0">}=</span><span class="s1">D</span><span class="s0">(</span><span class="s1">e</span><span class="s0">);</span><span class="s4">const</span><span class="s0">[</span><span class="s1">o</span><span class="s0">,</span><span class="s1">a</span><span class="s0">]=</span><span class="s1">T</span><span class="s0">(</span><span class="s1">n</span><span class="s0">)?[</span><span class="s1">r</span><span class="s0">.</span><span class="s1">x</span><span class="s0">,</span><span class="s1">i</span><span class="s0">.</span><span class="s1">y</span><span class="s0">]:[</span><span class="s1">i</span><span class="s0">.</span><span class="s1">x</span><span class="s0">,</span><span class="s1">r</span><span class="s0">.</span><span class="s1">y</span><span class="s0">];</span><span class="s4">const</span><span class="s0">{</span><span class="s1">weights</span><span class="s0">:</span><span class="s1">s</span><span class="s0">,</span><span class="s1">distances</span><span class="s0">:</span><span class="s1">h</span><span class="s0">}=</span><span class="s1">t</span><span class="s0">(</span><span class="s1">r</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">a</span><span class="s0">);</span><span class="s1">e</span><span class="s0">.</span><span class="s1">style</span><span class="s0">(</span><span class="s2">&quot;segment-distances&quot;</span><span class="s0">,</span><span class="s1">h</span><span class="s0">);</span><span class="s1">e</span><span class="s0">.</span><span class="s1">style</span><span class="s0">(</span><span class="s2">&quot;segment-weights&quot;</span><span class="s0">,</span><span class="s1">s</span><span class="s0">)}}}</span><span class="s1">c</span><span class="s0">.</span><span class="s1">endBatch</span><span class="s0">();</span><span class="s1">p</span><span class="s0">.</span><span class="s1">run</span><span class="s0">()}));</span><span class="s1">p</span><span class="s0">.</span><span class="s1">run</span><span class="s0">();</span><span class="s1">c</span><span class="s0">.</span><span class="s1">ready</span><span class="s0">((</span><span class="s1">t</span><span class="s0">=&gt;{</span><span class="s1">l</span><span class="s0">.</span><span class="s1">Rm</span><span class="s0">.</span><span class="s1">info</span><span class="s0">(</span><span class="s2">&quot;Ready&quot;</span><span class="s0">,</span><span class="s1">t</span><span class="s0">);</span><span class="s1">s</span><span class="s0">(</span><span class="s1">c</span><span class="s0">)}))}))}(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)(</span><span class="s1">ut</span><span class="s0">,</span><span class="s2">&quot;layoutArchitecture&quot;</span><span class="s0">);</span><span class="s4">var </span><span class="s1">pt</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)((</span><span class="s1">async</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">i</span><span class="s0">)=&gt;{</span><span class="s4">const </span><span class="s1">n</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">db</span><span class="s0">;</span><span class="s4">const </span><span class="s1">o</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">getServices</span><span class="s0">();</span><span class="s4">const </span><span class="s1">a</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">getJunctions</span><span class="s0">();</span><span class="s4">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">getGroups</span><span class="s0">();</span><span class="s4">const </span><span class="s1">c</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">getEdges</span><span class="s0">();</span><span class="s4">const </span><span class="s1">d</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">getDataStructures</span><span class="s0">();</span><span class="s4">const </span><span class="s1">f</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">h</span><span class="s0">.</span><span class="s1">D</span><span class="s0">)(</span><span class="s1">e</span><span class="s0">);</span><span class="s4">const </span><span class="s1">g</span><span class="s0">=</span><span class="s1">f</span><span class="s0">.</span><span class="s1">append</span><span class="s0">(</span><span class="s2">&quot;g&quot;</span><span class="s0">);</span><span class="s1">g</span><span class="s0">.</span><span class="s1">attr</span><span class="s0">(</span><span class="s2">&quot;class&quot;</span><span class="s0">,</span><span class="s2">&quot;architecture-edges&quot;</span><span class="s0">);</span><span class="s4">const </span><span class="s1">u</span><span class="s0">=</span><span class="s1">f</span><span class="s0">.</span><span class="s1">append</span><span class="s0">(</span><span class="s2">&quot;g&quot;</span><span class="s0">);</span><span class="s1">u</span><span class="s0">.</span><span class="s1">attr</span><span class="s0">(</span><span class="s2">&quot;class&quot;</span><span class="s0">,</span><span class="s2">&quot;architecture-services&quot;</span><span class="s0">);</span><span class="s4">const </span><span class="s1">p</span><span class="s0">=</span><span class="s1">f</span><span class="s0">.</span><span class="s1">append</span><span class="s0">(</span><span class="s2">&quot;g&quot;</span><span class="s0">);</span><span class="s1">p</span><span class="s0">.</span><span class="s1">attr</span><span class="s0">(</span><span class="s2">&quot;class&quot;</span><span class="s0">,</span><span class="s2">&quot;architecture-groups&quot;</span><span class="s0">);</span><span class="s4">await </span><span class="s1">ot</span><span class="s0">(</span><span class="s1">n</span><span class="s0">,</span><span class="s1">u</span><span class="s0">,</span><span class="s1">o</span><span class="s0">);</span><span class="s1">at</span><span class="s0">(</span><span class="s1">n</span><span class="s0">,</span><span class="s1">u</span><span class="s0">,</span><span class="s1">a</span><span class="s0">);</span><span class="s4">const </span><span class="s1">v</span><span class="s0">=</span><span class="s4">await </span><span class="s1">ut</span><span class="s0">(</span><span class="s1">o</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">c</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">d</span><span class="s0">);</span><span class="s4">await </span><span class="s1">it</span><span class="s0">(</span><span class="s1">g</span><span class="s0">,</span><span class="s1">v</span><span class="s0">);</span><span class="s4">await </span><span class="s1">nt</span><span class="s0">(</span><span class="s1">p</span><span class="s0">,</span><span class="s1">v</span><span class="s0">);</span><span class="s1">lt</span><span class="s0">(</span><span class="s1">n</span><span class="s0">,</span><span class="s1">v</span><span class="s0">);(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">ot</span><span class="s0">)(</span><span class="s4">void </span><span class="s3">0</span><span class="s0">,</span><span class="s1">f</span><span class="s0">,</span><span class="s1">K</span><span class="s0">(</span><span class="s2">&quot;padding&quot;</span><span class="s0">),</span><span class="s1">K</span><span class="s0">(</span><span class="s2">&quot;useMaxWidth&quot;</span><span class="s0">))}),</span><span class="s2">&quot;draw&quot;</span><span class="s0">);</span><span class="s4">var </span><span class="s1">vt</span><span class="s0">={</span><span class="s1">draw</span><span class="s0">:</span><span class="s1">pt</span><span class="s0">};</span><span class="s4">var </span><span class="s1">yt</span><span class="s0">={</span><span class="s1">parser</span><span class="s0">:</span><span class="s1">Q</span><span class="s0">,</span><span class="s1">db</span><span class="s0">:</span><span class="s1">$</span><span class="s0">,</span><span class="s1">renderer</span><span class="s0">:</span><span class="s1">vt</span><span class="s0">,</span><span class="s1">styles</span><span class="s0">:</span><span class="s1">tt</span><span class="s0">}},</span><span class="s3">19163</span><span class="s0">:(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">)=&gt;{</span><span class="s2">&quot;use strict&quot;</span><span class="s0">;</span><span class="s1">r</span><span class="s0">.</span><span class="s1">d</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,{</span><span class="s1">S</span><span class="s0">:()=&gt;</span><span class="s1">n</span><span class="s0">});</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">75905</span><span class="s0">);</span><span class="s4">function </span><span class="s1">n</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">accDescr</span><span class="s0">){</span><span class="s1">e</span><span class="s0">.</span><span class="s1">setAccDescription</span><span class="s0">?.(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">accDescr</span><span class="s0">)}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">accTitle</span><span class="s0">){</span><span class="s1">e</span><span class="s0">.</span><span class="s1">setAccTitle</span><span class="s0">?.(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">accTitle</span><span class="s0">)}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">title</span><span class="s0">){</span><span class="s1">e</span><span class="s0">.</span><span class="s1">setDiagramTitle</span><span class="s0">?.(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">title</span><span class="s0">)}}(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">i</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)(</span><span class="s1">n</span><span class="s0">,</span><span class="s2">&quot;populateCommonDb&quot;</span><span class="s0">)},</span><span class="s3">13249</span><span class="s0">:(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">)=&gt;{</span><span class="s2">&quot;use strict&quot;</span><span class="s0">;</span><span class="s1">r</span><span class="s0">.</span><span class="s1">d</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,{</span><span class="s1">m</span><span class="s0">:()=&gt;</span><span class="s1">n</span><span class="s0">});</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s1">r</span><span class="s0">(</span><span class="s3">75905</span><span class="s0">);</span><span class="s4">var </span><span class="s1">n</span><span class="s0">=</span><span class="s4">class</span><span class="s0">{</span><span class="s1">constructor</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">init</span><span class="s0">=</span><span class="s1">t</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">records</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">init</span><span class="s0">()}</span><span class="s4">static</span><span class="s0">{(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">i</span><span class="s0">.</span><span class="s1">K2</span><span class="s0">)(</span><span class="s4">this</span><span class="s0">,</span><span class="s2">&quot;ImperativeState&quot;</span><span class="s0">)}</span><span class="s1">reset</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">records</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">init</span><span class="s0">()}}}}]);</span></pre>
</body>
</html>