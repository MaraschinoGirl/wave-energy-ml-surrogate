<html>
<head>
<title>3799.eaa0438bc5c41bad0516.js</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #bcbec4;}
.s1 { color: #bcbec4;}
.s2 { color: #6aab73;}
.s3 { color: #2aacb8;}
.s4 { color: #cf8e6d;}
.s5 { color: #42c3d4;}
.ln { color: #4b5059; font-weight: normal; font-style: normal; }
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
3799.eaa0438bc5c41bad0516.js</font>
</center></td></tr></table>
<pre><a name="l1"><span class="ln">1    </span></a><span class="s0">(</span><span class="s1">self</span><span class="s0">[</span><span class="s2">&quot;webpackChunk_jupyterlab_application_top&quot;</span><span class="s0">]=</span><span class="s1">self</span><span class="s0">[</span><span class="s2">&quot;webpackChunk_jupyterlab_application_top&quot;</span><span class="s0">]||[]).</span><span class="s1">push</span><span class="s0">([[</span><span class="s3">3799</span><span class="s0">,</span><span class="s3">5606</span><span class="s0">],{</span><span class="s3">56180</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">)=&gt;{</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">65606</span><span class="s0">);!</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s4">true</span><span class="s0">?</span><span class="s1">e</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">=</span><span class="s1">i</span><span class="s0">():</span><span class="s3">0</span><span class="s0">}(</span><span class="s1">self</span><span class="s0">,(()=&gt;(()=&gt;{</span><span class="s2">&quot;use strict&quot;</span><span class="s0">;</span><span class="s4">var </span><span class="s1">e</span><span class="s0">={</span><span class="s3">965</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">)=&gt;{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">GlyphRenderer</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">374</span><span class="s0">),</span><span class="s1">r</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">509</span><span class="s0">),</span><span class="s1">o</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">855</span><span class="s0">),</span><span class="s1">n</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">859</span><span class="s0">),</span><span class="s1">a</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">381</span><span class="s0">),</span><span class="s1">h</span><span class="s0">=</span><span class="s3">11</span><span class="s0">,</span><span class="s1">l</span><span class="s0">=</span><span class="s1">h</span><span class="s0">*</span><span class="s1">Float32Array</span><span class="s0">.</span><span class="s1">BYTES_PER_ELEMENT</span><span class="s0">;</span><span class="s4">let </span><span class="s1">c</span><span class="s0">,</span><span class="s1">d</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">_</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">u</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">class </span><span class="s1">g </span><span class="s4">extends </span><span class="s1">n</span><span class="s0">.</span><span class="s1">Disposable</span><span class="s0">{</span><span class="s1">constructor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">o</span><span class="s0">){</span><span class="s4">super</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">=</span><span class="s1">e</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_gl</span><span class="s0">=</span><span class="s1">t</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_dimensions</span><span class="s0">=</span><span class="s1">i</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">=</span><span class="s1">o</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_activeBuffer</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_vertices</span><span class="s0">={</span><span class="s1">count</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">attributes</span><span class="s0">:</span><span class="s4">new </span><span class="s1">Float32Array</span><span class="s0">(</span><span class="s3">0</span><span class="s0">),</span><span class="s1">attributesBuffers</span><span class="s0">:[</span><span class="s4">new </span><span class="s1">Float32Array</span><span class="s0">(</span><span class="s3">0</span><span class="s0">),</span><span class="s4">new </span><span class="s1">Float32Array</span><span class="s0">(</span><span class="s3">0</span><span class="s0">)]};</span><span class="s4">const </span><span class="s1">h</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_gl</span><span class="s0">;</span><span class="s4">void </span><span class="s3">0</span><span class="s0">===</span><span class="s1">r</span><span class="s0">.</span><span class="s1">TextureAtlas</span><span class="s0">.</span><span class="s1">maxAtlasPages</span><span class="s0">&amp;&amp;(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">TextureAtlas</span><span class="s0">.</span><span class="s1">maxAtlasPages</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">min</span><span class="s0">(</span><span class="s3">32</span><span class="s0">,(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">throwIfFalsy</span><span class="s0">)(</span><span class="s1">h</span><span class="s0">.</span><span class="s1">getParameter</span><span class="s0">(</span><span class="s1">h</span><span class="s0">.</span><span class="s1">MAX_TEXTURE_IMAGE_UNITS</span><span class="s0">))),</span><span class="s1">r</span><span class="s0">.</span><span class="s1">TextureAtlas</span><span class="s0">.</span><span class="s1">maxTextureSize</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">throwIfFalsy</span><span class="s0">)(</span><span class="s1">h</span><span class="s0">.</span><span class="s1">getParameter</span><span class="s0">(</span><span class="s1">h</span><span class="s0">.</span><span class="s1">MAX_TEXTURE_SIZE</span><span class="s0">))),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_program</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">throwIfFalsy</span><span class="s0">)((</span><span class="s3">0</span><span class="s0">,</span><span class="s1">a</span><span class="s0">.</span><span class="s1">createProgram</span><span class="s0">)(</span><span class="s1">h</span><span class="s0">,</span><span class="s2">&quot;#version 300 es</span><span class="s4">\n</span><span class="s2">layout (location = 0) in vec2 a_unitquad;</span><span class="s4">\n</span><span class="s2">layout (location = 1) in vec2 a_cellpos;</span><span class="s4">\n</span><span class="s2">layout (location = 2) in vec2 a_offset;</span><span class="s4">\n</span><span class="s2">layout (location = 3) in vec2 a_size;</span><span class="s4">\n</span><span class="s2">layout (location = 4) in float a_texpage;</span><span class="s4">\n</span><span class="s2">layout (location = 5) in vec2 a_texcoord;</span><span class="s4">\n</span><span class="s2">layout (location = 6) in vec2 a_texsize;</span><span class="s4">\n\n</span><span class="s2">uniform mat4 u_projection;</span><span class="s4">\n</span><span class="s2">uniform vec2 u_resolution;</span><span class="s4">\n\n</span><span class="s2">out vec2 v_texcoord;</span><span class="s4">\n</span><span class="s2">flat out int v_texpage;</span><span class="s4">\n\n</span><span class="s2">void main() {</span><span class="s4">\n  </span><span class="s2">vec2 zeroToOne = (a_offset / u_resolution) + a_cellpos + (a_unitquad * a_size);</span><span class="s4">\n  </span><span class="s2">gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);</span><span class="s4">\n  </span><span class="s2">v_texpage = int(a_texpage);</span><span class="s4">\n  </span><span class="s2">v_texcoord = a_texcoord + a_unitquad * a_texsize;</span><span class="s4">\n</span><span class="s2">}&quot;</span><span class="s0">,</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">let </span><span class="s1">t</span><span class="s0">=</span><span class="s2">&quot;&quot;</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">let </span><span class="s1">i</span><span class="s0">=</span><span class="s3">1</span><span class="s0">;</span><span class="s1">i</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">;</span><span class="s1">i</span><span class="s0">++)</span><span class="s1">t</span><span class="s0">+=</span><span class="s2">` else if (v_texpage == </span><span class="s1">$</span><span class="s0">{</span><span class="s1">i</span><span class="s0">}</span><span class="s2">) { outColor = texture(u_texture[</span><span class="s1">$</span><span class="s0">{</span><span class="s1">i</span><span class="s0">}</span><span class="s2">], v_texcoord); }`</span><span class="s0">;</span><span class="s4">return</span><span class="s2">`#version 300 es</span><span class="s4">\n</span><span class="s2">precision lowp float;</span><span class="s4">\n\n</span><span class="s2">in vec2 v_texcoord;</span><span class="s4">\n</span><span class="s2">flat in int v_texpage;</span><span class="s4">\n\n</span><span class="s2">uniform sampler2D u_texture[</span><span class="s1">$</span><span class="s0">{</span><span class="s1">e</span><span class="s0">}</span><span class="s2">];</span><span class="s4">\n\n</span><span class="s2">out vec4 outColor;</span><span class="s4">\n\n</span><span class="s2">void main() {</span><span class="s4">\n  </span><span class="s2">if (v_texpage == 0) {</span><span class="s4">\n    </span><span class="s2">outColor = texture(u_texture[0], v_texcoord);</span><span class="s4">\n  </span><span class="s2">} </span><span class="s1">$</span><span class="s0">{</span><span class="s1">t</span><span class="s0">}</span><span class="s4">\n</span><span class="s2">}`</span><span class="s0">}(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">TextureAtlas</span><span class="s0">.</span><span class="s1">maxAtlasPages</span><span class="s0">))),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">((</span><span class="s3">0</span><span class="s0">,</span><span class="s1">n</span><span class="s0">.</span><span class="s1">toDisposable</span><span class="s0">)((()=&gt;</span><span class="s1">h</span><span class="s0">.</span><span class="s1">deleteProgram</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_program</span><span class="s0">)))),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_projectionLocation</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">throwIfFalsy</span><span class="s0">)(</span><span class="s1">h</span><span class="s0">.</span><span class="s1">getUniformLocation</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_program</span><span class="s0">,</span><span class="s2">&quot;u_projection&quot;</span><span class="s0">)),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_resolutionLocation</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">throwIfFalsy</span><span class="s0">)(</span><span class="s1">h</span><span class="s0">.</span><span class="s1">getUniformLocation</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_program</span><span class="s0">,</span><span class="s2">&quot;u_resolution&quot;</span><span class="s0">)),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_textureLocation</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">throwIfFalsy</span><span class="s0">)(</span><span class="s1">h</span><span class="s0">.</span><span class="s1">getUniformLocation</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_program</span><span class="s0">,</span><span class="s2">&quot;u_texture&quot;</span><span class="s0">)),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_vertexArrayObject</span><span class="s0">=</span><span class="s1">h</span><span class="s0">.</span><span class="s1">createVertexArray</span><span class="s0">(),</span><span class="s1">h</span><span class="s0">.</span><span class="s1">bindVertexArray</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_vertexArrayObject</span><span class="s0">);</span><span class="s4">const </span><span class="s1">c</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Float32Array</span><span class="s0">([</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s3">1</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s3">1</span><span class="s0">,</span><span class="s3">1</span><span class="s0">,</span><span class="s3">1</span><span class="s0">]),</span><span class="s1">d</span><span class="s0">=</span><span class="s1">h</span><span class="s0">.</span><span class="s1">createBuffer</span><span class="s0">();</span><span class="s4">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">((</span><span class="s3">0</span><span class="s0">,</span><span class="s1">n</span><span class="s0">.</span><span class="s1">toDisposable</span><span class="s0">)((()=&gt;</span><span class="s1">h</span><span class="s0">.</span><span class="s1">deleteBuffer</span><span class="s0">(</span><span class="s1">d</span><span class="s0">)))),</span><span class="s1">h</span><span class="s0">.</span><span class="s1">bindBuffer</span><span class="s0">(</span><span class="s1">h</span><span class="s0">.</span><span class="s1">ARRAY_BUFFER</span><span class="s0">,</span><span class="s1">d</span><span class="s0">),</span><span class="s1">h</span><span class="s0">.</span><span class="s1">bufferData</span><span class="s0">(</span><span class="s1">h</span><span class="s0">.</span><span class="s1">ARRAY_BUFFER</span><span class="s0">,</span><span class="s1">c</span><span class="s0">,</span><span class="s1">h</span><span class="s0">.</span><span class="s1">STATIC_DRAW</span><span class="s0">),</span><span class="s1">h</span><span class="s0">.</span><span class="s1">enableVertexAttribArray</span><span class="s0">(</span><span class="s3">0</span><span class="s0">),</span><span class="s1">h</span><span class="s0">.</span><span class="s1">vertexAttribPointer</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s3">2</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_gl</span><span class="s0">.</span><span class="s1">FLOAT</span><span class="s0">,!</span><span class="s3">1</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">);</span><span class="s4">const </span><span class="s1">_</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Uint8Array</span><span class="s0">([</span><span class="s3">0</span><span class="s0">,</span><span class="s3">1</span><span class="s0">,</span><span class="s3">2</span><span class="s0">,</span><span class="s3">3</span><span class="s0">]),</span><span class="s1">u</span><span class="s0">=</span><span class="s1">h</span><span class="s0">.</span><span class="s1">createBuffer</span><span class="s0">();</span><span class="s4">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">((</span><span class="s3">0</span><span class="s0">,</span><span class="s1">n</span><span class="s0">.</span><span class="s1">toDisposable</span><span class="s0">)((()=&gt;</span><span class="s1">h</span><span class="s0">.</span><span class="s1">deleteBuffer</span><span class="s0">(</span><span class="s1">u</span><span class="s0">)))),</span><span class="s1">h</span><span class="s0">.</span><span class="s1">bindBuffer</span><span class="s0">(</span><span class="s1">h</span><span class="s0">.</span><span class="s1">ELEMENT_ARRAY_BUFFER</span><span class="s0">,</span><span class="s1">u</span><span class="s0">),</span><span class="s1">h</span><span class="s0">.</span><span class="s1">bufferData</span><span class="s0">(</span><span class="s1">h</span><span class="s0">.</span><span class="s1">ELEMENT_ARRAY_BUFFER</span><span class="s0">,</span><span class="s1">_</span><span class="s0">,</span><span class="s1">h</span><span class="s0">.</span><span class="s1">STATIC_DRAW</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_attributesBuffer</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">throwIfFalsy</span><span class="s0">)(</span><span class="s1">h</span><span class="s0">.</span><span class="s1">createBuffer</span><span class="s0">()),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">((</span><span class="s3">0</span><span class="s0">,</span><span class="s1">n</span><span class="s0">.</span><span class="s1">toDisposable</span><span class="s0">)((()=&gt;</span><span class="s1">h</span><span class="s0">.</span><span class="s1">deleteBuffer</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_attributesBuffer</span><span class="s0">)))),</span><span class="s1">h</span><span class="s0">.</span><span class="s1">bindBuffer</span><span class="s0">(</span><span class="s1">h</span><span class="s0">.</span><span class="s1">ARRAY_BUFFER</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_attributesBuffer</span><span class="s0">),</span><span class="s1">h</span><span class="s0">.</span><span class="s1">enableVertexAttribArray</span><span class="s0">(</span><span class="s3">2</span><span class="s0">),</span><span class="s1">h</span><span class="s0">.</span><span class="s1">vertexAttribPointer</span><span class="s0">(</span><span class="s3">2</span><span class="s0">,</span><span class="s3">2</span><span class="s0">,</span><span class="s1">h</span><span class="s0">.</span><span class="s1">FLOAT</span><span class="s0">,!</span><span class="s3">1</span><span class="s0">,</span><span class="s1">l</span><span class="s0">,</span><span class="s3">0</span><span class="s0">),</span><span class="s1">h</span><span class="s0">.</span><span class="s1">vertexAttribDivisor</span><span class="s0">(</span><span class="s3">2</span><span class="s0">,</span><span class="s3">1</span><span class="s0">),</span><span class="s1">h</span><span class="s0">.</span><span class="s1">enableVertexAttribArray</span><span class="s0">(</span><span class="s3">3</span><span class="s0">),</span><span class="s1">h</span><span class="s0">.</span><span class="s1">vertexAttribPointer</span><span class="s0">(</span><span class="s3">3</span><span class="s0">,</span><span class="s3">2</span><span class="s0">,</span><span class="s1">h</span><span class="s0">.</span><span class="s1">FLOAT</span><span class="s0">,!</span><span class="s3">1</span><span class="s0">,</span><span class="s1">l</span><span class="s0">,</span><span class="s3">2</span><span class="s0">*</span><span class="s1">Float32Array</span><span class="s0">.</span><span class="s1">BYTES_PER_ELEMENT</span><span class="s0">),</span><span class="s1">h</span><span class="s0">.</span><span class="s1">vertexAttribDivisor</span><span class="s0">(</span><span class="s3">3</span><span class="s0">,</span><span class="s3">1</span><span class="s0">),</span><span class="s1">h</span><span class="s0">.</span><span class="s1">enableVertexAttribArray</span><span class="s0">(</span><span class="s3">4</span><span class="s0">),</span><span class="s1">h</span><span class="s0">.</span><span class="s1">vertexAttribPointer</span><span class="s0">(</span><span class="s3">4</span><span class="s0">,</span><span class="s3">1</span><span class="s0">,</span><span class="s1">h</span><span class="s0">.</span><span class="s1">FLOAT</span><span class="s0">,!</span><span class="s3">1</span><span class="s0">,</span><span class="s1">l</span><span class="s0">,</span><span class="s3">4</span><span class="s0">*</span><span class="s1">Float32Array</span><span class="s0">.</span><span class="s1">BYTES_PER_ELEMENT</span><span class="s0">),</span><span class="s1">h</span><span class="s0">.</span><span class="s1">vertexAttribDivisor</span><span class="s0">(</span><span class="s3">4</span><span class="s0">,</span><span class="s3">1</span><span class="s0">),</span><span class="s1">h</span><span class="s0">.</span><span class="s1">enableVertexAttribArray</span><span class="s0">(</span><span class="s3">5</span><span class="s0">),</span><span class="s1">h</span><span class="s0">.</span><span class="s1">vertexAttribPointer</span><span class="s0">(</span><span class="s3">5</span><span class="s0">,</span><span class="s3">2</span><span class="s0">,</span><span class="s1">h</span><span class="s0">.</span><span class="s1">FLOAT</span><span class="s0">,!</span><span class="s3">1</span><span class="s0">,</span><span class="s1">l</span><span class="s0">,</span><span class="s3">5</span><span class="s0">*</span><span class="s1">Float32Array</span><span class="s0">.</span><span class="s1">BYTES_PER_ELEMENT</span><span class="s0">),</span><span class="s1">h</span><span class="s0">.</span><span class="s1">vertexAttribDivisor</span><span class="s0">(</span><span class="s3">5</span><span class="s0">,</span><span class="s3">1</span><span class="s0">),</span><span class="s1">h</span><span class="s0">.</span><span class="s1">enableVertexAttribArray</span><span class="s0">(</span><span class="s3">6</span><span class="s0">),</span><span class="s1">h</span><span class="s0">.</span><span class="s1">vertexAttribPointer</span><span class="s0">(</span><span class="s3">6</span><span class="s0">,</span><span class="s3">2</span><span class="s0">,</span><span class="s1">h</span><span class="s0">.</span><span class="s1">FLOAT</span><span class="s0">,!</span><span class="s3">1</span><span class="s0">,</span><span class="s1">l</span><span class="s0">,</span><span class="s3">7</span><span class="s0">*</span><span class="s1">Float32Array</span><span class="s0">.</span><span class="s1">BYTES_PER_ELEMENT</span><span class="s0">),</span><span class="s1">h</span><span class="s0">.</span><span class="s1">vertexAttribDivisor</span><span class="s0">(</span><span class="s3">6</span><span class="s0">,</span><span class="s3">1</span><span class="s0">),</span><span class="s1">h</span><span class="s0">.</span><span class="s1">enableVertexAttribArray</span><span class="s0">(</span><span class="s3">1</span><span class="s0">),</span><span class="s1">h</span><span class="s0">.</span><span class="s1">vertexAttribPointer</span><span class="s0">(</span><span class="s3">1</span><span class="s0">,</span><span class="s3">2</span><span class="s0">,</span><span class="s1">h</span><span class="s0">.</span><span class="s1">FLOAT</span><span class="s0">,!</span><span class="s3">1</span><span class="s0">,</span><span class="s1">l</span><span class="s0">,</span><span class="s3">9</span><span class="s0">*</span><span class="s1">Float32Array</span><span class="s0">.</span><span class="s1">BYTES_PER_ELEMENT</span><span class="s0">),</span><span class="s1">h</span><span class="s0">.</span><span class="s1">vertexAttribDivisor</span><span class="s0">(</span><span class="s3">1</span><span class="s0">,</span><span class="s3">1</span><span class="s0">),</span><span class="s1">h</span><span class="s0">.</span><span class="s1">useProgram</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_program</span><span class="s0">);</span><span class="s4">const </span><span class="s1">g</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Int32Array</span><span class="s0">(</span><span class="s1">r</span><span class="s0">.</span><span class="s1">TextureAtlas</span><span class="s0">.</span><span class="s1">maxAtlasPages</span><span class="s0">);</span><span class="s4">for</span><span class="s0">(</span><span class="s4">let </span><span class="s1">s</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">s</span><span class="s0">&lt;</span><span class="s1">r</span><span class="s0">.</span><span class="s1">TextureAtlas</span><span class="s0">.</span><span class="s1">maxAtlasPages</span><span class="s0">;</span><span class="s1">s</span><span class="s0">++)</span><span class="s1">g</span><span class="s0">[</span><span class="s1">s</span><span class="s0">]=</span><span class="s1">s</span><span class="s0">;</span><span class="s1">h</span><span class="s0">.</span><span class="s1">uniform1iv</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_textureLocation</span><span class="s0">,</span><span class="s1">g</span><span class="s0">),</span><span class="s1">h</span><span class="s0">.</span><span class="s1">uniformMatrix4fv</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_projectionLocation</span><span class="s0">,!</span><span class="s3">1</span><span class="s0">,</span><span class="s1">a</span><span class="s0">.</span><span class="s1">PROJECTION_MATRIX</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_atlasTextures</span><span class="s0">=[];</span><span class="s4">for</span><span class="s0">(</span><span class="s4">let </span><span class="s1">l</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">l</span><span class="s0">&lt;</span><span class="s1">r</span><span class="s0">.</span><span class="s1">TextureAtlas</span><span class="s0">.</span><span class="s1">maxAtlasPages</span><span class="s0">;</span><span class="s1">l</span><span class="s0">++){</span><span class="s4">const </span><span class="s1">e</span><span class="s0">=</span><span class="s4">new </span><span class="s1">a</span><span class="s0">.</span><span class="s1">GLTexture</span><span class="s0">((</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">throwIfFalsy</span><span class="s0">)(</span><span class="s1">h</span><span class="s0">.</span><span class="s1">createTexture</span><span class="s0">()));</span><span class="s4">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">((</span><span class="s3">0</span><span class="s0">,</span><span class="s1">n</span><span class="s0">.</span><span class="s1">toDisposable</span><span class="s0">)((()=&gt;</span><span class="s1">h</span><span class="s0">.</span><span class="s1">deleteTexture</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">texture</span><span class="s0">)))),</span><span class="s1">h</span><span class="s0">.</span><span class="s1">activeTexture</span><span class="s0">(</span><span class="s1">h</span><span class="s0">.</span><span class="s1">TEXTURE0</span><span class="s0">+</span><span class="s1">l</span><span class="s0">),</span><span class="s1">h</span><span class="s0">.</span><span class="s1">bindTexture</span><span class="s0">(</span><span class="s1">h</span><span class="s0">.</span><span class="s1">TEXTURE_2D</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">texture</span><span class="s0">),</span><span class="s1">h</span><span class="s0">.</span><span class="s1">texParameteri</span><span class="s0">(</span><span class="s1">h</span><span class="s0">.</span><span class="s1">TEXTURE_2D</span><span class="s0">,</span><span class="s1">h</span><span class="s0">.</span><span class="s1">TEXTURE_WRAP_S</span><span class="s0">,</span><span class="s1">h</span><span class="s0">.</span><span class="s1">CLAMP_TO_EDGE</span><span class="s0">),</span><span class="s1">h</span><span class="s0">.</span><span class="s1">texParameteri</span><span class="s0">(</span><span class="s1">h</span><span class="s0">.</span><span class="s1">TEXTURE_2D</span><span class="s0">,</span><span class="s1">h</span><span class="s0">.</span><span class="s1">TEXTURE_WRAP_T</span><span class="s0">,</span><span class="s1">h</span><span class="s0">.</span><span class="s1">CLAMP_TO_EDGE</span><span class="s0">),</span><span class="s1">h</span><span class="s0">.</span><span class="s1">texImage2D</span><span class="s0">(</span><span class="s1">h</span><span class="s0">.</span><span class="s1">TEXTURE_2D</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s1">h</span><span class="s0">.</span><span class="s1">RGBA</span><span class="s0">,</span><span class="s3">1</span><span class="s0">,</span><span class="s3">1</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s1">h</span><span class="s0">.</span><span class="s1">RGBA</span><span class="s0">,</span><span class="s1">h</span><span class="s0">.</span><span class="s1">UNSIGNED_BYTE</span><span class="s0">,</span><span class="s4">new </span><span class="s1">Uint8Array</span><span class="s0">([</span><span class="s3">255</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s3">255</span><span class="s0">])),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_atlasTextures</span><span class="s0">[</span><span class="s1">l</span><span class="s0">]=</span><span class="s1">e</span><span class="s0">}</span><span class="s1">h</span><span class="s0">.</span><span class="s1">enable</span><span class="s0">(</span><span class="s1">h</span><span class="s0">.</span><span class="s1">BLEND</span><span class="s0">),</span><span class="s1">h</span><span class="s0">.</span><span class="s1">blendFunc</span><span class="s0">(</span><span class="s1">h</span><span class="s0">.</span><span class="s1">SRC_ALPHA</span><span class="s0">,</span><span class="s1">h</span><span class="s0">.</span><span class="s1">ONE_MINUS_SRC_ALPHA</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">handleResize</span><span class="s0">()}</span><span class="s1">beginFrame</span><span class="s0">(){</span><span class="s4">return</span><span class="s0">!</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_atlas</span><span class="s0">||</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_atlas</span><span class="s0">.</span><span class="s1">beginFrame</span><span class="s0">()}</span><span class="s1">updateCell</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">h</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_updateCell</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_vertices</span><span class="s0">.</span><span class="s1">attributes</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">h</span><span class="s0">)}</span><span class="s1">_updateCell</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">l</span><span class="s0">,</span><span class="s1">g</span><span class="s0">,</span><span class="s1">v</span><span class="s0">,</span><span class="s1">f</span><span class="s0">){</span><span class="s1">d</span><span class="s0">=(</span><span class="s1">i</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">.</span><span class="s1">cols</span><span class="s0">+</span><span class="s1">t</span><span class="s0">)*</span><span class="s1">h</span><span class="s0">,</span><span class="s1">r</span><span class="s0">!==</span><span class="s1">o</span><span class="s0">.</span><span class="s1">NULL_CELL_CODE</span><span class="s0">&amp;&amp;</span><span class="s4">void </span><span class="s3">0</span><span class="s0">!==</span><span class="s1">r</span><span class="s0">?</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_atlas</span><span class="s0">&amp;&amp;(</span><span class="s1">c</span><span class="s0">=</span><span class="s1">g</span><span class="s0">&amp;&amp;</span><span class="s1">g</span><span class="s0">.</span><span class="s1">length</span><span class="s0">&gt;</span><span class="s3">1</span><span class="s0">?</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_atlas</span><span class="s0">.</span><span class="s1">getRasterizedGlyphCombinedChar</span><span class="s0">(</span><span class="s1">g</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">l</span><span class="s0">,!</span><span class="s3">1</span><span class="s0">):</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_atlas</span><span class="s0">.</span><span class="s1">getRasterizedGlyph</span><span class="s0">(</span><span class="s1">r</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">l</span><span class="s0">,!</span><span class="s3">1</span><span class="s0">),</span><span class="s1">_</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">floor</span><span class="s0">((</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">cell</span><span class="s0">.</span><span class="s1">width</span><span class="s0">-</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">char</span><span class="s0">.</span><span class="s1">width</span><span class="s0">)/</span><span class="s3">2</span><span class="s0">),</span><span class="s1">n</span><span class="s0">!==</span><span class="s1">f</span><span class="s0">&amp;&amp;</span><span class="s1">c</span><span class="s0">.</span><span class="s1">offset</span><span class="s0">.</span><span class="s1">x</span><span class="s0">&gt;</span><span class="s1">_</span><span class="s0">?(</span><span class="s1">u</span><span class="s0">=</span><span class="s1">c</span><span class="s0">.</span><span class="s1">offset</span><span class="s0">.</span><span class="s1">x</span><span class="s0">-</span><span class="s1">_</span><span class="s0">,</span><span class="s1">e</span><span class="s0">[</span><span class="s1">d</span><span class="s0">]=-(</span><span class="s1">c</span><span class="s0">.</span><span class="s1">offset</span><span class="s0">.</span><span class="s1">x</span><span class="s0">-</span><span class="s1">u</span><span class="s0">)+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">char</span><span class="s0">.</span><span class="s1">left</span><span class="s0">,</span><span class="s1">e</span><span class="s0">[</span><span class="s1">d</span><span class="s0">+</span><span class="s3">1</span><span class="s0">]=-</span><span class="s1">c</span><span class="s0">.</span><span class="s1">offset</span><span class="s0">.</span><span class="s1">y</span><span class="s0">+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">char</span><span class="s0">.</span><span class="s1">top</span><span class="s0">,</span><span class="s1">e</span><span class="s0">[</span><span class="s1">d</span><span class="s0">+</span><span class="s3">2</span><span class="s0">]=(</span><span class="s1">c</span><span class="s0">.</span><span class="s1">size</span><span class="s0">.</span><span class="s1">x</span><span class="s0">-</span><span class="s1">u</span><span class="s0">)/</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">,</span><span class="s1">e</span><span class="s0">[</span><span class="s1">d</span><span class="s0">+</span><span class="s3">3</span><span class="s0">]=</span><span class="s1">c</span><span class="s0">.</span><span class="s1">size</span><span class="s0">.</span><span class="s1">y</span><span class="s0">/</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">,</span><span class="s1">e</span><span class="s0">[</span><span class="s1">d</span><span class="s0">+</span><span class="s3">4</span><span class="s0">]=</span><span class="s1">c</span><span class="s0">.</span><span class="s1">texturePage</span><span class="s0">,</span><span class="s1">e</span><span class="s0">[</span><span class="s1">d</span><span class="s0">+</span><span class="s3">5</span><span class="s0">]=</span><span class="s1">c</span><span class="s0">.</span><span class="s1">texturePositionClipSpace</span><span class="s0">.</span><span class="s1">x</span><span class="s0">+</span><span class="s1">u</span><span class="s0">/</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_atlas</span><span class="s0">.</span><span class="s1">pages</span><span class="s0">[</span><span class="s1">c</span><span class="s0">.</span><span class="s1">texturePage</span><span class="s0">].</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">,</span><span class="s1">e</span><span class="s0">[</span><span class="s1">d</span><span class="s0">+</span><span class="s3">6</span><span class="s0">]=</span><span class="s1">c</span><span class="s0">.</span><span class="s1">texturePositionClipSpace</span><span class="s0">.</span><span class="s1">y</span><span class="s0">,</span><span class="s1">e</span><span class="s0">[</span><span class="s1">d</span><span class="s0">+</span><span class="s3">7</span><span class="s0">]=</span><span class="s1">c</span><span class="s0">.</span><span class="s1">sizeClipSpace</span><span class="s0">.</span><span class="s1">x</span><span class="s0">-</span><span class="s1">u</span><span class="s0">/</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_atlas</span><span class="s0">.</span><span class="s1">pages</span><span class="s0">[</span><span class="s1">c</span><span class="s0">.</span><span class="s1">texturePage</span><span class="s0">].</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">,</span><span class="s1">e</span><span class="s0">[</span><span class="s1">d</span><span class="s0">+</span><span class="s3">8</span><span class="s0">]=</span><span class="s1">c</span><span class="s0">.</span><span class="s1">sizeClipSpace</span><span class="s0">.</span><span class="s1">y</span><span class="s0">):(</span><span class="s1">e</span><span class="s0">[</span><span class="s1">d</span><span class="s0">]=-</span><span class="s1">c</span><span class="s0">.</span><span class="s1">offset</span><span class="s0">.</span><span class="s1">x</span><span class="s0">+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">char</span><span class="s0">.</span><span class="s1">left</span><span class="s0">,</span><span class="s1">e</span><span class="s0">[</span><span class="s1">d</span><span class="s0">+</span><span class="s3">1</span><span class="s0">]=-</span><span class="s1">c</span><span class="s0">.</span><span class="s1">offset</span><span class="s0">.</span><span class="s1">y</span><span class="s0">+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">char</span><span class="s0">.</span><span class="s1">top</span><span class="s0">,</span><span class="s1">e</span><span class="s0">[</span><span class="s1">d</span><span class="s0">+</span><span class="s3">2</span><span class="s0">]=</span><span class="s1">c</span><span class="s0">.</span><span class="s1">size</span><span class="s0">.</span><span class="s1">x</span><span class="s0">/</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">,</span><span class="s1">e</span><span class="s0">[</span><span class="s1">d</span><span class="s0">+</span><span class="s3">3</span><span class="s0">]=</span><span class="s1">c</span><span class="s0">.</span><span class="s1">size</span><span class="s0">.</span><span class="s1">y</span><span class="s0">/</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">,</span><span class="s1">e</span><span class="s0">[</span><span class="s1">d</span><span class="s0">+</span><span class="s3">4</span><span class="s0">]=</span><span class="s1">c</span><span class="s0">.</span><span class="s1">texturePage</span><span class="s0">,</span><span class="s1">e</span><span class="s0">[</span><span class="s1">d</span><span class="s0">+</span><span class="s3">5</span><span class="s0">]=</span><span class="s1">c</span><span class="s0">.</span><span class="s1">texturePositionClipSpace</span><span class="s0">.</span><span class="s1">x</span><span class="s0">,</span><span class="s1">e</span><span class="s0">[</span><span class="s1">d</span><span class="s0">+</span><span class="s3">6</span><span class="s0">]=</span><span class="s1">c</span><span class="s0">.</span><span class="s1">texturePositionClipSpace</span><span class="s0">.</span><span class="s1">y</span><span class="s0">,</span><span class="s1">e</span><span class="s0">[</span><span class="s1">d</span><span class="s0">+</span><span class="s3">7</span><span class="s0">]=</span><span class="s1">c</span><span class="s0">.</span><span class="s1">sizeClipSpace</span><span class="s0">.</span><span class="s1">x</span><span class="s0">,</span><span class="s1">e</span><span class="s0">[</span><span class="s1">d</span><span class="s0">+</span><span class="s3">8</span><span class="s0">]=</span><span class="s1">c</span><span class="s0">.</span><span class="s1">sizeClipSpace</span><span class="s0">.</span><span class="s1">y</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">.</span><span class="s1">rawOptions</span><span class="s0">.</span><span class="s1">rescaleOverlappingGlyphs</span><span class="s0">&amp;&amp;(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">allowRescaling</span><span class="s0">)(</span><span class="s1">r</span><span class="s0">,</span><span class="s1">v</span><span class="s0">,</span><span class="s1">c</span><span class="s0">.</span><span class="s1">size</span><span class="s0">.</span><span class="s1">x</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">cell</span><span class="s0">.</span><span class="s1">width</span><span class="s0">)&amp;&amp;(</span><span class="s1">e</span><span class="s0">[</span><span class="s1">d</span><span class="s0">+</span><span class="s3">2</span><span class="s0">]=(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">cell</span><span class="s0">.</span><span class="s1">width</span><span class="s0">-</span><span class="s3">1</span><span class="s0">)/</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">)):</span><span class="s1">e</span><span class="s0">.</span><span class="s1">fill</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">d</span><span class="s0">,</span><span class="s1">d</span><span class="s0">+</span><span class="s1">h</span><span class="s0">-</span><span class="s3">1</span><span class="s0">-</span><span class="s3">2</span><span class="s0">)}</span><span class="s1">clear</span><span class="s0">(){</span><span class="s4">const </span><span class="s1">e</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">,</span><span class="s1">t</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">cols</span><span class="s0">*</span><span class="s1">e</span><span class="s0">.</span><span class="s1">rows</span><span class="s0">*</span><span class="s1">h</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_vertices</span><span class="s0">.</span><span class="s1">count</span><span class="s0">!==</span><span class="s1">t</span><span class="s0">?</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_vertices</span><span class="s0">.</span><span class="s1">attributes</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Float32Array</span><span class="s0">(</span><span class="s1">t</span><span class="s0">):</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_vertices</span><span class="s0">.</span><span class="s1">attributes</span><span class="s0">.</span><span class="s1">fill</span><span class="s0">(</span><span class="s3">0</span><span class="s0">);</span><span class="s4">let </span><span class="s1">i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(;</span><span class="s1">i</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_vertices</span><span class="s0">.</span><span class="s1">attributesBuffers</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">i</span><span class="s0">++)</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_vertices</span><span class="s0">.</span><span class="s1">count</span><span class="s0">!==</span><span class="s1">t</span><span class="s0">?</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_vertices</span><span class="s0">.</span><span class="s1">attributesBuffers</span><span class="s0">[</span><span class="s1">i</span><span class="s0">]=</span><span class="s4">new </span><span class="s1">Float32Array</span><span class="s0">(</span><span class="s1">t</span><span class="s0">):</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_vertices</span><span class="s0">.</span><span class="s1">attributesBuffers</span><span class="s0">[</span><span class="s1">i</span><span class="s0">].</span><span class="s1">fill</span><span class="s0">(</span><span class="s3">0</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_vertices</span><span class="s0">.</span><span class="s1">count</span><span class="s0">=</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">let </span><span class="s1">s</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">s</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">rows</span><span class="s0">;</span><span class="s1">s</span><span class="s0">++)</span><span class="s4">for</span><span class="s0">(</span><span class="s4">let </span><span class="s1">t</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">t</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">cols</span><span class="s0">;</span><span class="s1">t</span><span class="s0">++)</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_vertices</span><span class="s0">.</span><span class="s1">attributes</span><span class="s0">[</span><span class="s1">i</span><span class="s0">+</span><span class="s3">9</span><span class="s0">]=</span><span class="s1">t</span><span class="s0">/</span><span class="s1">e</span><span class="s0">.</span><span class="s1">cols</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_vertices</span><span class="s0">.</span><span class="s1">attributes</span><span class="s0">[</span><span class="s1">i</span><span class="s0">+</span><span class="s3">10</span><span class="s0">]=</span><span class="s1">s</span><span class="s0">/</span><span class="s1">e</span><span class="s0">.</span><span class="s1">rows</span><span class="s0">,</span><span class="s1">i</span><span class="s0">+=</span><span class="s1">h</span><span class="s0">}</span><span class="s1">handleResize</span><span class="s0">(){</span><span class="s4">const </span><span class="s1">e</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_gl</span><span class="s0">;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">useProgram</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_program</span><span class="s0">),</span><span class="s1">e</span><span class="s0">.</span><span class="s1">viewport</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">),</span><span class="s1">e</span><span class="s0">.</span><span class="s1">uniform2f</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_resolutionLocation</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">clear</span><span class="s0">()}</span><span class="s1">render</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(!</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_atlas</span><span class="s0">)</span><span class="s4">return</span><span class="s0">;</span><span class="s4">const </span><span class="s1">t</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_gl</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">useProgram</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_program</span><span class="s0">),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">bindVertexArray</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_vertexArrayObject</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_activeBuffer</span><span class="s0">=(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_activeBuffer</span><span class="s0">+</span><span class="s3">1</span><span class="s0">)%</span><span class="s3">2</span><span class="s0">;</span><span class="s4">const </span><span class="s1">i</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_vertices</span><span class="s0">.</span><span class="s1">attributesBuffers</span><span class="s0">[</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_activeBuffer</span><span class="s0">];</span><span class="s4">let </span><span class="s1">s</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">let </span><span class="s1">r</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">r</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">lineLengths</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">r</span><span class="s0">++){</span><span class="s4">const </span><span class="s1">t</span><span class="s0">=</span><span class="s1">r</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">.</span><span class="s1">cols</span><span class="s0">*</span><span class="s1">h</span><span class="s0">,</span><span class="s1">o</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_vertices</span><span class="s0">.</span><span class="s1">attributes</span><span class="s0">.</span><span class="s1">subarray</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">t</span><span class="s0">+</span><span class="s1">e</span><span class="s0">.</span><span class="s1">lineLengths</span><span class="s0">[</span><span class="s1">r</span><span class="s0">]*</span><span class="s1">h</span><span class="s0">);</span><span class="s1">i</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">o</span><span class="s0">,</span><span class="s1">s</span><span class="s0">),</span><span class="s1">s</span><span class="s0">+=</span><span class="s1">o</span><span class="s0">.</span><span class="s1">length</span><span class="s0">}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">bindBuffer</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">ARRAY_BUFFER</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_attributesBuffer</span><span class="s0">),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">bufferData</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">ARRAY_BUFFER</span><span class="s0">,</span><span class="s1">i</span><span class="s0">.</span><span class="s1">subarray</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">STREAM_DRAW</span><span class="s0">);</span><span class="s4">for</span><span class="s0">(</span><span class="s4">let </span><span class="s1">r</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">r</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_atlas</span><span class="s0">.</span><span class="s1">pages</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">r</span><span class="s0">++)</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_atlas</span><span class="s0">.</span><span class="s1">pages</span><span class="s0">[</span><span class="s1">r</span><span class="s0">].</span><span class="s1">version</span><span class="s0">!==</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_atlasTextures</span><span class="s0">[</span><span class="s1">r</span><span class="s0">].</span><span class="s1">version</span><span class="s0">&amp;&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_bindAtlasPageTexture</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_atlas</span><span class="s0">,</span><span class="s1">r</span><span class="s0">);</span><span class="s1">t</span><span class="s0">.</span><span class="s1">drawElementsInstanced</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">TRIANGLE_STRIP</span><span class="s0">,</span><span class="s3">4</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">UNSIGNED_BYTE</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">/</span><span class="s1">h</span><span class="s0">)}</span><span class="s1">setAtlas</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_atlas</span><span class="s0">=</span><span class="s1">e</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">const </span><span class="s1">t of </span><span class="s4">this</span><span class="s0">.</span><span class="s1">_atlasTextures</span><span class="s0">)</span><span class="s1">t</span><span class="s0">.</span><span class="s1">version</span><span class="s0">=-</span><span class="s3">1</span><span class="s0">}</span><span class="s1">_bindAtlasPageTexture</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s1">e</span><span class="s0">.</span><span class="s1">activeTexture</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">TEXTURE0</span><span class="s0">+</span><span class="s1">i</span><span class="s0">),</span><span class="s1">e</span><span class="s0">.</span><span class="s1">bindTexture</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">TEXTURE_2D</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_atlasTextures</span><span class="s0">[</span><span class="s1">i</span><span class="s0">].</span><span class="s1">texture</span><span class="s0">),</span><span class="s1">e</span><span class="s0">.</span><span class="s1">texParameteri</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">TEXTURE_2D</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">TEXTURE_WRAP_S</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">CLAMP_TO_EDGE</span><span class="s0">),</span><span class="s1">e</span><span class="s0">.</span><span class="s1">texParameteri</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">TEXTURE_2D</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">TEXTURE_WRAP_T</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">CLAMP_TO_EDGE</span><span class="s0">),</span><span class="s1">e</span><span class="s0">.</span><span class="s1">texImage2D</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">TEXTURE_2D</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">RGBA</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">RGBA</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">UNSIGNED_BYTE</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">pages</span><span class="s0">[</span><span class="s1">i</span><span class="s0">].</span><span class="s1">canvas</span><span class="s0">),</span><span class="s1">e</span><span class="s0">.</span><span class="s1">generateMipmap</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">TEXTURE_2D</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_atlasTextures</span><span class="s0">[</span><span class="s1">i</span><span class="s0">].</span><span class="s1">version</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">pages</span><span class="s0">[</span><span class="s1">i</span><span class="s0">].</span><span class="s1">version</span><span class="s0">}</span><span class="s1">setDimensions</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_dimensions</span><span class="s0">=</span><span class="s1">e</span><span class="s0">}}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">GlyphRenderer</span><span class="s0">=</span><span class="s1">g</span><span class="s0">},</span><span class="s3">742</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">)=&gt;{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">RectangleRenderer</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">374</span><span class="s0">),</span><span class="s1">r</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">859</span><span class="s0">),</span><span class="s1">o</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">310</span><span class="s0">),</span><span class="s1">n</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">381</span><span class="s0">),</span><span class="s1">a</span><span class="s0">=</span><span class="s3">8</span><span class="s0">*</span><span class="s1">Float32Array</span><span class="s0">.</span><span class="s1">BYTES_PER_ELEMENT</span><span class="s0">;</span><span class="s4">class </span><span class="s1">h</span><span class="s0">{</span><span class="s1">constructor</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">attributes</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Float32Array</span><span class="s0">(</span><span class="s3">160</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">count</span><span class="s0">=</span><span class="s3">0</span><span class="s0">}}</span><span class="s4">let </span><span class="s1">l</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">c</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">d</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">_</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">u</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">g</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">v</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">class </span><span class="s1">f </span><span class="s4">extends </span><span class="s1">r</span><span class="s0">.</span><span class="s1">Disposable</span><span class="s0">{</span><span class="s1">constructor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">o</span><span class="s0">){</span><span class="s4">super</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">=</span><span class="s1">e</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_gl</span><span class="s0">=</span><span class="s1">t</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_dimensions</span><span class="s0">=</span><span class="s1">i</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">=</span><span class="s1">o</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_vertices</span><span class="s0">=</span><span class="s4">new </span><span class="s1">h</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_verticesCursor</span><span class="s0">=</span><span class="s4">new </span><span class="s1">h</span><span class="s0">;</span><span class="s4">const </span><span class="s1">l</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_gl</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_program</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">throwIfFalsy</span><span class="s0">)((</span><span class="s3">0</span><span class="s0">,</span><span class="s1">n</span><span class="s0">.</span><span class="s1">createProgram</span><span class="s0">)(</span><span class="s1">l</span><span class="s0">,</span><span class="s2">&quot;#version 300 es</span><span class="s4">\n</span><span class="s2">layout (location = 0) in vec2 a_position;</span><span class="s4">\n</span><span class="s2">layout (location = 1) in vec2 a_size;</span><span class="s4">\n</span><span class="s2">layout (location = 2) in vec4 a_color;</span><span class="s4">\n</span><span class="s2">layout (location = 3) in vec2 a_unitquad;</span><span class="s4">\n\n</span><span class="s2">uniform mat4 u_projection;</span><span class="s4">\n\n</span><span class="s2">out vec4 v_color;</span><span class="s4">\n\n</span><span class="s2">void main() {</span><span class="s4">\n  </span><span class="s2">vec2 zeroToOne = a_position + (a_unitquad * a_size);</span><span class="s4">\n  </span><span class="s2">gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);</span><span class="s4">\n  </span><span class="s2">v_color = a_color;</span><span class="s4">\n</span><span class="s2">}&quot;</span><span class="s0">,</span><span class="s2">&quot;#version 300 es</span><span class="s4">\n</span><span class="s2">precision lowp float;</span><span class="s4">\n\n</span><span class="s2">in vec4 v_color;</span><span class="s4">\n\n</span><span class="s2">out vec4 outColor;</span><span class="s4">\n\n</span><span class="s2">void main() {</span><span class="s4">\n  </span><span class="s2">outColor = v_color;</span><span class="s4">\n</span><span class="s2">}&quot;</span><span class="s0">)),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">((</span><span class="s3">0</span><span class="s0">,</span><span class="s1">r</span><span class="s0">.</span><span class="s1">toDisposable</span><span class="s0">)((()=&gt;</span><span class="s1">l</span><span class="s0">.</span><span class="s1">deleteProgram</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_program</span><span class="s0">)))),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_projectionLocation</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">throwIfFalsy</span><span class="s0">)(</span><span class="s1">l</span><span class="s0">.</span><span class="s1">getUniformLocation</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_program</span><span class="s0">,</span><span class="s2">&quot;u_projection&quot;</span><span class="s0">)),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_vertexArrayObject</span><span class="s0">=</span><span class="s1">l</span><span class="s0">.</span><span class="s1">createVertexArray</span><span class="s0">(),</span><span class="s1">l</span><span class="s0">.</span><span class="s1">bindVertexArray</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_vertexArrayObject</span><span class="s0">);</span><span class="s4">const </span><span class="s1">c</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Float32Array</span><span class="s0">([</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s3">1</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s3">1</span><span class="s0">,</span><span class="s3">1</span><span class="s0">,</span><span class="s3">1</span><span class="s0">]),</span><span class="s1">d</span><span class="s0">=</span><span class="s1">l</span><span class="s0">.</span><span class="s1">createBuffer</span><span class="s0">();</span><span class="s4">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">((</span><span class="s3">0</span><span class="s0">,</span><span class="s1">r</span><span class="s0">.</span><span class="s1">toDisposable</span><span class="s0">)((()=&gt;</span><span class="s1">l</span><span class="s0">.</span><span class="s1">deleteBuffer</span><span class="s0">(</span><span class="s1">d</span><span class="s0">)))),</span><span class="s1">l</span><span class="s0">.</span><span class="s1">bindBuffer</span><span class="s0">(</span><span class="s1">l</span><span class="s0">.</span><span class="s1">ARRAY_BUFFER</span><span class="s0">,</span><span class="s1">d</span><span class="s0">),</span><span class="s1">l</span><span class="s0">.</span><span class="s1">bufferData</span><span class="s0">(</span><span class="s1">l</span><span class="s0">.</span><span class="s1">ARRAY_BUFFER</span><span class="s0">,</span><span class="s1">c</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">STATIC_DRAW</span><span class="s0">),</span><span class="s1">l</span><span class="s0">.</span><span class="s1">enableVertexAttribArray</span><span class="s0">(</span><span class="s3">3</span><span class="s0">),</span><span class="s1">l</span><span class="s0">.</span><span class="s1">vertexAttribPointer</span><span class="s0">(</span><span class="s3">3</span><span class="s0">,</span><span class="s3">2</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_gl</span><span class="s0">.</span><span class="s1">FLOAT</span><span class="s0">,!</span><span class="s3">1</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">);</span><span class="s4">const </span><span class="s1">_</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Uint8Array</span><span class="s0">([</span><span class="s3">0</span><span class="s0">,</span><span class="s3">1</span><span class="s0">,</span><span class="s3">2</span><span class="s0">,</span><span class="s3">3</span><span class="s0">]),</span><span class="s1">u</span><span class="s0">=</span><span class="s1">l</span><span class="s0">.</span><span class="s1">createBuffer</span><span class="s0">();</span><span class="s4">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">((</span><span class="s3">0</span><span class="s0">,</span><span class="s1">r</span><span class="s0">.</span><span class="s1">toDisposable</span><span class="s0">)((()=&gt;</span><span class="s1">l</span><span class="s0">.</span><span class="s1">deleteBuffer</span><span class="s0">(</span><span class="s1">u</span><span class="s0">)))),</span><span class="s1">l</span><span class="s0">.</span><span class="s1">bindBuffer</span><span class="s0">(</span><span class="s1">l</span><span class="s0">.</span><span class="s1">ELEMENT_ARRAY_BUFFER</span><span class="s0">,</span><span class="s1">u</span><span class="s0">),</span><span class="s1">l</span><span class="s0">.</span><span class="s1">bufferData</span><span class="s0">(</span><span class="s1">l</span><span class="s0">.</span><span class="s1">ELEMENT_ARRAY_BUFFER</span><span class="s0">,</span><span class="s1">_</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">STATIC_DRAW</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_attributesBuffer</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">throwIfFalsy</span><span class="s0">)(</span><span class="s1">l</span><span class="s0">.</span><span class="s1">createBuffer</span><span class="s0">()),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">((</span><span class="s3">0</span><span class="s0">,</span><span class="s1">r</span><span class="s0">.</span><span class="s1">toDisposable</span><span class="s0">)((()=&gt;</span><span class="s1">l</span><span class="s0">.</span><span class="s1">deleteBuffer</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_attributesBuffer</span><span class="s0">)))),</span><span class="s1">l</span><span class="s0">.</span><span class="s1">bindBuffer</span><span class="s0">(</span><span class="s1">l</span><span class="s0">.</span><span class="s1">ARRAY_BUFFER</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_attributesBuffer</span><span class="s0">),</span><span class="s1">l</span><span class="s0">.</span><span class="s1">enableVertexAttribArray</span><span class="s0">(</span><span class="s3">0</span><span class="s0">),</span><span class="s1">l</span><span class="s0">.</span><span class="s1">vertexAttribPointer</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s3">2</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">FLOAT</span><span class="s0">,!</span><span class="s3">1</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s3">0</span><span class="s0">),</span><span class="s1">l</span><span class="s0">.</span><span class="s1">vertexAttribDivisor</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s3">1</span><span class="s0">),</span><span class="s1">l</span><span class="s0">.</span><span class="s1">enableVertexAttribArray</span><span class="s0">(</span><span class="s3">1</span><span class="s0">),</span><span class="s1">l</span><span class="s0">.</span><span class="s1">vertexAttribPointer</span><span class="s0">(</span><span class="s3">1</span><span class="s0">,</span><span class="s3">2</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">FLOAT</span><span class="s0">,!</span><span class="s3">1</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s3">2</span><span class="s0">*</span><span class="s1">Float32Array</span><span class="s0">.</span><span class="s1">BYTES_PER_ELEMENT</span><span class="s0">),</span><span class="s1">l</span><span class="s0">.</span><span class="s1">vertexAttribDivisor</span><span class="s0">(</span><span class="s3">1</span><span class="s0">,</span><span class="s3">1</span><span class="s0">),</span><span class="s1">l</span><span class="s0">.</span><span class="s1">enableVertexAttribArray</span><span class="s0">(</span><span class="s3">2</span><span class="s0">),</span><span class="s1">l</span><span class="s0">.</span><span class="s1">vertexAttribPointer</span><span class="s0">(</span><span class="s3">2</span><span class="s0">,</span><span class="s3">4</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">FLOAT</span><span class="s0">,!</span><span class="s3">1</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s3">4</span><span class="s0">*</span><span class="s1">Float32Array</span><span class="s0">.</span><span class="s1">BYTES_PER_ELEMENT</span><span class="s0">),</span><span class="s1">l</span><span class="s0">.</span><span class="s1">vertexAttribDivisor</span><span class="s0">(</span><span class="s3">2</span><span class="s0">,</span><span class="s3">1</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_updateCachedColors</span><span class="s0">(</span><span class="s1">o</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">.</span><span class="s1">onChangeColors</span><span class="s0">((</span><span class="s1">e</span><span class="s0">=&gt;{</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_updateCachedColors</span><span class="s0">(</span><span class="s1">e</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_updateViewportRectangle</span><span class="s0">()})))}</span><span class="s1">renderBackgrounds</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_renderVertices</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_vertices</span><span class="s0">)}</span><span class="s1">renderCursor</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_renderVertices</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_verticesCursor</span><span class="s0">)}</span><span class="s1">_renderVertices</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">const </span><span class="s1">t</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_gl</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">useProgram</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_program</span><span class="s0">),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">bindVertexArray</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_vertexArrayObject</span><span class="s0">),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">uniformMatrix4fv</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_projectionLocation</span><span class="s0">,!</span><span class="s3">1</span><span class="s0">,</span><span class="s1">n</span><span class="s0">.</span><span class="s1">PROJECTION_MATRIX</span><span class="s0">),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">bindBuffer</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">ARRAY_BUFFER</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_attributesBuffer</span><span class="s0">),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">bufferData</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">ARRAY_BUFFER</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">attributes</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">DYNAMIC_DRAW</span><span class="s0">),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">drawElementsInstanced</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_gl</span><span class="s0">.</span><span class="s1">TRIANGLE_STRIP</span><span class="s0">,</span><span class="s3">4</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">UNSIGNED_BYTE</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">count</span><span class="s0">)}</span><span class="s1">handleResize</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_updateViewportRectangle</span><span class="s0">()}</span><span class="s1">setDimensions</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_dimensions</span><span class="s0">=</span><span class="s1">e</span><span class="s0">}</span><span class="s1">_updateCachedColors</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_bgFloat</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_colorToFloat32Array</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">background</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_cursorFloat</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_colorToFloat32Array</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">cursor</span><span class="s0">)}</span><span class="s1">_updateViewportRectangle</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_addRectangleFloat</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_vertices</span><span class="s0">.</span><span class="s1">attributes</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">.</span><span class="s1">cols</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">cell</span><span class="s0">.</span><span class="s1">width</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">.</span><span class="s1">rows</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">cell</span><span class="s0">.</span><span class="s1">height</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_bgFloat</span><span class="s0">)}</span><span class="s1">updateBackgrounds</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">const </span><span class="s1">t</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">,</span><span class="s1">i</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_vertices</span><span class="s0">;</span><span class="s4">let </span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">h</span><span class="s0">,</span><span class="s1">l</span><span class="s0">,</span><span class="s1">c</span><span class="s0">,</span><span class="s1">d</span><span class="s0">,</span><span class="s1">_</span><span class="s0">,</span><span class="s1">u</span><span class="s0">,</span><span class="s1">g</span><span class="s0">,</span><span class="s1">v</span><span class="s0">=</span><span class="s3">1</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s1">s</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">s</span><span class="s0">&lt;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rows</span><span class="s0">;</span><span class="s1">s</span><span class="s0">++){</span><span class="s4">for</span><span class="s0">(</span><span class="s1">n</span><span class="s0">=-</span><span class="s3">1</span><span class="s0">,</span><span class="s1">a</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">h</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">,</span><span class="s1">r</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">r</span><span class="s0">&lt;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">cols</span><span class="s0">;</span><span class="s1">r</span><span class="s0">++)</span><span class="s1">c</span><span class="s0">=(</span><span class="s1">s</span><span class="s0">*</span><span class="s1">t</span><span class="s0">.</span><span class="s1">cols</span><span class="s0">+</span><span class="s1">r</span><span class="s0">)*</span><span class="s1">o</span><span class="s0">.</span><span class="s1">RENDER_MODEL_INDICIES_PER_CELL</span><span class="s0">,</span><span class="s1">d</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">cells</span><span class="s0">[</span><span class="s1">c</span><span class="s0">+</span><span class="s1">o</span><span class="s0">.</span><span class="s1">RENDER_MODEL_BG_OFFSET</span><span class="s0">],</span><span class="s1">_</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">cells</span><span class="s0">[</span><span class="s1">c</span><span class="s0">+</span><span class="s1">o</span><span class="s0">.</span><span class="s1">RENDER_MODEL_FG_OFFSET</span><span class="s0">],</span><span class="s1">u</span><span class="s0">=!!(</span><span class="s3">67108864</span><span class="s0">&amp;</span><span class="s1">_</span><span class="s0">),(</span><span class="s1">d</span><span class="s0">!==</span><span class="s1">a</span><span class="s0">||</span><span class="s1">_</span><span class="s0">!==</span><span class="s1">h</span><span class="s0">&amp;&amp;(</span><span class="s1">l</span><span class="s0">||</span><span class="s1">u</span><span class="s0">))&amp;&amp;((</span><span class="s3">0</span><span class="s0">!==</span><span class="s1">a</span><span class="s0">||</span><span class="s1">l</span><span class="s0">&amp;&amp;</span><span class="s3">0</span><span class="s0">!==</span><span class="s1">h</span><span class="s0">)&amp;&amp;(</span><span class="s1">g</span><span class="s0">=</span><span class="s3">8</span><span class="s0">*</span><span class="s1">v</span><span class="s0">++,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_updateRectangle</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">g</span><span class="s0">,</span><span class="s1">h</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">s</span><span class="s0">)),</span><span class="s1">n</span><span class="s0">=</span><span class="s1">r</span><span class="s0">,</span><span class="s1">a</span><span class="s0">=</span><span class="s1">d</span><span class="s0">,</span><span class="s1">h</span><span class="s0">=</span><span class="s1">_</span><span class="s0">,</span><span class="s1">l</span><span class="s0">=</span><span class="s1">u</span><span class="s0">);(</span><span class="s3">0</span><span class="s0">!==</span><span class="s1">a</span><span class="s0">||</span><span class="s1">l</span><span class="s0">&amp;&amp;</span><span class="s3">0</span><span class="s0">!==</span><span class="s1">h</span><span class="s0">)&amp;&amp;(</span><span class="s1">g</span><span class="s0">=</span><span class="s3">8</span><span class="s0">*</span><span class="s1">v</span><span class="s0">++,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_updateRectangle</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">g</span><span class="s0">,</span><span class="s1">h</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">cols</span><span class="s0">,</span><span class="s1">s</span><span class="s0">))}</span><span class="s1">i</span><span class="s0">.</span><span class="s1">count</span><span class="s0">=</span><span class="s1">v</span><span class="s0">}</span><span class="s1">updateCursor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">const </span><span class="s1">t</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_verticesCursor</span><span class="s0">,</span><span class="s1">i</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">cursor</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">i</span><span class="s0">||</span><span class="s2">&quot;block&quot;</span><span class="s0">===</span><span class="s1">i</span><span class="s0">.</span><span class="s1">style</span><span class="s0">)</span><span class="s4">return void</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">count</span><span class="s0">=</span><span class="s3">0</span><span class="s0">);</span><span class="s4">let </span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s2">&quot;bar&quot;</span><span class="s0">!==</span><span class="s1">i</span><span class="s0">.</span><span class="s1">style</span><span class="s0">&amp;&amp;</span><span class="s2">&quot;outline&quot;</span><span class="s0">!==</span><span class="s1">i</span><span class="s0">.</span><span class="s1">style</span><span class="s0">||(</span><span class="s1">s</span><span class="s0">=</span><span class="s3">8</span><span class="s0">*</span><span class="s1">r</span><span class="s0">++,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_addRectangleFloat</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">attributes</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">i</span><span class="s0">.</span><span class="s1">x</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">cell</span><span class="s0">.</span><span class="s1">width</span><span class="s0">,</span><span class="s1">i</span><span class="s0">.</span><span class="s1">y</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">cell</span><span class="s0">.</span><span class="s1">height</span><span class="s0">,</span><span class="s2">&quot;bar&quot;</span><span class="s0">===</span><span class="s1">i</span><span class="s0">.</span><span class="s1">style</span><span class="s0">?</span><span class="s1">i</span><span class="s0">.</span><span class="s1">dpr</span><span class="s0">*</span><span class="s1">i</span><span class="s0">.</span><span class="s1">cursorWidth</span><span class="s0">:</span><span class="s1">i</span><span class="s0">.</span><span class="s1">dpr</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">cell</span><span class="s0">.</span><span class="s1">height</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_cursorFloat</span><span class="s0">)),</span><span class="s2">&quot;underline&quot;</span><span class="s0">!==</span><span class="s1">i</span><span class="s0">.</span><span class="s1">style</span><span class="s0">&amp;&amp;</span><span class="s2">&quot;outline&quot;</span><span class="s0">!==</span><span class="s1">i</span><span class="s0">.</span><span class="s1">style</span><span class="s0">||(</span><span class="s1">s</span><span class="s0">=</span><span class="s3">8</span><span class="s0">*</span><span class="s1">r</span><span class="s0">++,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_addRectangleFloat</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">attributes</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">i</span><span class="s0">.</span><span class="s1">x</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">cell</span><span class="s0">.</span><span class="s1">width</span><span class="s0">,(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">y</span><span class="s0">+</span><span class="s3">1</span><span class="s0">)*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">cell</span><span class="s0">.</span><span class="s1">height</span><span class="s0">-</span><span class="s1">i</span><span class="s0">.</span><span class="s1">dpr</span><span class="s0">,</span><span class="s1">i</span><span class="s0">.</span><span class="s1">width</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">cell</span><span class="s0">.</span><span class="s1">width</span><span class="s0">,</span><span class="s1">i</span><span class="s0">.</span><span class="s1">dpr</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_cursorFloat</span><span class="s0">)),</span><span class="s2">&quot;outline&quot;</span><span class="s0">===</span><span class="s1">i</span><span class="s0">.</span><span class="s1">style</span><span class="s0">&amp;&amp;(</span><span class="s1">s</span><span class="s0">=</span><span class="s3">8</span><span class="s0">*</span><span class="s1">r</span><span class="s0">++,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_addRectangleFloat</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">attributes</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">i</span><span class="s0">.</span><span class="s1">x</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">cell</span><span class="s0">.</span><span class="s1">width</span><span class="s0">,</span><span class="s1">i</span><span class="s0">.</span><span class="s1">y</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">cell</span><span class="s0">.</span><span class="s1">height</span><span class="s0">,</span><span class="s1">i</span><span class="s0">.</span><span class="s1">width</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">cell</span><span class="s0">.</span><span class="s1">width</span><span class="s0">,</span><span class="s1">i</span><span class="s0">.</span><span class="s1">dpr</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_cursorFloat</span><span class="s0">),</span><span class="s1">s</span><span class="s0">=</span><span class="s3">8</span><span class="s0">*</span><span class="s1">r</span><span class="s0">++,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_addRectangleFloat</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">attributes</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">x</span><span class="s0">+</span><span class="s1">i</span><span class="s0">.</span><span class="s1">width</span><span class="s0">)*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">cell</span><span class="s0">.</span><span class="s1">width</span><span class="s0">-</span><span class="s1">i</span><span class="s0">.</span><span class="s1">dpr</span><span class="s0">,</span><span class="s1">i</span><span class="s0">.</span><span class="s1">y</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">cell</span><span class="s0">.</span><span class="s1">height</span><span class="s0">,</span><span class="s1">i</span><span class="s0">.</span><span class="s1">dpr</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">cell</span><span class="s0">.</span><span class="s1">height</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_cursorFloat</span><span class="s0">)),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">count</span><span class="s0">=</span><span class="s1">r</span><span class="s0">}</span><span class="s1">_updateRectangle</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">a</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s3">67108864</span><span class="s0">&amp;</span><span class="s1">i</span><span class="s0">)</span><span class="s4">switch</span><span class="s0">(</span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s1">i</span><span class="s0">){</span><span class="s4">case </span><span class="s3">16777216</span><span class="s0">:</span><span class="s4">case </span><span class="s3">33554432</span><span class="s0">:</span><span class="s1">l</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">ansi</span><span class="s0">[</span><span class="s3">255</span><span class="s0">&amp;</span><span class="s1">i</span><span class="s0">].</span><span class="s1">rgba</span><span class="s0">;</span><span class="s4">break</span><span class="s0">;</span><span class="s4">case </span><span class="s3">50331648</span><span class="s0">:</span><span class="s1">l</span><span class="s0">=(</span><span class="s3">16777215</span><span class="s0">&amp;</span><span class="s1">i</span><span class="s0">)&lt;&lt;</span><span class="s3">8</span><span class="s0">;</span><span class="s4">break</span><span class="s0">;</span><span class="s4">default</span><span class="s0">:</span><span class="s1">l</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">foreground</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">}</span><span class="s4">else switch</span><span class="s0">(</span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s1">s</span><span class="s0">){</span><span class="s4">case </span><span class="s3">16777216</span><span class="s0">:</span><span class="s4">case </span><span class="s3">33554432</span><span class="s0">:</span><span class="s1">l</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">ansi</span><span class="s0">[</span><span class="s3">255</span><span class="s0">&amp;</span><span class="s1">s</span><span class="s0">].</span><span class="s1">rgba</span><span class="s0">;</span><span class="s4">break</span><span class="s0">;</span><span class="s4">case </span><span class="s3">50331648</span><span class="s0">:</span><span class="s1">l</span><span class="s0">=(</span><span class="s3">16777215</span><span class="s0">&amp;</span><span class="s1">s</span><span class="s0">)&lt;&lt;</span><span class="s3">8</span><span class="s0">;</span><span class="s4">break</span><span class="s0">;</span><span class="s4">default</span><span class="s0">:</span><span class="s1">l</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">background</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">}</span><span class="s1">e</span><span class="s0">.</span><span class="s1">attributes</span><span class="s0">.</span><span class="s1">length</span><span class="s0">&lt;</span><span class="s1">t</span><span class="s0">+</span><span class="s3">4</span><span class="s0">&amp;&amp;(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">attributes</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">n</span><span class="s0">.</span><span class="s1">expandFloat32Array</span><span class="s0">)(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">attributes</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">.</span><span class="s1">rows</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">.</span><span class="s1">cols</span><span class="s0">*</span><span class="s3">8</span><span class="s0">)),</span><span class="s1">c</span><span class="s0">=</span><span class="s1">r</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">cell</span><span class="s0">.</span><span class="s1">width</span><span class="s0">,</span><span class="s1">d</span><span class="s0">=</span><span class="s1">a</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">cell</span><span class="s0">.</span><span class="s1">height</span><span class="s0">,</span><span class="s1">_</span><span class="s0">=(</span><span class="s1">l</span><span class="s0">&gt;&gt;</span><span class="s3">24</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">)/</span><span class="s3">255</span><span class="s0">,</span><span class="s1">u</span><span class="s0">=(</span><span class="s1">l</span><span class="s0">&gt;&gt;</span><span class="s3">16</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">)/</span><span class="s3">255</span><span class="s0">,</span><span class="s1">g</span><span class="s0">=(</span><span class="s1">l</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">)/</span><span class="s3">255</span><span class="s0">,</span><span class="s1">v</span><span class="s0">=</span><span class="s3">1</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_addRectangle</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">attributes</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">c</span><span class="s0">,</span><span class="s1">d</span><span class="s0">,(</span><span class="s1">o</span><span class="s0">-</span><span class="s1">r</span><span class="s0">)*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">cell</span><span class="s0">.</span><span class="s1">width</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">cell</span><span class="s0">.</span><span class="s1">height</span><span class="s0">,</span><span class="s1">_</span><span class="s0">,</span><span class="s1">u</span><span class="s0">,</span><span class="s1">g</span><span class="s0">,</span><span class="s1">v</span><span class="s0">)}</span><span class="s1">_addRectangle</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">h</span><span class="s0">,</span><span class="s1">l</span><span class="s0">){</span><span class="s1">e</span><span class="s0">[</span><span class="s1">t</span><span class="s0">]=</span><span class="s1">i</span><span class="s0">/</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">,</span><span class="s1">e</span><span class="s0">[</span><span class="s1">t</span><span class="s0">+</span><span class="s3">1</span><span class="s0">]=</span><span class="s1">s</span><span class="s0">/</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">,</span><span class="s1">e</span><span class="s0">[</span><span class="s1">t</span><span class="s0">+</span><span class="s3">2</span><span class="s0">]=</span><span class="s1">r</span><span class="s0">/</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">,</span><span class="s1">e</span><span class="s0">[</span><span class="s1">t</span><span class="s0">+</span><span class="s3">3</span><span class="s0">]=</span><span class="s1">o</span><span class="s0">/</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">,</span><span class="s1">e</span><span class="s0">[</span><span class="s1">t</span><span class="s0">+</span><span class="s3">4</span><span class="s0">]=</span><span class="s1">n</span><span class="s0">,</span><span class="s1">e</span><span class="s0">[</span><span class="s1">t</span><span class="s0">+</span><span class="s3">5</span><span class="s0">]=</span><span class="s1">a</span><span class="s0">,</span><span class="s1">e</span><span class="s0">[</span><span class="s1">t</span><span class="s0">+</span><span class="s3">6</span><span class="s0">]=</span><span class="s1">h</span><span class="s0">,</span><span class="s1">e</span><span class="s0">[</span><span class="s1">t</span><span class="s0">+</span><span class="s3">7</span><span class="s0">]=</span><span class="s1">l</span><span class="s0">}</span><span class="s1">_addRectangleFloat</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">n</span><span class="s0">){</span><span class="s1">e</span><span class="s0">[</span><span class="s1">t</span><span class="s0">]=</span><span class="s1">i</span><span class="s0">/</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">,</span><span class="s1">e</span><span class="s0">[</span><span class="s1">t</span><span class="s0">+</span><span class="s3">1</span><span class="s0">]=</span><span class="s1">s</span><span class="s0">/</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">,</span><span class="s1">e</span><span class="s0">[</span><span class="s1">t</span><span class="s0">+</span><span class="s3">2</span><span class="s0">]=</span><span class="s1">r</span><span class="s0">/</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">,</span><span class="s1">e</span><span class="s0">[</span><span class="s1">t</span><span class="s0">+</span><span class="s3">3</span><span class="s0">]=</span><span class="s1">o</span><span class="s0">/</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">,</span><span class="s1">e</span><span class="s0">[</span><span class="s1">t</span><span class="s0">+</span><span class="s3">4</span><span class="s0">]=</span><span class="s1">n</span><span class="s0">[</span><span class="s3">0</span><span class="s0">],</span><span class="s1">e</span><span class="s0">[</span><span class="s1">t</span><span class="s0">+</span><span class="s3">5</span><span class="s0">]=</span><span class="s1">n</span><span class="s0">[</span><span class="s3">1</span><span class="s0">],</span><span class="s1">e</span><span class="s0">[</span><span class="s1">t</span><span class="s0">+</span><span class="s3">6</span><span class="s0">]=</span><span class="s1">n</span><span class="s0">[</span><span class="s3">2</span><span class="s0">],</span><span class="s1">e</span><span class="s0">[</span><span class="s1">t</span><span class="s0">+</span><span class="s3">7</span><span class="s0">]=</span><span class="s1">n</span><span class="s0">[</span><span class="s3">3</span><span class="s0">]}</span><span class="s1">_colorToFloat32Array</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">return new </span><span class="s1">Float32Array</span><span class="s0">([(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">&gt;&gt;</span><span class="s3">24</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">)/</span><span class="s3">255</span><span class="s0">,(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">&gt;&gt;</span><span class="s3">16</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">)/</span><span class="s3">255</span><span class="s0">,(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">)/</span><span class="s3">255</span><span class="s0">,(</span><span class="s3">255</span><span class="s0">&amp;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">)/</span><span class="s3">255</span><span class="s0">])}}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">RectangleRenderer</span><span class="s0">=</span><span class="s1">f</span><span class="s0">},</span><span class="s3">310</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">)=&gt;{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">RenderModel</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">COMBINED_CHAR_BIT_MASK</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">RENDER_MODEL_EXT_OFFSET</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">RENDER_MODEL_FG_OFFSET</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">RENDER_MODEL_BG_OFFSET</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">RENDER_MODEL_INDICIES_PER_CELL</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">296</span><span class="s0">);</span><span class="s1">t</span><span class="s0">.</span><span class="s1">RENDER_MODEL_INDICIES_PER_CELL</span><span class="s0">=</span><span class="s3">4</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">RENDER_MODEL_BG_OFFSET</span><span class="s0">=</span><span class="s3">1</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">RENDER_MODEL_FG_OFFSET</span><span class="s0">=</span><span class="s3">2</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">RENDER_MODEL_EXT_OFFSET</span><span class="s0">=</span><span class="s3">3</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">COMBINED_CHAR_BIT_MASK</span><span class="s0">=</span><span class="s3">2147483648</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">RenderModel</span><span class="s0">=</span><span class="s4">class</span><span class="s0">{</span><span class="s1">constructor</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">cells</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Uint32Array</span><span class="s0">(</span><span class="s3">0</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">lineLengths</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Uint32Array</span><span class="s0">(</span><span class="s3">0</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">selection</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">createSelectionRenderModel</span><span class="s0">)()}</span><span class="s1">resize</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s4">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">e</span><span class="s0">*</span><span class="s1">i</span><span class="s0">*</span><span class="s1">t</span><span class="s0">.</span><span class="s1">RENDER_MODEL_INDICIES_PER_CELL</span><span class="s0">;</span><span class="s1">s</span><span class="s0">!==</span><span class="s4">this</span><span class="s0">.</span><span class="s1">cells</span><span class="s0">.</span><span class="s1">length</span><span class="s0">&amp;&amp;(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">cells</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Uint32Array</span><span class="s0">(</span><span class="s1">s</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">lineLengths</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Uint32Array</span><span class="s0">(</span><span class="s1">i</span><span class="s0">))}</span><span class="s1">clear</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">cells</span><span class="s0">.</span><span class="s1">fill</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">lineLengths</span><span class="s0">.</span><span class="s1">fill</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">)}}},</span><span class="s3">666</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">)=&gt;{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">JoinedCellData</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">WebglRenderer</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">820</span><span class="s0">),</span><span class="s1">r</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">274</span><span class="s0">),</span><span class="s1">o</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">627</span><span class="s0">),</span><span class="s1">n</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">457</span><span class="s0">),</span><span class="s1">a</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">56</span><span class="s0">),</span><span class="s1">h</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">374</span><span class="s0">),</span><span class="s1">l</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">345</span><span class="s0">),</span><span class="s1">c</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">859</span><span class="s0">),</span><span class="s1">d</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">147</span><span class="s0">),</span><span class="s1">_</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">782</span><span class="s0">),</span><span class="s1">u</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">855</span><span class="s0">),</span><span class="s1">g</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">965</span><span class="s0">),</span><span class="s1">v</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">742</span><span class="s0">),</span><span class="s1">f</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">310</span><span class="s0">),</span><span class="s1">p</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">733</span><span class="s0">);</span><span class="s4">class </span><span class="s1">C </span><span class="s4">extends </span><span class="s1">c</span><span class="s0">.</span><span class="s1">Disposable</span><span class="s0">{</span><span class="s1">constructor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">d</span><span class="s0">,</span><span class="s1">u</span><span class="s0">,</span><span class="s1">g</span><span class="s0">,</span><span class="s1">v</span><span class="s0">,</span><span class="s1">C</span><span class="s0">){</span><span class="s4">super</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">=</span><span class="s1">e</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_characterJoinerService</span><span class="s0">=</span><span class="s1">t</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_charSizeService</span><span class="s0">=</span><span class="s1">i</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">=</span><span class="s1">n</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_coreService</span><span class="s0">=</span><span class="s1">d</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_decorationService</span><span class="s0">=</span><span class="s1">u</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">=</span><span class="s1">g</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">=</span><span class="s1">v</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_cursorBlinkStateManager</span><span class="s0">=</span><span class="s4">new </span><span class="s1">c</span><span class="s0">.</span><span class="s1">MutableDisposable</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_charAtlasDisposable</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">(</span><span class="s4">new </span><span class="s1">c</span><span class="s0">.</span><span class="s1">MutableDisposable</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_observerDisposable</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">(</span><span class="s4">new </span><span class="s1">c</span><span class="s0">.</span><span class="s1">MutableDisposable</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_model</span><span class="s0">=</span><span class="s4">new </span><span class="s1">f</span><span class="s0">.</span><span class="s1">RenderModel</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_workCell</span><span class="s0">=</span><span class="s4">new </span><span class="s1">_</span><span class="s0">.</span><span class="s1">CellData</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_workCell2</span><span class="s0">=</span><span class="s4">new </span><span class="s1">_</span><span class="s0">.</span><span class="s1">CellData</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_rectangleRenderer</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">(</span><span class="s4">new </span><span class="s1">c</span><span class="s0">.</span><span class="s1">MutableDisposable</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_glyphRenderer</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">(</span><span class="s4">new </span><span class="s1">c</span><span class="s0">.</span><span class="s1">MutableDisposable</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_onChangeTextureAtlas</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">(</span><span class="s4">new </span><span class="s1">l</span><span class="s0">.</span><span class="s1">EventEmitter</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">onChangeTextureAtlas</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_onChangeTextureAtlas</span><span class="s0">.</span><span class="s1">event</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_onAddTextureAtlasCanvas</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">(</span><span class="s4">new </span><span class="s1">l</span><span class="s0">.</span><span class="s1">EventEmitter</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">onAddTextureAtlasCanvas</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_onAddTextureAtlasCanvas</span><span class="s0">.</span><span class="s1">event</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_onRemoveTextureAtlasCanvas</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">(</span><span class="s4">new </span><span class="s1">l</span><span class="s0">.</span><span class="s1">EventEmitter</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">onRemoveTextureAtlasCanvas</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_onRemoveTextureAtlasCanvas</span><span class="s0">.</span><span class="s1">event</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_onRequestRedraw</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">(</span><span class="s4">new </span><span class="s1">l</span><span class="s0">.</span><span class="s1">EventEmitter</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">onRequestRedraw</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_onRequestRedraw</span><span class="s0">.</span><span class="s1">event</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_onContextLoss</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">(</span><span class="s4">new </span><span class="s1">l</span><span class="s0">.</span><span class="s1">EventEmitter</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">onContextLoss</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_onContextLoss</span><span class="s0">.</span><span class="s1">event</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">.</span><span class="s1">onChangeColors</span><span class="s0">((()=&gt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_handleColorChange</span><span class="s0">()))),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_cellColorResolver</span><span class="s0">=</span><span class="s4">new </span><span class="s1">r</span><span class="s0">.</span><span class="s1">CellColorResolver</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_model</span><span class="s0">.</span><span class="s1">selection</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_decorationService</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_core</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">.</span><span class="s1">_core</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_renderLayers</span><span class="s0">=[</span><span class="s4">new </span><span class="s1">p</span><span class="s0">.</span><span class="s1">LinkRenderLayer</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_core</span><span class="s0">.</span><span class="s1">screenElement</span><span class="s0">,</span><span class="s3">2</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_core</span><span class="s0">.</span><span class="s1">linkifier</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">,</span><span class="s1">g</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">)],</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">h</span><span class="s0">.</span><span class="s1">createRenderDimensions</span><span class="s0">)(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_devicePixelRatio</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">dpr</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_updateDimensions</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_updateCursorBlink</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">(</span><span class="s1">g</span><span class="s0">.</span><span class="s1">onOptionChange</span><span class="s0">((()=&gt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_handleOptionsChanged</span><span class="s0">()))),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_canvas</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">mainDocument</span><span class="s0">.</span><span class="s1">createElement</span><span class="s0">(</span><span class="s2">&quot;canvas&quot;</span><span class="s0">);</span><span class="s4">const </span><span class="s1">m</span><span class="s0">={</span><span class="s1">antialias</span><span class="s0">:!</span><span class="s3">1</span><span class="s0">,</span><span class="s1">depth</span><span class="s0">:!</span><span class="s3">1</span><span class="s0">,</span><span class="s1">preserveDrawingBuffer</span><span class="s0">:</span><span class="s1">C</span><span class="s0">};</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_gl</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_canvas</span><span class="s0">.</span><span class="s1">getContext</span><span class="s0">(</span><span class="s2">&quot;webgl2&quot;</span><span class="s0">,</span><span class="s1">m</span><span class="s0">),!</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_gl</span><span class="s0">)</span><span class="s4">throw new </span><span class="s1">Error</span><span class="s0">(</span><span class="s2">&quot;WebGL2 not supported &quot;</span><span class="s0">+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_gl</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">((</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">addDisposableDomListener</span><span class="s0">)(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_canvas</span><span class="s0">,</span><span class="s2">&quot;webglcontextlost&quot;</span><span class="s0">,(</span><span class="s1">e</span><span class="s0">=&gt;{</span><span class="s1">console</span><span class="s0">.</span><span class="s1">log</span><span class="s0">(</span><span class="s2">&quot;webglcontextlost event received&quot;</span><span class="s0">),</span><span class="s1">e</span><span class="s0">.</span><span class="s1">preventDefault</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_contextRestorationTimeout</span><span class="s0">=</span><span class="s1">setTimeout</span><span class="s0">((()=&gt;{</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_contextRestorationTimeout</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">,</span><span class="s1">console</span><span class="s0">.</span><span class="s1">warn</span><span class="s0">(</span><span class="s2">&quot;webgl context not restored; firing onContextLoss&quot;</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_onContextLoss</span><span class="s0">.</span><span class="s1">fire</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)}),</span><span class="s3">3e3</span><span class="s0">)}))),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">((</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">addDisposableDomListener</span><span class="s0">)(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_canvas</span><span class="s0">,</span><span class="s2">&quot;webglcontextrestored&quot;</span><span class="s0">,(</span><span class="s1">e</span><span class="s0">=&gt;{</span><span class="s1">console</span><span class="s0">.</span><span class="s1">warn</span><span class="s0">(</span><span class="s2">&quot;webglcontextrestored event received&quot;</span><span class="s0">),</span><span class="s1">clearTimeout</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_contextRestorationTimeout</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_contextRestorationTimeout</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">,(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">o</span><span class="s0">.</span><span class="s1">removeTerminalFromCache</span><span class="s0">)(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_initializeWebGLState</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_requestRedrawViewport</span><span class="s0">()}))),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_observerDisposable</span><span class="s0">.</span><span class="s1">value</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">a</span><span class="s0">.</span><span class="s1">observeDevicePixelDimensions</span><span class="s0">)(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_canvas</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">window</span><span class="s0">,((</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_setCanvasDevicePixelDimensions</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">))),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">onWindowChange</span><span class="s0">((</span><span class="s1">e</span><span class="s0">=&gt;{</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_observerDisposable</span><span class="s0">.</span><span class="s1">value</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">a</span><span class="s0">.</span><span class="s1">observeDevicePixelDimensions</span><span class="s0">)(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_canvas</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,((</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_setCanvasDevicePixelDimensions</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)))}))),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_core</span><span class="s0">.</span><span class="s1">screenElement</span><span class="s0">.</span><span class="s1">appendChild</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_canvas</span><span class="s0">),[</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_rectangleRenderer</span><span class="s0">.</span><span class="s1">value</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_glyphRenderer</span><span class="s0">.</span><span class="s1">value</span><span class="s0">]=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_initializeWebGLState</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_isAttached</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">window</span><span class="s0">.</span><span class="s1">document</span><span class="s0">.</span><span class="s1">body</span><span class="s0">.</span><span class="s1">contains</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_core</span><span class="s0">.</span><span class="s1">screenElement</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">((</span><span class="s3">0</span><span class="s0">,</span><span class="s1">c</span><span class="s0">.</span><span class="s1">toDisposable</span><span class="s0">)((()=&gt;{</span><span class="s4">for</span><span class="s0">(</span><span class="s4">const </span><span class="s1">e of </span><span class="s4">this</span><span class="s0">.</span><span class="s1">_renderLayers</span><span class="s0">)</span><span class="s1">e</span><span class="s0">.</span><span class="s1">dispose</span><span class="s0">();</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_canvas</span><span class="s0">.</span><span class="s1">parentElement</span><span class="s0">?.</span><span class="s1">removeChild</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_canvas</span><span class="s0">),(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">o</span><span class="s0">.</span><span class="s1">removeTerminalFromCache</span><span class="s0">)(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">)})))}</span><span class="s1">get textureAtlas</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">_charAtlas</span><span class="s0">?.</span><span class="s1">pages</span><span class="s0">[</span><span class="s3">0</span><span class="s0">].</span><span class="s1">canvas</span><span class="s0">}</span><span class="s1">_handleColorChange</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_refreshCharAtlas</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_clearModel</span><span class="s0">(!</span><span class="s3">0</span><span class="s0">)}</span><span class="s1">handleDevicePixelRatioChange</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_devicePixelRatio</span><span class="s0">!==</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">dpr</span><span class="s0">&amp;&amp;(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_devicePixelRatio</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">dpr</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">handleResize</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">.</span><span class="s1">cols</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">.</span><span class="s1">rows</span><span class="s0">))}</span><span class="s1">handleResize</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_updateDimensions</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_model</span><span class="s0">.</span><span class="s1">resize</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">.</span><span class="s1">cols</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">.</span><span class="s1">rows</span><span class="s0">);</span><span class="s4">for</span><span class="s0">(</span><span class="s4">const </span><span class="s1">i of </span><span class="s4">this</span><span class="s0">.</span><span class="s1">_renderLayers</span><span class="s0">)</span><span class="s1">i</span><span class="s0">.</span><span class="s1">resize</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_canvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_canvas</span><span class="s0">.</span><span class="s1">style</span><span class="s0">.</span><span class="s1">width</span><span class="s0">=</span><span class="s2">`</span><span class="s1">$</span><span class="s0">{</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">css</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">}</span><span class="s2">px`</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_canvas</span><span class="s0">.</span><span class="s1">style</span><span class="s0">.</span><span class="s1">height</span><span class="s0">=</span><span class="s2">`</span><span class="s1">$</span><span class="s0">{</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">css</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">}</span><span class="s2">px`</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_core</span><span class="s0">.</span><span class="s1">screenElement</span><span class="s0">.</span><span class="s1">style</span><span class="s0">.</span><span class="s1">width</span><span class="s0">=</span><span class="s2">`</span><span class="s1">$</span><span class="s0">{</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">css</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">}</span><span class="s2">px`</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_core</span><span class="s0">.</span><span class="s1">screenElement</span><span class="s0">.</span><span class="s1">style</span><span class="s0">.</span><span class="s1">height</span><span class="s0">=</span><span class="s2">`</span><span class="s1">$</span><span class="s0">{</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">css</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">}</span><span class="s2">px`</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_rectangleRenderer</span><span class="s0">.</span><span class="s1">value</span><span class="s0">?.</span><span class="s1">setDimensions</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_rectangleRenderer</span><span class="s0">.</span><span class="s1">value</span><span class="s0">?.</span><span class="s1">handleResize</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_glyphRenderer</span><span class="s0">.</span><span class="s1">value</span><span class="s0">?.</span><span class="s1">setDimensions</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_glyphRenderer</span><span class="s0">.</span><span class="s1">value</span><span class="s0">?.</span><span class="s1">handleResize</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_refreshCharAtlas</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_clearModel</span><span class="s0">(!</span><span class="s3">1</span><span class="s0">)}</span><span class="s1">handleCharSizeChanged</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">handleResize</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">.</span><span class="s1">cols</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">.</span><span class="s1">rows</span><span class="s0">)}</span><span class="s1">handleBlur</span><span class="s0">(){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">const </span><span class="s1">e of </span><span class="s4">this</span><span class="s0">.</span><span class="s1">_renderLayers</span><span class="s0">)</span><span class="s1">e</span><span class="s0">.</span><span class="s1">handleBlur</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_cursorBlinkStateManager</span><span class="s0">.</span><span class="s1">value</span><span class="s0">?.</span><span class="s1">pause</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_requestRedrawViewport</span><span class="s0">()}</span><span class="s1">handleFocus</span><span class="s0">(){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">const </span><span class="s1">e of </span><span class="s4">this</span><span class="s0">.</span><span class="s1">_renderLayers</span><span class="s0">)</span><span class="s1">e</span><span class="s0">.</span><span class="s1">handleFocus</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_cursorBlinkStateManager</span><span class="s0">.</span><span class="s1">value</span><span class="s0">?.</span><span class="s1">resume</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_requestRedrawViewport</span><span class="s0">()}</span><span class="s1">handleSelectionChanged</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">const </span><span class="s1">s of </span><span class="s4">this</span><span class="s0">.</span><span class="s1">_renderLayers</span><span class="s0">)</span><span class="s1">s</span><span class="s0">.</span><span class="s1">handleSelectionChanged</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_model</span><span class="s0">.</span><span class="s1">selection</span><span class="s0">.</span><span class="s1">update</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_core</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_requestRedrawViewport</span><span class="s0">()}</span><span class="s1">handleCursorMove</span><span class="s0">(){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">const </span><span class="s1">e of </span><span class="s4">this</span><span class="s0">.</span><span class="s1">_renderLayers</span><span class="s0">)</span><span class="s1">e</span><span class="s0">.</span><span class="s1">handleCursorMove</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_cursorBlinkStateManager</span><span class="s0">.</span><span class="s1">value</span><span class="s0">?.</span><span class="s1">restartBlinkAnimation</span><span class="s0">()}</span><span class="s1">_handleOptionsChanged</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_updateDimensions</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_refreshCharAtlas</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_updateCursorBlink</span><span class="s0">()}</span><span class="s1">_initializeWebGLState</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">_rectangleRenderer</span><span class="s0">.</span><span class="s1">value</span><span class="s0">=</span><span class="s4">new </span><span class="s1">v</span><span class="s0">.</span><span class="s1">RectangleRenderer</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_gl</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_glyphRenderer</span><span class="s0">.</span><span class="s1">value</span><span class="s0">=</span><span class="s4">new </span><span class="s1">g</span><span class="s0">.</span><span class="s1">GlyphRenderer</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_gl</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">handleCharSizeChanged</span><span class="s0">(),[</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_rectangleRenderer</span><span class="s0">.</span><span class="s1">value</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_glyphRenderer</span><span class="s0">.</span><span class="s1">value</span><span class="s0">]}</span><span class="s1">_refreshCharAtlas</span><span class="s0">(){</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">char</span><span class="s0">.</span><span class="s1">width</span><span class="s0">&lt;=</span><span class="s3">0</span><span class="s0">&amp;&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">char</span><span class="s0">.</span><span class="s1">height</span><span class="s0">&lt;=</span><span class="s3">0</span><span class="s0">)</span><span class="s4">return void</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_isAttached</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">);</span><span class="s4">const </span><span class="s1">e</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">o</span><span class="s0">.</span><span class="s1">acquireTextureAtlas</span><span class="s0">)(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">.</span><span class="s1">rawOptions</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">cell</span><span class="s0">.</span><span class="s1">width</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">cell</span><span class="s0">.</span><span class="s1">height</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">char</span><span class="s0">.</span><span class="s1">width</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">char</span><span class="s0">.</span><span class="s1">height</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">dpr</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_charAtlas</span><span class="s0">!==</span><span class="s1">e</span><span class="s0">&amp;&amp;(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_onChangeTextureAtlas</span><span class="s0">.</span><span class="s1">fire</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">pages</span><span class="s0">[</span><span class="s3">0</span><span class="s0">].</span><span class="s1">canvas</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_charAtlasDisposable</span><span class="s0">.</span><span class="s1">value</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">c</span><span class="s0">.</span><span class="s1">getDisposeArrayDisposable</span><span class="s0">)([(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">forwardEvent</span><span class="s0">)(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">onAddTextureAtlasCanvas</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_onAddTextureAtlasCanvas</span><span class="s0">),(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">forwardEvent</span><span class="s0">)(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">onRemoveTextureAtlasCanvas</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_onRemoveTextureAtlasCanvas</span><span class="s0">)])),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_charAtlas</span><span class="s0">=</span><span class="s1">e</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_charAtlas</span><span class="s0">.</span><span class="s1">warmUp</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_glyphRenderer</span><span class="s0">.</span><span class="s1">value</span><span class="s0">?.</span><span class="s1">setAtlas</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_charAtlas</span><span class="s0">)}</span><span class="s1">_clearModel</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_model</span><span class="s0">.</span><span class="s1">clear</span><span class="s0">(),</span><span class="s1">e</span><span class="s0">&amp;&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_glyphRenderer</span><span class="s0">.</span><span class="s1">value</span><span class="s0">?.</span><span class="s1">clear</span><span class="s0">()}</span><span class="s1">clearTextureAtlas</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_charAtlas</span><span class="s0">?.</span><span class="s1">clearTexture</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_clearModel</span><span class="s0">(!</span><span class="s3">0</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_requestRedrawViewport</span><span class="s0">()}</span><span class="s1">clear</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_clearModel</span><span class="s0">(!</span><span class="s3">0</span><span class="s0">);</span><span class="s4">for</span><span class="s0">(</span><span class="s4">const </span><span class="s1">e of </span><span class="s4">this</span><span class="s0">.</span><span class="s1">_renderLayers</span><span class="s0">)</span><span class="s1">e</span><span class="s0">.</span><span class="s1">reset</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_cursorBlinkStateManager</span><span class="s0">.</span><span class="s1">value</span><span class="s0">?.</span><span class="s1">restartBlinkAnimation</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_updateCursorBlink</span><span class="s0">()}</span><span class="s1">registerCharacterJoiner</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">return</span><span class="s0">-</span><span class="s3">1</span><span class="s0">}</span><span class="s1">deregisterCharacterJoiner</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">return</span><span class="s0">!</span><span class="s3">1</span><span class="s0">}</span><span class="s1">renderRows</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(!</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_isAttached</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(!(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">window</span><span class="s0">.</span><span class="s1">document</span><span class="s0">.</span><span class="s1">body</span><span class="s0">.</span><span class="s1">contains</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_core</span><span class="s0">.</span><span class="s1">screenElement</span><span class="s0">)&amp;&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_charSizeService</span><span class="s0">.</span><span class="s1">width</span><span class="s0">&amp;&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_charSizeService</span><span class="s0">.</span><span class="s1">height</span><span class="s0">))</span><span class="s4">return</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_updateDimensions</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_refreshCharAtlas</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_isAttached</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">}</span><span class="s4">for</span><span class="s0">(</span><span class="s4">const </span><span class="s1">i of </span><span class="s4">this</span><span class="s0">.</span><span class="s1">_renderLayers</span><span class="s0">)</span><span class="s1">i</span><span class="s0">.</span><span class="s1">handleGridChanged</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_glyphRenderer</span><span class="s0">.</span><span class="s1">value</span><span class="s0">&amp;&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_rectangleRenderer</span><span class="s0">.</span><span class="s1">value</span><span class="s0">&amp;&amp;(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_glyphRenderer</span><span class="s0">.</span><span class="s1">value</span><span class="s0">.</span><span class="s1">beginFrame</span><span class="s0">()?(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_clearModel</span><span class="s0">(!</span><span class="s3">0</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_updateModel</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">.</span><span class="s1">rows</span><span class="s0">-</span><span class="s3">1</span><span class="s0">)):</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_updateModel</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_rectangleRenderer</span><span class="s0">.</span><span class="s1">value</span><span class="s0">.</span><span class="s1">renderBackgrounds</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_glyphRenderer</span><span class="s0">.</span><span class="s1">value</span><span class="s0">.</span><span class="s1">render</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_model</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_cursorBlinkStateManager</span><span class="s0">.</span><span class="s1">value</span><span class="s0">&amp;&amp;!</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_cursorBlinkStateManager</span><span class="s0">.</span><span class="s1">value</span><span class="s0">.</span><span class="s1">isCursorVisible</span><span class="s0">||</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_rectangleRenderer</span><span class="s0">.</span><span class="s1">value</span><span class="s0">.</span><span class="s1">renderCursor</span><span class="s0">())}</span><span class="s1">_updateCursorBlink</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">.</span><span class="s1">options</span><span class="s0">.</span><span class="s1">cursorBlink</span><span class="s0">?</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_cursorBlinkStateManager</span><span class="s0">.</span><span class="s1">value</span><span class="s0">=</span><span class="s4">new </span><span class="s1">n</span><span class="s0">.</span><span class="s1">CursorBlinkStateManager</span><span class="s0">((()=&gt;{</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_requestRedrawCursor</span><span class="s0">()}),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">):</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_cursorBlinkStateManager</span><span class="s0">.</span><span class="s1">clear</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_requestRedrawCursor</span><span class="s0">()}</span><span class="s1">_updateModel</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">){</span><span class="s4">const </span><span class="s1">i</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_core</span><span class="s0">;</span><span class="s4">let </span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">h</span><span class="s0">,</span><span class="s1">l</span><span class="s0">,</span><span class="s1">c</span><span class="s0">,</span><span class="s1">d</span><span class="s0">,</span><span class="s1">_</span><span class="s0">,</span><span class="s1">g</span><span class="s0">,</span><span class="s1">v</span><span class="s0">,</span><span class="s1">p</span><span class="s0">,</span><span class="s1">C</span><span class="s0">,</span><span class="s1">x</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_workCell</span><span class="s0">;</span><span class="s1">e</span><span class="s0">=</span><span class="s1">L</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">i</span><span class="s0">.</span><span class="s1">rows</span><span class="s0">-</span><span class="s3">1</span><span class="s0">,</span><span class="s3">0</span><span class="s0">),</span><span class="s1">t</span><span class="s0">=</span><span class="s1">L</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">.</span><span class="s1">rows</span><span class="s0">-</span><span class="s3">1</span><span class="s0">,</span><span class="s3">0</span><span class="s0">);</span><span class="s4">const </span><span class="s1">w</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">.</span><span class="s1">buffer</span><span class="s0">.</span><span class="s1">active</span><span class="s0">.</span><span class="s1">baseY</span><span class="s0">+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">.</span><span class="s1">buffer</span><span class="s0">.</span><span class="s1">active</span><span class="s0">.</span><span class="s1">cursorY</span><span class="s0">,</span><span class="s1">b</span><span class="s0">=</span><span class="s1">w</span><span class="s0">-</span><span class="s1">i</span><span class="s0">.</span><span class="s1">buffer</span><span class="s0">.</span><span class="s1">ydisp</span><span class="s0">,</span><span class="s1">M</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">min</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">.</span><span class="s1">buffer</span><span class="s0">.</span><span class="s1">active</span><span class="s0">.</span><span class="s1">cursorX</span><span class="s0">,</span><span class="s1">i</span><span class="s0">.</span><span class="s1">cols</span><span class="s0">-</span><span class="s3">1</span><span class="s0">);</span><span class="s4">let </span><span class="s1">R</span><span class="s0">=-</span><span class="s3">1</span><span class="s0">;</span><span class="s4">const </span><span class="s1">y</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_coreService</span><span class="s0">.</span><span class="s1">isCursorInitialized</span><span class="s0">&amp;&amp;!</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_coreService</span><span class="s0">.</span><span class="s1">isCursorHidden</span><span class="s0">&amp;&amp;(!</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_cursorBlinkStateManager</span><span class="s0">.</span><span class="s1">value</span><span class="s0">||</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_cursorBlinkStateManager</span><span class="s0">.</span><span class="s1">value</span><span class="s0">.</span><span class="s1">isCursorVisible</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_model</span><span class="s0">.</span><span class="s1">cursor</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">let </span><span class="s1">A</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s1">r</span><span class="s0">=</span><span class="s1">e</span><span class="s0">;</span><span class="s1">r</span><span class="s0">&lt;=</span><span class="s1">t</span><span class="s0">;</span><span class="s1">r</span><span class="s0">++)</span><span class="s4">for</span><span class="s0">(</span><span class="s1">o</span><span class="s0">=</span><span class="s1">r</span><span class="s0">+</span><span class="s1">i</span><span class="s0">.</span><span class="s1">buffer</span><span class="s0">.</span><span class="s1">ydisp</span><span class="s0">,</span><span class="s1">n</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">buffer</span><span class="s0">.</span><span class="s1">lines</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">o</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_model</span><span class="s0">.</span><span class="s1">lineLengths</span><span class="s0">[</span><span class="s1">r</span><span class="s0">]=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">a</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_characterJoinerService</span><span class="s0">.</span><span class="s1">getJoinedCharacters</span><span class="s0">(</span><span class="s1">o</span><span class="s0">),</span><span class="s1">p</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">p</span><span class="s0">&lt;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">cols</span><span class="s0">;</span><span class="s1">p</span><span class="s0">++)</span><span class="s4">if</span><span class="s0">(</span><span class="s1">s</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_cellColorResolver</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">,</span><span class="s1">n</span><span class="s0">.</span><span class="s1">loadCell</span><span class="s0">(</span><span class="s1">p</span><span class="s0">,</span><span class="s1">x</span><span class="s0">),</span><span class="s3">0</span><span class="s0">===</span><span class="s1">p</span><span class="s0">&amp;&amp;(</span><span class="s1">s</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_cellColorResolver</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">),</span><span class="s1">h</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">,</span><span class="s1">l</span><span class="s0">=</span><span class="s1">p</span><span class="s0">,</span><span class="s1">a</span><span class="s0">.</span><span class="s1">length</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">&amp;&amp;</span><span class="s1">p</span><span class="s0">===</span><span class="s1">a</span><span class="s0">[</span><span class="s3">0</span><span class="s0">][</span><span class="s3">0</span><span class="s0">]&amp;&amp;(</span><span class="s1">h</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">,</span><span class="s1">c</span><span class="s0">=</span><span class="s1">a</span><span class="s0">.</span><span class="s1">shift</span><span class="s0">(),</span><span class="s1">x</span><span class="s0">=</span><span class="s4">new </span><span class="s1">m</span><span class="s0">(</span><span class="s1">x</span><span class="s0">,</span><span class="s1">n</span><span class="s0">.</span><span class="s1">translateToString</span><span class="s0">(!</span><span class="s3">0</span><span class="s0">,</span><span class="s1">c</span><span class="s0">[</span><span class="s3">0</span><span class="s0">],</span><span class="s1">c</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]),</span><span class="s1">c</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]-</span><span class="s1">c</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]),</span><span class="s1">l</span><span class="s0">=</span><span class="s1">c</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]-</span><span class="s3">1</span><span class="s0">),</span><span class="s1">d</span><span class="s0">=</span><span class="s1">x</span><span class="s0">.</span><span class="s1">getChars</span><span class="s0">(),</span><span class="s1">_</span><span class="s0">=</span><span class="s1">x</span><span class="s0">.</span><span class="s1">getCode</span><span class="s0">(),</span><span class="s1">v</span><span class="s0">=(</span><span class="s1">r</span><span class="s0">*</span><span class="s1">i</span><span class="s0">.</span><span class="s1">cols</span><span class="s0">+</span><span class="s1">p</span><span class="s0">)*</span><span class="s1">f</span><span class="s0">.</span><span class="s1">RENDER_MODEL_INDICIES_PER_CELL</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_cellColorResolver</span><span class="s0">.</span><span class="s1">resolve</span><span class="s0">(</span><span class="s1">x</span><span class="s0">,</span><span class="s1">p</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">cell</span><span class="s0">.</span><span class="s1">width</span><span class="s0">),</span><span class="s1">y</span><span class="s0">&amp;&amp;</span><span class="s1">o</span><span class="s0">===</span><span class="s1">w</span><span class="s0">&amp;&amp;(</span><span class="s1">p</span><span class="s0">===</span><span class="s1">M</span><span class="s0">&amp;&amp;(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_model</span><span class="s0">.</span><span class="s1">cursor</span><span class="s0">={</span><span class="s1">x</span><span class="s0">:</span><span class="s1">M</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s1">b</span><span class="s0">,</span><span class="s1">width</span><span class="s0">:</span><span class="s1">x</span><span class="s0">.</span><span class="s1">getWidth</span><span class="s0">(),</span><span class="s1">style</span><span class="s0">:</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">isFocused</span><span class="s0">?</span><span class="s1">i</span><span class="s0">.</span><span class="s1">options</span><span class="s0">.</span><span class="s1">cursorStyle</span><span class="s0">||</span><span class="s2">&quot;block&quot;</span><span class="s0">:</span><span class="s1">i</span><span class="s0">.</span><span class="s1">options</span><span class="s0">.</span><span class="s1">cursorInactiveStyle</span><span class="s0">,</span><span class="s1">cursorWidth</span><span class="s0">:</span><span class="s1">i</span><span class="s0">.</span><span class="s1">options</span><span class="s0">.</span><span class="s1">cursorWidth</span><span class="s0">,</span><span class="s1">dpr</span><span class="s0">:</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_devicePixelRatio</span><span class="s0">},</span><span class="s1">R</span><span class="s0">=</span><span class="s1">M</span><span class="s0">+</span><span class="s1">x</span><span class="s0">.</span><span class="s1">getWidth</span><span class="s0">()-</span><span class="s3">1</span><span class="s0">),</span><span class="s1">p</span><span class="s0">&gt;=</span><span class="s1">M</span><span class="s0">&amp;&amp;</span><span class="s1">p</span><span class="s0">&lt;=</span><span class="s1">R</span><span class="s0">&amp;&amp;(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">isFocused</span><span class="s0">&amp;&amp;</span><span class="s2">&quot;block&quot;</span><span class="s0">===(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">options</span><span class="s0">.</span><span class="s1">cursorStyle</span><span class="s0">||</span><span class="s2">&quot;block&quot;</span><span class="s0">)||!</span><span class="s3">1</span><span class="s0">===</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">isFocused</span><span class="s0">&amp;&amp;</span><span class="s2">&quot;block&quot;</span><span class="s0">===</span><span class="s1">i</span><span class="s0">.</span><span class="s1">options</span><span class="s0">.</span><span class="s1">cursorInactiveStyle</span><span class="s0">)&amp;&amp;(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_cellColorResolver</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">=</span><span class="s3">50331648</span><span class="s0">|</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">cursorAccent</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">&amp;</span><span class="s3">16777215</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_cellColorResolver</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">=</span><span class="s3">50331648</span><span class="s0">|</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">cursor</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">&amp;</span><span class="s3">16777215</span><span class="s0">)),</span><span class="s1">_</span><span class="s0">!==</span><span class="s1">u</span><span class="s0">.</span><span class="s1">NULL_CELL_CODE</span><span class="s0">&amp;&amp;(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_model</span><span class="s0">.</span><span class="s1">lineLengths</span><span class="s0">[</span><span class="s1">r</span><span class="s0">]=</span><span class="s1">p</span><span class="s0">+</span><span class="s3">1</span><span class="s0">),(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_model</span><span class="s0">.</span><span class="s1">cells</span><span class="s0">[</span><span class="s1">v</span><span class="s0">]!==</span><span class="s1">_</span><span class="s0">||</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_model</span><span class="s0">.</span><span class="s1">cells</span><span class="s0">[</span><span class="s1">v</span><span class="s0">+</span><span class="s1">f</span><span class="s0">.</span><span class="s1">RENDER_MODEL_BG_OFFSET</span><span class="s0">]!==</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_cellColorResolver</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">||</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_model</span><span class="s0">.</span><span class="s1">cells</span><span class="s0">[</span><span class="s1">v</span><span class="s0">+</span><span class="s1">f</span><span class="s0">.</span><span class="s1">RENDER_MODEL_FG_OFFSET</span><span class="s0">]!==</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_cellColorResolver</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">||</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_model</span><span class="s0">.</span><span class="s1">cells</span><span class="s0">[</span><span class="s1">v</span><span class="s0">+</span><span class="s1">f</span><span class="s0">.</span><span class="s1">RENDER_MODEL_EXT_OFFSET</span><span class="s0">]!==</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_cellColorResolver</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">ext</span><span class="s0">)&amp;&amp;(</span><span class="s1">A</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">,</span><span class="s1">d</span><span class="s0">.</span><span class="s1">length</span><span class="s0">&gt;</span><span class="s3">1</span><span class="s0">&amp;&amp;(</span><span class="s1">_</span><span class="s0">|=</span><span class="s1">f</span><span class="s0">.</span><span class="s1">COMBINED_CHAR_BIT_MASK</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_model</span><span class="s0">.</span><span class="s1">cells</span><span class="s0">[</span><span class="s1">v</span><span class="s0">]=</span><span class="s1">_</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_model</span><span class="s0">.</span><span class="s1">cells</span><span class="s0">[</span><span class="s1">v</span><span class="s0">+</span><span class="s1">f</span><span class="s0">.</span><span class="s1">RENDER_MODEL_BG_OFFSET</span><span class="s0">]=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_cellColorResolver</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_model</span><span class="s0">.</span><span class="s1">cells</span><span class="s0">[</span><span class="s1">v</span><span class="s0">+</span><span class="s1">f</span><span class="s0">.</span><span class="s1">RENDER_MODEL_FG_OFFSET</span><span class="s0">]=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_cellColorResolver</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_model</span><span class="s0">.</span><span class="s1">cells</span><span class="s0">[</span><span class="s1">v</span><span class="s0">+</span><span class="s1">f</span><span class="s0">.</span><span class="s1">RENDER_MODEL_EXT_OFFSET</span><span class="s0">]=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_cellColorResolver</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">ext</span><span class="s0">,</span><span class="s1">g</span><span class="s0">=</span><span class="s1">x</span><span class="s0">.</span><span class="s1">getWidth</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_glyphRenderer</span><span class="s0">.</span><span class="s1">value</span><span class="s0">.</span><span class="s1">updateCell</span><span class="s0">(</span><span class="s1">p</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">_</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_cellColorResolver</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_cellColorResolver</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_cellColorResolver</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">ext</span><span class="s0">,</span><span class="s1">d</span><span class="s0">,</span><span class="s1">g</span><span class="s0">,</span><span class="s1">s</span><span class="s0">),</span><span class="s1">h</span><span class="s0">))</span><span class="s4">for</span><span class="s0">(</span><span class="s1">x</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_workCell</span><span class="s0">,</span><span class="s1">p</span><span class="s0">++;</span><span class="s1">p</span><span class="s0">&lt;</span><span class="s1">l</span><span class="s0">;</span><span class="s1">p</span><span class="s0">++)</span><span class="s1">C</span><span class="s0">=(</span><span class="s1">r</span><span class="s0">*</span><span class="s1">i</span><span class="s0">.</span><span class="s1">cols</span><span class="s0">+</span><span class="s1">p</span><span class="s0">)*</span><span class="s1">f</span><span class="s0">.</span><span class="s1">RENDER_MODEL_INDICIES_PER_CELL</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_glyphRenderer</span><span class="s0">.</span><span class="s1">value</span><span class="s0">.</span><span class="s1">updateCell</span><span class="s0">(</span><span class="s1">p</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">u</span><span class="s0">.</span><span class="s1">NULL_CELL_CODE</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s1">u</span><span class="s0">.</span><span class="s1">NULL_CELL_CHAR</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_model</span><span class="s0">.</span><span class="s1">cells</span><span class="s0">[</span><span class="s1">C</span><span class="s0">]=</span><span class="s1">u</span><span class="s0">.</span><span class="s1">NULL_CELL_CODE</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_model</span><span class="s0">.</span><span class="s1">cells</span><span class="s0">[</span><span class="s1">C</span><span class="s0">+</span><span class="s1">f</span><span class="s0">.</span><span class="s1">RENDER_MODEL_BG_OFFSET</span><span class="s0">]=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_cellColorResolver</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_model</span><span class="s0">.</span><span class="s1">cells</span><span class="s0">[</span><span class="s1">C</span><span class="s0">+</span><span class="s1">f</span><span class="s0">.</span><span class="s1">RENDER_MODEL_FG_OFFSET</span><span class="s0">]=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_cellColorResolver</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_model</span><span class="s0">.</span><span class="s1">cells</span><span class="s0">[</span><span class="s1">C</span><span class="s0">+</span><span class="s1">f</span><span class="s0">.</span><span class="s1">RENDER_MODEL_EXT_OFFSET</span><span class="s0">]=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_cellColorResolver</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">ext</span><span class="s0">;</span><span class="s1">A</span><span class="s0">&amp;&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_rectangleRenderer</span><span class="s0">.</span><span class="s1">value</span><span class="s0">.</span><span class="s1">updateBackgrounds</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_model</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_rectangleRenderer</span><span class="s0">.</span><span class="s1">value</span><span class="s0">.</span><span class="s1">updateCursor</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_model</span><span class="s0">)}</span><span class="s1">_updateDimensions</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_charSizeService</span><span class="s0">.</span><span class="s1">width</span><span class="s0">&amp;&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_charSizeService</span><span class="s0">.</span><span class="s1">height</span><span class="s0">&amp;&amp;(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">char</span><span class="s0">.</span><span class="s1">width</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">floor</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_charSizeService</span><span class="s0">.</span><span class="s1">width</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_devicePixelRatio</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">char</span><span class="s0">.</span><span class="s1">height</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">ceil</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_charSizeService</span><span class="s0">.</span><span class="s1">height</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_devicePixelRatio</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">cell</span><span class="s0">.</span><span class="s1">height</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">floor</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">char</span><span class="s0">.</span><span class="s1">height</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">.</span><span class="s1">rawOptions</span><span class="s0">.</span><span class="s1">lineHeight</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">char</span><span class="s0">.</span><span class="s1">top</span><span class="s0">=</span><span class="s3">1</span><span class="s0">===</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">.</span><span class="s1">rawOptions</span><span class="s0">.</span><span class="s1">lineHeight</span><span class="s0">?</span><span class="s3">0</span><span class="s0">:</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">round</span><span class="s0">((</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">cell</span><span class="s0">.</span><span class="s1">height</span><span class="s0">-</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">char</span><span class="s0">.</span><span class="s1">height</span><span class="s0">)/</span><span class="s3">2</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">cell</span><span class="s0">.</span><span class="s1">width</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">char</span><span class="s0">.</span><span class="s1">width</span><span class="s0">+</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">round</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">.</span><span class="s1">rawOptions</span><span class="s0">.</span><span class="s1">letterSpacing</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">char</span><span class="s0">.</span><span class="s1">left</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">floor</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">.</span><span class="s1">rawOptions</span><span class="s0">.</span><span class="s1">letterSpacing</span><span class="s0">/</span><span class="s3">2</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">.</span><span class="s1">rows</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">cell</span><span class="s0">.</span><span class="s1">height</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">.</span><span class="s1">cols</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">cell</span><span class="s0">.</span><span class="s1">width</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">css</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">round</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">/</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_devicePixelRatio</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">css</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">round</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">/</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_devicePixelRatio</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">css</span><span class="s0">.</span><span class="s1">cell</span><span class="s0">.</span><span class="s1">height</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">cell</span><span class="s0">.</span><span class="s1">height</span><span class="s0">/</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_devicePixelRatio</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">css</span><span class="s0">.</span><span class="s1">cell</span><span class="s0">.</span><span class="s1">width</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">dimensions</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">cell</span><span class="s0">.</span><span class="s1">width</span><span class="s0">/</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_devicePixelRatio</span><span class="s0">)}</span><span class="s1">_setCanvasDevicePixelDimensions</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">===</span><span class="s1">e</span><span class="s0">&amp;&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_canvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">===</span><span class="s1">t</span><span class="s0">||(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">=</span><span class="s1">e</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_canvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">=</span><span class="s1">t</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_requestRedrawViewport</span><span class="s0">())}</span><span class="s1">_requestRedrawViewport</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_onRequestRedraw</span><span class="s0">.</span><span class="s1">fire</span><span class="s0">({</span><span class="s1">start</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">end</span><span class="s0">:</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">.</span><span class="s1">rows</span><span class="s0">-</span><span class="s3">1</span><span class="s0">})}</span><span class="s1">_requestRedrawCursor</span><span class="s0">(){</span><span class="s4">const </span><span class="s1">e</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">.</span><span class="s1">buffer</span><span class="s0">.</span><span class="s1">active</span><span class="s0">.</span><span class="s1">cursorY</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_onRequestRedraw</span><span class="s0">.</span><span class="s1">fire</span><span class="s0">({</span><span class="s1">start</span><span class="s0">:</span><span class="s1">e</span><span class="s0">,</span><span class="s1">end</span><span class="s0">:</span><span class="s1">e</span><span class="s0">})}}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">WebglRenderer</span><span class="s0">=</span><span class="s1">C</span><span class="s0">;</span><span class="s4">class </span><span class="s1">m </span><span class="s4">extends </span><span class="s1">d</span><span class="s0">.</span><span class="s1">AttributeData</span><span class="s0">{</span><span class="s1">constructor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s4">super</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">content</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">combinedData</span><span class="s0">=</span><span class="s2">&quot;&quot;</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">combinedData</span><span class="s0">=</span><span class="s1">t</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_width</span><span class="s0">=</span><span class="s1">i</span><span class="s0">}</span><span class="s1">isCombined</span><span class="s0">(){</span><span class="s4">return </span><span class="s3">2097152</span><span class="s0">}</span><span class="s1">getWidth</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">_width</span><span class="s0">}</span><span class="s1">getChars</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">combinedData</span><span class="s0">}</span><span class="s1">getCode</span><span class="s0">(){</span><span class="s4">return </span><span class="s3">2097151</span><span class="s0">}</span><span class="s1">setFromCharData</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">throw new </span><span class="s1">Error</span><span class="s0">(</span><span class="s2">&quot;not implemented&quot;</span><span class="s0">)}</span><span class="s1">getAsCharData</span><span class="s0">(){</span><span class="s4">return</span><span class="s0">[</span><span class="s4">this</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getChars</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getWidth</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getCode</span><span class="s0">()]}}</span><span class="s4">function </span><span class="s1">L</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">){</span><span class="s4">return </span><span class="s1">Math</span><span class="s0">.</span><span class="s1">max</span><span class="s0">(</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">min</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">),</span><span class="s1">i</span><span class="s0">)}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">JoinedCellData</span><span class="s0">=</span><span class="s1">m</span><span class="s0">},</span><span class="s3">381</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">)=&gt;{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">GLTexture</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">expandFloat32Array</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">createShader</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">createProgram</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">PROJECTION_MATRIX</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">374</span><span class="s0">);</span><span class="s4">function </span><span class="s1">r</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s4">const </span><span class="s1">r</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">throwIfFalsy</span><span class="s0">)(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">createShader</span><span class="s0">(</span><span class="s1">t</span><span class="s0">));</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">shaderSource</span><span class="s0">(</span><span class="s1">r</span><span class="s0">,</span><span class="s1">i</span><span class="s0">),</span><span class="s1">e</span><span class="s0">.</span><span class="s1">compileShader</span><span class="s0">(</span><span class="s1">r</span><span class="s0">),</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getShaderParameter</span><span class="s0">(</span><span class="s1">r</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">COMPILE_STATUS</span><span class="s0">))</span><span class="s4">return </span><span class="s1">r</span><span class="s0">;</span><span class="s1">console</span><span class="s0">.</span><span class="s1">error</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getShaderInfoLog</span><span class="s0">(</span><span class="s1">r</span><span class="s0">)),</span><span class="s1">e</span><span class="s0">.</span><span class="s1">deleteShader</span><span class="s0">(</span><span class="s1">r</span><span class="s0">)}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">PROJECTION_MATRIX</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Float32Array</span><span class="s0">([</span><span class="s3">2</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,-</span><span class="s3">2</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s3">1</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,-</span><span class="s3">1</span><span class="s0">,</span><span class="s3">1</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s3">1</span><span class="s0">]),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">createProgram</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s4">const </span><span class="s1">o</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">throwIfFalsy</span><span class="s0">)(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">createProgram</span><span class="s0">());</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">attachShader</span><span class="s0">(</span><span class="s1">o</span><span class="s0">,(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">throwIfFalsy</span><span class="s0">)(</span><span class="s1">r</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">VERTEX_SHADER</span><span class="s0">,</span><span class="s1">t</span><span class="s0">))),</span><span class="s1">e</span><span class="s0">.</span><span class="s1">attachShader</span><span class="s0">(</span><span class="s1">o</span><span class="s0">,(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">throwIfFalsy</span><span class="s0">)(</span><span class="s1">r</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">FRAGMENT_SHADER</span><span class="s0">,</span><span class="s1">i</span><span class="s0">))),</span><span class="s1">e</span><span class="s0">.</span><span class="s1">linkProgram</span><span class="s0">(</span><span class="s1">o</span><span class="s0">),</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getProgramParameter</span><span class="s0">(</span><span class="s1">o</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">LINK_STATUS</span><span class="s0">))</span><span class="s4">return </span><span class="s1">o</span><span class="s0">;</span><span class="s1">console</span><span class="s0">.</span><span class="s1">error</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getProgramInfoLog</span><span class="s0">(</span><span class="s1">o</span><span class="s0">)),</span><span class="s1">e</span><span class="s0">.</span><span class="s1">deleteProgram</span><span class="s0">(</span><span class="s1">o</span><span class="s0">)},</span><span class="s1">t</span><span class="s0">.</span><span class="s1">createShader</span><span class="s0">=</span><span class="s1">r</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">expandFloat32Array</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">){</span><span class="s4">const </span><span class="s1">i</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">min</span><span class="s0">(</span><span class="s3">2</span><span class="s0">*</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">,</span><span class="s1">t</span><span class="s0">),</span><span class="s1">s</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Float32Array</span><span class="s0">(</span><span class="s1">i</span><span class="s0">);</span><span class="s4">for</span><span class="s0">(</span><span class="s4">let </span><span class="s1">r</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">r</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">r</span><span class="s0">++)</span><span class="s1">s</span><span class="s0">[</span><span class="s1">r</span><span class="s0">]=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">r</span><span class="s0">];</span><span class="s4">return </span><span class="s1">s</span><span class="s0">},</span><span class="s1">t</span><span class="s0">.</span><span class="s1">GLTexture</span><span class="s0">=</span><span class="s4">class</span><span class="s0">{</span><span class="s1">constructor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">texture</span><span class="s0">=</span><span class="s1">e</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">version</span><span class="s0">=-</span><span class="s3">1</span><span class="s0">}}},</span><span class="s3">592</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">)=&gt;{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">BaseRenderLayer</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">627</span><span class="s0">),</span><span class="s1">r</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">237</span><span class="s0">),</span><span class="s1">o</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">374</span><span class="s0">),</span><span class="s1">n</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">859</span><span class="s0">);</span><span class="s4">class </span><span class="s1">a </span><span class="s4">extends </span><span class="s1">n</span><span class="s0">.</span><span class="s1">Disposable</span><span class="s0">{</span><span class="s1">constructor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">h</span><span class="s0">){</span><span class="s4">super</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_container</span><span class="s0">=</span><span class="s1">t</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_alpha</span><span class="s0">=</span><span class="s1">r</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">=</span><span class="s1">o</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">=</span><span class="s1">a</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">=</span><span class="s1">h</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_deviceCharWidth</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_deviceCharHeight</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_deviceCellWidth</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_deviceCellHeight</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_deviceCharLeft</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_deviceCharTop</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_canvas</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">mainDocument</span><span class="s0">.</span><span class="s1">createElement</span><span class="s0">(</span><span class="s2">&quot;canvas&quot;</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_canvas</span><span class="s0">.</span><span class="s1">classList</span><span class="s0">.</span><span class="s1">add</span><span class="s0">(</span><span class="s2">`xterm-</span><span class="s1">$</span><span class="s0">{</span><span class="s1">i</span><span class="s0">}</span><span class="s2">-layer`</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_canvas</span><span class="s0">.</span><span class="s1">style</span><span class="s0">.</span><span class="s1">zIndex</span><span class="s0">=</span><span class="s1">s</span><span class="s0">.</span><span class="s1">toString</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_initCanvas</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_container</span><span class="s0">.</span><span class="s1">appendChild</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_canvas</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">.</span><span class="s1">onChangeColors</span><span class="s0">((</span><span class="s1">t</span><span class="s0">=&gt;{</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_refreshCharAtlas</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">reset</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)}))),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">((</span><span class="s3">0</span><span class="s0">,</span><span class="s1">n</span><span class="s0">.</span><span class="s1">toDisposable</span><span class="s0">)((()=&gt;{</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_canvas</span><span class="s0">.</span><span class="s1">remove</span><span class="s0">()})))}</span><span class="s1">_initCanvas</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">o</span><span class="s0">.</span><span class="s1">throwIfFalsy</span><span class="s0">)(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_canvas</span><span class="s0">.</span><span class="s1">getContext</span><span class="s0">(</span><span class="s2">&quot;2d&quot;</span><span class="s0">,{</span><span class="s1">alpha</span><span class="s0">:</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_alpha</span><span class="s0">})),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_alpha</span><span class="s0">||</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_clearAll</span><span class="s0">()}</span><span class="s1">handleBlur</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){}</span><span class="s1">handleFocus</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){}</span><span class="s1">handleCursorMove</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){}</span><span class="s1">handleGridChanged</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){}</span><span class="s1">handleSelectionChanged</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">){}</span><span class="s1">_setTransparency</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">===</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_alpha</span><span class="s0">)</span><span class="s4">return</span><span class="s0">;</span><span class="s4">const </span><span class="s1">i</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_canvas</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_alpha</span><span class="s0">=</span><span class="s1">t</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_canvas</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_canvas</span><span class="s0">.</span><span class="s1">cloneNode</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_initCanvas</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_container</span><span class="s0">.</span><span class="s1">replaceChild</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_canvas</span><span class="s0">,</span><span class="s1">i</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_refreshCharAtlas</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">handleGridChanged</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">rows</span><span class="s0">-</span><span class="s3">1</span><span class="s0">)}</span><span class="s1">_refreshCharAtlas</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_deviceCharWidth</span><span class="s0">&lt;=</span><span class="s3">0</span><span class="s0">&amp;&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_deviceCharHeight</span><span class="s0">&lt;=</span><span class="s3">0</span><span class="s0">||(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_charAtlas</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">acquireTextureAtlas</span><span class="s0">)(</span><span class="s1">e</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">.</span><span class="s1">rawOptions</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_deviceCellWidth</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_deviceCellHeight</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_deviceCharWidth</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_deviceCharHeight</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">dpr</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_charAtlas</span><span class="s0">.</span><span class="s1">warmUp</span><span class="s0">())}</span><span class="s1">resize</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_deviceCellWidth</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">cell</span><span class="s0">.</span><span class="s1">width</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_deviceCellHeight</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">cell</span><span class="s0">.</span><span class="s1">height</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_deviceCharWidth</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">char</span><span class="s0">.</span><span class="s1">width</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_deviceCharHeight</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">char</span><span class="s0">.</span><span class="s1">height</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_deviceCharLeft</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">char</span><span class="s0">.</span><span class="s1">left</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_deviceCharTop</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">char</span><span class="s0">.</span><span class="s1">top</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_canvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">device</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_canvas</span><span class="s0">.</span><span class="s1">style</span><span class="s0">.</span><span class="s1">width</span><span class="s0">=</span><span class="s2">`</span><span class="s1">$</span><span class="s0">{</span><span class="s1">t</span><span class="s0">.</span><span class="s1">css</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">}</span><span class="s2">px`</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_canvas</span><span class="s0">.</span><span class="s1">style</span><span class="s0">.</span><span class="s1">height</span><span class="s0">=</span><span class="s2">`</span><span class="s1">$</span><span class="s0">{</span><span class="s1">t</span><span class="s0">.</span><span class="s1">css</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">}</span><span class="s2">px`</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_alpha</span><span class="s0">||</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_clearAll</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_refreshCharAtlas</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">)}</span><span class="s1">_fillBottomLineAtCells</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">=</span><span class="s3">1</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">fillRect</span><span class="s0">(</span><span class="s1">e</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_deviceCellWidth</span><span class="s0">,(</span><span class="s1">t</span><span class="s0">+</span><span class="s3">1</span><span class="s0">)*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_deviceCellHeight</span><span class="s0">-</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">dpr</span><span class="s0">-</span><span class="s3">1</span><span class="s0">,</span><span class="s1">i</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_deviceCellWidth</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">dpr</span><span class="s0">)}</span><span class="s1">_clearAll</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_alpha</span><span class="s0">?</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">clearRect</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_canvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">):(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">fillStyle</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">background</span><span class="s0">.</span><span class="s1">css</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">fillRect</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_canvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">))}</span><span class="s1">_clearCells</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_alpha</span><span class="s0">?</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">clearRect</span><span class="s0">(</span><span class="s1">e</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_deviceCellWidth</span><span class="s0">,</span><span class="s1">t</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_deviceCellHeight</span><span class="s0">,</span><span class="s1">i</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_deviceCellWidth</span><span class="s0">,</span><span class="s1">s</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_deviceCellHeight</span><span class="s0">):(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">fillStyle</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">background</span><span class="s0">.</span><span class="s1">css</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">fillRect</span><span class="s0">(</span><span class="s1">e</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_deviceCellWidth</span><span class="s0">,</span><span class="s1">t</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_deviceCellHeight</span><span class="s0">,</span><span class="s1">i</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_deviceCellWidth</span><span class="s0">,</span><span class="s1">s</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_deviceCellHeight</span><span class="s0">))}</span><span class="s1">_fillCharTrueColor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">font</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_getFont</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,!</span><span class="s3">1</span><span class="s0">,!</span><span class="s3">1</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">textBaseline</span><span class="s0">=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">TEXT_BASELINE</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_clipCell</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getWidth</span><span class="s0">()),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">fillText</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getChars</span><span class="s0">(),</span><span class="s1">i</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_deviceCellWidth</span><span class="s0">+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_deviceCharLeft</span><span class="s0">,</span><span class="s1">s</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_deviceCellHeight</span><span class="s0">+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_deviceCharTop</span><span class="s0">+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_deviceCharHeight</span><span class="s0">)}</span><span class="s1">_clipCell</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">beginPath</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">(</span><span class="s1">e</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_deviceCellWidth</span><span class="s0">,</span><span class="s1">t</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_deviceCellHeight</span><span class="s0">,</span><span class="s1">i</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_deviceCellWidth</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_deviceCellHeight</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">clip</span><span class="s0">()}</span><span class="s1">_getFont</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s4">return</span><span class="s2">`</span><span class="s1">$</span><span class="s0">{</span><span class="s1">i</span><span class="s0">?</span><span class="s2">&quot;italic&quot;</span><span class="s0">:</span><span class="s2">&quot;&quot;</span><span class="s0">} </span><span class="s1">$</span><span class="s0">{</span><span class="s1">t</span><span class="s0">?</span><span class="s1">e</span><span class="s0">.</span><span class="s1">options</span><span class="s0">.</span><span class="s1">fontWeightBold</span><span class="s0">:</span><span class="s1">e</span><span class="s0">.</span><span class="s1">options</span><span class="s0">.</span><span class="s1">fontWeight</span><span class="s0">} </span><span class="s1">$</span><span class="s0">{</span><span class="s1">e</span><span class="s0">.</span><span class="s1">options</span><span class="s0">.</span><span class="s1">fontSize</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">dpr</span><span class="s0">}</span><span class="s2">px </span><span class="s1">$</span><span class="s0">{</span><span class="s1">e</span><span class="s0">.</span><span class="s1">options</span><span class="s0">.</span><span class="s1">fontFamily</span><span class="s0">}</span><span class="s2">`</span><span class="s0">}}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">BaseRenderLayer</span><span class="s0">=</span><span class="s1">a</span><span class="s0">},</span><span class="s3">733</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">)=&gt;{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">LinkRenderLayer</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">197</span><span class="s0">),</span><span class="s1">r</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">237</span><span class="s0">),</span><span class="s1">o</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">592</span><span class="s0">);</span><span class="s4">class </span><span class="s1">n </span><span class="s4">extends </span><span class="s1">o</span><span class="s0">.</span><span class="s1">BaseRenderLayer</span><span class="s0">{</span><span class="s1">constructor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">n</span><span class="s0">){</span><span class="s4">super</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s2">&quot;link&quot;</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,!</span><span class="s3">0</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">n</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">(</span><span class="s1">s</span><span class="s0">.</span><span class="s1">onShowLinkUnderline</span><span class="s0">((</span><span class="s1">e</span><span class="s0">=&gt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_handleShowLinkUnderline</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)))),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">(</span><span class="s1">s</span><span class="s0">.</span><span class="s1">onHideLinkUnderline</span><span class="s0">((</span><span class="s1">e</span><span class="s0">=&gt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_handleHideLinkUnderline</span><span class="s0">(</span><span class="s1">e</span><span class="s0">))))}</span><span class="s1">resize</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">){</span><span class="s4">super</span><span class="s0">.</span><span class="s1">resize</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">}</span><span class="s1">reset</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_clearCurrentLink</span><span class="s0">()}</span><span class="s1">_clearCurrentLink</span><span class="s0">(){</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_clearCells</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">.</span><span class="s1">x1</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">.</span><span class="s1">y1</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">.</span><span class="s1">cols</span><span class="s0">-</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">.</span><span class="s1">x1</span><span class="s0">,</span><span class="s3">1</span><span class="s0">);</span><span class="s4">const </span><span class="s1">e</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">.</span><span class="s1">y2</span><span class="s0">-</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">.</span><span class="s1">y1</span><span class="s0">-</span><span class="s3">1</span><span class="s0">;</span><span class="s1">e</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">&amp;&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_clearCells</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">.</span><span class="s1">y1</span><span class="s0">+</span><span class="s3">1</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">.</span><span class="s1">cols</span><span class="s0">,</span><span class="s1">e</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_clearCells</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">.</span><span class="s1">y2</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">.</span><span class="s1">x2</span><span class="s0">,</span><span class="s3">1</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">}}</span><span class="s1">_handleShowLinkUnderline</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">===</span><span class="s1">r</span><span class="s0">.</span><span class="s1">INVERTED_DEFAULT_COLOR</span><span class="s0">?</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">fillStyle</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">background</span><span class="s0">.</span><span class="s1">css</span><span class="s0">:</span><span class="s4">void </span><span class="s3">0</span><span class="s0">!==</span><span class="s1">e</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">&amp;&amp;(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">is256Color</span><span class="s0">)(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">)?</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">fillStyle</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">ansi</span><span class="s0">[</span><span class="s1">e</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">].</span><span class="s1">css</span><span class="s0">:</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_ctx</span><span class="s0">.</span><span class="s1">fillStyle</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">foreground</span><span class="s0">.</span><span class="s1">css</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">y1</span><span class="s0">===</span><span class="s1">e</span><span class="s0">.</span><span class="s1">y2</span><span class="s0">)</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_fillBottomLineAtCells</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">x1</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">y1</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">x2</span><span class="s0">-</span><span class="s1">e</span><span class="s0">.</span><span class="s1">x1</span><span class="s0">);</span><span class="s4">else</span><span class="s0">{</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_fillBottomLineAtCells</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">x1</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">y1</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">cols</span><span class="s0">-</span><span class="s1">e</span><span class="s0">.</span><span class="s1">x1</span><span class="s0">);</span><span class="s4">for</span><span class="s0">(</span><span class="s4">let </span><span class="s1">t</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">y1</span><span class="s0">+</span><span class="s3">1</span><span class="s0">;</span><span class="s1">t</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">y2</span><span class="s0">;</span><span class="s1">t</span><span class="s0">++)</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_fillBottomLineAtCells</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">cols</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_fillBottomLineAtCells</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">y2</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">x2</span><span class="s0">)}</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_state</span><span class="s0">=</span><span class="s1">e</span><span class="s0">}</span><span class="s1">_handleHideLinkUnderline</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_clearCurrentLink</span><span class="s0">()}}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">LinkRenderLayer</span><span class="s0">=</span><span class="s1">n</span><span class="s0">},</span><span class="s3">820</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">addDisposableDomListener</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">addDisposableDomListener</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">){</span><span class="s1">e</span><span class="s0">.</span><span class="s1">addEventListener</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">);</span><span class="s4">let </span><span class="s1">r</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">;</span><span class="s4">return</span><span class="s0">{</span><span class="s1">dispose</span><span class="s0">:()=&gt;{</span><span class="s1">r</span><span class="s0">||(</span><span class="s1">r</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">removeEventListener</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">))}}}},</span><span class="s3">274</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">)=&gt;{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">CellColorResolver</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">855</span><span class="s0">),</span><span class="s1">r</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">160</span><span class="s0">),</span><span class="s1">o</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">374</span><span class="s0">);</span><span class="s4">let </span><span class="s1">n</span><span class="s0">,</span><span class="s1">a</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">h</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">,</span><span class="s1">c</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">,</span><span class="s1">d</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">,</span><span class="s1">_</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">CellColorResolver</span><span class="s0">=</span><span class="s4">class</span><span class="s0">{</span><span class="s1">constructor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">=</span><span class="s1">e</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_optionService</span><span class="s0">=</span><span class="s1">t</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_selectionRenderModel</span><span class="s0">=</span><span class="s1">i</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_decorationService</span><span class="s0">=</span><span class="s1">s</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">=</span><span class="s1">r</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">=</span><span class="s1">o</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">={</span><span class="s1">fg</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">bg</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">ext</span><span class="s0">:</span><span class="s3">0</span><span class="s0">}}</span><span class="s1">resolve</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">u</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">ext</span><span class="s0">=</span><span class="s3">268435456</span><span class="s0">&amp;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">?</span><span class="s1">e</span><span class="s0">.</span><span class="s1">extended</span><span class="s0">.</span><span class="s1">ext</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">h</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">a</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">c</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">,</span><span class="s1">l</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">,</span><span class="s1">d</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">,</span><span class="s1">n</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">,</span><span class="s1">_</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getCode</span><span class="s0">()!==</span><span class="s1">s</span><span class="s0">.</span><span class="s1">NULL_CELL_CODE</span><span class="s0">&amp;&amp;</span><span class="s3">4</span><span class="s0">===</span><span class="s1">e</span><span class="s0">.</span><span class="s1">extended</span><span class="s0">.</span><span class="s1">underlineStyle</span><span class="s0">){</span><span class="s4">const </span><span class="s1">e</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">max</span><span class="s0">(</span><span class="s3">1</span><span class="s0">,</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">floor</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_optionService</span><span class="s0">.</span><span class="s1">rawOptions</span><span class="s0">.</span><span class="s1">fontSize</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">dpr</span><span class="s0">/</span><span class="s3">15</span><span class="s0">));</span><span class="s1">_</span><span class="s0">=</span><span class="s1">t</span><span class="s0">*</span><span class="s1">u</span><span class="s0">%(</span><span class="s3">2</span><span class="s0">*</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">round</span><span class="s0">(</span><span class="s1">e</span><span class="s0">))}</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_decorationService</span><span class="s0">.</span><span class="s1">forEachDecorationAtCell</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s2">&quot;bottom&quot;</span><span class="s0">,(</span><span class="s1">e</span><span class="s0">=&gt;{</span><span class="s1">e</span><span class="s0">.</span><span class="s1">backgroundColorRGB</span><span class="s0">&amp;&amp;(</span><span class="s1">h</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">backgroundColorRGB</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">&amp;</span><span class="s3">16777215</span><span class="s0">,</span><span class="s1">c</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">),</span><span class="s1">e</span><span class="s0">.</span><span class="s1">foregroundColorRGB</span><span class="s0">&amp;&amp;(</span><span class="s1">a</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">foregroundColorRGB</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">&amp;</span><span class="s3">16777215</span><span class="s0">,</span><span class="s1">l</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">)})),</span><span class="s1">d</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_selectionRenderModel</span><span class="s0">.</span><span class="s1">isCellSelected</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">),</span><span class="s1">d</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s3">67108864</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">||</span><span class="s3">0</span><span class="s0">!=(</span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">)){</span><span class="s4">if</span><span class="s0">(</span><span class="s3">67108864</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">)</span><span class="s4">switch</span><span class="s0">(</span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">){</span><span class="s4">case </span><span class="s3">16777216</span><span class="s0">:</span><span class="s4">case </span><span class="s3">33554432</span><span class="s0">:</span><span class="s1">h</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">ansi</span><span class="s0">[</span><span class="s3">255</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">].</span><span class="s1">rgba</span><span class="s0">;</span><span class="s4">break</span><span class="s0">;</span><span class="s4">case </span><span class="s3">50331648</span><span class="s0">:</span><span class="s1">h</span><span class="s0">=(</span><span class="s3">16777215</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">)&lt;&lt;</span><span class="s3">8</span><span class="s0">|</span><span class="s3">255</span><span class="s0">;</span><span class="s4">break</span><span class="s0">;</span><span class="s4">default</span><span class="s0">:</span><span class="s1">h</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">foreground</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">}</span><span class="s4">else switch</span><span class="s0">(</span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">){</span><span class="s4">case </span><span class="s3">16777216</span><span class="s0">:</span><span class="s4">case </span><span class="s3">33554432</span><span class="s0">:</span><span class="s1">h</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">ansi</span><span class="s0">[</span><span class="s3">255</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">].</span><span class="s1">rgba</span><span class="s0">;</span><span class="s4">break</span><span class="s0">;</span><span class="s4">case </span><span class="s3">50331648</span><span class="s0">:</span><span class="s1">h</span><span class="s0">=(</span><span class="s3">16777215</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">)&lt;&lt;</span><span class="s3">8</span><span class="s0">|</span><span class="s3">255</span><span class="s0">}</span><span class="s1">h</span><span class="s0">=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">.</span><span class="s1">blend</span><span class="s0">(</span><span class="s1">h</span><span class="s0">,</span><span class="s3">4294967040</span><span class="s0">&amp;(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">isFocused</span><span class="s0">?</span><span class="s1">n</span><span class="s0">.</span><span class="s1">selectionBackgroundOpaque</span><span class="s0">:</span><span class="s1">n</span><span class="s0">.</span><span class="s1">selectionInactiveBackgroundOpaque</span><span class="s0">).</span><span class="s1">rgba</span><span class="s0">|</span><span class="s3">128</span><span class="s0">)&gt;&gt;</span><span class="s3">8</span><span class="s0">&amp;</span><span class="s3">16777215</span><span class="s0">}</span><span class="s4">else </span><span class="s1">h</span><span class="s0">=(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">isFocused</span><span class="s0">?</span><span class="s1">n</span><span class="s0">.</span><span class="s1">selectionBackgroundOpaque</span><span class="s0">:</span><span class="s1">n</span><span class="s0">.</span><span class="s1">selectionInactiveBackgroundOpaque</span><span class="s0">).</span><span class="s1">rgba</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">&amp;</span><span class="s3">16777215</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">c</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">,</span><span class="s1">n</span><span class="s0">.</span><span class="s1">selectionForeground</span><span class="s0">&amp;&amp;(</span><span class="s1">a</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">selectionForeground</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">&amp;</span><span class="s3">16777215</span><span class="s0">,</span><span class="s1">l</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">),(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">o</span><span class="s0">.</span><span class="s1">treatGlyphAsBackgroundColor</span><span class="s0">)(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getCode</span><span class="s0">())){</span><span class="s4">if</span><span class="s0">(</span><span class="s3">67108864</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">&amp;&amp;</span><span class="s3">0</span><span class="s0">==(</span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">))</span><span class="s1">a</span><span class="s0">=(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">isFocused</span><span class="s0">?</span><span class="s1">n</span><span class="s0">.</span><span class="s1">selectionBackgroundOpaque</span><span class="s0">:</span><span class="s1">n</span><span class="s0">.</span><span class="s1">selectionInactiveBackgroundOpaque</span><span class="s0">).</span><span class="s1">rgba</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">&amp;</span><span class="s3">16777215</span><span class="s0">;</span><span class="s4">else</span><span class="s0">{</span><span class="s4">if</span><span class="s0">(</span><span class="s3">67108864</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">)</span><span class="s4">switch</span><span class="s0">(</span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">){</span><span class="s4">case </span><span class="s3">16777216</span><span class="s0">:</span><span class="s4">case </span><span class="s3">33554432</span><span class="s0">:</span><span class="s1">a</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">ansi</span><span class="s0">[</span><span class="s3">255</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">].</span><span class="s1">rgba</span><span class="s0">;</span><span class="s4">break</span><span class="s0">;</span><span class="s4">case </span><span class="s3">50331648</span><span class="s0">:</span><span class="s1">a</span><span class="s0">=(</span><span class="s3">16777215</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">)&lt;&lt;</span><span class="s3">8</span><span class="s0">|</span><span class="s3">255</span><span class="s0">}</span><span class="s4">else switch</span><span class="s0">(</span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">){</span><span class="s4">case </span><span class="s3">16777216</span><span class="s0">:</span><span class="s4">case </span><span class="s3">33554432</span><span class="s0">:</span><span class="s1">a</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">ansi</span><span class="s0">[</span><span class="s3">255</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">].</span><span class="s1">rgba</span><span class="s0">;</span><span class="s4">break</span><span class="s0">;</span><span class="s4">case </span><span class="s3">50331648</span><span class="s0">:</span><span class="s1">a</span><span class="s0">=(</span><span class="s3">16777215</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">)&lt;&lt;</span><span class="s3">8</span><span class="s0">|</span><span class="s3">255</span><span class="s0">;</span><span class="s4">break</span><span class="s0">;</span><span class="s4">default</span><span class="s0">:</span><span class="s1">a</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">foreground</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">}</span><span class="s1">a</span><span class="s0">=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">.</span><span class="s1">blend</span><span class="s0">(</span><span class="s1">a</span><span class="s0">,</span><span class="s3">4294967040</span><span class="s0">&amp;(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">isFocused</span><span class="s0">?</span><span class="s1">n</span><span class="s0">.</span><span class="s1">selectionBackgroundOpaque</span><span class="s0">:</span><span class="s1">n</span><span class="s0">.</span><span class="s1">selectionInactiveBackgroundOpaque</span><span class="s0">).</span><span class="s1">rgba</span><span class="s0">|</span><span class="s3">128</span><span class="s0">)&gt;&gt;</span><span class="s3">8</span><span class="s0">&amp;</span><span class="s3">16777215</span><span class="s0">}</span><span class="s1">l</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">}}</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_decorationService</span><span class="s0">.</span><span class="s1">forEachDecorationAtCell</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s2">&quot;top&quot;</span><span class="s0">,(</span><span class="s1">e</span><span class="s0">=&gt;{</span><span class="s1">e</span><span class="s0">.</span><span class="s1">backgroundColorRGB</span><span class="s0">&amp;&amp;(</span><span class="s1">h</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">backgroundColorRGB</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">&amp;</span><span class="s3">16777215</span><span class="s0">,</span><span class="s1">c</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">),</span><span class="s1">e</span><span class="s0">.</span><span class="s1">foregroundColorRGB</span><span class="s0">&amp;&amp;(</span><span class="s1">a</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">foregroundColorRGB</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">&amp;</span><span class="s3">16777215</span><span class="s0">,</span><span class="s1">l</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">)})),</span><span class="s1">c</span><span class="s0">&amp;&amp;(</span><span class="s1">h</span><span class="s0">=</span><span class="s1">d</span><span class="s0">?-</span><span class="s3">16777216</span><span class="s0">&amp;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">&amp;-</span><span class="s3">134217729</span><span class="s0">|</span><span class="s1">h</span><span class="s0">|</span><span class="s3">50331648</span><span class="s0">:-</span><span class="s3">16777216</span><span class="s0">&amp;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">|</span><span class="s1">h</span><span class="s0">|</span><span class="s3">50331648</span><span class="s0">),</span><span class="s1">l</span><span class="s0">&amp;&amp;(</span><span class="s1">a</span><span class="s0">=-</span><span class="s3">16777216</span><span class="s0">&amp;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">&amp;-</span><span class="s3">67108865</span><span class="s0">|</span><span class="s1">a</span><span class="s0">|</span><span class="s3">50331648</span><span class="s0">),</span><span class="s3">67108864</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">&amp;&amp;(</span><span class="s1">c</span><span class="s0">&amp;&amp;!</span><span class="s1">l</span><span class="s0">&amp;&amp;(</span><span class="s1">a</span><span class="s0">=</span><span class="s3">0</span><span class="s0">==(</span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">)?-</span><span class="s3">134217728</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">|</span><span class="s3">16777215</span><span class="s0">&amp;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">background</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">|</span><span class="s3">50331648</span><span class="s0">:-</span><span class="s3">134217728</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">|</span><span class="s3">67108863</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">,</span><span class="s1">l</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">),!</span><span class="s1">c</span><span class="s0">&amp;&amp;</span><span class="s1">l</span><span class="s0">&amp;&amp;(</span><span class="s1">h</span><span class="s0">=</span><span class="s3">0</span><span class="s0">==(</span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">)?-</span><span class="s3">67108864</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">|</span><span class="s3">16777215</span><span class="s0">&amp;</span><span class="s1">n</span><span class="s0">.</span><span class="s1">foreground</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">|</span><span class="s3">50331648</span><span class="s0">:-</span><span class="s3">67108864</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">|</span><span class="s3">67108863</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">,</span><span class="s1">c</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">)),</span><span class="s1">n</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">=</span><span class="s1">c</span><span class="s0">?</span><span class="s1">h</span><span class="s0">:</span><span class="s4">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">=</span><span class="s1">l</span><span class="s0">?</span><span class="s1">a</span><span class="s0">:</span><span class="s4">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">ext</span><span class="s0">&amp;=</span><span class="s3">536870911</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">result</span><span class="s0">.</span><span class="s1">ext</span><span class="s0">|=</span><span class="s1">_</span><span class="s0">&lt;&lt;</span><span class="s3">29</span><span class="s0">&amp;</span><span class="s3">3758096384</span><span class="s0">}}},</span><span class="s3">627</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">)=&gt;{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">removeTerminalFromCache</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">acquireTextureAtlas</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">509</span><span class="s0">),</span><span class="s1">r</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">197</span><span class="s0">),</span><span class="s1">o</span><span class="s0">=[];</span><span class="s1">t</span><span class="s0">.</span><span class="s1">acquireTextureAtlas</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">h</span><span class="s0">,</span><span class="s1">l</span><span class="s0">,</span><span class="s1">c</span><span class="s0">){</span><span class="s4">const </span><span class="s1">d</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">r</span><span class="s0">.</span><span class="s1">generateConfig</span><span class="s0">)(</span><span class="s1">n</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">h</span><span class="s0">,</span><span class="s1">l</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">c</span><span class="s0">);</span><span class="s4">for</span><span class="s0">(</span><span class="s4">let </span><span class="s1">s</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">s</span><span class="s0">&lt;</span><span class="s1">o</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">s</span><span class="s0">++){</span><span class="s4">const </span><span class="s1">t</span><span class="s0">=</span><span class="s1">o</span><span class="s0">[</span><span class="s1">s</span><span class="s0">],</span><span class="s1">i</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">ownedBy</span><span class="s0">.</span><span class="s1">indexOf</span><span class="s0">(</span><span class="s1">e</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">i</span><span class="s0">&gt;=</span><span class="s3">0</span><span class="s0">){</span><span class="s4">if</span><span class="s0">((</span><span class="s3">0</span><span class="s0">,</span><span class="s1">r</span><span class="s0">.</span><span class="s1">configEquals</span><span class="s0">)(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">config</span><span class="s0">,</span><span class="s1">d</span><span class="s0">))</span><span class="s4">return </span><span class="s1">t</span><span class="s0">.</span><span class="s1">atlas</span><span class="s0">;</span><span class="s3">1</span><span class="s0">===</span><span class="s1">t</span><span class="s0">.</span><span class="s1">ownedBy</span><span class="s0">.</span><span class="s1">length</span><span class="s0">?(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">atlas</span><span class="s0">.</span><span class="s1">dispose</span><span class="s0">(),</span><span class="s1">o</span><span class="s0">.</span><span class="s1">splice</span><span class="s0">(</span><span class="s1">s</span><span class="s0">,</span><span class="s3">1</span><span class="s0">)):</span><span class="s1">t</span><span class="s0">.</span><span class="s1">ownedBy</span><span class="s0">.</span><span class="s1">splice</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s3">1</span><span class="s0">);</span><span class="s4">break</span><span class="s0">}}</span><span class="s4">for</span><span class="s0">(</span><span class="s4">let </span><span class="s1">s</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">s</span><span class="s0">&lt;</span><span class="s1">o</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">s</span><span class="s0">++){</span><span class="s4">const </span><span class="s1">t</span><span class="s0">=</span><span class="s1">o</span><span class="s0">[</span><span class="s1">s</span><span class="s0">];</span><span class="s4">if</span><span class="s0">((</span><span class="s3">0</span><span class="s0">,</span><span class="s1">r</span><span class="s0">.</span><span class="s1">configEquals</span><span class="s0">)(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">config</span><span class="s0">,</span><span class="s1">d</span><span class="s0">))</span><span class="s4">return </span><span class="s1">t</span><span class="s0">.</span><span class="s1">ownedBy</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">e</span><span class="s0">),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">atlas</span><span class="s0">}</span><span class="s4">const </span><span class="s1">_</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">_core</span><span class="s0">,</span><span class="s1">u</span><span class="s0">={</span><span class="s1">atlas</span><span class="s0">:</span><span class="s4">new </span><span class="s1">s</span><span class="s0">.</span><span class="s1">TextureAtlas</span><span class="s0">(</span><span class="s1">document</span><span class="s0">,</span><span class="s1">d</span><span class="s0">,</span><span class="s1">_</span><span class="s0">.</span><span class="s1">unicodeService</span><span class="s0">),</span><span class="s1">config</span><span class="s0">:</span><span class="s1">d</span><span class="s0">,</span><span class="s1">ownedBy</span><span class="s0">:[</span><span class="s1">e</span><span class="s0">]};</span><span class="s4">return </span><span class="s1">o</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">u</span><span class="s0">),</span><span class="s1">u</span><span class="s0">.</span><span class="s1">atlas</span><span class="s0">},</span><span class="s1">t</span><span class="s0">.</span><span class="s1">removeTerminalFromCache</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">let </span><span class="s1">t</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">t</span><span class="s0">&lt;</span><span class="s1">o</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">t</span><span class="s0">++){</span><span class="s4">const </span><span class="s1">i</span><span class="s0">=</span><span class="s1">o</span><span class="s0">[</span><span class="s1">t</span><span class="s0">].</span><span class="s1">ownedBy</span><span class="s0">.</span><span class="s1">indexOf</span><span class="s0">(</span><span class="s1">e</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(-</span><span class="s3">1</span><span class="s0">!==</span><span class="s1">i</span><span class="s0">){</span><span class="s3">1</span><span class="s0">===</span><span class="s1">o</span><span class="s0">[</span><span class="s1">t</span><span class="s0">].</span><span class="s1">ownedBy</span><span class="s0">.</span><span class="s1">length</span><span class="s0">?(</span><span class="s1">o</span><span class="s0">[</span><span class="s1">t</span><span class="s0">].</span><span class="s1">atlas</span><span class="s0">.</span><span class="s1">dispose</span><span class="s0">(),</span><span class="s1">o</span><span class="s0">.</span><span class="s1">splice</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s3">1</span><span class="s0">)):</span><span class="s1">o</span><span class="s0">[</span><span class="s1">t</span><span class="s0">].</span><span class="s1">ownedBy</span><span class="s0">.</span><span class="s1">splice</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s3">1</span><span class="s0">);</span><span class="s4">break</span><span class="s0">}}}},</span><span class="s3">197</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">)=&gt;{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">is256Color</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">configEquals</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">generateConfig</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">160</span><span class="s0">);</span><span class="s1">t</span><span class="s0">.</span><span class="s1">generateConfig</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">a</span><span class="s0">){</span><span class="s4">const </span><span class="s1">h</span><span class="s0">={</span><span class="s1">foreground</span><span class="s0">:</span><span class="s1">n</span><span class="s0">.</span><span class="s1">foreground</span><span class="s0">,</span><span class="s1">background</span><span class="s0">:</span><span class="s1">n</span><span class="s0">.</span><span class="s1">background</span><span class="s0">,</span><span class="s1">cursor</span><span class="s0">:</span><span class="s1">s</span><span class="s0">.</span><span class="s1">NULL_COLOR</span><span class="s0">,</span><span class="s1">cursorAccent</span><span class="s0">:</span><span class="s1">s</span><span class="s0">.</span><span class="s1">NULL_COLOR</span><span class="s0">,</span><span class="s1">selectionForeground</span><span class="s0">:</span><span class="s1">s</span><span class="s0">.</span><span class="s1">NULL_COLOR</span><span class="s0">,</span><span class="s1">selectionBackgroundTransparent</span><span class="s0">:</span><span class="s1">s</span><span class="s0">.</span><span class="s1">NULL_COLOR</span><span class="s0">,</span><span class="s1">selectionBackgroundOpaque</span><span class="s0">:</span><span class="s1">s</span><span class="s0">.</span><span class="s1">NULL_COLOR</span><span class="s0">,</span><span class="s1">selectionInactiveBackgroundTransparent</span><span class="s0">:</span><span class="s1">s</span><span class="s0">.</span><span class="s1">NULL_COLOR</span><span class="s0">,</span><span class="s1">selectionInactiveBackgroundOpaque</span><span class="s0">:</span><span class="s1">s</span><span class="s0">.</span><span class="s1">NULL_COLOR</span><span class="s0">,</span><span class="s1">ansi</span><span class="s0">:</span><span class="s1">n</span><span class="s0">.</span><span class="s1">ansi</span><span class="s0">.</span><span class="s1">slice</span><span class="s0">(),</span><span class="s1">contrastCache</span><span class="s0">:</span><span class="s1">n</span><span class="s0">.</span><span class="s1">contrastCache</span><span class="s0">,</span><span class="s1">halfContrastCache</span><span class="s0">:</span><span class="s1">n</span><span class="s0">.</span><span class="s1">halfContrastCache</span><span class="s0">};</span><span class="s4">return</span><span class="s0">{</span><span class="s1">customGlyphs</span><span class="s0">:</span><span class="s1">o</span><span class="s0">.</span><span class="s1">customGlyphs</span><span class="s0">,</span><span class="s1">devicePixelRatio</span><span class="s0">:</span><span class="s1">a</span><span class="s0">,</span><span class="s1">letterSpacing</span><span class="s0">:</span><span class="s1">o</span><span class="s0">.</span><span class="s1">letterSpacing</span><span class="s0">,</span><span class="s1">lineHeight</span><span class="s0">:</span><span class="s1">o</span><span class="s0">.</span><span class="s1">lineHeight</span><span class="s0">,</span><span class="s1">deviceCellWidth</span><span class="s0">:</span><span class="s1">e</span><span class="s0">,</span><span class="s1">deviceCellHeight</span><span class="s0">:</span><span class="s1">t</span><span class="s0">,</span><span class="s1">deviceCharWidth</span><span class="s0">:</span><span class="s1">i</span><span class="s0">,</span><span class="s1">deviceCharHeight</span><span class="s0">:</span><span class="s1">r</span><span class="s0">,</span><span class="s1">fontFamily</span><span class="s0">:</span><span class="s1">o</span><span class="s0">.</span><span class="s1">fontFamily</span><span class="s0">,</span><span class="s1">fontSize</span><span class="s0">:</span><span class="s1">o</span><span class="s0">.</span><span class="s1">fontSize</span><span class="s0">,</span><span class="s1">fontWeight</span><span class="s0">:</span><span class="s1">o</span><span class="s0">.</span><span class="s1">fontWeight</span><span class="s0">,</span><span class="s1">fontWeightBold</span><span class="s0">:</span><span class="s1">o</span><span class="s0">.</span><span class="s1">fontWeightBold</span><span class="s0">,</span><span class="s1">allowTransparency</span><span class="s0">:</span><span class="s1">o</span><span class="s0">.</span><span class="s1">allowTransparency</span><span class="s0">,</span><span class="s1">drawBoldTextInBrightColors</span><span class="s0">:</span><span class="s1">o</span><span class="s0">.</span><span class="s1">drawBoldTextInBrightColors</span><span class="s0">,</span><span class="s1">minimumContrastRatio</span><span class="s0">:</span><span class="s1">o</span><span class="s0">.</span><span class="s1">minimumContrastRatio</span><span class="s0">,</span><span class="s1">colors</span><span class="s0">:</span><span class="s1">h</span><span class="s0">}},</span><span class="s1">t</span><span class="s0">.</span><span class="s1">configEquals</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">let </span><span class="s1">i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">i</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">ansi</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">i</span><span class="s0">++)</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">ansi</span><span class="s0">[</span><span class="s1">i</span><span class="s0">].</span><span class="s1">rgba</span><span class="s0">!==</span><span class="s1">t</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">ansi</span><span class="s0">[</span><span class="s1">i</span><span class="s0">].</span><span class="s1">rgba</span><span class="s0">)</span><span class="s4">return</span><span class="s0">!</span><span class="s3">1</span><span class="s0">;</span><span class="s4">return </span><span class="s1">e</span><span class="s0">.</span><span class="s1">devicePixelRatio</span><span class="s0">===</span><span class="s1">t</span><span class="s0">.</span><span class="s1">devicePixelRatio</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">customGlyphs</span><span class="s0">===</span><span class="s1">t</span><span class="s0">.</span><span class="s1">customGlyphs</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">lineHeight</span><span class="s0">===</span><span class="s1">t</span><span class="s0">.</span><span class="s1">lineHeight</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">letterSpacing</span><span class="s0">===</span><span class="s1">t</span><span class="s0">.</span><span class="s1">letterSpacing</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">fontFamily</span><span class="s0">===</span><span class="s1">t</span><span class="s0">.</span><span class="s1">fontFamily</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">fontSize</span><span class="s0">===</span><span class="s1">t</span><span class="s0">.</span><span class="s1">fontSize</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">fontWeight</span><span class="s0">===</span><span class="s1">t</span><span class="s0">.</span><span class="s1">fontWeight</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">fontWeightBold</span><span class="s0">===</span><span class="s1">t</span><span class="s0">.</span><span class="s1">fontWeightBold</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">allowTransparency</span><span class="s0">===</span><span class="s1">t</span><span class="s0">.</span><span class="s1">allowTransparency</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">deviceCharWidth</span><span class="s0">===</span><span class="s1">t</span><span class="s0">.</span><span class="s1">deviceCharWidth</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">deviceCharHeight</span><span class="s0">===</span><span class="s1">t</span><span class="s0">.</span><span class="s1">deviceCharHeight</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">drawBoldTextInBrightColors</span><span class="s0">===</span><span class="s1">t</span><span class="s0">.</span><span class="s1">drawBoldTextInBrightColors</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">minimumContrastRatio</span><span class="s0">===</span><span class="s1">t</span><span class="s0">.</span><span class="s1">minimumContrastRatio</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">foreground</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">===</span><span class="s1">t</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">foreground</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">background</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">===</span><span class="s1">t</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">background</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">},</span><span class="s1">t</span><span class="s0">.</span><span class="s1">is256Color</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">return </span><span class="s3">16777216</span><span class="s0">==(</span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s1">e</span><span class="s0">)||</span><span class="s3">33554432</span><span class="s0">==(</span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s1">e</span><span class="s0">)}},</span><span class="s3">237</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">)=&gt;{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">TEXT_BASELINE</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">DIM_OPACITY</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">INVERTED_DEFAULT_COLOR</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">399</span><span class="s0">);</span><span class="s1">t</span><span class="s0">.</span><span class="s1">INVERTED_DEFAULT_COLOR</span><span class="s0">=</span><span class="s3">257</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">DIM_OPACITY</span><span class="s0">=</span><span class="s3">.5</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">TEXT_BASELINE</span><span class="s0">=</span><span class="s1">s</span><span class="s0">.</span><span class="s1">isFirefox</span><span class="s0">||</span><span class="s1">s</span><span class="s0">.</span><span class="s1">isLegacyEdge</span><span class="s0">?</span><span class="s2">&quot;bottom&quot;</span><span class="s0">:</span><span class="s2">&quot;ideographic&quot;</span><span class="s0">},</span><span class="s3">457</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">CursorBlinkStateManager</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">CursorBlinkStateManager</span><span class="s0">=</span><span class="s4">class</span><span class="s0">{</span><span class="s1">constructor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_renderCallback</span><span class="s0">=</span><span class="s1">e</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">=</span><span class="s1">t</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">isCursorVisible</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">isFocused</span><span class="s0">&amp;&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_restartInterval</span><span class="s0">()}</span><span class="s1">get isPaused</span><span class="s0">(){</span><span class="s4">return</span><span class="s0">!(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_blinkStartTimeout</span><span class="s0">||</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_blinkInterval</span><span class="s0">)}</span><span class="s1">dispose</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_blinkInterval</span><span class="s0">&amp;&amp;(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">window</span><span class="s0">.</span><span class="s1">clearInterval</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_blinkInterval</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_blinkInterval</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_blinkStartTimeout</span><span class="s0">&amp;&amp;(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">window</span><span class="s0">.</span><span class="s1">clearTimeout</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_blinkStartTimeout</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_blinkStartTimeout</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_animationFrame</span><span class="s0">&amp;&amp;(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">window</span><span class="s0">.</span><span class="s1">cancelAnimationFrame</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_animationFrame</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_animationFrame</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">)}</span><span class="s1">restartBlinkAnimation</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">isPaused</span><span class="s0">||(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_animationTimeRestarted</span><span class="s0">=</span><span class="s1">Date</span><span class="s0">.</span><span class="s1">now</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">isCursorVisible</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_animationFrame</span><span class="s0">||(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_animationFrame</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">window</span><span class="s0">.</span><span class="s1">requestAnimationFrame</span><span class="s0">((()=&gt;{</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_renderCallback</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_animationFrame</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">}))))}</span><span class="s1">_restartInterval</span><span class="s0">(</span><span class="s1">e</span><span class="s0">=</span><span class="s3">600</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_blinkInterval</span><span class="s0">&amp;&amp;(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">window</span><span class="s0">.</span><span class="s1">clearInterval</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_blinkInterval</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_blinkInterval</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_blinkStartTimeout</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">window</span><span class="s0">.</span><span class="s1">setTimeout</span><span class="s0">((()=&gt;{</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_animationTimeRestarted</span><span class="s0">){</span><span class="s4">const </span><span class="s1">e</span><span class="s0">=</span><span class="s3">600</span><span class="s0">-(</span><span class="s1">Date</span><span class="s0">.</span><span class="s1">now</span><span class="s0">()-</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_animationTimeRestarted</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_animationTimeRestarted</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">,</span><span class="s1">e</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">)</span><span class="s4">return void this</span><span class="s0">.</span><span class="s1">_restartInterval</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)}</span><span class="s4">this</span><span class="s0">.</span><span class="s1">isCursorVisible</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_animationFrame</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">window</span><span class="s0">.</span><span class="s1">requestAnimationFrame</span><span class="s0">((()=&gt;{</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_renderCallback</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_animationFrame</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">})),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_blinkInterval</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">window</span><span class="s0">.</span><span class="s1">setInterval</span><span class="s0">((()=&gt;{</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_animationTimeRestarted</span><span class="s0">){</span><span class="s4">const </span><span class="s1">e</span><span class="s0">=</span><span class="s3">600</span><span class="s0">-(</span><span class="s1">Date</span><span class="s0">.</span><span class="s1">now</span><span class="s0">()-</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_animationTimeRestarted</span><span class="s0">);</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">_animationTimeRestarted</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">,</span><span class="s4">void this</span><span class="s0">.</span><span class="s1">_restartInterval</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)}</span><span class="s4">this</span><span class="s0">.</span><span class="s1">isCursorVisible</span><span class="s0">=!</span><span class="s4">this</span><span class="s0">.</span><span class="s1">isCursorVisible</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_animationFrame</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">window</span><span class="s0">.</span><span class="s1">requestAnimationFrame</span><span class="s0">((()=&gt;{</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_renderCallback</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_animationFrame</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">}))}),</span><span class="s3">600</span><span class="s0">)}),</span><span class="s1">e</span><span class="s0">)}</span><span class="s1">pause</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">isCursorVisible</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_blinkInterval</span><span class="s0">&amp;&amp;(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">window</span><span class="s0">.</span><span class="s1">clearInterval</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_blinkInterval</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_blinkInterval</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_blinkStartTimeout</span><span class="s0">&amp;&amp;(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">window</span><span class="s0">.</span><span class="s1">clearTimeout</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_blinkStartTimeout</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_blinkStartTimeout</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_animationFrame</span><span class="s0">&amp;&amp;(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">.</span><span class="s1">window</span><span class="s0">.</span><span class="s1">cancelAnimationFrame</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_animationFrame</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_animationFrame</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">)}</span><span class="s1">resume</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">pause</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_animationTimeRestarted</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_restartInterval</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">restartBlinkAnimation</span><span class="s0">()}}},</span><span class="s3">860</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">)=&gt;{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">tryDrawCustomChar</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">powerlineDefinitions</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">boxDrawingDefinitions</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">blockElementDefinitions</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">374</span><span class="s0">);</span><span class="s1">t</span><span class="s0">.</span><span class="s1">blockElementDefinitions</span><span class="s0">={</span><span class="s2">&quot;▀&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">4</span><span class="s0">}],</span><span class="s2">&quot;▁&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">7</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">1</span><span class="s0">}],</span><span class="s2">&quot;▂&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">6</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">2</span><span class="s0">}],</span><span class="s2">&quot;▃&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">5</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">3</span><span class="s0">}],</span><span class="s2">&quot;▄&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">4</span><span class="s0">}],</span><span class="s2">&quot;▅&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">3</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">5</span><span class="s0">}],</span><span class="s2">&quot;▆&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">6</span><span class="s0">}],</span><span class="s2">&quot;▇&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">1</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">7</span><span class="s0">}],</span><span class="s2">&quot;█&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">}],</span><span class="s2">&quot;▉&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">7</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">}],</span><span class="s2">&quot;▊&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">6</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">}],</span><span class="s2">&quot;▋&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">5</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">}],</span><span class="s2">&quot;▌&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">}],</span><span class="s2">&quot;▍&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">3</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">}],</span><span class="s2">&quot;▎&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">}],</span><span class="s2">&quot;▏&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">1</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">}],</span><span class="s2">&quot;▐&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">}],</span><span class="s2">&quot;▔&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">1</span><span class="s0">}],</span><span class="s2">&quot;▕&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">7</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">1</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">}],</span><span class="s2">&quot;▖&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">4</span><span class="s0">}],</span><span class="s2">&quot;▗&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">4</span><span class="s0">}],</span><span class="s2">&quot;▘&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">4</span><span class="s0">}],</span><span class="s2">&quot;▙&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">4</span><span class="s0">}],</span><span class="s2">&quot;▚&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">4</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">4</span><span class="s0">}],</span><span class="s2">&quot;▛&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">4</span><span class="s0">}],</span><span class="s2">&quot;▜&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">4</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">}],</span><span class="s2">&quot;▝&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">4</span><span class="s0">}],</span><span class="s2">&quot;▞&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">4</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">4</span><span class="s0">}],</span><span class="s2">&quot;▟&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">4</span><span class="s0">}],</span><span class="s2">&quot;🭰&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">1</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">1</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">}],</span><span class="s2">&quot;🭱&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">1</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">}],</span><span class="s2">&quot;🭲&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">3</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">1</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">}],</span><span class="s2">&quot;🭳&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">1</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">}],</span><span class="s2">&quot;🭴&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">5</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">1</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">}],</span><span class="s2">&quot;🭵&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">6</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">1</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">}],</span><span class="s2">&quot;🭶&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">1</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">1</span><span class="s0">}],</span><span class="s2">&quot;🭷&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">1</span><span class="s0">}],</span><span class="s2">&quot;🭸&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">3</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">1</span><span class="s0">}],</span><span class="s2">&quot;🭹&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">1</span><span class="s0">}],</span><span class="s2">&quot;🭺&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">5</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">1</span><span class="s0">}],</span><span class="s2">&quot;🭻&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">6</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">1</span><span class="s0">}],</span><span class="s2">&quot;🭼&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">1</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">7</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">1</span><span class="s0">}],</span><span class="s2">&quot;🭽&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">1</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">1</span><span class="s0">}],</span><span class="s2">&quot;🭾&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">7</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">1</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">1</span><span class="s0">}],</span><span class="s2">&quot;🭿&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">7</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">1</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">7</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">1</span><span class="s0">}],</span><span class="s2">&quot;🮀&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">1</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">7</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">1</span><span class="s0">}],</span><span class="s2">&quot;🮁&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">1</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">1</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">1</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">7</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">1</span><span class="s0">}],</span><span class="s2">&quot;🮂&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">2</span><span class="s0">}],</span><span class="s2">&quot;🮃&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">3</span><span class="s0">}],</span><span class="s2">&quot;🮄&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">5</span><span class="s0">}],</span><span class="s2">&quot;🮅&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">6</span><span class="s0">}],</span><span class="s2">&quot;🮆&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">7</span><span class="s0">}],</span><span class="s2">&quot;🮇&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">6</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">}],</span><span class="s2">&quot;🮈&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">5</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">3</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">}],</span><span class="s2">&quot;🮉&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">3</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">5</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">}],</span><span class="s2">&quot;🮊&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">6</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">}],</span><span class="s2">&quot;🮋&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">1</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">7</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">8</span><span class="s0">}],</span><span class="s2">&quot;🮕&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">2</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">2</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">2</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">6</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">2</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">2</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">2</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">6</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">2</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">6</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">6</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">2</span><span class="s0">}],</span><span class="s2">&quot;🮖&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">2</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">6</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">2</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">2</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">2</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">2</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">6</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">2</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">6</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">2</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">6</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">2</span><span class="s0">}],</span><span class="s2">&quot;🮗&quot;</span><span class="s0">:[{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">2</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">2</span><span class="s0">},{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">6</span><span class="s0">,</span><span class="s1">w</span><span class="s0">:</span><span class="s3">8</span><span class="s0">,</span><span class="s1">h</span><span class="s0">:</span><span class="s3">2</span><span class="s0">}]};</span><span class="s4">const </span><span class="s1">r</span><span class="s0">={</span><span class="s2">&quot;░&quot;</span><span class="s0">:[[</span><span class="s3">1</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">],[</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">],[</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s3">1</span><span class="s0">,</span><span class="s3">0</span><span class="s0">],[</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">]],</span><span class="s2">&quot;▒&quot;</span><span class="s0">:[[</span><span class="s3">1</span><span class="s0">,</span><span class="s3">0</span><span class="s0">],[</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">],[</span><span class="s3">0</span><span class="s0">,</span><span class="s3">1</span><span class="s0">],[</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">]],</span><span class="s2">&quot;▓&quot;</span><span class="s0">:[[</span><span class="s3">0</span><span class="s0">,</span><span class="s3">1</span><span class="s0">],[</span><span class="s3">1</span><span class="s0">,</span><span class="s3">1</span><span class="s0">],[</span><span class="s3">1</span><span class="s0">,</span><span class="s3">0</span><span class="s0">],[</span><span class="s3">1</span><span class="s0">,</span><span class="s3">1</span><span class="s0">]]};</span><span class="s1">t</span><span class="s0">.</span><span class="s1">boxDrawingDefinitions</span><span class="s0">={</span><span class="s2">&quot;─&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M0,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;━&quot;</span><span class="s0">:{</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M0,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;│&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,1&quot;</span><span class="s0">},</span><span class="s2">&quot;┃&quot;</span><span class="s0">:{</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,1&quot;</span><span class="s0">},</span><span class="s2">&quot;┌&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M0.5,1 L.5,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┏&quot;</span><span class="s0">:{</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M0.5,1 L.5,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┐&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M0,.5 L.5,.5 L.5,1&quot;</span><span class="s0">},</span><span class="s2">&quot;┓&quot;</span><span class="s0">:{</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M0,.5 L.5,.5 L.5,1&quot;</span><span class="s0">},</span><span class="s2">&quot;└&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┗&quot;</span><span class="s0">:{</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┘&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,.5 L0,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┛&quot;</span><span class="s0">:{</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,.5 L0,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;├&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,1 M.5,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┣&quot;</span><span class="s0">:{</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,1 M.5,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┤&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,1 M.5,.5 L0,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┫&quot;</span><span class="s0">:{</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,1 M.5,.5 L0,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┬&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M0,.5 L1,.5 M.5,.5 L.5,1&quot;</span><span class="s0">},</span><span class="s2">&quot;┳&quot;</span><span class="s0">:{</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M0,.5 L1,.5 M.5,.5 L.5,1&quot;</span><span class="s0">},</span><span class="s2">&quot;┴&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M0,.5 L1,.5 M.5,.5 L.5,0&quot;</span><span class="s0">},</span><span class="s2">&quot;┻&quot;</span><span class="s0">:{</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M0,.5 L1,.5 M.5,.5 L.5,0&quot;</span><span class="s0">},</span><span class="s2">&quot;┼&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M0,.5 L1,.5 M.5,0 L.5,1&quot;</span><span class="s0">},</span><span class="s2">&quot;╋&quot;</span><span class="s0">:{</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M0,.5 L1,.5 M.5,0 L.5,1&quot;</span><span class="s0">},</span><span class="s2">&quot;╴&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L0,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;╸&quot;</span><span class="s0">:{</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L0,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;╵&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,0&quot;</span><span class="s0">},</span><span class="s2">&quot;╹&quot;</span><span class="s0">:{</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,0&quot;</span><span class="s0">},</span><span class="s2">&quot;╶&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;╺&quot;</span><span class="s0">:{</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;╷&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,1&quot;</span><span class="s0">},</span><span class="s2">&quot;╻&quot;</span><span class="s0">:{</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,1&quot;</span><span class="s0">},</span><span class="s2">&quot;═&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M0,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L1,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">M0,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L1,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">}</span><span class="s2">`</span><span class="s0">},</span><span class="s2">&quot;║&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,0 L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,1 M</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,0 L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,1`</span><span class="s0">},</span><span class="s2">&quot;╒&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M.5,1 L.5,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L1,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">M.5,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L1,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">}</span><span class="s2">`</span><span class="s0">},</span><span class="s2">&quot;╓&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,1 L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,.5 L1,.5 M</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,.5 L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,1`</span><span class="s0">},</span><span class="s2">&quot;╔&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M1,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,1 M1,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,1`</span><span class="s0">},</span><span class="s2">&quot;╕&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M0,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L.5,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L.5,1 M0,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L.5,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">}</span><span class="s2">`</span><span class="s0">},</span><span class="s2">&quot;╖&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,1 L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,.5 L0,.5 M</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,.5 L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,1`</span><span class="s0">},</span><span class="s2">&quot;╗&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M0,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,1 M0,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,1`</span><span class="s0">},</span><span class="s2">&quot;╘&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M.5,0 L.5,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L1,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">M.5,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L1,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">}</span><span class="s2">`</span><span class="s0">},</span><span class="s2">&quot;╙&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M1,.5 L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,.5 L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,0 M</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,.5 L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,0`</span><span class="s0">},</span><span class="s2">&quot;╚&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M1,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,0 M1,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,0`</span><span class="s0">},</span><span class="s2">&quot;╛&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M0,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L.5,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L.5,0 M0,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L.5,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">}</span><span class="s2">`</span><span class="s0">},</span><span class="s2">&quot;╜&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M0,.5 L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,.5 L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,0 M</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,.5 L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,0`</span><span class="s0">},</span><span class="s2">&quot;╝&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M0,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,0 M0,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,0`</span><span class="s0">},</span><span class="s2">&quot;╞&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M.5,0 L.5,1 M.5,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L1,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">M.5,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L1,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">}</span><span class="s2">`</span><span class="s0">},</span><span class="s2">&quot;╟&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,0 L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,1 M</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,0 L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,1 M</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,.5 L1,.5`</span><span class="s0">},</span><span class="s2">&quot;╠&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,0 L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,1 M1,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,1 M1,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,0`</span><span class="s0">},</span><span class="s2">&quot;╡&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M.5,0 L.5,1 M0,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L.5,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">M0,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L.5,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">}</span><span class="s2">`</span><span class="s0">},</span><span class="s2">&quot;╢&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M0,.5 L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,.5 M</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,0 L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,1 M</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,0 L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,1`</span><span class="s0">},</span><span class="s2">&quot;╣&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,0 L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,1 M0,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,1 M0,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,0`</span><span class="s0">},</span><span class="s2">&quot;╤&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M0,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L1,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">M0,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L1,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">M.5,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L.5,1`</span><span class="s0">},</span><span class="s2">&quot;╥&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M0,.5 L1,.5 M</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,.5 L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,1 M</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,.5 L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,1`</span><span class="s0">},</span><span class="s2">&quot;╦&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M0,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L1,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">M0,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,1 M1,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,1`</span><span class="s0">},</span><span class="s2">&quot;╧&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M.5,0 L.5,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">M0,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L1,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">M0,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L1,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">}</span><span class="s2">`</span><span class="s0">},</span><span class="s2">&quot;╨&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M0,.5 L1,.5 M</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,.5 L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,0 M</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,.5 L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,0`</span><span class="s0">},</span><span class="s2">&quot;╩&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M0,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L1,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">M0,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,0 M1,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,0`</span><span class="s0">},</span><span class="s2">&quot;╪&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M.5,0 L.5,1 M0,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L1,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">M0,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L1,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">}</span><span class="s2">`</span><span class="s0">},</span><span class="s2">&quot;╫&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M0,.5 L1,.5 M</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,0 L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,1 M</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,0 L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,1`</span><span class="s0">},</span><span class="s2">&quot;╬&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M0,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,1 M1,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,1 M0,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,0 M1,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">} </span><span class="s2">L</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">e</span><span class="s0">}</span><span class="s2">,0`</span><span class="s0">},</span><span class="s2">&quot;╱&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M1,0 L0,1&quot;</span><span class="s0">},</span><span class="s2">&quot;╲&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M0,0 L1,1&quot;</span><span class="s0">},</span><span class="s2">&quot;╳&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M1,0 L0,1 M0,0 L1,1&quot;</span><span class="s0">},</span><span class="s2">&quot;╼&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L0,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;╽&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,0&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,1&quot;</span><span class="s0">},</span><span class="s2">&quot;╾&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L1,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L0,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;╿&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,1&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,0&quot;</span><span class="s0">},</span><span class="s2">&quot;┍&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,1&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┎&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L1,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,1&quot;</span><span class="s0">},</span><span class="s2">&quot;┑&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,1&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L0,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┒&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L0,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,1&quot;</span><span class="s0">},</span><span class="s2">&quot;┕&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,0&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┖&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L1,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,0&quot;</span><span class="s0">},</span><span class="s2">&quot;┙&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,0&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L0,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┚&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L0,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,0&quot;</span><span class="s0">},</span><span class="s2">&quot;┝&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,1&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┞&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M0.5,1 L.5,.5 L1,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,0&quot;</span><span class="s0">},</span><span class="s2">&quot;┟&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,.5 L1,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,1&quot;</span><span class="s0">},</span><span class="s2">&quot;┠&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L1,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,1&quot;</span><span class="s0">},</span><span class="s2">&quot;┡&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,1&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┢&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,0&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M0.5,1 L.5,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┥&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,1&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L0,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┦&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M0,.5 L.5,.5 L.5,1&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,0&quot;</span><span class="s0">},</span><span class="s2">&quot;┧&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,.5 L0,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,1&quot;</span><span class="s0">},</span><span class="s2">&quot;┨&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L0,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,1&quot;</span><span class="s0">},</span><span class="s2">&quot;┩&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,1&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,.5 L0,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┪&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,0&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M0,.5 L.5,.5 L.5,1&quot;</span><span class="s0">},</span><span class="s2">&quot;┭&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M0.5,1 L.5,.5 L1,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L0,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┮&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M0,.5 L.5,.5 L.5,1&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┯&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,1&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M0,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┰&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M0,.5 L1,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,1&quot;</span><span class="s0">},</span><span class="s2">&quot;┱&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L1,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M0,.5 L.5,.5 L.5,1&quot;</span><span class="s0">},</span><span class="s2">&quot;┲&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L0,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M0.5,1 L.5,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┵&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,.5 L1,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L0,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┶&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,.5 L0,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┷&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,0&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M0,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┸&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M0,.5 L1,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,0&quot;</span><span class="s0">},</span><span class="s2">&quot;┹&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L1,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,.5 L0,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┺&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L0,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┽&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,1 M.5,.5 L1,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L0,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┾&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,1 M.5,.5 L0,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┿&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,1&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M0,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;╀&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M0,.5 L1,.5 M.5,.5 L.5,1&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,0&quot;</span><span class="s0">},</span><span class="s2">&quot;╁&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,0 M0,.5 L1,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,1&quot;</span><span class="s0">},</span><span class="s2">&quot;╂&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M0,.5 L1,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,1&quot;</span><span class="s0">},</span><span class="s2">&quot;╃&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M0.5,1 L.5,.5 L1,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,.5 L0,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;╄&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M0,.5 L.5,.5 L.5,1&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;╅&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,.5 L1,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M0,.5 L.5,.5 L.5,1&quot;</span><span class="s0">},</span><span class="s2">&quot;╆&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,.5 L0,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M0.5,1 L.5,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;╇&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,1&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,0 M0,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;╈&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L.5,0&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M0,.5 L1,.5 M.5,.5 L.5,1&quot;</span><span class="s0">},</span><span class="s2">&quot;╉&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L1,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,1 M.5,.5 L0,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;╊&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.5 L0,.5&quot;</span><span class="s0">,</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,0 L.5,1 M.5,.5 L1,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;╌&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.1,.5 L.4,.5 M.6,.5 L.9,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;╍&quot;</span><span class="s0">:{</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.1,.5 L.4,.5 M.6,.5 L.9,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┄&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┅&quot;</span><span class="s0">:{</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┈&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;┉&quot;</span><span class="s0">:{</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5&quot;</span><span class="s0">},</span><span class="s2">&quot;╎&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.1 L.5,.4 M.5,.6 L.5,.9&quot;</span><span class="s0">},</span><span class="s2">&quot;╏&quot;</span><span class="s0">:{</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.1 L.5,.4 M.5,.6 L.5,.9&quot;</span><span class="s0">},</span><span class="s2">&quot;┆&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333&quot;</span><span class="s0">},</span><span class="s2">&quot;┇&quot;</span><span class="s0">:{</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333&quot;</span><span class="s0">},</span><span class="s2">&quot;┊&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:</span><span class="s2">&quot;M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95&quot;</span><span class="s0">},</span><span class="s2">&quot;┋&quot;</span><span class="s0">:{</span><span class="s3">3</span><span class="s0">:</span><span class="s2">&quot;M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95&quot;</span><span class="s0">},</span><span class="s2">&quot;╭&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M.5,1 L.5,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">/</span><span class="s3">.15</span><span class="s0">*</span><span class="s3">.5</span><span class="s0">} </span><span class="s2">C.5,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">/</span><span class="s3">.15</span><span class="s0">*</span><span class="s3">.5</span><span class="s0">}</span><span class="s2">,.5,.5,1,.5`</span><span class="s0">},</span><span class="s2">&quot;╮&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M.5,1 L.5,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">/</span><span class="s3">.15</span><span class="s0">*</span><span class="s3">.5</span><span class="s0">} </span><span class="s2">C.5,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">+</span><span class="s1">t</span><span class="s0">/</span><span class="s3">.15</span><span class="s0">*</span><span class="s3">.5</span><span class="s0">}</span><span class="s2">,.5,.5,0,.5`</span><span class="s0">},</span><span class="s2">&quot;╯&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M.5,0 L.5,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">/</span><span class="s3">.15</span><span class="s0">*</span><span class="s3">.5</span><span class="s0">} </span><span class="s2">C.5,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">/</span><span class="s3">.15</span><span class="s0">*</span><span class="s3">.5</span><span class="s0">}</span><span class="s2">,.5,.5,0,.5`</span><span class="s0">},</span><span class="s2">&quot;╰&quot;</span><span class="s0">:{</span><span class="s3">1</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s2">`M.5,0 L.5,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">/</span><span class="s3">.15</span><span class="s0">*</span><span class="s3">.5</span><span class="s0">} </span><span class="s2">C.5,</span><span class="s1">$</span><span class="s0">{</span><span class="s3">.5</span><span class="s0">-</span><span class="s1">t</span><span class="s0">/</span><span class="s3">.15</span><span class="s0">*</span><span class="s3">.5</span><span class="s0">}</span><span class="s2">,.5,.5,1,.5`</span><span class="s0">}},</span><span class="s1">t</span><span class="s0">.</span><span class="s1">powerlineDefinitions</span><span class="s0">={</span><span class="s2">&quot;&quot;</span><span class="s0">:{</span><span class="s1">d</span><span class="s0">:</span><span class="s2">&quot;M0,0 L1,.5 L0,1&quot;</span><span class="s0">,</span><span class="s1">type</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">rightPadding</span><span class="s0">:</span><span class="s3">2</span><span class="s0">},</span><span class="s2">&quot;&quot;</span><span class="s0">:{</span><span class="s1">d</span><span class="s0">:</span><span class="s2">&quot;M-1,-.5 L1,.5 L-1,1.5&quot;</span><span class="s0">,</span><span class="s1">type</span><span class="s0">:</span><span class="s3">1</span><span class="s0">,</span><span class="s1">leftPadding</span><span class="s0">:</span><span class="s3">1</span><span class="s0">,</span><span class="s1">rightPadding</span><span class="s0">:</span><span class="s3">1</span><span class="s0">},</span><span class="s2">&quot;&quot;</span><span class="s0">:{</span><span class="s1">d</span><span class="s0">:</span><span class="s2">&quot;M1,0 L0,.5 L1,1&quot;</span><span class="s0">,</span><span class="s1">type</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">leftPadding</span><span class="s0">:</span><span class="s3">2</span><span class="s0">},</span><span class="s2">&quot;&quot;</span><span class="s0">:{</span><span class="s1">d</span><span class="s0">:</span><span class="s2">&quot;M2,-.5 L0,.5 L2,1.5&quot;</span><span class="s0">,</span><span class="s1">type</span><span class="s0">:</span><span class="s3">1</span><span class="s0">,</span><span class="s1">leftPadding</span><span class="s0">:</span><span class="s3">1</span><span class="s0">,</span><span class="s1">rightPadding</span><span class="s0">:</span><span class="s3">1</span><span class="s0">},</span><span class="s2">&quot;&quot;</span><span class="s0">:{</span><span class="s1">d</span><span class="s0">:</span><span class="s2">&quot;M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0&quot;</span><span class="s0">,</span><span class="s1">type</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">rightPadding</span><span class="s0">:</span><span class="s3">1</span><span class="s0">},</span><span class="s2">&quot;&quot;</span><span class="s0">:{</span><span class="s1">d</span><span class="s0">:</span><span class="s2">&quot;M.2,1 C.422,1,.8,.826,.78,.5 C.8,.174,0.422,0,.2,0&quot;</span><span class="s0">,</span><span class="s1">type</span><span class="s0">:</span><span class="s3">1</span><span class="s0">,</span><span class="s1">rightPadding</span><span class="s0">:</span><span class="s3">1</span><span class="s0">},</span><span class="s2">&quot;&quot;</span><span class="s0">:{</span><span class="s1">d</span><span class="s0">:</span><span class="s2">&quot;M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0&quot;</span><span class="s0">,</span><span class="s1">type</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">leftPadding</span><span class="s0">:</span><span class="s3">1</span><span class="s0">},</span><span class="s2">&quot;&quot;</span><span class="s0">:{</span><span class="s1">d</span><span class="s0">:</span><span class="s2">&quot;M.8,1 C0.578,1,0.2,.826,.22,.5 C0.2,0.174,0.578,0,0.8,0&quot;</span><span class="s0">,</span><span class="s1">type</span><span class="s0">:</span><span class="s3">1</span><span class="s0">,</span><span class="s1">leftPadding</span><span class="s0">:</span><span class="s3">1</span><span class="s0">},</span><span class="s2">&quot;&quot;</span><span class="s0">:{</span><span class="s1">d</span><span class="s0">:</span><span class="s2">&quot;M-.5,-.5 L1.5,1.5 L-.5,1.5&quot;</span><span class="s0">,</span><span class="s1">type</span><span class="s0">:</span><span class="s3">0</span><span class="s0">},</span><span class="s2">&quot;&quot;</span><span class="s0">:{</span><span class="s1">d</span><span class="s0">:</span><span class="s2">&quot;M-.5,-.5 L1.5,1.5&quot;</span><span class="s0">,</span><span class="s1">type</span><span class="s0">:</span><span class="s3">1</span><span class="s0">,</span><span class="s1">leftPadding</span><span class="s0">:</span><span class="s3">1</span><span class="s0">,</span><span class="s1">rightPadding</span><span class="s0">:</span><span class="s3">1</span><span class="s0">},</span><span class="s2">&quot;&quot;</span><span class="s0">:{</span><span class="s1">d</span><span class="s0">:</span><span class="s2">&quot;M1.5,-.5 L-.5,1.5 L1.5,1.5&quot;</span><span class="s0">,</span><span class="s1">type</span><span class="s0">:</span><span class="s3">0</span><span class="s0">},</span><span class="s2">&quot;&quot;</span><span class="s0">:{</span><span class="s1">d</span><span class="s0">:</span><span class="s2">&quot;M1.5,-.5 L-.5,1.5 L-.5,-.5&quot;</span><span class="s0">,</span><span class="s1">type</span><span class="s0">:</span><span class="s3">0</span><span class="s0">},</span><span class="s2">&quot;&quot;</span><span class="s0">:{</span><span class="s1">d</span><span class="s0">:</span><span class="s2">&quot;M1.5,-.5 L-.5,1.5&quot;</span><span class="s0">,</span><span class="s1">type</span><span class="s0">:</span><span class="s3">1</span><span class="s0">,</span><span class="s1">leftPadding</span><span class="s0">:</span><span class="s3">1</span><span class="s0">,</span><span class="s1">rightPadding</span><span class="s0">:</span><span class="s3">1</span><span class="s0">},</span><span class="s2">&quot;&quot;</span><span class="s0">:{</span><span class="s1">d</span><span class="s0">:</span><span class="s2">&quot;M-.5,-.5 L1.5,1.5 L1.5,-.5&quot;</span><span class="s0">,</span><span class="s1">type</span><span class="s0">:</span><span class="s3">0</span><span class="s0">}},</span><span class="s1">t</span><span class="s0">.</span><span class="s1">powerlineDefinitions</span><span class="s0">[</span><span class="s2">&quot;&quot;</span><span class="s0">]=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">powerlineDefinitions</span><span class="s0">[</span><span class="s2">&quot;&quot;</span><span class="s0">],</span><span class="s1">t</span><span class="s0">.</span><span class="s1">powerlineDefinitions</span><span class="s0">[</span><span class="s2">&quot;&quot;</span><span class="s0">]=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">powerlineDefinitions</span><span class="s0">[</span><span class="s2">&quot;&quot;</span><span class="s0">],</span><span class="s1">t</span><span class="s0">.</span><span class="s1">tryDrawCustomChar</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">l</span><span class="s0">,</span><span class="s1">c</span><span class="s0">,</span><span class="s1">d</span><span class="s0">,</span><span class="s1">_</span><span class="s0">,</span><span class="s1">u</span><span class="s0">){</span><span class="s4">const </span><span class="s1">g</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">blockElementDefinitions</span><span class="s0">[</span><span class="s1">i</span><span class="s0">];</span><span class="s4">if</span><span class="s0">(</span><span class="s1">g</span><span class="s0">)</span><span class="s4">return function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">let </span><span class="s1">n</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">n</span><span class="s0">&lt;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">n</span><span class="s0">++){</span><span class="s4">const </span><span class="s1">a</span><span class="s0">=</span><span class="s1">t</span><span class="s0">[</span><span class="s1">n</span><span class="s0">],</span><span class="s1">h</span><span class="s0">=</span><span class="s1">r</span><span class="s0">/</span><span class="s3">8</span><span class="s0">,</span><span class="s1">l</span><span class="s0">=</span><span class="s1">o</span><span class="s0">/</span><span class="s3">8</span><span class="s0">;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">fillRect</span><span class="s0">(</span><span class="s1">i</span><span class="s0">+</span><span class="s1">a</span><span class="s0">.</span><span class="s1">x</span><span class="s0">*</span><span class="s1">h</span><span class="s0">,</span><span class="s1">s</span><span class="s0">+</span><span class="s1">a</span><span class="s0">.</span><span class="s1">y</span><span class="s0">*</span><span class="s1">l</span><span class="s0">,</span><span class="s1">a</span><span class="s0">.</span><span class="s1">w</span><span class="s0">*</span><span class="s1">h</span><span class="s0">,</span><span class="s1">a</span><span class="s0">.</span><span class="s1">h</span><span class="s0">*</span><span class="s1">l</span><span class="s0">)}}(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">g</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">l</span><span class="s0">,</span><span class="s1">c</span><span class="s0">,</span><span class="s1">d</span><span class="s0">),!</span><span class="s3">0</span><span class="s0">;</span><span class="s4">const </span><span class="s1">v</span><span class="s0">=</span><span class="s1">r</span><span class="s0">[</span><span class="s1">i</span><span class="s0">];</span><span class="s4">if</span><span class="s0">(</span><span class="s1">v</span><span class="s0">)</span><span class="s4">return function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">a</span><span class="s0">){</span><span class="s4">let </span><span class="s1">h</span><span class="s0">=</span><span class="s1">o</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">);</span><span class="s1">h</span><span class="s0">||(</span><span class="s1">h</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Map</span><span class="s0">,</span><span class="s1">o</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">h</span><span class="s0">));</span><span class="s4">const </span><span class="s1">l</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">fillStyle</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s2">&quot;string&quot;</span><span class="s0">!=</span><span class="s4">typeof </span><span class="s1">l</span><span class="s0">)</span><span class="s4">throw new </span><span class="s1">Error</span><span class="s0">(</span><span class="s2">`Unexpected fillStyle type &quot;</span><span class="s1">$</span><span class="s0">{</span><span class="s1">l</span><span class="s0">}</span><span class="s2">&quot;`</span><span class="s0">);</span><span class="s4">let </span><span class="s1">c</span><span class="s0">=</span><span class="s1">h</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">l</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">c</span><span class="s0">){</span><span class="s4">const </span><span class="s1">i</span><span class="s0">=</span><span class="s1">t</span><span class="s0">[</span><span class="s3">0</span><span class="s0">].</span><span class="s1">length</span><span class="s0">,</span><span class="s1">r</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">length</span><span class="s0">,</span><span class="s1">o</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">ownerDocument</span><span class="s0">.</span><span class="s1">createElement</span><span class="s0">(</span><span class="s2">&quot;canvas&quot;</span><span class="s0">);</span><span class="s1">o</span><span class="s0">.</span><span class="s1">width</span><span class="s0">=</span><span class="s1">i</span><span class="s0">,</span><span class="s1">o</span><span class="s0">.</span><span class="s1">height</span><span class="s0">=</span><span class="s1">r</span><span class="s0">;</span><span class="s4">const </span><span class="s1">n</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">throwIfFalsy</span><span class="s0">)(</span><span class="s1">o</span><span class="s0">.</span><span class="s1">getContext</span><span class="s0">(</span><span class="s2">&quot;2d&quot;</span><span class="s0">)),</span><span class="s1">a</span><span class="s0">=</span><span class="s4">new </span><span class="s1">ImageData</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">r</span><span class="s0">);</span><span class="s4">let </span><span class="s1">d</span><span class="s0">,</span><span class="s1">_</span><span class="s0">,</span><span class="s1">u</span><span class="s0">,</span><span class="s1">g</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">l</span><span class="s0">.</span><span class="s1">startsWith</span><span class="s0">(</span><span class="s2">&quot;#&quot;</span><span class="s0">))</span><span class="s1">d</span><span class="s0">=</span><span class="s1">parseInt</span><span class="s0">(</span><span class="s1">l</span><span class="s0">.</span><span class="s1">slice</span><span class="s0">(</span><span class="s3">1</span><span class="s0">,</span><span class="s3">3</span><span class="s0">),</span><span class="s3">16</span><span class="s0">),</span><span class="s1">_</span><span class="s0">=</span><span class="s1">parseInt</span><span class="s0">(</span><span class="s1">l</span><span class="s0">.</span><span class="s1">slice</span><span class="s0">(</span><span class="s3">3</span><span class="s0">,</span><span class="s3">5</span><span class="s0">),</span><span class="s3">16</span><span class="s0">),</span><span class="s1">u</span><span class="s0">=</span><span class="s1">parseInt</span><span class="s0">(</span><span class="s1">l</span><span class="s0">.</span><span class="s1">slice</span><span class="s0">(</span><span class="s3">5</span><span class="s0">,</span><span class="s3">7</span><span class="s0">),</span><span class="s3">16</span><span class="s0">),</span><span class="s1">g</span><span class="s0">=</span><span class="s1">l</span><span class="s0">.</span><span class="s1">length</span><span class="s0">&gt;</span><span class="s3">7</span><span class="s0">&amp;&amp;</span><span class="s1">parseInt</span><span class="s0">(</span><span class="s1">l</span><span class="s0">.</span><span class="s1">slice</span><span class="s0">(</span><span class="s3">7</span><span class="s0">,</span><span class="s3">9</span><span class="s0">),</span><span class="s3">16</span><span class="s0">)||</span><span class="s3">1</span><span class="s0">;</span><span class="s4">else</span><span class="s0">{</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">l</span><span class="s0">.</span><span class="s1">startsWith</span><span class="s0">(</span><span class="s2">&quot;rgba&quot;</span><span class="s0">))</span><span class="s4">throw new </span><span class="s1">Error</span><span class="s0">(</span><span class="s2">`Unexpected fillStyle color format &quot;</span><span class="s1">$</span><span class="s0">{</span><span class="s1">l</span><span class="s0">}</span><span class="s2">&quot; when drawing pattern glyph`</span><span class="s0">);[</span><span class="s1">d</span><span class="s0">,</span><span class="s1">_</span><span class="s0">,</span><span class="s1">u</span><span class="s0">,</span><span class="s1">g</span><span class="s0">]=</span><span class="s1">l</span><span class="s0">.</span><span class="s1">substring</span><span class="s0">(</span><span class="s3">5</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">length</span><span class="s0">-</span><span class="s3">1</span><span class="s0">).</span><span class="s1">split</span><span class="s0">(</span><span class="s2">&quot;,&quot;</span><span class="s0">).</span><span class="s1">map</span><span class="s0">((</span><span class="s1">e</span><span class="s0">=&gt;</span><span class="s1">parseFloat</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)))}</span><span class="s4">for</span><span class="s0">(</span><span class="s4">let </span><span class="s1">e</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">e</span><span class="s0">&lt;</span><span class="s1">r</span><span class="s0">;</span><span class="s1">e</span><span class="s0">++)</span><span class="s4">for</span><span class="s0">(</span><span class="s4">let </span><span class="s1">s</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">s</span><span class="s0">&lt;</span><span class="s1">i</span><span class="s0">;</span><span class="s1">s</span><span class="s0">++)</span><span class="s1">a</span><span class="s0">.</span><span class="s1">data</span><span class="s0">[</span><span class="s3">4</span><span class="s0">*(</span><span class="s1">e</span><span class="s0">*</span><span class="s1">i</span><span class="s0">+</span><span class="s1">s</span><span class="s0">)]=</span><span class="s1">d</span><span class="s0">,</span><span class="s1">a</span><span class="s0">.</span><span class="s1">data</span><span class="s0">[</span><span class="s3">4</span><span class="s0">*(</span><span class="s1">e</span><span class="s0">*</span><span class="s1">i</span><span class="s0">+</span><span class="s1">s</span><span class="s0">)+</span><span class="s3">1</span><span class="s0">]=</span><span class="s1">_</span><span class="s0">,</span><span class="s1">a</span><span class="s0">.</span><span class="s1">data</span><span class="s0">[</span><span class="s3">4</span><span class="s0">*(</span><span class="s1">e</span><span class="s0">*</span><span class="s1">i</span><span class="s0">+</span><span class="s1">s</span><span class="s0">)+</span><span class="s3">2</span><span class="s0">]=</span><span class="s1">u</span><span class="s0">,</span><span class="s1">a</span><span class="s0">.</span><span class="s1">data</span><span class="s0">[</span><span class="s3">4</span><span class="s0">*(</span><span class="s1">e</span><span class="s0">*</span><span class="s1">i</span><span class="s0">+</span><span class="s1">s</span><span class="s0">)+</span><span class="s3">3</span><span class="s0">]=</span><span class="s1">t</span><span class="s0">[</span><span class="s1">e</span><span class="s0">][</span><span class="s1">s</span><span class="s0">]*(</span><span class="s3">255</span><span class="s0">*</span><span class="s1">g</span><span class="s0">);</span><span class="s1">n</span><span class="s0">.</span><span class="s1">putImageData</span><span class="s0">(</span><span class="s1">a</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">),</span><span class="s1">c</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">throwIfFalsy</span><span class="s0">)(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">createPattern</span><span class="s0">(</span><span class="s1">o</span><span class="s0">,</span><span class="s4">null</span><span class="s0">)),</span><span class="s1">h</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">l</span><span class="s0">,</span><span class="s1">c</span><span class="s0">)}</span><span class="s1">e</span><span class="s0">.</span><span class="s1">fillStyle</span><span class="s0">=</span><span class="s1">c</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">fillRect</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">a</span><span class="s0">)}(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">v</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">l</span><span class="s0">,</span><span class="s1">c</span><span class="s0">,</span><span class="s1">d</span><span class="s0">),!</span><span class="s3">0</span><span class="s0">;</span><span class="s4">const </span><span class="s1">f</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">boxDrawingDefinitions</span><span class="s0">[</span><span class="s1">i</span><span class="s0">];</span><span class="s4">if</span><span class="s0">(</span><span class="s1">f</span><span class="s0">)</span><span class="s4">return function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">n</span><span class="s0">){</span><span class="s1">e</span><span class="s0">.</span><span class="s1">strokeStyle</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">fillStyle</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">const</span><span class="s0">[</span><span class="s1">l</span><span class="s0">,</span><span class="s1">c</span><span class="s0">]</span><span class="s1">of Object</span><span class="s0">.</span><span class="s1">entries</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)){</span><span class="s4">let </span><span class="s1">t</span><span class="s0">;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">beginPath</span><span class="s0">(),</span><span class="s1">e</span><span class="s0">.</span><span class="s1">lineWidth</span><span class="s0">=</span><span class="s1">n</span><span class="s0">*</span><span class="s1">Number</span><span class="s0">.</span><span class="s1">parseInt</span><span class="s0">(</span><span class="s1">l</span><span class="s0">),</span><span class="s1">t</span><span class="s0">=</span><span class="s2">&quot;function&quot;</span><span class="s0">==</span><span class="s4">typeof </span><span class="s1">c</span><span class="s0">?</span><span class="s1">c</span><span class="s0">(</span><span class="s3">.15</span><span class="s0">,</span><span class="s3">.15</span><span class="s0">/</span><span class="s1">o</span><span class="s0">*</span><span class="s1">r</span><span class="s0">):</span><span class="s1">c</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">const </span><span class="s1">l of t</span><span class="s0">.</span><span class="s1">split</span><span class="s0">(</span><span class="s2">&quot; &quot;</span><span class="s0">)){</span><span class="s4">const </span><span class="s1">t</span><span class="s0">=</span><span class="s1">l</span><span class="s0">[</span><span class="s3">0</span><span class="s0">],</span><span class="s1">c</span><span class="s0">=</span><span class="s1">a</span><span class="s0">[</span><span class="s1">t</span><span class="s0">];</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">c</span><span class="s0">){</span><span class="s1">console</span><span class="s0">.</span><span class="s1">error</span><span class="s0">(</span><span class="s2">`Could not find drawing instructions for &quot;</span><span class="s1">$</span><span class="s0">{</span><span class="s1">t</span><span class="s0">}</span><span class="s2">&quot;`</span><span class="s0">);</span><span class="s4">continue</span><span class="s0">}</span><span class="s4">const </span><span class="s1">d</span><span class="s0">=</span><span class="s1">l</span><span class="s0">.</span><span class="s1">substring</span><span class="s0">(</span><span class="s3">1</span><span class="s0">).</span><span class="s1">split</span><span class="s0">(</span><span class="s2">&quot;,&quot;</span><span class="s0">);</span><span class="s1">d</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]&amp;&amp;</span><span class="s1">d</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]&amp;&amp;</span><span class="s1">c</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">h</span><span class="s0">(</span><span class="s1">d</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,!</span><span class="s3">0</span><span class="s0">,</span><span class="s1">n</span><span class="s0">))}</span><span class="s1">e</span><span class="s0">.</span><span class="s1">stroke</span><span class="s0">(),</span><span class="s1">e</span><span class="s0">.</span><span class="s1">closePath</span><span class="s0">()}}(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">f</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">l</span><span class="s0">,</span><span class="s1">c</span><span class="s0">,</span><span class="s1">d</span><span class="s0">,</span><span class="s1">u</span><span class="s0">),!</span><span class="s3">0</span><span class="s0">;</span><span class="s4">const </span><span class="s1">p</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">powerlineDefinitions</span><span class="s0">[</span><span class="s1">i</span><span class="s0">];</span><span class="s4">return</span><span class="s0">!!</span><span class="s1">p</span><span class="s0">&amp;&amp;(</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">l</span><span class="s0">){</span><span class="s4">const </span><span class="s1">c</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Path2D</span><span class="s0">;</span><span class="s1">c</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">),</span><span class="s1">e</span><span class="s0">.</span><span class="s1">clip</span><span class="s0">(</span><span class="s1">c</span><span class="s0">),</span><span class="s1">e</span><span class="s0">.</span><span class="s1">beginPath</span><span class="s0">();</span><span class="s4">const </span><span class="s1">d</span><span class="s0">=</span><span class="s1">n</span><span class="s0">/</span><span class="s3">12</span><span class="s0">;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">lineWidth</span><span class="s0">=</span><span class="s1">l</span><span class="s0">*</span><span class="s1">d</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">const </span><span class="s1">_ of t</span><span class="s0">.</span><span class="s1">d</span><span class="s0">.</span><span class="s1">split</span><span class="s0">(</span><span class="s2">&quot; &quot;</span><span class="s0">)){</span><span class="s4">const </span><span class="s1">n</span><span class="s0">=</span><span class="s1">_</span><span class="s0">[</span><span class="s3">0</span><span class="s0">],</span><span class="s1">c</span><span class="s0">=</span><span class="s1">a</span><span class="s0">[</span><span class="s1">n</span><span class="s0">];</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">c</span><span class="s0">){</span><span class="s1">console</span><span class="s0">.</span><span class="s1">error</span><span class="s0">(</span><span class="s2">`Could not find drawing instructions for &quot;</span><span class="s1">$</span><span class="s0">{</span><span class="s1">n</span><span class="s0">}</span><span class="s2">&quot;`</span><span class="s0">);</span><span class="s4">continue</span><span class="s0">}</span><span class="s4">const </span><span class="s1">u</span><span class="s0">=</span><span class="s1">_</span><span class="s0">.</span><span class="s1">substring</span><span class="s0">(</span><span class="s3">1</span><span class="s0">).</span><span class="s1">split</span><span class="s0">(</span><span class="s2">&quot;,&quot;</span><span class="s0">);</span><span class="s1">u</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]&amp;&amp;</span><span class="s1">u</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]&amp;&amp;</span><span class="s1">c</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">h</span><span class="s0">(</span><span class="s1">u</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,!</span><span class="s3">1</span><span class="s0">,</span><span class="s1">l</span><span class="s0">,(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">leftPadding</span><span class="s0">??</span><span class="s3">0</span><span class="s0">)*(</span><span class="s1">d</span><span class="s0">/</span><span class="s3">2</span><span class="s0">),(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rightPadding</span><span class="s0">??</span><span class="s3">0</span><span class="s0">)*(</span><span class="s1">d</span><span class="s0">/</span><span class="s3">2</span><span class="s0">)))}</span><span class="s3">1</span><span class="s0">===</span><span class="s1">t</span><span class="s0">.</span><span class="s1">type</span><span class="s0">?(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">strokeStyle</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">fillStyle</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">stroke</span><span class="s0">()):</span><span class="s1">e</span><span class="s0">.</span><span class="s1">fill</span><span class="s0">(),</span><span class="s1">e</span><span class="s0">.</span><span class="s1">closePath</span><span class="s0">()}(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">p</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">l</span><span class="s0">,</span><span class="s1">c</span><span class="s0">,</span><span class="s1">d</span><span class="s0">,</span><span class="s1">_</span><span class="s0">,</span><span class="s1">u</span><span class="s0">),!</span><span class="s3">0</span><span class="s0">)};</span><span class="s4">const </span><span class="s1">o</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Map</span><span class="s0">;</span><span class="s4">function </span><span class="s1">n</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">){</span><span class="s4">return </span><span class="s1">Math</span><span class="s0">.</span><span class="s1">max</span><span class="s0">(</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">min</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">),</span><span class="s1">i</span><span class="s0">)}</span><span class="s4">const </span><span class="s1">a</span><span class="s0">={</span><span class="s1">C</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">bezierCurveTo</span><span class="s0">(</span><span class="s1">t</span><span class="s0">[</span><span class="s3">0</span><span class="s0">],</span><span class="s1">t</span><span class="s0">[</span><span class="s3">1</span><span class="s0">],</span><span class="s1">t</span><span class="s0">[</span><span class="s3">2</span><span class="s0">],</span><span class="s1">t</span><span class="s0">[</span><span class="s3">3</span><span class="s0">],</span><span class="s1">t</span><span class="s0">[</span><span class="s3">4</span><span class="s0">],</span><span class="s1">t</span><span class="s0">[</span><span class="s3">5</span><span class="s0">]),</span><span class="s1">L</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">lineTo</span><span class="s0">(</span><span class="s1">t</span><span class="s0">[</span><span class="s3">0</span><span class="s0">],</span><span class="s1">t</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]),</span><span class="s1">M</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">moveTo</span><span class="s0">(</span><span class="s1">t</span><span class="s0">[</span><span class="s3">0</span><span class="s0">],</span><span class="s1">t</span><span class="s0">[</span><span class="s3">1</span><span class="s0">])};</span><span class="s4">function </span><span class="s1">h</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">h</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">=</span><span class="s3">0</span><span class="s0">){</span><span class="s4">const </span><span class="s1">c</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">map</span><span class="s0">((</span><span class="s1">e</span><span class="s0">=&gt;</span><span class="s1">parseFloat</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)||</span><span class="s1">parseInt</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)));</span><span class="s4">if</span><span class="s0">(</span><span class="s1">c</span><span class="s0">.</span><span class="s1">length</span><span class="s0">&lt;</span><span class="s3">2</span><span class="s0">)</span><span class="s4">throw new </span><span class="s1">Error</span><span class="s0">(</span><span class="s2">&quot;Too few arguments for instruction&quot;</span><span class="s0">);</span><span class="s4">for</span><span class="s0">(</span><span class="s4">let </span><span class="s1">d</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">d</span><span class="s0">&lt;</span><span class="s1">c</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">d</span><span class="s0">+=</span><span class="s3">2</span><span class="s0">)</span><span class="s1">c</span><span class="s0">[</span><span class="s1">d</span><span class="s0">]*=</span><span class="s1">t</span><span class="s0">-</span><span class="s1">h</span><span class="s0">*</span><span class="s1">a</span><span class="s0">-</span><span class="s1">l</span><span class="s0">*</span><span class="s1">a</span><span class="s0">,</span><span class="s1">o</span><span class="s0">&amp;&amp;</span><span class="s3">0</span><span class="s0">!==</span><span class="s1">c</span><span class="s0">[</span><span class="s1">d</span><span class="s0">]&amp;&amp;(</span><span class="s1">c</span><span class="s0">[</span><span class="s1">d</span><span class="s0">]=</span><span class="s1">n</span><span class="s0">(</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">round</span><span class="s0">(</span><span class="s1">c</span><span class="s0">[</span><span class="s1">d</span><span class="s0">]+</span><span class="s3">.5</span><span class="s0">)-</span><span class="s3">.5</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s3">0</span><span class="s0">)),</span><span class="s1">c</span><span class="s0">[</span><span class="s1">d</span><span class="s0">]+=</span><span class="s1">s</span><span class="s0">+</span><span class="s1">h</span><span class="s0">*</span><span class="s1">a</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">let </span><span class="s1">d</span><span class="s0">=</span><span class="s3">1</span><span class="s0">;</span><span class="s1">d</span><span class="s0">&lt;</span><span class="s1">c</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">d</span><span class="s0">+=</span><span class="s3">2</span><span class="s0">)</span><span class="s1">c</span><span class="s0">[</span><span class="s1">d</span><span class="s0">]*=</span><span class="s1">i</span><span class="s0">,</span><span class="s1">o</span><span class="s0">&amp;&amp;</span><span class="s3">0</span><span class="s0">!==</span><span class="s1">c</span><span class="s0">[</span><span class="s1">d</span><span class="s0">]&amp;&amp;(</span><span class="s1">c</span><span class="s0">[</span><span class="s1">d</span><span class="s0">]=</span><span class="s1">n</span><span class="s0">(</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">round</span><span class="s0">(</span><span class="s1">c</span><span class="s0">[</span><span class="s1">d</span><span class="s0">]+</span><span class="s3">.5</span><span class="s0">)-</span><span class="s3">.5</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s3">0</span><span class="s0">)),</span><span class="s1">c</span><span class="s0">[</span><span class="s1">d</span><span class="s0">]+=</span><span class="s1">r</span><span class="s0">;</span><span class="s4">return </span><span class="s1">c</span><span class="s0">}},</span><span class="s3">56</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">)=&gt;{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">observeDevicePixelDimensions</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">859</span><span class="s0">);</span><span class="s1">t</span><span class="s0">.</span><span class="s1">observeDevicePixelDimensions</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s4">let </span><span class="s1">r</span><span class="s0">=</span><span class="s4">new </span><span class="s1">t</span><span class="s0">.</span><span class="s1">ResizeObserver</span><span class="s0">((</span><span class="s1">t</span><span class="s0">=&gt;{</span><span class="s4">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">find</span><span class="s0">((</span><span class="s1">t</span><span class="s0">=&gt;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">target</span><span class="s0">===</span><span class="s1">e</span><span class="s0">));</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">s</span><span class="s0">)</span><span class="s4">return</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(!(</span><span class="s2">&quot;devicePixelContentBoxSize&quot;</span><span class="s4">in </span><span class="s1">s</span><span class="s0">))</span><span class="s4">return </span><span class="s1">r</span><span class="s0">?.</span><span class="s1">disconnect</span><span class="s0">(),</span><span class="s4">void</span><span class="s0">(</span><span class="s1">r</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">);</span><span class="s4">const </span><span class="s1">o</span><span class="s0">=</span><span class="s1">s</span><span class="s0">.</span><span class="s1">devicePixelContentBoxSize</span><span class="s0">[</span><span class="s3">0</span><span class="s0">].</span><span class="s1">inlineSize</span><span class="s0">,</span><span class="s1">n</span><span class="s0">=</span><span class="s1">s</span><span class="s0">.</span><span class="s1">devicePixelContentBoxSize</span><span class="s0">[</span><span class="s3">0</span><span class="s0">].</span><span class="s1">blockSize</span><span class="s0">;</span><span class="s1">o</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">&amp;&amp;</span><span class="s1">n</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">&amp;&amp;</span><span class="s1">i</span><span class="s0">(</span><span class="s1">o</span><span class="s0">,</span><span class="s1">n</span><span class="s0">)}));</span><span class="s4">try</span><span class="s0">{</span><span class="s1">r</span><span class="s0">.</span><span class="s1">observe</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,{</span><span class="s1">box</span><span class="s0">:[</span><span class="s2">&quot;device-pixel-content-box&quot;</span><span class="s0">]})}</span><span class="s4">catch</span><span class="s0">{</span><span class="s1">r</span><span class="s0">.</span><span class="s1">disconnect</span><span class="s0">(),</span><span class="s1">r</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">}</span><span class="s4">return</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">toDisposable</span><span class="s0">)((()=&gt;</span><span class="s1">r</span><span class="s0">?.</span><span class="s1">disconnect</span><span class="s0">()))}},</span><span class="s3">374</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;{</span><span class="s4">function </span><span class="s1">i</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">return </span><span class="s3">57508</span><span class="s0">&lt;=</span><span class="s1">e</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">&lt;=</span><span class="s3">57558</span><span class="s0">}</span><span class="s4">function </span><span class="s1">s</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">return </span><span class="s1">e</span><span class="s0">&gt;=</span><span class="s3">128512</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">&lt;=</span><span class="s3">128591</span><span class="s0">||</span><span class="s1">e</span><span class="s0">&gt;=</span><span class="s3">127744</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">&lt;=</span><span class="s3">128511</span><span class="s0">||</span><span class="s1">e</span><span class="s0">&gt;=</span><span class="s3">128640</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">&lt;=</span><span class="s3">128767</span><span class="s0">||</span><span class="s1">e</span><span class="s0">&gt;=</span><span class="s3">9728</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">&lt;=</span><span class="s3">9983</span><span class="s0">||</span><span class="s1">e</span><span class="s0">&gt;=</span><span class="s3">9984</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">&lt;=</span><span class="s3">10175</span><span class="s0">||</span><span class="s1">e</span><span class="s0">&gt;=</span><span class="s3">65024</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">&lt;=</span><span class="s3">65039</span><span class="s0">||</span><span class="s1">e</span><span class="s0">&gt;=</span><span class="s3">129280</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">&lt;=</span><span class="s3">129535</span><span class="s0">||</span><span class="s1">e</span><span class="s0">&gt;=</span><span class="s3">127462</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">&lt;=</span><span class="s3">127487</span><span class="s0">}</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">computeNextVariantOffset</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">createRenderDimensions</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">treatGlyphAsBackgroundColor</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">allowRescaling</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isEmoji</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isRestrictedPowerlineGlyph</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isPowerlineGlyph</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">throwIfFalsy</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">throwIfFalsy</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">e</span><span class="s0">)</span><span class="s4">throw new </span><span class="s1">Error</span><span class="s0">(</span><span class="s2">&quot;value must not be falsy&quot;</span><span class="s0">);</span><span class="s4">return </span><span class="s1">e</span><span class="s0">},</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isPowerlineGlyph</span><span class="s0">=</span><span class="s1">i</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isRestrictedPowerlineGlyph</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">return </span><span class="s3">57520</span><span class="s0">&lt;=</span><span class="s1">e</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">&lt;=</span><span class="s3">57527</span><span class="s0">},</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isEmoji</span><span class="s0">=</span><span class="s1">s</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">allowRescaling</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">){</span><span class="s4">return </span><span class="s3">1</span><span class="s0">===</span><span class="s1">t</span><span class="s0">&amp;&amp;</span><span class="s1">r</span><span class="s0">&gt;</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">ceil</span><span class="s0">(</span><span class="s3">1.5</span><span class="s0">*</span><span class="s1">o</span><span class="s0">)&amp;&amp;</span><span class="s4">void </span><span class="s3">0</span><span class="s0">!==</span><span class="s1">e</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">&gt;</span><span class="s3">255</span><span class="s0">&amp;&amp;!</span><span class="s1">s</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)&amp;&amp;!</span><span class="s1">i</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)&amp;&amp;!</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">return </span><span class="s3">57344</span><span class="s0">&lt;=</span><span class="s1">e</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">&lt;=</span><span class="s3">63743</span><span class="s0">}(</span><span class="s1">e</span><span class="s0">)},</span><span class="s1">t</span><span class="s0">.</span><span class="s1">treatGlyphAsBackgroundColor</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">return </span><span class="s1">i</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)||</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">return </span><span class="s3">9472</span><span class="s0">&lt;=</span><span class="s1">e</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">&lt;=</span><span class="s3">9631</span><span class="s0">}(</span><span class="s1">e</span><span class="s0">)},</span><span class="s1">t</span><span class="s0">.</span><span class="s1">createRenderDimensions</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return</span><span class="s0">{</span><span class="s1">css</span><span class="s0">:{</span><span class="s1">canvas</span><span class="s0">:{</span><span class="s1">width</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">height</span><span class="s0">:</span><span class="s3">0</span><span class="s0">},</span><span class="s1">cell</span><span class="s0">:{</span><span class="s1">width</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">height</span><span class="s0">:</span><span class="s3">0</span><span class="s0">}},</span><span class="s1">device</span><span class="s0">:{</span><span class="s1">canvas</span><span class="s0">:{</span><span class="s1">width</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">height</span><span class="s0">:</span><span class="s3">0</span><span class="s0">},</span><span class="s1">cell</span><span class="s0">:{</span><span class="s1">width</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">height</span><span class="s0">:</span><span class="s3">0</span><span class="s0">},</span><span class="s1">char</span><span class="s0">:{</span><span class="s1">width</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">height</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">left</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">top</span><span class="s0">:</span><span class="s3">0</span><span class="s0">}}}},</span><span class="s1">t</span><span class="s0">.</span><span class="s1">computeNextVariantOffset</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">){</span><span class="s4">return</span><span class="s0">(</span><span class="s1">e</span><span class="s0">-(</span><span class="s3">2</span><span class="s0">*</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">round</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)-</span><span class="s1">i</span><span class="s0">))%(</span><span class="s3">2</span><span class="s0">*</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">round</span><span class="s0">(</span><span class="s1">t</span><span class="s0">))}},</span><span class="s3">296</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">createSelectionRenderModel</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">class </span><span class="s1">i</span><span class="s0">{</span><span class="s1">constructor</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">clear</span><span class="s0">()}</span><span class="s1">clear</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">hasSelection</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">columnSelectMode</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">viewportStartRow</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">viewportEndRow</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">viewportCappedStartRow</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">viewportCappedEndRow</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">startCol</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">endCol</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">selectionStart</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">selectionEnd</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">}</span><span class="s1">update</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">selectionStart</span><span class="s0">=</span><span class="s1">t</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">selectionEnd</span><span class="s0">=</span><span class="s1">i</span><span class="s0">,!</span><span class="s1">t</span><span class="s0">||!</span><span class="s1">i</span><span class="s0">||</span><span class="s1">t</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]===</span><span class="s1">i</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]&amp;&amp;</span><span class="s1">t</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]===</span><span class="s1">i</span><span class="s0">[</span><span class="s3">1</span><span class="s0">])</span><span class="s4">return void this</span><span class="s0">.</span><span class="s1">clear</span><span class="s0">();</span><span class="s4">const </span><span class="s1">r</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">buffers</span><span class="s0">.</span><span class="s1">active</span><span class="s0">.</span><span class="s1">ydisp</span><span class="s0">,</span><span class="s1">o</span><span class="s0">=</span><span class="s1">t</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]-</span><span class="s1">r</span><span class="s0">,</span><span class="s1">n</span><span class="s0">=</span><span class="s1">i</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]-</span><span class="s1">r</span><span class="s0">,</span><span class="s1">a</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">max</span><span class="s0">(</span><span class="s1">o</span><span class="s0">,</span><span class="s3">0</span><span class="s0">),</span><span class="s1">h</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">min</span><span class="s0">(</span><span class="s1">n</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">rows</span><span class="s0">-</span><span class="s3">1</span><span class="s0">);</span><span class="s1">a</span><span class="s0">&gt;=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">rows</span><span class="s0">||</span><span class="s1">h</span><span class="s0">&lt;</span><span class="s3">0</span><span class="s0">?</span><span class="s4">this</span><span class="s0">.</span><span class="s1">clear</span><span class="s0">():(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">hasSelection</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">columnSelectMode</span><span class="s0">=</span><span class="s1">s</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">viewportStartRow</span><span class="s0">=</span><span class="s1">o</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">viewportEndRow</span><span class="s0">=</span><span class="s1">n</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">viewportCappedStartRow</span><span class="s0">=</span><span class="s1">a</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">viewportCappedEndRow</span><span class="s0">=</span><span class="s1">h</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">startCol</span><span class="s0">=</span><span class="s1">t</span><span class="s0">[</span><span class="s3">0</span><span class="s0">],</span><span class="s4">this</span><span class="s0">.</span><span class="s1">endCol</span><span class="s0">=</span><span class="s1">i</span><span class="s0">[</span><span class="s3">0</span><span class="s0">])}</span><span class="s1">isCellSelected</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s4">return</span><span class="s0">!!</span><span class="s4">this</span><span class="s0">.</span><span class="s1">hasSelection</span><span class="s0">&amp;&amp;(</span><span class="s1">i</span><span class="s0">-=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">buffer</span><span class="s0">.</span><span class="s1">active</span><span class="s0">.</span><span class="s1">viewportY</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">columnSelectMode</span><span class="s0">?</span><span class="s4">this</span><span class="s0">.</span><span class="s1">startCol</span><span class="s0">&lt;=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">endCol</span><span class="s0">?</span><span class="s1">t</span><span class="s0">&gt;=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">startCol</span><span class="s0">&amp;&amp;</span><span class="s1">i</span><span class="s0">&gt;=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">viewportCappedStartRow</span><span class="s0">&amp;&amp;</span><span class="s1">t</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">endCol</span><span class="s0">&amp;&amp;</span><span class="s1">i</span><span class="s0">&lt;=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">viewportCappedEndRow</span><span class="s0">:</span><span class="s1">t</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">startCol</span><span class="s0">&amp;&amp;</span><span class="s1">i</span><span class="s0">&gt;=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">viewportCappedStartRow</span><span class="s0">&amp;&amp;</span><span class="s1">t</span><span class="s0">&gt;=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">endCol</span><span class="s0">&amp;&amp;</span><span class="s1">i</span><span class="s0">&lt;=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">viewportCappedEndRow</span><span class="s0">:</span><span class="s1">i</span><span class="s0">&gt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">viewportStartRow</span><span class="s0">&amp;&amp;</span><span class="s1">i</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">viewportEndRow</span><span class="s0">||</span><span class="s4">this</span><span class="s0">.</span><span class="s1">viewportStartRow</span><span class="s0">===</span><span class="s4">this</span><span class="s0">.</span><span class="s1">viewportEndRow</span><span class="s0">&amp;&amp;</span><span class="s1">i</span><span class="s0">===</span><span class="s4">this</span><span class="s0">.</span><span class="s1">viewportStartRow</span><span class="s0">&amp;&amp;</span><span class="s1">t</span><span class="s0">&gt;=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">startCol</span><span class="s0">&amp;&amp;</span><span class="s1">t</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">endCol</span><span class="s0">||</span><span class="s4">this</span><span class="s0">.</span><span class="s1">viewportStartRow</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">viewportEndRow</span><span class="s0">&amp;&amp;</span><span class="s1">i</span><span class="s0">===</span><span class="s4">this</span><span class="s0">.</span><span class="s1">viewportEndRow</span><span class="s0">&amp;&amp;</span><span class="s1">t</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">endCol</span><span class="s0">||</span><span class="s4">this</span><span class="s0">.</span><span class="s1">viewportStartRow</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">viewportEndRow</span><span class="s0">&amp;&amp;</span><span class="s1">i</span><span class="s0">===</span><span class="s4">this</span><span class="s0">.</span><span class="s1">viewportStartRow</span><span class="s0">&amp;&amp;</span><span class="s1">t</span><span class="s0">&gt;=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">startCol</span><span class="s0">)}}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">createSelectionRenderModel</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return new </span><span class="s1">i</span><span class="s0">}},</span><span class="s3">509</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">)=&gt;{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">TextureAtlas</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">237</span><span class="s0">),</span><span class="s1">r</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">860</span><span class="s0">),</span><span class="s1">o</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">374</span><span class="s0">),</span><span class="s1">n</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">160</span><span class="s0">),</span><span class="s1">a</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">345</span><span class="s0">),</span><span class="s1">h</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">485</span><span class="s0">),</span><span class="s1">l</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">385</span><span class="s0">),</span><span class="s1">c</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">147</span><span class="s0">),</span><span class="s1">d</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">855</span><span class="s0">),</span><span class="s1">_</span><span class="s0">={</span><span class="s1">texturePage</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">texturePosition</span><span class="s0">:{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">},</span><span class="s1">texturePositionClipSpace</span><span class="s0">:{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">},</span><span class="s1">offset</span><span class="s0">:{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">},</span><span class="s1">size</span><span class="s0">:{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">},</span><span class="s1">sizeClipSpace</span><span class="s0">:{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">}};</span><span class="s4">let </span><span class="s1">u</span><span class="s0">;</span><span class="s4">class </span><span class="s1">g</span><span class="s0">{</span><span class="s1">get pages</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">_pages</span><span class="s0">}</span><span class="s1">constructor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_document</span><span class="s0">=</span><span class="s1">e</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">=</span><span class="s1">t</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_unicodeService</span><span class="s0">=</span><span class="s1">i</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_didWarmUp</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_cacheMap</span><span class="s0">=</span><span class="s4">new </span><span class="s1">h</span><span class="s0">.</span><span class="s1">FourKeyMap</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_cacheMapCombined</span><span class="s0">=</span><span class="s4">new </span><span class="s1">h</span><span class="s0">.</span><span class="s1">FourKeyMap</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_pages</span><span class="s0">=[],</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_activePages</span><span class="s0">=[],</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_workBoundingBox</span><span class="s0">={</span><span class="s1">top</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">left</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">bottom</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">right</span><span class="s0">:</span><span class="s3">0</span><span class="s0">},</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_workAttributeData</span><span class="s0">=</span><span class="s4">new </span><span class="s1">c</span><span class="s0">.</span><span class="s1">AttributeData</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_textureSize</span><span class="s0">=</span><span class="s3">512</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_onAddTextureAtlasCanvas</span><span class="s0">=</span><span class="s4">new </span><span class="s1">a</span><span class="s0">.</span><span class="s1">EventEmitter</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">onAddTextureAtlasCanvas</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_onAddTextureAtlasCanvas</span><span class="s0">.</span><span class="s1">event</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_onRemoveTextureAtlasCanvas</span><span class="s0">=</span><span class="s4">new </span><span class="s1">a</span><span class="s0">.</span><span class="s1">EventEmitter</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">onRemoveTextureAtlasCanvas</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_onRemoveTextureAtlasCanvas</span><span class="s0">.</span><span class="s1">event</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_requestClearModel</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_createNewPage</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCanvas</span><span class="s0">=</span><span class="s1">p</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s3">4</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCellWidth</span><span class="s0">+</span><span class="s3">4</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCellHeight</span><span class="s0">+</span><span class="s3">4</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">o</span><span class="s0">.</span><span class="s1">throwIfFalsy</span><span class="s0">)(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCanvas</span><span class="s0">.</span><span class="s1">getContext</span><span class="s0">(</span><span class="s2">&quot;2d&quot;</span><span class="s0">,{</span><span class="s1">alpha</span><span class="s0">:</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">allowTransparency</span><span class="s0">,</span><span class="s1">willReadFrequently</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}))}</span><span class="s1">dispose</span><span class="s0">(){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">const </span><span class="s1">e of </span><span class="s4">this</span><span class="s0">.</span><span class="s1">pages</span><span class="s0">)</span><span class="s1">e</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">remove</span><span class="s0">();</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_onAddTextureAtlasCanvas</span><span class="s0">.</span><span class="s1">dispose</span><span class="s0">()}</span><span class="s1">warmUp</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_didWarmUp</span><span class="s0">||(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_doWarmUp</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_didWarmUp</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">)}</span><span class="s1">_doWarmUp</span><span class="s0">(){</span><span class="s4">const </span><span class="s1">e</span><span class="s0">=</span><span class="s4">new </span><span class="s1">l</span><span class="s0">.</span><span class="s1">IdleTaskQueue</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">let </span><span class="s1">t</span><span class="s0">=</span><span class="s3">33</span><span class="s0">;</span><span class="s1">t</span><span class="s0">&lt;</span><span class="s3">126</span><span class="s0">;</span><span class="s1">t</span><span class="s0">++)</span><span class="s1">e</span><span class="s0">.</span><span class="s1">enqueue</span><span class="s0">((()=&gt;{</span><span class="s4">if</span><span class="s0">(!</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_cacheMap</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">d</span><span class="s0">.</span><span class="s1">DEFAULT_COLOR</span><span class="s0">,</span><span class="s1">d</span><span class="s0">.</span><span class="s1">DEFAULT_COLOR</span><span class="s0">,</span><span class="s1">d</span><span class="s0">.</span><span class="s1">DEFAULT_EXT</span><span class="s0">)){</span><span class="s4">const </span><span class="s1">e</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_drawToCache</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">d</span><span class="s0">.</span><span class="s1">DEFAULT_COLOR</span><span class="s0">,</span><span class="s1">d</span><span class="s0">.</span><span class="s1">DEFAULT_COLOR</span><span class="s0">,</span><span class="s1">d</span><span class="s0">.</span><span class="s1">DEFAULT_EXT</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_cacheMap</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">d</span><span class="s0">.</span><span class="s1">DEFAULT_COLOR</span><span class="s0">,</span><span class="s1">d</span><span class="s0">.</span><span class="s1">DEFAULT_COLOR</span><span class="s0">,</span><span class="s1">d</span><span class="s0">.</span><span class="s1">DEFAULT_EXT</span><span class="s0">,</span><span class="s1">e</span><span class="s0">)}}))}</span><span class="s1">beginFrame</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">_requestClearModel</span><span class="s0">}</span><span class="s1">clearTexture</span><span class="s0">(){</span><span class="s4">if</span><span class="s0">(</span><span class="s3">0</span><span class="s0">!==</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_pages</span><span class="s0">[</span><span class="s3">0</span><span class="s0">].</span><span class="s1">currentRow</span><span class="s0">.</span><span class="s1">x</span><span class="s0">||</span><span class="s3">0</span><span class="s0">!==</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_pages</span><span class="s0">[</span><span class="s3">0</span><span class="s0">].</span><span class="s1">currentRow</span><span class="s0">.</span><span class="s1">y</span><span class="s0">){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">const </span><span class="s1">e of </span><span class="s4">this</span><span class="s0">.</span><span class="s1">_pages</span><span class="s0">)</span><span class="s1">e</span><span class="s0">.</span><span class="s1">clear</span><span class="s0">();</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_cacheMap</span><span class="s0">.</span><span class="s1">clear</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_cacheMapCombined</span><span class="s0">.</span><span class="s1">clear</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_didWarmUp</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">}}</span><span class="s1">_createNewPage</span><span class="s0">(){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">g</span><span class="s0">.</span><span class="s1">maxAtlasPages</span><span class="s0">&amp;&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_pages</span><span class="s0">.</span><span class="s1">length</span><span class="s0">&gt;=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">max</span><span class="s0">(</span><span class="s3">4</span><span class="s0">,</span><span class="s1">g</span><span class="s0">.</span><span class="s1">maxAtlasPages</span><span class="s0">)){</span><span class="s4">const </span><span class="s1">e</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_pages</span><span class="s0">.</span><span class="s1">filter</span><span class="s0">((</span><span class="s1">e</span><span class="s0">=&gt;</span><span class="s3">2</span><span class="s0">*</span><span class="s1">e</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">&lt;=(</span><span class="s1">g</span><span class="s0">.</span><span class="s1">maxTextureSize</span><span class="s0">||</span><span class="s3">4096</span><span class="s0">))).</span><span class="s1">sort</span><span class="s0">(((</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">!==</span><span class="s1">e</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">?</span><span class="s1">t</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">-</span><span class="s1">e</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">:</span><span class="s1">t</span><span class="s0">.</span><span class="s1">percentageUsed</span><span class="s0">-</span><span class="s1">e</span><span class="s0">.</span><span class="s1">percentageUsed</span><span class="s0">));</span><span class="s4">let </span><span class="s1">t</span><span class="s0">=-</span><span class="s3">1</span><span class="s0">,</span><span class="s1">i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">let </span><span class="s1">a</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">a</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">a</span><span class="s0">++)</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">[</span><span class="s1">a</span><span class="s0">].</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">!==</span><span class="s1">i</span><span class="s0">)</span><span class="s1">t</span><span class="s0">=</span><span class="s1">a</span><span class="s0">,</span><span class="s1">i</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">a</span><span class="s0">].</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">;</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">a</span><span class="s0">-</span><span class="s1">t</span><span class="s0">==</span><span class="s3">3</span><span class="s0">)</span><span class="s4">break</span><span class="s0">;</span><span class="s4">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">slice</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">t</span><span class="s0">+</span><span class="s3">4</span><span class="s0">),</span><span class="s1">r</span><span class="s0">=</span><span class="s1">s</span><span class="s0">.</span><span class="s1">map</span><span class="s0">((</span><span class="s1">e</span><span class="s0">=&gt;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">glyphs</span><span class="s0">[</span><span class="s3">0</span><span class="s0">].</span><span class="s1">texturePage</span><span class="s0">)).</span><span class="s1">sort</span><span class="s0">(((</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;</span><span class="s1">e</span><span class="s0">&gt;</span><span class="s1">t</span><span class="s0">?</span><span class="s3">1</span><span class="s0">:-</span><span class="s3">1</span><span class="s0">)),</span><span class="s1">o</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">pages</span><span class="s0">.</span><span class="s1">length</span><span class="s0">-</span><span class="s1">s</span><span class="s0">.</span><span class="s1">length</span><span class="s0">,</span><span class="s1">n</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_mergePages</span><span class="s0">(</span><span class="s1">s</span><span class="s0">,</span><span class="s1">o</span><span class="s0">);</span><span class="s1">n</span><span class="s0">.</span><span class="s1">version</span><span class="s0">++;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">let </span><span class="s1">a</span><span class="s0">=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">length</span><span class="s0">-</span><span class="s3">1</span><span class="s0">;</span><span class="s1">a</span><span class="s0">&gt;=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">a</span><span class="s0">--)</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_deletePage</span><span class="s0">(</span><span class="s1">r</span><span class="s0">[</span><span class="s1">a</span><span class="s0">]);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">pages</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">n</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_requestClearModel</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_onAddTextureAtlasCanvas</span><span class="s0">.</span><span class="s1">fire</span><span class="s0">(</span><span class="s1">n</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">)}</span><span class="s4">const </span><span class="s1">e</span><span class="s0">=</span><span class="s4">new </span><span class="s1">v</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_document</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_textureSize</span><span class="s0">);</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">_pages</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">e</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_activePages</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">e</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_onAddTextureAtlasCanvas</span><span class="s0">.</span><span class="s1">fire</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">),</span><span class="s1">e</span><span class="s0">}</span><span class="s1">_mergePages</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">){</span><span class="s4">const </span><span class="s1">i</span><span class="s0">=</span><span class="s3">2</span><span class="s0">*</span><span class="s1">e</span><span class="s0">[</span><span class="s3">0</span><span class="s0">].</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">,</span><span class="s1">s</span><span class="s0">=</span><span class="s4">new </span><span class="s1">v</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_document</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">e</span><span class="s0">);</span><span class="s4">for</span><span class="s0">(</span><span class="s4">const</span><span class="s0">[</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">]</span><span class="s1">of e</span><span class="s0">.</span><span class="s1">entries</span><span class="s0">()){</span><span class="s4">const </span><span class="s1">e</span><span class="s0">=</span><span class="s1">r</span><span class="s0">*</span><span class="s1">o</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">%</span><span class="s1">i</span><span class="s0">,</span><span class="s1">n</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">floor</span><span class="s0">(</span><span class="s1">r</span><span class="s0">/</span><span class="s3">2</span><span class="s0">)*</span><span class="s1">o</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">;</span><span class="s1">s</span><span class="s0">.</span><span class="s1">ctx</span><span class="s0">.</span><span class="s1">drawImage</span><span class="s0">(</span><span class="s1">o</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">n</span><span class="s0">);</span><span class="s4">for</span><span class="s0">(</span><span class="s4">const </span><span class="s1">s of o</span><span class="s0">.</span><span class="s1">glyphs</span><span class="s0">)</span><span class="s1">s</span><span class="s0">.</span><span class="s1">texturePage</span><span class="s0">=</span><span class="s1">t</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">sizeClipSpace</span><span class="s0">.</span><span class="s1">x</span><span class="s0">=</span><span class="s1">s</span><span class="s0">.</span><span class="s1">size</span><span class="s0">.</span><span class="s1">x</span><span class="s0">/</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">sizeClipSpace</span><span class="s0">.</span><span class="s1">y</span><span class="s0">=</span><span class="s1">s</span><span class="s0">.</span><span class="s1">size</span><span class="s0">.</span><span class="s1">y</span><span class="s0">/</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">texturePosition</span><span class="s0">.</span><span class="s1">x</span><span class="s0">+=</span><span class="s1">e</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">texturePosition</span><span class="s0">.</span><span class="s1">y</span><span class="s0">+=</span><span class="s1">n</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">texturePositionClipSpace</span><span class="s0">.</span><span class="s1">x</span><span class="s0">=</span><span class="s1">s</span><span class="s0">.</span><span class="s1">texturePosition</span><span class="s0">.</span><span class="s1">x</span><span class="s0">/</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">texturePositionClipSpace</span><span class="s0">.</span><span class="s1">y</span><span class="s0">=</span><span class="s1">s</span><span class="s0">.</span><span class="s1">texturePosition</span><span class="s0">.</span><span class="s1">y</span><span class="s0">/</span><span class="s1">i</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_onRemoveTextureAtlasCanvas</span><span class="s0">.</span><span class="s1">fire</span><span class="s0">(</span><span class="s1">o</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">);</span><span class="s4">const </span><span class="s1">a</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_activePages</span><span class="s0">.</span><span class="s1">indexOf</span><span class="s0">(</span><span class="s1">o</span><span class="s0">);-</span><span class="s3">1</span><span class="s0">!==</span><span class="s1">a</span><span class="s0">&amp;&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_activePages</span><span class="s0">.</span><span class="s1">splice</span><span class="s0">(</span><span class="s1">a</span><span class="s0">,</span><span class="s3">1</span><span class="s0">)}</span><span class="s4">return </span><span class="s1">s</span><span class="s0">}</span><span class="s1">_deletePage</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_pages</span><span class="s0">.</span><span class="s1">splice</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s3">1</span><span class="s0">);</span><span class="s4">for</span><span class="s0">(</span><span class="s4">let </span><span class="s1">t</span><span class="s0">=</span><span class="s1">e</span><span class="s0">;</span><span class="s1">t</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_pages</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">t</span><span class="s0">++){</span><span class="s4">const </span><span class="s1">e</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_pages</span><span class="s0">[</span><span class="s1">t</span><span class="s0">];</span><span class="s4">for</span><span class="s0">(</span><span class="s4">const </span><span class="s1">t of e</span><span class="s0">.</span><span class="s1">glyphs</span><span class="s0">)</span><span class="s1">t</span><span class="s0">.</span><span class="s1">texturePage</span><span class="s0">--;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">version</span><span class="s0">++}}</span><span class="s1">getRasterizedGlyphCombinedChar</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">_getFromCacheMap</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_cacheMapCombined</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">)}</span><span class="s1">getRasterizedGlyph</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">_getFromCacheMap</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_cacheMap</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">)}</span><span class="s1">_getFromCacheMap</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">){</span><span class="s4">return </span><span class="s1">u</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">),</span><span class="s1">u</span><span class="s0">||(</span><span class="s1">u</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_drawToCache</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">),</span><span class="s1">e</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">u</span><span class="s0">)),</span><span class="s1">u</span><span class="s0">}</span><span class="s1">_getColorFromAnsiIndex</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">&gt;=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">ansi</span><span class="s0">.</span><span class="s1">length</span><span class="s0">)</span><span class="s4">throw new </span><span class="s1">Error</span><span class="s0">(</span><span class="s2">&quot;No color found for idx &quot;</span><span class="s0">+</span><span class="s1">e</span><span class="s0">);</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">ansi</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]}</span><span class="s1">_getBackgroundColor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">allowTransparency</span><span class="s0">)</span><span class="s4">return </span><span class="s1">n</span><span class="s0">.</span><span class="s1">NULL_COLOR</span><span class="s0">;</span><span class="s4">let </span><span class="s1">r</span><span class="s0">;</span><span class="s4">switch</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">case </span><span class="s3">16777216</span><span class="s0">:</span><span class="s4">case </span><span class="s3">33554432</span><span class="s0">:</span><span class="s1">r</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_getColorFromAnsiIndex</span><span class="s0">(</span><span class="s1">t</span><span class="s0">);</span><span class="s4">break</span><span class="s0">;</span><span class="s4">case </span><span class="s3">50331648</span><span class="s0">:</span><span class="s4">const </span><span class="s1">e</span><span class="s0">=</span><span class="s1">c</span><span class="s0">.</span><span class="s1">AttributeData</span><span class="s0">.</span><span class="s1">toColorRGB</span><span class="s0">(</span><span class="s1">t</span><span class="s0">);</span><span class="s1">r</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">channels</span><span class="s0">.</span><span class="s1">toColor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">[</span><span class="s3">0</span><span class="s0">],</span><span class="s1">e</span><span class="s0">[</span><span class="s3">1</span><span class="s0">],</span><span class="s1">e</span><span class="s0">[</span><span class="s3">2</span><span class="s0">]);</span><span class="s4">break</span><span class="s0">;</span><span class="s4">default</span><span class="s0">:</span><span class="s1">r</span><span class="s0">=</span><span class="s1">i</span><span class="s0">?</span><span class="s1">n</span><span class="s0">.</span><span class="s1">color</span><span class="s0">.</span><span class="s1">opaque</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">foreground</span><span class="s0">):</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">background</span><span class="s0">}</span><span class="s4">return </span><span class="s1">r</span><span class="s0">}</span><span class="s1">_getForegroundColor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">h</span><span class="s0">,</span><span class="s1">l</span><span class="s0">,</span><span class="s1">d</span><span class="s0">,</span><span class="s1">_</span><span class="s0">){</span><span class="s4">const </span><span class="s1">u</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_getMinimumContrastColor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">h</span><span class="s0">,</span><span class="s1">d</span><span class="s0">,</span><span class="s1">l</span><span class="s0">,</span><span class="s1">_</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">u</span><span class="s0">)</span><span class="s4">return </span><span class="s1">u</span><span class="s0">;</span><span class="s4">let </span><span class="s1">g</span><span class="s0">;</span><span class="s4">switch</span><span class="s0">(</span><span class="s1">o</span><span class="s0">){</span><span class="s4">case </span><span class="s3">16777216</span><span class="s0">:</span><span class="s4">case </span><span class="s3">33554432</span><span class="s0">:</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">drawBoldTextInBrightColors</span><span class="s0">&amp;&amp;</span><span class="s1">d</span><span class="s0">&amp;&amp;</span><span class="s1">a</span><span class="s0">&lt;</span><span class="s3">8</span><span class="s0">&amp;&amp;(</span><span class="s1">a</span><span class="s0">+=</span><span class="s3">8</span><span class="s0">),</span><span class="s1">g</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_getColorFromAnsiIndex</span><span class="s0">(</span><span class="s1">a</span><span class="s0">);</span><span class="s4">break</span><span class="s0">;</span><span class="s4">case </span><span class="s3">50331648</span><span class="s0">:</span><span class="s4">const </span><span class="s1">e</span><span class="s0">=</span><span class="s1">c</span><span class="s0">.</span><span class="s1">AttributeData</span><span class="s0">.</span><span class="s1">toColorRGB</span><span class="s0">(</span><span class="s1">a</span><span class="s0">);</span><span class="s1">g</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">channels</span><span class="s0">.</span><span class="s1">toColor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">[</span><span class="s3">0</span><span class="s0">],</span><span class="s1">e</span><span class="s0">[</span><span class="s3">1</span><span class="s0">],</span><span class="s1">e</span><span class="s0">[</span><span class="s3">2</span><span class="s0">]);</span><span class="s4">break</span><span class="s0">;</span><span class="s4">default</span><span class="s0">:</span><span class="s1">g</span><span class="s0">=</span><span class="s1">h</span><span class="s0">?</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">background</span><span class="s0">:</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">foreground</span><span class="s0">}</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">allowTransparency</span><span class="s0">&amp;&amp;(</span><span class="s1">g</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">color</span><span class="s0">.</span><span class="s1">opaque</span><span class="s0">(</span><span class="s1">g</span><span class="s0">)),</span><span class="s1">l</span><span class="s0">&amp;&amp;(</span><span class="s1">g</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">color</span><span class="s0">.</span><span class="s1">multiplyOpacity</span><span class="s0">(</span><span class="s1">g</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">DIM_OPACITY</span><span class="s0">)),</span><span class="s1">g</span><span class="s0">}</span><span class="s1">_resolveBackgroundRgba</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s4">switch</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">case </span><span class="s3">16777216</span><span class="s0">:</span><span class="s4">case </span><span class="s3">33554432</span><span class="s0">:</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">_getColorFromAnsiIndex</span><span class="s0">(</span><span class="s1">t</span><span class="s0">).</span><span class="s1">rgba</span><span class="s0">;</span><span class="s4">case </span><span class="s3">50331648</span><span class="s0">:</span><span class="s4">return </span><span class="s1">t</span><span class="s0">&lt;&lt;</span><span class="s3">8</span><span class="s0">;</span><span class="s4">default</span><span class="s0">:</span><span class="s4">return </span><span class="s1">i</span><span class="s0">?</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">foreground</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">:</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">background</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">}}</span><span class="s1">_resolveForegroundRgba</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">){</span><span class="s4">switch</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">case </span><span class="s3">16777216</span><span class="s0">:</span><span class="s4">case </span><span class="s3">33554432</span><span class="s0">:</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">drawBoldTextInBrightColors</span><span class="s0">&amp;&amp;</span><span class="s1">s</span><span class="s0">&amp;&amp;</span><span class="s1">t</span><span class="s0">&lt;</span><span class="s3">8</span><span class="s0">&amp;&amp;(</span><span class="s1">t</span><span class="s0">+=</span><span class="s3">8</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_getColorFromAnsiIndex</span><span class="s0">(</span><span class="s1">t</span><span class="s0">).</span><span class="s1">rgba</span><span class="s0">;</span><span class="s4">case </span><span class="s3">50331648</span><span class="s0">:</span><span class="s4">return </span><span class="s1">t</span><span class="s0">&lt;&lt;</span><span class="s3">8</span><span class="s0">;</span><span class="s4">default</span><span class="s0">:</span><span class="s4">return </span><span class="s1">i</span><span class="s0">?</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">background</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">:</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">foreground</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">}}</span><span class="s1">_getMinimumContrastColor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">h</span><span class="s0">,</span><span class="s1">l</span><span class="s0">,</span><span class="s1">c</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s3">1</span><span class="s0">===</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">minimumContrastRatio</span><span class="s0">||</span><span class="s1">c</span><span class="s0">)</span><span class="s4">return</span><span class="s0">;</span><span class="s4">const </span><span class="s1">d</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_getContrastCache</span><span class="s0">(</span><span class="s1">l</span><span class="s0">),</span><span class="s1">_</span><span class="s0">=</span><span class="s1">d</span><span class="s0">.</span><span class="s1">getColor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">s</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s4">void </span><span class="s3">0</span><span class="s0">!==</span><span class="s1">_</span><span class="s0">)</span><span class="s4">return </span><span class="s1">_</span><span class="s0">||</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">const </span><span class="s1">u</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_resolveBackgroundRgba</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">a</span><span class="s0">),</span><span class="s1">g</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_resolveForegroundRgba</span><span class="s0">(</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">h</span><span class="s0">),</span><span class="s1">v</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">.</span><span class="s1">ensureContrastRatio</span><span class="s0">(</span><span class="s1">u</span><span class="s0">,</span><span class="s1">g</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">minimumContrastRatio</span><span class="s0">/(</span><span class="s1">l</span><span class="s0">?</span><span class="s3">2</span><span class="s0">:</span><span class="s3">1</span><span class="s0">));</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">v</span><span class="s0">)</span><span class="s4">return void </span><span class="s1">d</span><span class="s0">.</span><span class="s1">setColor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s4">null</span><span class="s0">);</span><span class="s4">const </span><span class="s1">f</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">channels</span><span class="s0">.</span><span class="s1">toColor</span><span class="s0">(</span><span class="s1">v</span><span class="s0">&gt;&gt;</span><span class="s3">24</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">v</span><span class="s0">&gt;&gt;</span><span class="s3">16</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">v</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">);</span><span class="s4">return </span><span class="s1">d</span><span class="s0">.</span><span class="s1">setColor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">f</span><span class="s0">),</span><span class="s1">f</span><span class="s0">}</span><span class="s1">_getContrastCache</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">return </span><span class="s1">e</span><span class="s0">?</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">halfContrastCache</span><span class="s0">:</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">colors</span><span class="s0">.</span><span class="s1">contrastCache</span><span class="s0">}</span><span class="s1">_drawToCache</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">a</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">){</span><span class="s4">const </span><span class="s1">h</span><span class="s0">=</span><span class="s2">&quot;number&quot;</span><span class="s0">==</span><span class="s4">typeof </span><span class="s1">e</span><span class="s0">?</span><span class="s1">String</span><span class="s0">.</span><span class="s1">fromCharCode</span><span class="s0">(</span><span class="s1">e</span><span class="s0">):</span><span class="s1">e</span><span class="s0">,</span><span class="s1">l</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">min</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCellWidth</span><span class="s0">*</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">max</span><span class="s0">(</span><span class="s1">h</span><span class="s0">.</span><span class="s1">length</span><span class="s0">,</span><span class="s3">2</span><span class="s0">)+</span><span class="s3">4</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_textureSize</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCanvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">&lt;</span><span class="s1">l</span><span class="s0">&amp;&amp;(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCanvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">=</span><span class="s1">l</span><span class="s0">);</span><span class="s4">const </span><span class="s1">d</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">min</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCellHeight</span><span class="s0">+</span><span class="s3">8</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_textureSize</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCanvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">&lt;</span><span class="s1">d</span><span class="s0">&amp;&amp;(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCanvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">=</span><span class="s1">d</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">save</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_workAttributeData</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">=</span><span class="s1">i</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_workAttributeData</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">=</span><span class="s1">t</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_workAttributeData</span><span class="s0">.</span><span class="s1">extended</span><span class="s0">.</span><span class="s1">ext</span><span class="s0">=</span><span class="s1">n</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_workAttributeData</span><span class="s0">.</span><span class="s1">isInvisible</span><span class="s0">())</span><span class="s4">return </span><span class="s1">_</span><span class="s0">;</span><span class="s4">const </span><span class="s1">u</span><span class="s0">=!!</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_workAttributeData</span><span class="s0">.</span><span class="s1">isBold</span><span class="s0">(),</span><span class="s1">v</span><span class="s0">=!!</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_workAttributeData</span><span class="s0">.</span><span class="s1">isInverse</span><span class="s0">(),</span><span class="s1">p</span><span class="s0">=!!</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_workAttributeData</span><span class="s0">.</span><span class="s1">isDim</span><span class="s0">(),</span><span class="s1">C</span><span class="s0">=!!</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_workAttributeData</span><span class="s0">.</span><span class="s1">isItalic</span><span class="s0">(),</span><span class="s1">m</span><span class="s0">=!!</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_workAttributeData</span><span class="s0">.</span><span class="s1">isUnderline</span><span class="s0">(),</span><span class="s1">L</span><span class="s0">=!!</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_workAttributeData</span><span class="s0">.</span><span class="s1">isStrikethrough</span><span class="s0">(),</span><span class="s1">x</span><span class="s0">=!!</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_workAttributeData</span><span class="s0">.</span><span class="s1">isOverline</span><span class="s0">();</span><span class="s4">let </span><span class="s1">w</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_workAttributeData</span><span class="s0">.</span><span class="s1">getFgColor</span><span class="s0">(),</span><span class="s1">b</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_workAttributeData</span><span class="s0">.</span><span class="s1">getFgColorMode</span><span class="s0">(),</span><span class="s1">M</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_workAttributeData</span><span class="s0">.</span><span class="s1">getBgColor</span><span class="s0">(),</span><span class="s1">R</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_workAttributeData</span><span class="s0">.</span><span class="s1">getBgColorMode</span><span class="s0">();</span><span class="s4">if</span><span class="s0">(</span><span class="s1">v</span><span class="s0">){</span><span class="s4">const </span><span class="s1">e</span><span class="s0">=</span><span class="s1">w</span><span class="s0">;</span><span class="s1">w</span><span class="s0">=</span><span class="s1">M</span><span class="s0">,</span><span class="s1">M</span><span class="s0">=</span><span class="s1">e</span><span class="s0">;</span><span class="s4">const </span><span class="s1">t</span><span class="s0">=</span><span class="s1">b</span><span class="s0">;</span><span class="s1">b</span><span class="s0">=</span><span class="s1">R</span><span class="s0">,</span><span class="s1">R</span><span class="s0">=</span><span class="s1">t</span><span class="s0">}</span><span class="s4">const </span><span class="s1">y</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_getBackgroundColor</span><span class="s0">(</span><span class="s1">R</span><span class="s0">,</span><span class="s1">M</span><span class="s0">,</span><span class="s1">v</span><span class="s0">,</span><span class="s1">p</span><span class="s0">);</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">globalCompositeOperation</span><span class="s0">=</span><span class="s2">&quot;copy&quot;</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">fillStyle</span><span class="s0">=</span><span class="s1">y</span><span class="s0">.</span><span class="s1">css</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">fillRect</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCanvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCanvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">globalCompositeOperation</span><span class="s0">=</span><span class="s2">&quot;source-over&quot;</span><span class="s0">;</span><span class="s4">const </span><span class="s1">A</span><span class="s0">=</span><span class="s1">u</span><span class="s0">?</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">fontWeightBold</span><span class="s0">:</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">fontWeight</span><span class="s0">,</span><span class="s1">E</span><span class="s0">=</span><span class="s1">C</span><span class="s0">?</span><span class="s2">&quot;italic&quot;</span><span class="s0">:</span><span class="s2">&quot;&quot;</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">font</span><span class="s0">=</span><span class="s2">`</span><span class="s1">$</span><span class="s0">{</span><span class="s1">E</span><span class="s0">} </span><span class="s1">$</span><span class="s0">{</span><span class="s1">A</span><span class="s0">} </span><span class="s1">$</span><span class="s0">{</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">fontSize</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">devicePixelRatio</span><span class="s0">}</span><span class="s2">px </span><span class="s1">$</span><span class="s0">{</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">fontFamily</span><span class="s0">}</span><span class="s2">`</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">textBaseline</span><span class="s0">=</span><span class="s1">s</span><span class="s0">.</span><span class="s1">TEXT_BASELINE</span><span class="s0">;</span><span class="s4">const </span><span class="s1">S</span><span class="s0">=</span><span class="s3">1</span><span class="s0">===</span><span class="s1">h</span><span class="s0">.</span><span class="s1">length</span><span class="s0">&amp;&amp;(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">o</span><span class="s0">.</span><span class="s1">isPowerlineGlyph</span><span class="s0">)(</span><span class="s1">h</span><span class="s0">.</span><span class="s1">charCodeAt</span><span class="s0">(</span><span class="s3">0</span><span class="s0">)),</span><span class="s1">T</span><span class="s0">=</span><span class="s3">1</span><span class="s0">===</span><span class="s1">h</span><span class="s0">.</span><span class="s1">length</span><span class="s0">&amp;&amp;(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">o</span><span class="s0">.</span><span class="s1">isRestrictedPowerlineGlyph</span><span class="s0">)(</span><span class="s1">h</span><span class="s0">.</span><span class="s1">charCodeAt</span><span class="s0">(</span><span class="s3">0</span><span class="s0">)),</span><span class="s1">D</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_getForegroundColor</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">R</span><span class="s0">,</span><span class="s1">M</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">b</span><span class="s0">,</span><span class="s1">w</span><span class="s0">,</span><span class="s1">v</span><span class="s0">,</span><span class="s1">p</span><span class="s0">,</span><span class="s1">u</span><span class="s0">,(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">o</span><span class="s0">.</span><span class="s1">treatGlyphAsBackgroundColor</span><span class="s0">)(</span><span class="s1">h</span><span class="s0">.</span><span class="s1">charCodeAt</span><span class="s0">(</span><span class="s3">0</span><span class="s0">)));</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">fillStyle</span><span class="s0">=</span><span class="s1">D</span><span class="s0">.</span><span class="s1">css</span><span class="s0">;</span><span class="s4">const </span><span class="s1">B</span><span class="s0">=</span><span class="s1">T</span><span class="s0">?</span><span class="s3">0</span><span class="s0">:</span><span class="s3">4</span><span class="s0">;</span><span class="s4">let </span><span class="s1">F</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">;!</span><span class="s3">1</span><span class="s0">!==</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">customGlyphs</span><span class="s0">&amp;&amp;(</span><span class="s1">F</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">r</span><span class="s0">.</span><span class="s1">tryDrawCustomChar</span><span class="s0">)(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">,</span><span class="s1">h</span><span class="s0">,</span><span class="s1">B</span><span class="s0">,</span><span class="s1">B</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCellWidth</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCellHeight</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">fontSize</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">devicePixelRatio</span><span class="s0">));</span><span class="s4">let </span><span class="s1">P</span><span class="s0">,</span><span class="s1">I</span><span class="s0">=!</span><span class="s1">S</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">P</span><span class="s0">=</span><span class="s2">&quot;number&quot;</span><span class="s0">==</span><span class="s4">typeof </span><span class="s1">e</span><span class="s0">?</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_unicodeService</span><span class="s0">.</span><span class="s1">wcwidth</span><span class="s0">(</span><span class="s1">e</span><span class="s0">):</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_unicodeService</span><span class="s0">.</span><span class="s1">getStringCellWidth</span><span class="s0">(</span><span class="s1">e</span><span class="s0">),</span><span class="s1">m</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">save</span><span class="s0">();</span><span class="s4">const </span><span class="s1">e</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">max</span><span class="s0">(</span><span class="s3">1</span><span class="s0">,</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">floor</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">fontSize</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">devicePixelRatio</span><span class="s0">/</span><span class="s3">15</span><span class="s0">)),</span><span class="s1">t</span><span class="s0">=</span><span class="s1">e</span><span class="s0">%</span><span class="s3">2</span><span class="s0">==</span><span class="s3">1</span><span class="s0">?</span><span class="s3">.5</span><span class="s0">:</span><span class="s3">0</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">lineWidth</span><span class="s0">=</span><span class="s1">e</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_workAttributeData</span><span class="s0">.</span><span class="s1">isUnderlineColorDefault</span><span class="s0">())</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">strokeStyle</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">fillStyle</span><span class="s0">;</span><span class="s4">else if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_workAttributeData</span><span class="s0">.</span><span class="s1">isUnderlineColorRGB</span><span class="s0">())</span><span class="s1">I</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">strokeStyle</span><span class="s0">=</span><span class="s2">`rgb(</span><span class="s1">$</span><span class="s0">{</span><span class="s1">c</span><span class="s0">.</span><span class="s1">AttributeData</span><span class="s0">.</span><span class="s1">toColorRGB</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_workAttributeData</span><span class="s0">.</span><span class="s1">getUnderlineColor</span><span class="s0">()).</span><span class="s1">join</span><span class="s0">(</span><span class="s2">&quot;,&quot;</span><span class="s0">)}</span><span class="s2">)`</span><span class="s0">;</span><span class="s4">else</span><span class="s0">{</span><span class="s1">I</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">;</span><span class="s4">let </span><span class="s1">e</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_workAttributeData</span><span class="s0">.</span><span class="s1">getUnderlineColor</span><span class="s0">();</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">drawBoldTextInBrightColors</span><span class="s0">&amp;&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_workAttributeData</span><span class="s0">.</span><span class="s1">isBold</span><span class="s0">()&amp;&amp;</span><span class="s1">e</span><span class="s0">&lt;</span><span class="s3">8</span><span class="s0">&amp;&amp;(</span><span class="s1">e</span><span class="s0">+=</span><span class="s3">8</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">strokeStyle</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_getColorFromAnsiIndex</span><span class="s0">(</span><span class="s1">e</span><span class="s0">).</span><span class="s1">css</span><span class="s0">}</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">beginPath</span><span class="s0">();</span><span class="s4">const </span><span class="s1">i</span><span class="s0">=</span><span class="s1">B</span><span class="s0">,</span><span class="s1">s</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">ceil</span><span class="s0">(</span><span class="s1">B</span><span class="s0">+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCharHeight</span><span class="s0">)-</span><span class="s1">t</span><span class="s0">-(</span><span class="s1">a</span><span class="s0">?</span><span class="s3">2</span><span class="s0">*</span><span class="s1">e</span><span class="s0">:</span><span class="s3">0</span><span class="s0">),</span><span class="s1">r</span><span class="s0">=</span><span class="s1">s</span><span class="s0">+</span><span class="s1">e</span><span class="s0">,</span><span class="s1">n</span><span class="s0">=</span><span class="s1">s</span><span class="s0">+</span><span class="s3">2</span><span class="s0">*</span><span class="s1">e</span><span class="s0">;</span><span class="s4">let </span><span class="s1">l</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_workAttributeData</span><span class="s0">.</span><span class="s1">getUnderlineVariantOffset</span><span class="s0">();</span><span class="s4">for</span><span class="s0">(</span><span class="s4">let </span><span class="s1">a</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">a</span><span class="s0">&lt;</span><span class="s1">P</span><span class="s0">;</span><span class="s1">a</span><span class="s0">++){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">save</span><span class="s0">();</span><span class="s4">const </span><span class="s1">h</span><span class="s0">=</span><span class="s1">i</span><span class="s0">+</span><span class="s1">a</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCellWidth</span><span class="s0">,</span><span class="s1">c</span><span class="s0">=</span><span class="s1">i</span><span class="s0">+(</span><span class="s1">a</span><span class="s0">+</span><span class="s3">1</span><span class="s0">)*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCellWidth</span><span class="s0">,</span><span class="s1">d</span><span class="s0">=</span><span class="s1">h</span><span class="s0">+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCellWidth</span><span class="s0">/</span><span class="s3">2</span><span class="s0">;</span><span class="s4">switch</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_workAttributeData</span><span class="s0">.</span><span class="s1">extended</span><span class="s0">.</span><span class="s1">underlineStyle</span><span class="s0">){</span><span class="s4">case </span><span class="s3">2</span><span class="s0">:</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">moveTo</span><span class="s0">(</span><span class="s1">h</span><span class="s0">,</span><span class="s1">s</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">lineTo</span><span class="s0">(</span><span class="s1">c</span><span class="s0">,</span><span class="s1">s</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">moveTo</span><span class="s0">(</span><span class="s1">h</span><span class="s0">,</span><span class="s1">n</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">lineTo</span><span class="s0">(</span><span class="s1">c</span><span class="s0">,</span><span class="s1">n</span><span class="s0">);</span><span class="s4">break</span><span class="s0">;</span><span class="s4">case </span><span class="s3">3</span><span class="s0">:</span><span class="s4">const </span><span class="s1">i</span><span class="s0">=</span><span class="s1">e</span><span class="s0">&lt;=</span><span class="s3">1</span><span class="s0">?</span><span class="s1">n</span><span class="s0">:</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">ceil</span><span class="s0">(</span><span class="s1">B</span><span class="s0">+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCharHeight</span><span class="s0">-</span><span class="s1">e</span><span class="s0">/</span><span class="s3">2</span><span class="s0">)-</span><span class="s1">t</span><span class="s0">,</span><span class="s1">a</span><span class="s0">=</span><span class="s1">e</span><span class="s0">&lt;=</span><span class="s3">1</span><span class="s0">?</span><span class="s1">s</span><span class="s0">:</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">ceil</span><span class="s0">(</span><span class="s1">B</span><span class="s0">+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCharHeight</span><span class="s0">+</span><span class="s1">e</span><span class="s0">/</span><span class="s3">2</span><span class="s0">)-</span><span class="s1">t</span><span class="s0">,</span><span class="s1">_</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Path2D</span><span class="s0">;</span><span class="s1">_</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">(</span><span class="s1">h</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCellWidth</span><span class="s0">,</span><span class="s1">n</span><span class="s0">-</span><span class="s1">s</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">clip</span><span class="s0">(</span><span class="s1">_</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">moveTo</span><span class="s0">(</span><span class="s1">h</span><span class="s0">-</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCellWidth</span><span class="s0">/</span><span class="s3">2</span><span class="s0">,</span><span class="s1">r</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">bezierCurveTo</span><span class="s0">(</span><span class="s1">h</span><span class="s0">-</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCellWidth</span><span class="s0">/</span><span class="s3">2</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">h</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">h</span><span class="s0">,</span><span class="s1">r</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">bezierCurveTo</span><span class="s0">(</span><span class="s1">h</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">d</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">d</span><span class="s0">,</span><span class="s1">r</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">bezierCurveTo</span><span class="s0">(</span><span class="s1">d</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">c</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">c</span><span class="s0">,</span><span class="s1">r</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">bezierCurveTo</span><span class="s0">(</span><span class="s1">c</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">c</span><span class="s0">+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCellWidth</span><span class="s0">/</span><span class="s3">2</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">c</span><span class="s0">+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCellWidth</span><span class="s0">/</span><span class="s3">2</span><span class="s0">,</span><span class="s1">r</span><span class="s0">);</span><span class="s4">break</span><span class="s0">;</span><span class="s4">case </span><span class="s3">4</span><span class="s0">:</span><span class="s4">const </span><span class="s1">u</span><span class="s0">=</span><span class="s3">0</span><span class="s0">===</span><span class="s1">l</span><span class="s0">?</span><span class="s3">0</span><span class="s0">:</span><span class="s1">l</span><span class="s0">&gt;=</span><span class="s1">e</span><span class="s0">?</span><span class="s3">2</span><span class="s0">*</span><span class="s1">e</span><span class="s0">-</span><span class="s1">l</span><span class="s0">:</span><span class="s1">e</span><span class="s0">-</span><span class="s1">l</span><span class="s0">;!</span><span class="s3">1</span><span class="s0">==!(</span><span class="s1">l</span><span class="s0">&gt;=</span><span class="s1">e</span><span class="s0">)||</span><span class="s3">0</span><span class="s0">===</span><span class="s1">u</span><span class="s0">?(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">setLineDash</span><span class="s0">([</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">round</span><span class="s0">(</span><span class="s1">e</span><span class="s0">),</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">round</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)]),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">moveTo</span><span class="s0">(</span><span class="s1">h</span><span class="s0">+</span><span class="s1">u</span><span class="s0">,</span><span class="s1">s</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">lineTo</span><span class="s0">(</span><span class="s1">c</span><span class="s0">,</span><span class="s1">s</span><span class="s0">)):(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">setLineDash</span><span class="s0">([</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">round</span><span class="s0">(</span><span class="s1">e</span><span class="s0">),</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">round</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)]),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">moveTo</span><span class="s0">(</span><span class="s1">h</span><span class="s0">,</span><span class="s1">s</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">lineTo</span><span class="s0">(</span><span class="s1">h</span><span class="s0">+</span><span class="s1">u</span><span class="s0">,</span><span class="s1">s</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">moveTo</span><span class="s0">(</span><span class="s1">h</span><span class="s0">+</span><span class="s1">u</span><span class="s0">+</span><span class="s1">e</span><span class="s0">,</span><span class="s1">s</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">lineTo</span><span class="s0">(</span><span class="s1">c</span><span class="s0">,</span><span class="s1">s</span><span class="s0">)),</span><span class="s1">l</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">o</span><span class="s0">.</span><span class="s1">computeNextVariantOffset</span><span class="s0">)(</span><span class="s1">c</span><span class="s0">-</span><span class="s1">h</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">l</span><span class="s0">);</span><span class="s4">break</span><span class="s0">;</span><span class="s4">case </span><span class="s3">5</span><span class="s0">:</span><span class="s4">const </span><span class="s1">g</span><span class="s0">=</span><span class="s3">.6</span><span class="s0">,</span><span class="s1">v</span><span class="s0">=</span><span class="s3">.3</span><span class="s0">,</span><span class="s1">f</span><span class="s0">=</span><span class="s1">c</span><span class="s0">-</span><span class="s1">h</span><span class="s0">,</span><span class="s1">p</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">floor</span><span class="s0">(</span><span class="s1">g</span><span class="s0">*</span><span class="s1">f</span><span class="s0">),</span><span class="s1">C</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">floor</span><span class="s0">(</span><span class="s1">v</span><span class="s0">*</span><span class="s1">f</span><span class="s0">),</span><span class="s1">m</span><span class="s0">=</span><span class="s1">f</span><span class="s0">-</span><span class="s1">p</span><span class="s0">-</span><span class="s1">C</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">setLineDash</span><span class="s0">([</span><span class="s1">p</span><span class="s0">,</span><span class="s1">C</span><span class="s0">,</span><span class="s1">m</span><span class="s0">]),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">moveTo</span><span class="s0">(</span><span class="s1">h</span><span class="s0">,</span><span class="s1">s</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">lineTo</span><span class="s0">(</span><span class="s1">c</span><span class="s0">,</span><span class="s1">s</span><span class="s0">);</span><span class="s4">break</span><span class="s0">;</span><span class="s4">default</span><span class="s0">:</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">moveTo</span><span class="s0">(</span><span class="s1">h</span><span class="s0">,</span><span class="s1">s</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">lineTo</span><span class="s0">(</span><span class="s1">c</span><span class="s0">,</span><span class="s1">s</span><span class="s0">)}</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">stroke</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">restore</span><span class="s0">()}</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">restore</span><span class="s0">(),!</span><span class="s1">F</span><span class="s0">&amp;&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">fontSize</span><span class="s0">&gt;=</span><span class="s3">12</span><span class="s0">&amp;&amp;!</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">allowTransparency</span><span class="s0">&amp;&amp;</span><span class="s2">&quot; &quot;</span><span class="s0">!==</span><span class="s1">h</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">save</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">textBaseline</span><span class="s0">=</span><span class="s2">&quot;alphabetic&quot;</span><span class="s0">;</span><span class="s4">const </span><span class="s1">t</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">measureText</span><span class="s0">(</span><span class="s1">h</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">restore</span><span class="s0">(),</span><span class="s2">&quot;actualBoundingBoxDescent&quot;</span><span class="s4">in </span><span class="s1">t</span><span class="s0">&amp;&amp;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">actualBoundingBoxDescent</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">save</span><span class="s0">();</span><span class="s4">const </span><span class="s1">t</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Path2D</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rect</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">-</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">ceil</span><span class="s0">(</span><span class="s1">e</span><span class="s0">/</span><span class="s3">2</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCellWidth</span><span class="s0">*</span><span class="s1">P</span><span class="s0">,</span><span class="s1">n</span><span class="s0">-</span><span class="s1">s</span><span class="s0">+</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">ceil</span><span class="s0">(</span><span class="s1">e</span><span class="s0">/</span><span class="s3">2</span><span class="s0">)),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">clip</span><span class="s0">(</span><span class="s1">t</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">lineWidth</span><span class="s0">=</span><span class="s3">3</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">devicePixelRatio</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">strokeStyle</span><span class="s0">=</span><span class="s1">y</span><span class="s0">.</span><span class="s1">css</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">strokeText</span><span class="s0">(</span><span class="s1">h</span><span class="s0">,</span><span class="s1">B</span><span class="s0">,</span><span class="s1">B</span><span class="s0">+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCharHeight</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">restore</span><span class="s0">()}}}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">x</span><span class="s0">){</span><span class="s4">const </span><span class="s1">e</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">max</span><span class="s0">(</span><span class="s3">1</span><span class="s0">,</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">floor</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">fontSize</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">devicePixelRatio</span><span class="s0">/</span><span class="s3">15</span><span class="s0">)),</span><span class="s1">t</span><span class="s0">=</span><span class="s1">e</span><span class="s0">%</span><span class="s3">2</span><span class="s0">==</span><span class="s3">1</span><span class="s0">?</span><span class="s3">.5</span><span class="s0">:</span><span class="s3">0</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">lineWidth</span><span class="s0">=</span><span class="s1">e</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">strokeStyle</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">fillStyle</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">beginPath</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">moveTo</span><span class="s0">(</span><span class="s1">B</span><span class="s0">,</span><span class="s1">B</span><span class="s0">+</span><span class="s1">t</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">lineTo</span><span class="s0">(</span><span class="s1">B</span><span class="s0">+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCharWidth</span><span class="s0">*</span><span class="s1">P</span><span class="s0">,</span><span class="s1">B</span><span class="s0">+</span><span class="s1">t</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">stroke</span><span class="s0">()}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">F</span><span class="s0">||</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">fillText</span><span class="s0">(</span><span class="s1">h</span><span class="s0">,</span><span class="s1">B</span><span class="s0">,</span><span class="s1">B</span><span class="s0">+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCharHeight</span><span class="s0">),</span><span class="s2">&quot;_&quot;</span><span class="s0">===</span><span class="s1">h</span><span class="s0">&amp;&amp;!</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">allowTransparency</span><span class="s0">){</span><span class="s4">let </span><span class="s1">e</span><span class="s0">=</span><span class="s1">f</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">getImageData</span><span class="s0">(</span><span class="s1">B</span><span class="s0">,</span><span class="s1">B</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCellWidth</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCellHeight</span><span class="s0">),</span><span class="s1">y</span><span class="s0">,</span><span class="s1">D</span><span class="s0">,</span><span class="s1">I</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)</span><span class="s4">for</span><span class="s0">(</span><span class="s4">let </span><span class="s1">t</span><span class="s0">=</span><span class="s3">1</span><span class="s0">;</span><span class="s1">t</span><span class="s0">&lt;=</span><span class="s3">5</span><span class="s0">&amp;&amp;(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">save</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">fillStyle</span><span class="s0">=</span><span class="s1">y</span><span class="s0">.</span><span class="s1">css</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">fillRect</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCanvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCanvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">restore</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">fillText</span><span class="s0">(</span><span class="s1">h</span><span class="s0">,</span><span class="s1">B</span><span class="s0">,</span><span class="s1">B</span><span class="s0">+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCharHeight</span><span class="s0">-</span><span class="s1">t</span><span class="s0">),</span><span class="s1">e</span><span class="s0">=</span><span class="s1">f</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">getImageData</span><span class="s0">(</span><span class="s1">B</span><span class="s0">,</span><span class="s1">B</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCellWidth</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCellHeight</span><span class="s0">),</span><span class="s1">y</span><span class="s0">,</span><span class="s1">D</span><span class="s0">,</span><span class="s1">I</span><span class="s0">),</span><span class="s1">e</span><span class="s0">);</span><span class="s1">t</span><span class="s0">++);}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">L</span><span class="s0">){</span><span class="s4">const </span><span class="s1">e</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">max</span><span class="s0">(</span><span class="s3">1</span><span class="s0">,</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">floor</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">fontSize</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">devicePixelRatio</span><span class="s0">/</span><span class="s3">10</span><span class="s0">)),</span><span class="s1">t</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">lineWidth</span><span class="s0">%</span><span class="s3">2</span><span class="s0">==</span><span class="s3">1</span><span class="s0">?</span><span class="s3">.5</span><span class="s0">:</span><span class="s3">0</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">lineWidth</span><span class="s0">=</span><span class="s1">e</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">strokeStyle</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">fillStyle</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">beginPath</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">moveTo</span><span class="s0">(</span><span class="s1">B</span><span class="s0">,</span><span class="s1">B</span><span class="s0">+</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">floor</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCharHeight</span><span class="s0">/</span><span class="s3">2</span><span class="s0">)-</span><span class="s1">t</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">lineTo</span><span class="s0">(</span><span class="s1">B</span><span class="s0">+</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCharWidth</span><span class="s0">*</span><span class="s1">P</span><span class="s0">,</span><span class="s1">B</span><span class="s0">+</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">floor</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCharHeight</span><span class="s0">/</span><span class="s3">2</span><span class="s0">)-</span><span class="s1">t</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">stroke</span><span class="s0">()}</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">restore</span><span class="s0">();</span><span class="s4">const </span><span class="s1">O</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCtx</span><span class="s0">.</span><span class="s1">getImageData</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCanvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCanvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">);</span><span class="s4">let </span><span class="s1">k</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">k</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">allowTransparency</span><span class="s0">?</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">let </span><span class="s1">t</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">t</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">data</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">t</span><span class="s0">+=</span><span class="s3">4</span><span class="s0">)</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">data</span><span class="s0">[</span><span class="s1">t</span><span class="s0">+</span><span class="s3">3</span><span class="s0">]&gt;</span><span class="s3">0</span><span class="s0">)</span><span class="s4">return</span><span class="s0">!</span><span class="s3">1</span><span class="s0">;</span><span class="s4">return</span><span class="s0">!</span><span class="s3">0</span><span class="s0">}(</span><span class="s1">O</span><span class="s0">):</span><span class="s1">f</span><span class="s0">(</span><span class="s1">O</span><span class="s0">,</span><span class="s1">y</span><span class="s0">,</span><span class="s1">D</span><span class="s0">,</span><span class="s1">I</span><span class="s0">),</span><span class="s1">k</span><span class="s0">)</span><span class="s4">return </span><span class="s1">_</span><span class="s0">;</span><span class="s4">const </span><span class="s1">$</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_findGlyphBoundingBox</span><span class="s0">(</span><span class="s1">O</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_workBoundingBox</span><span class="s0">,</span><span class="s1">l</span><span class="s0">,</span><span class="s1">T</span><span class="s0">,</span><span class="s1">F</span><span class="s0">,</span><span class="s1">B</span><span class="s0">);</span><span class="s4">let </span><span class="s1">U</span><span class="s0">,</span><span class="s1">N</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(;;){</span><span class="s4">if</span><span class="s0">(</span><span class="s3">0</span><span class="s0">===</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_activePages</span><span class="s0">.</span><span class="s1">length</span><span class="s0">){</span><span class="s4">const </span><span class="s1">e</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_createNewPage</span><span class="s0">();</span><span class="s1">U</span><span class="s0">=</span><span class="s1">e</span><span class="s0">,</span><span class="s1">N</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">currentRow</span><span class="s0">,</span><span class="s1">N</span><span class="s0">.</span><span class="s1">height</span><span class="s0">=</span><span class="s1">$</span><span class="s0">.</span><span class="s1">size</span><span class="s0">.</span><span class="s1">y</span><span class="s0">;</span><span class="s4">break</span><span class="s0">}</span><span class="s1">U</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_activePages</span><span class="s0">[</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_activePages</span><span class="s0">.</span><span class="s1">length</span><span class="s0">-</span><span class="s3">1</span><span class="s0">],</span><span class="s1">N</span><span class="s0">=</span><span class="s1">U</span><span class="s0">.</span><span class="s1">currentRow</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">const </span><span class="s1">e of </span><span class="s4">this</span><span class="s0">.</span><span class="s1">_activePages</span><span class="s0">)</span><span class="s1">$</span><span class="s0">.</span><span class="s1">size</span><span class="s0">.</span><span class="s1">y</span><span class="s0">&lt;=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">currentRow</span><span class="s0">.</span><span class="s1">height</span><span class="s0">&amp;&amp;(</span><span class="s1">U</span><span class="s0">=</span><span class="s1">e</span><span class="s0">,</span><span class="s1">N</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">currentRow</span><span class="s0">);</span><span class="s4">for</span><span class="s0">(</span><span class="s4">let </span><span class="s1">e</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_activePages</span><span class="s0">.</span><span class="s1">length</span><span class="s0">-</span><span class="s3">1</span><span class="s0">;</span><span class="s1">e</span><span class="s0">&gt;=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">e</span><span class="s0">--)</span><span class="s4">for</span><span class="s0">(</span><span class="s4">const </span><span class="s1">t of </span><span class="s4">this</span><span class="s0">.</span><span class="s1">_activePages</span><span class="s0">[</span><span class="s1">e</span><span class="s0">].</span><span class="s1">fixedRows</span><span class="s0">)</span><span class="s1">t</span><span class="s0">.</span><span class="s1">height</span><span class="s0">&lt;=</span><span class="s1">N</span><span class="s0">.</span><span class="s1">height</span><span class="s0">&amp;&amp;</span><span class="s1">$</span><span class="s0">.</span><span class="s1">size</span><span class="s0">.</span><span class="s1">y</span><span class="s0">&lt;=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">height</span><span class="s0">&amp;&amp;(</span><span class="s1">U</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_activePages</span><span class="s0">[</span><span class="s1">e</span><span class="s0">],</span><span class="s1">N</span><span class="s0">=</span><span class="s1">t</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">N</span><span class="s0">.</span><span class="s1">y</span><span class="s0">+</span><span class="s1">$</span><span class="s0">.</span><span class="s1">size</span><span class="s0">.</span><span class="s1">y</span><span class="s0">&gt;=</span><span class="s1">U</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">||</span><span class="s1">N</span><span class="s0">.</span><span class="s1">height</span><span class="s0">&gt;</span><span class="s1">$</span><span class="s0">.</span><span class="s1">size</span><span class="s0">.</span><span class="s1">y</span><span class="s0">+</span><span class="s3">2</span><span class="s0">){</span><span class="s4">let </span><span class="s1">e</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">U</span><span class="s0">.</span><span class="s1">currentRow</span><span class="s0">.</span><span class="s1">y</span><span class="s0">+</span><span class="s1">U</span><span class="s0">.</span><span class="s1">currentRow</span><span class="s0">.</span><span class="s1">height</span><span class="s0">+</span><span class="s1">$</span><span class="s0">.</span><span class="s1">size</span><span class="s0">.</span><span class="s1">y</span><span class="s0">&gt;=</span><span class="s1">U</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">){</span><span class="s4">let </span><span class="s1">t</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">const </span><span class="s1">e of </span><span class="s4">this</span><span class="s0">.</span><span class="s1">_activePages</span><span class="s0">)</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">currentRow</span><span class="s0">.</span><span class="s1">y</span><span class="s0">+</span><span class="s1">e</span><span class="s0">.</span><span class="s1">currentRow</span><span class="s0">.</span><span class="s1">height</span><span class="s0">+</span><span class="s1">$</span><span class="s0">.</span><span class="s1">size</span><span class="s0">.</span><span class="s1">y</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">){</span><span class="s1">t</span><span class="s0">=</span><span class="s1">e</span><span class="s0">;</span><span class="s4">break</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)</span><span class="s1">U</span><span class="s0">=</span><span class="s1">t</span><span class="s0">;</span><span class="s4">else if</span><span class="s0">(</span><span class="s1">g</span><span class="s0">.</span><span class="s1">maxAtlasPages</span><span class="s0">&amp;&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_pages</span><span class="s0">.</span><span class="s1">length</span><span class="s0">&gt;=</span><span class="s1">g</span><span class="s0">.</span><span class="s1">maxAtlasPages</span><span class="s0">&amp;&amp;</span><span class="s1">N</span><span class="s0">.</span><span class="s1">y</span><span class="s0">+</span><span class="s1">$</span><span class="s0">.</span><span class="s1">size</span><span class="s0">.</span><span class="s1">y</span><span class="s0">&lt;=</span><span class="s1">U</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">&amp;&amp;</span><span class="s1">N</span><span class="s0">.</span><span class="s1">height</span><span class="s0">&gt;=</span><span class="s1">$</span><span class="s0">.</span><span class="s1">size</span><span class="s0">.</span><span class="s1">y</span><span class="s0">&amp;&amp;</span><span class="s1">N</span><span class="s0">.</span><span class="s1">x</span><span class="s0">+</span><span class="s1">$</span><span class="s0">.</span><span class="s1">size</span><span class="s0">.</span><span class="s1">x</span><span class="s0">&lt;=</span><span class="s1">U</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">)</span><span class="s1">e</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">;</span><span class="s4">else</span><span class="s0">{</span><span class="s4">const </span><span class="s1">t</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_createNewPage</span><span class="s0">();</span><span class="s1">U</span><span class="s0">=</span><span class="s1">t</span><span class="s0">,</span><span class="s1">N</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">currentRow</span><span class="s0">,</span><span class="s1">N</span><span class="s0">.</span><span class="s1">height</span><span class="s0">=</span><span class="s1">$</span><span class="s0">.</span><span class="s1">size</span><span class="s0">.</span><span class="s1">y</span><span class="s0">,</span><span class="s1">e</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">}}</span><span class="s1">e</span><span class="s0">||(</span><span class="s1">U</span><span class="s0">.</span><span class="s1">currentRow</span><span class="s0">.</span><span class="s1">height</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">&amp;&amp;</span><span class="s1">U</span><span class="s0">.</span><span class="s1">fixedRows</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">U</span><span class="s0">.</span><span class="s1">currentRow</span><span class="s0">),</span><span class="s1">N</span><span class="s0">={</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s1">U</span><span class="s0">.</span><span class="s1">currentRow</span><span class="s0">.</span><span class="s1">y</span><span class="s0">+</span><span class="s1">U</span><span class="s0">.</span><span class="s1">currentRow</span><span class="s0">.</span><span class="s1">height</span><span class="s0">,</span><span class="s1">height</span><span class="s0">:</span><span class="s1">$</span><span class="s0">.</span><span class="s1">size</span><span class="s0">.</span><span class="s1">y</span><span class="s0">},</span><span class="s1">U</span><span class="s0">.</span><span class="s1">fixedRows</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">N</span><span class="s0">),</span><span class="s1">U</span><span class="s0">.</span><span class="s1">currentRow</span><span class="s0">={</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s1">N</span><span class="s0">.</span><span class="s1">y</span><span class="s0">+</span><span class="s1">N</span><span class="s0">.</span><span class="s1">height</span><span class="s0">,</span><span class="s1">height</span><span class="s0">:</span><span class="s3">0</span><span class="s0">})}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">N</span><span class="s0">.</span><span class="s1">x</span><span class="s0">+</span><span class="s1">$</span><span class="s0">.</span><span class="s1">size</span><span class="s0">.</span><span class="s1">x</span><span class="s0">&lt;=</span><span class="s1">U</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">)</span><span class="s4">break</span><span class="s0">;</span><span class="s1">N</span><span class="s0">===</span><span class="s1">U</span><span class="s0">.</span><span class="s1">currentRow</span><span class="s0">?(</span><span class="s1">N</span><span class="s0">.</span><span class="s1">x</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">N</span><span class="s0">.</span><span class="s1">y</span><span class="s0">+=</span><span class="s1">N</span><span class="s0">.</span><span class="s1">height</span><span class="s0">,</span><span class="s1">N</span><span class="s0">.</span><span class="s1">height</span><span class="s0">=</span><span class="s3">0</span><span class="s0">):</span><span class="s1">U</span><span class="s0">.</span><span class="s1">fixedRows</span><span class="s0">.</span><span class="s1">splice</span><span class="s0">(</span><span class="s1">U</span><span class="s0">.</span><span class="s1">fixedRows</span><span class="s0">.</span><span class="s1">indexOf</span><span class="s0">(</span><span class="s1">N</span><span class="s0">),</span><span class="s3">1</span><span class="s0">)}</span><span class="s4">return </span><span class="s1">$</span><span class="s0">.</span><span class="s1">texturePage</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_pages</span><span class="s0">.</span><span class="s1">indexOf</span><span class="s0">(</span><span class="s1">U</span><span class="s0">),</span><span class="s1">$</span><span class="s0">.</span><span class="s1">texturePosition</span><span class="s0">.</span><span class="s1">x</span><span class="s0">=</span><span class="s1">N</span><span class="s0">.</span><span class="s1">x</span><span class="s0">,</span><span class="s1">$</span><span class="s0">.</span><span class="s1">texturePosition</span><span class="s0">.</span><span class="s1">y</span><span class="s0">=</span><span class="s1">N</span><span class="s0">.</span><span class="s1">y</span><span class="s0">,</span><span class="s1">$</span><span class="s0">.</span><span class="s1">texturePositionClipSpace</span><span class="s0">.</span><span class="s1">x</span><span class="s0">=</span><span class="s1">N</span><span class="s0">.</span><span class="s1">x</span><span class="s0">/</span><span class="s1">U</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">,</span><span class="s1">$</span><span class="s0">.</span><span class="s1">texturePositionClipSpace</span><span class="s0">.</span><span class="s1">y</span><span class="s0">=</span><span class="s1">N</span><span class="s0">.</span><span class="s1">y</span><span class="s0">/</span><span class="s1">U</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">,</span><span class="s1">$</span><span class="s0">.</span><span class="s1">sizeClipSpace</span><span class="s0">.</span><span class="s1">x</span><span class="s0">/=</span><span class="s1">U</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">,</span><span class="s1">$</span><span class="s0">.</span><span class="s1">sizeClipSpace</span><span class="s0">.</span><span class="s1">y</span><span class="s0">/=</span><span class="s1">U</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">,</span><span class="s1">N</span><span class="s0">.</span><span class="s1">height</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">max</span><span class="s0">(</span><span class="s1">N</span><span class="s0">.</span><span class="s1">height</span><span class="s0">,</span><span class="s1">$</span><span class="s0">.</span><span class="s1">size</span><span class="s0">.</span><span class="s1">y</span><span class="s0">),</span><span class="s1">N</span><span class="s0">.</span><span class="s1">x</span><span class="s0">+=</span><span class="s1">$</span><span class="s0">.</span><span class="s1">size</span><span class="s0">.</span><span class="s1">x</span><span class="s0">,</span><span class="s1">U</span><span class="s0">.</span><span class="s1">ctx</span><span class="s0">.</span><span class="s1">putImageData</span><span class="s0">(</span><span class="s1">O</span><span class="s0">,</span><span class="s1">$</span><span class="s0">.</span><span class="s1">texturePosition</span><span class="s0">.</span><span class="s1">x</span><span class="s0">-</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_workBoundingBox</span><span class="s0">.</span><span class="s1">left</span><span class="s0">,</span><span class="s1">$</span><span class="s0">.</span><span class="s1">texturePosition</span><span class="s0">.</span><span class="s1">y</span><span class="s0">-</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_workBoundingBox</span><span class="s0">.</span><span class="s1">top</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_workBoundingBox</span><span class="s0">.</span><span class="s1">left</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_workBoundingBox</span><span class="s0">.</span><span class="s1">top</span><span class="s0">,</span><span class="s1">$</span><span class="s0">.</span><span class="s1">size</span><span class="s0">.</span><span class="s1">x</span><span class="s0">,</span><span class="s1">$</span><span class="s0">.</span><span class="s1">size</span><span class="s0">.</span><span class="s1">y</span><span class="s0">),</span><span class="s1">U</span><span class="s0">.</span><span class="s1">addGlyph</span><span class="s0">(</span><span class="s1">$</span><span class="s0">),</span><span class="s1">U</span><span class="s0">.</span><span class="s1">version</span><span class="s0">++,</span><span class="s1">$</span><span class="s0">}</span><span class="s1">_findGlyphBoundingBox</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">){</span><span class="s1">t</span><span class="s0">.</span><span class="s1">top</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">const </span><span class="s1">n</span><span class="s0">=</span><span class="s1">s</span><span class="s0">?</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCellHeight</span><span class="s0">:</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCanvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">,</span><span class="s1">a</span><span class="s0">=</span><span class="s1">s</span><span class="s0">?</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCellWidth</span><span class="s0">:</span><span class="s1">i</span><span class="s0">;</span><span class="s4">let </span><span class="s1">h</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">let </span><span class="s1">l</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">l</span><span class="s0">&lt;</span><span class="s1">n</span><span class="s0">;</span><span class="s1">l</span><span class="s0">++){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">let </span><span class="s1">i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">i</span><span class="s0">&lt;</span><span class="s1">a</span><span class="s0">;</span><span class="s1">i</span><span class="s0">++){</span><span class="s4">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">l</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCanvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">*</span><span class="s3">4</span><span class="s0">+</span><span class="s3">4</span><span class="s0">*</span><span class="s1">i</span><span class="s0">+</span><span class="s3">3</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s3">0</span><span class="s0">!==</span><span class="s1">e</span><span class="s0">.</span><span class="s1">data</span><span class="s0">[</span><span class="s1">s</span><span class="s0">]){</span><span class="s1">t</span><span class="s0">.</span><span class="s1">top</span><span class="s0">=</span><span class="s1">l</span><span class="s0">,</span><span class="s1">h</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">;</span><span class="s4">break</span><span class="s0">}}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">h</span><span class="s0">)</span><span class="s4">break</span><span class="s0">}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">left</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">h</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">let </span><span class="s1">l</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">l</span><span class="s0">&lt;</span><span class="s1">o</span><span class="s0">+</span><span class="s1">a</span><span class="s0">;</span><span class="s1">l</span><span class="s0">++){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">let </span><span class="s1">i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">i</span><span class="s0">&lt;</span><span class="s1">n</span><span class="s0">;</span><span class="s1">i</span><span class="s0">++){</span><span class="s4">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">i</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCanvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">*</span><span class="s3">4</span><span class="s0">+</span><span class="s3">4</span><span class="s0">*</span><span class="s1">l</span><span class="s0">+</span><span class="s3">3</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s3">0</span><span class="s0">!==</span><span class="s1">e</span><span class="s0">.</span><span class="s1">data</span><span class="s0">[</span><span class="s1">s</span><span class="s0">]){</span><span class="s1">t</span><span class="s0">.</span><span class="s1">left</span><span class="s0">=</span><span class="s1">l</span><span class="s0">,</span><span class="s1">h</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">;</span><span class="s4">break</span><span class="s0">}}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">h</span><span class="s0">)</span><span class="s4">break</span><span class="s0">}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">right</span><span class="s0">=</span><span class="s1">a</span><span class="s0">,</span><span class="s1">h</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">let </span><span class="s1">l</span><span class="s0">=</span><span class="s1">o</span><span class="s0">+</span><span class="s1">a</span><span class="s0">-</span><span class="s3">1</span><span class="s0">;</span><span class="s1">l</span><span class="s0">&gt;=</span><span class="s1">o</span><span class="s0">;</span><span class="s1">l</span><span class="s0">--){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">let </span><span class="s1">i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">i</span><span class="s0">&lt;</span><span class="s1">n</span><span class="s0">;</span><span class="s1">i</span><span class="s0">++){</span><span class="s4">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">i</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCanvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">*</span><span class="s3">4</span><span class="s0">+</span><span class="s3">4</span><span class="s0">*</span><span class="s1">l</span><span class="s0">+</span><span class="s3">3</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s3">0</span><span class="s0">!==</span><span class="s1">e</span><span class="s0">.</span><span class="s1">data</span><span class="s0">[</span><span class="s1">s</span><span class="s0">]){</span><span class="s1">t</span><span class="s0">.</span><span class="s1">right</span><span class="s0">=</span><span class="s1">l</span><span class="s0">,</span><span class="s1">h</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">;</span><span class="s4">break</span><span class="s0">}}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">h</span><span class="s0">)</span><span class="s4">break</span><span class="s0">}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">bottom</span><span class="s0">=</span><span class="s1">n</span><span class="s0">,</span><span class="s1">h</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">let </span><span class="s1">l</span><span class="s0">=</span><span class="s1">n</span><span class="s0">-</span><span class="s3">1</span><span class="s0">;</span><span class="s1">l</span><span class="s0">&gt;=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">l</span><span class="s0">--){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">let </span><span class="s1">i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">i</span><span class="s0">&lt;</span><span class="s1">a</span><span class="s0">;</span><span class="s1">i</span><span class="s0">++){</span><span class="s4">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">l</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tmpCanvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">*</span><span class="s3">4</span><span class="s0">+</span><span class="s3">4</span><span class="s0">*</span><span class="s1">i</span><span class="s0">+</span><span class="s3">3</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s3">0</span><span class="s0">!==</span><span class="s1">e</span><span class="s0">.</span><span class="s1">data</span><span class="s0">[</span><span class="s1">s</span><span class="s0">]){</span><span class="s1">t</span><span class="s0">.</span><span class="s1">bottom</span><span class="s0">=</span><span class="s1">l</span><span class="s0">,</span><span class="s1">h</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">;</span><span class="s4">break</span><span class="s0">}}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">h</span><span class="s0">)</span><span class="s4">break</span><span class="s0">}</span><span class="s4">return</span><span class="s0">{</span><span class="s1">texturePage</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">texturePosition</span><span class="s0">:{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">},</span><span class="s1">texturePositionClipSpace</span><span class="s0">:{</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">},</span><span class="s1">size</span><span class="s0">:{</span><span class="s1">x</span><span class="s0">:</span><span class="s1">t</span><span class="s0">.</span><span class="s1">right</span><span class="s0">-</span><span class="s1">t</span><span class="s0">.</span><span class="s1">left</span><span class="s0">+</span><span class="s3">1</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s1">t</span><span class="s0">.</span><span class="s1">bottom</span><span class="s0">-</span><span class="s1">t</span><span class="s0">.</span><span class="s1">top</span><span class="s0">+</span><span class="s3">1</span><span class="s0">},</span><span class="s1">sizeClipSpace</span><span class="s0">:{</span><span class="s1">x</span><span class="s0">:</span><span class="s1">t</span><span class="s0">.</span><span class="s1">right</span><span class="s0">-</span><span class="s1">t</span><span class="s0">.</span><span class="s1">left</span><span class="s0">+</span><span class="s3">1</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s1">t</span><span class="s0">.</span><span class="s1">bottom</span><span class="s0">-</span><span class="s1">t</span><span class="s0">.</span><span class="s1">top</span><span class="s0">+</span><span class="s3">1</span><span class="s0">},</span><span class="s1">offset</span><span class="s0">:{</span><span class="s1">x</span><span class="s0">:-</span><span class="s1">t</span><span class="s0">.</span><span class="s1">left</span><span class="s0">+</span><span class="s1">o</span><span class="s0">+(</span><span class="s1">s</span><span class="s0">||</span><span class="s1">r</span><span class="s0">?</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">floor</span><span class="s0">((</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCellWidth</span><span class="s0">-</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCharWidth</span><span class="s0">)/</span><span class="s3">2</span><span class="s0">):</span><span class="s3">0</span><span class="s0">),</span><span class="s1">y</span><span class="s0">:-</span><span class="s1">t</span><span class="s0">.</span><span class="s1">top</span><span class="s0">+</span><span class="s1">o</span><span class="s0">+(</span><span class="s1">s</span><span class="s0">||</span><span class="s1">r</span><span class="s0">?</span><span class="s3">1</span><span class="s0">===</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">lineHeight</span><span class="s0">?</span><span class="s3">0</span><span class="s0">:</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">round</span><span class="s0">((</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCellHeight</span><span class="s0">-</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_config</span><span class="s0">.</span><span class="s1">deviceCharHeight</span><span class="s0">)/</span><span class="s3">2</span><span class="s0">):</span><span class="s3">0</span><span class="s0">)}}}}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">TextureAtlas</span><span class="s0">=</span><span class="s1">g</span><span class="s0">;</span><span class="s4">class </span><span class="s1">v</span><span class="s0">{</span><span class="s1">get percentageUsed</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">_usedPixels</span><span class="s0">/(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">*</span><span class="s4">this</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">)}</span><span class="s1">get glyphs</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">_glyphs</span><span class="s0">}</span><span class="s1">addGlyph</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_glyphs</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">e</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_usedPixels</span><span class="s0">+=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">size</span><span class="s0">.</span><span class="s1">x</span><span class="s0">*</span><span class="s1">e</span><span class="s0">.</span><span class="s1">size</span><span class="s0">.</span><span class="s1">y</span><span class="s0">}</span><span class="s1">constructor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_usedPixels</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_glyphs</span><span class="s0">=[],</span><span class="s4">this</span><span class="s0">.</span><span class="s1">version</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">currentRow</span><span class="s0">={</span><span class="s1">x</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">y</span><span class="s0">:</span><span class="s3">0</span><span class="s0">,</span><span class="s1">height</span><span class="s0">:</span><span class="s3">0</span><span class="s0">},</span><span class="s4">this</span><span class="s0">.</span><span class="s1">fixedRows</span><span class="s0">=[],</span><span class="s1">i</span><span class="s0">)</span><span class="s4">for</span><span class="s0">(</span><span class="s4">const </span><span class="s1">s of i</span><span class="s0">)</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_glyphs</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">...s</span><span class="s0">.</span><span class="s1">glyphs</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_usedPixels</span><span class="s0">+=</span><span class="s1">s</span><span class="s0">.</span><span class="s1">_usedPixels</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">=</span><span class="s1">p</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">t</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">ctx</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">o</span><span class="s0">.</span><span class="s1">throwIfFalsy</span><span class="s0">)(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">getContext</span><span class="s0">(</span><span class="s2">&quot;2d&quot;</span><span class="s0">,{</span><span class="s1">alpha</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}))}</span><span class="s1">clear</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">ctx</span><span class="s0">.</span><span class="s1">clearRect</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">width</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">canvas</span><span class="s0">.</span><span class="s1">height</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">currentRow</span><span class="s0">.</span><span class="s1">x</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">currentRow</span><span class="s0">.</span><span class="s1">y</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">currentRow</span><span class="s0">.</span><span class="s1">height</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">fixedRows</span><span class="s0">.</span><span class="s1">length</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">version</span><span class="s0">++}}</span><span class="s4">function </span><span class="s1">f</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">){</span><span class="s4">const </span><span class="s1">r</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">&gt;&gt;&gt;</span><span class="s3">24</span><span class="s0">,</span><span class="s1">o</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">&gt;&gt;&gt;</span><span class="s3">16</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">n</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">&gt;&gt;&gt;</span><span class="s3">8</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">a</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">&gt;&gt;&gt;</span><span class="s3">24</span><span class="s0">,</span><span class="s1">h</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">&gt;&gt;&gt;</span><span class="s3">16</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">l</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">&gt;&gt;&gt;</span><span class="s3">8</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">c</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">floor</span><span class="s0">((</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">abs</span><span class="s0">(</span><span class="s1">r</span><span class="s0">-</span><span class="s1">a</span><span class="s0">)+</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">abs</span><span class="s0">(</span><span class="s1">o</span><span class="s0">-</span><span class="s1">h</span><span class="s0">)+</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">abs</span><span class="s0">(</span><span class="s1">n</span><span class="s0">-</span><span class="s1">l</span><span class="s0">))/</span><span class="s3">12</span><span class="s0">);</span><span class="s4">let </span><span class="s1">d</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">let </span><span class="s1">_</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">_</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">data</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">_</span><span class="s0">+=</span><span class="s3">4</span><span class="s0">)</span><span class="s1">e</span><span class="s0">.</span><span class="s1">data</span><span class="s0">[</span><span class="s1">_</span><span class="s0">]===</span><span class="s1">r</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">data</span><span class="s0">[</span><span class="s1">_</span><span class="s0">+</span><span class="s3">1</span><span class="s0">]===</span><span class="s1">o</span><span class="s0">&amp;&amp;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">data</span><span class="s0">[</span><span class="s1">_</span><span class="s0">+</span><span class="s3">2</span><span class="s0">]===</span><span class="s1">n</span><span class="s0">||</span><span class="s1">s</span><span class="s0">&amp;&amp;</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">abs</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">data</span><span class="s0">[</span><span class="s1">_</span><span class="s0">]-</span><span class="s1">r</span><span class="s0">)+</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">abs</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">data</span><span class="s0">[</span><span class="s1">_</span><span class="s0">+</span><span class="s3">1</span><span class="s0">]-</span><span class="s1">o</span><span class="s0">)+</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">abs</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">data</span><span class="s0">[</span><span class="s1">_</span><span class="s0">+</span><span class="s3">2</span><span class="s0">]-</span><span class="s1">n</span><span class="s0">)&lt;</span><span class="s1">c</span><span class="s0">?</span><span class="s1">e</span><span class="s0">.</span><span class="s1">data</span><span class="s0">[</span><span class="s1">_</span><span class="s0">+</span><span class="s3">3</span><span class="s0">]=</span><span class="s3">0</span><span class="s0">:</span><span class="s1">d</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">;</span><span class="s4">return </span><span class="s1">d</span><span class="s0">}</span><span class="s4">function </span><span class="s1">p</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s4">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">createElement</span><span class="s0">(</span><span class="s2">&quot;canvas&quot;</span><span class="s0">);</span><span class="s4">return </span><span class="s1">s</span><span class="s0">.</span><span class="s1">width</span><span class="s0">=</span><span class="s1">t</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">height</span><span class="s0">=</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">}},</span><span class="s3">160</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">contrastRatio</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">toPaddedHex</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rgb</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">css</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">color</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">channels</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">NULL_COLOR</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">let </span><span class="s1">i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">r</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">o</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">var </span><span class="s1">n</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">h</span><span class="s0">,</span><span class="s1">l</span><span class="s0">,</span><span class="s1">c</span><span class="s0">;</span><span class="s4">function </span><span class="s1">d</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">const </span><span class="s1">t</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">toString</span><span class="s0">(</span><span class="s3">16</span><span class="s0">);</span><span class="s4">return </span><span class="s1">t</span><span class="s0">.</span><span class="s1">length</span><span class="s0">&lt;</span><span class="s3">2</span><span class="s0">?</span><span class="s2">&quot;0&quot;</span><span class="s0">+</span><span class="s1">t</span><span class="s0">:</span><span class="s1">t</span><span class="s0">}</span><span class="s4">function </span><span class="s1">_</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">){</span><span class="s4">return </span><span class="s1">e</span><span class="s0">&lt;</span><span class="s1">t</span><span class="s0">?(</span><span class="s1">t</span><span class="s0">+</span><span class="s3">.05</span><span class="s0">)/(</span><span class="s1">e</span><span class="s0">+</span><span class="s3">.05</span><span class="s0">):(</span><span class="s1">e</span><span class="s0">+</span><span class="s3">.05</span><span class="s0">)/(</span><span class="s1">t</span><span class="s0">+</span><span class="s3">.05</span><span class="s0">)}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">NULL_COLOR</span><span class="s0">={</span><span class="s1">css</span><span class="s0">:</span><span class="s2">&quot;#00000000&quot;</span><span class="s0">,</span><span class="s1">rgba</span><span class="s0">:</span><span class="s3">0</span><span class="s0">},</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s1">e</span><span class="s0">.</span><span class="s1">toCss</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">){</span><span class="s4">return void </span><span class="s3">0</span><span class="s0">!==</span><span class="s1">s</span><span class="s0">?</span><span class="s2">`#</span><span class="s1">$</span><span class="s0">{</span><span class="s1">d</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)}</span><span class="s1">$</span><span class="s0">{</span><span class="s1">d</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)}</span><span class="s1">$</span><span class="s0">{</span><span class="s1">d</span><span class="s0">(</span><span class="s1">i</span><span class="s0">)}</span><span class="s1">$</span><span class="s0">{</span><span class="s1">d</span><span class="s0">(</span><span class="s1">s</span><span class="s0">)}</span><span class="s2">`</span><span class="s0">:</span><span class="s2">`#</span><span class="s1">$</span><span class="s0">{</span><span class="s1">d</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)}</span><span class="s1">$</span><span class="s0">{</span><span class="s1">d</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)}</span><span class="s1">$</span><span class="s0">{</span><span class="s1">d</span><span class="s0">(</span><span class="s1">i</span><span class="s0">)}</span><span class="s2">`</span><span class="s0">},</span><span class="s1">e</span><span class="s0">.</span><span class="s1">toRgba</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">=</span><span class="s3">255</span><span class="s0">){</span><span class="s4">return</span><span class="s0">(</span><span class="s1">e</span><span class="s0">&lt;&lt;</span><span class="s3">24</span><span class="s0">|</span><span class="s1">t</span><span class="s0">&lt;&lt;</span><span class="s3">16</span><span class="s0">|</span><span class="s1">i</span><span class="s0">&lt;&lt;</span><span class="s3">8</span><span class="s0">|</span><span class="s1">s</span><span class="s0">)&gt;&gt;&gt;</span><span class="s3">0</span><span class="s0">},</span><span class="s1">e</span><span class="s0">.</span><span class="s1">toColor</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s4">return</span><span class="s0">{</span><span class="s1">css</span><span class="s0">:</span><span class="s1">e</span><span class="s0">.</span><span class="s1">toCss</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">),</span><span class="s1">rgba</span><span class="s0">:</span><span class="s1">e</span><span class="s0">.</span><span class="s1">toRgba</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">)}}}(</span><span class="s1">n</span><span class="s0">||(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">channels</span><span class="s0">=</span><span class="s1">n</span><span class="s0">={})),</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">){</span><span class="s4">return </span><span class="s1">o</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">round</span><span class="s0">(</span><span class="s3">255</span><span class="s0">*</span><span class="s1">t</span><span class="s0">),[</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">]=</span><span class="s1">c</span><span class="s0">.</span><span class="s1">toChannels</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">),{</span><span class="s1">css</span><span class="s0">:</span><span class="s1">n</span><span class="s0">.</span><span class="s1">toCss</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">),</span><span class="s1">rgba</span><span class="s0">:</span><span class="s1">n</span><span class="s0">.</span><span class="s1">toRgba</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">)}}</span><span class="s1">e</span><span class="s0">.</span><span class="s1">blend</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">o</span><span class="s0">=(</span><span class="s3">255</span><span class="s0">&amp;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">)/</span><span class="s3">255</span><span class="s0">,</span><span class="s3">1</span><span class="s0">===</span><span class="s1">o</span><span class="s0">)</span><span class="s4">return</span><span class="s0">{</span><span class="s1">css</span><span class="s0">:</span><span class="s1">t</span><span class="s0">.</span><span class="s1">css</span><span class="s0">,</span><span class="s1">rgba</span><span class="s0">:</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">};</span><span class="s4">const </span><span class="s1">a</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">&gt;&gt;</span><span class="s3">24</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">h</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">&gt;&gt;</span><span class="s3">16</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">l</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">c</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">&gt;&gt;</span><span class="s3">24</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">d</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">&gt;&gt;</span><span class="s3">16</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">_</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">;</span><span class="s4">return </span><span class="s1">i</span><span class="s0">=</span><span class="s1">c</span><span class="s0">+</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">round</span><span class="s0">((</span><span class="s1">a</span><span class="s0">-</span><span class="s1">c</span><span class="s0">)*</span><span class="s1">o</span><span class="s0">),</span><span class="s1">s</span><span class="s0">=</span><span class="s1">d</span><span class="s0">+</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">round</span><span class="s0">((</span><span class="s1">h</span><span class="s0">-</span><span class="s1">d</span><span class="s0">)*</span><span class="s1">o</span><span class="s0">),</span><span class="s1">r</span><span class="s0">=</span><span class="s1">_</span><span class="s0">+</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">round</span><span class="s0">((</span><span class="s1">l</span><span class="s0">-</span><span class="s1">_</span><span class="s0">)*</span><span class="s1">o</span><span class="s0">),{</span><span class="s1">css</span><span class="s0">:</span><span class="s1">n</span><span class="s0">.</span><span class="s1">toCss</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">),</span><span class="s1">rgba</span><span class="s0">:</span><span class="s1">n</span><span class="s0">.</span><span class="s1">toRgba</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">)}},</span><span class="s1">e</span><span class="s0">.</span><span class="s1">isOpaque</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">return </span><span class="s3">255</span><span class="s0">==(</span><span class="s3">255</span><span class="s0">&amp;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">)},</span><span class="s1">e</span><span class="s0">.</span><span class="s1">ensureContrastRatio</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s4">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">c</span><span class="s0">.</span><span class="s1">ensureContrastRatio</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">,</span><span class="s1">i</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">s</span><span class="s0">)</span><span class="s4">return </span><span class="s1">n</span><span class="s0">.</span><span class="s1">toColor</span><span class="s0">(</span><span class="s1">s</span><span class="s0">&gt;&gt;</span><span class="s3">24</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">s</span><span class="s0">&gt;&gt;</span><span class="s3">16</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">s</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">)},</span><span class="s1">e</span><span class="s0">.</span><span class="s1">opaque</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">const </span><span class="s1">t</span><span class="s0">=(</span><span class="s3">255</span><span class="s0">|</span><span class="s1">e</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">)&gt;&gt;&gt;</span><span class="s3">0</span><span class="s0">;</span><span class="s4">return</span><span class="s0">[</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">]=</span><span class="s1">c</span><span class="s0">.</span><span class="s1">toChannels</span><span class="s0">(</span><span class="s1">t</span><span class="s0">),{</span><span class="s1">css</span><span class="s0">:</span><span class="s1">n</span><span class="s0">.</span><span class="s1">toCss</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">),</span><span class="s1">rgba</span><span class="s0">:</span><span class="s1">t</span><span class="s0">}},</span><span class="s1">e</span><span class="s0">.</span><span class="s1">opacity</span><span class="s0">=</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">multiplyOpacity</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s4">return </span><span class="s1">o</span><span class="s0">=</span><span class="s3">255</span><span class="s0">&amp;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">,</span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">o</span><span class="s0">*</span><span class="s1">i</span><span class="s0">/</span><span class="s3">255</span><span class="s0">)},</span><span class="s1">e</span><span class="s0">.</span><span class="s1">toColorRGB</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">return</span><span class="s0">[</span><span class="s1">e</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">&gt;&gt;</span><span class="s3">24</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">&gt;&gt;</span><span class="s3">16</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">]}}(</span><span class="s1">a</span><span class="s0">||(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">color</span><span class="s0">=</span><span class="s1">a</span><span class="s0">={})),</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">let </span><span class="s1">t</span><span class="s0">,</span><span class="s1">a</span><span class="s0">;</span><span class="s4">try</span><span class="s0">{</span><span class="s4">const </span><span class="s1">e</span><span class="s0">=</span><span class="s1">document</span><span class="s0">.</span><span class="s1">createElement</span><span class="s0">(</span><span class="s2">&quot;canvas&quot;</span><span class="s0">);</span><span class="s1">e</span><span class="s0">.</span><span class="s1">width</span><span class="s0">=</span><span class="s3">1</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">height</span><span class="s0">=</span><span class="s3">1</span><span class="s0">;</span><span class="s4">const </span><span class="s1">i</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">getContext</span><span class="s0">(</span><span class="s2">&quot;2d&quot;</span><span class="s0">,{</span><span class="s1">willReadFrequently</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">});</span><span class="s1">i</span><span class="s0">&amp;&amp;(</span><span class="s1">t</span><span class="s0">=</span><span class="s1">i</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">globalCompositeOperation</span><span class="s0">=</span><span class="s2">&quot;copy&quot;</span><span class="s0">,</span><span class="s1">a</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">createLinearGradient</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s3">1</span><span class="s0">,</span><span class="s3">1</span><span class="s0">))}</span><span class="s4">catch</span><span class="s0">{}</span><span class="s1">e</span><span class="s0">.</span><span class="s1">toColor</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">match</span><span class="s0">(</span><span class="s5">/#[\da-f]{3,8}/i</span><span class="s0">))</span><span class="s4">switch</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">){</span><span class="s4">case </span><span class="s3">4</span><span class="s0">:</span><span class="s4">return </span><span class="s1">i</span><span class="s0">=</span><span class="s1">parseInt</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">slice</span><span class="s0">(</span><span class="s3">1</span><span class="s0">,</span><span class="s3">2</span><span class="s0">).</span><span class="s1">repeat</span><span class="s0">(</span><span class="s3">2</span><span class="s0">),</span><span class="s3">16</span><span class="s0">),</span><span class="s1">s</span><span class="s0">=</span><span class="s1">parseInt</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">slice</span><span class="s0">(</span><span class="s3">2</span><span class="s0">,</span><span class="s3">3</span><span class="s0">).</span><span class="s1">repeat</span><span class="s0">(</span><span class="s3">2</span><span class="s0">),</span><span class="s3">16</span><span class="s0">),</span><span class="s1">r</span><span class="s0">=</span><span class="s1">parseInt</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">slice</span><span class="s0">(</span><span class="s3">3</span><span class="s0">,</span><span class="s3">4</span><span class="s0">).</span><span class="s1">repeat</span><span class="s0">(</span><span class="s3">2</span><span class="s0">),</span><span class="s3">16</span><span class="s0">),</span><span class="s1">n</span><span class="s0">.</span><span class="s1">toColor</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">);</span><span class="s4">case </span><span class="s3">5</span><span class="s0">:</span><span class="s4">return </span><span class="s1">i</span><span class="s0">=</span><span class="s1">parseInt</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">slice</span><span class="s0">(</span><span class="s3">1</span><span class="s0">,</span><span class="s3">2</span><span class="s0">).</span><span class="s1">repeat</span><span class="s0">(</span><span class="s3">2</span><span class="s0">),</span><span class="s3">16</span><span class="s0">),</span><span class="s1">s</span><span class="s0">=</span><span class="s1">parseInt</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">slice</span><span class="s0">(</span><span class="s3">2</span><span class="s0">,</span><span class="s3">3</span><span class="s0">).</span><span class="s1">repeat</span><span class="s0">(</span><span class="s3">2</span><span class="s0">),</span><span class="s3">16</span><span class="s0">),</span><span class="s1">r</span><span class="s0">=</span><span class="s1">parseInt</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">slice</span><span class="s0">(</span><span class="s3">3</span><span class="s0">,</span><span class="s3">4</span><span class="s0">).</span><span class="s1">repeat</span><span class="s0">(</span><span class="s3">2</span><span class="s0">),</span><span class="s3">16</span><span class="s0">),</span><span class="s1">o</span><span class="s0">=</span><span class="s1">parseInt</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">slice</span><span class="s0">(</span><span class="s3">4</span><span class="s0">,</span><span class="s3">5</span><span class="s0">).</span><span class="s1">repeat</span><span class="s0">(</span><span class="s3">2</span><span class="s0">),</span><span class="s3">16</span><span class="s0">),</span><span class="s1">n</span><span class="s0">.</span><span class="s1">toColor</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">);</span><span class="s4">case </span><span class="s3">7</span><span class="s0">:</span><span class="s4">return</span><span class="s0">{</span><span class="s1">css</span><span class="s0">:</span><span class="s1">e</span><span class="s0">,</span><span class="s1">rgba</span><span class="s0">:(</span><span class="s1">parseInt</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">slice</span><span class="s0">(</span><span class="s3">1</span><span class="s0">),</span><span class="s3">16</span><span class="s0">)&lt;&lt;</span><span class="s3">8</span><span class="s0">|</span><span class="s3">255</span><span class="s0">)&gt;&gt;&gt;</span><span class="s3">0</span><span class="s0">};</span><span class="s4">case </span><span class="s3">9</span><span class="s0">:</span><span class="s4">return</span><span class="s0">{</span><span class="s1">css</span><span class="s0">:</span><span class="s1">e</span><span class="s0">,</span><span class="s1">rgba</span><span class="s0">:</span><span class="s1">parseInt</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">slice</span><span class="s0">(</span><span class="s3">1</span><span class="s0">),</span><span class="s3">16</span><span class="s0">)&gt;&gt;&gt;</span><span class="s3">0</span><span class="s0">}}</span><span class="s4">const </span><span class="s1">h</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">match</span><span class="s0">(</span><span class="s5">/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">h</span><span class="s0">)</span><span class="s4">return </span><span class="s1">i</span><span class="s0">=</span><span class="s1">parseInt</span><span class="s0">(</span><span class="s1">h</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]),</span><span class="s1">s</span><span class="s0">=</span><span class="s1">parseInt</span><span class="s0">(</span><span class="s1">h</span><span class="s0">[</span><span class="s3">2</span><span class="s0">]),</span><span class="s1">r</span><span class="s0">=</span><span class="s1">parseInt</span><span class="s0">(</span><span class="s1">h</span><span class="s0">[</span><span class="s3">3</span><span class="s0">]),</span><span class="s1">o</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">round</span><span class="s0">(</span><span class="s3">255</span><span class="s0">*(</span><span class="s4">void </span><span class="s3">0</span><span class="s0">===</span><span class="s1">h</span><span class="s0">[</span><span class="s3">5</span><span class="s0">]?</span><span class="s3">1</span><span class="s0">:</span><span class="s1">parseFloat</span><span class="s0">(</span><span class="s1">h</span><span class="s0">[</span><span class="s3">5</span><span class="s0">]))),</span><span class="s1">n</span><span class="s0">.</span><span class="s1">toColor</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">t</span><span class="s0">||!</span><span class="s1">a</span><span class="s0">)</span><span class="s4">throw new </span><span class="s1">Error</span><span class="s0">(</span><span class="s2">&quot;css.toColor: Unsupported css format&quot;</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">fillStyle</span><span class="s0">=</span><span class="s1">a</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">fillStyle</span><span class="s0">=</span><span class="s1">e</span><span class="s0">,</span><span class="s2">&quot;string&quot;</span><span class="s0">!=</span><span class="s4">typeof </span><span class="s1">t</span><span class="s0">.</span><span class="s1">fillStyle</span><span class="s0">)</span><span class="s4">throw new </span><span class="s1">Error</span><span class="s0">(</span><span class="s2">&quot;css.toColor: Unsupported css format&quot;</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">fillRect</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s3">1</span><span class="s0">,</span><span class="s3">1</span><span class="s0">),[</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">]=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getImageData</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s3">0</span><span class="s0">,</span><span class="s3">1</span><span class="s0">,</span><span class="s3">1</span><span class="s0">).</span><span class="s1">data</span><span class="s0">,</span><span class="s3">255</span><span class="s0">!==</span><span class="s1">o</span><span class="s0">)</span><span class="s4">throw new </span><span class="s1">Error</span><span class="s0">(</span><span class="s2">&quot;css.toColor: Unsupported css format&quot;</span><span class="s0">);</span><span class="s4">return</span><span class="s0">{</span><span class="s1">rgba</span><span class="s0">:</span><span class="s1">n</span><span class="s0">.</span><span class="s1">toRgba</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">),</span><span class="s1">css</span><span class="s0">:</span><span class="s1">e</span><span class="s0">}}}(</span><span class="s1">h</span><span class="s0">||(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">css</span><span class="s0">=</span><span class="s1">h</span><span class="s0">={})),</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s4">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">e</span><span class="s0">/</span><span class="s3">255</span><span class="s0">,</span><span class="s1">r</span><span class="s0">=</span><span class="s1">t</span><span class="s0">/</span><span class="s3">255</span><span class="s0">,</span><span class="s1">o</span><span class="s0">=</span><span class="s1">i</span><span class="s0">/</span><span class="s3">255</span><span class="s0">;</span><span class="s4">return</span><span class="s3">.2126</span><span class="s0">*(</span><span class="s1">s</span><span class="s0">&lt;=</span><span class="s3">.03928</span><span class="s0">?</span><span class="s1">s</span><span class="s0">/</span><span class="s3">12.92</span><span class="s0">:</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">pow</span><span class="s0">((</span><span class="s1">s</span><span class="s0">+</span><span class="s3">.055</span><span class="s0">)/</span><span class="s3">1.055</span><span class="s0">,</span><span class="s3">2.4</span><span class="s0">))+</span><span class="s3">.7152</span><span class="s0">*(</span><span class="s1">r</span><span class="s0">&lt;=</span><span class="s3">.03928</span><span class="s0">?</span><span class="s1">r</span><span class="s0">/</span><span class="s3">12.92</span><span class="s0">:</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">pow</span><span class="s0">((</span><span class="s1">r</span><span class="s0">+</span><span class="s3">.055</span><span class="s0">)/</span><span class="s3">1.055</span><span class="s0">,</span><span class="s3">2.4</span><span class="s0">))+</span><span class="s3">.0722</span><span class="s0">*(</span><span class="s1">o</span><span class="s0">&lt;=</span><span class="s3">.03928</span><span class="s0">?</span><span class="s1">o</span><span class="s0">/</span><span class="s3">12.92</span><span class="s0">:</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">pow</span><span class="s0">((</span><span class="s1">o</span><span class="s0">+</span><span class="s3">.055</span><span class="s0">)/</span><span class="s3">1.055</span><span class="s0">,</span><span class="s3">2.4</span><span class="s0">))}</span><span class="s1">e</span><span class="s0">.</span><span class="s1">relativeLuminance</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">return </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">&gt;&gt;</span><span class="s3">16</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">e</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s3">255</span><span class="s0">&amp;</span><span class="s1">e</span><span class="s0">)},</span><span class="s1">e</span><span class="s0">.</span><span class="s1">relativeLuminance2</span><span class="s0">=</span><span class="s1">t</span><span class="s0">}(</span><span class="s1">l</span><span class="s0">||(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rgb</span><span class="s0">=</span><span class="s1">l</span><span class="s0">={})),</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">function </span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s4">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">e</span><span class="s0">&gt;&gt;</span><span class="s3">24</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">r</span><span class="s0">=</span><span class="s1">e</span><span class="s0">&gt;&gt;</span><span class="s3">16</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">o</span><span class="s0">=</span><span class="s1">e</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">;</span><span class="s4">let </span><span class="s1">n</span><span class="s0">=</span><span class="s1">t</span><span class="s0">&gt;&gt;</span><span class="s3">24</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">a</span><span class="s0">=</span><span class="s1">t</span><span class="s0">&gt;&gt;</span><span class="s3">16</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">h</span><span class="s0">=</span><span class="s1">t</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">c</span><span class="s0">=</span><span class="s1">_</span><span class="s0">(</span><span class="s1">l</span><span class="s0">.</span><span class="s1">relativeLuminance2</span><span class="s0">(</span><span class="s1">n</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">h</span><span class="s0">),</span><span class="s1">l</span><span class="s0">.</span><span class="s1">relativeLuminance2</span><span class="s0">(</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">));</span><span class="s4">for</span><span class="s0">(;</span><span class="s1">c</span><span class="s0">&lt;</span><span class="s1">i</span><span class="s0">&amp;&amp;(</span><span class="s1">n</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">||</span><span class="s1">a</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">||</span><span class="s1">h</span><span class="s0">&gt;</span><span class="s3">0</span><span class="s0">);)</span><span class="s1">n</span><span class="s0">-=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">max</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">ceil</span><span class="s0">(</span><span class="s3">.1</span><span class="s0">*</span><span class="s1">n</span><span class="s0">)),</span><span class="s1">a</span><span class="s0">-=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">max</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">ceil</span><span class="s0">(</span><span class="s3">.1</span><span class="s0">*</span><span class="s1">a</span><span class="s0">)),</span><span class="s1">h</span><span class="s0">-=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">max</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">ceil</span><span class="s0">(</span><span class="s3">.1</span><span class="s0">*</span><span class="s1">h</span><span class="s0">)),</span><span class="s1">c</span><span class="s0">=</span><span class="s1">_</span><span class="s0">(</span><span class="s1">l</span><span class="s0">.</span><span class="s1">relativeLuminance2</span><span class="s0">(</span><span class="s1">n</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">h</span><span class="s0">),</span><span class="s1">l</span><span class="s0">.</span><span class="s1">relativeLuminance2</span><span class="s0">(</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">));</span><span class="s4">return</span><span class="s0">(</span><span class="s1">n</span><span class="s0">&lt;&lt;</span><span class="s3">24</span><span class="s0">|</span><span class="s1">a</span><span class="s0">&lt;&lt;</span><span class="s3">16</span><span class="s0">|</span><span class="s1">h</span><span class="s0">&lt;&lt;</span><span class="s3">8</span><span class="s0">|</span><span class="s3">255</span><span class="s0">)&gt;&gt;&gt;</span><span class="s3">0</span><span class="s0">}</span><span class="s4">function </span><span class="s1">a</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s4">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">e</span><span class="s0">&gt;&gt;</span><span class="s3">24</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">r</span><span class="s0">=</span><span class="s1">e</span><span class="s0">&gt;&gt;</span><span class="s3">16</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">o</span><span class="s0">=</span><span class="s1">e</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">;</span><span class="s4">let </span><span class="s1">n</span><span class="s0">=</span><span class="s1">t</span><span class="s0">&gt;&gt;</span><span class="s3">24</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">a</span><span class="s0">=</span><span class="s1">t</span><span class="s0">&gt;&gt;</span><span class="s3">16</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">h</span><span class="s0">=</span><span class="s1">t</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">c</span><span class="s0">=</span><span class="s1">_</span><span class="s0">(</span><span class="s1">l</span><span class="s0">.</span><span class="s1">relativeLuminance2</span><span class="s0">(</span><span class="s1">n</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">h</span><span class="s0">),</span><span class="s1">l</span><span class="s0">.</span><span class="s1">relativeLuminance2</span><span class="s0">(</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">));</span><span class="s4">for</span><span class="s0">(;</span><span class="s1">c</span><span class="s0">&lt;</span><span class="s1">i</span><span class="s0">&amp;&amp;(</span><span class="s1">n</span><span class="s0">&lt;</span><span class="s3">255</span><span class="s0">||</span><span class="s1">a</span><span class="s0">&lt;</span><span class="s3">255</span><span class="s0">||</span><span class="s1">h</span><span class="s0">&lt;</span><span class="s3">255</span><span class="s0">);)</span><span class="s1">n</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">min</span><span class="s0">(</span><span class="s3">255</span><span class="s0">,</span><span class="s1">n</span><span class="s0">+</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">ceil</span><span class="s0">(</span><span class="s3">.1</span><span class="s0">*(</span><span class="s3">255</span><span class="s0">-</span><span class="s1">n</span><span class="s0">))),</span><span class="s1">a</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">min</span><span class="s0">(</span><span class="s3">255</span><span class="s0">,</span><span class="s1">a</span><span class="s0">+</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">ceil</span><span class="s0">(</span><span class="s3">.1</span><span class="s0">*(</span><span class="s3">255</span><span class="s0">-</span><span class="s1">a</span><span class="s0">))),</span><span class="s1">h</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">min</span><span class="s0">(</span><span class="s3">255</span><span class="s0">,</span><span class="s1">h</span><span class="s0">+</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">ceil</span><span class="s0">(</span><span class="s3">.1</span><span class="s0">*(</span><span class="s3">255</span><span class="s0">-</span><span class="s1">h</span><span class="s0">))),</span><span class="s1">c</span><span class="s0">=</span><span class="s1">_</span><span class="s0">(</span><span class="s1">l</span><span class="s0">.</span><span class="s1">relativeLuminance2</span><span class="s0">(</span><span class="s1">n</span><span class="s0">,</span><span class="s1">a</span><span class="s0">,</span><span class="s1">h</span><span class="s0">),</span><span class="s1">l</span><span class="s0">.</span><span class="s1">relativeLuminance2</span><span class="s0">(</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">));</span><span class="s4">return</span><span class="s0">(</span><span class="s1">n</span><span class="s0">&lt;&lt;</span><span class="s3">24</span><span class="s0">|</span><span class="s1">a</span><span class="s0">&lt;&lt;</span><span class="s3">16</span><span class="s0">|</span><span class="s1">h</span><span class="s0">&lt;&lt;</span><span class="s3">8</span><span class="s0">|</span><span class="s3">255</span><span class="s0">)&gt;&gt;&gt;</span><span class="s3">0</span><span class="s0">}</span><span class="s1">e</span><span class="s0">.</span><span class="s1">blend</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">o</span><span class="s0">=(</span><span class="s3">255</span><span class="s0">&amp;</span><span class="s1">t</span><span class="s0">)/</span><span class="s3">255</span><span class="s0">,</span><span class="s3">1</span><span class="s0">===</span><span class="s1">o</span><span class="s0">)</span><span class="s4">return </span><span class="s1">t</span><span class="s0">;</span><span class="s4">const </span><span class="s1">a</span><span class="s0">=</span><span class="s1">t</span><span class="s0">&gt;&gt;</span><span class="s3">24</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">h</span><span class="s0">=</span><span class="s1">t</span><span class="s0">&gt;&gt;</span><span class="s3">16</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">l</span><span class="s0">=</span><span class="s1">t</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">c</span><span class="s0">=</span><span class="s1">e</span><span class="s0">&gt;&gt;</span><span class="s3">24</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">d</span><span class="s0">=</span><span class="s1">e</span><span class="s0">&gt;&gt;</span><span class="s3">16</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">_</span><span class="s0">=</span><span class="s1">e</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">;</span><span class="s4">return </span><span class="s1">i</span><span class="s0">=</span><span class="s1">c</span><span class="s0">+</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">round</span><span class="s0">((</span><span class="s1">a</span><span class="s0">-</span><span class="s1">c</span><span class="s0">)*</span><span class="s1">o</span><span class="s0">),</span><span class="s1">s</span><span class="s0">=</span><span class="s1">d</span><span class="s0">+</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">round</span><span class="s0">((</span><span class="s1">h</span><span class="s0">-</span><span class="s1">d</span><span class="s0">)*</span><span class="s1">o</span><span class="s0">),</span><span class="s1">r</span><span class="s0">=</span><span class="s1">_</span><span class="s0">+</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">round</span><span class="s0">((</span><span class="s1">l</span><span class="s0">-</span><span class="s1">_</span><span class="s0">)*</span><span class="s1">o</span><span class="s0">),</span><span class="s1">n</span><span class="s0">.</span><span class="s1">toRgba</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">)},</span><span class="s1">e</span><span class="s0">.</span><span class="s1">ensureContrastRatio</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">){</span><span class="s4">const </span><span class="s1">r</span><span class="s0">=</span><span class="s1">l</span><span class="s0">.</span><span class="s1">relativeLuminance</span><span class="s0">(</span><span class="s1">e</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">),</span><span class="s1">o</span><span class="s0">=</span><span class="s1">l</span><span class="s0">.</span><span class="s1">relativeLuminance</span><span class="s0">(</span><span class="s1">i</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">_</span><span class="s0">(</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">)&lt;</span><span class="s1">s</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">o</span><span class="s0">&lt;</span><span class="s1">r</span><span class="s0">){</span><span class="s4">const </span><span class="s1">o</span><span class="s0">=</span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">),</span><span class="s1">n</span><span class="s0">=</span><span class="s1">_</span><span class="s0">(</span><span class="s1">r</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">relativeLuminance</span><span class="s0">(</span><span class="s1">o</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">));</span><span class="s4">if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">&lt;</span><span class="s1">s</span><span class="s0">){</span><span class="s4">const </span><span class="s1">t</span><span class="s0">=</span><span class="s1">a</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">);</span><span class="s4">return </span><span class="s1">n</span><span class="s0">&gt;</span><span class="s1">_</span><span class="s0">(</span><span class="s1">r</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">relativeLuminance</span><span class="s0">(</span><span class="s1">t</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">))?</span><span class="s1">o</span><span class="s0">:</span><span class="s1">t</span><span class="s0">}</span><span class="s4">return </span><span class="s1">o</span><span class="s0">}</span><span class="s4">const </span><span class="s1">n</span><span class="s0">=</span><span class="s1">a</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">),</span><span class="s1">h</span><span class="s0">=</span><span class="s1">_</span><span class="s0">(</span><span class="s1">r</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">relativeLuminance</span><span class="s0">(</span><span class="s1">n</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">));</span><span class="s4">if</span><span class="s0">(</span><span class="s1">h</span><span class="s0">&lt;</span><span class="s1">s</span><span class="s0">){</span><span class="s4">const </span><span class="s1">o</span><span class="s0">=</span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">);</span><span class="s4">return </span><span class="s1">h</span><span class="s0">&gt;</span><span class="s1">_</span><span class="s0">(</span><span class="s1">r</span><span class="s0">,</span><span class="s1">l</span><span class="s0">.</span><span class="s1">relativeLuminance</span><span class="s0">(</span><span class="s1">o</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">))?</span><span class="s1">n</span><span class="s0">:</span><span class="s1">o</span><span class="s0">}</span><span class="s4">return </span><span class="s1">n</span><span class="s0">}},</span><span class="s1">e</span><span class="s0">.</span><span class="s1">reduceLuminance</span><span class="s0">=</span><span class="s1">t</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">increaseLuminance</span><span class="s0">=</span><span class="s1">a</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">toChannels</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">return</span><span class="s0">[</span><span class="s1">e</span><span class="s0">&gt;&gt;</span><span class="s3">24</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">e</span><span class="s0">&gt;&gt;</span><span class="s3">16</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">e</span><span class="s0">&gt;&gt;</span><span class="s3">8</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s3">255</span><span class="s0">&amp;</span><span class="s1">e</span><span class="s0">]}}(</span><span class="s1">c</span><span class="s0">||(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">rgba</span><span class="s0">=</span><span class="s1">c</span><span class="s0">={})),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">toPaddedHex</span><span class="s0">=</span><span class="s1">d</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">contrastRatio</span><span class="s0">=</span><span class="s1">_</span><span class="s0">},</span><span class="s3">345</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">runAndSubscribe</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">forwardEvent</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">EventEmitter</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">EventEmitter</span><span class="s0">=</span><span class="s4">class</span><span class="s0">{</span><span class="s1">constructor</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_listeners</span><span class="s0">=[],</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_disposed</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">}</span><span class="s1">get event</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">_event</span><span class="s0">||(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_event</span><span class="s0">=</span><span class="s1">e</span><span class="s0">=&gt;(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_listeners</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">e</span><span class="s0">),{</span><span class="s1">dispose</span><span class="s0">:()=&gt;{</span><span class="s4">if</span><span class="s0">(!</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_disposed</span><span class="s0">)</span><span class="s4">for</span><span class="s0">(</span><span class="s4">let </span><span class="s1">t</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">t</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_listeners</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">t</span><span class="s0">++)</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_listeners</span><span class="s0">[</span><span class="s1">t</span><span class="s0">]===</span><span class="s1">e</span><span class="s0">)</span><span class="s4">return void this</span><span class="s0">.</span><span class="s1">_listeners</span><span class="s0">.</span><span class="s1">splice</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s3">1</span><span class="s0">)}})),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_event</span><span class="s0">}</span><span class="s1">fire</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">){</span><span class="s4">const </span><span class="s1">i</span><span class="s0">=[];</span><span class="s4">for</span><span class="s0">(</span><span class="s4">let </span><span class="s1">s</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">s</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_listeners</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">s</span><span class="s0">++)</span><span class="s1">i</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_listeners</span><span class="s0">[</span><span class="s1">s</span><span class="s0">]);</span><span class="s4">for</span><span class="s0">(</span><span class="s4">let </span><span class="s1">s</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">s</span><span class="s0">&lt;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">s</span><span class="s0">++)</span><span class="s1">i</span><span class="s0">[</span><span class="s1">s</span><span class="s0">].</span><span class="s1">call</span><span class="s0">(</span><span class="s4">void </span><span class="s3">0</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)}</span><span class="s1">dispose</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">clearListeners</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_disposed</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">}</span><span class="s1">clearListeners</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_listeners</span><span class="s0">&amp;&amp;(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_listeners</span><span class="s0">.</span><span class="s1">length</span><span class="s0">=</span><span class="s3">0</span><span class="s0">)}},</span><span class="s1">t</span><span class="s0">.</span><span class="s1">forwardEvent</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">){</span><span class="s4">return </span><span class="s1">e</span><span class="s0">((</span><span class="s1">e</span><span class="s0">=&gt;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">fire</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)))},</span><span class="s1">t</span><span class="s0">.</span><span class="s1">runAndSubscribe</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">){</span><span class="s4">return </span><span class="s1">t</span><span class="s0">(</span><span class="s4">void </span><span class="s3">0</span><span class="s0">),</span><span class="s1">e</span><span class="s0">((</span><span class="s1">e</span><span class="s0">=&gt;</span><span class="s1">t</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)))}},</span><span class="s3">859</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;{</span><span class="s4">function </span><span class="s1">i</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">const </span><span class="s1">t of e</span><span class="s0">)</span><span class="s1">t</span><span class="s0">.</span><span class="s1">dispose</span><span class="s0">();</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">=</span><span class="s3">0</span><span class="s0">}</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getDisposeArrayDisposable</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">disposeArray</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">toDisposable</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">MutableDisposable</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">Disposable</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">Disposable</span><span class="s0">=</span><span class="s4">class</span><span class="s0">{</span><span class="s1">constructor</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_disposables</span><span class="s0">=[],</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_isDisposed</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">}</span><span class="s1">dispose</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_isDisposed</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">const </span><span class="s1">e of </span><span class="s4">this</span><span class="s0">.</span><span class="s1">_disposables</span><span class="s0">)</span><span class="s1">e</span><span class="s0">.</span><span class="s1">dispose</span><span class="s0">();</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_disposables</span><span class="s0">.</span><span class="s1">length</span><span class="s0">=</span><span class="s3">0</span><span class="s0">}</span><span class="s1">register</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">_disposables</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">e</span><span class="s0">),</span><span class="s1">e</span><span class="s0">}</span><span class="s1">unregister</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">const </span><span class="s1">t</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_disposables</span><span class="s0">.</span><span class="s1">indexOf</span><span class="s0">(</span><span class="s1">e</span><span class="s0">);-</span><span class="s3">1</span><span class="s0">!==</span><span class="s1">t</span><span class="s0">&amp;&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_disposables</span><span class="s0">.</span><span class="s1">splice</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s3">1</span><span class="s0">)}},</span><span class="s1">t</span><span class="s0">.</span><span class="s1">MutableDisposable</span><span class="s0">=</span><span class="s4">class</span><span class="s0">{</span><span class="s1">constructor</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_isDisposed</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">}</span><span class="s1">get value</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">_isDisposed</span><span class="s0">?</span><span class="s4">void </span><span class="s3">0</span><span class="s0">:</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_value</span><span class="s0">}</span><span class="s1">set value</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_isDisposed</span><span class="s0">||</span><span class="s1">e</span><span class="s0">===</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_value</span><span class="s0">||(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_value</span><span class="s0">?.</span><span class="s1">dispose</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_value</span><span class="s0">=</span><span class="s1">e</span><span class="s0">)}</span><span class="s1">clear</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">value</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">}</span><span class="s1">dispose</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_isDisposed</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_value</span><span class="s0">?.</span><span class="s1">dispose</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_value</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">}},</span><span class="s1">t</span><span class="s0">.</span><span class="s1">toDisposable</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">return</span><span class="s0">{</span><span class="s1">dispose</span><span class="s0">:</span><span class="s1">e</span><span class="s0">}},</span><span class="s1">t</span><span class="s0">.</span><span class="s1">disposeArray</span><span class="s0">=</span><span class="s1">i</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getDisposeArrayDisposable</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">return</span><span class="s0">{</span><span class="s1">dispose</span><span class="s0">:()=&gt;</span><span class="s1">i</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)}}},</span><span class="s3">485</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">FourKeyMap</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">TwoKeyMap</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">class </span><span class="s1">i</span><span class="s0">{</span><span class="s1">constructor</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_data</span><span class="s0">={}}</span><span class="s1">set</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_data</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]||(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_data</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]={}),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_data</span><span class="s0">[</span><span class="s1">e</span><span class="s0">][</span><span class="s1">t</span><span class="s0">]=</span><span class="s1">i</span><span class="s0">}</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">_data</span><span class="s0">[</span><span class="s1">e</span><span class="s0">]?</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_data</span><span class="s0">[</span><span class="s1">e</span><span class="s0">][</span><span class="s1">t</span><span class="s0">]:</span><span class="s4">void </span><span class="s3">0</span><span class="s0">}</span><span class="s1">clear</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_data</span><span class="s0">={}}}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">TwoKeyMap</span><span class="s0">=</span><span class="s1">i</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">FourKeyMap</span><span class="s0">=</span><span class="s4">class</span><span class="s0">{</span><span class="s1">constructor</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_data</span><span class="s0">=</span><span class="s4">new </span><span class="s1">i</span><span class="s0">}</span><span class="s1">set</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_data</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)||</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_data</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s4">new </span><span class="s1">i</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_data</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">).</span><span class="s1">set</span><span class="s0">(</span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">)}</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">_data</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)?.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">)}</span><span class="s1">clear</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_data</span><span class="s0">.</span><span class="s1">clear</span><span class="s0">()}}},</span><span class="s3">399</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isChromeOS</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isLinux</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isWindows</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isIphone</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isIpad</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isMac</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getSafariVersion</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isSafari</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isLegacyEdge</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isFirefox</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isNode</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isNode</span><span class="s0">=</span><span class="s2">&quot;undefined&quot;</span><span class="s0">!=</span><span class="s4">typeof </span><span class="s1">s</span><span class="s0">&amp;&amp;</span><span class="s2">&quot;title&quot;</span><span class="s4">in </span><span class="s1">s</span><span class="s0">;</span><span class="s4">const </span><span class="s1">i</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isNode</span><span class="s0">?</span><span class="s2">&quot;node&quot;</span><span class="s0">:</span><span class="s1">navigator</span><span class="s0">.</span><span class="s1">userAgent</span><span class="s0">,</span><span class="s1">r</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isNode</span><span class="s0">?</span><span class="s2">&quot;node&quot;</span><span class="s0">:</span><span class="s1">navigator</span><span class="s0">.</span><span class="s1">platform</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isFirefox</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">includes</span><span class="s0">(</span><span class="s2">&quot;Firefox&quot;</span><span class="s0">),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isLegacyEdge</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">includes</span><span class="s0">(</span><span class="s2">&quot;Edge&quot;</span><span class="s0">),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isSafari</span><span class="s0">=</span><span class="s5">/^((?!chrome|android).)*safari/i</span><span class="s0">.</span><span class="s1">test</span><span class="s0">(</span><span class="s1">i</span><span class="s0">),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getSafariVersion</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isSafari</span><span class="s0">)</span><span class="s4">return </span><span class="s3">0</span><span class="s0">;</span><span class="s4">const </span><span class="s1">e</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">match</span><span class="s0">(</span><span class="s5">/Version\/(\d+)/</span><span class="s0">);</span><span class="s4">return null</span><span class="s0">===</span><span class="s1">e</span><span class="s0">||</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">&lt;</span><span class="s3">2</span><span class="s0">?</span><span class="s3">0</span><span class="s0">:</span><span class="s1">parseInt</span><span class="s0">(</span><span class="s1">e</span><span class="s0">[</span><span class="s3">1</span><span class="s0">])},</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isMac</span><span class="s0">=[</span><span class="s2">&quot;Macintosh&quot;</span><span class="s0">,</span><span class="s2">&quot;MacIntel&quot;</span><span class="s0">,</span><span class="s2">&quot;MacPPC&quot;</span><span class="s0">,</span><span class="s2">&quot;Mac68K&quot;</span><span class="s0">].</span><span class="s1">includes</span><span class="s0">(</span><span class="s1">r</span><span class="s0">),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isIpad</span><span class="s0">=</span><span class="s2">&quot;iPad&quot;</span><span class="s0">===</span><span class="s1">r</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isIphone</span><span class="s0">=</span><span class="s2">&quot;iPhone&quot;</span><span class="s0">===</span><span class="s1">r</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isWindows</span><span class="s0">=[</span><span class="s2">&quot;Windows&quot;</span><span class="s0">,</span><span class="s2">&quot;Win16&quot;</span><span class="s0">,</span><span class="s2">&quot;Win32&quot;</span><span class="s0">,</span><span class="s2">&quot;WinCE&quot;</span><span class="s0">].</span><span class="s1">includes</span><span class="s0">(</span><span class="s1">r</span><span class="s0">),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isLinux</span><span class="s0">=</span><span class="s1">r</span><span class="s0">.</span><span class="s1">indexOf</span><span class="s0">(</span><span class="s2">&quot;Linux&quot;</span><span class="s0">)&gt;=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">isChromeOS</span><span class="s0">=</span><span class="s5">/\bCrOS\b/</span><span class="s0">.</span><span class="s1">test</span><span class="s0">(</span><span class="s1">i</span><span class="s0">)},</span><span class="s3">385</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">)=&gt;{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">DebouncedIdleTask</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">IdleTaskQueue</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">PriorityTaskQueue</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">399</span><span class="s0">);</span><span class="s4">class </span><span class="s1">r</span><span class="s0">{</span><span class="s1">constructor</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tasks</span><span class="s0">=[],</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">}</span><span class="s1">enqueue</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tasks</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s1">e</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_start</span><span class="s0">()}</span><span class="s1">flush</span><span class="s0">(){</span><span class="s4">for</span><span class="s0">(;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_i</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tasks</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;)</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tasks</span><span class="s0">[</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_i</span><span class="s0">]()||</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_i</span><span class="s0">++;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">clear</span><span class="s0">()}</span><span class="s1">clear</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_idleCallback</span><span class="s0">&amp;&amp;(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_cancelCallback</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_idleCallback</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_idleCallback</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tasks</span><span class="s0">.</span><span class="s1">length</span><span class="s0">=</span><span class="s3">0</span><span class="s0">}</span><span class="s1">_start</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_idleCallback</span><span class="s0">||(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_idleCallback</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_requestCallback</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_process</span><span class="s0">.</span><span class="s1">bind</span><span class="s0">(</span><span class="s4">this</span><span class="s0">)))}</span><span class="s1">_process</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_idleCallback</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">let </span><span class="s1">t</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">i</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">timeRemaining</span><span class="s0">(),</span><span class="s1">r</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_i</span><span class="s0">&lt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tasks</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">=</span><span class="s1">Date</span><span class="s0">.</span><span class="s1">now</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_tasks</span><span class="s0">[</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_i</span><span class="s0">]()||</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_i</span><span class="s0">++,</span><span class="s1">t</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">max</span><span class="s0">(</span><span class="s3">1</span><span class="s0">,</span><span class="s1">Date</span><span class="s0">.</span><span class="s1">now</span><span class="s0">()-</span><span class="s1">t</span><span class="s0">),</span><span class="s1">i</span><span class="s0">=</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">max</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">),</span><span class="s1">r</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">timeRemaining</span><span class="s0">(),</span><span class="s3">1.5</span><span class="s0">*</span><span class="s1">i</span><span class="s0">&gt;</span><span class="s1">r</span><span class="s0">)</span><span class="s4">return </span><span class="s1">s</span><span class="s0">-</span><span class="s1">t</span><span class="s0">&lt;-</span><span class="s3">20</span><span class="s0">&amp;&amp;</span><span class="s1">console</span><span class="s0">.</span><span class="s1">warn</span><span class="s0">(</span><span class="s2">`task queue exceeded allotted deadline by </span><span class="s1">$</span><span class="s0">{</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">abs</span><span class="s0">(</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">round</span><span class="s0">(</span><span class="s1">s</span><span class="s0">-</span><span class="s1">t</span><span class="s0">))}</span><span class="s2">ms`</span><span class="s0">),</span><span class="s4">void this</span><span class="s0">.</span><span class="s1">_start</span><span class="s0">();</span><span class="s1">s</span><span class="s0">=</span><span class="s1">r</span><span class="s0">}</span><span class="s4">this</span><span class="s0">.</span><span class="s1">clear</span><span class="s0">()}}</span><span class="s4">class </span><span class="s1">o </span><span class="s4">extends </span><span class="s1">r</span><span class="s0">{</span><span class="s1">_requestCallback</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">return </span><span class="s1">setTimeout</span><span class="s0">((()=&gt;</span><span class="s1">e</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_createDeadline</span><span class="s0">(</span><span class="s3">16</span><span class="s0">))))}</span><span class="s1">_cancelCallback</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s1">clearTimeout</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)}</span><span class="s1">_createDeadline</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">const </span><span class="s1">t</span><span class="s0">=</span><span class="s1">Date</span><span class="s0">.</span><span class="s1">now</span><span class="s0">()+</span><span class="s1">e</span><span class="s0">;</span><span class="s4">return</span><span class="s0">{</span><span class="s1">timeRemaining</span><span class="s0">:()=&gt;</span><span class="s1">Math</span><span class="s0">.</span><span class="s1">max</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">t</span><span class="s0">-</span><span class="s1">Date</span><span class="s0">.</span><span class="s1">now</span><span class="s0">())}}}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">PriorityTaskQueue</span><span class="s0">=</span><span class="s1">o</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">IdleTaskQueue</span><span class="s0">=!</span><span class="s1">s</span><span class="s0">.</span><span class="s1">isNode</span><span class="s0">&amp;&amp;</span><span class="s2">&quot;requestIdleCallback&quot;</span><span class="s4">in </span><span class="s1">window</span><span class="s0">?</span><span class="s4">class extends </span><span class="s1">r</span><span class="s0">{</span><span class="s1">_requestCallback</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">return </span><span class="s1">requestIdleCallback</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)}</span><span class="s1">_cancelCallback</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s1">cancelIdleCallback</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)}}:</span><span class="s1">o</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">DebouncedIdleTask</span><span class="s0">=</span><span class="s4">class</span><span class="s0">{</span><span class="s1">constructor</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_queue</span><span class="s0">=</span><span class="s4">new </span><span class="s1">t</span><span class="s0">.</span><span class="s1">IdleTaskQueue</span><span class="s0">}</span><span class="s1">set</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_queue</span><span class="s0">.</span><span class="s1">clear</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_queue</span><span class="s0">.</span><span class="s1">enqueue</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)}</span><span class="s1">flush</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_queue</span><span class="s0">.</span><span class="s1">flush</span><span class="s0">()}}},</span><span class="s3">147</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">ExtendedAttrs</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">AttributeData</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">class </span><span class="s1">i</span><span class="s0">{</span><span class="s1">constructor</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">extended</span><span class="s0">=</span><span class="s4">new </span><span class="s1">s</span><span class="s0">}</span><span class="s4">static </span><span class="s1">toColorRGB</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">return</span><span class="s0">[</span><span class="s1">e</span><span class="s0">&gt;&gt;&gt;</span><span class="s3">16</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s1">e</span><span class="s0">&gt;&gt;&gt;</span><span class="s3">8</span><span class="s0">&amp;</span><span class="s3">255</span><span class="s0">,</span><span class="s3">255</span><span class="s0">&amp;</span><span class="s1">e</span><span class="s0">]}</span><span class="s4">static </span><span class="s1">fromColorRGB</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">return</span><span class="s0">(</span><span class="s3">255</span><span class="s0">&amp;</span><span class="s1">e</span><span class="s0">[</span><span class="s3">0</span><span class="s0">])&lt;&lt;</span><span class="s3">16</span><span class="s0">|(</span><span class="s3">255</span><span class="s0">&amp;</span><span class="s1">e</span><span class="s0">[</span><span class="s3">1</span><span class="s0">])&lt;&lt;</span><span class="s3">8</span><span class="s0">|</span><span class="s3">255</span><span class="s0">&amp;</span><span class="s1">e</span><span class="s0">[</span><span class="s3">2</span><span class="s0">]}</span><span class="s1">clone</span><span class="s0">(){</span><span class="s4">const </span><span class="s1">e</span><span class="s0">=</span><span class="s4">new </span><span class="s1">i</span><span class="s0">;</span><span class="s4">return </span><span class="s1">e</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">extended</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">extended</span><span class="s0">.</span><span class="s1">clone</span><span class="s0">(),</span><span class="s1">e</span><span class="s0">}</span><span class="s1">isInverse</span><span class="s0">(){</span><span class="s4">return </span><span class="s3">67108864</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">}</span><span class="s1">isBold</span><span class="s0">(){</span><span class="s4">return </span><span class="s3">134217728</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">}</span><span class="s1">isUnderline</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">hasExtendedAttrs</span><span class="s0">()&amp;&amp;</span><span class="s3">0</span><span class="s0">!==</span><span class="s4">this</span><span class="s0">.</span><span class="s1">extended</span><span class="s0">.</span><span class="s1">underlineStyle</span><span class="s0">?</span><span class="s3">1</span><span class="s0">:</span><span class="s3">268435456</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">}</span><span class="s1">isBlink</span><span class="s0">(){</span><span class="s4">return </span><span class="s3">536870912</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">}</span><span class="s1">isInvisible</span><span class="s0">(){</span><span class="s4">return </span><span class="s3">1073741824</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">}</span><span class="s1">isItalic</span><span class="s0">(){</span><span class="s4">return </span><span class="s3">67108864</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">}</span><span class="s1">isDim</span><span class="s0">(){</span><span class="s4">return </span><span class="s3">134217728</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">}</span><span class="s1">isStrikethrough</span><span class="s0">(){</span><span class="s4">return </span><span class="s3">2147483648</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">}</span><span class="s1">isProtected</span><span class="s0">(){</span><span class="s4">return </span><span class="s3">536870912</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">}</span><span class="s1">isOverline</span><span class="s0">(){</span><span class="s4">return </span><span class="s3">1073741824</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">}</span><span class="s1">getFgColorMode</span><span class="s0">(){</span><span class="s4">return </span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">}</span><span class="s1">getBgColorMode</span><span class="s0">(){</span><span class="s4">return </span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">}</span><span class="s1">isFgRGB</span><span class="s0">(){</span><span class="s4">return </span><span class="s3">50331648</span><span class="s0">==(</span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">)}</span><span class="s1">isBgRGB</span><span class="s0">(){</span><span class="s4">return </span><span class="s3">50331648</span><span class="s0">==(</span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">)}</span><span class="s1">isFgPalette</span><span class="s0">(){</span><span class="s4">return </span><span class="s3">16777216</span><span class="s0">==(</span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">)||</span><span class="s3">33554432</span><span class="s0">==(</span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">)}</span><span class="s1">isBgPalette</span><span class="s0">(){</span><span class="s4">return </span><span class="s3">16777216</span><span class="s0">==(</span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">)||</span><span class="s3">33554432</span><span class="s0">==(</span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">)}</span><span class="s1">isFgDefault</span><span class="s0">(){</span><span class="s4">return </span><span class="s3">0</span><span class="s0">==(</span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">)}</span><span class="s1">isBgDefault</span><span class="s0">(){</span><span class="s4">return </span><span class="s3">0</span><span class="s0">==(</span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">)}</span><span class="s1">isAttributeDefault</span><span class="s0">(){</span><span class="s4">return </span><span class="s3">0</span><span class="s0">===</span><span class="s4">this</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">&amp;&amp;</span><span class="s3">0</span><span class="s0">===</span><span class="s4">this</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">}</span><span class="s1">getFgColor</span><span class="s0">(){</span><span class="s4">switch</span><span class="s0">(</span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">){</span><span class="s4">case </span><span class="s3">16777216</span><span class="s0">:</span><span class="s4">case </span><span class="s3">33554432</span><span class="s0">:</span><span class="s4">return </span><span class="s3">255</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">;</span><span class="s4">case </span><span class="s3">50331648</span><span class="s0">:</span><span class="s4">return </span><span class="s3">16777215</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">;</span><span class="s4">default</span><span class="s0">:</span><span class="s4">return</span><span class="s0">-</span><span class="s3">1</span><span class="s0">}}</span><span class="s1">getBgColor</span><span class="s0">(){</span><span class="s4">switch</span><span class="s0">(</span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">){</span><span class="s4">case </span><span class="s3">16777216</span><span class="s0">:</span><span class="s4">case </span><span class="s3">33554432</span><span class="s0">:</span><span class="s4">return </span><span class="s3">255</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">;</span><span class="s4">case </span><span class="s3">50331648</span><span class="s0">:</span><span class="s4">return </span><span class="s3">16777215</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">;</span><span class="s4">default</span><span class="s0">:</span><span class="s4">return</span><span class="s0">-</span><span class="s3">1</span><span class="s0">}}</span><span class="s1">hasExtendedAttrs</span><span class="s0">(){</span><span class="s4">return </span><span class="s3">268435456</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">}</span><span class="s1">updateExtended</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">extended</span><span class="s0">.</span><span class="s1">isEmpty</span><span class="s0">()?</span><span class="s4">this</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">&amp;=-</span><span class="s3">268435457</span><span class="s0">:</span><span class="s4">this</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">|=</span><span class="s3">268435456</span><span class="s0">}</span><span class="s1">getUnderlineColor</span><span class="s0">(){</span><span class="s4">if</span><span class="s0">(</span><span class="s3">268435456</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">&amp;&amp;~</span><span class="s4">this</span><span class="s0">.</span><span class="s1">extended</span><span class="s0">.</span><span class="s1">underlineColor</span><span class="s0">)</span><span class="s4">switch</span><span class="s0">(</span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">extended</span><span class="s0">.</span><span class="s1">underlineColor</span><span class="s0">){</span><span class="s4">case </span><span class="s3">16777216</span><span class="s0">:</span><span class="s4">case </span><span class="s3">33554432</span><span class="s0">:</span><span class="s4">return </span><span class="s3">255</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">extended</span><span class="s0">.</span><span class="s1">underlineColor</span><span class="s0">;</span><span class="s4">case </span><span class="s3">50331648</span><span class="s0">:</span><span class="s4">return </span><span class="s3">16777215</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">extended</span><span class="s0">.</span><span class="s1">underlineColor</span><span class="s0">;</span><span class="s4">default</span><span class="s0">:</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">getFgColor</span><span class="s0">()}</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">getFgColor</span><span class="s0">()}</span><span class="s1">getUnderlineColorMode</span><span class="s0">(){</span><span class="s4">return </span><span class="s3">268435456</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">&amp;&amp;~</span><span class="s4">this</span><span class="s0">.</span><span class="s1">extended</span><span class="s0">.</span><span class="s1">underlineColor</span><span class="s0">?</span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">extended</span><span class="s0">.</span><span class="s1">underlineColor</span><span class="s0">:</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getFgColorMode</span><span class="s0">()}</span><span class="s1">isUnderlineColorRGB</span><span class="s0">(){</span><span class="s4">return </span><span class="s3">268435456</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">&amp;&amp;~</span><span class="s4">this</span><span class="s0">.</span><span class="s1">extended</span><span class="s0">.</span><span class="s1">underlineColor</span><span class="s0">?</span><span class="s3">50331648</span><span class="s0">==(</span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">extended</span><span class="s0">.</span><span class="s1">underlineColor</span><span class="s0">):</span><span class="s4">this</span><span class="s0">.</span><span class="s1">isFgRGB</span><span class="s0">()}</span><span class="s1">isUnderlineColorPalette</span><span class="s0">(){</span><span class="s4">return </span><span class="s3">268435456</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">&amp;&amp;~</span><span class="s4">this</span><span class="s0">.</span><span class="s1">extended</span><span class="s0">.</span><span class="s1">underlineColor</span><span class="s0">?</span><span class="s3">16777216</span><span class="s0">==(</span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">extended</span><span class="s0">.</span><span class="s1">underlineColor</span><span class="s0">)||</span><span class="s3">33554432</span><span class="s0">==(</span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">extended</span><span class="s0">.</span><span class="s1">underlineColor</span><span class="s0">):</span><span class="s4">this</span><span class="s0">.</span><span class="s1">isFgPalette</span><span class="s0">()}</span><span class="s1">isUnderlineColorDefault</span><span class="s0">(){</span><span class="s4">return </span><span class="s3">268435456</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">&amp;&amp;~</span><span class="s4">this</span><span class="s0">.</span><span class="s1">extended</span><span class="s0">.</span><span class="s1">underlineColor</span><span class="s0">?</span><span class="s3">0</span><span class="s0">==(</span><span class="s3">50331648</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">extended</span><span class="s0">.</span><span class="s1">underlineColor</span><span class="s0">):</span><span class="s4">this</span><span class="s0">.</span><span class="s1">isFgDefault</span><span class="s0">()}</span><span class="s1">getUnderlineStyle</span><span class="s0">(){</span><span class="s4">return </span><span class="s3">268435456</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">?</span><span class="s3">268435456</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">?</span><span class="s4">this</span><span class="s0">.</span><span class="s1">extended</span><span class="s0">.</span><span class="s1">underlineStyle</span><span class="s0">:</span><span class="s3">1</span><span class="s0">:</span><span class="s3">0</span><span class="s0">}</span><span class="s1">getUnderlineVariantOffset</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">extended</span><span class="s0">.</span><span class="s1">underlineVariantOffset</span><span class="s0">}}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">AttributeData</span><span class="s0">=</span><span class="s1">i</span><span class="s0">;</span><span class="s4">class </span><span class="s1">s</span><span class="s0">{</span><span class="s1">get ext</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">_urlId</span><span class="s0">?-</span><span class="s3">469762049</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_ext</span><span class="s0">|</span><span class="s4">this</span><span class="s0">.</span><span class="s1">underlineStyle</span><span class="s0">&lt;&lt;</span><span class="s3">26</span><span class="s0">:</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_ext</span><span class="s0">}</span><span class="s1">set ext</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_ext</span><span class="s0">=</span><span class="s1">e</span><span class="s0">}</span><span class="s1">get underlineStyle</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">_urlId</span><span class="s0">?</span><span class="s3">5</span><span class="s0">:(</span><span class="s3">469762048</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_ext</span><span class="s0">)&gt;&gt;</span><span class="s3">26</span><span class="s0">}</span><span class="s1">set underlineStyle</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_ext</span><span class="s0">&amp;=-</span><span class="s3">469762049</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_ext</span><span class="s0">|=</span><span class="s1">e</span><span class="s0">&lt;&lt;</span><span class="s3">26</span><span class="s0">&amp;</span><span class="s3">469762048</span><span class="s0">}</span><span class="s1">get underlineColor</span><span class="s0">(){</span><span class="s4">return </span><span class="s3">67108863</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_ext</span><span class="s0">}</span><span class="s1">set underlineColor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_ext</span><span class="s0">&amp;=-</span><span class="s3">67108864</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_ext</span><span class="s0">|=</span><span class="s3">67108863</span><span class="s0">&amp;</span><span class="s1">e</span><span class="s0">}</span><span class="s1">get urlId</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">_urlId</span><span class="s0">}</span><span class="s1">set urlId</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_urlId</span><span class="s0">=</span><span class="s1">e</span><span class="s0">}</span><span class="s1">get underlineVariantOffset</span><span class="s0">(){</span><span class="s4">const </span><span class="s1">e</span><span class="s0">=(</span><span class="s3">3758096384</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_ext</span><span class="s0">)&gt;&gt;</span><span class="s3">29</span><span class="s0">;</span><span class="s4">return </span><span class="s1">e</span><span class="s0">&lt;</span><span class="s3">0</span><span class="s0">?</span><span class="s3">4294967288</span><span class="s0">^</span><span class="s1">e</span><span class="s0">:</span><span class="s1">e</span><span class="s0">}</span><span class="s1">set underlineVariantOffset</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_ext</span><span class="s0">&amp;=</span><span class="s3">536870911</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_ext</span><span class="s0">|=</span><span class="s1">e</span><span class="s0">&lt;&lt;</span><span class="s3">29</span><span class="s0">&amp;</span><span class="s3">3758096384</span><span class="s0">}</span><span class="s1">constructor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">t</span><span class="s0">=</span><span class="s3">0</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_ext</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_urlId</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_ext</span><span class="s0">=</span><span class="s1">e</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_urlId</span><span class="s0">=</span><span class="s1">t</span><span class="s0">}</span><span class="s1">clone</span><span class="s0">(){</span><span class="s4">return new </span><span class="s1">s</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_ext</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_urlId</span><span class="s0">)}</span><span class="s1">isEmpty</span><span class="s0">(){</span><span class="s4">return </span><span class="s3">0</span><span class="s0">===</span><span class="s4">this</span><span class="s0">.</span><span class="s1">underlineStyle</span><span class="s0">&amp;&amp;</span><span class="s3">0</span><span class="s0">===</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_urlId</span><span class="s0">}}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">ExtendedAttrs</span><span class="s0">=</span><span class="s1">s</span><span class="s0">},</span><span class="s3">782</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">)=&gt;{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">CellData</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">133</span><span class="s0">),</span><span class="s1">r</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">855</span><span class="s0">),</span><span class="s1">o</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">147</span><span class="s0">);</span><span class="s4">class </span><span class="s1">n </span><span class="s4">extends </span><span class="s1">o</span><span class="s0">.</span><span class="s1">AttributeData</span><span class="s0">{</span><span class="s1">constructor</span><span class="s0">(){</span><span class="s4">super</span><span class="s0">(</span><span class="s1">...arguments</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">content</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">extended</span><span class="s0">=</span><span class="s4">new </span><span class="s1">o</span><span class="s0">.</span><span class="s1">ExtendedAttrs</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">combinedData</span><span class="s0">=</span><span class="s2">&quot;&quot;</span><span class="s0">}</span><span class="s4">static </span><span class="s1">fromCharData</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">const </span><span class="s1">t</span><span class="s0">=</span><span class="s4">new </span><span class="s1">n</span><span class="s0">;</span><span class="s4">return </span><span class="s1">t</span><span class="s0">.</span><span class="s1">setFromCharData</span><span class="s0">(</span><span class="s1">e</span><span class="s0">),</span><span class="s1">t</span><span class="s0">}</span><span class="s1">isCombined</span><span class="s0">(){</span><span class="s4">return </span><span class="s3">2097152</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">content</span><span class="s0">}</span><span class="s1">getWidth</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">content</span><span class="s0">&gt;&gt;</span><span class="s3">22</span><span class="s0">}</span><span class="s1">getChars</span><span class="s0">(){</span><span class="s4">return </span><span class="s3">2097152</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">content</span><span class="s0">?</span><span class="s4">this</span><span class="s0">.</span><span class="s1">combinedData</span><span class="s0">:</span><span class="s3">2097151</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">content</span><span class="s0">?(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">stringFromCodePoint</span><span class="s0">)(</span><span class="s3">2097151</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">content</span><span class="s0">):</span><span class="s2">&quot;&quot;</span><span class="s0">}</span><span class="s1">getCode</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">isCombined</span><span class="s0">()?</span><span class="s4">this</span><span class="s0">.</span><span class="s1">combinedData</span><span class="s0">.</span><span class="s1">charCodeAt</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">combinedData</span><span class="s0">.</span><span class="s1">length</span><span class="s0">-</span><span class="s3">1</span><span class="s0">):</span><span class="s3">2097151</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">content</span><span class="s0">}</span><span class="s1">setFromCharData</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">r</span><span class="s0">.</span><span class="s1">CHAR_DATA_ATTR_INDEX</span><span class="s0">],</span><span class="s4">this</span><span class="s0">.</span><span class="s1">bg</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">let </span><span class="s1">t</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">e</span><span class="s0">[</span><span class="s1">r</span><span class="s0">.</span><span class="s1">CHAR_DATA_CHAR_INDEX</span><span class="s0">].</span><span class="s1">length</span><span class="s0">&gt;</span><span class="s3">2</span><span class="s0">)</span><span class="s1">t</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">;</span><span class="s4">else if</span><span class="s0">(</span><span class="s3">2</span><span class="s0">===</span><span class="s1">e</span><span class="s0">[</span><span class="s1">r</span><span class="s0">.</span><span class="s1">CHAR_DATA_CHAR_INDEX</span><span class="s0">].</span><span class="s1">length</span><span class="s0">){</span><span class="s4">const </span><span class="s1">i</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">r</span><span class="s0">.</span><span class="s1">CHAR_DATA_CHAR_INDEX</span><span class="s0">].</span><span class="s1">charCodeAt</span><span class="s0">(</span><span class="s3">0</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s3">55296</span><span class="s0">&lt;=</span><span class="s1">i</span><span class="s0">&amp;&amp;</span><span class="s1">i</span><span class="s0">&lt;=</span><span class="s3">56319</span><span class="s0">){</span><span class="s4">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">r</span><span class="s0">.</span><span class="s1">CHAR_DATA_CHAR_INDEX</span><span class="s0">].</span><span class="s1">charCodeAt</span><span class="s0">(</span><span class="s3">1</span><span class="s0">);</span><span class="s3">56320</span><span class="s0">&lt;=</span><span class="s1">s</span><span class="s0">&amp;&amp;</span><span class="s1">s</span><span class="s0">&lt;=</span><span class="s3">57343</span><span class="s0">?</span><span class="s4">this</span><span class="s0">.</span><span class="s1">content</span><span class="s0">=</span><span class="s3">1024</span><span class="s0">*(</span><span class="s1">i</span><span class="s0">-</span><span class="s3">55296</span><span class="s0">)+</span><span class="s1">s</span><span class="s0">-</span><span class="s3">56320</span><span class="s0">+</span><span class="s3">65536</span><span class="s0">|</span><span class="s1">e</span><span class="s0">[</span><span class="s1">r</span><span class="s0">.</span><span class="s1">CHAR_DATA_WIDTH_INDEX</span><span class="s0">]&lt;&lt;</span><span class="s3">22</span><span class="s0">:</span><span class="s1">t</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">}</span><span class="s4">else </span><span class="s1">t</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">}</span><span class="s4">else this</span><span class="s0">.</span><span class="s1">content</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">r</span><span class="s0">.</span><span class="s1">CHAR_DATA_CHAR_INDEX</span><span class="s0">].</span><span class="s1">charCodeAt</span><span class="s0">(</span><span class="s3">0</span><span class="s0">)|</span><span class="s1">e</span><span class="s0">[</span><span class="s1">r</span><span class="s0">.</span><span class="s1">CHAR_DATA_WIDTH_INDEX</span><span class="s0">]&lt;&lt;</span><span class="s3">22</span><span class="s0">;</span><span class="s1">t</span><span class="s0">&amp;&amp;(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">combinedData</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">r</span><span class="s0">.</span><span class="s1">CHAR_DATA_CHAR_INDEX</span><span class="s0">],</span><span class="s4">this</span><span class="s0">.</span><span class="s1">content</span><span class="s0">=</span><span class="s3">2097152</span><span class="s0">|</span><span class="s1">e</span><span class="s0">[</span><span class="s1">r</span><span class="s0">.</span><span class="s1">CHAR_DATA_WIDTH_INDEX</span><span class="s0">]&lt;&lt;</span><span class="s3">22</span><span class="s0">)}</span><span class="s1">getAsCharData</span><span class="s0">(){</span><span class="s4">return</span><span class="s0">[</span><span class="s4">this</span><span class="s0">.</span><span class="s1">fg</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getChars</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getWidth</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">getCode</span><span class="s0">()]}}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">CellData</span><span class="s0">=</span><span class="s1">n</span><span class="s0">},</span><span class="s3">855</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">WHITESPACE_CELL_CODE</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">WHITESPACE_CELL_WIDTH</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">WHITESPACE_CELL_CHAR</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">NULL_CELL_CODE</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">NULL_CELL_WIDTH</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">NULL_CELL_CHAR</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">CHAR_DATA_CODE_INDEX</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">CHAR_DATA_WIDTH_INDEX</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">CHAR_DATA_CHAR_INDEX</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">CHAR_DATA_ATTR_INDEX</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">DEFAULT_EXT</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">DEFAULT_ATTR</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">DEFAULT_COLOR</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">DEFAULT_COLOR</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">DEFAULT_ATTR</span><span class="s0">=</span><span class="s3">256</span><span class="s0">|</span><span class="s1">t</span><span class="s0">.</span><span class="s1">DEFAULT_COLOR</span><span class="s0">&lt;&lt;</span><span class="s3">9</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">DEFAULT_EXT</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">CHAR_DATA_ATTR_INDEX</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">CHAR_DATA_CHAR_INDEX</span><span class="s0">=</span><span class="s3">1</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">CHAR_DATA_WIDTH_INDEX</span><span class="s0">=</span><span class="s3">2</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">CHAR_DATA_CODE_INDEX</span><span class="s0">=</span><span class="s3">3</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">NULL_CELL_CHAR</span><span class="s0">=</span><span class="s2">&quot;&quot;</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">NULL_CELL_WIDTH</span><span class="s0">=</span><span class="s3">1</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">NULL_CELL_CODE</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">WHITESPACE_CELL_CHAR</span><span class="s0">=</span><span class="s2">&quot; &quot;</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">WHITESPACE_CELL_WIDTH</span><span class="s0">=</span><span class="s3">1</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">WHITESPACE_CELL_CODE</span><span class="s0">=</span><span class="s3">32</span><span class="s0">},</span><span class="s3">133</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">Utf8ToUtf32</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">StringToUtf32</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">utf32ToString</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">stringFromCodePoint</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">stringFromCodePoint</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">return </span><span class="s1">e</span><span class="s0">&gt;</span><span class="s3">65535</span><span class="s0">?(</span><span class="s1">e</span><span class="s0">-=</span><span class="s3">65536</span><span class="s0">,</span><span class="s1">String</span><span class="s0">.</span><span class="s1">fromCharCode</span><span class="s0">(</span><span class="s3">55296</span><span class="s0">+(</span><span class="s1">e</span><span class="s0">&gt;&gt;</span><span class="s3">10</span><span class="s0">))+</span><span class="s1">String</span><span class="s0">.</span><span class="s1">fromCharCode</span><span class="s0">(</span><span class="s1">e</span><span class="s0">%</span><span class="s3">1024</span><span class="s0">+</span><span class="s3">56320</span><span class="s0">)):</span><span class="s1">String</span><span class="s0">.</span><span class="s1">fromCharCode</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)},</span><span class="s1">t</span><span class="s0">.</span><span class="s1">utf32ToString</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">i</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">){</span><span class="s4">let </span><span class="s1">s</span><span class="s0">=</span><span class="s2">&quot;&quot;</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(</span><span class="s4">let </span><span class="s1">r</span><span class="s0">=</span><span class="s1">t</span><span class="s0">;</span><span class="s1">r</span><span class="s0">&lt;</span><span class="s1">i</span><span class="s0">;++</span><span class="s1">r</span><span class="s0">){</span><span class="s4">let </span><span class="s1">t</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">r</span><span class="s0">];</span><span class="s1">t</span><span class="s0">&gt;</span><span class="s3">65535</span><span class="s0">?(</span><span class="s1">t</span><span class="s0">-=</span><span class="s3">65536</span><span class="s0">,</span><span class="s1">s</span><span class="s0">+=</span><span class="s1">String</span><span class="s0">.</span><span class="s1">fromCharCode</span><span class="s0">(</span><span class="s3">55296</span><span class="s0">+(</span><span class="s1">t</span><span class="s0">&gt;&gt;</span><span class="s3">10</span><span class="s0">))+</span><span class="s1">String</span><span class="s0">.</span><span class="s1">fromCharCode</span><span class="s0">(</span><span class="s1">t</span><span class="s0">%</span><span class="s3">1024</span><span class="s0">+</span><span class="s3">56320</span><span class="s0">)):</span><span class="s1">s</span><span class="s0">+=</span><span class="s1">String</span><span class="s0">.</span><span class="s1">fromCharCode</span><span class="s0">(</span><span class="s1">t</span><span class="s0">)}</span><span class="s4">return </span><span class="s1">s</span><span class="s0">},</span><span class="s1">t</span><span class="s0">.</span><span class="s1">StringToUtf32</span><span class="s0">=</span><span class="s4">class</span><span class="s0">{</span><span class="s1">constructor</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_interim</span><span class="s0">=</span><span class="s3">0</span><span class="s0">}</span><span class="s1">clear</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_interim</span><span class="s0">=</span><span class="s3">0</span><span class="s0">}</span><span class="s1">decode</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">){</span><span class="s4">const </span><span class="s1">i</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">i</span><span class="s0">)</span><span class="s4">return </span><span class="s3">0</span><span class="s0">;</span><span class="s4">let </span><span class="s1">s</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">r</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_interim</span><span class="s0">){</span><span class="s4">const </span><span class="s1">i</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">charCodeAt</span><span class="s0">(</span><span class="s1">r</span><span class="s0">++);</span><span class="s3">56320</span><span class="s0">&lt;=</span><span class="s1">i</span><span class="s0">&amp;&amp;</span><span class="s1">i</span><span class="s0">&lt;=</span><span class="s3">57343</span><span class="s0">?</span><span class="s1">t</span><span class="s0">[</span><span class="s1">s</span><span class="s0">++]=</span><span class="s3">1024</span><span class="s0">*(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_interim</span><span class="s0">-</span><span class="s3">55296</span><span class="s0">)+</span><span class="s1">i</span><span class="s0">-</span><span class="s3">56320</span><span class="s0">+</span><span class="s3">65536</span><span class="s0">:(</span><span class="s1">t</span><span class="s0">[</span><span class="s1">s</span><span class="s0">++]=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_interim</span><span class="s0">,</span><span class="s1">t</span><span class="s0">[</span><span class="s1">s</span><span class="s0">++]=</span><span class="s1">i</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_interim</span><span class="s0">=</span><span class="s3">0</span><span class="s0">}</span><span class="s4">for</span><span class="s0">(</span><span class="s4">let </span><span class="s1">o</span><span class="s0">=</span><span class="s1">r</span><span class="s0">;</span><span class="s1">o</span><span class="s0">&lt;</span><span class="s1">i</span><span class="s0">;++</span><span class="s1">o</span><span class="s0">){</span><span class="s4">const </span><span class="s1">r</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">charCodeAt</span><span class="s0">(</span><span class="s1">o</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s3">55296</span><span class="s0">&lt;=</span><span class="s1">r</span><span class="s0">&amp;&amp;</span><span class="s1">r</span><span class="s0">&lt;=</span><span class="s3">56319</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(++</span><span class="s1">o</span><span class="s0">&gt;=</span><span class="s1">i</span><span class="s0">)</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">_interim</span><span class="s0">=</span><span class="s1">r</span><span class="s0">,</span><span class="s1">s</span><span class="s0">;</span><span class="s4">const </span><span class="s1">n</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">charCodeAt</span><span class="s0">(</span><span class="s1">o</span><span class="s0">);</span><span class="s3">56320</span><span class="s0">&lt;=</span><span class="s1">n</span><span class="s0">&amp;&amp;</span><span class="s1">n</span><span class="s0">&lt;=</span><span class="s3">57343</span><span class="s0">?</span><span class="s1">t</span><span class="s0">[</span><span class="s1">s</span><span class="s0">++]=</span><span class="s3">1024</span><span class="s0">*(</span><span class="s1">r</span><span class="s0">-</span><span class="s3">55296</span><span class="s0">)+</span><span class="s1">n</span><span class="s0">-</span><span class="s3">56320</span><span class="s0">+</span><span class="s3">65536</span><span class="s0">:(</span><span class="s1">t</span><span class="s0">[</span><span class="s1">s</span><span class="s0">++]=</span><span class="s1">r</span><span class="s0">,</span><span class="s1">t</span><span class="s0">[</span><span class="s1">s</span><span class="s0">++]=</span><span class="s1">n</span><span class="s0">)}</span><span class="s4">else </span><span class="s3">65279</span><span class="s0">!==</span><span class="s1">r</span><span class="s0">&amp;&amp;(</span><span class="s1">t</span><span class="s0">[</span><span class="s1">s</span><span class="s0">++]=</span><span class="s1">r</span><span class="s0">)}</span><span class="s4">return </span><span class="s1">s</span><span class="s0">}},</span><span class="s1">t</span><span class="s0">.</span><span class="s1">Utf8ToUtf32</span><span class="s0">=</span><span class="s4">class</span><span class="s0">{</span><span class="s1">constructor</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">interim</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Uint8Array</span><span class="s0">(</span><span class="s3">3</span><span class="s0">)}</span><span class="s1">clear</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">interim</span><span class="s0">.</span><span class="s1">fill</span><span class="s0">(</span><span class="s3">0</span><span class="s0">)}</span><span class="s1">decode</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">){</span><span class="s4">const </span><span class="s1">i</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">i</span><span class="s0">)</span><span class="s4">return </span><span class="s3">0</span><span class="s0">;</span><span class="s4">let </span><span class="s1">s</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">n</span><span class="s0">,</span><span class="s1">a</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">h</span><span class="s0">=</span><span class="s3">0</span><span class="s0">,</span><span class="s1">l</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">interim</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]){</span><span class="s4">let </span><span class="s1">s</span><span class="s0">=!</span><span class="s3">1</span><span class="s0">,</span><span class="s1">r</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">interim</span><span class="s0">[</span><span class="s3">0</span><span class="s0">];</span><span class="s1">r</span><span class="s0">&amp;=</span><span class="s3">192</span><span class="s0">==(</span><span class="s3">224</span><span class="s0">&amp;</span><span class="s1">r</span><span class="s0">)?</span><span class="s3">31</span><span class="s0">:</span><span class="s3">224</span><span class="s0">==(</span><span class="s3">240</span><span class="s0">&amp;</span><span class="s1">r</span><span class="s0">)?</span><span class="s3">15</span><span class="s0">:</span><span class="s3">7</span><span class="s0">;</span><span class="s4">let </span><span class="s1">o</span><span class="s0">,</span><span class="s1">n</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(;(</span><span class="s1">o</span><span class="s0">=</span><span class="s3">63</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">interim</span><span class="s0">[++</span><span class="s1">n</span><span class="s0">])&amp;&amp;</span><span class="s1">n</span><span class="s0">&lt;</span><span class="s3">4</span><span class="s0">;)</span><span class="s1">r</span><span class="s0">&lt;&lt;=</span><span class="s3">6</span><span class="s0">,</span><span class="s1">r</span><span class="s0">|=</span><span class="s1">o</span><span class="s0">;</span><span class="s4">const </span><span class="s1">h</span><span class="s0">=</span><span class="s3">192</span><span class="s0">==(</span><span class="s3">224</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">interim</span><span class="s0">[</span><span class="s3">0</span><span class="s0">])?</span><span class="s3">2</span><span class="s0">:</span><span class="s3">224</span><span class="s0">==(</span><span class="s3">240</span><span class="s0">&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">interim</span><span class="s0">[</span><span class="s3">0</span><span class="s0">])?</span><span class="s3">3</span><span class="s0">:</span><span class="s3">4</span><span class="s0">,</span><span class="s1">c</span><span class="s0">=</span><span class="s1">h</span><span class="s0">-</span><span class="s1">n</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(;</span><span class="s1">l</span><span class="s0">&lt;</span><span class="s1">c</span><span class="s0">;){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">l</span><span class="s0">&gt;=</span><span class="s1">i</span><span class="s0">)</span><span class="s4">return </span><span class="s3">0</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">o</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">l</span><span class="s0">++],</span><span class="s3">128</span><span class="s0">!=(</span><span class="s3">192</span><span class="s0">&amp;</span><span class="s1">o</span><span class="s0">)){</span><span class="s1">l</span><span class="s0">--,</span><span class="s1">s</span><span class="s0">=!</span><span class="s3">0</span><span class="s0">;</span><span class="s4">break</span><span class="s0">}</span><span class="s4">this</span><span class="s0">.</span><span class="s1">interim</span><span class="s0">[</span><span class="s1">n</span><span class="s0">++]=</span><span class="s1">o</span><span class="s0">,</span><span class="s1">r</span><span class="s0">&lt;&lt;=</span><span class="s3">6</span><span class="s0">,</span><span class="s1">r</span><span class="s0">|=</span><span class="s3">63</span><span class="s0">&amp;</span><span class="s1">o</span><span class="s0">}</span><span class="s1">s</span><span class="s0">||(</span><span class="s3">2</span><span class="s0">===</span><span class="s1">h</span><span class="s0">?</span><span class="s1">r</span><span class="s0">&lt;</span><span class="s3">128</span><span class="s0">?</span><span class="s1">l</span><span class="s0">--:</span><span class="s1">t</span><span class="s0">[</span><span class="s1">a</span><span class="s0">++]=</span><span class="s1">r</span><span class="s0">:</span><span class="s3">3</span><span class="s0">===</span><span class="s1">h</span><span class="s0">?</span><span class="s1">r</span><span class="s0">&lt;</span><span class="s3">2048</span><span class="s0">||</span><span class="s1">r</span><span class="s0">&gt;=</span><span class="s3">55296</span><span class="s0">&amp;&amp;</span><span class="s1">r</span><span class="s0">&lt;=</span><span class="s3">57343</span><span class="s0">||</span><span class="s3">65279</span><span class="s0">===</span><span class="s1">r</span><span class="s0">||(</span><span class="s1">t</span><span class="s0">[</span><span class="s1">a</span><span class="s0">++]=</span><span class="s1">r</span><span class="s0">):</span><span class="s1">r</span><span class="s0">&lt;</span><span class="s3">65536</span><span class="s0">||</span><span class="s1">r</span><span class="s0">&gt;</span><span class="s3">1114111</span><span class="s0">||(</span><span class="s1">t</span><span class="s0">[</span><span class="s1">a</span><span class="s0">++]=</span><span class="s1">r</span><span class="s0">)),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">interim</span><span class="s0">.</span><span class="s1">fill</span><span class="s0">(</span><span class="s3">0</span><span class="s0">)}</span><span class="s4">const </span><span class="s1">c</span><span class="s0">=</span><span class="s1">i</span><span class="s0">-</span><span class="s3">4</span><span class="s0">;</span><span class="s4">let </span><span class="s1">d</span><span class="s0">=</span><span class="s1">l</span><span class="s0">;</span><span class="s4">for</span><span class="s0">(;</span><span class="s1">d</span><span class="s0">&lt;</span><span class="s1">i</span><span class="s0">;){</span><span class="s4">for</span><span class="s0">(;!(!(</span><span class="s1">d</span><span class="s0">&lt;</span><span class="s1">c</span><span class="s0">)||</span><span class="s3">128</span><span class="s0">&amp;(</span><span class="s1">s</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">d</span><span class="s0">])||</span><span class="s3">128</span><span class="s0">&amp;(</span><span class="s1">r</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">d</span><span class="s0">+</span><span class="s3">1</span><span class="s0">])||</span><span class="s3">128</span><span class="s0">&amp;(</span><span class="s1">o</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">d</span><span class="s0">+</span><span class="s3">2</span><span class="s0">])||</span><span class="s3">128</span><span class="s0">&amp;(</span><span class="s1">n</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">d</span><span class="s0">+</span><span class="s3">3</span><span class="s0">]));)</span><span class="s1">t</span><span class="s0">[</span><span class="s1">a</span><span class="s0">++]=</span><span class="s1">s</span><span class="s0">,</span><span class="s1">t</span><span class="s0">[</span><span class="s1">a</span><span class="s0">++]=</span><span class="s1">r</span><span class="s0">,</span><span class="s1">t</span><span class="s0">[</span><span class="s1">a</span><span class="s0">++]=</span><span class="s1">o</span><span class="s0">,</span><span class="s1">t</span><span class="s0">[</span><span class="s1">a</span><span class="s0">++]=</span><span class="s1">n</span><span class="s0">,</span><span class="s1">d</span><span class="s0">+=</span><span class="s3">4</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">s</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">d</span><span class="s0">++],</span><span class="s1">s</span><span class="s0">&lt;</span><span class="s3">128</span><span class="s0">)</span><span class="s1">t</span><span class="s0">[</span><span class="s1">a</span><span class="s0">++]=</span><span class="s1">s</span><span class="s0">;</span><span class="s4">else if</span><span class="s0">(</span><span class="s3">192</span><span class="s0">==(</span><span class="s3">224</span><span class="s0">&amp;</span><span class="s1">s</span><span class="s0">)){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">d</span><span class="s0">&gt;=</span><span class="s1">i</span><span class="s0">)</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">interim</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]=</span><span class="s1">s</span><span class="s0">,</span><span class="s1">a</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">d</span><span class="s0">++],</span><span class="s3">128</span><span class="s0">!=(</span><span class="s3">192</span><span class="s0">&amp;</span><span class="s1">r</span><span class="s0">)){</span><span class="s1">d</span><span class="s0">--;</span><span class="s4">continue</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">h</span><span class="s0">=(</span><span class="s3">31</span><span class="s0">&amp;</span><span class="s1">s</span><span class="s0">)&lt;&lt;</span><span class="s3">6</span><span class="s0">|</span><span class="s3">63</span><span class="s0">&amp;</span><span class="s1">r</span><span class="s0">,</span><span class="s1">h</span><span class="s0">&lt;</span><span class="s3">128</span><span class="s0">){</span><span class="s1">d</span><span class="s0">--;</span><span class="s4">continue</span><span class="s0">}</span><span class="s1">t</span><span class="s0">[</span><span class="s1">a</span><span class="s0">++]=</span><span class="s1">h</span><span class="s0">}</span><span class="s4">else if</span><span class="s0">(</span><span class="s3">224</span><span class="s0">==(</span><span class="s3">240</span><span class="s0">&amp;</span><span class="s1">s</span><span class="s0">)){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">d</span><span class="s0">&gt;=</span><span class="s1">i</span><span class="s0">)</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">interim</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]=</span><span class="s1">s</span><span class="s0">,</span><span class="s1">a</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">d</span><span class="s0">++],</span><span class="s3">128</span><span class="s0">!=(</span><span class="s3">192</span><span class="s0">&amp;</span><span class="s1">r</span><span class="s0">)){</span><span class="s1">d</span><span class="s0">--;</span><span class="s4">continue</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">d</span><span class="s0">&gt;=</span><span class="s1">i</span><span class="s0">)</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">interim</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]=</span><span class="s1">s</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">interim</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]=</span><span class="s1">r</span><span class="s0">,</span><span class="s1">a</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">o</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">d</span><span class="s0">++],</span><span class="s3">128</span><span class="s0">!=(</span><span class="s3">192</span><span class="s0">&amp;</span><span class="s1">o</span><span class="s0">)){</span><span class="s1">d</span><span class="s0">--;</span><span class="s4">continue</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">h</span><span class="s0">=(</span><span class="s3">15</span><span class="s0">&amp;</span><span class="s1">s</span><span class="s0">)&lt;&lt;</span><span class="s3">12</span><span class="s0">|(</span><span class="s3">63</span><span class="s0">&amp;</span><span class="s1">r</span><span class="s0">)&lt;&lt;</span><span class="s3">6</span><span class="s0">|</span><span class="s3">63</span><span class="s0">&amp;</span><span class="s1">o</span><span class="s0">,</span><span class="s1">h</span><span class="s0">&lt;</span><span class="s3">2048</span><span class="s0">||</span><span class="s1">h</span><span class="s0">&gt;=</span><span class="s3">55296</span><span class="s0">&amp;&amp;</span><span class="s1">h</span><span class="s0">&lt;=</span><span class="s3">57343</span><span class="s0">||</span><span class="s3">65279</span><span class="s0">===</span><span class="s1">h</span><span class="s0">)</span><span class="s4">continue</span><span class="s0">;</span><span class="s1">t</span><span class="s0">[</span><span class="s1">a</span><span class="s0">++]=</span><span class="s1">h</span><span class="s0">}</span><span class="s4">else if</span><span class="s0">(</span><span class="s3">240</span><span class="s0">==(</span><span class="s3">248</span><span class="s0">&amp;</span><span class="s1">s</span><span class="s0">)){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">d</span><span class="s0">&gt;=</span><span class="s1">i</span><span class="s0">)</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">interim</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]=</span><span class="s1">s</span><span class="s0">,</span><span class="s1">a</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">r</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">d</span><span class="s0">++],</span><span class="s3">128</span><span class="s0">!=(</span><span class="s3">192</span><span class="s0">&amp;</span><span class="s1">r</span><span class="s0">)){</span><span class="s1">d</span><span class="s0">--;</span><span class="s4">continue</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">d</span><span class="s0">&gt;=</span><span class="s1">i</span><span class="s0">)</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">interim</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]=</span><span class="s1">s</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">interim</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]=</span><span class="s1">r</span><span class="s0">,</span><span class="s1">a</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">o</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">d</span><span class="s0">++],</span><span class="s3">128</span><span class="s0">!=(</span><span class="s3">192</span><span class="s0">&amp;</span><span class="s1">o</span><span class="s0">)){</span><span class="s1">d</span><span class="s0">--;</span><span class="s4">continue</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">d</span><span class="s0">&gt;=</span><span class="s1">i</span><span class="s0">)</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">interim</span><span class="s0">[</span><span class="s3">0</span><span class="s0">]=</span><span class="s1">s</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">interim</span><span class="s0">[</span><span class="s3">1</span><span class="s0">]=</span><span class="s1">r</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">interim</span><span class="s0">[</span><span class="s3">2</span><span class="s0">]=</span><span class="s1">o</span><span class="s0">,</span><span class="s1">a</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">n</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">d</span><span class="s0">++],</span><span class="s3">128</span><span class="s0">!=(</span><span class="s3">192</span><span class="s0">&amp;</span><span class="s1">n</span><span class="s0">)){</span><span class="s1">d</span><span class="s0">--;</span><span class="s4">continue</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">h</span><span class="s0">=(</span><span class="s3">7</span><span class="s0">&amp;</span><span class="s1">s</span><span class="s0">)&lt;&lt;</span><span class="s3">18</span><span class="s0">|(</span><span class="s3">63</span><span class="s0">&amp;</span><span class="s1">r</span><span class="s0">)&lt;&lt;</span><span class="s3">12</span><span class="s0">|(</span><span class="s3">63</span><span class="s0">&amp;</span><span class="s1">o</span><span class="s0">)&lt;&lt;</span><span class="s3">6</span><span class="s0">|</span><span class="s3">63</span><span class="s0">&amp;</span><span class="s1">n</span><span class="s0">,</span><span class="s1">h</span><span class="s0">&lt;</span><span class="s3">65536</span><span class="s0">||</span><span class="s1">h</span><span class="s0">&gt;</span><span class="s3">1114111</span><span class="s0">)</span><span class="s4">continue</span><span class="s0">;</span><span class="s1">t</span><span class="s0">[</span><span class="s1">a</span><span class="s0">++]=</span><span class="s1">h</span><span class="s0">}}</span><span class="s4">return </span><span class="s1">a</span><span class="s0">}}},</span><span class="s3">776</span><span class="s0">:</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s4">var </span><span class="s1">s</span><span class="s0">=</span><span class="s4">this</span><span class="s0">&amp;&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">__decorate</span><span class="s0">||</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">){</span><span class="s4">var </span><span class="s1">r</span><span class="s0">,</span><span class="s1">o</span><span class="s0">=</span><span class="s1">arguments</span><span class="s0">.</span><span class="s1">length</span><span class="s0">,</span><span class="s1">n</span><span class="s0">=</span><span class="s1">o</span><span class="s0">&lt;</span><span class="s3">3</span><span class="s0">?</span><span class="s1">t</span><span class="s0">:</span><span class="s4">null</span><span class="s0">===</span><span class="s1">s</span><span class="s0">?</span><span class="s1">s</span><span class="s0">=</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">getOwnPropertyDescriptor</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">):</span><span class="s1">s</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s2">&quot;object&quot;</span><span class="s0">==</span><span class="s4">typeof </span><span class="s1">Reflect</span><span class="s0">&amp;&amp;</span><span class="s2">&quot;function&quot;</span><span class="s0">==</span><span class="s4">typeof </span><span class="s1">Reflect</span><span class="s0">.</span><span class="s1">decorate</span><span class="s0">)</span><span class="s1">n</span><span class="s0">=</span><span class="s1">Reflect</span><span class="s0">.</span><span class="s1">decorate</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">);</span><span class="s4">else for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">a</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">-</span><span class="s3">1</span><span class="s0">;</span><span class="s1">a</span><span class="s0">&gt;=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">a</span><span class="s0">--)(</span><span class="s1">r</span><span class="s0">=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">a</span><span class="s0">])&amp;&amp;(</span><span class="s1">n</span><span class="s0">=(</span><span class="s1">o</span><span class="s0">&lt;</span><span class="s3">3</span><span class="s0">?</span><span class="s1">r</span><span class="s0">(</span><span class="s1">n</span><span class="s0">):</span><span class="s1">o</span><span class="s0">&gt;</span><span class="s3">3</span><span class="s0">?</span><span class="s1">r</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">n</span><span class="s0">):</span><span class="s1">r</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">))||</span><span class="s1">n</span><span class="s0">);</span><span class="s4">return </span><span class="s1">o</span><span class="s0">&gt;</span><span class="s3">3</span><span class="s0">&amp;&amp;</span><span class="s1">n</span><span class="s0">&amp;&amp;</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">,</span><span class="s1">n</span><span class="s0">),</span><span class="s1">n</span><span class="s0">},</span><span class="s1">r</span><span class="s0">=</span><span class="s4">this</span><span class="s0">&amp;&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">__param</span><span class="s0">||</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">){</span><span class="s4">return function</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">){</span><span class="s1">t</span><span class="s0">(</span><span class="s1">i</span><span class="s0">,</span><span class="s1">s</span><span class="s0">,</span><span class="s1">e</span><span class="s0">)}};</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">traceCall</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">setTraceLogger</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">LogService</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">const </span><span class="s1">o</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">859</span><span class="s0">),</span><span class="s1">n</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">97</span><span class="s0">),</span><span class="s1">a</span><span class="s0">={</span><span class="s1">trace</span><span class="s0">:</span><span class="s1">n</span><span class="s0">.</span><span class="s1">LogLevelEnum</span><span class="s0">.</span><span class="s1">TRACE</span><span class="s0">,</span><span class="s1">debug</span><span class="s0">:</span><span class="s1">n</span><span class="s0">.</span><span class="s1">LogLevelEnum</span><span class="s0">.</span><span class="s1">DEBUG</span><span class="s0">,</span><span class="s1">info</span><span class="s0">:</span><span class="s1">n</span><span class="s0">.</span><span class="s1">LogLevelEnum</span><span class="s0">.</span><span class="s1">INFO</span><span class="s0">,</span><span class="s1">warn</span><span class="s0">:</span><span class="s1">n</span><span class="s0">.</span><span class="s1">LogLevelEnum</span><span class="s0">.</span><span class="s1">WARN</span><span class="s0">,</span><span class="s1">error</span><span class="s0">:</span><span class="s1">n</span><span class="s0">.</span><span class="s1">LogLevelEnum</span><span class="s0">.</span><span class="s1">ERROR</span><span class="s0">,</span><span class="s1">off</span><span class="s0">:</span><span class="s1">n</span><span class="s0">.</span><span class="s1">LogLevelEnum</span><span class="s0">.</span><span class="s1">OFF</span><span class="s0">};</span><span class="s4">let </span><span class="s1">h</span><span class="s0">,</span><span class="s1">l</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">LogService</span><span class="s0">=</span><span class="s4">class extends </span><span class="s1">o</span><span class="s0">.</span><span class="s1">Disposable</span><span class="s0">{</span><span class="s1">get logLevel</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">_logLevel</span><span class="s0">}</span><span class="s1">constructor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">super</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">=</span><span class="s1">e</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_logLevel</span><span class="s0">=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">LogLevelEnum</span><span class="s0">.</span><span class="s1">OFF</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_updateLogLevel</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">.</span><span class="s1">onSpecificOptionChange</span><span class="s0">(</span><span class="s2">&quot;logLevel&quot;</span><span class="s0">,(()=&gt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_updateLogLevel</span><span class="s0">()))),</span><span class="s1">h</span><span class="s0">=</span><span class="s4">this</span><span class="s0">}</span><span class="s1">_updateLogLevel</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_logLevel</span><span class="s0">=</span><span class="s1">a</span><span class="s0">[</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">.</span><span class="s1">rawOptions</span><span class="s0">.</span><span class="s1">logLevel</span><span class="s0">]}</span><span class="s1">_evalLazyOptionalParams</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">let </span><span class="s1">t</span><span class="s0">=</span><span class="s3">0</span><span class="s0">;</span><span class="s1">t</span><span class="s0">&lt;</span><span class="s1">e</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">t</span><span class="s0">++)</span><span class="s2">&quot;function&quot;</span><span class="s0">==</span><span class="s4">typeof </span><span class="s1">e</span><span class="s0">[</span><span class="s1">t</span><span class="s0">]&amp;&amp;(</span><span class="s1">e</span><span class="s0">[</span><span class="s1">t</span><span class="s0">]=</span><span class="s1">e</span><span class="s0">[</span><span class="s1">t</span><span class="s0">]())}</span><span class="s1">_log</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_evalLazyOptionalParams</span><span class="s0">(</span><span class="s1">i</span><span class="s0">),</span><span class="s1">e</span><span class="s0">.</span><span class="s1">call</span><span class="s0">(</span><span class="s1">console</span><span class="s0">,(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">.</span><span class="s1">options</span><span class="s0">.</span><span class="s1">logger</span><span class="s0">?</span><span class="s2">&quot;&quot;</span><span class="s0">:</span><span class="s2">&quot;xterm.js: &quot;</span><span class="s0">)+</span><span class="s1">t</span><span class="s0">,</span><span class="s1">...i</span><span class="s0">)}</span><span class="s1">trace</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">...t</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_logLevel</span><span class="s0">&lt;=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">LogLevelEnum</span><span class="s0">.</span><span class="s1">TRACE</span><span class="s0">&amp;&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_log</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">.</span><span class="s1">options</span><span class="s0">.</span><span class="s1">logger</span><span class="s0">?.</span><span class="s1">trace</span><span class="s0">.</span><span class="s1">bind</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">.</span><span class="s1">options</span><span class="s0">.</span><span class="s1">logger</span><span class="s0">)??</span><span class="s1">console</span><span class="s0">.</span><span class="s1">log</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)}</span><span class="s1">debug</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">...t</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_logLevel</span><span class="s0">&lt;=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">LogLevelEnum</span><span class="s0">.</span><span class="s1">DEBUG</span><span class="s0">&amp;&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_log</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">.</span><span class="s1">options</span><span class="s0">.</span><span class="s1">logger</span><span class="s0">?.</span><span class="s1">debug</span><span class="s0">.</span><span class="s1">bind</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">.</span><span class="s1">options</span><span class="s0">.</span><span class="s1">logger</span><span class="s0">)??</span><span class="s1">console</span><span class="s0">.</span><span class="s1">log</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)}</span><span class="s1">info</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">...t</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_logLevel</span><span class="s0">&lt;=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">LogLevelEnum</span><span class="s0">.</span><span class="s1">INFO</span><span class="s0">&amp;&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_log</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">.</span><span class="s1">options</span><span class="s0">.</span><span class="s1">logger</span><span class="s0">?.</span><span class="s1">info</span><span class="s0">.</span><span class="s1">bind</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">.</span><span class="s1">options</span><span class="s0">.</span><span class="s1">logger</span><span class="s0">)??</span><span class="s1">console</span><span class="s0">.</span><span class="s1">info</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)}</span><span class="s1">warn</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">...t</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_logLevel</span><span class="s0">&lt;=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">LogLevelEnum</span><span class="s0">.</span><span class="s1">WARN</span><span class="s0">&amp;&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_log</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">.</span><span class="s1">options</span><span class="s0">.</span><span class="s1">logger</span><span class="s0">?.</span><span class="s1">warn</span><span class="s0">.</span><span class="s1">bind</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">.</span><span class="s1">options</span><span class="s0">.</span><span class="s1">logger</span><span class="s0">)??</span><span class="s1">console</span><span class="s0">.</span><span class="s1">warn</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)}</span><span class="s1">error</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">...t</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_logLevel</span><span class="s0">&lt;=</span><span class="s1">n</span><span class="s0">.</span><span class="s1">LogLevelEnum</span><span class="s0">.</span><span class="s1">ERROR</span><span class="s0">&amp;&amp;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_log</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">.</span><span class="s1">options</span><span class="s0">.</span><span class="s1">logger</span><span class="s0">?.</span><span class="s1">error</span><span class="s0">.</span><span class="s1">bind</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_optionsService</span><span class="s0">.</span><span class="s1">options</span><span class="s0">.</span><span class="s1">logger</span><span class="s0">)??</span><span class="s1">console</span><span class="s0">.</span><span class="s1">error</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)}};</span><span class="s1">t</span><span class="s0">.</span><span class="s1">LogService</span><span class="s0">=</span><span class="s1">l</span><span class="s0">=</span><span class="s1">s</span><span class="s0">([</span><span class="s1">r</span><span class="s0">(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">n</span><span class="s0">.</span><span class="s1">IOptionsService</span><span class="s0">)],</span><span class="s1">l</span><span class="s0">),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">setTraceLogger</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s1">h</span><span class="s0">=</span><span class="s1">e</span><span class="s0">},</span><span class="s1">t</span><span class="s0">.</span><span class="s1">traceCall</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s2">&quot;function&quot;</span><span class="s0">!=</span><span class="s4">typeof </span><span class="s1">i</span><span class="s0">.</span><span class="s1">value</span><span class="s0">)</span><span class="s4">throw new </span><span class="s1">Error</span><span class="s0">(</span><span class="s2">&quot;not supported&quot;</span><span class="s0">);</span><span class="s4">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">value</span><span class="s0">;</span><span class="s1">i</span><span class="s0">.</span><span class="s1">value</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">...e</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">h</span><span class="s0">.</span><span class="s1">logLevel</span><span class="s0">!==</span><span class="s1">n</span><span class="s0">.</span><span class="s1">LogLevelEnum</span><span class="s0">.</span><span class="s1">TRACE</span><span class="s0">)</span><span class="s4">return </span><span class="s1">s</span><span class="s0">.</span><span class="s1">apply</span><span class="s0">(</span><span class="s4">this</span><span class="s0">,</span><span class="s1">e</span><span class="s0">);</span><span class="s1">h</span><span class="s0">.</span><span class="s1">trace</span><span class="s0">(</span><span class="s2">`GlyphRenderer#</span><span class="s1">$</span><span class="s0">{</span><span class="s1">s</span><span class="s0">.</span><span class="s1">name</span><span class="s0">}</span><span class="s2">(</span><span class="s1">$</span><span class="s0">{</span><span class="s1">e</span><span class="s0">.</span><span class="s1">map</span><span class="s0">((</span><span class="s1">e</span><span class="s0">=&gt;</span><span class="s1">JSON</span><span class="s0">.</span><span class="s1">stringify</span><span class="s0">(</span><span class="s1">e</span><span class="s0">))).</span><span class="s1">join</span><span class="s0">(</span><span class="s2">&quot;, &quot;</span><span class="s0">)}</span><span class="s2">)`</span><span class="s0">);</span><span class="s4">const </span><span class="s1">t</span><span class="s0">=</span><span class="s1">s</span><span class="s0">.</span><span class="s1">apply</span><span class="s0">(</span><span class="s4">this</span><span class="s0">,</span><span class="s1">e</span><span class="s0">);</span><span class="s4">return </span><span class="s1">h</span><span class="s0">.</span><span class="s1">trace</span><span class="s0">(</span><span class="s2">`GlyphRenderer#</span><span class="s1">$</span><span class="s0">{</span><span class="s1">s</span><span class="s0">.</span><span class="s1">name</span><span class="s0">} </span><span class="s2">return`</span><span class="s0">,</span><span class="s1">t</span><span class="s0">),</span><span class="s1">t</span><span class="s0">}}},</span><span class="s3">726</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">)=&gt;{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">createDecorator</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getServiceDependencies</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">serviceRegistry</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">const </span><span class="s1">i</span><span class="s0">=</span><span class="s2">&quot;di$target&quot;</span><span class="s0">,</span><span class="s1">s</span><span class="s0">=</span><span class="s2">&quot;di$dependencies&quot;</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">serviceRegistry</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Map</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">getServiceDependencies</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">return </span><span class="s1">e</span><span class="s0">[</span><span class="s1">s</span><span class="s0">]||[]},</span><span class="s1">t</span><span class="s0">.</span><span class="s1">createDecorator</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">serviceRegistry</span><span class="s0">.</span><span class="s1">has</span><span class="s0">(</span><span class="s1">e</span><span class="s0">))</span><span class="s4">return </span><span class="s1">t</span><span class="s0">.</span><span class="s1">serviceRegistry</span><span class="s0">.</span><span class="s1">get</span><span class="s0">(</span><span class="s1">e</span><span class="s0">);</span><span class="s4">const </span><span class="s1">r</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">o</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s3">3</span><span class="s0">!==</span><span class="s1">arguments</span><span class="s0">.</span><span class="s1">length</span><span class="s0">)</span><span class="s4">throw new </span><span class="s1">Error</span><span class="s0">(</span><span class="s2">&quot;@IServiceName-decorator can only be used to decorate a parameter&quot;</span><span class="s0">);!</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">r</span><span class="s0">){</span><span class="s1">t</span><span class="s0">[</span><span class="s1">i</span><span class="s0">]===</span><span class="s1">t</span><span class="s0">?</span><span class="s1">t</span><span class="s0">[</span><span class="s1">s</span><span class="s0">].</span><span class="s1">push</span><span class="s0">({</span><span class="s1">id</span><span class="s0">:</span><span class="s1">e</span><span class="s0">,</span><span class="s1">index</span><span class="s0">:</span><span class="s1">r</span><span class="s0">}):(</span><span class="s1">t</span><span class="s0">[</span><span class="s1">s</span><span class="s0">]=[{</span><span class="s1">id</span><span class="s0">:</span><span class="s1">e</span><span class="s0">,</span><span class="s1">index</span><span class="s0">:</span><span class="s1">r</span><span class="s0">}],</span><span class="s1">t</span><span class="s0">[</span><span class="s1">i</span><span class="s0">]=</span><span class="s1">t</span><span class="s0">)}(</span><span class="s1">r</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s1">o</span><span class="s0">)};</span><span class="s4">return </span><span class="s1">r</span><span class="s0">.</span><span class="s1">toString</span><span class="s0">=()=&gt;</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">serviceRegistry</span><span class="s0">.</span><span class="s1">set</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">r</span><span class="s0">),</span><span class="s1">r</span><span class="s0">}},</span><span class="s3">97</span><span class="s0">:(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">,</span><span class="s1">i</span><span class="s0">)=&gt;{</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">t</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">IDecorationService</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">IUnicodeService</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">IOscLinkService</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">IOptionsService</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">ILogService</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">LogLevelEnum</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">IInstantiationService</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">ICharsetService</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">ICoreService</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">ICoreMouseService</span><span class="s0">=</span><span class="s1">t</span><span class="s0">.</span><span class="s1">IBufferService</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">const </span><span class="s1">s</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">726</span><span class="s0">);</span><span class="s4">var </span><span class="s1">r</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">IBufferService</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">createDecorator</span><span class="s0">)(</span><span class="s2">&quot;BufferService&quot;</span><span class="s0">),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">ICoreMouseService</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">createDecorator</span><span class="s0">)(</span><span class="s2">&quot;CoreMouseService&quot;</span><span class="s0">),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">ICoreService</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">createDecorator</span><span class="s0">)(</span><span class="s2">&quot;CoreService&quot;</span><span class="s0">),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">ICharsetService</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">createDecorator</span><span class="s0">)(</span><span class="s2">&quot;CharsetService&quot;</span><span class="s0">),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">IInstantiationService</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">createDecorator</span><span class="s0">)(</span><span class="s2">&quot;InstantiationService&quot;</span><span class="s0">),</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s1">e</span><span class="s0">[</span><span class="s1">e</span><span class="s0">.</span><span class="s1">TRACE</span><span class="s0">=</span><span class="s3">0</span><span class="s0">]=</span><span class="s2">&quot;TRACE&quot;</span><span class="s0">,</span><span class="s1">e</span><span class="s0">[</span><span class="s1">e</span><span class="s0">.</span><span class="s1">DEBUG</span><span class="s0">=</span><span class="s3">1</span><span class="s0">]=</span><span class="s2">&quot;DEBUG&quot;</span><span class="s0">,</span><span class="s1">e</span><span class="s0">[</span><span class="s1">e</span><span class="s0">.</span><span class="s1">INFO</span><span class="s0">=</span><span class="s3">2</span><span class="s0">]=</span><span class="s2">&quot;INFO&quot;</span><span class="s0">,</span><span class="s1">e</span><span class="s0">[</span><span class="s1">e</span><span class="s0">.</span><span class="s1">WARN</span><span class="s0">=</span><span class="s3">3</span><span class="s0">]=</span><span class="s2">&quot;WARN&quot;</span><span class="s0">,</span><span class="s1">e</span><span class="s0">[</span><span class="s1">e</span><span class="s0">.</span><span class="s1">ERROR</span><span class="s0">=</span><span class="s3">4</span><span class="s0">]=</span><span class="s2">&quot;ERROR&quot;</span><span class="s0">,</span><span class="s1">e</span><span class="s0">[</span><span class="s1">e</span><span class="s0">.</span><span class="s1">OFF</span><span class="s0">=</span><span class="s3">5</span><span class="s0">]=</span><span class="s2">&quot;OFF&quot;</span><span class="s0">}(</span><span class="s1">r</span><span class="s0">||(</span><span class="s1">t</span><span class="s0">.</span><span class="s1">LogLevelEnum</span><span class="s0">=</span><span class="s1">r</span><span class="s0">={})),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">ILogService</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">createDecorator</span><span class="s0">)(</span><span class="s2">&quot;LogService&quot;</span><span class="s0">),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">IOptionsService</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">createDecorator</span><span class="s0">)(</span><span class="s2">&quot;OptionsService&quot;</span><span class="s0">),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">IOscLinkService</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">createDecorator</span><span class="s0">)(</span><span class="s2">&quot;OscLinkService&quot;</span><span class="s0">),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">IUnicodeService</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">createDecorator</span><span class="s0">)(</span><span class="s2">&quot;UnicodeService&quot;</span><span class="s0">),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">IDecorationService</span><span class="s0">=(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">createDecorator</span><span class="s0">)(</span><span class="s2">&quot;DecorationService&quot;</span><span class="s0">)}},</span><span class="s1">t</span><span class="s0">={};</span><span class="s4">function </span><span class="s1">i</span><span class="s0">(</span><span class="s1">s</span><span class="s0">){</span><span class="s4">var </span><span class="s1">r</span><span class="s0">=</span><span class="s1">t</span><span class="s0">[</span><span class="s1">s</span><span class="s0">];</span><span class="s4">if</span><span class="s0">(</span><span class="s4">void </span><span class="s3">0</span><span class="s0">!==</span><span class="s1">r</span><span class="s0">)</span><span class="s4">return </span><span class="s1">r</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">;</span><span class="s4">var </span><span class="s1">o</span><span class="s0">=</span><span class="s1">t</span><span class="s0">[</span><span class="s1">s</span><span class="s0">]={</span><span class="s1">exports</span><span class="s0">:{}};</span><span class="s4">return </span><span class="s1">e</span><span class="s0">[</span><span class="s1">s</span><span class="s0">].</span><span class="s1">call</span><span class="s0">(</span><span class="s1">o</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">o</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">,</span><span class="s1">i</span><span class="s0">),</span><span class="s1">o</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">}</span><span class="s4">var </span><span class="s1">r</span><span class="s0">={};</span><span class="s4">return</span><span class="s0">(()=&gt;{</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s1">r</span><span class="s0">;</span><span class="s1">Object</span><span class="s0">.</span><span class="s1">defineProperty</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s2">&quot;__esModule&quot;</span><span class="s0">,{</span><span class="s1">value</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">}),</span><span class="s1">e</span><span class="s0">.</span><span class="s1">WebglAddon</span><span class="s0">=</span><span class="s4">void </span><span class="s3">0</span><span class="s0">;</span><span class="s4">const </span><span class="s1">t</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">345</span><span class="s0">),</span><span class="s1">s</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">859</span><span class="s0">),</span><span class="s1">o</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">399</span><span class="s0">),</span><span class="s1">n</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">666</span><span class="s0">),</span><span class="s1">a</span><span class="s0">=</span><span class="s1">i</span><span class="s0">(</span><span class="s3">776</span><span class="s0">);</span><span class="s4">class </span><span class="s1">h </span><span class="s4">extends </span><span class="s1">s</span><span class="s0">.</span><span class="s1">Disposable</span><span class="s0">{</span><span class="s1">constructor</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">o</span><span class="s0">.</span><span class="s1">isSafari</span><span class="s0">&amp;&amp;(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">o</span><span class="s0">.</span><span class="s1">getSafariVersion</span><span class="s0">)()&lt;</span><span class="s3">16</span><span class="s0">){</span><span class="s4">const </span><span class="s1">e</span><span class="s0">={</span><span class="s1">antialias</span><span class="s0">:!</span><span class="s3">1</span><span class="s0">,</span><span class="s1">depth</span><span class="s0">:!</span><span class="s3">1</span><span class="s0">,</span><span class="s1">preserveDrawingBuffer</span><span class="s0">:!</span><span class="s3">0</span><span class="s0">};</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">document</span><span class="s0">.</span><span class="s1">createElement</span><span class="s0">(</span><span class="s2">&quot;canvas&quot;</span><span class="s0">).</span><span class="s1">getContext</span><span class="s0">(</span><span class="s2">&quot;webgl2&quot;</span><span class="s0">,</span><span class="s1">e</span><span class="s0">))</span><span class="s4">throw new </span><span class="s1">Error</span><span class="s0">(</span><span class="s2">&quot;Webgl2 is only supported on Safari 16 and above&quot;</span><span class="s0">)}</span><span class="s4">super</span><span class="s0">(),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_preserveDrawingBuffer</span><span class="s0">=</span><span class="s1">e</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_onChangeTextureAtlas</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">(</span><span class="s4">new </span><span class="s1">t</span><span class="s0">.</span><span class="s1">EventEmitter</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">onChangeTextureAtlas</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_onChangeTextureAtlas</span><span class="s0">.</span><span class="s1">event</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_onAddTextureAtlasCanvas</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">(</span><span class="s4">new </span><span class="s1">t</span><span class="s0">.</span><span class="s1">EventEmitter</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">onAddTextureAtlasCanvas</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_onAddTextureAtlasCanvas</span><span class="s0">.</span><span class="s1">event</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_onRemoveTextureAtlasCanvas</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">(</span><span class="s4">new </span><span class="s1">t</span><span class="s0">.</span><span class="s1">EventEmitter</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">onRemoveTextureAtlasCanvas</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_onRemoveTextureAtlasCanvas</span><span class="s0">.</span><span class="s1">event</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_onContextLoss</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">(</span><span class="s4">new </span><span class="s1">t</span><span class="s0">.</span><span class="s1">EventEmitter</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">onContextLoss</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_onContextLoss</span><span class="s0">.</span><span class="s1">event</span><span class="s0">}</span><span class="s1">activate</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">const </span><span class="s1">i</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">_core</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">e</span><span class="s0">.</span><span class="s1">element</span><span class="s0">)</span><span class="s4">return void this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">(</span><span class="s1">i</span><span class="s0">.</span><span class="s1">onWillOpen</span><span class="s0">((()=&gt;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">activate</span><span class="s0">(</span><span class="s1">e</span><span class="s0">))));</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">=</span><span class="s1">e</span><span class="s0">;</span><span class="s4">const </span><span class="s1">r</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">coreService</span><span class="s0">,</span><span class="s1">o</span><span class="s0">=</span><span class="s1">i</span><span class="s0">.</span><span class="s1">optionsService</span><span class="s0">,</span><span class="s1">h</span><span class="s0">=</span><span class="s1">i</span><span class="s0">,</span><span class="s1">l</span><span class="s0">=</span><span class="s1">h</span><span class="s0">.</span><span class="s1">_renderService</span><span class="s0">,</span><span class="s1">c</span><span class="s0">=</span><span class="s1">h</span><span class="s0">.</span><span class="s1">_characterJoinerService</span><span class="s0">,</span><span class="s1">d</span><span class="s0">=</span><span class="s1">h</span><span class="s0">.</span><span class="s1">_charSizeService</span><span class="s0">,</span><span class="s1">_</span><span class="s0">=</span><span class="s1">h</span><span class="s0">.</span><span class="s1">_coreBrowserService</span><span class="s0">,</span><span class="s1">u</span><span class="s0">=</span><span class="s1">h</span><span class="s0">.</span><span class="s1">_decorationService</span><span class="s0">,</span><span class="s1">g</span><span class="s0">=</span><span class="s1">h</span><span class="s0">.</span><span class="s1">_logService</span><span class="s0">,</span><span class="s1">v</span><span class="s0">=</span><span class="s1">h</span><span class="s0">.</span><span class="s1">_themeService</span><span class="s0">;(</span><span class="s3">0</span><span class="s0">,</span><span class="s1">a</span><span class="s0">.</span><span class="s1">setTraceLogger</span><span class="s0">)(</span><span class="s1">g</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_renderer</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">(</span><span class="s4">new </span><span class="s1">n</span><span class="s0">.</span><span class="s1">WebglRenderer</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">c</span><span class="s0">,</span><span class="s1">d</span><span class="s0">,</span><span class="s1">_</span><span class="s0">,</span><span class="s1">r</span><span class="s0">,</span><span class="s1">u</span><span class="s0">,</span><span class="s1">o</span><span class="s0">,</span><span class="s1">v</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_preserveDrawingBuffer</span><span class="s0">)),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">((</span><span class="s3">0</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">forwardEvent</span><span class="s0">)(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_renderer</span><span class="s0">.</span><span class="s1">onContextLoss</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_onContextLoss</span><span class="s0">)),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">((</span><span class="s3">0</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">forwardEvent</span><span class="s0">)(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_renderer</span><span class="s0">.</span><span class="s1">onChangeTextureAtlas</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_onChangeTextureAtlas</span><span class="s0">)),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">((</span><span class="s3">0</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">forwardEvent</span><span class="s0">)(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_renderer</span><span class="s0">.</span><span class="s1">onAddTextureAtlasCanvas</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_onAddTextureAtlasCanvas</span><span class="s0">)),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">((</span><span class="s3">0</span><span class="s0">,</span><span class="s1">t</span><span class="s0">.</span><span class="s1">forwardEvent</span><span class="s0">)(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_renderer</span><span class="s0">.</span><span class="s1">onRemoveTextureAtlasCanvas</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_onRemoveTextureAtlasCanvas</span><span class="s0">)),</span><span class="s1">l</span><span class="s0">.</span><span class="s1">setRenderer</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_renderer</span><span class="s0">),</span><span class="s4">this</span><span class="s0">.</span><span class="s1">register</span><span class="s0">((</span><span class="s3">0</span><span class="s0">,</span><span class="s1">s</span><span class="s0">.</span><span class="s1">toDisposable</span><span class="s0">)((()=&gt;{</span><span class="s4">const </span><span class="s1">t</span><span class="s0">=</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">.</span><span class="s1">_core</span><span class="s0">.</span><span class="s1">_renderService</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">setRenderer</span><span class="s0">(</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_terminal</span><span class="s0">.</span><span class="s1">_core</span><span class="s0">.</span><span class="s1">_createRenderer</span><span class="s0">()),</span><span class="s1">t</span><span class="s0">.</span><span class="s1">handleResize</span><span class="s0">(</span><span class="s1">e</span><span class="s0">.</span><span class="s1">cols</span><span class="s0">,</span><span class="s1">e</span><span class="s0">.</span><span class="s1">rows</span><span class="s0">)})))}</span><span class="s1">get textureAtlas</span><span class="s0">(){</span><span class="s4">return this</span><span class="s0">.</span><span class="s1">_renderer</span><span class="s0">?.</span><span class="s1">textureAtlas</span><span class="s0">}</span><span class="s1">clearTextureAtlas</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">_renderer</span><span class="s0">?.</span><span class="s1">clearTextureAtlas</span><span class="s0">()}}</span><span class="s1">e</span><span class="s0">.</span><span class="s1">WebglAddon</span><span class="s0">=</span><span class="s1">h</span><span class="s0">})(),</span><span class="s1">r</span><span class="s0">})()))},</span><span class="s3">65606</span><span class="s0">:</span><span class="s1">e</span><span class="s0">=&gt;{</span><span class="s4">var </span><span class="s1">t</span><span class="s0">=</span><span class="s1">e</span><span class="s0">.</span><span class="s1">exports</span><span class="s0">={};</span><span class="s4">var </span><span class="s1">i</span><span class="s0">;</span><span class="s4">var </span><span class="s1">s</span><span class="s0">;</span><span class="s4">function </span><span class="s1">r</span><span class="s0">(){</span><span class="s4">throw new </span><span class="s1">Error</span><span class="s0">(</span><span class="s2">&quot;setTimeout has not been defined&quot;</span><span class="s0">)}</span><span class="s4">function </span><span class="s1">o</span><span class="s0">(){</span><span class="s4">throw new </span><span class="s1">Error</span><span class="s0">(</span><span class="s2">&quot;clearTimeout has not been defined&quot;</span><span class="s0">)}(</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">try</span><span class="s0">{</span><span class="s4">if</span><span class="s0">(</span><span class="s4">typeof </span><span class="s1">setTimeout</span><span class="s0">===</span><span class="s2">&quot;function&quot;</span><span class="s0">){</span><span class="s1">i</span><span class="s0">=</span><span class="s1">setTimeout</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">i</span><span class="s0">=</span><span class="s1">r</span><span class="s0">}}</span><span class="s4">catch</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s1">i</span><span class="s0">=</span><span class="s1">r</span><span class="s0">}</span><span class="s4">try</span><span class="s0">{</span><span class="s4">if</span><span class="s0">(</span><span class="s4">typeof </span><span class="s1">clearTimeout</span><span class="s0">===</span><span class="s2">&quot;function&quot;</span><span class="s0">){</span><span class="s1">s</span><span class="s0">=</span><span class="s1">clearTimeout</span><span class="s0">}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">s</span><span class="s0">=</span><span class="s1">o</span><span class="s0">}}</span><span class="s4">catch</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s1">s</span><span class="s0">=</span><span class="s1">o</span><span class="s0">}})();</span><span class="s4">function </span><span class="s1">n</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">i</span><span class="s0">===</span><span class="s1">setTimeout</span><span class="s0">){</span><span class="s4">return </span><span class="s1">setTimeout</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s3">0</span><span class="s0">)}</span><span class="s4">if</span><span class="s0">((</span><span class="s1">i</span><span class="s0">===</span><span class="s1">r</span><span class="s0">||!</span><span class="s1">i</span><span class="s0">)&amp;&amp;</span><span class="s1">setTimeout</span><span class="s0">){</span><span class="s1">i</span><span class="s0">=</span><span class="s1">setTimeout</span><span class="s0">;</span><span class="s4">return </span><span class="s1">setTimeout</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s3">0</span><span class="s0">)}</span><span class="s4">try</span><span class="s0">{</span><span class="s4">return </span><span class="s1">i</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s3">0</span><span class="s0">)}</span><span class="s4">catch</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">try</span><span class="s0">{</span><span class="s4">return </span><span class="s1">i</span><span class="s0">.</span><span class="s1">call</span><span class="s0">(</span><span class="s4">null</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s3">0</span><span class="s0">)}</span><span class="s4">catch</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">return </span><span class="s1">i</span><span class="s0">.</span><span class="s1">call</span><span class="s0">(</span><span class="s4">this</span><span class="s0">,</span><span class="s1">e</span><span class="s0">,</span><span class="s3">0</span><span class="s0">)}}}</span><span class="s4">function </span><span class="s1">a</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">s</span><span class="s0">===</span><span class="s1">clearTimeout</span><span class="s0">){</span><span class="s4">return </span><span class="s1">clearTimeout</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)}</span><span class="s4">if</span><span class="s0">((</span><span class="s1">s</span><span class="s0">===</span><span class="s1">o</span><span class="s0">||!</span><span class="s1">s</span><span class="s0">)&amp;&amp;</span><span class="s1">clearTimeout</span><span class="s0">){</span><span class="s1">s</span><span class="s0">=</span><span class="s1">clearTimeout</span><span class="s0">;</span><span class="s4">return </span><span class="s1">clearTimeout</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)}</span><span class="s4">try</span><span class="s0">{</span><span class="s4">return </span><span class="s1">s</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)}</span><span class="s4">catch</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">try</span><span class="s0">{</span><span class="s4">return </span><span class="s1">s</span><span class="s0">.</span><span class="s1">call</span><span class="s0">(</span><span class="s4">null</span><span class="s0">,</span><span class="s1">e</span><span class="s0">)}</span><span class="s4">catch</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s4">return </span><span class="s1">s</span><span class="s0">.</span><span class="s1">call</span><span class="s0">(</span><span class="s4">this</span><span class="s0">,</span><span class="s1">e</span><span class="s0">)}}}</span><span class="s4">var </span><span class="s1">h</span><span class="s0">=[];</span><span class="s4">var </span><span class="s1">l</span><span class="s0">=</span><span class="s4">false</span><span class="s0">;</span><span class="s4">var </span><span class="s1">c</span><span class="s0">;</span><span class="s4">var </span><span class="s1">d</span><span class="s0">=-</span><span class="s3">1</span><span class="s0">;</span><span class="s4">function </span><span class="s1">_</span><span class="s0">(){</span><span class="s4">if</span><span class="s0">(!</span><span class="s1">l</span><span class="s0">||!</span><span class="s1">c</span><span class="s0">){</span><span class="s4">return</span><span class="s0">}</span><span class="s1">l</span><span class="s0">=</span><span class="s4">false</span><span class="s0">;</span><span class="s4">if</span><span class="s0">(</span><span class="s1">c</span><span class="s0">.</span><span class="s1">length</span><span class="s0">){</span><span class="s1">h</span><span class="s0">=</span><span class="s1">c</span><span class="s0">.</span><span class="s1">concat</span><span class="s0">(</span><span class="s1">h</span><span class="s0">)}</span><span class="s4">else</span><span class="s0">{</span><span class="s1">d</span><span class="s0">=-</span><span class="s3">1</span><span class="s0">}</span><span class="s4">if</span><span class="s0">(</span><span class="s1">h</span><span class="s0">.</span><span class="s1">length</span><span class="s0">){</span><span class="s1">u</span><span class="s0">()}}</span><span class="s4">function </span><span class="s1">u</span><span class="s0">(){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">l</span><span class="s0">){</span><span class="s4">return</span><span class="s0">}</span><span class="s4">var </span><span class="s1">e</span><span class="s0">=</span><span class="s1">n</span><span class="s0">(</span><span class="s1">_</span><span class="s0">);</span><span class="s1">l</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s4">var </span><span class="s1">t</span><span class="s0">=</span><span class="s1">h</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s4">while</span><span class="s0">(</span><span class="s1">t</span><span class="s0">){</span><span class="s1">c</span><span class="s0">=</span><span class="s1">h</span><span class="s0">;</span><span class="s1">h</span><span class="s0">=[];</span><span class="s4">while</span><span class="s0">(++</span><span class="s1">d</span><span class="s0">&lt;</span><span class="s1">t</span><span class="s0">){</span><span class="s4">if</span><span class="s0">(</span><span class="s1">c</span><span class="s0">){</span><span class="s1">c</span><span class="s0">[</span><span class="s1">d</span><span class="s0">].</span><span class="s1">run</span><span class="s0">()}}</span><span class="s1">d</span><span class="s0">=-</span><span class="s3">1</span><span class="s0">;</span><span class="s1">t</span><span class="s0">=</span><span class="s1">h</span><span class="s0">.</span><span class="s1">length</span><span class="s0">}</span><span class="s1">c</span><span class="s0">=</span><span class="s4">null</span><span class="s0">;</span><span class="s1">l</span><span class="s0">=</span><span class="s4">false</span><span class="s0">;</span><span class="s1">a</span><span class="s0">(</span><span class="s1">e</span><span class="s0">)}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">nextTick</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">var </span><span class="s1">t</span><span class="s0">=</span><span class="s4">new </span><span class="s1">Array</span><span class="s0">(</span><span class="s1">arguments</span><span class="s0">.</span><span class="s1">length</span><span class="s0">-</span><span class="s3">1</span><span class="s0">);</span><span class="s4">if</span><span class="s0">(</span><span class="s1">arguments</span><span class="s0">.</span><span class="s1">length</span><span class="s0">&gt;</span><span class="s3">1</span><span class="s0">){</span><span class="s4">for</span><span class="s0">(</span><span class="s4">var </span><span class="s1">i</span><span class="s0">=</span><span class="s3">1</span><span class="s0">;</span><span class="s1">i</span><span class="s0">&lt;</span><span class="s1">arguments</span><span class="s0">.</span><span class="s1">length</span><span class="s0">;</span><span class="s1">i</span><span class="s0">++){</span><span class="s1">t</span><span class="s0">[</span><span class="s1">i</span><span class="s0">-</span><span class="s3">1</span><span class="s0">]=</span><span class="s1">arguments</span><span class="s0">[</span><span class="s1">i</span><span class="s0">]}}</span><span class="s1">h</span><span class="s0">.</span><span class="s1">push</span><span class="s0">(</span><span class="s4">new </span><span class="s1">g</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">));</span><span class="s4">if</span><span class="s0">(</span><span class="s1">h</span><span class="s0">.</span><span class="s1">length</span><span class="s0">===</span><span class="s3">1</span><span class="s0">&amp;&amp;!</span><span class="s1">l</span><span class="s0">){</span><span class="s1">n</span><span class="s0">(</span><span class="s1">u</span><span class="s0">)}};</span><span class="s4">function </span><span class="s1">g</span><span class="s0">(</span><span class="s1">e</span><span class="s0">,</span><span class="s1">t</span><span class="s0">){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">fun</span><span class="s0">=</span><span class="s1">e</span><span class="s0">;</span><span class="s4">this</span><span class="s0">.</span><span class="s1">array</span><span class="s0">=</span><span class="s1">t</span><span class="s0">}</span><span class="s1">g</span><span class="s0">.</span><span class="s1">prototype</span><span class="s0">.</span><span class="s1">run</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">this</span><span class="s0">.</span><span class="s1">fun</span><span class="s0">.</span><span class="s1">apply</span><span class="s0">(</span><span class="s4">null</span><span class="s0">,</span><span class="s4">this</span><span class="s0">.</span><span class="s1">array</span><span class="s0">)};</span><span class="s1">t</span><span class="s0">.</span><span class="s1">title</span><span class="s0">=</span><span class="s2">&quot;browser&quot;</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">browser</span><span class="s0">=</span><span class="s4">true</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">env</span><span class="s0">={};</span><span class="s1">t</span><span class="s0">.</span><span class="s1">argv</span><span class="s0">=[];</span><span class="s1">t</span><span class="s0">.</span><span class="s1">version</span><span class="s0">=</span><span class="s2">&quot;&quot;</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">versions</span><span class="s0">={};</span><span class="s4">function </span><span class="s1">v</span><span class="s0">(){}</span><span class="s1">t</span><span class="s0">.</span><span class="s1">on</span><span class="s0">=</span><span class="s1">v</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">addListener</span><span class="s0">=</span><span class="s1">v</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">once</span><span class="s0">=</span><span class="s1">v</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">off</span><span class="s0">=</span><span class="s1">v</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">removeListener</span><span class="s0">=</span><span class="s1">v</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">removeAllListeners</span><span class="s0">=</span><span class="s1">v</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">emit</span><span class="s0">=</span><span class="s1">v</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">prependListener</span><span class="s0">=</span><span class="s1">v</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">prependOnceListener</span><span class="s0">=</span><span class="s1">v</span><span class="s0">;</span><span class="s1">t</span><span class="s0">.</span><span class="s1">listeners</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">return</span><span class="s0">[]};</span><span class="s1">t</span><span class="s0">.</span><span class="s1">binding</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">throw new </span><span class="s1">Error</span><span class="s0">(</span><span class="s2">&quot;process.binding is not supported&quot;</span><span class="s0">)};</span><span class="s1">t</span><span class="s0">.</span><span class="s1">cwd</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return</span><span class="s2">&quot;/&quot;</span><span class="s0">};</span><span class="s1">t</span><span class="s0">.</span><span class="s1">chdir</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(</span><span class="s1">e</span><span class="s0">){</span><span class="s4">throw new </span><span class="s1">Error</span><span class="s0">(</span><span class="s2">&quot;process.chdir is not supported&quot;</span><span class="s0">)};</span><span class="s1">t</span><span class="s0">.</span><span class="s1">umask</span><span class="s0">=</span><span class="s4">function</span><span class="s0">(){</span><span class="s4">return </span><span class="s3">0</span><span class="s0">}}}]);</span></pre>
</body>
</html>