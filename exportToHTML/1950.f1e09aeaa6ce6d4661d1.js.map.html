<html>
<head>
<title>1950.f1e09aeaa6ce6d4661d1.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #bcbec4;}
.s1 { color: #6aab73;}
.s2 { color: #2aacb8;}
.s3 { color: #cf8e6d;}
.ln { color: #4b5059; font-weight: normal; font-style: normal; }
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
1950.f1e09aeaa6ce6d4661d1.js.map</font>
</center></td></tr></table>
<pre><a name="l1"><span class="ln">1    </span></a><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;file&quot;</span><span class="s0">:</span><span class="s1">&quot;1950.f1e09aeaa6ce6d4661d1.js?v=f1e09aeaa6ce6d4661d1&quot;</span><span class="s0">,</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAA4C;AACN;AACA;AACiB;;AAEvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,UAAU;AACrB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA,YAAY,4BAAQ;AACpB,SAAS,4BAAQ,CAAC,+BAAW,YAAY,gCAAiB;AAC1D,CAAC;;AAED,sDAAe,KAAK,EAAC;;;;;;;ACzBU;;AAE/B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oEAAoE,WAAW;AAC/E;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oEAAoE,WAAW;AAC/E;AACA;AACA;AACA;AACO;AACP,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,+BAA+B,uBAAU;;AAEzC;AACA,+BAA+B,uBAAU;;AAEzC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,yBAAY;AACrB,mBAAmB,uBAAU;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,mBAAM;AACjB;AACA;AACA;AACA,WAAW,qBAAQ;AACnB,aAAa,sBAAS;AACtB,KAAK;AACL;AACA;AACA;AACA,WAAW,qBAAQ;AACnB,aAAa,sBAAS;AACtB,KAAK;AACL;AACA;AACA;AACA;AACA,IAAI,sBAAM;AACV;AACA;AACA,QAAQ;AACR;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,sBAAM;AACd;AACA,SAAS;AACT;AACA;AACA,MAAM,sBAAM,CAAC,mBAAM;AACnB;AACA;AACA,MAAM,sBAAM,CAAC,mBAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAQ,0BAAa;AACrB;AACA,MAAM;AACN;AACA;AACA,kCAAkC,CAAC,0BAAa,YAAY;AAC5D;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,0BAAa;AACrB;AACA;;AAEA;AACA;AACA;AACA,eAAe,mBAAM;AACrB;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,mBAAM;AACnB;AACA;AACA;AACA;AACA;AACA,aAAa,mBAAM;AACnB;AACA;AACA;AACA;AACA;AACA,aAAa,eAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA,IAAI,sBAAM;AACV;AACA;AACA;AACA,KAAK;;AAEL,IAAI,sBAAM;AACV;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA,MAAM,sBAAM;AACZ;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA,SAAS,yBAAY;AACrB,mBAAmB,uBAAU;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,qBAAQ;AACnB;AACA;AACA;AACA;AACA,IAAI,qBAAQ;AACZ;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,eAAe,cAAc;AAC7B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS,0BAAa;AACtB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAAS,0BAAa;AACtB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,qBAAQ;AAC1B;AACA;AACA;AACA,aAAa,qBAAQ;AACrB;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,kBAAkB,qBAAQ;AAC1B;AACA;AACA;AACA,aAAa,qBAAQ;AACrB;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,0BAAa;AACjE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;;AChgBA;;AAEmC;;AAEnC;;AAE0B;;;;;;;;;;;;;ACN1B;AACkC;AACI;AACtC;AACA;AACA,WAAW,gEAAC,YAAY,gEAAK;AAC7B;AACA;AACA,iEAAe,OAAO,EAAC;;;;;;;;;;;;ACRiB;;AAExC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,GAAG;AAChB;AACA;AACA;AACA,oBAAoB,QAAQ,IAAI,QAAQ;AACxC;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,kEAAS;AAClB;;AAEA,iEAAe,KAAK,EAAC;;;;;;;;;;;;;;;;;;;;;ACjCS;AAGA;AAIA;AAKA;AAWA;;AAE9B;AACA;AACA,0BAA0B,qEAAM;AAChC,sBAAsB,gBAAgB,KAAK;AAC3C;AACA,GAAG;AACH;AACA,2BAA2B,qEAAM;AACjC,KAAK;AACL,UAAU;AACV,gBAAgB,m1BAAm1B;AACn2B,kBAAkB,uhBAAuhB;AACziB;AACA,mCAAmC,qEAAM;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,cAAc,sGAAsG;AACpH,cAAc,uMAAuM;AACrN,cAAc;AACd;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA;AACA,KAAK;AACL,cAAc,kBAAkB,IAAI,QAAQ,IAAI,0IAA0I,IAAI,YAAY,oBAAoB,2IAA2I,qBAAqB,0BAA0B,2HAA2H,aAAa,sBAAsB,yBAAyB,IAAI,2IAA2I,IAAI,0BAA0B,IAAI,aAAa,IAAI,aAAa,oBAAoB,kCAAkC,KAAK,WAAW,qBAAqB,iBAAiB,IAAI,aAAa,IAAI,aAAa,qBAAqB,qKAAqK,IAAI,aAAa,IAAI,aAAa,IAAI,aAAa,IAAI,aAAa,IAAI,aAAa,qBAAqB,aAAa,IAAI,aAAa,qBAAqB,aAAa,IAAI,aAAa,yFAAyF,aAAa,IAAI,iBAAiB,IAAI,aAAa,sCAAsC,aAAa,IAAI,8BAA8B,IAAI,aAAa,qBAAqB,aAAa;AACrjD,sBAAsB,mDAAmD;AACzE,gCAAgC,qEAAM;AACtC;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA,KAAK;AACL,2BAA2B,qEAAM;AACjC;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,qEAAM;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,qEAAM;AACZ,iEAAiE;AACjE;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,kCAAkC,qEAAM;AACxC;AACA;AACA,UAAU;AACV;AACA;AACA,OAAO;AACP;AACA,gCAAgC,qEAAM;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,6BAA6B,qEAAM;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,6BAA6B,qEAAM;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,4BAA4B,qEAAM;AAClC;AACA;AACA,OAAO;AACP;AACA,8BAA8B,qEAAM;AACpC;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,OAAO;AACP;AACA,4BAA4B,qEAAM;AAClC;AACA,OAAO;AACP;AACA,iCAAiC,qEAAM;AACvC;AACA;AACA,OAAO;AACP;AACA,qCAAqC,qEAAM;AAC3C;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,oCAAoC,qEAAM;AAC1C;AACA;AACA;AACA,OAAO;AACP;AACA,kCAAkC,qEAAM;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,4BAA4B,qEAAM;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,kBAAkB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA,gBAAgB;AAChB;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,OAAO;AACP;AACA,2BAA2B,qEAAM;AACjC;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,OAAO;AACP;AACA,6BAA6B,qEAAM;AACnC;AACA,OAAO;AACP;AACA,gCAAgC,qEAAM;AACtC;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,OAAO;AACP;AACA,qCAAqC,qEAAM;AAC3C;AACA;AACA,UAAU;AACV;AACA;AACA,OAAO;AACP,4DAA4D;AAC5D,gCAAgC,qEAAM;AACtC;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,OAAO;AACP;AACA,iCAAiC,qEAAM;AACvC;AACA,OAAO;AACP;AACA,sCAAsC,qEAAM;AAC5C;AACA,OAAO;AACP,iBAAiB;AACjB,qCAAqC,qEAAM;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,mqBAAmqB,eAAe,cAAc,2EAA2E,EAAE,WAAW,8OAA8O,EAAE,WAAW,6KAA6K,EAAE;AAClsC,oBAAoB,sBAAsB,mCAAmC,mBAAmB,mCAAmC,kBAAkB,mCAAmC,gBAAgB,uCAAuC,mBAAmB,mCAAmC,aAAa,mCAAmC,cAAc,wDAAwD,iBAAiB,2DAA2D,mBAAmB,2CAA2C,YAAY,2GAA2G,iBAAiB,+CAA+C,aAAa,iCAAiC,cAAc,+CAA+C,2BAA2B,uCAAuC,iBAAiB,mCAAmC,iBAAiB,mCAAmC,eAAe;AAChgC;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,EAAE,qEAAM;AACR;AACA;AACA;AACA,CAAC;AACD;AACA;;AAEA;AACuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,yEAAU;AACvB;AACA,oCAAoC,qEAAM,UAAU,yEAAc;AAClE,oCAAoC,qEAAM;AAC1C;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA,8CAA8C,IAAI;AAClD;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,CAAC;AACD,oCAAoC,qEAAM;AAC1C;AACA;AACA;AACA;AACA,CAAC;AACD,kCAAkC,qEAAM;AACxC;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;AACD,4CAA4C,qEAAM;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,OAAO;AAC/B,2BAA2B,uEAAK;AAChC;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,kBAAkB;AAClB,6BAA6B,qEAAM;AACnC,EAAE,8DAAG;AACL,EAAE,oEAAK;AACP,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,EAAE,8DAAG;AACL;AACA;AACA;AACA;AACA,MAAM,8DAAG;AACT;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAM;AACN;AACA,EAAE,8DAAG;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAM;AACN;AACA,iCAAiC,qEAAM;AACvC;AACA;AACA,CAAC;AACD,mCAAmC,qEAAM;AACzC;AACA;AACA;AACA,CAAC;AACD,iCAAiC,qEAAM;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,oCAAoC,qEAAM;AAC1C;AACA,CAAC;AACD,gCAAgC,qEAAM;AACtC;AACA,CAAC;AACD,+BAA+B,qEAAM;AACrC;AACA,CAAC;AACD,+BAA+B,qEAAM;AACrC;AACA,CAAC;AACD,+BAA+B,qEAAM;AACrC;AACA,CAAC;AACD,gCAAgC,qEAAM;AACtC,iCAAiC,qEAAM;AACvC;AACA,CAAC;AACD;AACA,6BAA6B,qEAAM,OAAO,wEAAS;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACiC;AACjC,2BAA2B,qEAAM;AACjC,mBAAmB,uDAAc;AACjC;AACA;AACA;AACA,SAAS,uDAAW;AACpB,CAAC;AACD,gCAAgC,qEAAM;AACtC,mBAAmB;AACnB,aAAa;AACb;AACA;AACA,YAAY;AACZ;AACA;AACA,aAAa;AACb;;;;AAIA;AACA,YAAY;AACZ,aAAa;AACb;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,YAAY;AACZ;;AAEA;AACA,cAAc;AACd;AACA;;AAEA;AACA,cAAc;AACd;AACA;;AAEA;AACA,wBAAwB;AACxB;AACA;AACA,0BAA0B;AAC1B,cAAc;AACd;AACA;AACA;;AAEA;AACA;AACA,wBAAwB;AACxB;AACA;;AAEA;AACA,eAAe;AACf,YAAY;AACZ,cAAc;AACd;AACA;AACA;;AAEA;AACA,YAAY;AACZ;;AAEA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb,IAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA,kBAAkB;AAClB,wBAAwB;AACxB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;;AAEA;AACwC;;AAExC;AACA,oCAAoC,qEAAM;AAC1C;AACA;AACA,GAAG;AACH,CAAC;AACD,gCAAgC,qEAAM;AACtC,EAAE,8DAAG;AACL;AACA;AACA,CAAC;AACD,kCAAkC,qEAAM;AACxC;AACA;AACA,CAAC;AACD,kCAAkC,qEAAM;AACxC;AACA;AACA,CAAC;AACD,iCAAiC,qEAAM;AACvC;AACA;AACA,CAAC;AACD,+BAA+B,qEAAM;AACrC;AACA;AACA,CAAC;AACD,4BAA4B,qEAAM;AAClC;AACA;AACA,CAAC;AACD,6BAA6B,qEAAM;AACnC;AACA;AACA,CAAC;AACD,4BAA4B,qEAAM;AAClC;AACA;AACA,CAAC;AACD,2BAA2B,qEAAM;AACjC;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,cAAc,yEAAU;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,WAAW;AACX;AACA,qEAAM;AACN,sCAAsC,qEAAM;AAC5C;AACA;AACA;AACA,YAAY,sBAAsB,kBAAkB;AACpD,IAAI,8DAAG;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,CAAC;AACD;AACA,EAAE,8DAAG;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,8DAAG;AACP;AACA;AACA,QAAQ,8DAAG;AACX,+CAA+C,UAAU,KAAK,UAAU,EAAE,UAAU,EAAE,WAAW,EAAE,2BAA2B;AAC9H;AACA;AACA;AACA;AACA;AACA,QAAQ,8DAAG;AACX,oCAAoC,UAAU,iBAAiB,UAAU,WAAW,UAAU,YAAY,UAAU;AACpH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,8DAAG;AACT,6CAA6C,UAAU,gBAAgB,cAAc,iBAAiB,eAAe,QAAQ,MAAM;AACnI;AACA;AACA;AACA;AACA;AACA,MAAM,8DAAG;AACT,MAAM,8DAAG;AACT,MAAM,8DAAG;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,8DAAG;AACP,6BAA6B,UAAU,QAAQ,OAAO,QAAQ,OAAO,UAAU,QAAQ,EAAE,uBAAuB,QAAQ,wCAAwC;AAChK;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,8DAAG;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,8DAAG;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAM;AACN;AACA,EAAE,8DAAG;AACL,4CAA4C,UAAU,KAAK,gBAAgB,KAAK,gBAAgB,SAAS,mBAAmB;AAC5H;AACA;AACA,EAAE,8DAAG;AACL;AACA;AACA;AACA;AACA,IAAI,8DAAG;AACP;AACA,IAAI,8DAAG;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,wBAAwB;AACtC,cAAc,SAAS;AACvB;AACA;AACA;AACA,QAAQ,8DAAG;AACX;AACA,MAAM,8DAAG;AACT,2CAA2C,UAAU,OAAO,WAAW,WAAW,GAAG,GAAG,IAAI,GAAG,gBAAgB,GAAG,gBAAgB,YAAY,WAAW,SAAS,OAAO,EAAE,QAAQ;AACnL;AACA;AACA;AACA;AACA,QAAQ,8DAAG;AACX,iDAAiD,UAAU,eAAe,cAAc,kBAAkB,cAAc,EAAE,WAAW,UAAU,SAAS,QAAQ,QAAQ,YAAY,WAAW,OAAO,cAAc,IAAI,cAAc,EAAE,sBAAsB,gCAAgC,0CAA0C;AACxU;AACA;AACA;AACA,QAAQ,8DAAG;AACX,iDAAiD,SAAS,cAAc,aAAa,EAAE,QAAQ,EAAE,UAAU,MAAM,aAAa,IAAI,aAAa,EAAE,qBAAqB,+BAA+B,0CAA0C;AAC/O;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,8DAAG;AACT;AACA;AACA,EAAE,8DAAG;AACL,uCAAuC,UAAU,KAAK,gBAAgB,KAAK,gBAAgB,SAAS,mBAAmB;AACvH;AACA;AACA,qEAAM;AACN,6BAA6B,yBAAyB,IAAI,oCAAoC;AAC9F;AACA,YAAY,sBAAsB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,yBAAyB,sBAAsB,wBAAwB;AAChF;AACA;AACA,WAAW;AACX;AACA,qEAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,8DAAG;AACL,UAAU,yBAAyB;AACnC;AACA;AACA,WAAW;AACX;AACA,qEAAM;;AAEN;AAC8D;;AAE9D;AAC4B;AAC5B;AACA;AACA;AACA;AACA;AACA,qEAAM;AACN;AACA,aAAa,oDAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAM;AACN,kCAAkC,qEAAM;AACxC;AACA;AACA;AACA;AACA,MAAM,uEAAQ,CAAC,yEAAU;AACzB;AACA,IAAI,8DAAG;AACP;AACA;AACA,aAAa,mFAAoB,CAAC,6EAAc;AAChD;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;AAEA;AACyD;;AAEzD;AACA,qCAAqC,qEAAM;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,qEAAM;AAC1C;AACA;AACA,IAAI,8DAAG,6BAA6B,UAAU;AAC9C;AACA;AACA;AACA,yBAAyB,SAAS,UAAU,IAAI,GAAG,GAAG,GAAG,YAAY,GAAG,cAAc,EAAE,OAAO;AAC/F,CAAC;;AAED;AACA;AACA;AACA,sCAAsC,qEAAM;AAC5C,kBAAkB,yEAAU;AAC5B,wBAAwB,uEAAQ;AAChC,uDAAuD,yEAAU;AACjE;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,oDAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,MAAM,yEAAU;AAChB;AACA;AACA;AACA;AACA,qEAAM;AACN,wCAAwC,qEAAM;AAC9C,EAAE,8DAAG;AACL;AACA,qBAAqB,yEAAU;AAC/B,UAAU,2BAA2B,EAAE,qFAAuB;AAC9D;AACA;AACA;AACA;AACA;AACA,kBAAkB,wEAAa;AAC/B,MAAM,8DAAG;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,EAAE,IAAI,iCAAiC;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,wEAAa;AAC/B;AACA;AACA;AACA,sCAAsC,EAAE,IAAI,EAAE;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,wEAAa;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,EAAE,IAAI,EAAE;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,wEAAa;AAC/B;AACA;AACA;AACA,sCAAsC,EAAE,IAAI,EAAE;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,wEAAa;AAC/B;AACA;AACA;AACA,sCAAsC,EAAE,IAAI,EAAE;AAC9C;AACA,CAAC;AACD,kCAAkC,qEAAM;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,mCAAmC,qEAAM;AACzC,EAAE,8DAAG;AACL,kBAAkB;AAClB,kBAAkB;AAClB,oBAAoB,QAAQ,IAAI,QAAQ,IAAI,YAAY,IAAI,YAAY;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,8DAAG,kCAAkC,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE;AACnE;AACA,IAAI;AACJ;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,IAAI,8DAAG,8BAA8B,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,KAAK,QAAQ;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,CAAC;AACD,yCAAyC,qEAAM;AAC/C,EAAE,8DAAG;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,CAAC;AACD,iCAAiC,qEAAM;AACvC;AACA,EAAE,8DAAG;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,8DAAG;AACP;AACA;AACA;AACA;AACA,IAAI,8DAAG;AACP;AACA;AACA;AACA;AACA,cAAc,qDAAU;AACxB;AACA;AACA;AACA,UAAU,OAAO,EAAE,wFAA0B;AAC7C,uBAAuB,mDAAI;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,yEAAU,oCAAoC,yEAAU;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACuC;;AAEvC;AACA,qDAAqD,qEAAM;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,qCAAqC,qEAAM;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,YAAY;AACpB,QAAQ,mBAAmB;AAC3B,QAAQ,+BAA+B;AACvC,QAAQ,2BAA2B;AACnC,QAAQ,gBAAgB;AACxB;AACA,QAAQ,0BAA0B;AAClC,QAAQ,yCAAyC;AACjD,QAAQ,8BAA8B;AACtC,QAAQ,sBAAsB;AAC9B;AACA,QAAQ,iCAAiC;AACzC,QAAQ,yCAAyC;AACjD,QAAQ,yBAAyB;AACjC;AACA,QAAQ,kBAAkB;AAC1B,QAAQ,0BAA0B;AAClC,QAAQ,kCAAkC;AAC1C,QAAQ;AACR;AACA;AACA;AACA;AACA,QAAQ,mBAAmB;AAC3B,QAAQ,2BAA2B;AACnC,QAAQ,0BAA0B;AAClC,QAAQ,iCAAiC;AACzC,QAAQ,yBAAyB;AACjC,QAAQ;AACR;AACA;AACA;AACA;AACA,QAAQ,YAAY;AACpB,QAAQ,yBAAyB;AACjC,QAAQ,iCAAiC;AACzC,QAAQ;AACR;AACA;AACA;AACA;AACA,QAAQ,YAAY;AACpB,QAAQ,wBAAwB;AAChC,QAAQ,iCAAiC;AACzC,QAAQ;AACR;AACA;AACA;AACA;AACA,QAAQ,gBAAgB;AACxB,QAAQ,oBAAoB;AAC5B,QAAQ,6BAA6B;AACrC,QAAQ;AACR;AACA;AACA;AACA;AACA,QAAQ,mBAAmB;AAC3B,QAAQ,2BAA2B;AACnC,QAAQ,mCAAmC;AAC3C,QAAQ,2BAA2B;AACnC,QAAQ,0BAA0B;AAClC,QAAQ,iCAAiC;AACzC,QAAQ,4CAA4C;AACpD,QAAQ,oCAAoC;AAC5C,QAAQ,yBAAyB;AACjC,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA,QAAQ,oBAAoB;AAC5B;AACA,QAAQ,oBAAoB;AAC5B,QAAQ,2BAA2B;AACnC;AACA,QAAQ,oCAAoC;AAC5C,QAAQ,6BAA6B;AACrC;AACA,QAAQ,0BAA0B;AAClC,QAAQ,iCAAiC;AACzC;AACA,QAAQ,4CAA4C;AACpD,QAAQ,mCAAmC;AAC3C,QAAQ;AACR;AACA;AACA;AACA;AACA,QAAQ,YAAY;AACpB,QAAQ,wBAAwB;AAChC,QAAQ;AACR;AACA;AACA;AACA;AACA,QAAQ,YAAY;AACpB,QAAQ,gBAAgB;AACxB,QAAQ;AACR;AACA;AACA;AACA;AACA,QAAQ,gBAAgB;AACxB,QAAQ,oBAAoB;AAC5B,QAAQ;AACR;AACA;AACA;AACA;AACA,QAAQ,gBAAgB;AACxB,QAAQ,YAAY;AACpB,QAAQ;AACR;AACA;AACA;AACA;AACA,QAAQ,2BAA2B;AACnC,QAAQ,2BAA2B;AACnC,QAAQ,mCAAmC;AAC3C,QAAQ,2BAA2B;AACnC,QAAQ,0BAA0B;AAClC,QAAQ,iCAAiC;AACzC,QAAQ,4CAA4C;AACpD;AACA,QAAQ,oCAAoC;AAC5C,QAAQ;AACR;AACA;AACA;AACA;AACA,QAAQ,mBAAmB;AAC3B,QAAQ,2BAA2B;AACnC;AACA,QAAQ,mCAAmC;AAC3C,QAAQ,4CAA4C;AACpD,QAAQ,oCAAoC;AAC5C,QAAQ,yBAAyB;AACjC,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA,QAAQ,2BAA2B;AACnC;AACA,QAAQ,oCAAoC;AAC5C,QAAQ,6BAA6B;AACrC;AACA,QAAQ,0BAA0B;AAClC,QAAQ,iCAAiC;AACzC;AACA,QAAQ,4CAA4C;AACpD,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA,QAAQ,oBAAoB;AAC5B;AACA,QAAQ,oBAAoB;AAC5B,QAAQ,2BAA2B;AACnC;AACA,QAAQ,oCAAoC;AAC5C,QAAQ,4CAA4C;AACpD,QAAQ,mCAAmC;AAC3C,QAAQ;AACR;AACA;AACA,YAAY,YAAY;AACxB,CAAC;;AAED;AACA;AACA;AACA;AACA,qEAAM;AACN;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,qEAAM;AACN;;AAEA;AACA;AACA;AACA;AACA,qEAAM;AACN;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,qEAAM;AACN;AACA;AACA;AACA,qEAAM;AACN;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,kBAAkB,uBAAuB;AACzC;AACA;AACA;AACA;AACA;AACA,QAAQ,+BAA+B;AACvC,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,qEAAM;;AAEN;AACA,oCAAoC,qEAAM;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,CAAC;AACD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACuC;AACvC,kCAAkC,qEAAM;AACxC,kBAAkB,yEAAU;AAC5B;AACA,8CAA8C,uEAAQ;AACtD;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,WAAW,yEAAU;AACrB;AACA,MAAM,2EAAY,CAAC,6EAAc;AACjC;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,IAAI;AACJ;AACA,0BAA0B,2EAAY,CAAC,6EAAc;AACrD;AACA;AACA;AACA;AACA,MAAM,uEAAQ;AACd;AACA,eAAe,oDAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,YAAY,qEAAM;AAClB;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,CAAC;AACD,uCAAuC,qEAAM;AAC7C;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,qEAAM;;AAEN;AACA,2BAA2B,qEAAM;AACjC,8CAA8C,yEAAU;AACxD;AACA;AACA;AACA,UAAU,8BAA8B;AACxC;AACA;AACA;AACA;AACA;AACA,EAAE,8DAAG;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;AAEA;AACA,kCAAkC,qEAAM;AACxC;AACA;AACA;AACA;AACA,CAAC;AACD,yCAAyC,qEAAM;AAC/C,YAAY,6CAA6C,EAAE,2BAA2B,EAAE;AACxF;AACA,IAAI;AACJ,CAAC;AACD,+BAA+B,qEAAM;AACrC,UAAU,iBAAiB;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,gBAAgB;AACtB,MAAM,iBAAiB;AACvB,MAAM,iBAAiB;AACvB,MAAM;AACN;AACA,EAAE,8DAAG;AACL;AACA;AACA;AACA;AACA,IAAI,8DAAG;AACP;AACA;AACA;AACA,CAAC;AACD,6BAA6B,qEAAM;AACnC;AACA;AACA;AACA,MAAM,gBAAgB;AACtB,MAAM,gBAAgB;AACtB,MAAM,iBAAiB;AACvB,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,8BAA8B,qEAAM;AACpC,UAAU,iBAAiB;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,YAAY;AAClB,MAAM,gBAAgB;AACtB,MAAM,iBAAiB;AACvB,MAAM,iBAAiB;AACvB,MAAM,aAAa;AACnB,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,kCAAkC,qEAAM;AACxC,UAAU,iBAAiB;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,0CAA0C,qEAAM;AAChD,UAAU,iBAAiB;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,iBAAiB;AACvB,MAAM,YAAY;AAClB,MAAM,aAAa;AACnB,MAAM,kBAAkB;AACxB,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,iCAAiC,qEAAM;AACvC,UAAU,iBAAiB;AAC3B;AACA;AACA;AACA,MAAM,qBAAqB;AAC3B,MAAM,oBAAoB;AAC1B,MAAM,yBAAyB;AAC/B,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,gCAAgC,qEAAM;AACtC,UAAU,iBAAiB;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,oBAAoB;AAC1B,MAAM,oBAAoB;AAC1B,MAAM,yBAAyB;AAC/B,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,gCAAgC,qEAAM;AACtC,UAAU,iBAAiB;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,qBAAqB;AAC3B,MAAM,wBAAwB;AAC9B,MAAM,qBAAqB;AAC3B,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,oCAAoC,qEAAM;AAC1C,UAAU,iBAAiB;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,gBAAgB;AACtB,MAAM,oBAAoB;AAC1B,MAAM,yBAAyB;AAC/B,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,2CAA2C,qEAAM;AACjD,UAAU,iBAAiB;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,YAAY;AAClB,MAAM,oBAAoB;AAC1B,MAAM,iBAAiB;AACvB,MAAM,qBAAqB;AAC3B,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,+BAA+B,qEAAM;AACrC,UAAU,iBAAiB;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,2BAA2B,qEAAM;AACjC,UAAU,8BAA8B;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,8DAAG,+BAA+B,QAAQ;AAChD,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,gCAAgC,qEAAM;AACtC,UAAU,8BAA8B;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,8DAAG,+BAA+B,QAAQ;AAChD,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,gCAAgC,qEAAM;AACtC,UAAU,WAAW;AACrB,EAAE,8DAAG;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,8DAAG,+BAA+B,QAAQ;AAChD,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA,oCAAoC,qEAAM;AAC1C;AACA,GAAG;AACH,qCAAqC,qEAAM;AAC3C;AACA,GAAG;AACH;AACA,IAAI,8DAAG;AACP;AACA,IAAI;AACJ;AACA;AACA;AACA,IAAI,8DAAG;AACP;AACA,IAAI;AACJ;AACA;AACA;AACA,IAAI,8DAAG;AACP;AACA,IAAI;AACJ;AACA;AACA;AACA,IAAI,8DAAG;AACP;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,qEAAM;AACN,oCAAoC,qEAAM;AAC1C;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,EAAE,8DAAG;AACL;AACA,eAAe;AACf,MAAM,uEAAQ,CAAC,yEAAU;AACzB;AACA,eAAe,oDAAO;AACtB;AACA;AACA;AACA;AACA,EAAE,8DAAG;AACL;AACA;AACA;AACA;AACA;AACA,MAAM,uEAAQ,CAAC,yEAAU;AACzB;AACA,eAAe,oDAAO;AACtB;AACA;AACA;AACA;AACA;AACA,EAAE,oDAAO;AACT;AACA;AACA;AACA;AACA,EAAE,oDAAO;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,8BAA8B,qEAAM;AACpC,UAAU,iBAAiB;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,8BAA8B,qEAAM;AACpC,UAAU,8BAA8B;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,8DAAG;AACL;AACA;AACA,IAAI,8DAAG;AACP;AACA;AACA;AACA,CAAC;AACD,mCAAmC,qEAAM;AACzC,UAAU,8BAA8B;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,8DAAG;AACL;AACA;AACA,IAAI,8DAAG;AACP;AACA;AACA;AACA,CAAC;AACD,iCAAiC,qEAAM;AACvC,UAAU,iBAAiB;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,YAAY;AAClB,MAAM,YAAY;AAClB,MAAM,aAAa;AACnB,MAAM,aAAa;AACnB,MAAM,YAAY;AAClB,MAAM,aAAa;AACnB,MAAM,gBAAgB;AACtB,MAAM,iBAAiB;AACvB,MAAM,cAAc;AACpB,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,4BAA4B,qEAAM;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,+BAA+B,qEAAM;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,0BAA0B,qEAAM;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,gCAAgC,qEAAM;AACtC;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,uEAAQ,CAAC,yEAAU;AACzB;AACA,eAAe,oDAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,yEAAU;AAClB,+BAA+B,+BAA+B;AAC9D,MAAM;AACN;AACA;AACA;AACA;AACA,EAAE,oDAAO;AACT;AACA,MAAM,uEAAQ,CAAC,yEAAU;AACzB;AACA,eAAe,oDAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,yEAAU;AAClB,iDAAiD,sBAAsB;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,uEAAQ,CAAC,yEAAU;AAC3B;AACA,iBAAiB,oDAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,QAAQ,yEAAU;AAClB,mDAAmD,sBAAsB;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,uEAAQ,CAAC,yEAAU;AAC3B;AACA,iBAAiB,oDAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,IAAI,oDAAO;AACX;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,oDAAO;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,oDAAO;AACX;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,IAAI,oDAAO;AACX;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,qEAAM;AACvC;AACA;AACA;AACA;AACA,QAAQ,yEAAU;AAClB;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,mCAAmC,qEAAM;AACzC;AACA,EAAE,8DAAG;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,iFAAkB;AACnC;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,wEAAS;AAClC;AACA;AACA;AACA,qEAAM;AACN;AACA;AACA;AACA;AACA;AACA,kBAAkB,wEAAS;AAC3B,gDAAgD,iBAAiB;AACjE;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,qEAAM;AACN;AACA;AACA;AACA;AACA,oBAAoB,wEAAS;AAC7B,mCAAmC,iBAAiB;AACpD;AACA;AACA;AACA;AACA,qEAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAM;AACN;AACA;AACA;AACA,qEAAM;AACN;AACA;AACA;AACA,qEAAM;AACN;AACA,gBAAgB,6EAAc;AAC9B;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,0BAA0B;AACtC,YAAY,8EAA8E;AAC1F,YAAY;AACZ;AACA;AACA;AACA,YAAY,2CAA2C;AACvD;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,oBAAoB,UAAU;AACrE;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,cAAc,yCAAyC;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAM;;AAEN;AACA,kCAAkC,qEAAM;AACxC;AACA,CAAC;AACD,2BAA2B,qEAAM;AACjC,UAAU,6BAA6B,EAAE,wEAAS;AAClD;AACA;AACA;AACA,qBAAqB,oDAAQ;AAC7B;AACA,6CAA6C,oDAAQ,mDAAmD,oDAAQ;AAChH,gEAAgE,GAAG,OAAO,oDAAQ,SAAS,GAAG;AAC9F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,cAAc;AAC1B,IAAI,+EAAgB;AACpB,IAAI,8DAAG;AACP;AACA;AACA,SAAS,eAAe,EAAE,eAAe,EAAE,oBAAoB,EAAE,oBAAoB;AACrF;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAGE&quot;</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/lodash-es/union.js&quot;</span><span class="s0">,</span><span class="s1">&quot;webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/dagre-d3-es/src/graphlib/graph.js&quot;</span><span class="s0">,</span><span class="s1">&quot;webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/dagre-d3-es/src/graphlib/index.js&quot;</span><span class="s0">,</span><span class="s1">&quot;webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/khroma/dist/methods/channel.js&quot;</span><span class="s0">,</span><span class="s1">&quot;webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/lodash-es/clone.js&quot;</span><span class="s0">,</span><span class="s1">&quot;webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/mermaid/dist/chunks/mermaid.core/blockDiagram-JOT3LUYC.mjs&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import baseFlatten from './_baseFlatten.js';</span><span class="s3">\n</span><span class="s1">import baseRest from './_baseRest.js';</span><span class="s3">\n</span><span class="s1">import baseUniq from './_baseUniq.js';</span><span class="s3">\n</span><span class="s1">import isArrayLikeObject from './isArrayLikeObject.js';</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Creates an array of unique values, in order, from all given arrays using</span><span class="s3">\n </span><span class="s1">* [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)</span><span class="s3">\n </span><span class="s1">* for equality comparisons.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* @static</span><span class="s3">\n </span><span class="s1">* @memberOf _</span><span class="s3">\n </span><span class="s1">* @since 0.1.0</span><span class="s3">\n </span><span class="s1">* @category Array</span><span class="s3">\n </span><span class="s1">* @param {...Array} [arrays] The arrays to inspect.</span><span class="s3">\n </span><span class="s1">* @returns {Array} Returns the new array of combined values.</span><span class="s3">\n </span><span class="s1">* @example</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* _.union([2], [1, 2]);</span><span class="s3">\n </span><span class="s1">* // =&gt; [2, 1]</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">var union = baseRest(function(arrays) {</span><span class="s3">\n  </span><span class="s1">return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true));</span><span class="s3">\n</span><span class="s1">});</span><span class="s3">\n\n</span><span class="s1">export default union;</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">,</span><span class="s1">&quot;import * as _ from 'lodash-es';</span><span class="s3">\n\n</span><span class="s1">var DEFAULT_EDGE_NAME = '</span><span class="s3">\\</span><span class="s1">x00';</span><span class="s3">\n</span><span class="s1">var GRAPH_NODE = '</span><span class="s3">\\</span><span class="s1">x00';</span><span class="s3">\n</span><span class="s1">var EDGE_KEY_DELIM = '</span><span class="s3">\\</span><span class="s1">x01';</span><span class="s3">\n\n</span><span class="s1">// Implementation notes:</span><span class="s3">\n</span><span class="s1">//</span><span class="s3">\n</span><span class="s1">//  * Node id query functions should return string ids for the nodes</span><span class="s3">\n</span><span class="s1">//  * Edge id query functions should return an </span><span class="s3">\&quot;</span><span class="s1">edgeObj</span><span class="s3">\&quot;</span><span class="s1">, edge object, that is</span><span class="s3">\n</span><span class="s1">//    composed of enough information to uniquely identify an edge: {v, w, name}.</span><span class="s3">\n</span><span class="s1">//  * Internally we use an </span><span class="s3">\&quot;</span><span class="s1">edgeId</span><span class="s3">\&quot;</span><span class="s1">, a stringified form of the edgeObj, to</span><span class="s3">\n</span><span class="s1">//    reference edges. This is because we need a performant way to look these</span><span class="s3">\n</span><span class="s1">//    edges up and, object properties, which have string keys, are the closest</span><span class="s3">\n</span><span class="s1">//    we're going to get to a performant hashtable in JavaScript.</span><span class="s3">\n\n</span><span class="s1">// Implementation notes:</span><span class="s3">\n</span><span class="s1">//</span><span class="s3">\n</span><span class="s1">//  * Node id query functions should return string ids for the nodes</span><span class="s3">\n</span><span class="s1">//  * Edge id query functions should return an </span><span class="s3">\&quot;</span><span class="s1">edgeObj</span><span class="s3">\&quot;</span><span class="s1">, edge object, that is</span><span class="s3">\n</span><span class="s1">//    composed of enough information to uniquely identify an edge: {v, w, name}.</span><span class="s3">\n</span><span class="s1">//  * Internally we use an </span><span class="s3">\&quot;</span><span class="s1">edgeId</span><span class="s3">\&quot;</span><span class="s1">, a stringified form of the edgeObj, to</span><span class="s3">\n</span><span class="s1">//    reference edges. This is because we need a performant way to look these</span><span class="s3">\n</span><span class="s1">//    edges up and, object properties, which have string keys, are the closest</span><span class="s3">\n</span><span class="s1">//    we're going to get to a performant hashtable in JavaScript.</span><span class="s3">\n</span><span class="s1">export class Graph {</span><span class="s3">\n  </span><span class="s1">constructor(opts = {}) {</span><span class="s3">\n    </span><span class="s1">this._isDirected = Object.prototype.hasOwnProperty.call(opts, 'directed')</span><span class="s3">\n      </span><span class="s1">? opts.directed</span><span class="s3">\n      </span><span class="s1">: true;</span><span class="s3">\n    </span><span class="s1">this._isMultigraph = Object.prototype.hasOwnProperty.call(opts, 'multigraph')</span><span class="s3">\n      </span><span class="s1">? opts.multigraph</span><span class="s3">\n      </span><span class="s1">: false;</span><span class="s3">\n    </span><span class="s1">this._isCompound = Object.prototype.hasOwnProperty.call(opts, 'compound')</span><span class="s3">\n      </span><span class="s1">? opts.compound</span><span class="s3">\n      </span><span class="s1">: false;</span><span class="s3">\n\n    </span><span class="s1">// Label for the graph itself</span><span class="s3">\n    </span><span class="s1">this._label = undefined;</span><span class="s3">\n\n    </span><span class="s1">// Defaults to be set when creating a new node</span><span class="s3">\n    </span><span class="s1">this._defaultNodeLabelFn = _.constant(undefined);</span><span class="s3">\n\n    </span><span class="s1">// Defaults to be set when creating a new edge</span><span class="s3">\n    </span><span class="s1">this._defaultEdgeLabelFn = _.constant(undefined);</span><span class="s3">\n\n    </span><span class="s1">// v -&gt; label</span><span class="s3">\n    </span><span class="s1">this._nodes = {};</span><span class="s3">\n\n    </span><span class="s1">if (this._isCompound) {</span><span class="s3">\n      </span><span class="s1">// v -&gt; parent</span><span class="s3">\n      </span><span class="s1">this._parent = {};</span><span class="s3">\n\n      </span><span class="s1">// v -&gt; children</span><span class="s3">\n      </span><span class="s1">this._children = {};</span><span class="s3">\n      </span><span class="s1">this._children[GRAPH_NODE] = {};</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">// v -&gt; edgeObj</span><span class="s3">\n    </span><span class="s1">this._in = {};</span><span class="s3">\n\n    </span><span class="s1">// u -&gt; v -&gt; Number</span><span class="s3">\n    </span><span class="s1">this._preds = {};</span><span class="s3">\n\n    </span><span class="s1">// v -&gt; edgeObj</span><span class="s3">\n    </span><span class="s1">this._out = {};</span><span class="s3">\n\n    </span><span class="s1">// v -&gt; w -&gt; Number</span><span class="s3">\n    </span><span class="s1">this._sucs = {};</span><span class="s3">\n\n    </span><span class="s1">// e -&gt; edgeObj</span><span class="s3">\n    </span><span class="s1">this._edgeObjs = {};</span><span class="s3">\n\n    </span><span class="s1">// e -&gt; label</span><span class="s3">\n    </span><span class="s1">this._edgeLabels = {};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">/* === Graph functions ========= */</span><span class="s3">\n  </span><span class="s1">isDirected() {</span><span class="s3">\n    </span><span class="s1">return this._isDirected;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">isMultigraph() {</span><span class="s3">\n    </span><span class="s1">return this._isMultigraph;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">isCompound() {</span><span class="s3">\n    </span><span class="s1">return this._isCompound;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">setGraph(label) {</span><span class="s3">\n    </span><span class="s1">this._label = label;</span><span class="s3">\n    </span><span class="s1">return this;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">graph() {</span><span class="s3">\n    </span><span class="s1">return this._label;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">/* === Node functions ========== */</span><span class="s3">\n  </span><span class="s1">setDefaultNodeLabel(newDefault) {</span><span class="s3">\n    </span><span class="s1">if (!_.isFunction(newDefault)) {</span><span class="s3">\n      </span><span class="s1">newDefault = _.constant(newDefault);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">this._defaultNodeLabelFn = newDefault;</span><span class="s3">\n    </span><span class="s1">return this;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">nodeCount() {</span><span class="s3">\n    </span><span class="s1">return this._nodeCount;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">nodes() {</span><span class="s3">\n    </span><span class="s1">return _.keys(this._nodes);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">sources() {</span><span class="s3">\n    </span><span class="s1">var self = this;</span><span class="s3">\n    </span><span class="s1">return _.filter(this.nodes(), function (v) {</span><span class="s3">\n      </span><span class="s1">return _.isEmpty(self._in[v]);</span><span class="s3">\n    </span><span class="s1">});</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">sinks() {</span><span class="s3">\n    </span><span class="s1">var self = this;</span><span class="s3">\n    </span><span class="s1">return _.filter(this.nodes(), function (v) {</span><span class="s3">\n      </span><span class="s1">return _.isEmpty(self._out[v]);</span><span class="s3">\n    </span><span class="s1">});</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">setNodes(vs, value) {</span><span class="s3">\n    </span><span class="s1">var args = arguments;</span><span class="s3">\n    </span><span class="s1">var self = this;</span><span class="s3">\n    </span><span class="s1">_.each(vs, function (v) {</span><span class="s3">\n      </span><span class="s1">if (args.length &gt; 1) {</span><span class="s3">\n        </span><span class="s1">self.setNode(v, value);</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">self.setNode(v);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">});</span><span class="s3">\n    </span><span class="s1">return this;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">setNode(v, value) {</span><span class="s3">\n    </span><span class="s1">if (Object.prototype.hasOwnProperty.call(this._nodes, v)) {</span><span class="s3">\n      </span><span class="s1">if (arguments.length &gt; 1) {</span><span class="s3">\n        </span><span class="s1">this._nodes[v] = value;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">return this;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">// @ts-expect-error</span><span class="s3">\n    </span><span class="s1">this._nodes[v] = arguments.length &gt; 1 ? value : this._defaultNodeLabelFn(v);</span><span class="s3">\n    </span><span class="s1">if (this._isCompound) {</span><span class="s3">\n      </span><span class="s1">this._parent[v] = GRAPH_NODE;</span><span class="s3">\n      </span><span class="s1">this._children[v] = {};</span><span class="s3">\n      </span><span class="s1">this._children[GRAPH_NODE][v] = true;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">this._in[v] = {};</span><span class="s3">\n    </span><span class="s1">this._preds[v] = {};</span><span class="s3">\n    </span><span class="s1">this._out[v] = {};</span><span class="s3">\n    </span><span class="s1">this._sucs[v] = {};</span><span class="s3">\n    </span><span class="s1">++this._nodeCount;</span><span class="s3">\n    </span><span class="s1">return this;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">node(v) {</span><span class="s3">\n    </span><span class="s1">return this._nodes[v];</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">hasNode(v) {</span><span class="s3">\n    </span><span class="s1">return Object.prototype.hasOwnProperty.call(this._nodes, v);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">removeNode(v) {</span><span class="s3">\n    </span><span class="s1">if (Object.prototype.hasOwnProperty.call(this._nodes, v)) {</span><span class="s3">\n      </span><span class="s1">var removeEdge = (e) =&gt; this.removeEdge(this._edgeObjs[e]);</span><span class="s3">\n      </span><span class="s1">delete this._nodes[v];</span><span class="s3">\n      </span><span class="s1">if (this._isCompound) {</span><span class="s3">\n        </span><span class="s1">this._removeFromParentsChildList(v);</span><span class="s3">\n        </span><span class="s1">delete this._parent[v];</span><span class="s3">\n        </span><span class="s1">_.each(this.children(v), (child) =&gt; {</span><span class="s3">\n          </span><span class="s1">this.setParent(child);</span><span class="s3">\n        </span><span class="s1">});</span><span class="s3">\n        </span><span class="s1">delete this._children[v];</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">_.each(_.keys(this._in[v]), removeEdge);</span><span class="s3">\n      </span><span class="s1">delete this._in[v];</span><span class="s3">\n      </span><span class="s1">delete this._preds[v];</span><span class="s3">\n      </span><span class="s1">_.each(_.keys(this._out[v]), removeEdge);</span><span class="s3">\n      </span><span class="s1">delete this._out[v];</span><span class="s3">\n      </span><span class="s1">delete this._sucs[v];</span><span class="s3">\n      </span><span class="s1">--this._nodeCount;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">return this;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">setParent(v, parent) {</span><span class="s3">\n    </span><span class="s1">if (!this._isCompound) {</span><span class="s3">\n      </span><span class="s1">throw new Error('Cannot set parent in a non-compound graph');</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (_.isUndefined(parent)) {</span><span class="s3">\n      </span><span class="s1">parent = GRAPH_NODE;</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">// Coerce parent to string</span><span class="s3">\n      </span><span class="s1">parent += '';</span><span class="s3">\n      </span><span class="s1">for (var ancestor = parent; !_.isUndefined(ancestor); ancestor = this.parent(ancestor)) {</span><span class="s3">\n        </span><span class="s1">if (ancestor === v) {</span><span class="s3">\n          </span><span class="s1">throw new Error('Setting ' + parent + ' as parent of ' + v + ' would create a cycle');</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">this.setNode(parent);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">this.setNode(v);</span><span class="s3">\n    </span><span class="s1">this._removeFromParentsChildList(v);</span><span class="s3">\n    </span><span class="s1">this._parent[v] = parent;</span><span class="s3">\n    </span><span class="s1">this._children[parent][v] = true;</span><span class="s3">\n    </span><span class="s1">return this;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">_removeFromParentsChildList(v) {</span><span class="s3">\n    </span><span class="s1">delete this._children[this._parent[v]][v];</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">parent(v) {</span><span class="s3">\n    </span><span class="s1">if (this._isCompound) {</span><span class="s3">\n      </span><span class="s1">var parent = this._parent[v];</span><span class="s3">\n      </span><span class="s1">if (parent !== GRAPH_NODE) {</span><span class="s3">\n        </span><span class="s1">return parent;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">children(v) {</span><span class="s3">\n    </span><span class="s1">if (_.isUndefined(v)) {</span><span class="s3">\n      </span><span class="s1">v = GRAPH_NODE;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (this._isCompound) {</span><span class="s3">\n      </span><span class="s1">var children = this._children[v];</span><span class="s3">\n      </span><span class="s1">if (children) {</span><span class="s3">\n        </span><span class="s1">return _.keys(children);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">} else if (v === GRAPH_NODE) {</span><span class="s3">\n      </span><span class="s1">return this.nodes();</span><span class="s3">\n    </span><span class="s1">} else if (this.hasNode(v)) {</span><span class="s3">\n      </span><span class="s1">return [];</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">predecessors(v) {</span><span class="s3">\n    </span><span class="s1">var predsV = this._preds[v];</span><span class="s3">\n    </span><span class="s1">if (predsV) {</span><span class="s3">\n      </span><span class="s1">return _.keys(predsV);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">successors(v) {</span><span class="s3">\n    </span><span class="s1">var sucsV = this._sucs[v];</span><span class="s3">\n    </span><span class="s1">if (sucsV) {</span><span class="s3">\n      </span><span class="s1">return _.keys(sucsV);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">neighbors(v) {</span><span class="s3">\n    </span><span class="s1">var preds = this.predecessors(v);</span><span class="s3">\n    </span><span class="s1">if (preds) {</span><span class="s3">\n      </span><span class="s1">return _.union(preds, this.successors(v));</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">isLeaf(v) {</span><span class="s3">\n    </span><span class="s1">var neighbors;</span><span class="s3">\n    </span><span class="s1">if (this.isDirected()) {</span><span class="s3">\n      </span><span class="s1">neighbors = this.successors(v);</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">neighbors = this.neighbors(v);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">return neighbors.length === 0;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">filterNodes(filter) {</span><span class="s3">\n    </span><span class="s1">// @ts-expect-error</span><span class="s3">\n    </span><span class="s1">var copy = new this.constructor({</span><span class="s3">\n      </span><span class="s1">directed: this._isDirected,</span><span class="s3">\n      </span><span class="s1">multigraph: this._isMultigraph,</span><span class="s3">\n      </span><span class="s1">compound: this._isCompound,</span><span class="s3">\n    </span><span class="s1">});</span><span class="s3">\n\n    </span><span class="s1">copy.setGraph(this.graph());</span><span class="s3">\n\n    </span><span class="s1">var self = this;</span><span class="s3">\n    </span><span class="s1">_.each(this._nodes, function (value, v) {</span><span class="s3">\n      </span><span class="s1">if (filter(v)) {</span><span class="s3">\n        </span><span class="s1">copy.setNode(v, value);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">});</span><span class="s3">\n\n    </span><span class="s1">_.each(this._edgeObjs, function (e) {</span><span class="s3">\n      </span><span class="s1">// @ts-expect-error</span><span class="s3">\n      </span><span class="s1">if (copy.hasNode(e.v) &amp;&amp; copy.hasNode(e.w)) {</span><span class="s3">\n        </span><span class="s1">copy.setEdge(e, self.edge(e));</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">});</span><span class="s3">\n\n    </span><span class="s1">var parents = {};</span><span class="s3">\n    </span><span class="s1">function findParent(v) {</span><span class="s3">\n      </span><span class="s1">var parent = self.parent(v);</span><span class="s3">\n      </span><span class="s1">if (parent === undefined || copy.hasNode(parent)) {</span><span class="s3">\n        </span><span class="s1">parents[v] = parent;</span><span class="s3">\n        </span><span class="s1">return parent;</span><span class="s3">\n      </span><span class="s1">} else if (parent in parents) {</span><span class="s3">\n        </span><span class="s1">return parents[parent];</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">return findParent(parent);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (this._isCompound) {</span><span class="s3">\n      </span><span class="s1">_.each(copy.nodes(), function (v) {</span><span class="s3">\n        </span><span class="s1">copy.setParent(v, findParent(v));</span><span class="s3">\n      </span><span class="s1">});</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">return copy;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">/* === Edge functions ========== */</span><span class="s3">\n  </span><span class="s1">setDefaultEdgeLabel(newDefault) {</span><span class="s3">\n    </span><span class="s1">if (!_.isFunction(newDefault)) {</span><span class="s3">\n      </span><span class="s1">newDefault = _.constant(newDefault);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">this._defaultEdgeLabelFn = newDefault;</span><span class="s3">\n    </span><span class="s1">return this;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">edgeCount() {</span><span class="s3">\n    </span><span class="s1">return this._edgeCount;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">edges() {</span><span class="s3">\n    </span><span class="s1">return _.values(this._edgeObjs);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">setPath(vs, value) {</span><span class="s3">\n    </span><span class="s1">var self = this;</span><span class="s3">\n    </span><span class="s1">var args = arguments;</span><span class="s3">\n    </span><span class="s1">_.reduce(vs, function (v, w) {</span><span class="s3">\n      </span><span class="s1">if (args.length &gt; 1) {</span><span class="s3">\n        </span><span class="s1">self.setEdge(v, w, value);</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">self.setEdge(v, w);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">return w;</span><span class="s3">\n    </span><span class="s1">});</span><span class="s3">\n    </span><span class="s1">return this;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">/*</span><span class="s3">\n   </span><span class="s1">* setEdge(v, w, [value, [name]])</span><span class="s3">\n   </span><span class="s1">* setEdge({ v, w, [name] }, [value])</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">setEdge() {</span><span class="s3">\n    </span><span class="s1">var v, w, name, value;</span><span class="s3">\n    </span><span class="s1">var valueSpecified = false;</span><span class="s3">\n    </span><span class="s1">var arg0 = arguments[0];</span><span class="s3">\n\n    </span><span class="s1">if (typeof arg0 === 'object' &amp;&amp; arg0 !== null &amp;&amp; 'v' in arg0) {</span><span class="s3">\n      </span><span class="s1">v = arg0.v;</span><span class="s3">\n      </span><span class="s1">w = arg0.w;</span><span class="s3">\n      </span><span class="s1">name = arg0.name;</span><span class="s3">\n      </span><span class="s1">if (arguments.length === 2) {</span><span class="s3">\n        </span><span class="s1">value = arguments[1];</span><span class="s3">\n        </span><span class="s1">valueSpecified = true;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">v = arg0;</span><span class="s3">\n      </span><span class="s1">w = arguments[1];</span><span class="s3">\n      </span><span class="s1">name = arguments[3];</span><span class="s3">\n      </span><span class="s1">if (arguments.length &gt; 2) {</span><span class="s3">\n        </span><span class="s1">value = arguments[2];</span><span class="s3">\n        </span><span class="s1">valueSpecified = true;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">v = '' + v;</span><span class="s3">\n    </span><span class="s1">w = '' + w;</span><span class="s3">\n    </span><span class="s1">if (!_.isUndefined(name)) {</span><span class="s3">\n      </span><span class="s1">name = '' + name;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">var e = edgeArgsToId(this._isDirected, v, w, name);</span><span class="s3">\n    </span><span class="s1">if (Object.prototype.hasOwnProperty.call(this._edgeLabels, e)) {</span><span class="s3">\n      </span><span class="s1">if (valueSpecified) {</span><span class="s3">\n        </span><span class="s1">this._edgeLabels[e] = value;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">return this;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (!_.isUndefined(name) &amp;&amp; !this._isMultigraph) {</span><span class="s3">\n      </span><span class="s1">throw new Error('Cannot set a named edge when isMultigraph = false');</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">// It didn't exist, so we need to create it.</span><span class="s3">\n    </span><span class="s1">// First ensure the nodes exist.</span><span class="s3">\n    </span><span class="s1">this.setNode(v);</span><span class="s3">\n    </span><span class="s1">this.setNode(w);</span><span class="s3">\n\n    </span><span class="s1">// @ts-expect-error</span><span class="s3">\n    </span><span class="s1">this._edgeLabels[e] = valueSpecified ? value : this._defaultEdgeLabelFn(v, w, name);</span><span class="s3">\n\n    </span><span class="s1">var edgeObj = edgeArgsToObj(this._isDirected, v, w, name);</span><span class="s3">\n    </span><span class="s1">// Ensure we add undirected edges in a consistent way.</span><span class="s3">\n    </span><span class="s1">v = edgeObj.v;</span><span class="s3">\n    </span><span class="s1">w = edgeObj.w;</span><span class="s3">\n\n    </span><span class="s1">Object.freeze(edgeObj);</span><span class="s3">\n    </span><span class="s1">this._edgeObjs[e] = edgeObj;</span><span class="s3">\n    </span><span class="s1">incrementOrInitEntry(this._preds[w], v);</span><span class="s3">\n    </span><span class="s1">incrementOrInitEntry(this._sucs[v], w);</span><span class="s3">\n    </span><span class="s1">this._in[w][e] = edgeObj;</span><span class="s3">\n    </span><span class="s1">this._out[v][e] = edgeObj;</span><span class="s3">\n    </span><span class="s1">this._edgeCount++;</span><span class="s3">\n    </span><span class="s1">return this;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">edge(v, w, name) {</span><span class="s3">\n    </span><span class="s1">var e =</span><span class="s3">\n      </span><span class="s1">arguments.length === 1</span><span class="s3">\n        </span><span class="s1">? edgeObjToId(this._isDirected, arguments[0])</span><span class="s3">\n        </span><span class="s1">: edgeArgsToId(this._isDirected, v, w, name);</span><span class="s3">\n    </span><span class="s1">return this._edgeLabels[e];</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">hasEdge(v, w, name) {</span><span class="s3">\n    </span><span class="s1">var e =</span><span class="s3">\n      </span><span class="s1">arguments.length === 1</span><span class="s3">\n        </span><span class="s1">? edgeObjToId(this._isDirected, arguments[0])</span><span class="s3">\n        </span><span class="s1">: edgeArgsToId(this._isDirected, v, w, name);</span><span class="s3">\n    </span><span class="s1">return Object.prototype.hasOwnProperty.call(this._edgeLabels, e);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">removeEdge(v, w, name) {</span><span class="s3">\n    </span><span class="s1">var e =</span><span class="s3">\n      </span><span class="s1">arguments.length === 1</span><span class="s3">\n        </span><span class="s1">? edgeObjToId(this._isDirected, arguments[0])</span><span class="s3">\n        </span><span class="s1">: edgeArgsToId(this._isDirected, v, w, name);</span><span class="s3">\n    </span><span class="s1">var edge = this._edgeObjs[e];</span><span class="s3">\n    </span><span class="s1">if (edge) {</span><span class="s3">\n      </span><span class="s1">v = edge.v;</span><span class="s3">\n      </span><span class="s1">w = edge.w;</span><span class="s3">\n      </span><span class="s1">delete this._edgeLabels[e];</span><span class="s3">\n      </span><span class="s1">delete this._edgeObjs[e];</span><span class="s3">\n      </span><span class="s1">decrementOrRemoveEntry(this._preds[w], v);</span><span class="s3">\n      </span><span class="s1">decrementOrRemoveEntry(this._sucs[v], w);</span><span class="s3">\n      </span><span class="s1">delete this._in[w][e];</span><span class="s3">\n      </span><span class="s1">delete this._out[v][e];</span><span class="s3">\n      </span><span class="s1">this._edgeCount--;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">return this;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">inEdges(v, u) {</span><span class="s3">\n    </span><span class="s1">var inV = this._in[v];</span><span class="s3">\n    </span><span class="s1">if (inV) {</span><span class="s3">\n      </span><span class="s1">var edges = _.values(inV);</span><span class="s3">\n      </span><span class="s1">if (!u) {</span><span class="s3">\n        </span><span class="s1">return edges;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">return _.filter(edges, function (edge) {</span><span class="s3">\n        </span><span class="s1">return edge.v === u;</span><span class="s3">\n      </span><span class="s1">});</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">outEdges(v, w) {</span><span class="s3">\n    </span><span class="s1">var outV = this._out[v];</span><span class="s3">\n    </span><span class="s1">if (outV) {</span><span class="s3">\n      </span><span class="s1">var edges = _.values(outV);</span><span class="s3">\n      </span><span class="s1">if (!w) {</span><span class="s3">\n        </span><span class="s1">return edges;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">return _.filter(edges, function (edge) {</span><span class="s3">\n        </span><span class="s1">return edge.w === w;</span><span class="s3">\n      </span><span class="s1">});</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">nodeEdges(v, w) {</span><span class="s3">\n    </span><span class="s1">var inEdges = this.inEdges(v, w);</span><span class="s3">\n    </span><span class="s1">if (inEdges) {</span><span class="s3">\n      </span><span class="s1">return inEdges.concat(this.outEdges(v, w));</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/* Number of nodes in the graph. Should only be changed by the implementation. */</span><span class="s3">\n</span><span class="s1">Graph.prototype._nodeCount = 0;</span><span class="s3">\n\n</span><span class="s1">/* Number of edges in the graph. Should only be changed by the implementation. */</span><span class="s3">\n</span><span class="s1">Graph.prototype._edgeCount = 0;</span><span class="s3">\n\n</span><span class="s1">function incrementOrInitEntry(map, k) {</span><span class="s3">\n  </span><span class="s1">if (map[k]) {</span><span class="s3">\n    </span><span class="s1">map[k]++;</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">map[k] = 1;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function decrementOrRemoveEntry(map, k) {</span><span class="s3">\n  </span><span class="s1">if (!--map[k]) {</span><span class="s3">\n    </span><span class="s1">delete map[k];</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function edgeArgsToId(isDirected, v_, w_, name) {</span><span class="s3">\n  </span><span class="s1">var v = '' + v_;</span><span class="s3">\n  </span><span class="s1">var w = '' + w_;</span><span class="s3">\n  </span><span class="s1">if (!isDirected &amp;&amp; v &gt; w) {</span><span class="s3">\n    </span><span class="s1">var tmp = v;</span><span class="s3">\n    </span><span class="s1">v = w;</span><span class="s3">\n    </span><span class="s1">w = tmp;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return v + EDGE_KEY_DELIM + w + EDGE_KEY_DELIM + (_.isUndefined(name) ? DEFAULT_EDGE_NAME : name);</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function edgeArgsToObj(isDirected, v_, w_, name) {</span><span class="s3">\n  </span><span class="s1">var v = '' + v_;</span><span class="s3">\n  </span><span class="s1">var w = '' + w_;</span><span class="s3">\n  </span><span class="s1">if (!isDirected &amp;&amp; v &gt; w) {</span><span class="s3">\n    </span><span class="s1">var tmp = v;</span><span class="s3">\n    </span><span class="s1">v = w;</span><span class="s3">\n    </span><span class="s1">w = tmp;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">var edgeObj = { v: v, w: w };</span><span class="s3">\n  </span><span class="s1">if (name) {</span><span class="s3">\n    </span><span class="s1">edgeObj.name = name;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return edgeObj;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function edgeObjToId(isDirected, edgeObj) {</span><span class="s3">\n  </span><span class="s1">return edgeArgsToId(isDirected, edgeObj.v, edgeObj.w, edgeObj.name);</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">,</span><span class="s1">&quot;// Includes only the </span><span class="s3">\&quot;</span><span class="s1">core</span><span class="s3">\&quot; </span><span class="s1">of graphlib</span><span class="s3">\n\n</span><span class="s1">import { Graph } from './graph.js';</span><span class="s3">\n\n</span><span class="s1">const version = '2.1.9-pre';</span><span class="s3">\n\n</span><span class="s1">export { Graph, version };</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">,</span><span class="s1">&quot;/* IMPORT */</span><span class="s3">\n</span><span class="s1">import _ from '../utils/index.js';</span><span class="s3">\n</span><span class="s1">import Color from '../color/index.js';</span><span class="s3">\n</span><span class="s1">/* MAIN */</span><span class="s3">\n</span><span class="s1">const channel = (color, channel) =&gt; {</span><span class="s3">\n    </span><span class="s1">return _.lang.round(Color.parse(color)[channel]);</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n</span><span class="s1">/* EXPORT */</span><span class="s3">\n</span><span class="s1">export default channel;</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">,</span><span class="s1">&quot;import baseClone from './_baseClone.js';</span><span class="s3">\n\n</span><span class="s1">/** Used to compose bitmasks for cloning. */</span><span class="s3">\n</span><span class="s1">var CLONE_SYMBOLS_FLAG = 4;</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Creates a shallow clone of `value`.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* **Note:** This method is loosely based on the</span><span class="s3">\n </span><span class="s1">* [structured clone algorithm](https://mdn.io/Structured_clone_algorithm)</span><span class="s3">\n </span><span class="s1">* and supports cloning arrays, array buffers, booleans, date objects, maps,</span><span class="s3">\n </span><span class="s1">* numbers, `Object` objects, regexes, sets, strings, symbols, and typed</span><span class="s3">\n </span><span class="s1">* arrays. The own enumerable properties of `arguments` objects are cloned</span><span class="s3">\n </span><span class="s1">* as plain objects. An empty object is returned for uncloneable values such</span><span class="s3">\n </span><span class="s1">* as error objects, functions, DOM nodes, and WeakMaps.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* @static</span><span class="s3">\n </span><span class="s1">* @memberOf _</span><span class="s3">\n </span><span class="s1">* @since 0.1.0</span><span class="s3">\n </span><span class="s1">* @category Lang</span><span class="s3">\n </span><span class="s1">* @param {*} value The value to clone.</span><span class="s3">\n </span><span class="s1">* @returns {*} Returns the cloned value.</span><span class="s3">\n </span><span class="s1">* @see _.cloneDeep</span><span class="s3">\n </span><span class="s1">* @example</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* var objects = [{ 'a': 1 }, { 'b': 2 }];</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* var shallow = _.clone(objects);</span><span class="s3">\n </span><span class="s1">* console.log(shallow[0] === objects[0]);</span><span class="s3">\n </span><span class="s1">* // =&gt; true</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function clone(value) {</span><span class="s3">\n  </span><span class="s1">return baseClone(value, CLONE_SYMBOLS_FLAG);</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export default clone;</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">,</span><span class="s1">&quot;import {</span><span class="s3">\n  </span><span class="s1">getLineFunctionsWithOffset</span><span class="s3">\n</span><span class="s1">} from </span><span class="s3">\&quot;</span><span class="s1">./chunk-VV3M67IP.mjs</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">getSubGraphTitleMargins</span><span class="s3">\n</span><span class="s1">} from </span><span class="s3">\&quot;</span><span class="s1">./chunk-K557N5IZ.mjs</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">createText,</span><span class="s3">\n  </span><span class="s1">replaceIconSubstring</span><span class="s3">\n</span><span class="s1">} from </span><span class="s3">\&quot;</span><span class="s1">./chunk-C3MQ5ANM.mjs</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">decodeEntities,</span><span class="s3">\n  </span><span class="s1">getStylesFromArray,</span><span class="s3">\n  </span><span class="s1">utils_default</span><span class="s3">\n</span><span class="s1">} from </span><span class="s3">\&quot;</span><span class="s1">./chunk-O4NI6UNU.mjs</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">__name,</span><span class="s3">\n  </span><span class="s1">clear,</span><span class="s3">\n  </span><span class="s1">common_default,</span><span class="s3">\n  </span><span class="s1">configureSvgSize,</span><span class="s3">\n  </span><span class="s1">evaluate,</span><span class="s3">\n  </span><span class="s1">getConfig,</span><span class="s3">\n  </span><span class="s1">getConfig2,</span><span class="s3">\n  </span><span class="s1">log,</span><span class="s3">\n  </span><span class="s1">sanitizeText</span><span class="s3">\n</span><span class="s1">} from </span><span class="s3">\&quot;</span><span class="s1">./chunk-YTJNT7DU.mjs</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n\n</span><span class="s1">// src/diagrams/block/parser/block.jison</span><span class="s3">\n</span><span class="s1">var parser = function() {</span><span class="s3">\n  </span><span class="s1">var o = /* @__PURE__ */ __name(function(k, v, o2, l) {</span><span class="s3">\n    </span><span class="s1">for (o2 = o2 || {}, l = k.length; l--; o2[k[l]] = v) ;</span><span class="s3">\n    </span><span class="s1">return o2;</span><span class="s3">\n  </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">o</span><span class="s3">\&quot;</span><span class="s1">), $V0 = [1, 7], $V1 = [1, 13], $V2 = [1, 14], $V3 = [1, 15], $V4 = [1, 19], $V5 = [1, 16], $V6 = [1, 17], $V7 = [1, 18], $V8 = [8, 30], $V9 = [8, 21, 28, 29, 30, 31, 32, 40, 44, 47], $Va = [1, 23], $Vb = [1, 24], $Vc = [8, 15, 16, 21, 28, 29, 30, 31, 32, 40, 44, 47], $Vd = [8, 15, 16, 21, 27, 28, 29, 30, 31, 32, 40, 44, 47], $Ve = [1, 49];</span><span class="s3">\n  </span><span class="s1">var parser2 = {</span><span class="s3">\n    </span><span class="s1">trace: /* @__PURE__ */ __name(function trace() {</span><span class="s3">\n    </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">trace</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n    </span><span class="s1">yy: {},</span><span class="s3">\n    </span><span class="s1">symbols_: { </span><span class="s3">\&quot;</span><span class="s1">error</span><span class="s3">\&quot;</span><span class="s1">: 2, </span><span class="s3">\&quot;</span><span class="s1">spaceLines</span><span class="s3">\&quot;</span><span class="s1">: 3, </span><span class="s3">\&quot;</span><span class="s1">SPACELINE</span><span class="s3">\&quot;</span><span class="s1">: 4, </span><span class="s3">\&quot;</span><span class="s1">NL</span><span class="s3">\&quot;</span><span class="s1">: 5, </span><span class="s3">\&quot;</span><span class="s1">separator</span><span class="s3">\&quot;</span><span class="s1">: 6, </span><span class="s3">\&quot;</span><span class="s1">SPACE</span><span class="s3">\&quot;</span><span class="s1">: 7, </span><span class="s3">\&quot;</span><span class="s1">EOF</span><span class="s3">\&quot;</span><span class="s1">: 8, </span><span class="s3">\&quot;</span><span class="s1">start</span><span class="s3">\&quot;</span><span class="s1">: 9, </span><span class="s3">\&quot;</span><span class="s1">BLOCK_DIAGRAM_KEY</span><span class="s3">\&quot;</span><span class="s1">: 10, </span><span class="s3">\&quot;</span><span class="s1">document</span><span class="s3">\&quot;</span><span class="s1">: 11, </span><span class="s3">\&quot;</span><span class="s1">stop</span><span class="s3">\&quot;</span><span class="s1">: 12, </span><span class="s3">\&quot;</span><span class="s1">statement</span><span class="s3">\&quot;</span><span class="s1">: 13, </span><span class="s3">\&quot;</span><span class="s1">link</span><span class="s3">\&quot;</span><span class="s1">: 14, </span><span class="s3">\&quot;</span><span class="s1">LINK</span><span class="s3">\&quot;</span><span class="s1">: 15, </span><span class="s3">\&quot;</span><span class="s1">START_LINK</span><span class="s3">\&quot;</span><span class="s1">: 16, </span><span class="s3">\&quot;</span><span class="s1">LINK_LABEL</span><span class="s3">\&quot;</span><span class="s1">: 17, </span><span class="s3">\&quot;</span><span class="s1">STR</span><span class="s3">\&quot;</span><span class="s1">: 18, </span><span class="s3">\&quot;</span><span class="s1">nodeStatement</span><span class="s3">\&quot;</span><span class="s1">: 19, </span><span class="s3">\&quot;</span><span class="s1">columnsStatement</span><span class="s3">\&quot;</span><span class="s1">: 20, </span><span class="s3">\&quot;</span><span class="s1">SPACE_BLOCK</span><span class="s3">\&quot;</span><span class="s1">: 21, </span><span class="s3">\&quot;</span><span class="s1">blockStatement</span><span class="s3">\&quot;</span><span class="s1">: 22, </span><span class="s3">\&quot;</span><span class="s1">classDefStatement</span><span class="s3">\&quot;</span><span class="s1">: 23, </span><span class="s3">\&quot;</span><span class="s1">cssClassStatement</span><span class="s3">\&quot;</span><span class="s1">: 24, </span><span class="s3">\&quot;</span><span class="s1">styleStatement</span><span class="s3">\&quot;</span><span class="s1">: 25, </span><span class="s3">\&quot;</span><span class="s1">node</span><span class="s3">\&quot;</span><span class="s1">: 26, </span><span class="s3">\&quot;</span><span class="s1">SIZE</span><span class="s3">\&quot;</span><span class="s1">: 27, </span><span class="s3">\&quot;</span><span class="s1">COLUMNS</span><span class="s3">\&quot;</span><span class="s1">: 28, </span><span class="s3">\&quot;</span><span class="s1">id-block</span><span class="s3">\&quot;</span><span class="s1">: 29, </span><span class="s3">\&quot;</span><span class="s1">end</span><span class="s3">\&quot;</span><span class="s1">: 30, </span><span class="s3">\&quot;</span><span class="s1">block</span><span class="s3">\&quot;</span><span class="s1">: 31, </span><span class="s3">\&quot;</span><span class="s1">NODE_ID</span><span class="s3">\&quot;</span><span class="s1">: 32, </span><span class="s3">\&quot;</span><span class="s1">nodeShapeNLabel</span><span class="s3">\&quot;</span><span class="s1">: 33, </span><span class="s3">\&quot;</span><span class="s1">dirList</span><span class="s3">\&quot;</span><span class="s1">: 34, </span><span class="s3">\&quot;</span><span class="s1">DIR</span><span class="s3">\&quot;</span><span class="s1">: 35, </span><span class="s3">\&quot;</span><span class="s1">NODE_DSTART</span><span class="s3">\&quot;</span><span class="s1">: 36, </span><span class="s3">\&quot;</span><span class="s1">NODE_DEND</span><span class="s3">\&quot;</span><span class="s1">: 37, </span><span class="s3">\&quot;</span><span class="s1">BLOCK_ARROW_START</span><span class="s3">\&quot;</span><span class="s1">: 38, </span><span class="s3">\&quot;</span><span class="s1">BLOCK_ARROW_END</span><span class="s3">\&quot;</span><span class="s1">: 39, </span><span class="s3">\&quot;</span><span class="s1">classDef</span><span class="s3">\&quot;</span><span class="s1">: 40, </span><span class="s3">\&quot;</span><span class="s1">CLASSDEF_ID</span><span class="s3">\&quot;</span><span class="s1">: 41, </span><span class="s3">\&quot;</span><span class="s1">CLASSDEF_STYLEOPTS</span><span class="s3">\&quot;</span><span class="s1">: 42, </span><span class="s3">\&quot;</span><span class="s1">DEFAULT</span><span class="s3">\&quot;</span><span class="s1">: 43, </span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">: 44, </span><span class="s3">\&quot;</span><span class="s1">CLASSENTITY_IDS</span><span class="s3">\&quot;</span><span class="s1">: 45, </span><span class="s3">\&quot;</span><span class="s1">STYLECLASS</span><span class="s3">\&quot;</span><span class="s1">: 46, </span><span class="s3">\&quot;</span><span class="s1">style</span><span class="s3">\&quot;</span><span class="s1">: 47, </span><span class="s3">\&quot;</span><span class="s1">STYLE_ENTITY_IDS</span><span class="s3">\&quot;</span><span class="s1">: 48, </span><span class="s3">\&quot;</span><span class="s1">STYLE_DEFINITION_DATA</span><span class="s3">\&quot;</span><span class="s1">: 49, </span><span class="s3">\&quot;</span><span class="s1">$accept</span><span class="s3">\&quot;</span><span class="s1">: 0, </span><span class="s3">\&quot;</span><span class="s1">$end</span><span class="s3">\&quot;</span><span class="s1">: 1 },</span><span class="s3">\n    </span><span class="s1">terminals_: { 2: </span><span class="s3">\&quot;</span><span class="s1">error</span><span class="s3">\&quot;</span><span class="s1">, 4: </span><span class="s3">\&quot;</span><span class="s1">SPACELINE</span><span class="s3">\&quot;</span><span class="s1">, 5: </span><span class="s3">\&quot;</span><span class="s1">NL</span><span class="s3">\&quot;</span><span class="s1">, 7: </span><span class="s3">\&quot;</span><span class="s1">SPACE</span><span class="s3">\&quot;</span><span class="s1">, 8: </span><span class="s3">\&quot;</span><span class="s1">EOF</span><span class="s3">\&quot;</span><span class="s1">, 10: </span><span class="s3">\&quot;</span><span class="s1">BLOCK_DIAGRAM_KEY</span><span class="s3">\&quot;</span><span class="s1">, 15: </span><span class="s3">\&quot;</span><span class="s1">LINK</span><span class="s3">\&quot;</span><span class="s1">, 16: </span><span class="s3">\&quot;</span><span class="s1">START_LINK</span><span class="s3">\&quot;</span><span class="s1">, 17: </span><span class="s3">\&quot;</span><span class="s1">LINK_LABEL</span><span class="s3">\&quot;</span><span class="s1">, 18: </span><span class="s3">\&quot;</span><span class="s1">STR</span><span class="s3">\&quot;</span><span class="s1">, 21: </span><span class="s3">\&quot;</span><span class="s1">SPACE_BLOCK</span><span class="s3">\&quot;</span><span class="s1">, 27: </span><span class="s3">\&quot;</span><span class="s1">SIZE</span><span class="s3">\&quot;</span><span class="s1">, 28: </span><span class="s3">\&quot;</span><span class="s1">COLUMNS</span><span class="s3">\&quot;</span><span class="s1">, 29: </span><span class="s3">\&quot;</span><span class="s1">id-block</span><span class="s3">\&quot;</span><span class="s1">, 30: </span><span class="s3">\&quot;</span><span class="s1">end</span><span class="s3">\&quot;</span><span class="s1">, 31: </span><span class="s3">\&quot;</span><span class="s1">block</span><span class="s3">\&quot;</span><span class="s1">, 32: </span><span class="s3">\&quot;</span><span class="s1">NODE_ID</span><span class="s3">\&quot;</span><span class="s1">, 35: </span><span class="s3">\&quot;</span><span class="s1">DIR</span><span class="s3">\&quot;</span><span class="s1">, 36: </span><span class="s3">\&quot;</span><span class="s1">NODE_DSTART</span><span class="s3">\&quot;</span><span class="s1">, 37: </span><span class="s3">\&quot;</span><span class="s1">NODE_DEND</span><span class="s3">\&quot;</span><span class="s1">, 38: </span><span class="s3">\&quot;</span><span class="s1">BLOCK_ARROW_START</span><span class="s3">\&quot;</span><span class="s1">, 39: </span><span class="s3">\&quot;</span><span class="s1">BLOCK_ARROW_END</span><span class="s3">\&quot;</span><span class="s1">, 40: </span><span class="s3">\&quot;</span><span class="s1">classDef</span><span class="s3">\&quot;</span><span class="s1">, 41: </span><span class="s3">\&quot;</span><span class="s1">CLASSDEF_ID</span><span class="s3">\&quot;</span><span class="s1">, 42: </span><span class="s3">\&quot;</span><span class="s1">CLASSDEF_STYLEOPTS</span><span class="s3">\&quot;</span><span class="s1">, 43: </span><span class="s3">\&quot;</span><span class="s1">DEFAULT</span><span class="s3">\&quot;</span><span class="s1">, 44: </span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, 45: </span><span class="s3">\&quot;</span><span class="s1">CLASSENTITY_IDS</span><span class="s3">\&quot;</span><span class="s1">, 46: </span><span class="s3">\&quot;</span><span class="s1">STYLECLASS</span><span class="s3">\&quot;</span><span class="s1">, 47: </span><span class="s3">\&quot;</span><span class="s1">style</span><span class="s3">\&quot;</span><span class="s1">, 48: </span><span class="s3">\&quot;</span><span class="s1">STYLE_ENTITY_IDS</span><span class="s3">\&quot;</span><span class="s1">, 49: </span><span class="s3">\&quot;</span><span class="s1">STYLE_DEFINITION_DATA</span><span class="s3">\&quot; </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">productions_: [0, [3, 1], [3, 2], [3, 2], [6, 1], [6, 1], [6, 1], [9, 3], [12, 1], [12, 1], [12, 2], [12, 2], [11, 1], [11, 2], [14, 1], [14, 4], [13, 1], [13, 1], [13, 1], [13, 1], [13, 1], [13, 1], [13, 1], [19, 3], [19, 2], [19, 1], [20, 1], [22, 4], [22, 3], [26, 1], [26, 2], [34, 1], [34, 2], [33, 3], [33, 4], [23, 3], [23, 3], [24, 3], [25, 3]],</span><span class="s3">\n    </span><span class="s1">performAction: /* @__PURE__ */ __name(function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$) {</span><span class="s3">\n      </span><span class="s1">var $0 = $$.length - 1;</span><span class="s3">\n      </span><span class="s1">switch (yystate) {</span><span class="s3">\n        </span><span class="s1">case 4:</span><span class="s3">\n          </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Rule: separator (NL) </span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 5:</span><span class="s3">\n          </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Rule: separator (Space) </span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 6:</span><span class="s3">\n          </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Rule: separator (EOF) </span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 7:</span><span class="s3">\n          </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Rule: hierarchy: </span><span class="s3">\&quot;</span><span class="s1">, $$[$0 - 1]);</span><span class="s3">\n          </span><span class="s1">yy.setHierarchy($$[$0 - 1]);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 8:</span><span class="s3">\n          </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Stop NL </span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 9:</span><span class="s3">\n          </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Stop EOF </span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 10:</span><span class="s3">\n          </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Stop NL2 </span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 11:</span><span class="s3">\n          </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Stop EOF2 </span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 12:</span><span class="s3">\n          </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Rule: statement: </span><span class="s3">\&quot;</span><span class="s1">, $$[$0]);</span><span class="s3">\n          </span><span class="s1">typeof $$[$0].length === </span><span class="s3">\&quot;</span><span class="s1">number</span><span class="s3">\&quot; </span><span class="s1">? this.$ = $$[$0] : this.$ = [$$[$0]];</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 13:</span><span class="s3">\n          </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Rule: statement #2: </span><span class="s3">\&quot;</span><span class="s1">, $$[$0 - 1]);</span><span class="s3">\n          </span><span class="s1">this.$ = [$$[$0 - 1]].concat($$[$0]);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 14:</span><span class="s3">\n          </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Rule: link: </span><span class="s3">\&quot;</span><span class="s1">, $$[$0], yytext);</span><span class="s3">\n          </span><span class="s1">this.$ = { edgeTypeStr: $$[$0], label: </span><span class="s3">\&quot;\&quot; </span><span class="s1">};</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 15:</span><span class="s3">\n          </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Rule: LABEL link: </span><span class="s3">\&quot;</span><span class="s1">, $$[$0 - 3], $$[$0 - 1], $$[$0]);</span><span class="s3">\n          </span><span class="s1">this.$ = { edgeTypeStr: $$[$0], label: $$[$0 - 1] };</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 18:</span><span class="s3">\n          </span><span class="s1">const num = parseInt($$[$0]);</span><span class="s3">\n          </span><span class="s1">const spaceId = yy.generateId();</span><span class="s3">\n          </span><span class="s1">this.$ = { id: spaceId, type: </span><span class="s3">\&quot;</span><span class="s1">space</span><span class="s3">\&quot;</span><span class="s1">, label: </span><span class="s3">\&quot;\&quot;</span><span class="s1">, width: num, children: [] };</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 23:</span><span class="s3">\n          </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Rule: (nodeStatement link node) </span><span class="s3">\&quot;</span><span class="s1">, $$[$0 - 2], $$[$0 - 1], $$[$0], </span><span class="s3">\&quot; </span><span class="s1">typestr: </span><span class="s3">\&quot;</span><span class="s1">, $$[$0 - 1].edgeTypeStr);</span><span class="s3">\n          </span><span class="s1">const edgeData = yy.edgeStrToEdgeData($$[$0 - 1].edgeTypeStr);</span><span class="s3">\n          </span><span class="s1">this.$ = [</span><span class="s3">\n            </span><span class="s1">{ id: $$[$0 - 2].id, label: $$[$0 - 2].label, type: $$[$0 - 2].type, directions: $$[$0 - 2].directions },</span><span class="s3">\n            </span><span class="s1">{ id: $$[$0 - 2].id + </span><span class="s3">\&quot;</span><span class="s1">-</span><span class="s3">\&quot; </span><span class="s1">+ $$[$0].id, start: $$[$0 - 2].id, end: $$[$0].id, label: $$[$0 - 1].label, type: </span><span class="s3">\&quot;</span><span class="s1">edge</span><span class="s3">\&quot;</span><span class="s1">, directions: $$[$0].directions, arrowTypeEnd: edgeData, arrowTypeStart: </span><span class="s3">\&quot;</span><span class="s1">arrow_open</span><span class="s3">\&quot; </span><span class="s1">},</span><span class="s3">\n            </span><span class="s1">{ id: $$[$0].id, label: $$[$0].label, type: yy.typeStr2Type($$[$0].typeStr), directions: $$[$0].directions }</span><span class="s3">\n          </span><span class="s1">];</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 24:</span><span class="s3">\n          </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Rule: nodeStatement (abc88 node size) </span><span class="s3">\&quot;</span><span class="s1">, $$[$0 - 1], $$[$0]);</span><span class="s3">\n          </span><span class="s1">this.$ = { id: $$[$0 - 1].id, label: $$[$0 - 1].label, type: yy.typeStr2Type($$[$0 - 1].typeStr), directions: $$[$0 - 1].directions, widthInColumns: parseInt($$[$0], 10) };</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 25:</span><span class="s3">\n          </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Rule: nodeStatement (node) </span><span class="s3">\&quot;</span><span class="s1">, $$[$0]);</span><span class="s3">\n          </span><span class="s1">this.$ = { id: $$[$0].id, label: $$[$0].label, type: yy.typeStr2Type($$[$0].typeStr), directions: $$[$0].directions, widthInColumns: 1 };</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 26:</span><span class="s3">\n          </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">APA123</span><span class="s3">\&quot;</span><span class="s1">, this ? this : </span><span class="s3">\&quot;</span><span class="s1">na</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n          </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">COLUMNS: </span><span class="s3">\&quot;</span><span class="s1">, $$[$0]);</span><span class="s3">\n          </span><span class="s1">this.$ = { type: </span><span class="s3">\&quot;</span><span class="s1">column-setting</span><span class="s3">\&quot;</span><span class="s1">, columns: $$[$0] === </span><span class="s3">\&quot;</span><span class="s1">auto</span><span class="s3">\&quot; </span><span class="s1">? -1 : parseInt($$[$0]) };</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 27:</span><span class="s3">\n          </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Rule: id-block statement : </span><span class="s3">\&quot;</span><span class="s1">, $$[$0 - 2], $$[$0 - 1]);</span><span class="s3">\n          </span><span class="s1">const id2 = yy.generateId();</span><span class="s3">\n          </span><span class="s1">this.$ = { ...$$[$0 - 2], type: </span><span class="s3">\&quot;</span><span class="s1">composite</span><span class="s3">\&quot;</span><span class="s1">, children: $$[$0 - 1] };</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 28:</span><span class="s3">\n          </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Rule: blockStatement : </span><span class="s3">\&quot;</span><span class="s1">, $$[$0 - 2], $$[$0 - 1], $$[$0]);</span><span class="s3">\n          </span><span class="s1">const id = yy.generateId();</span><span class="s3">\n          </span><span class="s1">this.$ = { id, type: </span><span class="s3">\&quot;</span><span class="s1">composite</span><span class="s3">\&quot;</span><span class="s1">, label: </span><span class="s3">\&quot;\&quot;</span><span class="s1">, children: $$[$0 - 1] };</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 29:</span><span class="s3">\n          </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Rule: node (NODE_ID separator): </span><span class="s3">\&quot;</span><span class="s1">, $$[$0]);</span><span class="s3">\n          </span><span class="s1">this.$ = { id: $$[$0] };</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 30:</span><span class="s3">\n          </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Rule: node (NODE_ID nodeShapeNLabel separator): </span><span class="s3">\&quot;</span><span class="s1">, $$[$0 - 1], $$[$0]);</span><span class="s3">\n          </span><span class="s1">this.$ = { id: $$[$0 - 1], label: $$[$0].label, typeStr: $$[$0].typeStr, directions: $$[$0].directions };</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 31:</span><span class="s3">\n          </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Rule: dirList: </span><span class="s3">\&quot;</span><span class="s1">, $$[$0]);</span><span class="s3">\n          </span><span class="s1">this.$ = [$$[$0]];</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 32:</span><span class="s3">\n          </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Rule: dirList: </span><span class="s3">\&quot;</span><span class="s1">, $$[$0 - 1], $$[$0]);</span><span class="s3">\n          </span><span class="s1">this.$ = [$$[$0 - 1]].concat($$[$0]);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 33:</span><span class="s3">\n          </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Rule: nodeShapeNLabel: </span><span class="s3">\&quot;</span><span class="s1">, $$[$0 - 2], $$[$0 - 1], $$[$0]);</span><span class="s3">\n          </span><span class="s1">this.$ = { typeStr: $$[$0 - 2] + $$[$0], label: $$[$0 - 1] };</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 34:</span><span class="s3">\n          </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Rule: BLOCK_ARROW nodeShapeNLabel: </span><span class="s3">\&quot;</span><span class="s1">, $$[$0 - 3], $$[$0 - 2], </span><span class="s3">\&quot; </span><span class="s1">#3:</span><span class="s3">\&quot;</span><span class="s1">, $$[$0 - 1], $$[$0]);</span><span class="s3">\n          </span><span class="s1">this.$ = { typeStr: $$[$0 - 3] + $$[$0], label: $$[$0 - 2], directions: $$[$0 - 1] };</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 35:</span><span class="s3">\n        </span><span class="s1">case 36:</span><span class="s3">\n          </span><span class="s1">this.$ = { type: </span><span class="s3">\&quot;</span><span class="s1">classDef</span><span class="s3">\&quot;</span><span class="s1">, id: $$[$0 - 1].trim(), css: $$[$0].trim() };</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 37:</span><span class="s3">\n          </span><span class="s1">this.$ = { type: </span><span class="s3">\&quot;</span><span class="s1">applyClass</span><span class="s3">\&quot;</span><span class="s1">, id: $$[$0 - 1].trim(), styleClass: $$[$0].trim() };</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 38:</span><span class="s3">\n          </span><span class="s1">this.$ = { type: </span><span class="s3">\&quot;</span><span class="s1">applyStyles</span><span class="s3">\&quot;</span><span class="s1">, id: $$[$0 - 1].trim(), stylesStr: $$[$0].trim() };</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">anonymous</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n    </span><span class="s1">table: [{ 9: 1, 10: [1, 2] }, { 1: [3] }, { 11: 3, 13: 4, 19: 5, 20: 6, 21: $V0, 22: 8, 23: 9, 24: 10, 25: 11, 26: 12, 28: $V1, 29: $V2, 31: $V3, 32: $V4, 40: $V5, 44: $V6, 47: $V7 }, { 8: [1, 20] }, o($V8, [2, 12], { 13: 4, 19: 5, 20: 6, 22: 8, 23: 9, 24: 10, 25: 11, 26: 12, 11: 21, 21: $V0, 28: $V1, 29: $V2, 31: $V3, 32: $V4, 40: $V5, 44: $V6, 47: $V7 }), o($V9, [2, 16], { 14: 22, 15: $Va, 16: $Vb }), o($V9, [2, 17]), o($V9, [2, 18]), o($V9, [2, 19]), o($V9, [2, 20]), o($V9, [2, 21]), o($V9, [2, 22]), o($Vc, [2, 25], { 27: [1, 25] }), o($V9, [2, 26]), { 19: 26, 26: 12, 32: $V4 }, { 11: 27, 13: 4, 19: 5, 20: 6, 21: $V0, 22: 8, 23: 9, 24: 10, 25: 11, 26: 12, 28: $V1, 29: $V2, 31: $V3, 32: $V4, 40: $V5, 44: $V6, 47: $V7 }, { 41: [1, 28], 43: [1, 29] }, { 45: [1, 30] }, { 48: [1, 31] }, o($Vd, [2, 29], { 33: 32, 36: [1, 33], 38: [1, 34] }), { 1: [2, 7] }, o($V8, [2, 13]), { 26: 35, 32: $V4 }, { 32: [2, 14] }, { 17: [1, 36] }, o($Vc, [2, 24]), { 11: 37, 13: 4, 14: 22, 15: $Va, 16: $Vb, 19: 5, 20: 6, 21: $V0, 22: 8, 23: 9, 24: 10, 25: 11, 26: 12, 28: $V1, 29: $V2, 31: $V3, 32: $V4, 40: $V5, 44: $V6, 47: $V7 }, { 30: [1, 38] }, { 42: [1, 39] }, { 42: [1, 40] }, { 46: [1, 41] }, { 49: [1, 42] }, o($Vd, [2, 30]), { 18: [1, 43] }, { 18: [1, 44] }, o($Vc, [2, 23]), { 18: [1, 45] }, { 30: [1, 46] }, o($V9, [2, 28]), o($V9, [2, 35]), o($V9, [2, 36]), o($V9, [2, 37]), o($V9, [2, 38]), { 37: [1, 47] }, { 34: 48, 35: $Ve }, { 15: [1, 50] }, o($V9, [2, 27]), o($Vd, [2, 33]), { 39: [1, 51] }, { 34: 52, 35: $Ve, 39: [2, 31] }, { 32: [2, 15] }, o($Vd, [2, 34]), { 39: [2, 32] }],</span><span class="s3">\n    </span><span class="s1">defaultActions: { 20: [2, 7], 23: [2, 14], 50: [2, 15], 52: [2, 32] },</span><span class="s3">\n    </span><span class="s1">parseError: /* @__PURE__ */ __name(function parseError(str, hash) {</span><span class="s3">\n      </span><span class="s1">if (hash.recoverable) {</span><span class="s3">\n        </span><span class="s1">this.trace(str);</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">var error = new Error(str);</span><span class="s3">\n        </span><span class="s1">error.hash = hash;</span><span class="s3">\n        </span><span class="s1">throw error;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">parseError</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n    </span><span class="s1">parse: /* @__PURE__ */ __name(function parse(input) {</span><span class="s3">\n      </span><span class="s1">var self = this, stack = [0], tstack = [], vstack = [null], lstack = [], table = this.table, yytext = </span><span class="s3">\&quot;\&quot;</span><span class="s1">, yylineno = 0, yyleng = 0, recovering = 0, TERROR = 2, EOF = 1;</span><span class="s3">\n      </span><span class="s1">var args = lstack.slice.call(arguments, 1);</span><span class="s3">\n      </span><span class="s1">var lexer2 = Object.create(this.lexer);</span><span class="s3">\n      </span><span class="s1">var sharedState = { yy: {} };</span><span class="s3">\n      </span><span class="s1">for (var k in this.yy) {</span><span class="s3">\n        </span><span class="s1">if (Object.prototype.hasOwnProperty.call(this.yy, k)) {</span><span class="s3">\n          </span><span class="s1">sharedState.yy[k] = this.yy[k];</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">lexer2.setInput(input, sharedState.yy);</span><span class="s3">\n      </span><span class="s1">sharedState.yy.lexer = lexer2;</span><span class="s3">\n      </span><span class="s1">sharedState.yy.parser = this;</span><span class="s3">\n      </span><span class="s1">if (typeof lexer2.yylloc == </span><span class="s3">\&quot;</span><span class="s1">undefined</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n        </span><span class="s1">lexer2.yylloc = {};</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">var yyloc = lexer2.yylloc;</span><span class="s3">\n      </span><span class="s1">lstack.push(yyloc);</span><span class="s3">\n      </span><span class="s1">var ranges = lexer2.options &amp;&amp; lexer2.options.ranges;</span><span class="s3">\n      </span><span class="s1">if (typeof sharedState.yy.parseError === </span><span class="s3">\&quot;</span><span class="s1">function</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n        </span><span class="s1">this.parseError = sharedState.yy.parseError;</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">this.parseError = Object.getPrototypeOf(this).parseError;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">function popStack(n) {</span><span class="s3">\n        </span><span class="s1">stack.length = stack.length - 2 * n;</span><span class="s3">\n        </span><span class="s1">vstack.length = vstack.length - n;</span><span class="s3">\n        </span><span class="s1">lstack.length = lstack.length - n;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">__name(popStack, </span><span class="s3">\&quot;</span><span class="s1">popStack</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">function lex() {</span><span class="s3">\n        </span><span class="s1">var token;</span><span class="s3">\n        </span><span class="s1">token = tstack.pop() || lexer2.lex() || EOF;</span><span class="s3">\n        </span><span class="s1">if (typeof token !== </span><span class="s3">\&quot;</span><span class="s1">number</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n          </span><span class="s1">if (token instanceof Array) {</span><span class="s3">\n            </span><span class="s1">tstack = token;</span><span class="s3">\n            </span><span class="s1">token = tstack.pop();</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">token = self.symbols_[token] || token;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">return token;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">__name(lex, </span><span class="s3">\&quot;</span><span class="s1">lex</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">var symbol, preErrorSymbol, state, action, a, r, yyval = {}, p, len, newState, expected;</span><span class="s3">\n      </span><span class="s1">while (true) {</span><span class="s3">\n        </span><span class="s1">state = stack[stack.length - 1];</span><span class="s3">\n        </span><span class="s1">if (this.defaultActions[state]) {</span><span class="s3">\n          </span><span class="s1">action = this.defaultActions[state];</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">if (symbol === null || typeof symbol == </span><span class="s3">\&quot;</span><span class="s1">undefined</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n            </span><span class="s1">symbol = lex();</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">action = table[state] &amp;&amp; table[state][symbol];</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">if (typeof action === </span><span class="s3">\&quot;</span><span class="s1">undefined</span><span class="s3">\&quot; </span><span class="s1">|| !action.length || !action[0]) {</span><span class="s3">\n          </span><span class="s1">var errStr = </span><span class="s3">\&quot;\&quot;</span><span class="s1">;</span><span class="s3">\n          </span><span class="s1">expected = [];</span><span class="s3">\n          </span><span class="s1">for (p in table[state]) {</span><span class="s3">\n            </span><span class="s1">if (this.terminals_[p] &amp;&amp; p &gt; TERROR) {</span><span class="s3">\n              </span><span class="s1">expected.push(</span><span class="s3">\&quot;</span><span class="s1">'</span><span class="s3">\&quot; </span><span class="s1">+ this.terminals_[p] + </span><span class="s3">\&quot;</span><span class="s1">'</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">if (lexer2.showPosition) {</span><span class="s3">\n            </span><span class="s1">errStr = </span><span class="s3">\&quot;</span><span class="s1">Parse error on line </span><span class="s3">\&quot; </span><span class="s1">+ (yylineno + 1) + </span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\\</span><span class="s1">n</span><span class="s3">\&quot; </span><span class="s1">+ lexer2.showPosition() + </span><span class="s3">\&quot;\\</span><span class="s1">nExpecting </span><span class="s3">\&quot; </span><span class="s1">+ expected.join(</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">) + </span><span class="s3">\&quot;</span><span class="s1">, got '</span><span class="s3">\&quot; </span><span class="s1">+ (this.terminals_[symbol] || symbol) + </span><span class="s3">\&quot;</span><span class="s1">'</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n          </span><span class="s1">} else {</span><span class="s3">\n            </span><span class="s1">errStr = </span><span class="s3">\&quot;</span><span class="s1">Parse error on line </span><span class="s3">\&quot; </span><span class="s1">+ (yylineno + 1) + </span><span class="s3">\&quot;</span><span class="s1">: Unexpected </span><span class="s3">\&quot; </span><span class="s1">+ (symbol == EOF ? </span><span class="s3">\&quot;</span><span class="s1">end of input</span><span class="s3">\&quot; </span><span class="s1">: </span><span class="s3">\&quot;</span><span class="s1">'</span><span class="s3">\&quot; </span><span class="s1">+ (this.terminals_[symbol] || symbol) + </span><span class="s3">\&quot;</span><span class="s1">'</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">this.parseError(errStr, {</span><span class="s3">\n            </span><span class="s1">text: lexer2.match,</span><span class="s3">\n            </span><span class="s1">token: this.terminals_[symbol] || symbol,</span><span class="s3">\n            </span><span class="s1">line: lexer2.yylineno,</span><span class="s3">\n            </span><span class="s1">loc: yyloc,</span><span class="s3">\n            </span><span class="s1">expected</span><span class="s3">\n          </span><span class="s1">});</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">if (action[0] instanceof Array &amp;&amp; action.length &gt; 1) {</span><span class="s3">\n          </span><span class="s1">throw new Error(</span><span class="s3">\&quot;</span><span class="s1">Parse Error: multiple actions possible at state: </span><span class="s3">\&quot; </span><span class="s1">+ state + </span><span class="s3">\&quot;</span><span class="s1">, token: </span><span class="s3">\&quot; </span><span class="s1">+ symbol);</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">switch (action[0]) {</span><span class="s3">\n          </span><span class="s1">case 1:</span><span class="s3">\n            </span><span class="s1">stack.push(symbol);</span><span class="s3">\n            </span><span class="s1">vstack.push(lexer2.yytext);</span><span class="s3">\n            </span><span class="s1">lstack.push(lexer2.yylloc);</span><span class="s3">\n            </span><span class="s1">stack.push(action[1]);</span><span class="s3">\n            </span><span class="s1">symbol = null;</span><span class="s3">\n            </span><span class="s1">if (!preErrorSymbol) {</span><span class="s3">\n              </span><span class="s1">yyleng = lexer2.yyleng;</span><span class="s3">\n              </span><span class="s1">yytext = lexer2.yytext;</span><span class="s3">\n              </span><span class="s1">yylineno = lexer2.yylineno;</span><span class="s3">\n              </span><span class="s1">yyloc = lexer2.yylloc;</span><span class="s3">\n              </span><span class="s1">if (recovering &gt; 0) {</span><span class="s3">\n                </span><span class="s1">recovering--;</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">} else {</span><span class="s3">\n              </span><span class="s1">symbol = preErrorSymbol;</span><span class="s3">\n              </span><span class="s1">preErrorSymbol = null;</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 2:</span><span class="s3">\n            </span><span class="s1">len = this.productions_[action[1]][1];</span><span class="s3">\n            </span><span class="s1">yyval.$ = vstack[vstack.length - len];</span><span class="s3">\n            </span><span class="s1">yyval._$ = {</span><span class="s3">\n              </span><span class="s1">first_line: lstack[lstack.length - (len || 1)].first_line,</span><span class="s3">\n              </span><span class="s1">last_line: lstack[lstack.length - 1].last_line,</span><span class="s3">\n              </span><span class="s1">first_column: lstack[lstack.length - (len || 1)].first_column,</span><span class="s3">\n              </span><span class="s1">last_column: lstack[lstack.length - 1].last_column</span><span class="s3">\n            </span><span class="s1">};</span><span class="s3">\n            </span><span class="s1">if (ranges) {</span><span class="s3">\n              </span><span class="s1">yyval._$.range = [</span><span class="s3">\n                </span><span class="s1">lstack[lstack.length - (len || 1)].range[0],</span><span class="s3">\n                </span><span class="s1">lstack[lstack.length - 1].range[1]</span><span class="s3">\n              </span><span class="s1">];</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">r = this.performAction.apply(yyval, [</span><span class="s3">\n              </span><span class="s1">yytext,</span><span class="s3">\n              </span><span class="s1">yyleng,</span><span class="s3">\n              </span><span class="s1">yylineno,</span><span class="s3">\n              </span><span class="s1">sharedState.yy,</span><span class="s3">\n              </span><span class="s1">action[1],</span><span class="s3">\n              </span><span class="s1">vstack,</span><span class="s3">\n              </span><span class="s1">lstack</span><span class="s3">\n            </span><span class="s1">].concat(args));</span><span class="s3">\n            </span><span class="s1">if (typeof r !== </span><span class="s3">\&quot;</span><span class="s1">undefined</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n              </span><span class="s1">return r;</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">if (len) {</span><span class="s3">\n              </span><span class="s1">stack = stack.slice(0, -1 * len * 2);</span><span class="s3">\n              </span><span class="s1">vstack = vstack.slice(0, -1 * len);</span><span class="s3">\n              </span><span class="s1">lstack = lstack.slice(0, -1 * len);</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">stack.push(this.productions_[action[1]][0]);</span><span class="s3">\n            </span><span class="s1">vstack.push(yyval.$);</span><span class="s3">\n            </span><span class="s1">lstack.push(yyval._$);</span><span class="s3">\n            </span><span class="s1">newState = table[stack[stack.length - 2]][stack[stack.length - 1]];</span><span class="s3">\n            </span><span class="s1">stack.push(newState);</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 3:</span><span class="s3">\n            </span><span class="s1">return true;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">return true;</span><span class="s3">\n    </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">parse</span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">var lexer = /* @__PURE__ */ function() {</span><span class="s3">\n    </span><span class="s1">var lexer2 = {</span><span class="s3">\n      </span><span class="s1">EOF: 1,</span><span class="s3">\n      </span><span class="s1">parseError: /* @__PURE__ */ __name(function parseError(str, hash) {</span><span class="s3">\n        </span><span class="s1">if (this.yy.parser) {</span><span class="s3">\n          </span><span class="s1">this.yy.parser.parseError(str, hash);</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">throw new Error(str);</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">parseError</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">// resets the lexer, sets new input</span><span class="s3">\n      </span><span class="s1">setInput: /* @__PURE__ */ __name(function(input, yy) {</span><span class="s3">\n        </span><span class="s1">this.yy = yy || this.yy || {};</span><span class="s3">\n        </span><span class="s1">this._input = input;</span><span class="s3">\n        </span><span class="s1">this._more = this._backtrack = this.done = false;</span><span class="s3">\n        </span><span class="s1">this.yylineno = this.yyleng = 0;</span><span class="s3">\n        </span><span class="s1">this.yytext = this.matched = this.match = </span><span class="s3">\&quot;\&quot;</span><span class="s1">;</span><span class="s3">\n        </span><span class="s1">this.conditionStack = [</span><span class="s3">\&quot;</span><span class="s1">INITIAL</span><span class="s3">\&quot;</span><span class="s1">];</span><span class="s3">\n        </span><span class="s1">this.yylloc = {</span><span class="s3">\n          </span><span class="s1">first_line: 1,</span><span class="s3">\n          </span><span class="s1">first_column: 0,</span><span class="s3">\n          </span><span class="s1">last_line: 1,</span><span class="s3">\n          </span><span class="s1">last_column: 0</span><span class="s3">\n        </span><span class="s1">};</span><span class="s3">\n        </span><span class="s1">if (this.options.ranges) {</span><span class="s3">\n          </span><span class="s1">this.yylloc.range = [0, 0];</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">this.offset = 0;</span><span class="s3">\n        </span><span class="s1">return this;</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">setInput</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">// consumes and returns one char from the input</span><span class="s3">\n      </span><span class="s1">input: /* @__PURE__ */ __name(function() {</span><span class="s3">\n        </span><span class="s1">var ch = this._input[0];</span><span class="s3">\n        </span><span class="s1">this.yytext += ch;</span><span class="s3">\n        </span><span class="s1">this.yyleng++;</span><span class="s3">\n        </span><span class="s1">this.offset++;</span><span class="s3">\n        </span><span class="s1">this.match += ch;</span><span class="s3">\n        </span><span class="s1">this.matched += ch;</span><span class="s3">\n        </span><span class="s1">var lines = ch.match(/(?:</span><span class="s3">\\</span><span class="s1">r</span><span class="s3">\\</span><span class="s1">n?|</span><span class="s3">\\</span><span class="s1">n).*/g);</span><span class="s3">\n        </span><span class="s1">if (lines) {</span><span class="s3">\n          </span><span class="s1">this.yylineno++;</span><span class="s3">\n          </span><span class="s1">this.yylloc.last_line++;</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">this.yylloc.last_column++;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">if (this.options.ranges) {</span><span class="s3">\n          </span><span class="s1">this.yylloc.range[1]++;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">this._input = this._input.slice(1);</span><span class="s3">\n        </span><span class="s1">return ch;</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">input</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">// unshifts one char (or a string) into the input</span><span class="s3">\n      </span><span class="s1">unput: /* @__PURE__ */ __name(function(ch) {</span><span class="s3">\n        </span><span class="s1">var len = ch.length;</span><span class="s3">\n        </span><span class="s1">var lines = ch.split(/(?:</span><span class="s3">\\</span><span class="s1">r</span><span class="s3">\\</span><span class="s1">n?|</span><span class="s3">\\</span><span class="s1">n)/g);</span><span class="s3">\n        </span><span class="s1">this._input = ch + this._input;</span><span class="s3">\n        </span><span class="s1">this.yytext = this.yytext.substr(0, this.yytext.length - len);</span><span class="s3">\n        </span><span class="s1">this.offset -= len;</span><span class="s3">\n        </span><span class="s1">var oldLines = this.match.split(/(?:</span><span class="s3">\\</span><span class="s1">r</span><span class="s3">\\</span><span class="s1">n?|</span><span class="s3">\\</span><span class="s1">n)/g);</span><span class="s3">\n        </span><span class="s1">this.match = this.match.substr(0, this.match.length - 1);</span><span class="s3">\n        </span><span class="s1">this.matched = this.matched.substr(0, this.matched.length - 1);</span><span class="s3">\n        </span><span class="s1">if (lines.length - 1) {</span><span class="s3">\n          </span><span class="s1">this.yylineno -= lines.length - 1;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">var r = this.yylloc.range;</span><span class="s3">\n        </span><span class="s1">this.yylloc = {</span><span class="s3">\n          </span><span class="s1">first_line: this.yylloc.first_line,</span><span class="s3">\n          </span><span class="s1">last_line: this.yylineno + 1,</span><span class="s3">\n          </span><span class="s1">first_column: this.yylloc.first_column,</span><span class="s3">\n          </span><span class="s1">last_column: lines ? (lines.length === oldLines.length ? this.yylloc.first_column : 0) + oldLines[oldLines.length - lines.length].length - lines[0].length : this.yylloc.first_column - len</span><span class="s3">\n        </span><span class="s1">};</span><span class="s3">\n        </span><span class="s1">if (this.options.ranges) {</span><span class="s3">\n          </span><span class="s1">this.yylloc.range = [r[0], r[0] + this.yyleng - len];</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">this.yyleng = this.yytext.length;</span><span class="s3">\n        </span><span class="s1">return this;</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">unput</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">// When called from action, caches matched text and appends it on next action</span><span class="s3">\n      </span><span class="s1">more: /* @__PURE__ */ __name(function() {</span><span class="s3">\n        </span><span class="s1">this._more = true;</span><span class="s3">\n        </span><span class="s1">return this;</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">more</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">// When called from action, signals the lexer that this rule fails to match the input, so the next matching rule (regex) should be tested instead.</span><span class="s3">\n      </span><span class="s1">reject: /* @__PURE__ */ __name(function() {</span><span class="s3">\n        </span><span class="s1">if (this.options.backtrack_lexer) {</span><span class="s3">\n          </span><span class="s1">this._backtrack = true;</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">return this.parseError(</span><span class="s3">\&quot;</span><span class="s1">Lexical error on line </span><span class="s3">\&quot; </span><span class="s1">+ (this.yylineno + 1) + </span><span class="s3">\&quot;</span><span class="s1">. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).</span><span class="s3">\\</span><span class="s1">n</span><span class="s3">\&quot; </span><span class="s1">+ this.showPosition(), {</span><span class="s3">\n            </span><span class="s1">text: </span><span class="s3">\&quot;\&quot;</span><span class="s1">,</span><span class="s3">\n            </span><span class="s1">token: null,</span><span class="s3">\n            </span><span class="s1">line: this.yylineno</span><span class="s3">\n          </span><span class="s1">});</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">return this;</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">reject</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">// retain first n characters of the match</span><span class="s3">\n      </span><span class="s1">less: /* @__PURE__ */ __name(function(n) {</span><span class="s3">\n        </span><span class="s1">this.unput(this.match.slice(n));</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">less</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">// displays already matched input, i.e. for error messages</span><span class="s3">\n      </span><span class="s1">pastInput: /* @__PURE__ */ __name(function() {</span><span class="s3">\n        </span><span class="s1">var past = this.matched.substr(0, this.matched.length - this.match.length);</span><span class="s3">\n        </span><span class="s1">return (past.length &gt; 20 ? </span><span class="s3">\&quot;</span><span class="s1">...</span><span class="s3">\&quot; </span><span class="s1">: </span><span class="s3">\&quot;\&quot;</span><span class="s1">) + past.substr(-20).replace(/</span><span class="s3">\\</span><span class="s1">n/g, </span><span class="s3">\&quot;\&quot;</span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">pastInput</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">// displays upcoming input, i.e. for error messages</span><span class="s3">\n      </span><span class="s1">upcomingInput: /* @__PURE__ */ __name(function() {</span><span class="s3">\n        </span><span class="s1">var next = this.match;</span><span class="s3">\n        </span><span class="s1">if (next.length &lt; 20) {</span><span class="s3">\n          </span><span class="s1">next += this._input.substr(0, 20 - next.length);</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">return (next.substr(0, 20) + (next.length &gt; 20 ? </span><span class="s3">\&quot;</span><span class="s1">...</span><span class="s3">\&quot; </span><span class="s1">: </span><span class="s3">\&quot;\&quot;</span><span class="s1">)).replace(/</span><span class="s3">\\</span><span class="s1">n/g, </span><span class="s3">\&quot;\&quot;</span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">upcomingInput</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">// displays the character position where the lexing error occurred, i.e. for error messages</span><span class="s3">\n      </span><span class="s1">showPosition: /* @__PURE__ */ __name(function() {</span><span class="s3">\n        </span><span class="s1">var pre = this.pastInput();</span><span class="s3">\n        </span><span class="s1">var c = new Array(pre.length + 1).join(</span><span class="s3">\&quot;</span><span class="s1">-</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n        </span><span class="s1">return pre + this.upcomingInput() + </span><span class="s3">\&quot;\\</span><span class="s1">n</span><span class="s3">\&quot; </span><span class="s1">+ c + </span><span class="s3">\&quot;</span><span class="s1">^</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">showPosition</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">// test the lexed token: return FALSE when not a match, otherwise return token</span><span class="s3">\n      </span><span class="s1">test_match: /* @__PURE__ */ __name(function(match, indexed_rule) {</span><span class="s3">\n        </span><span class="s1">var token, lines, backup;</span><span class="s3">\n        </span><span class="s1">if (this.options.backtrack_lexer) {</span><span class="s3">\n          </span><span class="s1">backup = {</span><span class="s3">\n            </span><span class="s1">yylineno: this.yylineno,</span><span class="s3">\n            </span><span class="s1">yylloc: {</span><span class="s3">\n              </span><span class="s1">first_line: this.yylloc.first_line,</span><span class="s3">\n              </span><span class="s1">last_line: this.last_line,</span><span class="s3">\n              </span><span class="s1">first_column: this.yylloc.first_column,</span><span class="s3">\n              </span><span class="s1">last_column: this.yylloc.last_column</span><span class="s3">\n            </span><span class="s1">},</span><span class="s3">\n            </span><span class="s1">yytext: this.yytext,</span><span class="s3">\n            </span><span class="s1">match: this.match,</span><span class="s3">\n            </span><span class="s1">matches: this.matches,</span><span class="s3">\n            </span><span class="s1">matched: this.matched,</span><span class="s3">\n            </span><span class="s1">yyleng: this.yyleng,</span><span class="s3">\n            </span><span class="s1">offset: this.offset,</span><span class="s3">\n            </span><span class="s1">_more: this._more,</span><span class="s3">\n            </span><span class="s1">_input: this._input,</span><span class="s3">\n            </span><span class="s1">yy: this.yy,</span><span class="s3">\n            </span><span class="s1">conditionStack: this.conditionStack.slice(0),</span><span class="s3">\n            </span><span class="s1">done: this.done</span><span class="s3">\n          </span><span class="s1">};</span><span class="s3">\n          </span><span class="s1">if (this.options.ranges) {</span><span class="s3">\n            </span><span class="s1">backup.yylloc.range = this.yylloc.range.slice(0);</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">lines = match[0].match(/(?:</span><span class="s3">\\</span><span class="s1">r</span><span class="s3">\\</span><span class="s1">n?|</span><span class="s3">\\</span><span class="s1">n).*/g);</span><span class="s3">\n        </span><span class="s1">if (lines) {</span><span class="s3">\n          </span><span class="s1">this.yylineno += lines.length;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">this.yylloc = {</span><span class="s3">\n          </span><span class="s1">first_line: this.yylloc.last_line,</span><span class="s3">\n          </span><span class="s1">last_line: this.yylineno + 1,</span><span class="s3">\n          </span><span class="s1">first_column: this.yylloc.last_column,</span><span class="s3">\n          </span><span class="s1">last_column: lines ? lines[lines.length - 1].length - lines[lines.length - 1].match(/</span><span class="s3">\\</span><span class="s1">r?</span><span class="s3">\\</span><span class="s1">n?/)[0].length : this.yylloc.last_column + match[0].length</span><span class="s3">\n        </span><span class="s1">};</span><span class="s3">\n        </span><span class="s1">this.yytext += match[0];</span><span class="s3">\n        </span><span class="s1">this.match += match[0];</span><span class="s3">\n        </span><span class="s1">this.matches = match;</span><span class="s3">\n        </span><span class="s1">this.yyleng = this.yytext.length;</span><span class="s3">\n        </span><span class="s1">if (this.options.ranges) {</span><span class="s3">\n          </span><span class="s1">this.yylloc.range = [this.offset, this.offset += this.yyleng];</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">this._more = false;</span><span class="s3">\n        </span><span class="s1">this._backtrack = false;</span><span class="s3">\n        </span><span class="s1">this._input = this._input.slice(match[0].length);</span><span class="s3">\n        </span><span class="s1">this.matched += match[0];</span><span class="s3">\n        </span><span class="s1">token = this.performAction.call(this, this.yy, this, indexed_rule, this.conditionStack[this.conditionStack.length - 1]);</span><span class="s3">\n        </span><span class="s1">if (this.done &amp;&amp; this._input) {</span><span class="s3">\n          </span><span class="s1">this.done = false;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">if (token) {</span><span class="s3">\n          </span><span class="s1">return token;</span><span class="s3">\n        </span><span class="s1">} else if (this._backtrack) {</span><span class="s3">\n          </span><span class="s1">for (var k in backup) {</span><span class="s3">\n            </span><span class="s1">this[k] = backup[k];</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">return false;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">return false;</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">test_match</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">// return next match in input</span><span class="s3">\n      </span><span class="s1">next: /* @__PURE__ */ __name(function() {</span><span class="s3">\n        </span><span class="s1">if (this.done) {</span><span class="s3">\n          </span><span class="s1">return this.EOF;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">if (!this._input) {</span><span class="s3">\n          </span><span class="s1">this.done = true;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">var token, match, tempMatch, index;</span><span class="s3">\n        </span><span class="s1">if (!this._more) {</span><span class="s3">\n          </span><span class="s1">this.yytext = </span><span class="s3">\&quot;\&quot;</span><span class="s1">;</span><span class="s3">\n          </span><span class="s1">this.match = </span><span class="s3">\&quot;\&quot;</span><span class="s1">;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">var rules = this._currentRules();</span><span class="s3">\n        </span><span class="s1">for (var i = 0; i &lt; rules.length; i++) {</span><span class="s3">\n          </span><span class="s1">tempMatch = this._input.match(this.rules[rules[i]]);</span><span class="s3">\n          </span><span class="s1">if (tempMatch &amp;&amp; (!match || tempMatch[0].length &gt; match[0].length)) {</span><span class="s3">\n            </span><span class="s1">match = tempMatch;</span><span class="s3">\n            </span><span class="s1">index = i;</span><span class="s3">\n            </span><span class="s1">if (this.options.backtrack_lexer) {</span><span class="s3">\n              </span><span class="s1">token = this.test_match(tempMatch, rules[i]);</span><span class="s3">\n              </span><span class="s1">if (token !== false) {</span><span class="s3">\n                </span><span class="s1">return token;</span><span class="s3">\n              </span><span class="s1">} else if (this._backtrack) {</span><span class="s3">\n                </span><span class="s1">match = false;</span><span class="s3">\n                </span><span class="s1">continue;</span><span class="s3">\n              </span><span class="s1">} else {</span><span class="s3">\n                </span><span class="s1">return false;</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">} else if (!this.options.flex) {</span><span class="s3">\n              </span><span class="s1">break;</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">if (match) {</span><span class="s3">\n          </span><span class="s1">token = this.test_match(match, rules[index]);</span><span class="s3">\n          </span><span class="s1">if (token !== false) {</span><span class="s3">\n            </span><span class="s1">return token;</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">return false;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">if (this._input === </span><span class="s3">\&quot;\&quot;</span><span class="s1">) {</span><span class="s3">\n          </span><span class="s1">return this.EOF;</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">return this.parseError(</span><span class="s3">\&quot;</span><span class="s1">Lexical error on line </span><span class="s3">\&quot; </span><span class="s1">+ (this.yylineno + 1) + </span><span class="s3">\&quot;</span><span class="s1">. Unrecognized text.</span><span class="s3">\\</span><span class="s1">n</span><span class="s3">\&quot; </span><span class="s1">+ this.showPosition(), {</span><span class="s3">\n            </span><span class="s1">text: </span><span class="s3">\&quot;\&quot;</span><span class="s1">,</span><span class="s3">\n            </span><span class="s1">token: null,</span><span class="s3">\n            </span><span class="s1">line: this.yylineno</span><span class="s3">\n          </span><span class="s1">});</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">next</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">// return next match that has a token</span><span class="s3">\n      </span><span class="s1">lex: /* @__PURE__ */ __name(function lex() {</span><span class="s3">\n        </span><span class="s1">var r = this.next();</span><span class="s3">\n        </span><span class="s1">if (r) {</span><span class="s3">\n          </span><span class="s1">return r;</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">return this.lex();</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">lex</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">// activates a new lexer condition state (pushes the new lexer condition state onto the condition stack)</span><span class="s3">\n      </span><span class="s1">begin: /* @__PURE__ */ __name(function begin(condition) {</span><span class="s3">\n        </span><span class="s1">this.conditionStack.push(condition);</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">begin</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">// pop the previously active lexer condition state off the condition stack</span><span class="s3">\n      </span><span class="s1">popState: /* @__PURE__ */ __name(function popState() {</span><span class="s3">\n        </span><span class="s1">var n = this.conditionStack.length - 1;</span><span class="s3">\n        </span><span class="s1">if (n &gt; 0) {</span><span class="s3">\n          </span><span class="s1">return this.conditionStack.pop();</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">return this.conditionStack[0];</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">popState</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">// produce the lexer rule set which is active for the currently active lexer condition state</span><span class="s3">\n      </span><span class="s1">_currentRules: /* @__PURE__ */ __name(function _currentRules() {</span><span class="s3">\n        </span><span class="s1">if (this.conditionStack.length &amp;&amp; this.conditionStack[this.conditionStack.length - 1]) {</span><span class="s3">\n          </span><span class="s1">return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">return this.conditions[</span><span class="s3">\&quot;</span><span class="s1">INITIAL</span><span class="s3">\&quot;</span><span class="s1">].rules;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">_currentRules</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">// return the currently active lexer condition state; when an index argument is provided it produces the N-th previous condition state, if available</span><span class="s3">\n      </span><span class="s1">topState: /* @__PURE__ */ __name(function topState(n) {</span><span class="s3">\n        </span><span class="s1">n = this.conditionStack.length - 1 - Math.abs(n || 0);</span><span class="s3">\n        </span><span class="s1">if (n &gt;= 0) {</span><span class="s3">\n          </span><span class="s1">return this.conditionStack[n];</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">INITIAL</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">topState</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">// alias for begin(condition)</span><span class="s3">\n      </span><span class="s1">pushState: /* @__PURE__ */ __name(function pushState(condition) {</span><span class="s3">\n        </span><span class="s1">this.begin(condition);</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">pushState</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">// return the number of states currently on the stack</span><span class="s3">\n      </span><span class="s1">stateStackSize: /* @__PURE__ */ __name(function stateStackSize() {</span><span class="s3">\n        </span><span class="s1">return this.conditionStack.length;</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">stateStackSize</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">options: {},</span><span class="s3">\n      </span><span class="s1">performAction: /* @__PURE__ */ __name(function anonymous(yy, yy_, $avoiding_name_collisions, YY_START) {</span><span class="s3">\n        </span><span class="s1">var YYSTATE = YY_START;</span><span class="s3">\n        </span><span class="s1">switch ($avoiding_name_collisions) {</span><span class="s3">\n          </span><span class="s1">case 0:</span><span class="s3">\n            </span><span class="s1">return 10;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 1:</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Found space-block</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 31;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 2:</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Found nl-block</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 31;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 3:</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Found space-block</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 29;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 4:</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">.</span><span class="s3">\&quot;</span><span class="s1">, yy_.yytext);</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 5:</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">_</span><span class="s3">\&quot;</span><span class="s1">, yy_.yytext);</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 6:</span><span class="s3">\n            </span><span class="s1">return 5;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 7:</span><span class="s3">\n            </span><span class="s1">yy_.yytext = -1;</span><span class="s3">\n            </span><span class="s1">return 28;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 8:</span><span class="s3">\n            </span><span class="s1">yy_.yytext = yy_.yytext.replace(/columns</span><span class="s3">\\</span><span class="s1">s+/, </span><span class="s3">\&quot;\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">COLUMNS (LEX)</span><span class="s3">\&quot;</span><span class="s1">, yy_.yytext);</span><span class="s3">\n            </span><span class="s1">return 28;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 9:</span><span class="s3">\n            </span><span class="s1">this.pushState(</span><span class="s3">\&quot;</span><span class="s1">md_string</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 10:</span><span class="s3">\n            </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">MD_STR</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 11:</span><span class="s3">\n            </span><span class="s1">this.popState();</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 12:</span><span class="s3">\n            </span><span class="s1">this.pushState(</span><span class="s3">\&quot;</span><span class="s1">string</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 13:</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">LEX: POPPING STR:</span><span class="s3">\&quot;</span><span class="s1">, yy_.yytext);</span><span class="s3">\n            </span><span class="s1">this.popState();</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 14:</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">LEX: STR end:</span><span class="s3">\&quot;</span><span class="s1">, yy_.yytext);</span><span class="s3">\n            </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">STR</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 15:</span><span class="s3">\n            </span><span class="s1">yy_.yytext = yy_.yytext.replace(/space</span><span class="s3">\\</span><span class="s1">:/, </span><span class="s3">\&quot;\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">SPACE NUM (LEX)</span><span class="s3">\&quot;</span><span class="s1">, yy_.yytext);</span><span class="s3">\n            </span><span class="s1">return 21;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 16:</span><span class="s3">\n            </span><span class="s1">yy_.yytext = </span><span class="s3">\&quot;</span><span class="s1">1</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">COLUMNS (LEX)</span><span class="s3">\&quot;</span><span class="s1">, yy_.yytext);</span><span class="s3">\n            </span><span class="s1">return 21;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 17:</span><span class="s3">\n            </span><span class="s1">return 43;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 18:</span><span class="s3">\n            </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">LINKSTYLE</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 19:</span><span class="s3">\n            </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">INTERPOLATE</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 20:</span><span class="s3">\n            </span><span class="s1">this.pushState(</span><span class="s3">\&quot;</span><span class="s1">CLASSDEF</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 40;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 21:</span><span class="s3">\n            </span><span class="s1">this.popState();</span><span class="s3">\n            </span><span class="s1">this.pushState(</span><span class="s3">\&quot;</span><span class="s1">CLASSDEFID</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">DEFAULT_CLASSDEF_ID</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 22:</span><span class="s3">\n            </span><span class="s1">this.popState();</span><span class="s3">\n            </span><span class="s1">this.pushState(</span><span class="s3">\&quot;</span><span class="s1">CLASSDEFID</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 41;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 23:</span><span class="s3">\n            </span><span class="s1">this.popState();</span><span class="s3">\n            </span><span class="s1">return 42;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 24:</span><span class="s3">\n            </span><span class="s1">this.pushState(</span><span class="s3">\&quot;</span><span class="s1">CLASS</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 44;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 25:</span><span class="s3">\n            </span><span class="s1">this.popState();</span><span class="s3">\n            </span><span class="s1">this.pushState(</span><span class="s3">\&quot;</span><span class="s1">CLASS_STYLE</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 45;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 26:</span><span class="s3">\n            </span><span class="s1">this.popState();</span><span class="s3">\n            </span><span class="s1">return 46;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 27:</span><span class="s3">\n            </span><span class="s1">this.pushState(</span><span class="s3">\&quot;</span><span class="s1">STYLE_STMNT</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 47;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 28:</span><span class="s3">\n            </span><span class="s1">this.popState();</span><span class="s3">\n            </span><span class="s1">this.pushState(</span><span class="s3">\&quot;</span><span class="s1">STYLE_DEFINITION</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 48;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 29:</span><span class="s3">\n            </span><span class="s1">this.popState();</span><span class="s3">\n            </span><span class="s1">return 49;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 30:</span><span class="s3">\n            </span><span class="s1">this.pushState(</span><span class="s3">\&quot;</span><span class="s1">acc_title</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">acc_title</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 31:</span><span class="s3">\n            </span><span class="s1">this.popState();</span><span class="s3">\n            </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">acc_title_value</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 32:</span><span class="s3">\n            </span><span class="s1">this.pushState(</span><span class="s3">\&quot;</span><span class="s1">acc_descr</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">acc_descr</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 33:</span><span class="s3">\n            </span><span class="s1">this.popState();</span><span class="s3">\n            </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">acc_descr_value</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 34:</span><span class="s3">\n            </span><span class="s1">this.pushState(</span><span class="s3">\&quot;</span><span class="s1">acc_descr_multiline</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 35:</span><span class="s3">\n            </span><span class="s1">this.popState();</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 36:</span><span class="s3">\n            </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">acc_descr_multiline_value</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 37:</span><span class="s3">\n            </span><span class="s1">return 30;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 38:</span><span class="s3">\n            </span><span class="s1">this.popState();</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Lex: ((</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">NODE_DEND</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 39:</span><span class="s3">\n            </span><span class="s1">this.popState();</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Lex: ((</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">NODE_DEND</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 40:</span><span class="s3">\n            </span><span class="s1">this.popState();</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Lex: ))</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">NODE_DEND</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 41:</span><span class="s3">\n            </span><span class="s1">this.popState();</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Lex: ((</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">NODE_DEND</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 42:</span><span class="s3">\n            </span><span class="s1">this.popState();</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Lex: ((</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">NODE_DEND</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 43:</span><span class="s3">\n            </span><span class="s1">this.popState();</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Lex: (-</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">NODE_DEND</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 44:</span><span class="s3">\n            </span><span class="s1">this.popState();</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Lex: -)</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">NODE_DEND</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 45:</span><span class="s3">\n            </span><span class="s1">this.popState();</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Lex: ((</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">NODE_DEND</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 46:</span><span class="s3">\n            </span><span class="s1">this.popState();</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Lex: ]]</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">NODE_DEND</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 47:</span><span class="s3">\n            </span><span class="s1">this.popState();</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Lex: (</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">NODE_DEND</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 48:</span><span class="s3">\n            </span><span class="s1">this.popState();</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Lex: ])</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">NODE_DEND</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 49:</span><span class="s3">\n            </span><span class="s1">this.popState();</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Lex: /]</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">NODE_DEND</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 50:</span><span class="s3">\n            </span><span class="s1">this.popState();</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Lex: /]</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">NODE_DEND</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 51:</span><span class="s3">\n            </span><span class="s1">this.popState();</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Lex: )]</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">NODE_DEND</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 52:</span><span class="s3">\n            </span><span class="s1">this.popState();</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Lex: )</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">NODE_DEND</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 53:</span><span class="s3">\n            </span><span class="s1">this.popState();</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Lex: ]&gt;</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">NODE_DEND</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 54:</span><span class="s3">\n            </span><span class="s1">this.popState();</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Lex: ]</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">NODE_DEND</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 55:</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Lexa: -)</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">this.pushState(</span><span class="s3">\&quot;</span><span class="s1">NODE</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 36;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 56:</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Lexa: (-</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">this.pushState(</span><span class="s3">\&quot;</span><span class="s1">NODE</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 36;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 57:</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Lexa: ))</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">this.pushState(</span><span class="s3">\&quot;</span><span class="s1">NODE</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 36;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 58:</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Lexa: )</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">this.pushState(</span><span class="s3">\&quot;</span><span class="s1">NODE</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 36;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 59:</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Lex: (((</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">this.pushState(</span><span class="s3">\&quot;</span><span class="s1">NODE</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 36;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 60:</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Lexa: )</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">this.pushState(</span><span class="s3">\&quot;</span><span class="s1">NODE</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 36;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 61:</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Lexa: )</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">this.pushState(</span><span class="s3">\&quot;</span><span class="s1">NODE</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 36;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 62:</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Lexa: )</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">this.pushState(</span><span class="s3">\&quot;</span><span class="s1">NODE</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 36;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 63:</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Lexc: &gt;</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">this.pushState(</span><span class="s3">\&quot;</span><span class="s1">NODE</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 36;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 64:</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Lexa: ([</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">this.pushState(</span><span class="s3">\&quot;</span><span class="s1">NODE</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 36;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 65:</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Lexa: )</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">this.pushState(</span><span class="s3">\&quot;</span><span class="s1">NODE</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 36;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 66:</span><span class="s3">\n            </span><span class="s1">this.pushState(</span><span class="s3">\&quot;</span><span class="s1">NODE</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 36;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 67:</span><span class="s3">\n            </span><span class="s1">this.pushState(</span><span class="s3">\&quot;</span><span class="s1">NODE</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 36;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 68:</span><span class="s3">\n            </span><span class="s1">this.pushState(</span><span class="s3">\&quot;</span><span class="s1">NODE</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 36;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 69:</span><span class="s3">\n            </span><span class="s1">this.pushState(</span><span class="s3">\&quot;</span><span class="s1">NODE</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 36;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 70:</span><span class="s3">\n            </span><span class="s1">this.pushState(</span><span class="s3">\&quot;</span><span class="s1">NODE</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 36;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 71:</span><span class="s3">\n            </span><span class="s1">this.pushState(</span><span class="s3">\&quot;</span><span class="s1">NODE</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 36;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 72:</span><span class="s3">\n            </span><span class="s1">this.pushState(</span><span class="s3">\&quot;</span><span class="s1">NODE</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 36;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 73:</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Lexa: [</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">this.pushState(</span><span class="s3">\&quot;</span><span class="s1">NODE</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 36;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 74:</span><span class="s3">\n            </span><span class="s1">this.pushState(</span><span class="s3">\&quot;</span><span class="s1">BLOCK_ARROW</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">LEX ARR START</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 38;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 75:</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Lex: NODE_ID</span><span class="s3">\&quot;</span><span class="s1">, yy_.yytext);</span><span class="s3">\n            </span><span class="s1">return 32;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 76:</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Lex: EOF</span><span class="s3">\&quot;</span><span class="s1">, yy_.yytext);</span><span class="s3">\n            </span><span class="s1">return 8;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 77:</span><span class="s3">\n            </span><span class="s1">this.pushState(</span><span class="s3">\&quot;</span><span class="s1">md_string</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 78:</span><span class="s3">\n            </span><span class="s1">this.pushState(</span><span class="s3">\&quot;</span><span class="s1">md_string</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 79:</span><span class="s3">\n            </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">NODE_DESCR</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 80:</span><span class="s3">\n            </span><span class="s1">this.popState();</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 81:</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Lex: Starting string</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">this.pushState(</span><span class="s3">\&quot;</span><span class="s1">string</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 82:</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">LEX ARR: Starting string</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">this.pushState(</span><span class="s3">\&quot;</span><span class="s1">string</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 83:</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">LEX: NODE_DESCR:</span><span class="s3">\&quot;</span><span class="s1">, yy_.yytext);</span><span class="s3">\n            </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">NODE_DESCR</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 84:</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">LEX POPPING</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">this.popState();</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 85:</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Lex: =&gt;BAE</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">this.pushState(</span><span class="s3">\&quot;</span><span class="s1">ARROW_DIR</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 86:</span><span class="s3">\n            </span><span class="s1">yy_.yytext = yy_.yytext.replace(/^,</span><span class="s3">\\</span><span class="s1">s*/, </span><span class="s3">\&quot;\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Lex (right): dir:</span><span class="s3">\&quot;</span><span class="s1">, yy_.yytext);</span><span class="s3">\n            </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">DIR</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 87:</span><span class="s3">\n            </span><span class="s1">yy_.yytext = yy_.yytext.replace(/^,</span><span class="s3">\\</span><span class="s1">s*/, </span><span class="s3">\&quot;\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Lex (left):</span><span class="s3">\&quot;</span><span class="s1">, yy_.yytext);</span><span class="s3">\n            </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">DIR</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 88:</span><span class="s3">\n            </span><span class="s1">yy_.yytext = yy_.yytext.replace(/^,</span><span class="s3">\\</span><span class="s1">s*/, </span><span class="s3">\&quot;\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Lex (x):</span><span class="s3">\&quot;</span><span class="s1">, yy_.yytext);</span><span class="s3">\n            </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">DIR</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 89:</span><span class="s3">\n            </span><span class="s1">yy_.yytext = yy_.yytext.replace(/^,</span><span class="s3">\\</span><span class="s1">s*/, </span><span class="s3">\&quot;\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Lex (y):</span><span class="s3">\&quot;</span><span class="s1">, yy_.yytext);</span><span class="s3">\n            </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">DIR</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 90:</span><span class="s3">\n            </span><span class="s1">yy_.yytext = yy_.yytext.replace(/^,</span><span class="s3">\\</span><span class="s1">s*/, </span><span class="s3">\&quot;\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Lex (up):</span><span class="s3">\&quot;</span><span class="s1">, yy_.yytext);</span><span class="s3">\n            </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">DIR</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 91:</span><span class="s3">\n            </span><span class="s1">yy_.yytext = yy_.yytext.replace(/^,</span><span class="s3">\\</span><span class="s1">s*/, </span><span class="s3">\&quot;\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Lex (down):</span><span class="s3">\&quot;</span><span class="s1">, yy_.yytext);</span><span class="s3">\n            </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">DIR</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 92:</span><span class="s3">\n            </span><span class="s1">yy_.yytext = </span><span class="s3">\&quot;</span><span class="s1">]&gt;</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Lex (ARROW_DIR end):</span><span class="s3">\&quot;</span><span class="s1">, yy_.yytext);</span><span class="s3">\n            </span><span class="s1">this.popState();</span><span class="s3">\n            </span><span class="s1">this.popState();</span><span class="s3">\n            </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">BLOCK_ARROW_END</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 93:</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Lex: LINK</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">#</span><span class="s3">\&quot; </span><span class="s1">+ yy_.yytext + </span><span class="s3">\&quot;</span><span class="s1">#</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 15;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 94:</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Lex: LINK</span><span class="s3">\&quot;</span><span class="s1">, yy_.yytext);</span><span class="s3">\n            </span><span class="s1">return 15;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 95:</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Lex: LINK</span><span class="s3">\&quot;</span><span class="s1">, yy_.yytext);</span><span class="s3">\n            </span><span class="s1">return 15;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 96:</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Lex: LINK</span><span class="s3">\&quot;</span><span class="s1">, yy_.yytext);</span><span class="s3">\n            </span><span class="s1">return 15;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 97:</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Lex: START_LINK</span><span class="s3">\&quot;</span><span class="s1">, yy_.yytext);</span><span class="s3">\n            </span><span class="s1">this.pushState(</span><span class="s3">\&quot;</span><span class="s1">LLABEL</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 16;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 98:</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Lex: START_LINK</span><span class="s3">\&quot;</span><span class="s1">, yy_.yytext);</span><span class="s3">\n            </span><span class="s1">this.pushState(</span><span class="s3">\&quot;</span><span class="s1">LLABEL</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 16;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 99:</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Lex: START_LINK</span><span class="s3">\&quot;</span><span class="s1">, yy_.yytext);</span><span class="s3">\n            </span><span class="s1">this.pushState(</span><span class="s3">\&quot;</span><span class="s1">LLABEL</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 16;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 100:</span><span class="s3">\n            </span><span class="s1">this.pushState(</span><span class="s3">\&quot;</span><span class="s1">md_string</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 101:</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Lex: Starting string</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">this.pushState(</span><span class="s3">\&quot;</span><span class="s1">string</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">LINK_LABEL</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 102:</span><span class="s3">\n            </span><span class="s1">this.popState();</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Lex: LINK</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">#</span><span class="s3">\&quot; </span><span class="s1">+ yy_.yytext + </span><span class="s3">\&quot;</span><span class="s1">#</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 15;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 103:</span><span class="s3">\n            </span><span class="s1">this.popState();</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Lex: LINK</span><span class="s3">\&quot;</span><span class="s1">, yy_.yytext);</span><span class="s3">\n            </span><span class="s1">return 15;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 104:</span><span class="s3">\n            </span><span class="s1">this.popState();</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Lex: LINK</span><span class="s3">\&quot;</span><span class="s1">, yy_.yytext);</span><span class="s3">\n            </span><span class="s1">return 15;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 105:</span><span class="s3">\n            </span><span class="s1">yy.getLogger().debug(</span><span class="s3">\&quot;</span><span class="s1">Lex: COLON</span><span class="s3">\&quot;</span><span class="s1">, yy_.yytext);</span><span class="s3">\n            </span><span class="s1">yy_.yytext = yy_.yytext.slice(1);</span><span class="s3">\n            </span><span class="s1">return 27;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">anonymous</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">rules: [/^(?:block-beta</span><span class="s3">\\</span><span class="s1">b)/, /^(?:block</span><span class="s3">\\</span><span class="s1">s+)/, /^(?:block</span><span class="s3">\\</span><span class="s1">n+)/, /^(?:block:)/, /^(?:[</span><span class="s3">\\</span><span class="s1">s]+)/, /^(?:[</span><span class="s3">\\</span><span class="s1">n]+)/, /^(?:((</span><span class="s3">\\</span><span class="s1">u000D</span><span class="s3">\\</span><span class="s1">u000A)|(</span><span class="s3">\\</span><span class="s1">u000A)))/, /^(?:columns</span><span class="s3">\\</span><span class="s1">s+auto</span><span class="s3">\\</span><span class="s1">b)/, /^(?:columns</span><span class="s3">\\</span><span class="s1">s+[</span><span class="s3">\\</span><span class="s1">d]+)/, /^(?:[</span><span class="s3">\&quot;</span><span class="s1">][`])/, /^(?:[^`</span><span class="s3">\&quot;</span><span class="s1">]+)/, /^(?:[`][</span><span class="s3">\&quot;</span><span class="s1">])/, /^(?:[</span><span class="s3">\&quot;</span><span class="s1">])/, /^(?:[</span><span class="s3">\&quot;</span><span class="s1">])/, /^(?:[^</span><span class="s3">\&quot;</span><span class="s1">]*)/, /^(?:space[:]</span><span class="s3">\\</span><span class="s1">d+)/, /^(?:space</span><span class="s3">\\</span><span class="s1">b)/, /^(?:default</span><span class="s3">\\</span><span class="s1">b)/, /^(?:linkStyle</span><span class="s3">\\</span><span class="s1">b)/, /^(?:interpolate</span><span class="s3">\\</span><span class="s1">b)/, /^(?:classDef</span><span class="s3">\\</span><span class="s1">s+)/, /^(?:DEFAULT</span><span class="s3">\\</span><span class="s1">s+)/, /^(?:</span><span class="s3">\\</span><span class="s1">w+</span><span class="s3">\\</span><span class="s1">s+)/, /^(?:[^</span><span class="s3">\\</span><span class="s1">n]*)/, /^(?:class</span><span class="s3">\\</span><span class="s1">s+)/, /^(?:(</span><span class="s3">\\</span><span class="s1">w+)+((,</span><span class="s3">\\</span><span class="s1">s*</span><span class="s3">\\</span><span class="s1">w+)*))/, /^(?:[^</span><span class="s3">\\</span><span class="s1">n]*)/, /^(?:style</span><span class="s3">\\</span><span class="s1">s+)/, /^(?:(</span><span class="s3">\\</span><span class="s1">w+)+((,</span><span class="s3">\\</span><span class="s1">s*</span><span class="s3">\\</span><span class="s1">w+)*))/, /^(?:[^</span><span class="s3">\\</span><span class="s1">n]*)/, /^(?:accTitle</span><span class="s3">\\</span><span class="s1">s*:</span><span class="s3">\\</span><span class="s1">s*)/, /^(?:(?!</span><span class="s3">\\</span><span class="s1">n||)*[^</span><span class="s3">\\</span><span class="s1">n]*)/, /^(?:accDescr</span><span class="s3">\\</span><span class="s1">s*:</span><span class="s3">\\</span><span class="s1">s*)/, /^(?:(?!</span><span class="s3">\\</span><span class="s1">n||)*[^</span><span class="s3">\\</span><span class="s1">n]*)/, /^(?:accDescr</span><span class="s3">\\</span><span class="s1">s*</span><span class="s3">\\</span><span class="s1">{</span><span class="s3">\\</span><span class="s1">s*)/, /^(?:[</span><span class="s3">\\</span><span class="s1">}])/, /^(?:[^</span><span class="s3">\\</span><span class="s1">}]*)/, /^(?:end</span><span class="s3">\\</span><span class="s1">b</span><span class="s3">\\</span><span class="s1">s*)/, /^(?:</span><span class="s3">\\</span><span class="s1">(</span><span class="s3">\\</span><span class="s1">(</span><span class="s3">\\</span><span class="s1">()/, /^(?:</span><span class="s3">\\</span><span class="s1">)</span><span class="s3">\\</span><span class="s1">)</span><span class="s3">\\</span><span class="s1">))/, /^(?:[</span><span class="s3">\\</span><span class="s1">)]</span><span class="s3">\\</span><span class="s1">))/, /^(?:</span><span class="s3">\\</span><span class="s1">}</span><span class="s3">\\</span><span class="s1">})/, /^(?:</span><span class="s3">\\</span><span class="s1">})/, /^(?:</span><span class="s3">\\</span><span class="s1">(-)/, /^(?:-</span><span class="s3">\\</span><span class="s1">))/, /^(?:</span><span class="s3">\\</span><span class="s1">(</span><span class="s3">\\</span><span class="s1">()/, /^(?:</span><span class="s3">\\</span><span class="s1">]</span><span class="s3">\\</span><span class="s1">])/, /^(?:</span><span class="s3">\\</span><span class="s1">()/, /^(?:</span><span class="s3">\\</span><span class="s1">]</span><span class="s3">\\</span><span class="s1">))/, /^(?:</span><span class="s3">\\\\\\</span><span class="s1">])/, /^(?:</span><span class="s3">\\</span><span class="s1">/</span><span class="s3">\\</span><span class="s1">])/, /^(?:</span><span class="s3">\\</span><span class="s1">)</span><span class="s3">\\</span><span class="s1">])/, /^(?:[</span><span class="s3">\\</span><span class="s1">)])/, /^(?:</span><span class="s3">\\</span><span class="s1">]&gt;)/, /^(?:[</span><span class="s3">\\</span><span class="s1">]])/, /^(?:-</span><span class="s3">\\</span><span class="s1">))/, /^(?:</span><span class="s3">\\</span><span class="s1">(-)/, /^(?:</span><span class="s3">\\</span><span class="s1">)</span><span class="s3">\\</span><span class="s1">))/, /^(?:</span><span class="s3">\\</span><span class="s1">))/, /^(?:</span><span class="s3">\\</span><span class="s1">(</span><span class="s3">\\</span><span class="s1">(</span><span class="s3">\\</span><span class="s1">()/, /^(?:</span><span class="s3">\\</span><span class="s1">(</span><span class="s3">\\</span><span class="s1">()/, /^(?:</span><span class="s3">\\</span><span class="s1">{</span><span class="s3">\\</span><span class="s1">{)/, /^(?:</span><span class="s3">\\</span><span class="s1">{)/, /^(?:&gt;)/, /^(?:</span><span class="s3">\\</span><span class="s1">(</span><span class="s3">\\</span><span class="s1">[)/, /^(?:</span><span class="s3">\\</span><span class="s1">()/, /^(?:</span><span class="s3">\\</span><span class="s1">[</span><span class="s3">\\</span><span class="s1">[)/, /^(?:</span><span class="s3">\\</span><span class="s1">[</span><span class="s3">\\</span><span class="s1">|)/, /^(?:</span><span class="s3">\\</span><span class="s1">[</span><span class="s3">\\</span><span class="s1">()/, /^(?:</span><span class="s3">\\</span><span class="s1">)</span><span class="s3">\\</span><span class="s1">)</span><span class="s3">\\</span><span class="s1">))/, /^(?:</span><span class="s3">\\</span><span class="s1">[</span><span class="s3">\\\\</span><span class="s1">)/, /^(?:</span><span class="s3">\\</span><span class="s1">[</span><span class="s3">\\</span><span class="s1">/)/, /^(?:</span><span class="s3">\\</span><span class="s1">[</span><span class="s3">\\\\</span><span class="s1">)/, /^(?:</span><span class="s3">\\</span><span class="s1">[)/, /^(?:&lt;</span><span class="s3">\\</span><span class="s1">[)/, /^(?:[^</span><span class="s3">\\</span><span class="s1">(</span><span class="s3">\\</span><span class="s1">[</span><span class="s3">\\</span><span class="s1">n</span><span class="s3">\\</span><span class="s1">-</span><span class="s3">\\</span><span class="s1">)</span><span class="s3">\\</span><span class="s1">{</span><span class="s3">\\</span><span class="s1">}</span><span class="s3">\\</span><span class="s1">s</span><span class="s3">\\</span><span class="s1">&lt;</span><span class="s3">\\</span><span class="s1">&gt;:]+)/, /^(?:$)/, /^(?:[</span><span class="s3">\&quot;</span><span class="s1">][`])/, /^(?:[</span><span class="s3">\&quot;</span><span class="s1">][`])/, /^(?:[^`</span><span class="s3">\&quot;</span><span class="s1">]+)/, /^(?:[`][</span><span class="s3">\&quot;</span><span class="s1">])/, /^(?:[</span><span class="s3">\&quot;</span><span class="s1">])/, /^(?:[</span><span class="s3">\&quot;</span><span class="s1">])/, /^(?:[^</span><span class="s3">\&quot;</span><span class="s1">]+)/, /^(?:[</span><span class="s3">\&quot;</span><span class="s1">])/, /^(?:</span><span class="s3">\\</span><span class="s1">]&gt;</span><span class="s3">\\</span><span class="s1">s*</span><span class="s3">\\</span><span class="s1">()/, /^(?:,?</span><span class="s3">\\</span><span class="s1">s*right</span><span class="s3">\\</span><span class="s1">s*)/, /^(?:,?</span><span class="s3">\\</span><span class="s1">s*left</span><span class="s3">\\</span><span class="s1">s*)/, /^(?:,?</span><span class="s3">\\</span><span class="s1">s*x</span><span class="s3">\\</span><span class="s1">s*)/, /^(?:,?</span><span class="s3">\\</span><span class="s1">s*y</span><span class="s3">\\</span><span class="s1">s*)/, /^(?:,?</span><span class="s3">\\</span><span class="s1">s*up</span><span class="s3">\\</span><span class="s1">s*)/, /^(?:,?</span><span class="s3">\\</span><span class="s1">s*down</span><span class="s3">\\</span><span class="s1">s*)/, /^(?:</span><span class="s3">\\</span><span class="s1">)</span><span class="s3">\\</span><span class="s1">s*)/, /^(?:</span><span class="s3">\\</span><span class="s1">s*[xo&lt;]?--+[-xo&gt;]</span><span class="s3">\\</span><span class="s1">s*)/, /^(?:</span><span class="s3">\\</span><span class="s1">s*[xo&lt;]?==+[=xo&gt;]</span><span class="s3">\\</span><span class="s1">s*)/, /^(?:</span><span class="s3">\\</span><span class="s1">s*[xo&lt;]?-?</span><span class="s3">\\</span><span class="s1">.+-[xo&gt;]?</span><span class="s3">\\</span><span class="s1">s*)/, /^(?:</span><span class="s3">\\</span><span class="s1">s*~~[</span><span class="s3">\\</span><span class="s1">~]+</span><span class="s3">\\</span><span class="s1">s*)/, /^(?:</span><span class="s3">\\</span><span class="s1">s*[xo&lt;]?--</span><span class="s3">\\</span><span class="s1">s*)/, /^(?:</span><span class="s3">\\</span><span class="s1">s*[xo&lt;]?==</span><span class="s3">\\</span><span class="s1">s*)/, /^(?:</span><span class="s3">\\</span><span class="s1">s*[xo&lt;]?-</span><span class="s3">\\</span><span class="s1">.</span><span class="s3">\\</span><span class="s1">s*)/, /^(?:[</span><span class="s3">\&quot;</span><span class="s1">][`])/, /^(?:[</span><span class="s3">\&quot;</span><span class="s1">])/, /^(?:</span><span class="s3">\\</span><span class="s1">s*[xo&lt;]?--+[-xo&gt;]</span><span class="s3">\\</span><span class="s1">s*)/, /^(?:</span><span class="s3">\\</span><span class="s1">s*[xo&lt;]?==+[=xo&gt;]</span><span class="s3">\\</span><span class="s1">s*)/, /^(?:</span><span class="s3">\\</span><span class="s1">s*[xo&lt;]?-?</span><span class="s3">\\</span><span class="s1">.+-[xo&gt;]?</span><span class="s3">\\</span><span class="s1">s*)/, /^(?::</span><span class="s3">\\</span><span class="s1">d+)/],</span><span class="s3">\n      </span><span class="s1">conditions: { </span><span class="s3">\&quot;</span><span class="s1">STYLE_DEFINITION</span><span class="s3">\&quot;</span><span class="s1">: { </span><span class="s3">\&quot;</span><span class="s1">rules</span><span class="s3">\&quot;</span><span class="s1">: [29], </span><span class="s3">\&quot;</span><span class="s1">inclusive</span><span class="s3">\&quot;</span><span class="s1">: false }, </span><span class="s3">\&quot;</span><span class="s1">STYLE_STMNT</span><span class="s3">\&quot;</span><span class="s1">: { </span><span class="s3">\&quot;</span><span class="s1">rules</span><span class="s3">\&quot;</span><span class="s1">: [28], </span><span class="s3">\&quot;</span><span class="s1">inclusive</span><span class="s3">\&quot;</span><span class="s1">: false }, </span><span class="s3">\&quot;</span><span class="s1">CLASSDEFID</span><span class="s3">\&quot;</span><span class="s1">: { </span><span class="s3">\&quot;</span><span class="s1">rules</span><span class="s3">\&quot;</span><span class="s1">: [23], </span><span class="s3">\&quot;</span><span class="s1">inclusive</span><span class="s3">\&quot;</span><span class="s1">: false }, </span><span class="s3">\&quot;</span><span class="s1">CLASSDEF</span><span class="s3">\&quot;</span><span class="s1">: { </span><span class="s3">\&quot;</span><span class="s1">rules</span><span class="s3">\&quot;</span><span class="s1">: [21, 22], </span><span class="s3">\&quot;</span><span class="s1">inclusive</span><span class="s3">\&quot;</span><span class="s1">: false }, </span><span class="s3">\&quot;</span><span class="s1">CLASS_STYLE</span><span class="s3">\&quot;</span><span class="s1">: { </span><span class="s3">\&quot;</span><span class="s1">rules</span><span class="s3">\&quot;</span><span class="s1">: [26], </span><span class="s3">\&quot;</span><span class="s1">inclusive</span><span class="s3">\&quot;</span><span class="s1">: false }, </span><span class="s3">\&quot;</span><span class="s1">CLASS</span><span class="s3">\&quot;</span><span class="s1">: { </span><span class="s3">\&quot;</span><span class="s1">rules</span><span class="s3">\&quot;</span><span class="s1">: [25], </span><span class="s3">\&quot;</span><span class="s1">inclusive</span><span class="s3">\&quot;</span><span class="s1">: false }, </span><span class="s3">\&quot;</span><span class="s1">LLABEL</span><span class="s3">\&quot;</span><span class="s1">: { </span><span class="s3">\&quot;</span><span class="s1">rules</span><span class="s3">\&quot;</span><span class="s1">: [100, 101, 102, 103, 104], </span><span class="s3">\&quot;</span><span class="s1">inclusive</span><span class="s3">\&quot;</span><span class="s1">: false }, </span><span class="s3">\&quot;</span><span class="s1">ARROW_DIR</span><span class="s3">\&quot;</span><span class="s1">: { </span><span class="s3">\&quot;</span><span class="s1">rules</span><span class="s3">\&quot;</span><span class="s1">: [86, 87, 88, 89, 90, 91, 92], </span><span class="s3">\&quot;</span><span class="s1">inclusive</span><span class="s3">\&quot;</span><span class="s1">: false }, </span><span class="s3">\&quot;</span><span class="s1">BLOCK_ARROW</span><span class="s3">\&quot;</span><span class="s1">: { </span><span class="s3">\&quot;</span><span class="s1">rules</span><span class="s3">\&quot;</span><span class="s1">: [77, 82, 85], </span><span class="s3">\&quot;</span><span class="s1">inclusive</span><span class="s3">\&quot;</span><span class="s1">: false }, </span><span class="s3">\&quot;</span><span class="s1">NODE</span><span class="s3">\&quot;</span><span class="s1">: { </span><span class="s3">\&quot;</span><span class="s1">rules</span><span class="s3">\&quot;</span><span class="s1">: [38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 78, 81], </span><span class="s3">\&quot;</span><span class="s1">inclusive</span><span class="s3">\&quot;</span><span class="s1">: false }, </span><span class="s3">\&quot;</span><span class="s1">md_string</span><span class="s3">\&quot;</span><span class="s1">: { </span><span class="s3">\&quot;</span><span class="s1">rules</span><span class="s3">\&quot;</span><span class="s1">: [10, 11, 79, 80], </span><span class="s3">\&quot;</span><span class="s1">inclusive</span><span class="s3">\&quot;</span><span class="s1">: false }, </span><span class="s3">\&quot;</span><span class="s1">space</span><span class="s3">\&quot;</span><span class="s1">: { </span><span class="s3">\&quot;</span><span class="s1">rules</span><span class="s3">\&quot;</span><span class="s1">: [], </span><span class="s3">\&quot;</span><span class="s1">inclusive</span><span class="s3">\&quot;</span><span class="s1">: false }, </span><span class="s3">\&quot;</span><span class="s1">string</span><span class="s3">\&quot;</span><span class="s1">: { </span><span class="s3">\&quot;</span><span class="s1">rules</span><span class="s3">\&quot;</span><span class="s1">: [13, 14, 83, 84], </span><span class="s3">\&quot;</span><span class="s1">inclusive</span><span class="s3">\&quot;</span><span class="s1">: false }, </span><span class="s3">\&quot;</span><span class="s1">acc_descr_multiline</span><span class="s3">\&quot;</span><span class="s1">: { </span><span class="s3">\&quot;</span><span class="s1">rules</span><span class="s3">\&quot;</span><span class="s1">: [35, 36], </span><span class="s3">\&quot;</span><span class="s1">inclusive</span><span class="s3">\&quot;</span><span class="s1">: false }, </span><span class="s3">\&quot;</span><span class="s1">acc_descr</span><span class="s3">\&quot;</span><span class="s1">: { </span><span class="s3">\&quot;</span><span class="s1">rules</span><span class="s3">\&quot;</span><span class="s1">: [33], </span><span class="s3">\&quot;</span><span class="s1">inclusive</span><span class="s3">\&quot;</span><span class="s1">: false }, </span><span class="s3">\&quot;</span><span class="s1">acc_title</span><span class="s3">\&quot;</span><span class="s1">: { </span><span class="s3">\&quot;</span><span class="s1">rules</span><span class="s3">\&quot;</span><span class="s1">: [31], </span><span class="s3">\&quot;</span><span class="s1">inclusive</span><span class="s3">\&quot;</span><span class="s1">: false }, </span><span class="s3">\&quot;</span><span class="s1">INITIAL</span><span class="s3">\&quot;</span><span class="s1">: { </span><span class="s3">\&quot;</span><span class="s1">rules</span><span class="s3">\&quot;</span><span class="s1">: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 12, 15, 16, 17, 18, 19, 20, 24, 27, 30, 32, 34, 37, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 93, 94, 95, 96, 97, 98, 99, 105], </span><span class="s3">\&quot;</span><span class="s1">inclusive</span><span class="s3">\&quot;</span><span class="s1">: true } }</span><span class="s3">\n    </span><span class="s1">};</span><span class="s3">\n    </span><span class="s1">return lexer2;</span><span class="s3">\n  </span><span class="s1">}();</span><span class="s3">\n  </span><span class="s1">parser2.lexer = lexer;</span><span class="s3">\n  </span><span class="s1">function Parser() {</span><span class="s3">\n    </span><span class="s1">this.yy = {};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">__name(Parser, </span><span class="s3">\&quot;</span><span class="s1">Parser</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">Parser.prototype = parser2;</span><span class="s3">\n  </span><span class="s1">parser2.Parser = Parser;</span><span class="s3">\n  </span><span class="s1">return new Parser();</span><span class="s3">\n</span><span class="s1">}();</span><span class="s3">\n</span><span class="s1">parser.parser = parser;</span><span class="s3">\n</span><span class="s1">var block_default = parser;</span><span class="s3">\n\n</span><span class="s1">// src/diagrams/block/blockDB.ts</span><span class="s3">\n</span><span class="s1">import clone from </span><span class="s3">\&quot;</span><span class="s1">lodash-es/clone.js</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">var blockDatabase = /* @__PURE__ */ new Map();</span><span class="s3">\n</span><span class="s1">var edgeList = [];</span><span class="s3">\n</span><span class="s1">var edgeCount = /* @__PURE__ */ new Map();</span><span class="s3">\n</span><span class="s1">var COLOR_KEYWORD = </span><span class="s3">\&quot;</span><span class="s1">color</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">var FILL_KEYWORD = </span><span class="s3">\&quot;</span><span class="s1">fill</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">var BG_FILL = </span><span class="s3">\&quot;</span><span class="s1">bgFill</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">var STYLECLASS_SEP = </span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">var config = getConfig2();</span><span class="s3">\n</span><span class="s1">var classes = /* @__PURE__ */ new Map();</span><span class="s3">\n</span><span class="s1">var sanitizeText2 = /* @__PURE__ */ __name((txt) =&gt; common_default.sanitizeText(txt, config), </span><span class="s3">\&quot;</span><span class="s1">sanitizeText</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var addStyleClass = /* @__PURE__ */ __name(function(id, styleAttributes = </span><span class="s3">\&quot;\&quot;</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">let foundClass = classes.get(id);</span><span class="s3">\n  </span><span class="s1">if (!foundClass) {</span><span class="s3">\n    </span><span class="s1">foundClass = { id, styles: [], textStyles: [] };</span><span class="s3">\n    </span><span class="s1">classes.set(id, foundClass);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (styleAttributes !== void 0 &amp;&amp; styleAttributes !== null) {</span><span class="s3">\n    </span><span class="s1">styleAttributes.split(STYLECLASS_SEP).forEach((attrib) =&gt; {</span><span class="s3">\n      </span><span class="s1">const fixedAttrib = attrib.replace(/([^;]*);/, </span><span class="s3">\&quot;</span><span class="s1">$1</span><span class="s3">\&quot;</span><span class="s1">).trim();</span><span class="s3">\n      </span><span class="s1">if (RegExp(COLOR_KEYWORD).exec(attrib)) {</span><span class="s3">\n        </span><span class="s1">const newStyle1 = fixedAttrib.replace(FILL_KEYWORD, BG_FILL);</span><span class="s3">\n        </span><span class="s1">const newStyle2 = newStyle1.replace(COLOR_KEYWORD, FILL_KEYWORD);</span><span class="s3">\n        </span><span class="s1">foundClass.textStyles.push(newStyle2);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">foundClass.styles.push(fixedAttrib);</span><span class="s3">\n    </span><span class="s1">});</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">addStyleClass</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var addStyle2Node = /* @__PURE__ */ __name(function(id, styles = </span><span class="s3">\&quot;\&quot;</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">const foundBlock = blockDatabase.get(id);</span><span class="s3">\n  </span><span class="s1">if (styles !== void 0 &amp;&amp; styles !== null) {</span><span class="s3">\n    </span><span class="s1">foundBlock.styles = styles.split(STYLECLASS_SEP);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">addStyle2Node</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var setCssClass = /* @__PURE__ */ __name(function(itemIds, cssClassName) {</span><span class="s3">\n  </span><span class="s1">itemIds.split(</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">).forEach(function(id) {</span><span class="s3">\n    </span><span class="s1">let foundBlock = blockDatabase.get(id);</span><span class="s3">\n    </span><span class="s1">if (foundBlock === void 0) {</span><span class="s3">\n      </span><span class="s1">const trimmedId = id.trim();</span><span class="s3">\n      </span><span class="s1">foundBlock = { id: trimmedId, type: </span><span class="s3">\&quot;</span><span class="s1">na</span><span class="s3">\&quot;</span><span class="s1">, children: [] };</span><span class="s3">\n      </span><span class="s1">blockDatabase.set(trimmedId, foundBlock);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">if (!foundBlock.classes) {</span><span class="s3">\n      </span><span class="s1">foundBlock.classes = [];</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">foundBlock.classes.push(cssClassName);</span><span class="s3">\n  </span><span class="s1">});</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">setCssClass</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var populateBlockDatabase = /* @__PURE__ */ __name((_blockList, parent) =&gt; {</span><span class="s3">\n  </span><span class="s1">const blockList = _blockList.flat();</span><span class="s3">\n  </span><span class="s1">const children = [];</span><span class="s3">\n  </span><span class="s1">for (const block of blockList) {</span><span class="s3">\n    </span><span class="s1">if (block.label) {</span><span class="s3">\n      </span><span class="s1">block.label = sanitizeText2(block.label);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">if (block.type === </span><span class="s3">\&quot;</span><span class="s1">classDef</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">addStyleClass(block.id, block.css);</span><span class="s3">\n      </span><span class="s1">continue;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">if (block.type === </span><span class="s3">\&quot;</span><span class="s1">applyClass</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">setCssClass(block.id, block?.styleClass ?? </span><span class="s3">\&quot;\&quot;</span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">continue;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">if (block.type === </span><span class="s3">\&quot;</span><span class="s1">applyStyles</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">if (block?.stylesStr) {</span><span class="s3">\n        </span><span class="s1">addStyle2Node(block.id, block?.stylesStr);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">continue;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">if (block.type === </span><span class="s3">\&quot;</span><span class="s1">column-setting</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">parent.columns = block.columns ?? -1;</span><span class="s3">\n    </span><span class="s1">} else if (block.type === </span><span class="s3">\&quot;</span><span class="s1">edge</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">const count = (edgeCount.get(block.id) ?? 0) + 1;</span><span class="s3">\n      </span><span class="s1">edgeCount.set(block.id, count);</span><span class="s3">\n      </span><span class="s1">block.id = count + </span><span class="s3">\&quot;</span><span class="s1">-</span><span class="s3">\&quot; </span><span class="s1">+ block.id;</span><span class="s3">\n      </span><span class="s1">edgeList.push(block);</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">if (!block.label) {</span><span class="s3">\n        </span><span class="s1">if (block.type === </span><span class="s3">\&quot;</span><span class="s1">composite</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n          </span><span class="s1">block.label = </span><span class="s3">\&quot;\&quot;</span><span class="s1">;</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">block.label = block.id;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">const existingBlock = blockDatabase.get(block.id);</span><span class="s3">\n      </span><span class="s1">if (existingBlock === void 0) {</span><span class="s3">\n        </span><span class="s1">blockDatabase.set(block.id, block);</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">if (block.type !== </span><span class="s3">\&quot;</span><span class="s1">na</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n          </span><span class="s1">existingBlock.type = block.type;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">if (block.label !== block.id) {</span><span class="s3">\n          </span><span class="s1">existingBlock.label = block.label;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">if (block.children) {</span><span class="s3">\n        </span><span class="s1">populateBlockDatabase(block.children, block);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">if (block.type === </span><span class="s3">\&quot;</span><span class="s1">space</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n        </span><span class="s1">const w = block.width ?? 1;</span><span class="s3">\n        </span><span class="s1">for (let j = 0; j &lt; w; j++) {</span><span class="s3">\n          </span><span class="s1">const newBlock = clone(block);</span><span class="s3">\n          </span><span class="s1">newBlock.id = newBlock.id + </span><span class="s3">\&quot;</span><span class="s1">-</span><span class="s3">\&quot; </span><span class="s1">+ j;</span><span class="s3">\n          </span><span class="s1">blockDatabase.set(newBlock.id, newBlock);</span><span class="s3">\n          </span><span class="s1">children.push(newBlock);</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">} else if (existingBlock === void 0) {</span><span class="s3">\n        </span><span class="s1">children.push(block);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">parent.children = children;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">populateBlockDatabase</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var blocks = [];</span><span class="s3">\n</span><span class="s1">var rootBlock = { id: </span><span class="s3">\&quot;</span><span class="s1">root</span><span class="s3">\&quot;</span><span class="s1">, type: </span><span class="s3">\&quot;</span><span class="s1">composite</span><span class="s3">\&quot;</span><span class="s1">, children: [], columns: -1 };</span><span class="s3">\n</span><span class="s1">var clear2 = /* @__PURE__ */ __name(() =&gt; {</span><span class="s3">\n  </span><span class="s1">log.debug(</span><span class="s3">\&quot;</span><span class="s1">Clear called</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">clear();</span><span class="s3">\n  </span><span class="s1">rootBlock = { id: </span><span class="s3">\&quot;</span><span class="s1">root</span><span class="s3">\&quot;</span><span class="s1">, type: </span><span class="s3">\&quot;</span><span class="s1">composite</span><span class="s3">\&quot;</span><span class="s1">, children: [], columns: -1 };</span><span class="s3">\n  </span><span class="s1">blockDatabase = /* @__PURE__ */ new Map([[</span><span class="s3">\&quot;</span><span class="s1">root</span><span class="s3">\&quot;</span><span class="s1">, rootBlock]]);</span><span class="s3">\n  </span><span class="s1">blocks = [];</span><span class="s3">\n  </span><span class="s1">classes = /* @__PURE__ */ new Map();</span><span class="s3">\n  </span><span class="s1">edgeList = [];</span><span class="s3">\n  </span><span class="s1">edgeCount = /* @__PURE__ */ new Map();</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">clear</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">function typeStr2Type(typeStr) {</span><span class="s3">\n  </span><span class="s1">log.debug(</span><span class="s3">\&quot;</span><span class="s1">typeStr2Type</span><span class="s3">\&quot;</span><span class="s1">, typeStr);</span><span class="s3">\n  </span><span class="s1">switch (typeStr) {</span><span class="s3">\n    </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">[]</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n      </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">square</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n    </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">()</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n      </span><span class="s1">log.debug(</span><span class="s3">\&quot;</span><span class="s1">we have a round</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">round</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n    </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">(())</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n      </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">circle</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n    </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">&gt;]</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n      </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">rect_left_inv_arrow</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n    </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">{}</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n      </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">diamond</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n    </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">{{}}</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n      </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">hexagon</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n    </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">([])</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n      </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">stadium</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n    </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">[[]]</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n      </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">subroutine</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n    </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">[()]</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n      </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">cylinder</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n    </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">((()))</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n      </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">doublecircle</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n    </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">[//]</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n      </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">lean_right</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n    </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">[</span><span class="s3">\\\\\\\\</span><span class="s1">]</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n      </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">lean_left</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n    </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">[/</span><span class="s3">\\\\</span><span class="s1">]</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n      </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">trapezoid</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n    </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">[</span><span class="s3">\\\\</span><span class="s1">/]</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n      </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">inv_trapezoid</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n    </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">&lt;[]&gt;</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n      </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">block_arrow</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n    </span><span class="s1">default:</span><span class="s3">\n      </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">na</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">__name(typeStr2Type, </span><span class="s3">\&quot;</span><span class="s1">typeStr2Type</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">function edgeTypeStr2Type(typeStr) {</span><span class="s3">\n  </span><span class="s1">log.debug(</span><span class="s3">\&quot;</span><span class="s1">typeStr2Type</span><span class="s3">\&quot;</span><span class="s1">, typeStr);</span><span class="s3">\n  </span><span class="s1">switch (typeStr) {</span><span class="s3">\n    </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">==</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n      </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">thick</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n    </span><span class="s1">default:</span><span class="s3">\n      </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">normal</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">__name(edgeTypeStr2Type, </span><span class="s3">\&quot;</span><span class="s1">edgeTypeStr2Type</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">function edgeStrToEdgeData(typeStr) {</span><span class="s3">\n  </span><span class="s1">switch (typeStr.trim()) {</span><span class="s3">\n    </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">--x</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n      </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">arrow_cross</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n    </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">--o</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n      </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">arrow_circle</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n    </span><span class="s1">default:</span><span class="s3">\n      </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">arrow_point</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">__name(edgeStrToEdgeData, </span><span class="s3">\&quot;</span><span class="s1">edgeStrToEdgeData</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var cnt = 0;</span><span class="s3">\n</span><span class="s1">var generateId = /* @__PURE__ */ __name(() =&gt; {</span><span class="s3">\n  </span><span class="s1">cnt++;</span><span class="s3">\n  </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">id-</span><span class="s3">\&quot; </span><span class="s1">+ Math.random().toString(36).substr(2, 12) + </span><span class="s3">\&quot;</span><span class="s1">-</span><span class="s3">\&quot; </span><span class="s1">+ cnt;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">generateId</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var setHierarchy = /* @__PURE__ */ __name((block) =&gt; {</span><span class="s3">\n  </span><span class="s1">rootBlock.children = block;</span><span class="s3">\n  </span><span class="s1">populateBlockDatabase(block, rootBlock);</span><span class="s3">\n  </span><span class="s1">blocks = rootBlock.children;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">setHierarchy</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var getColumns = /* @__PURE__ */ __name((blockId) =&gt; {</span><span class="s3">\n  </span><span class="s1">const block = blockDatabase.get(blockId);</span><span class="s3">\n  </span><span class="s1">if (!block) {</span><span class="s3">\n    </span><span class="s1">return -1;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (block.columns) {</span><span class="s3">\n    </span><span class="s1">return block.columns;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (!block.children) {</span><span class="s3">\n    </span><span class="s1">return -1;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return block.children.length;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">getColumns</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var getBlocksFlat = /* @__PURE__ */ __name(() =&gt; {</span><span class="s3">\n  </span><span class="s1">return [...blockDatabase.values()];</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">getBlocksFlat</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var getBlocks = /* @__PURE__ */ __name(() =&gt; {</span><span class="s3">\n  </span><span class="s1">return blocks || [];</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">getBlocks</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var getEdges = /* @__PURE__ */ __name(() =&gt; {</span><span class="s3">\n  </span><span class="s1">return edgeList;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">getEdges</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var getBlock = /* @__PURE__ */ __name((id) =&gt; {</span><span class="s3">\n  </span><span class="s1">return blockDatabase.get(id);</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">getBlock</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var setBlock = /* @__PURE__ */ __name((block) =&gt; {</span><span class="s3">\n  </span><span class="s1">blockDatabase.set(block.id, block);</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">setBlock</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var getLogger = /* @__PURE__ */ __name(() =&gt; console, </span><span class="s3">\&quot;</span><span class="s1">getLogger</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var getClasses = /* @__PURE__ */ __name(function() {</span><span class="s3">\n  </span><span class="s1">return classes;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">getClasses</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var db = {</span><span class="s3">\n  </span><span class="s1">getConfig: /* @__PURE__ */ __name(() =&gt; getConfig().block, </span><span class="s3">\&quot;</span><span class="s1">getConfig</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n  </span><span class="s1">typeStr2Type,</span><span class="s3">\n  </span><span class="s1">edgeTypeStr2Type,</span><span class="s3">\n  </span><span class="s1">edgeStrToEdgeData,</span><span class="s3">\n  </span><span class="s1">getLogger,</span><span class="s3">\n  </span><span class="s1">getBlocksFlat,</span><span class="s3">\n  </span><span class="s1">getBlocks,</span><span class="s3">\n  </span><span class="s1">getEdges,</span><span class="s3">\n  </span><span class="s1">setHierarchy,</span><span class="s3">\n  </span><span class="s1">getBlock,</span><span class="s3">\n  </span><span class="s1">setBlock,</span><span class="s3">\n  </span><span class="s1">getColumns,</span><span class="s3">\n  </span><span class="s1">getClasses,</span><span class="s3">\n  </span><span class="s1">clear: clear2,</span><span class="s3">\n  </span><span class="s1">generateId</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n</span><span class="s1">var blockDB_default = db;</span><span class="s3">\n\n</span><span class="s1">// src/diagrams/block/styles.ts</span><span class="s3">\n</span><span class="s1">import * as khroma from </span><span class="s3">\&quot;</span><span class="s1">khroma</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">var fade = /* @__PURE__ */ __name((color, opacity) =&gt; {</span><span class="s3">\n  </span><span class="s1">const channel2 = khroma.channel;</span><span class="s3">\n  </span><span class="s1">const r = channel2(color, </span><span class="s3">\&quot;</span><span class="s1">r</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const g = channel2(color, </span><span class="s3">\&quot;</span><span class="s1">g</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const b = channel2(color, </span><span class="s3">\&quot;</span><span class="s1">b</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">return khroma.rgba(r, g, b, opacity);</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">fade</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var getStyles = /* @__PURE__ */ __name((options) =&gt; `.label {</span><span class="s3">\n    </span><span class="s1">font-family: ${options.fontFamily};</span><span class="s3">\n    </span><span class="s1">color: ${options.nodeTextColor || options.textColor};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">.cluster-label text {</span><span class="s3">\n    </span><span class="s1">fill: ${options.titleColor};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">.cluster-label span,p {</span><span class="s3">\n    </span><span class="s1">color: ${options.titleColor};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n\n\n  </span><span class="s1">.label text,span,p {</span><span class="s3">\n    </span><span class="s1">fill: ${options.nodeTextColor || options.textColor};</span><span class="s3">\n    </span><span class="s1">color: ${options.nodeTextColor || options.textColor};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">.node rect,</span><span class="s3">\n  </span><span class="s1">.node circle,</span><span class="s3">\n  </span><span class="s1">.node ellipse,</span><span class="s3">\n  </span><span class="s1">.node polygon,</span><span class="s3">\n  </span><span class="s1">.node path {</span><span class="s3">\n    </span><span class="s1">fill: ${options.mainBkg};</span><span class="s3">\n    </span><span class="s1">stroke: ${options.nodeBorder};</span><span class="s3">\n    </span><span class="s1">stroke-width: 1px;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">.flowchart-label text {</span><span class="s3">\n    </span><span class="s1">text-anchor: middle;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">// .flowchart-label .text-outer-tspan {</span><span class="s3">\n  </span><span class="s1">//   text-anchor: middle;</span><span class="s3">\n  </span><span class="s1">// }</span><span class="s3">\n  </span><span class="s1">// .flowchart-label .text-inner-tspan {</span><span class="s3">\n  </span><span class="s1">//   text-anchor: start;</span><span class="s3">\n  </span><span class="s1">// }</span><span class="s3">\n\n  </span><span class="s1">.node .label {</span><span class="s3">\n    </span><span class="s1">text-align: center;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">.node.clickable {</span><span class="s3">\n    </span><span class="s1">cursor: pointer;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">.arrowheadPath {</span><span class="s3">\n    </span><span class="s1">fill: ${options.arrowheadColor};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">.edgePath .path {</span><span class="s3">\n    </span><span class="s1">stroke: ${options.lineColor};</span><span class="s3">\n    </span><span class="s1">stroke-width: 2.0px;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">.flowchart-link {</span><span class="s3">\n    </span><span class="s1">stroke: ${options.lineColor};</span><span class="s3">\n    </span><span class="s1">fill: none;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">.edgeLabel {</span><span class="s3">\n    </span><span class="s1">background-color: ${options.edgeLabelBackground};</span><span class="s3">\n    </span><span class="s1">rect {</span><span class="s3">\n      </span><span class="s1">opacity: 0.5;</span><span class="s3">\n      </span><span class="s1">background-color: ${options.edgeLabelBackground};</span><span class="s3">\n      </span><span class="s1">fill: ${options.edgeLabelBackground};</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">text-align: center;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">/* For html labels only */</span><span class="s3">\n  </span><span class="s1">.labelBkg {</span><span class="s3">\n    </span><span class="s1">background-color: ${fade(options.edgeLabelBackground, 0.5)};</span><span class="s3">\n    </span><span class="s1">// background-color:</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">.node .cluster {</span><span class="s3">\n    </span><span class="s1">// fill: ${fade(options.mainBkg, 0.5)};</span><span class="s3">\n    </span><span class="s1">fill: ${fade(options.clusterBkg, 0.5)};</span><span class="s3">\n    </span><span class="s1">stroke: ${fade(options.clusterBorder, 0.2)};</span><span class="s3">\n    </span><span class="s1">box-shadow: rgba(50, 50, 93, 0.25) 0px 13px 27px -5px, rgba(0, 0, 0, 0.3) 0px 8px 16px -8px;</span><span class="s3">\n    </span><span class="s1">stroke-width: 1px;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">.cluster text {</span><span class="s3">\n    </span><span class="s1">fill: ${options.titleColor};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">.cluster span,p {</span><span class="s3">\n    </span><span class="s1">color: ${options.titleColor};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">/* .cluster div {</span><span class="s3">\n    </span><span class="s1">color: ${options.titleColor};</span><span class="s3">\n  </span><span class="s1">} */</span><span class="s3">\n\n  </span><span class="s1">div.mermaidTooltip {</span><span class="s3">\n    </span><span class="s1">position: absolute;</span><span class="s3">\n    </span><span class="s1">text-align: center;</span><span class="s3">\n    </span><span class="s1">max-width: 200px;</span><span class="s3">\n    </span><span class="s1">padding: 2px;</span><span class="s3">\n    </span><span class="s1">font-family: ${options.fontFamily};</span><span class="s3">\n    </span><span class="s1">font-size: 12px;</span><span class="s3">\n    </span><span class="s1">background: ${options.tertiaryColor};</span><span class="s3">\n    </span><span class="s1">border: 1px solid ${options.border2};</span><span class="s3">\n    </span><span class="s1">border-radius: 2px;</span><span class="s3">\n    </span><span class="s1">pointer-events: none;</span><span class="s3">\n    </span><span class="s1">z-index: 100;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">.flowchartTitleText {</span><span class="s3">\n    </span><span class="s1">text-anchor: middle;</span><span class="s3">\n    </span><span class="s1">font-size: 18px;</span><span class="s3">\n    </span><span class="s1">fill: ${options.textColor};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">`, </span><span class="s3">\&quot;</span><span class="s1">getStyles</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var styles_default = getStyles;</span><span class="s3">\n\n</span><span class="s1">// src/diagrams/block/blockRenderer.ts</span><span class="s3">\n</span><span class="s1">import { select as d3select } from </span><span class="s3">\&quot;</span><span class="s1">d3</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n\n</span><span class="s1">// src/dagre-wrapper/markers.js</span><span class="s3">\n</span><span class="s1">var insertMarkers = /* @__PURE__ */ __name((elem, markerArray, type, id) =&gt; {</span><span class="s3">\n  </span><span class="s1">markerArray.forEach((markerName) =&gt; {</span><span class="s3">\n    </span><span class="s1">markers[markerName](elem, type, id);</span><span class="s3">\n  </span><span class="s1">});</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">insertMarkers</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var extension = /* @__PURE__ */ __name((elem, type, id) =&gt; {</span><span class="s3">\n  </span><span class="s1">log.trace(</span><span class="s3">\&quot;</span><span class="s1">Making markers for </span><span class="s3">\&quot;</span><span class="s1">, id);</span><span class="s3">\n  </span><span class="s1">elem.append(</span><span class="s3">\&quot;</span><span class="s1">defs</span><span class="s3">\&quot;</span><span class="s1">).append(</span><span class="s3">\&quot;</span><span class="s1">marker</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">id</span><span class="s3">\&quot;</span><span class="s1">, id + </span><span class="s3">\&quot;</span><span class="s1">_</span><span class="s3">\&quot; </span><span class="s1">+ type + </span><span class="s3">\&quot;</span><span class="s1">-extensionStart</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">marker extension </span><span class="s3">\&quot; </span><span class="s1">+ type).attr(</span><span class="s3">\&quot;</span><span class="s1">refX</span><span class="s3">\&quot;</span><span class="s1">, 18).attr(</span><span class="s3">\&quot;</span><span class="s1">refY</span><span class="s3">\&quot;</span><span class="s1">, 7).attr(</span><span class="s3">\&quot;</span><span class="s1">markerWidth</span><span class="s3">\&quot;</span><span class="s1">, 190).attr(</span><span class="s3">\&quot;</span><span class="s1">markerHeight</span><span class="s3">\&quot;</span><span class="s1">, 240).attr(</span><span class="s3">\&quot;</span><span class="s1">orient</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">auto</span><span class="s3">\&quot;</span><span class="s1">).append(</span><span class="s3">\&quot;</span><span class="s1">path</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">d</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">M 1,7 L18,13 V 1 Z</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">elem.append(</span><span class="s3">\&quot;</span><span class="s1">defs</span><span class="s3">\&quot;</span><span class="s1">).append(</span><span class="s3">\&quot;</span><span class="s1">marker</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">id</span><span class="s3">\&quot;</span><span class="s1">, id + </span><span class="s3">\&quot;</span><span class="s1">_</span><span class="s3">\&quot; </span><span class="s1">+ type + </span><span class="s3">\&quot;</span><span class="s1">-extensionEnd</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">marker extension </span><span class="s3">\&quot; </span><span class="s1">+ type).attr(</span><span class="s3">\&quot;</span><span class="s1">refX</span><span class="s3">\&quot;</span><span class="s1">, 1).attr(</span><span class="s3">\&quot;</span><span class="s1">refY</span><span class="s3">\&quot;</span><span class="s1">, 7).attr(</span><span class="s3">\&quot;</span><span class="s1">markerWidth</span><span class="s3">\&quot;</span><span class="s1">, 20).attr(</span><span class="s3">\&quot;</span><span class="s1">markerHeight</span><span class="s3">\&quot;</span><span class="s1">, 28).attr(</span><span class="s3">\&quot;</span><span class="s1">orient</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">auto</span><span class="s3">\&quot;</span><span class="s1">).append(</span><span class="s3">\&quot;</span><span class="s1">path</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">d</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">M 1,1 V 13 L18,7 Z</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">extension</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var composition = /* @__PURE__ */ __name((elem, type, id) =&gt; {</span><span class="s3">\n  </span><span class="s1">elem.append(</span><span class="s3">\&quot;</span><span class="s1">defs</span><span class="s3">\&quot;</span><span class="s1">).append(</span><span class="s3">\&quot;</span><span class="s1">marker</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">id</span><span class="s3">\&quot;</span><span class="s1">, id + </span><span class="s3">\&quot;</span><span class="s1">_</span><span class="s3">\&quot; </span><span class="s1">+ type + </span><span class="s3">\&quot;</span><span class="s1">-compositionStart</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">marker composition </span><span class="s3">\&quot; </span><span class="s1">+ type).attr(</span><span class="s3">\&quot;</span><span class="s1">refX</span><span class="s3">\&quot;</span><span class="s1">, 18).attr(</span><span class="s3">\&quot;</span><span class="s1">refY</span><span class="s3">\&quot;</span><span class="s1">, 7).attr(</span><span class="s3">\&quot;</span><span class="s1">markerWidth</span><span class="s3">\&quot;</span><span class="s1">, 190).attr(</span><span class="s3">\&quot;</span><span class="s1">markerHeight</span><span class="s3">\&quot;</span><span class="s1">, 240).attr(</span><span class="s3">\&quot;</span><span class="s1">orient</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">auto</span><span class="s3">\&quot;</span><span class="s1">).append(</span><span class="s3">\&quot;</span><span class="s1">path</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">d</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">M 18,7 L9,13 L1,7 L9,1 Z</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">elem.append(</span><span class="s3">\&quot;</span><span class="s1">defs</span><span class="s3">\&quot;</span><span class="s1">).append(</span><span class="s3">\&quot;</span><span class="s1">marker</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">id</span><span class="s3">\&quot;</span><span class="s1">, id + </span><span class="s3">\&quot;</span><span class="s1">_</span><span class="s3">\&quot; </span><span class="s1">+ type + </span><span class="s3">\&quot;</span><span class="s1">-compositionEnd</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">marker composition </span><span class="s3">\&quot; </span><span class="s1">+ type).attr(</span><span class="s3">\&quot;</span><span class="s1">refX</span><span class="s3">\&quot;</span><span class="s1">, 1).attr(</span><span class="s3">\&quot;</span><span class="s1">refY</span><span class="s3">\&quot;</span><span class="s1">, 7).attr(</span><span class="s3">\&quot;</span><span class="s1">markerWidth</span><span class="s3">\&quot;</span><span class="s1">, 20).attr(</span><span class="s3">\&quot;</span><span class="s1">markerHeight</span><span class="s3">\&quot;</span><span class="s1">, 28).attr(</span><span class="s3">\&quot;</span><span class="s1">orient</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">auto</span><span class="s3">\&quot;</span><span class="s1">).append(</span><span class="s3">\&quot;</span><span class="s1">path</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">d</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">M 18,7 L9,13 L1,7 L9,1 Z</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">composition</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var aggregation = /* @__PURE__ */ __name((elem, type, id) =&gt; {</span><span class="s3">\n  </span><span class="s1">elem.append(</span><span class="s3">\&quot;</span><span class="s1">defs</span><span class="s3">\&quot;</span><span class="s1">).append(</span><span class="s3">\&quot;</span><span class="s1">marker</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">id</span><span class="s3">\&quot;</span><span class="s1">, id + </span><span class="s3">\&quot;</span><span class="s1">_</span><span class="s3">\&quot; </span><span class="s1">+ type + </span><span class="s3">\&quot;</span><span class="s1">-aggregationStart</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">marker aggregation </span><span class="s3">\&quot; </span><span class="s1">+ type).attr(</span><span class="s3">\&quot;</span><span class="s1">refX</span><span class="s3">\&quot;</span><span class="s1">, 18).attr(</span><span class="s3">\&quot;</span><span class="s1">refY</span><span class="s3">\&quot;</span><span class="s1">, 7).attr(</span><span class="s3">\&quot;</span><span class="s1">markerWidth</span><span class="s3">\&quot;</span><span class="s1">, 190).attr(</span><span class="s3">\&quot;</span><span class="s1">markerHeight</span><span class="s3">\&quot;</span><span class="s1">, 240).attr(</span><span class="s3">\&quot;</span><span class="s1">orient</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">auto</span><span class="s3">\&quot;</span><span class="s1">).append(</span><span class="s3">\&quot;</span><span class="s1">path</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">d</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">M 18,7 L9,13 L1,7 L9,1 Z</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">elem.append(</span><span class="s3">\&quot;</span><span class="s1">defs</span><span class="s3">\&quot;</span><span class="s1">).append(</span><span class="s3">\&quot;</span><span class="s1">marker</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">id</span><span class="s3">\&quot;</span><span class="s1">, id + </span><span class="s3">\&quot;</span><span class="s1">_</span><span class="s3">\&quot; </span><span class="s1">+ type + </span><span class="s3">\&quot;</span><span class="s1">-aggregationEnd</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">marker aggregation </span><span class="s3">\&quot; </span><span class="s1">+ type).attr(</span><span class="s3">\&quot;</span><span class="s1">refX</span><span class="s3">\&quot;</span><span class="s1">, 1).attr(</span><span class="s3">\&quot;</span><span class="s1">refY</span><span class="s3">\&quot;</span><span class="s1">, 7).attr(</span><span class="s3">\&quot;</span><span class="s1">markerWidth</span><span class="s3">\&quot;</span><span class="s1">, 20).attr(</span><span class="s3">\&quot;</span><span class="s1">markerHeight</span><span class="s3">\&quot;</span><span class="s1">, 28).attr(</span><span class="s3">\&quot;</span><span class="s1">orient</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">auto</span><span class="s3">\&quot;</span><span class="s1">).append(</span><span class="s3">\&quot;</span><span class="s1">path</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">d</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">M 18,7 L9,13 L1,7 L9,1 Z</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">aggregation</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var dependency = /* @__PURE__ */ __name((elem, type, id) =&gt; {</span><span class="s3">\n  </span><span class="s1">elem.append(</span><span class="s3">\&quot;</span><span class="s1">defs</span><span class="s3">\&quot;</span><span class="s1">).append(</span><span class="s3">\&quot;</span><span class="s1">marker</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">id</span><span class="s3">\&quot;</span><span class="s1">, id + </span><span class="s3">\&quot;</span><span class="s1">_</span><span class="s3">\&quot; </span><span class="s1">+ type + </span><span class="s3">\&quot;</span><span class="s1">-dependencyStart</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">marker dependency </span><span class="s3">\&quot; </span><span class="s1">+ type).attr(</span><span class="s3">\&quot;</span><span class="s1">refX</span><span class="s3">\&quot;</span><span class="s1">, 6).attr(</span><span class="s3">\&quot;</span><span class="s1">refY</span><span class="s3">\&quot;</span><span class="s1">, 7).attr(</span><span class="s3">\&quot;</span><span class="s1">markerWidth</span><span class="s3">\&quot;</span><span class="s1">, 190).attr(</span><span class="s3">\&quot;</span><span class="s1">markerHeight</span><span class="s3">\&quot;</span><span class="s1">, 240).attr(</span><span class="s3">\&quot;</span><span class="s1">orient</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">auto</span><span class="s3">\&quot;</span><span class="s1">).append(</span><span class="s3">\&quot;</span><span class="s1">path</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">d</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">M 5,7 L9,13 L1,7 L9,1 Z</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">elem.append(</span><span class="s3">\&quot;</span><span class="s1">defs</span><span class="s3">\&quot;</span><span class="s1">).append(</span><span class="s3">\&quot;</span><span class="s1">marker</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">id</span><span class="s3">\&quot;</span><span class="s1">, id + </span><span class="s3">\&quot;</span><span class="s1">_</span><span class="s3">\&quot; </span><span class="s1">+ type + </span><span class="s3">\&quot;</span><span class="s1">-dependencyEnd</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">marker dependency </span><span class="s3">\&quot; </span><span class="s1">+ type).attr(</span><span class="s3">\&quot;</span><span class="s1">refX</span><span class="s3">\&quot;</span><span class="s1">, 13).attr(</span><span class="s3">\&quot;</span><span class="s1">refY</span><span class="s3">\&quot;</span><span class="s1">, 7).attr(</span><span class="s3">\&quot;</span><span class="s1">markerWidth</span><span class="s3">\&quot;</span><span class="s1">, 20).attr(</span><span class="s3">\&quot;</span><span class="s1">markerHeight</span><span class="s3">\&quot;</span><span class="s1">, 28).attr(</span><span class="s3">\&quot;</span><span class="s1">orient</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">auto</span><span class="s3">\&quot;</span><span class="s1">).append(</span><span class="s3">\&quot;</span><span class="s1">path</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">d</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">M 18,7 L9,13 L14,7 L9,1 Z</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">dependency</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var lollipop = /* @__PURE__ */ __name((elem, type, id) =&gt; {</span><span class="s3">\n  </span><span class="s1">elem.append(</span><span class="s3">\&quot;</span><span class="s1">defs</span><span class="s3">\&quot;</span><span class="s1">).append(</span><span class="s3">\&quot;</span><span class="s1">marker</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">id</span><span class="s3">\&quot;</span><span class="s1">, id + </span><span class="s3">\&quot;</span><span class="s1">_</span><span class="s3">\&quot; </span><span class="s1">+ type + </span><span class="s3">\&quot;</span><span class="s1">-lollipopStart</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">marker lollipop </span><span class="s3">\&quot; </span><span class="s1">+ type).attr(</span><span class="s3">\&quot;</span><span class="s1">refX</span><span class="s3">\&quot;</span><span class="s1">, 13).attr(</span><span class="s3">\&quot;</span><span class="s1">refY</span><span class="s3">\&quot;</span><span class="s1">, 7).attr(</span><span class="s3">\&quot;</span><span class="s1">markerWidth</span><span class="s3">\&quot;</span><span class="s1">, 190).attr(</span><span class="s3">\&quot;</span><span class="s1">markerHeight</span><span class="s3">\&quot;</span><span class="s1">, 240).attr(</span><span class="s3">\&quot;</span><span class="s1">orient</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">auto</span><span class="s3">\&quot;</span><span class="s1">).append(</span><span class="s3">\&quot;</span><span class="s1">circle</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">stroke</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">black</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">fill</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">transparent</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">cx</span><span class="s3">\&quot;</span><span class="s1">, 7).attr(</span><span class="s3">\&quot;</span><span class="s1">cy</span><span class="s3">\&quot;</span><span class="s1">, 7).attr(</span><span class="s3">\&quot;</span><span class="s1">r</span><span class="s3">\&quot;</span><span class="s1">, 6);</span><span class="s3">\n  </span><span class="s1">elem.append(</span><span class="s3">\&quot;</span><span class="s1">defs</span><span class="s3">\&quot;</span><span class="s1">).append(</span><span class="s3">\&quot;</span><span class="s1">marker</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">id</span><span class="s3">\&quot;</span><span class="s1">, id + </span><span class="s3">\&quot;</span><span class="s1">_</span><span class="s3">\&quot; </span><span class="s1">+ type + </span><span class="s3">\&quot;</span><span class="s1">-lollipopEnd</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">marker lollipop </span><span class="s3">\&quot; </span><span class="s1">+ type).attr(</span><span class="s3">\&quot;</span><span class="s1">refX</span><span class="s3">\&quot;</span><span class="s1">, 1).attr(</span><span class="s3">\&quot;</span><span class="s1">refY</span><span class="s3">\&quot;</span><span class="s1">, 7).attr(</span><span class="s3">\&quot;</span><span class="s1">markerWidth</span><span class="s3">\&quot;</span><span class="s1">, 190).attr(</span><span class="s3">\&quot;</span><span class="s1">markerHeight</span><span class="s3">\&quot;</span><span class="s1">, 240).attr(</span><span class="s3">\&quot;</span><span class="s1">orient</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">auto</span><span class="s3">\&quot;</span><span class="s1">).append(</span><span class="s3">\&quot;</span><span class="s1">circle</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">stroke</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">black</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">fill</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">transparent</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">cx</span><span class="s3">\&quot;</span><span class="s1">, 7).attr(</span><span class="s3">\&quot;</span><span class="s1">cy</span><span class="s3">\&quot;</span><span class="s1">, 7).attr(</span><span class="s3">\&quot;</span><span class="s1">r</span><span class="s3">\&quot;</span><span class="s1">, 6);</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">lollipop</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var point = /* @__PURE__ */ __name((elem, type, id) =&gt; {</span><span class="s3">\n  </span><span class="s1">elem.append(</span><span class="s3">\&quot;</span><span class="s1">marker</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">id</span><span class="s3">\&quot;</span><span class="s1">, id + </span><span class="s3">\&quot;</span><span class="s1">_</span><span class="s3">\&quot; </span><span class="s1">+ type + </span><span class="s3">\&quot;</span><span class="s1">-pointEnd</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">marker </span><span class="s3">\&quot; </span><span class="s1">+ type).attr(</span><span class="s3">\&quot;</span><span class="s1">viewBox</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">0 0 10 10</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">refX</span><span class="s3">\&quot;</span><span class="s1">, 6).attr(</span><span class="s3">\&quot;</span><span class="s1">refY</span><span class="s3">\&quot;</span><span class="s1">, 5).attr(</span><span class="s3">\&quot;</span><span class="s1">markerUnits</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">userSpaceOnUse</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">markerWidth</span><span class="s3">\&quot;</span><span class="s1">, 12).attr(</span><span class="s3">\&quot;</span><span class="s1">markerHeight</span><span class="s3">\&quot;</span><span class="s1">, 12).attr(</span><span class="s3">\&quot;</span><span class="s1">orient</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">auto</span><span class="s3">\&quot;</span><span class="s1">).append(</span><span class="s3">\&quot;</span><span class="s1">path</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">d</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">M 0 0 L 10 5 L 0 10 z</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">arrowMarkerPath</span><span class="s3">\&quot;</span><span class="s1">).style(</span><span class="s3">\&quot;</span><span class="s1">stroke-width</span><span class="s3">\&quot;</span><span class="s1">, 1).style(</span><span class="s3">\&quot;</span><span class="s1">stroke-dasharray</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">1,0</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">elem.append(</span><span class="s3">\&quot;</span><span class="s1">marker</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">id</span><span class="s3">\&quot;</span><span class="s1">, id + </span><span class="s3">\&quot;</span><span class="s1">_</span><span class="s3">\&quot; </span><span class="s1">+ type + </span><span class="s3">\&quot;</span><span class="s1">-pointStart</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">marker </span><span class="s3">\&quot; </span><span class="s1">+ type).attr(</span><span class="s3">\&quot;</span><span class="s1">viewBox</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">0 0 10 10</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">refX</span><span class="s3">\&quot;</span><span class="s1">, 4.5).attr(</span><span class="s3">\&quot;</span><span class="s1">refY</span><span class="s3">\&quot;</span><span class="s1">, 5).attr(</span><span class="s3">\&quot;</span><span class="s1">markerUnits</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">userSpaceOnUse</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">markerWidth</span><span class="s3">\&quot;</span><span class="s1">, 12).attr(</span><span class="s3">\&quot;</span><span class="s1">markerHeight</span><span class="s3">\&quot;</span><span class="s1">, 12).attr(</span><span class="s3">\&quot;</span><span class="s1">orient</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">auto</span><span class="s3">\&quot;</span><span class="s1">).append(</span><span class="s3">\&quot;</span><span class="s1">path</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">d</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">M 0 5 L 10 10 L 10 0 z</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">arrowMarkerPath</span><span class="s3">\&quot;</span><span class="s1">).style(</span><span class="s3">\&quot;</span><span class="s1">stroke-width</span><span class="s3">\&quot;</span><span class="s1">, 1).style(</span><span class="s3">\&quot;</span><span class="s1">stroke-dasharray</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">1,0</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">point</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var circle = /* @__PURE__ */ __name((elem, type, id) =&gt; {</span><span class="s3">\n  </span><span class="s1">elem.append(</span><span class="s3">\&quot;</span><span class="s1">marker</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">id</span><span class="s3">\&quot;</span><span class="s1">, id + </span><span class="s3">\&quot;</span><span class="s1">_</span><span class="s3">\&quot; </span><span class="s1">+ type + </span><span class="s3">\&quot;</span><span class="s1">-circleEnd</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">marker </span><span class="s3">\&quot; </span><span class="s1">+ type).attr(</span><span class="s3">\&quot;</span><span class="s1">viewBox</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">0 0 10 10</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">refX</span><span class="s3">\&quot;</span><span class="s1">, 11).attr(</span><span class="s3">\&quot;</span><span class="s1">refY</span><span class="s3">\&quot;</span><span class="s1">, 5).attr(</span><span class="s3">\&quot;</span><span class="s1">markerUnits</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">userSpaceOnUse</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">markerWidth</span><span class="s3">\&quot;</span><span class="s1">, 11).attr(</span><span class="s3">\&quot;</span><span class="s1">markerHeight</span><span class="s3">\&quot;</span><span class="s1">, 11).attr(</span><span class="s3">\&quot;</span><span class="s1">orient</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">auto</span><span class="s3">\&quot;</span><span class="s1">).append(</span><span class="s3">\&quot;</span><span class="s1">circle</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">cx</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">5</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">cy</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">5</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">r</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">5</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">arrowMarkerPath</span><span class="s3">\&quot;</span><span class="s1">).style(</span><span class="s3">\&quot;</span><span class="s1">stroke-width</span><span class="s3">\&quot;</span><span class="s1">, 1).style(</span><span class="s3">\&quot;</span><span class="s1">stroke-dasharray</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">1,0</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">elem.append(</span><span class="s3">\&quot;</span><span class="s1">marker</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">id</span><span class="s3">\&quot;</span><span class="s1">, id + </span><span class="s3">\&quot;</span><span class="s1">_</span><span class="s3">\&quot; </span><span class="s1">+ type + </span><span class="s3">\&quot;</span><span class="s1">-circleStart</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">marker </span><span class="s3">\&quot; </span><span class="s1">+ type).attr(</span><span class="s3">\&quot;</span><span class="s1">viewBox</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">0 0 10 10</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">refX</span><span class="s3">\&quot;</span><span class="s1">, -1).attr(</span><span class="s3">\&quot;</span><span class="s1">refY</span><span class="s3">\&quot;</span><span class="s1">, 5).attr(</span><span class="s3">\&quot;</span><span class="s1">markerUnits</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">userSpaceOnUse</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">markerWidth</span><span class="s3">\&quot;</span><span class="s1">, 11).attr(</span><span class="s3">\&quot;</span><span class="s1">markerHeight</span><span class="s3">\&quot;</span><span class="s1">, 11).attr(</span><span class="s3">\&quot;</span><span class="s1">orient</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">auto</span><span class="s3">\&quot;</span><span class="s1">).append(</span><span class="s3">\&quot;</span><span class="s1">circle</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">cx</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">5</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">cy</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">5</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">r</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">5</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">arrowMarkerPath</span><span class="s3">\&quot;</span><span class="s1">).style(</span><span class="s3">\&quot;</span><span class="s1">stroke-width</span><span class="s3">\&quot;</span><span class="s1">, 1).style(</span><span class="s3">\&quot;</span><span class="s1">stroke-dasharray</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">1,0</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">circle</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var cross = /* @__PURE__ */ __name((elem, type, id) =&gt; {</span><span class="s3">\n  </span><span class="s1">elem.append(</span><span class="s3">\&quot;</span><span class="s1">marker</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">id</span><span class="s3">\&quot;</span><span class="s1">, id + </span><span class="s3">\&quot;</span><span class="s1">_</span><span class="s3">\&quot; </span><span class="s1">+ type + </span><span class="s3">\&quot;</span><span class="s1">-crossEnd</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">marker cross </span><span class="s3">\&quot; </span><span class="s1">+ type).attr(</span><span class="s3">\&quot;</span><span class="s1">viewBox</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">0 0 11 11</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">refX</span><span class="s3">\&quot;</span><span class="s1">, 12).attr(</span><span class="s3">\&quot;</span><span class="s1">refY</span><span class="s3">\&quot;</span><span class="s1">, 5.2).attr(</span><span class="s3">\&quot;</span><span class="s1">markerUnits</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">userSpaceOnUse</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">markerWidth</span><span class="s3">\&quot;</span><span class="s1">, 11).attr(</span><span class="s3">\&quot;</span><span class="s1">markerHeight</span><span class="s3">\&quot;</span><span class="s1">, 11).attr(</span><span class="s3">\&quot;</span><span class="s1">orient</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">auto</span><span class="s3">\&quot;</span><span class="s1">).append(</span><span class="s3">\&quot;</span><span class="s1">path</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">d</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">M 1,1 l 9,9 M 10,1 l -9,9</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">arrowMarkerPath</span><span class="s3">\&quot;</span><span class="s1">).style(</span><span class="s3">\&quot;</span><span class="s1">stroke-width</span><span class="s3">\&quot;</span><span class="s1">, 2).style(</span><span class="s3">\&quot;</span><span class="s1">stroke-dasharray</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">1,0</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">elem.append(</span><span class="s3">\&quot;</span><span class="s1">marker</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">id</span><span class="s3">\&quot;</span><span class="s1">, id + </span><span class="s3">\&quot;</span><span class="s1">_</span><span class="s3">\&quot; </span><span class="s1">+ type + </span><span class="s3">\&quot;</span><span class="s1">-crossStart</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">marker cross </span><span class="s3">\&quot; </span><span class="s1">+ type).attr(</span><span class="s3">\&quot;</span><span class="s1">viewBox</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">0 0 11 11</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">refX</span><span class="s3">\&quot;</span><span class="s1">, -1).attr(</span><span class="s3">\&quot;</span><span class="s1">refY</span><span class="s3">\&quot;</span><span class="s1">, 5.2).attr(</span><span class="s3">\&quot;</span><span class="s1">markerUnits</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">userSpaceOnUse</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">markerWidth</span><span class="s3">\&quot;</span><span class="s1">, 11).attr(</span><span class="s3">\&quot;</span><span class="s1">markerHeight</span><span class="s3">\&quot;</span><span class="s1">, 11).attr(</span><span class="s3">\&quot;</span><span class="s1">orient</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">auto</span><span class="s3">\&quot;</span><span class="s1">).append(</span><span class="s3">\&quot;</span><span class="s1">path</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">d</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">M 1,1 l 9,9 M 10,1 l -9,9</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">arrowMarkerPath</span><span class="s3">\&quot;</span><span class="s1">).style(</span><span class="s3">\&quot;</span><span class="s1">stroke-width</span><span class="s3">\&quot;</span><span class="s1">, 2).style(</span><span class="s3">\&quot;</span><span class="s1">stroke-dasharray</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">1,0</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">cross</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var barb = /* @__PURE__ */ __name((elem, type, id) =&gt; {</span><span class="s3">\n  </span><span class="s1">elem.append(</span><span class="s3">\&quot;</span><span class="s1">defs</span><span class="s3">\&quot;</span><span class="s1">).append(</span><span class="s3">\&quot;</span><span class="s1">marker</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">id</span><span class="s3">\&quot;</span><span class="s1">, id + </span><span class="s3">\&quot;</span><span class="s1">_</span><span class="s3">\&quot; </span><span class="s1">+ type + </span><span class="s3">\&quot;</span><span class="s1">-barbEnd</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">refX</span><span class="s3">\&quot;</span><span class="s1">, 19).attr(</span><span class="s3">\&quot;</span><span class="s1">refY</span><span class="s3">\&quot;</span><span class="s1">, 7).attr(</span><span class="s3">\&quot;</span><span class="s1">markerWidth</span><span class="s3">\&quot;</span><span class="s1">, 20).attr(</span><span class="s3">\&quot;</span><span class="s1">markerHeight</span><span class="s3">\&quot;</span><span class="s1">, 14).attr(</span><span class="s3">\&quot;</span><span class="s1">markerUnits</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">strokeWidth</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">orient</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">auto</span><span class="s3">\&quot;</span><span class="s1">).append(</span><span class="s3">\&quot;</span><span class="s1">path</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">d</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">M 19,7 L9,13 L14,7 L9,1 Z</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">barb</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var markers = {</span><span class="s3">\n  </span><span class="s1">extension,</span><span class="s3">\n  </span><span class="s1">composition,</span><span class="s3">\n  </span><span class="s1">aggregation,</span><span class="s3">\n  </span><span class="s1">dependency,</span><span class="s3">\n  </span><span class="s1">lollipop,</span><span class="s3">\n  </span><span class="s1">point,</span><span class="s3">\n  </span><span class="s1">circle,</span><span class="s3">\n  </span><span class="s1">cross,</span><span class="s3">\n  </span><span class="s1">barb</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n</span><span class="s1">var markers_default = insertMarkers;</span><span class="s3">\n\n</span><span class="s1">// src/diagrams/block/layout.ts</span><span class="s3">\n</span><span class="s1">var padding = getConfig2()?.block?.padding ?? 8;</span><span class="s3">\n</span><span class="s1">function calculateBlockPosition(columns, position) {</span><span class="s3">\n  </span><span class="s1">if (columns === 0 || !Number.isInteger(columns)) {</span><span class="s3">\n    </span><span class="s1">throw new Error(</span><span class="s3">\&quot;</span><span class="s1">Columns must be an integer !== 0.</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (position &lt; 0 || !Number.isInteger(position)) {</span><span class="s3">\n    </span><span class="s1">throw new Error(</span><span class="s3">\&quot;</span><span class="s1">Position must be a non-negative integer.</span><span class="s3">\&quot; </span><span class="s1">+ position);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (columns &lt; 0) {</span><span class="s3">\n    </span><span class="s1">return { px: position, py: 0 };</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (columns === 1) {</span><span class="s3">\n    </span><span class="s1">return { px: 0, py: position };</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">const px = position % columns;</span><span class="s3">\n  </span><span class="s1">const py = Math.floor(position / columns);</span><span class="s3">\n  </span><span class="s1">return { px, py };</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">__name(calculateBlockPosition, </span><span class="s3">\&quot;</span><span class="s1">calculateBlockPosition</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var getMaxChildSize = /* @__PURE__ */ __name((block) =&gt; {</span><span class="s3">\n  </span><span class="s1">let maxWidth = 0;</span><span class="s3">\n  </span><span class="s1">let maxHeight = 0;</span><span class="s3">\n  </span><span class="s1">for (const child of block.children) {</span><span class="s3">\n    </span><span class="s1">const { width, height, x, y } = child.size ?? { width: 0, height: 0, x: 0, y: 0 };</span><span class="s3">\n    </span><span class="s1">log.debug(</span><span class="s3">\n      \&quot;</span><span class="s1">getMaxChildSize abc95 child:</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n      </span><span class="s1">child.id,</span><span class="s3">\n      \&quot;</span><span class="s1">width:</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n      </span><span class="s1">width,</span><span class="s3">\n      \&quot;</span><span class="s1">height:</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n      </span><span class="s1">height,</span><span class="s3">\n      \&quot;</span><span class="s1">x:</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n      </span><span class="s1">x,</span><span class="s3">\n      \&quot;</span><span class="s1">y:</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n      </span><span class="s1">y,</span><span class="s3">\n      </span><span class="s1">child.type</span><span class="s3">\n    </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">if (child.type === </span><span class="s3">\&quot;</span><span class="s1">space</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">continue;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">if (width &gt; maxWidth) {</span><span class="s3">\n      </span><span class="s1">maxWidth = width / (block.widthInColumns ?? 1);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">if (height &gt; maxHeight) {</span><span class="s3">\n      </span><span class="s1">maxHeight = height;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return { width: maxWidth, height: maxHeight };</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">getMaxChildSize</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">function setBlockSizes(block, db2, siblingWidth = 0, siblingHeight = 0) {</span><span class="s3">\n  </span><span class="s1">log.debug(</span><span class="s3">\n    \&quot;</span><span class="s1">setBlockSizes abc95 (start)</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n    </span><span class="s1">block.id,</span><span class="s3">\n    </span><span class="s1">block?.size?.x,</span><span class="s3">\n    \&quot;</span><span class="s1">block width =</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n    </span><span class="s1">block?.size,</span><span class="s3">\n    \&quot;</span><span class="s1">sieblingWidth</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n    </span><span class="s1">siblingWidth</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">if (!block?.size?.width) {</span><span class="s3">\n    </span><span class="s1">block.size = {</span><span class="s3">\n      </span><span class="s1">width: siblingWidth,</span><span class="s3">\n      </span><span class="s1">height: siblingHeight,</span><span class="s3">\n      </span><span class="s1">x: 0,</span><span class="s3">\n      </span><span class="s1">y: 0</span><span class="s3">\n    </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">let maxWidth = 0;</span><span class="s3">\n  </span><span class="s1">let maxHeight = 0;</span><span class="s3">\n  </span><span class="s1">if (block.children?.length &gt; 0) {</span><span class="s3">\n    </span><span class="s1">for (const child of block.children) {</span><span class="s3">\n      </span><span class="s1">setBlockSizes(child, db2);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">const childSize = getMaxChildSize(block);</span><span class="s3">\n    </span><span class="s1">maxWidth = childSize.width;</span><span class="s3">\n    </span><span class="s1">maxHeight = childSize.height;</span><span class="s3">\n    </span><span class="s1">log.debug(</span><span class="s3">\&quot;</span><span class="s1">setBlockSizes abc95 maxWidth of</span><span class="s3">\&quot;</span><span class="s1">, block.id, </span><span class="s3">\&quot;</span><span class="s1">:s children is </span><span class="s3">\&quot;</span><span class="s1">, maxWidth, maxHeight);</span><span class="s3">\n    </span><span class="s1">for (const child of block.children) {</span><span class="s3">\n      </span><span class="s1">if (child.size) {</span><span class="s3">\n        </span><span class="s1">log.debug(</span><span class="s3">\n          </span><span class="s1">`abc95 Setting size of children of ${block.id} id=${child.id} ${maxWidth} ${maxHeight} ${JSON.stringify(child.size)}`</span><span class="s3">\n        </span><span class="s1">);</span><span class="s3">\n        </span><span class="s1">child.size.width = maxWidth * (child.widthInColumns ?? 1) + padding * ((child.widthInColumns ?? 1) - 1);</span><span class="s3">\n        </span><span class="s1">child.size.height = maxHeight;</span><span class="s3">\n        </span><span class="s1">child.size.x = 0;</span><span class="s3">\n        </span><span class="s1">child.size.y = 0;</span><span class="s3">\n        </span><span class="s1">log.debug(</span><span class="s3">\n          </span><span class="s1">`abc95 updating size of ${block.id} children child:${child.id} maxWidth:${maxWidth} maxHeight:${maxHeight}`</span><span class="s3">\n        </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">for (const child of block.children) {</span><span class="s3">\n      </span><span class="s1">setBlockSizes(child, db2, maxWidth, maxHeight);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">const columns = block.columns ?? -1;</span><span class="s3">\n    </span><span class="s1">let numItems = 0;</span><span class="s3">\n    </span><span class="s1">for (const child of block.children) {</span><span class="s3">\n      </span><span class="s1">numItems += child.widthInColumns ?? 1;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">let xSize = block.children.length;</span><span class="s3">\n    </span><span class="s1">if (columns &gt; 0 &amp;&amp; columns &lt; numItems) {</span><span class="s3">\n      </span><span class="s1">xSize = columns;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">const ySize = Math.ceil(numItems / xSize);</span><span class="s3">\n    </span><span class="s1">let width = xSize * (maxWidth + padding) + padding;</span><span class="s3">\n    </span><span class="s1">let height = ySize * (maxHeight + padding) + padding;</span><span class="s3">\n    </span><span class="s1">if (width &lt; siblingWidth) {</span><span class="s3">\n      </span><span class="s1">log.debug(</span><span class="s3">\n        </span><span class="s1">`Detected to small siebling: abc95 ${block.id} sieblingWidth ${siblingWidth} sieblingHeight ${siblingHeight} width ${width}`</span><span class="s3">\n      </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">width = siblingWidth;</span><span class="s3">\n      </span><span class="s1">height = siblingHeight;</span><span class="s3">\n      </span><span class="s1">const childWidth = (siblingWidth - xSize * padding - padding) / xSize;</span><span class="s3">\n      </span><span class="s1">const childHeight = (siblingHeight - ySize * padding - padding) / ySize;</span><span class="s3">\n      </span><span class="s1">log.debug(</span><span class="s3">\&quot;</span><span class="s1">Size indata abc88</span><span class="s3">\&quot;</span><span class="s1">, block.id, </span><span class="s3">\&quot;</span><span class="s1">childWidth</span><span class="s3">\&quot;</span><span class="s1">, childWidth, </span><span class="s3">\&quot;</span><span class="s1">maxWidth</span><span class="s3">\&quot;</span><span class="s1">, maxWidth);</span><span class="s3">\n      </span><span class="s1">log.debug(</span><span class="s3">\&quot;</span><span class="s1">Size indata abc88</span><span class="s3">\&quot;</span><span class="s1">, block.id, </span><span class="s3">\&quot;</span><span class="s1">childHeight</span><span class="s3">\&quot;</span><span class="s1">, childHeight, </span><span class="s3">\&quot;</span><span class="s1">maxHeight</span><span class="s3">\&quot;</span><span class="s1">, maxHeight);</span><span class="s3">\n      </span><span class="s1">log.debug(</span><span class="s3">\&quot;</span><span class="s1">Size indata abc88 xSize</span><span class="s3">\&quot;</span><span class="s1">, xSize, </span><span class="s3">\&quot;</span><span class="s1">padding</span><span class="s3">\&quot;</span><span class="s1">, padding);</span><span class="s3">\n      </span><span class="s1">for (const child of block.children) {</span><span class="s3">\n        </span><span class="s1">if (child.size) {</span><span class="s3">\n          </span><span class="s1">child.size.width = childWidth;</span><span class="s3">\n          </span><span class="s1">child.size.height = childHeight;</span><span class="s3">\n          </span><span class="s1">child.size.x = 0;</span><span class="s3">\n          </span><span class="s1">child.size.y = 0;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">log.debug(</span><span class="s3">\n      </span><span class="s1">`abc95 (finale calc) ${block.id} xSize ${xSize} ySize ${ySize} columns ${columns}${block.children.length} width=${Math.max(width, block.size?.width || 0)}`</span><span class="s3">\n    </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">if (width &lt; (block?.size?.width || 0)) {</span><span class="s3">\n      </span><span class="s1">width = block?.size?.width || 0;</span><span class="s3">\n      </span><span class="s1">const num = columns &gt; 0 ? Math.min(block.children.length, columns) : block.children.length;</span><span class="s3">\n      </span><span class="s1">if (num &gt; 0) {</span><span class="s3">\n        </span><span class="s1">const childWidth = (width - num * padding - padding) / num;</span><span class="s3">\n        </span><span class="s1">log.debug(</span><span class="s3">\&quot;</span><span class="s1">abc95 (growing to fit) width</span><span class="s3">\&quot;</span><span class="s1">, block.id, width, block.size?.width, childWidth);</span><span class="s3">\n        </span><span class="s1">for (const child of block.children) {</span><span class="s3">\n          </span><span class="s1">if (child.size) {</span><span class="s3">\n            </span><span class="s1">child.size.width = childWidth;</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">block.size = {</span><span class="s3">\n      </span><span class="s1">width,</span><span class="s3">\n      </span><span class="s1">height,</span><span class="s3">\n      </span><span class="s1">x: 0,</span><span class="s3">\n      </span><span class="s1">y: 0</span><span class="s3">\n    </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">log.debug(</span><span class="s3">\n    \&quot;</span><span class="s1">setBlockSizes abc94 (done)</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n    </span><span class="s1">block.id,</span><span class="s3">\n    </span><span class="s1">block?.size?.x,</span><span class="s3">\n    </span><span class="s1">block?.size?.width,</span><span class="s3">\n    </span><span class="s1">block?.size?.y,</span><span class="s3">\n    </span><span class="s1">block?.size?.height</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">__name(setBlockSizes, </span><span class="s3">\&quot;</span><span class="s1">setBlockSizes</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">function layoutBlocks(block, db2) {</span><span class="s3">\n  </span><span class="s1">log.debug(</span><span class="s3">\n    </span><span class="s1">`abc85 layout blocks (=&gt;layoutBlocks) ${block.id} x: ${block?.size?.x} y: ${block?.size?.y} width: ${block?.size?.width}`</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const columns = block.columns ?? -1;</span><span class="s3">\n  </span><span class="s1">log.debug(</span><span class="s3">\&quot;</span><span class="s1">layoutBlocks columns abc95</span><span class="s3">\&quot;</span><span class="s1">, block.id, </span><span class="s3">\&quot;</span><span class="s1">=&gt;</span><span class="s3">\&quot;</span><span class="s1">, columns, block);</span><span class="s3">\n  </span><span class="s1">if (block.children &amp;&amp; // find max width of children</span><span class="s3">\n  </span><span class="s1">block.children.length &gt; 0) {</span><span class="s3">\n    </span><span class="s1">const width = block?.children[0]?.size?.width ?? 0;</span><span class="s3">\n    </span><span class="s1">const widthOfChildren = block.children.length * width + (block.children.length - 1) * padding;</span><span class="s3">\n    </span><span class="s1">log.debug(</span><span class="s3">\&quot;</span><span class="s1">widthOfChildren 88</span><span class="s3">\&quot;</span><span class="s1">, widthOfChildren, </span><span class="s3">\&quot;</span><span class="s1">posX</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">let columnPos = 0;</span><span class="s3">\n    </span><span class="s1">log.debug(</span><span class="s3">\&quot;</span><span class="s1">abc91 block?.size?.x</span><span class="s3">\&quot;</span><span class="s1">, block.id, block?.size?.x);</span><span class="s3">\n    </span><span class="s1">let startingPosX = block?.size?.x ? block?.size?.x + (-block?.size?.width / 2 || 0) : -padding;</span><span class="s3">\n    </span><span class="s1">let rowPos = 0;</span><span class="s3">\n    </span><span class="s1">for (const child of block.children) {</span><span class="s3">\n      </span><span class="s1">const parent = block;</span><span class="s3">\n      </span><span class="s1">if (!child.size) {</span><span class="s3">\n        </span><span class="s1">continue;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">const { width: width2, height } = child.size;</span><span class="s3">\n      </span><span class="s1">const { px, py } = calculateBlockPosition(columns, columnPos);</span><span class="s3">\n      </span><span class="s1">if (py != rowPos) {</span><span class="s3">\n        </span><span class="s1">rowPos = py;</span><span class="s3">\n        </span><span class="s1">startingPosX = block?.size?.x ? block?.size?.x + (-block?.size?.width / 2 || 0) : -padding;</span><span class="s3">\n        </span><span class="s1">log.debug(</span><span class="s3">\&quot;</span><span class="s1">New row in layout for block</span><span class="s3">\&quot;</span><span class="s1">, block.id, </span><span class="s3">\&quot; </span><span class="s1">and child </span><span class="s3">\&quot;</span><span class="s1">, child.id, rowPos);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">log.debug(</span><span class="s3">\n        </span><span class="s1">`abc89 layout blocks (child) id: ${child.id} Pos: ${columnPos} (px, py) ${px},${py} (${parent?.size?.x},${parent?.size?.y}) parent: ${parent.id} width: ${width2}${padding}`</span><span class="s3">\n      </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">if (parent.size) {</span><span class="s3">\n        </span><span class="s1">const halfWidth = width2 / 2;</span><span class="s3">\n        </span><span class="s1">child.size.x = startingPosX + padding + halfWidth;</span><span class="s3">\n        </span><span class="s1">log.debug(</span><span class="s3">\n          </span><span class="s1">`abc91 layout blocks (calc) px, pyid:${child.id} startingPos=X${startingPosX} new startingPosX${child.size.x} ${halfWidth} padding=${padding} width=${width2} halfWidth=${halfWidth} =&gt; x:${child.size.x} y:${child.size.y} ${child.widthInColumns} (width * (child?.w || 1)) / 2 ${width2 * (child?.widthInColumns ?? 1) / 2}`</span><span class="s3">\n        </span><span class="s1">);</span><span class="s3">\n        </span><span class="s1">startingPosX = child.size.x + halfWidth;</span><span class="s3">\n        </span><span class="s1">child.size.y = parent.size.y - parent.size.height / 2 + py * (height + padding) + height / 2 + padding;</span><span class="s3">\n        </span><span class="s1">log.debug(</span><span class="s3">\n          </span><span class="s1">`abc88 layout blocks (calc) px, pyid:${child.id}startingPosX${startingPosX}${padding}${halfWidth}=&gt;x:${child.size.x}y:${child.size.y}${child.widthInColumns}(width * (child?.w || 1)) / 2${width2 * (child?.widthInColumns ?? 1) / 2}`</span><span class="s3">\n        </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">if (child.children) {</span><span class="s3">\n        </span><span class="s1">layoutBlocks(child, db2);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">columnPos += child?.widthInColumns ?? 1;</span><span class="s3">\n      </span><span class="s1">log.debug(</span><span class="s3">\&quot;</span><span class="s1">abc88 columnsPos</span><span class="s3">\&quot;</span><span class="s1">, child, columnPos);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">log.debug(</span><span class="s3">\n    </span><span class="s1">`layout blocks (&lt;==layoutBlocks) ${block.id} x: ${block?.size?.x} y: ${block?.size?.y} width: ${block?.size?.width}`</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">__name(layoutBlocks, </span><span class="s3">\&quot;</span><span class="s1">layoutBlocks</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">function findBounds(block, { minX, minY, maxX, maxY } = { minX: 0, minY: 0, maxX: 0, maxY: 0 }) {</span><span class="s3">\n  </span><span class="s1">if (block.size &amp;&amp; block.id !== </span><span class="s3">\&quot;</span><span class="s1">root</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">const { x, y, width, height } = block.size;</span><span class="s3">\n    </span><span class="s1">if (x - width / 2 &lt; minX) {</span><span class="s3">\n      </span><span class="s1">minX = x - width / 2;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">if (y - height / 2 &lt; minY) {</span><span class="s3">\n      </span><span class="s1">minY = y - height / 2;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">if (x + width / 2 &gt; maxX) {</span><span class="s3">\n      </span><span class="s1">maxX = x + width / 2;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">if (y + height / 2 &gt; maxY) {</span><span class="s3">\n      </span><span class="s1">maxY = y + height / 2;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (block.children) {</span><span class="s3">\n    </span><span class="s1">for (const child of block.children) {</span><span class="s3">\n      </span><span class="s1">({ minX, minY, maxX, maxY } = findBounds(child, { minX, minY, maxX, maxY }));</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return { minX, minY, maxX, maxY };</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">__name(findBounds, </span><span class="s3">\&quot;</span><span class="s1">findBounds</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">function layout(db2) {</span><span class="s3">\n  </span><span class="s1">const root = db2.getBlock(</span><span class="s3">\&quot;</span><span class="s1">root</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">if (!root) {</span><span class="s3">\n    </span><span class="s1">return;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">setBlockSizes(root, db2, 0, 0);</span><span class="s3">\n  </span><span class="s1">layoutBlocks(root, db2);</span><span class="s3">\n  </span><span class="s1">log.debug(</span><span class="s3">\&quot;</span><span class="s1">getBlocks</span><span class="s3">\&quot;</span><span class="s1">, JSON.stringify(root, null, 2));</span><span class="s3">\n  </span><span class="s1">const { minX, minY, maxX, maxY } = findBounds(root);</span><span class="s3">\n  </span><span class="s1">const height = maxY - minY;</span><span class="s3">\n  </span><span class="s1">const width = maxX - minX;</span><span class="s3">\n  </span><span class="s1">return { x: minX, y: minY, width, height };</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">__name(layout, </span><span class="s3">\&quot;</span><span class="s1">layout</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n\n</span><span class="s1">// src/diagrams/block/renderHelpers.ts</span><span class="s3">\n</span><span class="s1">import * as graphlib from </span><span class="s3">\&quot;</span><span class="s1">dagre-d3-es/src/graphlib/index.js</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n\n</span><span class="s1">// src/dagre-wrapper/createLabel.js</span><span class="s3">\n</span><span class="s1">import { select } from </span><span class="s3">\&quot;</span><span class="s1">d3</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">function applyStyle(dom, styleFn) {</span><span class="s3">\n  </span><span class="s1">if (styleFn) {</span><span class="s3">\n    </span><span class="s1">dom.attr(</span><span class="s3">\&quot;</span><span class="s1">style</span><span class="s3">\&quot;</span><span class="s1">, styleFn);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">__name(applyStyle, </span><span class="s3">\&quot;</span><span class="s1">applyStyle</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">function addHtmlLabel(node) {</span><span class="s3">\n  </span><span class="s1">const fo = select(document.createElementNS(</span><span class="s3">\&quot;</span><span class="s1">http://www.w3.org/2000/svg</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">foreignObject</span><span class="s3">\&quot;</span><span class="s1">));</span><span class="s3">\n  </span><span class="s1">const div = fo.append(</span><span class="s3">\&quot;</span><span class="s1">xhtml:div</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const label = node.label;</span><span class="s3">\n  </span><span class="s1">const labelClass = node.isNode ? </span><span class="s3">\&quot;</span><span class="s1">nodeLabel</span><span class="s3">\&quot; </span><span class="s1">: </span><span class="s3">\&quot;</span><span class="s1">edgeLabel</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">const span = div.append(</span><span class="s3">\&quot;</span><span class="s1">span</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">span.html(label);</span><span class="s3">\n  </span><span class="s1">applyStyle(span, node.labelStyle);</span><span class="s3">\n  </span><span class="s1">span.attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, labelClass);</span><span class="s3">\n  </span><span class="s1">applyStyle(div, node.labelStyle);</span><span class="s3">\n  </span><span class="s1">div.style(</span><span class="s3">\&quot;</span><span class="s1">display</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">inline-block</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">div.style(</span><span class="s3">\&quot;</span><span class="s1">white-space</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">nowrap</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">div.attr(</span><span class="s3">\&quot;</span><span class="s1">xmlns</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">http://www.w3.org/1999/xhtml</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">return fo.node();</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">__name(addHtmlLabel, </span><span class="s3">\&quot;</span><span class="s1">addHtmlLabel</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var createLabel = /* @__PURE__ */ __name((_vertexText, style, isTitle, isNode) =&gt; {</span><span class="s3">\n  </span><span class="s1">let vertexText = _vertexText || </span><span class="s3">\&quot;\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">if (typeof vertexText === </span><span class="s3">\&quot;</span><span class="s1">object</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">vertexText = vertexText[0];</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (evaluate(getConfig2().flowchart.htmlLabels)) {</span><span class="s3">\n    </span><span class="s1">vertexText = vertexText.replace(/</span><span class="s3">\\\\</span><span class="s1">n|</span><span class="s3">\\</span><span class="s1">n/g, </span><span class="s3">\&quot;</span><span class="s1">&lt;br /&gt;</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">log.debug(</span><span class="s3">\&quot;</span><span class="s1">vertexText</span><span class="s3">\&quot; </span><span class="s1">+ vertexText);</span><span class="s3">\n    </span><span class="s1">const node = {</span><span class="s3">\n      </span><span class="s1">isNode,</span><span class="s3">\n      </span><span class="s1">label: replaceIconSubstring(decodeEntities(vertexText)),</span><span class="s3">\n      </span><span class="s1">labelStyle: style.replace(</span><span class="s3">\&quot;</span><span class="s1">fill:</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">color:</span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">};</span><span class="s3">\n    </span><span class="s1">let vertexNode = addHtmlLabel(node);</span><span class="s3">\n    </span><span class="s1">return vertexNode;</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">const svgLabel = document.createElementNS(</span><span class="s3">\&quot;</span><span class="s1">http://www.w3.org/2000/svg</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">text</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">svgLabel.setAttribute(</span><span class="s3">\&quot;</span><span class="s1">style</span><span class="s3">\&quot;</span><span class="s1">, style.replace(</span><span class="s3">\&quot;</span><span class="s1">color:</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">fill:</span><span class="s3">\&quot;</span><span class="s1">));</span><span class="s3">\n    </span><span class="s1">let rows = [];</span><span class="s3">\n    </span><span class="s1">if (typeof vertexText === </span><span class="s3">\&quot;</span><span class="s1">string</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">rows = vertexText.split(/</span><span class="s3">\\\\</span><span class="s1">n|</span><span class="s3">\\</span><span class="s1">n|&lt;br</span><span class="s3">\\</span><span class="s1">s*</span><span class="s3">\\</span><span class="s1">/?&gt;/gi);</span><span class="s3">\n    </span><span class="s1">} else if (Array.isArray(vertexText)) {</span><span class="s3">\n      </span><span class="s1">rows = vertexText;</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">rows = [];</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">for (const row of rows) {</span><span class="s3">\n      </span><span class="s1">const tspan = document.createElementNS(</span><span class="s3">\&quot;</span><span class="s1">http://www.w3.org/2000/svg</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">tspan</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">tspan.setAttributeNS(</span><span class="s3">\&quot;</span><span class="s1">http://www.w3.org/XML/1998/namespace</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">xml:space</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">preserve</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">tspan.setAttribute(</span><span class="s3">\&quot;</span><span class="s1">dy</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">1em</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">tspan.setAttribute(</span><span class="s3">\&quot;</span><span class="s1">x</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">0</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">if (isTitle) {</span><span class="s3">\n        </span><span class="s1">tspan.setAttribute(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">title-row</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">tspan.setAttribute(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">row</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">tspan.textContent = row.trim();</span><span class="s3">\n      </span><span class="s1">svgLabel.appendChild(tspan);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">return svgLabel;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">createLabel</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var createLabel_default = createLabel;</span><span class="s3">\n\n</span><span class="s1">// src/dagre-wrapper/edges.js</span><span class="s3">\n</span><span class="s1">import { line, curveBasis, select as select2 } from </span><span class="s3">\&quot;</span><span class="s1">d3</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n\n</span><span class="s1">// src/dagre-wrapper/edgeMarker.ts</span><span class="s3">\n</span><span class="s1">var addEdgeMarkers = /* @__PURE__ */ __name((svgPath, edge, url, id, diagramType) =&gt; {</span><span class="s3">\n  </span><span class="s1">if (edge.arrowTypeStart) {</span><span class="s3">\n    </span><span class="s1">addEdgeMarker(svgPath, </span><span class="s3">\&quot;</span><span class="s1">start</span><span class="s3">\&quot;</span><span class="s1">, edge.arrowTypeStart, url, id, diagramType);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (edge.arrowTypeEnd) {</span><span class="s3">\n    </span><span class="s1">addEdgeMarker(svgPath, </span><span class="s3">\&quot;</span><span class="s1">end</span><span class="s3">\&quot;</span><span class="s1">, edge.arrowTypeEnd, url, id, diagramType);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">addEdgeMarkers</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var arrowTypesMap = {</span><span class="s3">\n  </span><span class="s1">arrow_cross: </span><span class="s3">\&quot;</span><span class="s1">cross</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n  </span><span class="s1">arrow_point: </span><span class="s3">\&quot;</span><span class="s1">point</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n  </span><span class="s1">arrow_barb: </span><span class="s3">\&quot;</span><span class="s1">barb</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n  </span><span class="s1">arrow_circle: </span><span class="s3">\&quot;</span><span class="s1">circle</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n  </span><span class="s1">aggregation: </span><span class="s3">\&quot;</span><span class="s1">aggregation</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n  </span><span class="s1">extension: </span><span class="s3">\&quot;</span><span class="s1">extension</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n  </span><span class="s1">composition: </span><span class="s3">\&quot;</span><span class="s1">composition</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n  </span><span class="s1">dependency: </span><span class="s3">\&quot;</span><span class="s1">dependency</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n  </span><span class="s1">lollipop: </span><span class="s3">\&quot;</span><span class="s1">lollipop</span><span class="s3">\&quot;\n</span><span class="s1">};</span><span class="s3">\n</span><span class="s1">var addEdgeMarker = /* @__PURE__ */ __name((svgPath, position, arrowType, url, id, diagramType) =&gt; {</span><span class="s3">\n  </span><span class="s1">const endMarkerType = arrowTypesMap[arrowType];</span><span class="s3">\n  </span><span class="s1">if (!endMarkerType) {</span><span class="s3">\n    </span><span class="s1">log.warn(`Unknown arrow type: ${arrowType}`);</span><span class="s3">\n    </span><span class="s1">return;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">const suffix = position === </span><span class="s3">\&quot;</span><span class="s1">start</span><span class="s3">\&quot; </span><span class="s1">? </span><span class="s3">\&quot;</span><span class="s1">Start</span><span class="s3">\&quot; </span><span class="s1">: </span><span class="s3">\&quot;</span><span class="s1">End</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">svgPath.attr(`marker-${position}`, `url(${url}#${id}_${diagramType}-${endMarkerType}${suffix})`);</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">addEdgeMarker</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n\n</span><span class="s1">// src/dagre-wrapper/edges.js</span><span class="s3">\n</span><span class="s1">var edgeLabels = {};</span><span class="s3">\n</span><span class="s1">var terminalLabels = {};</span><span class="s3">\n</span><span class="s1">var insertEdgeLabel = /* @__PURE__ */ __name((elem, edge) =&gt; {</span><span class="s3">\n  </span><span class="s1">const config2 = getConfig2();</span><span class="s3">\n  </span><span class="s1">const useHtmlLabels = evaluate(config2.flowchart.htmlLabels);</span><span class="s3">\n  </span><span class="s1">const labelElement = edge.labelType === </span><span class="s3">\&quot;</span><span class="s1">markdown</span><span class="s3">\&quot; </span><span class="s1">? createText(</span><span class="s3">\n    </span><span class="s1">elem,</span><span class="s3">\n    </span><span class="s1">edge.label,</span><span class="s3">\n    </span><span class="s1">{</span><span class="s3">\n      </span><span class="s1">style: edge.labelStyle,</span><span class="s3">\n      </span><span class="s1">useHtmlLabels,</span><span class="s3">\n      </span><span class="s1">addSvgBackground: true</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">config2</span><span class="s3">\n  </span><span class="s1">) : createLabel_default(edge.label, edge.labelStyle);</span><span class="s3">\n  </span><span class="s1">const edgeLabel = elem.insert(</span><span class="s3">\&quot;</span><span class="s1">g</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">edgeLabel</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const label = edgeLabel.insert(</span><span class="s3">\&quot;</span><span class="s1">g</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">label</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">label.node().appendChild(labelElement);</span><span class="s3">\n  </span><span class="s1">let bbox = labelElement.getBBox();</span><span class="s3">\n  </span><span class="s1">if (useHtmlLabels) {</span><span class="s3">\n    </span><span class="s1">const div = labelElement.children[0];</span><span class="s3">\n    </span><span class="s1">const dv = select2(labelElement);</span><span class="s3">\n    </span><span class="s1">bbox = div.getBoundingClientRect();</span><span class="s3">\n    </span><span class="s1">dv.attr(</span><span class="s3">\&quot;</span><span class="s1">width</span><span class="s3">\&quot;</span><span class="s1">, bbox.width);</span><span class="s3">\n    </span><span class="s1">dv.attr(</span><span class="s3">\&quot;</span><span class="s1">height</span><span class="s3">\&quot;</span><span class="s1">, bbox.height);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">label.attr(</span><span class="s3">\&quot;</span><span class="s1">transform</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">translate(</span><span class="s3">\&quot; </span><span class="s1">+ -bbox.width / 2 + </span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot; </span><span class="s1">+ -bbox.height / 2 + </span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">edgeLabels[edge.id] = edgeLabel;</span><span class="s3">\n  </span><span class="s1">edge.width = bbox.width;</span><span class="s3">\n  </span><span class="s1">edge.height = bbox.height;</span><span class="s3">\n  </span><span class="s1">let fo;</span><span class="s3">\n  </span><span class="s1">if (edge.startLabelLeft) {</span><span class="s3">\n    </span><span class="s1">const startLabelElement = createLabel_default(edge.startLabelLeft, edge.labelStyle);</span><span class="s3">\n    </span><span class="s1">const startEdgeLabelLeft = elem.insert(</span><span class="s3">\&quot;</span><span class="s1">g</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">edgeTerminals</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">const inner = startEdgeLabelLeft.insert(</span><span class="s3">\&quot;</span><span class="s1">g</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">inner</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">fo = inner.node().appendChild(startLabelElement);</span><span class="s3">\n    </span><span class="s1">const slBox = startLabelElement.getBBox();</span><span class="s3">\n    </span><span class="s1">inner.attr(</span><span class="s3">\&quot;</span><span class="s1">transform</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">translate(</span><span class="s3">\&quot; </span><span class="s1">+ -slBox.width / 2 + </span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot; </span><span class="s1">+ -slBox.height / 2 + </span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">if (!terminalLabels[edge.id]) {</span><span class="s3">\n      </span><span class="s1">terminalLabels[edge.id] = {};</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">terminalLabels[edge.id].startLeft = startEdgeLabelLeft;</span><span class="s3">\n    </span><span class="s1">setTerminalWidth(fo, edge.startLabelLeft);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (edge.startLabelRight) {</span><span class="s3">\n    </span><span class="s1">const startLabelElement = createLabel_default(edge.startLabelRight, edge.labelStyle);</span><span class="s3">\n    </span><span class="s1">const startEdgeLabelRight = elem.insert(</span><span class="s3">\&quot;</span><span class="s1">g</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">edgeTerminals</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">const inner = startEdgeLabelRight.insert(</span><span class="s3">\&quot;</span><span class="s1">g</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">inner</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">fo = startEdgeLabelRight.node().appendChild(startLabelElement);</span><span class="s3">\n    </span><span class="s1">inner.node().appendChild(startLabelElement);</span><span class="s3">\n    </span><span class="s1">const slBox = startLabelElement.getBBox();</span><span class="s3">\n    </span><span class="s1">inner.attr(</span><span class="s3">\&quot;</span><span class="s1">transform</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">translate(</span><span class="s3">\&quot; </span><span class="s1">+ -slBox.width / 2 + </span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot; </span><span class="s1">+ -slBox.height / 2 + </span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">if (!terminalLabels[edge.id]) {</span><span class="s3">\n      </span><span class="s1">terminalLabels[edge.id] = {};</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">terminalLabels[edge.id].startRight = startEdgeLabelRight;</span><span class="s3">\n    </span><span class="s1">setTerminalWidth(fo, edge.startLabelRight);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (edge.endLabelLeft) {</span><span class="s3">\n    </span><span class="s1">const endLabelElement = createLabel_default(edge.endLabelLeft, edge.labelStyle);</span><span class="s3">\n    </span><span class="s1">const endEdgeLabelLeft = elem.insert(</span><span class="s3">\&quot;</span><span class="s1">g</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">edgeTerminals</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">const inner = endEdgeLabelLeft.insert(</span><span class="s3">\&quot;</span><span class="s1">g</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">inner</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">fo = inner.node().appendChild(endLabelElement);</span><span class="s3">\n    </span><span class="s1">const slBox = endLabelElement.getBBox();</span><span class="s3">\n    </span><span class="s1">inner.attr(</span><span class="s3">\&quot;</span><span class="s1">transform</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">translate(</span><span class="s3">\&quot; </span><span class="s1">+ -slBox.width / 2 + </span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot; </span><span class="s1">+ -slBox.height / 2 + </span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">endEdgeLabelLeft.node().appendChild(endLabelElement);</span><span class="s3">\n    </span><span class="s1">if (!terminalLabels[edge.id]) {</span><span class="s3">\n      </span><span class="s1">terminalLabels[edge.id] = {};</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">terminalLabels[edge.id].endLeft = endEdgeLabelLeft;</span><span class="s3">\n    </span><span class="s1">setTerminalWidth(fo, edge.endLabelLeft);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (edge.endLabelRight) {</span><span class="s3">\n    </span><span class="s1">const endLabelElement = createLabel_default(edge.endLabelRight, edge.labelStyle);</span><span class="s3">\n    </span><span class="s1">const endEdgeLabelRight = elem.insert(</span><span class="s3">\&quot;</span><span class="s1">g</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">edgeTerminals</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">const inner = endEdgeLabelRight.insert(</span><span class="s3">\&quot;</span><span class="s1">g</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">inner</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">fo = inner.node().appendChild(endLabelElement);</span><span class="s3">\n    </span><span class="s1">const slBox = endLabelElement.getBBox();</span><span class="s3">\n    </span><span class="s1">inner.attr(</span><span class="s3">\&quot;</span><span class="s1">transform</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">translate(</span><span class="s3">\&quot; </span><span class="s1">+ -slBox.width / 2 + </span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot; </span><span class="s1">+ -slBox.height / 2 + </span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">endEdgeLabelRight.node().appendChild(endLabelElement);</span><span class="s3">\n    </span><span class="s1">if (!terminalLabels[edge.id]) {</span><span class="s3">\n      </span><span class="s1">terminalLabels[edge.id] = {};</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">terminalLabels[edge.id].endRight = endEdgeLabelRight;</span><span class="s3">\n    </span><span class="s1">setTerminalWidth(fo, edge.endLabelRight);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return labelElement;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">insertEdgeLabel</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">function setTerminalWidth(fo, value) {</span><span class="s3">\n  </span><span class="s1">if (getConfig2().flowchart.htmlLabels &amp;&amp; fo) {</span><span class="s3">\n    </span><span class="s1">fo.style.width = value.length * 9 + </span><span class="s3">\&quot;</span><span class="s1">px</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n    </span><span class="s1">fo.style.height = </span><span class="s3">\&quot;</span><span class="s1">12px</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">__name(setTerminalWidth, </span><span class="s3">\&quot;</span><span class="s1">setTerminalWidth</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var positionEdgeLabel = /* @__PURE__ */ __name((edge, paths) =&gt; {</span><span class="s3">\n  </span><span class="s1">log.debug(</span><span class="s3">\&quot;</span><span class="s1">Moving label abc88 </span><span class="s3">\&quot;</span><span class="s1">, edge.id, edge.label, edgeLabels[edge.id], paths);</span><span class="s3">\n  </span><span class="s1">let path = paths.updatedPath ? paths.updatedPath : paths.originalPath;</span><span class="s3">\n  </span><span class="s1">const siteConfig = getConfig2();</span><span class="s3">\n  </span><span class="s1">const { subGraphTitleTotalMargin } = getSubGraphTitleMargins(siteConfig);</span><span class="s3">\n  </span><span class="s1">if (edge.label) {</span><span class="s3">\n    </span><span class="s1">const el = edgeLabels[edge.id];</span><span class="s3">\n    </span><span class="s1">let x = edge.x;</span><span class="s3">\n    </span><span class="s1">let y = edge.y;</span><span class="s3">\n    </span><span class="s1">if (path) {</span><span class="s3">\n      </span><span class="s1">const pos = utils_default.calcLabelPosition(path);</span><span class="s3">\n      </span><span class="s1">log.debug(</span><span class="s3">\n        \&quot;</span><span class="s1">Moving label </span><span class="s3">\&quot; </span><span class="s1">+ edge.label + </span><span class="s3">\&quot; </span><span class="s1">from (</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n        </span><span class="s1">x,</span><span class="s3">\n        \&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n        </span><span class="s1">y,</span><span class="s3">\n        \&quot;</span><span class="s1">) to (</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n        </span><span class="s1">pos.x,</span><span class="s3">\n        \&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n        </span><span class="s1">pos.y,</span><span class="s3">\n        \&quot;</span><span class="s1">) abc88</span><span class="s3">\&quot;\n      </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">if (paths.updatedPath) {</span><span class="s3">\n        </span><span class="s1">x = pos.x;</span><span class="s3">\n        </span><span class="s1">y = pos.y;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">el.attr(</span><span class="s3">\&quot;</span><span class="s1">transform</span><span class="s3">\&quot;</span><span class="s1">, `translate(${x}, ${y + subGraphTitleTotalMargin / 2})`);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (edge.startLabelLeft) {</span><span class="s3">\n    </span><span class="s1">const el = terminalLabels[edge.id].startLeft;</span><span class="s3">\n    </span><span class="s1">let x = edge.x;</span><span class="s3">\n    </span><span class="s1">let y = edge.y;</span><span class="s3">\n    </span><span class="s1">if (path) {</span><span class="s3">\n      </span><span class="s1">const pos = utils_default.calcTerminalLabelPosition(edge.arrowTypeStart ? 10 : 0, </span><span class="s3">\&quot;</span><span class="s1">start_left</span><span class="s3">\&quot;</span><span class="s1">, path);</span><span class="s3">\n      </span><span class="s1">x = pos.x;</span><span class="s3">\n      </span><span class="s1">y = pos.y;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">el.attr(</span><span class="s3">\&quot;</span><span class="s1">transform</span><span class="s3">\&quot;</span><span class="s1">, `translate(${x}, ${y})`);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (edge.startLabelRight) {</span><span class="s3">\n    </span><span class="s1">const el = terminalLabels[edge.id].startRight;</span><span class="s3">\n    </span><span class="s1">let x = edge.x;</span><span class="s3">\n    </span><span class="s1">let y = edge.y;</span><span class="s3">\n    </span><span class="s1">if (path) {</span><span class="s3">\n      </span><span class="s1">const pos = utils_default.calcTerminalLabelPosition(</span><span class="s3">\n        </span><span class="s1">edge.arrowTypeStart ? 10 : 0,</span><span class="s3">\n        \&quot;</span><span class="s1">start_right</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n        </span><span class="s1">path</span><span class="s3">\n      </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">x = pos.x;</span><span class="s3">\n      </span><span class="s1">y = pos.y;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">el.attr(</span><span class="s3">\&quot;</span><span class="s1">transform</span><span class="s3">\&quot;</span><span class="s1">, `translate(${x}, ${y})`);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (edge.endLabelLeft) {</span><span class="s3">\n    </span><span class="s1">const el = terminalLabels[edge.id].endLeft;</span><span class="s3">\n    </span><span class="s1">let x = edge.x;</span><span class="s3">\n    </span><span class="s1">let y = edge.y;</span><span class="s3">\n    </span><span class="s1">if (path) {</span><span class="s3">\n      </span><span class="s1">const pos = utils_default.calcTerminalLabelPosition(edge.arrowTypeEnd ? 10 : 0, </span><span class="s3">\&quot;</span><span class="s1">end_left</span><span class="s3">\&quot;</span><span class="s1">, path);</span><span class="s3">\n      </span><span class="s1">x = pos.x;</span><span class="s3">\n      </span><span class="s1">y = pos.y;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">el.attr(</span><span class="s3">\&quot;</span><span class="s1">transform</span><span class="s3">\&quot;</span><span class="s1">, `translate(${x}, ${y})`);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (edge.endLabelRight) {</span><span class="s3">\n    </span><span class="s1">const el = terminalLabels[edge.id].endRight;</span><span class="s3">\n    </span><span class="s1">let x = edge.x;</span><span class="s3">\n    </span><span class="s1">let y = edge.y;</span><span class="s3">\n    </span><span class="s1">if (path) {</span><span class="s3">\n      </span><span class="s1">const pos = utils_default.calcTerminalLabelPosition(edge.arrowTypeEnd ? 10 : 0, </span><span class="s3">\&quot;</span><span class="s1">end_right</span><span class="s3">\&quot;</span><span class="s1">, path);</span><span class="s3">\n      </span><span class="s1">x = pos.x;</span><span class="s3">\n      </span><span class="s1">y = pos.y;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">el.attr(</span><span class="s3">\&quot;</span><span class="s1">transform</span><span class="s3">\&quot;</span><span class="s1">, `translate(${x}, ${y})`);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">positionEdgeLabel</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var outsideNode = /* @__PURE__ */ __name((node, point2) =&gt; {</span><span class="s3">\n  </span><span class="s1">const x = node.x;</span><span class="s3">\n  </span><span class="s1">const y = node.y;</span><span class="s3">\n  </span><span class="s1">const dx = Math.abs(point2.x - x);</span><span class="s3">\n  </span><span class="s1">const dy = Math.abs(point2.y - y);</span><span class="s3">\n  </span><span class="s1">const w = node.width / 2;</span><span class="s3">\n  </span><span class="s1">const h = node.height / 2;</span><span class="s3">\n  </span><span class="s1">if (dx &gt;= w || dy &gt;= h) {</span><span class="s3">\n    </span><span class="s1">return true;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return false;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">outsideNode</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var intersection = /* @__PURE__ */ __name((node, outsidePoint, insidePoint) =&gt; {</span><span class="s3">\n  </span><span class="s1">log.debug(`intersection calc abc89:</span><span class="s3">\n  </span><span class="s1">outsidePoint: ${JSON.stringify(outsidePoint)}</span><span class="s3">\n  </span><span class="s1">insidePoint : ${JSON.stringify(insidePoint)}</span><span class="s3">\n  </span><span class="s1">node        : x:${node.x} y:${node.y} w:${node.width} h:${node.height}`);</span><span class="s3">\n  </span><span class="s1">const x = node.x;</span><span class="s3">\n  </span><span class="s1">const y = node.y;</span><span class="s3">\n  </span><span class="s1">const dx = Math.abs(x - insidePoint.x);</span><span class="s3">\n  </span><span class="s1">const w = node.width / 2;</span><span class="s3">\n  </span><span class="s1">let r = insidePoint.x &lt; outsidePoint.x ? w - dx : w + dx;</span><span class="s3">\n  </span><span class="s1">const h = node.height / 2;</span><span class="s3">\n  </span><span class="s1">const Q = Math.abs(outsidePoint.y - insidePoint.y);</span><span class="s3">\n  </span><span class="s1">const R = Math.abs(outsidePoint.x - insidePoint.x);</span><span class="s3">\n  </span><span class="s1">if (Math.abs(y - outsidePoint.y) * w &gt; Math.abs(x - outsidePoint.x) * h) {</span><span class="s3">\n    </span><span class="s1">let q = insidePoint.y &lt; outsidePoint.y ? outsidePoint.y - h - y : y - h - outsidePoint.y;</span><span class="s3">\n    </span><span class="s1">r = R * q / Q;</span><span class="s3">\n    </span><span class="s1">const res = {</span><span class="s3">\n      </span><span class="s1">x: insidePoint.x &lt; outsidePoint.x ? insidePoint.x + r : insidePoint.x - R + r,</span><span class="s3">\n      </span><span class="s1">y: insidePoint.y &lt; outsidePoint.y ? insidePoint.y + Q - q : insidePoint.y - Q + q</span><span class="s3">\n    </span><span class="s1">};</span><span class="s3">\n    </span><span class="s1">if (r === 0) {</span><span class="s3">\n      </span><span class="s1">res.x = outsidePoint.x;</span><span class="s3">\n      </span><span class="s1">res.y = outsidePoint.y;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">if (R === 0) {</span><span class="s3">\n      </span><span class="s1">res.x = outsidePoint.x;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">if (Q === 0) {</span><span class="s3">\n      </span><span class="s1">res.y = outsidePoint.y;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">log.debug(`abc89 topp/bott calc, Q ${Q}, q ${q}, R ${R}, r ${r}`, res);</span><span class="s3">\n    </span><span class="s1">return res;</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">if (insidePoint.x &lt; outsidePoint.x) {</span><span class="s3">\n      </span><span class="s1">r = outsidePoint.x - w - x;</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">r = x - w - outsidePoint.x;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">let q = Q * r / R;</span><span class="s3">\n    </span><span class="s1">let _x = insidePoint.x &lt; outsidePoint.x ? insidePoint.x + R - r : insidePoint.x - R + r;</span><span class="s3">\n    </span><span class="s1">let _y = insidePoint.y &lt; outsidePoint.y ? insidePoint.y + q : insidePoint.y - q;</span><span class="s3">\n    </span><span class="s1">log.debug(`sides calc abc89, Q ${Q}, q ${q}, R ${R}, r ${r}`, { _x, _y });</span><span class="s3">\n    </span><span class="s1">if (r === 0) {</span><span class="s3">\n      </span><span class="s1">_x = outsidePoint.x;</span><span class="s3">\n      </span><span class="s1">_y = outsidePoint.y;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">if (R === 0) {</span><span class="s3">\n      </span><span class="s1">_x = outsidePoint.x;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">if (Q === 0) {</span><span class="s3">\n      </span><span class="s1">_y = outsidePoint.y;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">return { x: _x, y: _y };</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">intersection</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var cutPathAtIntersect = /* @__PURE__ */ __name((_points, boundaryNode) =&gt; {</span><span class="s3">\n  </span><span class="s1">log.debug(</span><span class="s3">\&quot;</span><span class="s1">abc88 cutPathAtIntersect</span><span class="s3">\&quot;</span><span class="s1">, _points, boundaryNode);</span><span class="s3">\n  </span><span class="s1">let points = [];</span><span class="s3">\n  </span><span class="s1">let lastPointOutside = _points[0];</span><span class="s3">\n  </span><span class="s1">let isInside = false;</span><span class="s3">\n  </span><span class="s1">_points.forEach((point2) =&gt; {</span><span class="s3">\n    </span><span class="s1">if (!outsideNode(boundaryNode, point2) &amp;&amp; !isInside) {</span><span class="s3">\n      </span><span class="s1">const inter = intersection(boundaryNode, lastPointOutside, point2);</span><span class="s3">\n      </span><span class="s1">let pointPresent = false;</span><span class="s3">\n      </span><span class="s1">points.forEach((p) =&gt; {</span><span class="s3">\n        </span><span class="s1">pointPresent = pointPresent || p.x === inter.x &amp;&amp; p.y === inter.y;</span><span class="s3">\n      </span><span class="s1">});</span><span class="s3">\n      </span><span class="s1">if (!points.some((e) =&gt; e.x === inter.x &amp;&amp; e.y === inter.y)) {</span><span class="s3">\n        </span><span class="s1">points.push(inter);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">isInside = true;</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">lastPointOutside = point2;</span><span class="s3">\n      </span><span class="s1">if (!isInside) {</span><span class="s3">\n        </span><span class="s1">points.push(point2);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">});</span><span class="s3">\n  </span><span class="s1">return points;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">cutPathAtIntersect</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var insertEdge = /* @__PURE__ */ __name(function(elem, e, edge, clusterDb, diagramType, graph, id) {</span><span class="s3">\n  </span><span class="s1">let points = edge.points;</span><span class="s3">\n  </span><span class="s1">log.debug(</span><span class="s3">\&quot;</span><span class="s1">abc88 InsertEdge: edge=</span><span class="s3">\&quot;</span><span class="s1">, edge, </span><span class="s3">\&quot;</span><span class="s1">e=</span><span class="s3">\&quot;</span><span class="s1">, e);</span><span class="s3">\n  </span><span class="s1">let pointsHasChanged = false;</span><span class="s3">\n  </span><span class="s1">const tail = graph.node(e.v);</span><span class="s3">\n  </span><span class="s1">var head = graph.node(e.w);</span><span class="s3">\n  </span><span class="s1">if (head?.intersect &amp;&amp; tail?.intersect) {</span><span class="s3">\n    </span><span class="s1">points = points.slice(1, edge.points.length - 1);</span><span class="s3">\n    </span><span class="s1">points.unshift(tail.intersect(points[0]));</span><span class="s3">\n    </span><span class="s1">points.push(head.intersect(points[points.length - 1]));</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (edge.toCluster) {</span><span class="s3">\n    </span><span class="s1">log.debug(</span><span class="s3">\&quot;</span><span class="s1">to cluster abc88</span><span class="s3">\&quot;</span><span class="s1">, clusterDb[edge.toCluster]);</span><span class="s3">\n    </span><span class="s1">points = cutPathAtIntersect(edge.points, clusterDb[edge.toCluster].node);</span><span class="s3">\n    </span><span class="s1">pointsHasChanged = true;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (edge.fromCluster) {</span><span class="s3">\n    </span><span class="s1">log.debug(</span><span class="s3">\&quot;</span><span class="s1">from cluster abc88</span><span class="s3">\&quot;</span><span class="s1">, clusterDb[edge.fromCluster]);</span><span class="s3">\n    </span><span class="s1">points = cutPathAtIntersect(points.reverse(), clusterDb[edge.fromCluster].node).reverse();</span><span class="s3">\n    </span><span class="s1">pointsHasChanged = true;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">const lineData = points.filter((p) =&gt; !Number.isNaN(p.y));</span><span class="s3">\n  </span><span class="s1">let curve = curveBasis;</span><span class="s3">\n  </span><span class="s1">if (edge.curve &amp;&amp; (diagramType === </span><span class="s3">\&quot;</span><span class="s1">graph</span><span class="s3">\&quot; </span><span class="s1">|| diagramType === </span><span class="s3">\&quot;</span><span class="s1">flowchart</span><span class="s3">\&quot;</span><span class="s1">)) {</span><span class="s3">\n    </span><span class="s1">curve = edge.curve;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">const { x, y } = getLineFunctionsWithOffset(edge);</span><span class="s3">\n  </span><span class="s1">const lineFunction = line().x(x).y(y).curve(curve);</span><span class="s3">\n  </span><span class="s1">let strokeClasses;</span><span class="s3">\n  </span><span class="s1">switch (edge.thickness) {</span><span class="s3">\n    </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">normal</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n      </span><span class="s1">strokeClasses = </span><span class="s3">\&quot;</span><span class="s1">edge-thickness-normal</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n      </span><span class="s1">break;</span><span class="s3">\n    </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">thick</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n      </span><span class="s1">strokeClasses = </span><span class="s3">\&quot;</span><span class="s1">edge-thickness-thick</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n      </span><span class="s1">break;</span><span class="s3">\n    </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">invisible</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n      </span><span class="s1">strokeClasses = </span><span class="s3">\&quot;</span><span class="s1">edge-thickness-thick</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n      </span><span class="s1">break;</span><span class="s3">\n    </span><span class="s1">default:</span><span class="s3">\n      </span><span class="s1">strokeClasses = </span><span class="s3">\&quot;\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">switch (edge.pattern) {</span><span class="s3">\n    </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">solid</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n      </span><span class="s1">strokeClasses += </span><span class="s3">\&quot; </span><span class="s1">edge-pattern-solid</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n      </span><span class="s1">break;</span><span class="s3">\n    </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">dotted</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n      </span><span class="s1">strokeClasses += </span><span class="s3">\&quot; </span><span class="s1">edge-pattern-dotted</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n      </span><span class="s1">break;</span><span class="s3">\n    </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">dashed</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n      </span><span class="s1">strokeClasses += </span><span class="s3">\&quot; </span><span class="s1">edge-pattern-dashed</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n      </span><span class="s1">break;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">const svgPath = elem.append(</span><span class="s3">\&quot;</span><span class="s1">path</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">d</span><span class="s3">\&quot;</span><span class="s1">, lineFunction(lineData)).attr(</span><span class="s3">\&quot;</span><span class="s1">id</span><span class="s3">\&quot;</span><span class="s1">, edge.id).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot; \&quot; </span><span class="s1">+ strokeClasses + (edge.classes ? </span><span class="s3">\&quot; \&quot; </span><span class="s1">+ edge.classes : </span><span class="s3">\&quot;\&quot;</span><span class="s1">)).attr(</span><span class="s3">\&quot;</span><span class="s1">style</span><span class="s3">\&quot;</span><span class="s1">, edge.style);</span><span class="s3">\n  </span><span class="s1">let url = </span><span class="s3">\&quot;\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">if (getConfig2().flowchart.arrowMarkerAbsolute || getConfig2().state.arrowMarkerAbsolute) {</span><span class="s3">\n    </span><span class="s1">url = window.location.protocol + </span><span class="s3">\&quot;</span><span class="s1">//</span><span class="s3">\&quot; </span><span class="s1">+ window.location.host + window.location.pathname + window.location.search;</span><span class="s3">\n    </span><span class="s1">url = url.replace(/</span><span class="s3">\\</span><span class="s1">(/g, </span><span class="s3">\&quot;\\\\</span><span class="s1">(</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">url = url.replace(/</span><span class="s3">\\</span><span class="s1">)/g, </span><span class="s3">\&quot;\\\\</span><span class="s1">)</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">addEdgeMarkers(svgPath, edge, url, id, diagramType);</span><span class="s3">\n  </span><span class="s1">let paths = {};</span><span class="s3">\n  </span><span class="s1">if (pointsHasChanged) {</span><span class="s3">\n    </span><span class="s1">paths.updatedPath = points;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">paths.originalPath = edge.points;</span><span class="s3">\n  </span><span class="s1">return paths;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">insertEdge</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n\n</span><span class="s1">// src/dagre-wrapper/nodes.js</span><span class="s3">\n</span><span class="s1">import { select as select4 } from </span><span class="s3">\&quot;</span><span class="s1">d3</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n\n</span><span class="s1">// src/dagre-wrapper/blockArrowHelper.ts</span><span class="s3">\n</span><span class="s1">var expandAndDeduplicateDirections = /* @__PURE__ */ __name((directions) =&gt; {</span><span class="s3">\n  </span><span class="s1">const uniqueDirections = /* @__PURE__ */ new Set();</span><span class="s3">\n  </span><span class="s1">for (const direction of directions) {</span><span class="s3">\n    </span><span class="s1">switch (direction) {</span><span class="s3">\n      </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">x</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n        </span><span class="s1">uniqueDirections.add(</span><span class="s3">\&quot;</span><span class="s1">right</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n        </span><span class="s1">uniqueDirections.add(</span><span class="s3">\&quot;</span><span class="s1">left</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n        </span><span class="s1">break;</span><span class="s3">\n      </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">y</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n        </span><span class="s1">uniqueDirections.add(</span><span class="s3">\&quot;</span><span class="s1">up</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n        </span><span class="s1">uniqueDirections.add(</span><span class="s3">\&quot;</span><span class="s1">down</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n        </span><span class="s1">break;</span><span class="s3">\n      </span><span class="s1">default:</span><span class="s3">\n        </span><span class="s1">uniqueDirections.add(direction);</span><span class="s3">\n        </span><span class="s1">break;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return uniqueDirections;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">expandAndDeduplicateDirections</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var getArrowPoints = /* @__PURE__ */ __name((duplicatedDirections, bbox, node) =&gt; {</span><span class="s3">\n  </span><span class="s1">const directions = expandAndDeduplicateDirections(duplicatedDirections);</span><span class="s3">\n  </span><span class="s1">const f = 2;</span><span class="s3">\n  </span><span class="s1">const height = bbox.height + 2 * node.padding;</span><span class="s3">\n  </span><span class="s1">const midpoint = height / f;</span><span class="s3">\n  </span><span class="s1">const width = bbox.width + 2 * midpoint + node.padding;</span><span class="s3">\n  </span><span class="s1">const padding2 = node.padding / 2;</span><span class="s3">\n  </span><span class="s1">if (directions.has(</span><span class="s3">\&quot;</span><span class="s1">right</span><span class="s3">\&quot;</span><span class="s1">) &amp;&amp; directions.has(</span><span class="s3">\&quot;</span><span class="s1">left</span><span class="s3">\&quot;</span><span class="s1">) &amp;&amp; directions.has(</span><span class="s3">\&quot;</span><span class="s1">up</span><span class="s3">\&quot;</span><span class="s1">) &amp;&amp; directions.has(</span><span class="s3">\&quot;</span><span class="s1">down</span><span class="s3">\&quot;</span><span class="s1">)) {</span><span class="s3">\n    </span><span class="s1">return [</span><span class="s3">\n      </span><span class="s1">// Bottom</span><span class="s3">\n      </span><span class="s1">{ x: 0, y: 0 },</span><span class="s3">\n      </span><span class="s1">{ x: midpoint, y: 0 },</span><span class="s3">\n      </span><span class="s1">{ x: width / 2, y: 2 * padding2 },</span><span class="s3">\n      </span><span class="s1">{ x: width - midpoint, y: 0 },</span><span class="s3">\n      </span><span class="s1">{ x: width, y: 0 },</span><span class="s3">\n      </span><span class="s1">// Right</span><span class="s3">\n      </span><span class="s1">{ x: width, y: -height / 3 },</span><span class="s3">\n      </span><span class="s1">{ x: width + 2 * padding2, y: -height / 2 },</span><span class="s3">\n      </span><span class="s1">{ x: width, y: -2 * height / 3 },</span><span class="s3">\n      </span><span class="s1">{ x: width, y: -height },</span><span class="s3">\n      </span><span class="s1">// Top</span><span class="s3">\n      </span><span class="s1">{ x: width - midpoint, y: -height },</span><span class="s3">\n      </span><span class="s1">{ x: width / 2, y: -height - 2 * padding2 },</span><span class="s3">\n      </span><span class="s1">{ x: midpoint, y: -height },</span><span class="s3">\n      </span><span class="s1">// Left</span><span class="s3">\n      </span><span class="s1">{ x: 0, y: -height },</span><span class="s3">\n      </span><span class="s1">{ x: 0, y: -2 * height / 3 },</span><span class="s3">\n      </span><span class="s1">{ x: -2 * padding2, y: -height / 2 },</span><span class="s3">\n      </span><span class="s1">{ x: 0, y: -height / 3 }</span><span class="s3">\n    </span><span class="s1">];</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (directions.has(</span><span class="s3">\&quot;</span><span class="s1">right</span><span class="s3">\&quot;</span><span class="s1">) &amp;&amp; directions.has(</span><span class="s3">\&quot;</span><span class="s1">left</span><span class="s3">\&quot;</span><span class="s1">) &amp;&amp; directions.has(</span><span class="s3">\&quot;</span><span class="s1">up</span><span class="s3">\&quot;</span><span class="s1">)) {</span><span class="s3">\n    </span><span class="s1">return [</span><span class="s3">\n      </span><span class="s1">{ x: midpoint, y: 0 },</span><span class="s3">\n      </span><span class="s1">{ x: width - midpoint, y: 0 },</span><span class="s3">\n      </span><span class="s1">{ x: width, y: -height / 2 },</span><span class="s3">\n      </span><span class="s1">{ x: width - midpoint, y: -height },</span><span class="s3">\n      </span><span class="s1">{ x: midpoint, y: -height },</span><span class="s3">\n      </span><span class="s1">{ x: 0, y: -height / 2 }</span><span class="s3">\n    </span><span class="s1">];</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (directions.has(</span><span class="s3">\&quot;</span><span class="s1">right</span><span class="s3">\&quot;</span><span class="s1">) &amp;&amp; directions.has(</span><span class="s3">\&quot;</span><span class="s1">left</span><span class="s3">\&quot;</span><span class="s1">) &amp;&amp; directions.has(</span><span class="s3">\&quot;</span><span class="s1">down</span><span class="s3">\&quot;</span><span class="s1">)) {</span><span class="s3">\n    </span><span class="s1">return [</span><span class="s3">\n      </span><span class="s1">{ x: 0, y: 0 },</span><span class="s3">\n      </span><span class="s1">{ x: midpoint, y: -height },</span><span class="s3">\n      </span><span class="s1">{ x: width - midpoint, y: -height },</span><span class="s3">\n      </span><span class="s1">{ x: width, y: 0 }</span><span class="s3">\n    </span><span class="s1">];</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (directions.has(</span><span class="s3">\&quot;</span><span class="s1">right</span><span class="s3">\&quot;</span><span class="s1">) &amp;&amp; directions.has(</span><span class="s3">\&quot;</span><span class="s1">up</span><span class="s3">\&quot;</span><span class="s1">) &amp;&amp; directions.has(</span><span class="s3">\&quot;</span><span class="s1">down</span><span class="s3">\&quot;</span><span class="s1">)) {</span><span class="s3">\n    </span><span class="s1">return [</span><span class="s3">\n      </span><span class="s1">{ x: 0, y: 0 },</span><span class="s3">\n      </span><span class="s1">{ x: width, y: -midpoint },</span><span class="s3">\n      </span><span class="s1">{ x: width, y: -height + midpoint },</span><span class="s3">\n      </span><span class="s1">{ x: 0, y: -height }</span><span class="s3">\n    </span><span class="s1">];</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (directions.has(</span><span class="s3">\&quot;</span><span class="s1">left</span><span class="s3">\&quot;</span><span class="s1">) &amp;&amp; directions.has(</span><span class="s3">\&quot;</span><span class="s1">up</span><span class="s3">\&quot;</span><span class="s1">) &amp;&amp; directions.has(</span><span class="s3">\&quot;</span><span class="s1">down</span><span class="s3">\&quot;</span><span class="s1">)) {</span><span class="s3">\n    </span><span class="s1">return [</span><span class="s3">\n      </span><span class="s1">{ x: width, y: 0 },</span><span class="s3">\n      </span><span class="s1">{ x: 0, y: -midpoint },</span><span class="s3">\n      </span><span class="s1">{ x: 0, y: -height + midpoint },</span><span class="s3">\n      </span><span class="s1">{ x: width, y: -height }</span><span class="s3">\n    </span><span class="s1">];</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (directions.has(</span><span class="s3">\&quot;</span><span class="s1">right</span><span class="s3">\&quot;</span><span class="s1">) &amp;&amp; directions.has(</span><span class="s3">\&quot;</span><span class="s1">left</span><span class="s3">\&quot;</span><span class="s1">)) {</span><span class="s3">\n    </span><span class="s1">return [</span><span class="s3">\n      </span><span class="s1">{ x: midpoint, y: 0 },</span><span class="s3">\n      </span><span class="s1">{ x: midpoint, y: -padding2 },</span><span class="s3">\n      </span><span class="s1">{ x: width - midpoint, y: -padding2 },</span><span class="s3">\n      </span><span class="s1">{ x: width - midpoint, y: 0 },</span><span class="s3">\n      </span><span class="s1">{ x: width, y: -height / 2 },</span><span class="s3">\n      </span><span class="s1">{ x: width - midpoint, y: -height },</span><span class="s3">\n      </span><span class="s1">{ x: width - midpoint, y: -height + padding2 },</span><span class="s3">\n      </span><span class="s1">{ x: midpoint, y: -height + padding2 },</span><span class="s3">\n      </span><span class="s1">{ x: midpoint, y: -height },</span><span class="s3">\n      </span><span class="s1">{ x: 0, y: -height / 2 }</span><span class="s3">\n    </span><span class="s1">];</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (directions.has(</span><span class="s3">\&quot;</span><span class="s1">up</span><span class="s3">\&quot;</span><span class="s1">) &amp;&amp; directions.has(</span><span class="s3">\&quot;</span><span class="s1">down</span><span class="s3">\&quot;</span><span class="s1">)) {</span><span class="s3">\n    </span><span class="s1">return [</span><span class="s3">\n      </span><span class="s1">// Bottom center</span><span class="s3">\n      </span><span class="s1">{ x: width / 2, y: 0 },</span><span class="s3">\n      </span><span class="s1">// Left pont of bottom arrow</span><span class="s3">\n      </span><span class="s1">{ x: 0, y: -padding2 },</span><span class="s3">\n      </span><span class="s1">{ x: midpoint, y: -padding2 },</span><span class="s3">\n      </span><span class="s1">// Left top over vertical section</span><span class="s3">\n      </span><span class="s1">{ x: midpoint, y: -height + padding2 },</span><span class="s3">\n      </span><span class="s1">{ x: 0, y: -height + padding2 },</span><span class="s3">\n      </span><span class="s1">// Top of arrow</span><span class="s3">\n      </span><span class="s1">{ x: width / 2, y: -height },</span><span class="s3">\n      </span><span class="s1">{ x: width, y: -height + padding2 },</span><span class="s3">\n      </span><span class="s1">// Top of right vertical bar</span><span class="s3">\n      </span><span class="s1">{ x: width - midpoint, y: -height + padding2 },</span><span class="s3">\n      </span><span class="s1">{ x: width - midpoint, y: -padding2 },</span><span class="s3">\n      </span><span class="s1">{ x: width, y: -padding2 }</span><span class="s3">\n    </span><span class="s1">];</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (directions.has(</span><span class="s3">\&quot;</span><span class="s1">right</span><span class="s3">\&quot;</span><span class="s1">) &amp;&amp; directions.has(</span><span class="s3">\&quot;</span><span class="s1">up</span><span class="s3">\&quot;</span><span class="s1">)) {</span><span class="s3">\n    </span><span class="s1">return [</span><span class="s3">\n      </span><span class="s1">{ x: 0, y: 0 },</span><span class="s3">\n      </span><span class="s1">{ x: width, y: -midpoint },</span><span class="s3">\n      </span><span class="s1">{ x: 0, y: -height }</span><span class="s3">\n    </span><span class="s1">];</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (directions.has(</span><span class="s3">\&quot;</span><span class="s1">right</span><span class="s3">\&quot;</span><span class="s1">) &amp;&amp; directions.has(</span><span class="s3">\&quot;</span><span class="s1">down</span><span class="s3">\&quot;</span><span class="s1">)) {</span><span class="s3">\n    </span><span class="s1">return [</span><span class="s3">\n      </span><span class="s1">{ x: 0, y: 0 },</span><span class="s3">\n      </span><span class="s1">{ x: width, y: 0 },</span><span class="s3">\n      </span><span class="s1">{ x: 0, y: -height }</span><span class="s3">\n    </span><span class="s1">];</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (directions.has(</span><span class="s3">\&quot;</span><span class="s1">left</span><span class="s3">\&quot;</span><span class="s1">) &amp;&amp; directions.has(</span><span class="s3">\&quot;</span><span class="s1">up</span><span class="s3">\&quot;</span><span class="s1">)) {</span><span class="s3">\n    </span><span class="s1">return [</span><span class="s3">\n      </span><span class="s1">{ x: width, y: 0 },</span><span class="s3">\n      </span><span class="s1">{ x: 0, y: -midpoint },</span><span class="s3">\n      </span><span class="s1">{ x: width, y: -height }</span><span class="s3">\n    </span><span class="s1">];</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (directions.has(</span><span class="s3">\&quot;</span><span class="s1">left</span><span class="s3">\&quot;</span><span class="s1">) &amp;&amp; directions.has(</span><span class="s3">\&quot;</span><span class="s1">down</span><span class="s3">\&quot;</span><span class="s1">)) {</span><span class="s3">\n    </span><span class="s1">return [</span><span class="s3">\n      </span><span class="s1">{ x: width, y: 0 },</span><span class="s3">\n      </span><span class="s1">{ x: 0, y: 0 },</span><span class="s3">\n      </span><span class="s1">{ x: width, y: -height }</span><span class="s3">\n    </span><span class="s1">];</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (directions.has(</span><span class="s3">\&quot;</span><span class="s1">right</span><span class="s3">\&quot;</span><span class="s1">)) {</span><span class="s3">\n    </span><span class="s1">return [</span><span class="s3">\n      </span><span class="s1">{ x: midpoint, y: -padding2 },</span><span class="s3">\n      </span><span class="s1">{ x: midpoint, y: -padding2 },</span><span class="s3">\n      </span><span class="s1">{ x: width - midpoint, y: -padding2 },</span><span class="s3">\n      </span><span class="s1">{ x: width - midpoint, y: 0 },</span><span class="s3">\n      </span><span class="s1">{ x: width, y: -height / 2 },</span><span class="s3">\n      </span><span class="s1">{ x: width - midpoint, y: -height },</span><span class="s3">\n      </span><span class="s1">{ x: width - midpoint, y: -height + padding2 },</span><span class="s3">\n      </span><span class="s1">// top left corner of arrow</span><span class="s3">\n      </span><span class="s1">{ x: midpoint, y: -height + padding2 },</span><span class="s3">\n      </span><span class="s1">{ x: midpoint, y: -height + padding2 }</span><span class="s3">\n    </span><span class="s1">];</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (directions.has(</span><span class="s3">\&quot;</span><span class="s1">left</span><span class="s3">\&quot;</span><span class="s1">)) {</span><span class="s3">\n    </span><span class="s1">return [</span><span class="s3">\n      </span><span class="s1">{ x: midpoint, y: 0 },</span><span class="s3">\n      </span><span class="s1">{ x: midpoint, y: -padding2 },</span><span class="s3">\n      </span><span class="s1">// Two points, the right corners</span><span class="s3">\n      </span><span class="s1">{ x: width - midpoint, y: -padding2 },</span><span class="s3">\n      </span><span class="s1">{ x: width - midpoint, y: -height + padding2 },</span><span class="s3">\n      </span><span class="s1">{ x: midpoint, y: -height + padding2 },</span><span class="s3">\n      </span><span class="s1">{ x: midpoint, y: -height },</span><span class="s3">\n      </span><span class="s1">{ x: 0, y: -height / 2 }</span><span class="s3">\n    </span><span class="s1">];</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (directions.has(</span><span class="s3">\&quot;</span><span class="s1">up</span><span class="s3">\&quot;</span><span class="s1">)) {</span><span class="s3">\n    </span><span class="s1">return [</span><span class="s3">\n      </span><span class="s1">// Bottom center</span><span class="s3">\n      </span><span class="s1">{ x: midpoint, y: -padding2 },</span><span class="s3">\n      </span><span class="s1">// Left top over vertical section</span><span class="s3">\n      </span><span class="s1">{ x: midpoint, y: -height + padding2 },</span><span class="s3">\n      </span><span class="s1">{ x: 0, y: -height + padding2 },</span><span class="s3">\n      </span><span class="s1">// Top of arrow</span><span class="s3">\n      </span><span class="s1">{ x: width / 2, y: -height },</span><span class="s3">\n      </span><span class="s1">{ x: width, y: -height + padding2 },</span><span class="s3">\n      </span><span class="s1">// Top of right vertical bar</span><span class="s3">\n      </span><span class="s1">{ x: width - midpoint, y: -height + padding2 },</span><span class="s3">\n      </span><span class="s1">{ x: width - midpoint, y: -padding2 }</span><span class="s3">\n    </span><span class="s1">];</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (directions.has(</span><span class="s3">\&quot;</span><span class="s1">down</span><span class="s3">\&quot;</span><span class="s1">)) {</span><span class="s3">\n    </span><span class="s1">return [</span><span class="s3">\n      </span><span class="s1">// Bottom center</span><span class="s3">\n      </span><span class="s1">{ x: width / 2, y: 0 },</span><span class="s3">\n      </span><span class="s1">// Left pont of bottom arrow</span><span class="s3">\n      </span><span class="s1">{ x: 0, y: -padding2 },</span><span class="s3">\n      </span><span class="s1">{ x: midpoint, y: -padding2 },</span><span class="s3">\n      </span><span class="s1">// Left top over vertical section</span><span class="s3">\n      </span><span class="s1">{ x: midpoint, y: -height + padding2 },</span><span class="s3">\n      </span><span class="s1">{ x: width - midpoint, y: -height + padding2 },</span><span class="s3">\n      </span><span class="s1">{ x: width - midpoint, y: -padding2 },</span><span class="s3">\n      </span><span class="s1">{ x: width, y: -padding2 }</span><span class="s3">\n    </span><span class="s1">];</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return [{ x: 0, y: 0 }];</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">getArrowPoints</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n\n</span><span class="s1">// src/dagre-wrapper/intersect/intersect-node.js</span><span class="s3">\n</span><span class="s1">function intersectNode(node, point2) {</span><span class="s3">\n  </span><span class="s1">return node.intersect(point2);</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">__name(intersectNode, </span><span class="s3">\&quot;</span><span class="s1">intersectNode</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var intersect_node_default = intersectNode;</span><span class="s3">\n\n</span><span class="s1">// src/dagre-wrapper/intersect/intersect-ellipse.js</span><span class="s3">\n</span><span class="s1">function intersectEllipse(node, rx, ry, point2) {</span><span class="s3">\n  </span><span class="s1">var cx = node.x;</span><span class="s3">\n  </span><span class="s1">var cy = node.y;</span><span class="s3">\n  </span><span class="s1">var px = cx - point2.x;</span><span class="s3">\n  </span><span class="s1">var py = cy - point2.y;</span><span class="s3">\n  </span><span class="s1">var det = Math.sqrt(rx * rx * py * py + ry * ry * px * px);</span><span class="s3">\n  </span><span class="s1">var dx = Math.abs(rx * ry * px / det);</span><span class="s3">\n  </span><span class="s1">if (point2.x &lt; cx) {</span><span class="s3">\n    </span><span class="s1">dx = -dx;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">var dy = Math.abs(rx * ry * py / det);</span><span class="s3">\n  </span><span class="s1">if (point2.y &lt; cy) {</span><span class="s3">\n    </span><span class="s1">dy = -dy;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return { x: cx + dx, y: cy + dy };</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">__name(intersectEllipse, </span><span class="s3">\&quot;</span><span class="s1">intersectEllipse</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var intersect_ellipse_default = intersectEllipse;</span><span class="s3">\n\n</span><span class="s1">// src/dagre-wrapper/intersect/intersect-circle.js</span><span class="s3">\n</span><span class="s1">function intersectCircle(node, rx, point2) {</span><span class="s3">\n  </span><span class="s1">return intersect_ellipse_default(node, rx, rx, point2);</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">__name(intersectCircle, </span><span class="s3">\&quot;</span><span class="s1">intersectCircle</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var intersect_circle_default = intersectCircle;</span><span class="s3">\n\n</span><span class="s1">// src/dagre-wrapper/intersect/intersect-line.js</span><span class="s3">\n</span><span class="s1">function intersectLine(p1, p2, q1, q2) {</span><span class="s3">\n  </span><span class="s1">var a1, a2, b1, b2, c1, c2;</span><span class="s3">\n  </span><span class="s1">var r1, r2, r3, r4;</span><span class="s3">\n  </span><span class="s1">var denom, offset, num;</span><span class="s3">\n  </span><span class="s1">var x, y;</span><span class="s3">\n  </span><span class="s1">a1 = p2.y - p1.y;</span><span class="s3">\n  </span><span class="s1">b1 = p1.x - p2.x;</span><span class="s3">\n  </span><span class="s1">c1 = p2.x * p1.y - p1.x * p2.y;</span><span class="s3">\n  </span><span class="s1">r3 = a1 * q1.x + b1 * q1.y + c1;</span><span class="s3">\n  </span><span class="s1">r4 = a1 * q2.x + b1 * q2.y + c1;</span><span class="s3">\n  </span><span class="s1">if (r3 !== 0 &amp;&amp; r4 !== 0 &amp;&amp; sameSign(r3, r4)) {</span><span class="s3">\n    </span><span class="s1">return;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">a2 = q2.y - q1.y;</span><span class="s3">\n  </span><span class="s1">b2 = q1.x - q2.x;</span><span class="s3">\n  </span><span class="s1">c2 = q2.x * q1.y - q1.x * q2.y;</span><span class="s3">\n  </span><span class="s1">r1 = a2 * p1.x + b2 * p1.y + c2;</span><span class="s3">\n  </span><span class="s1">r2 = a2 * p2.x + b2 * p2.y + c2;</span><span class="s3">\n  </span><span class="s1">if (r1 !== 0 &amp;&amp; r2 !== 0 &amp;&amp; sameSign(r1, r2)) {</span><span class="s3">\n    </span><span class="s1">return;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">denom = a1 * b2 - a2 * b1;</span><span class="s3">\n  </span><span class="s1">if (denom === 0) {</span><span class="s3">\n    </span><span class="s1">return;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">offset = Math.abs(denom / 2);</span><span class="s3">\n  </span><span class="s1">num = b1 * c2 - b2 * c1;</span><span class="s3">\n  </span><span class="s1">x = num &lt; 0 ? (num - offset) / denom : (num + offset) / denom;</span><span class="s3">\n  </span><span class="s1">num = a2 * c1 - a1 * c2;</span><span class="s3">\n  </span><span class="s1">y = num &lt; 0 ? (num - offset) / denom : (num + offset) / denom;</span><span class="s3">\n  </span><span class="s1">return { x, y };</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">__name(intersectLine, </span><span class="s3">\&quot;</span><span class="s1">intersectLine</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">function sameSign(r1, r2) {</span><span class="s3">\n  </span><span class="s1">return r1 * r2 &gt; 0;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">__name(sameSign, </span><span class="s3">\&quot;</span><span class="s1">sameSign</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var intersect_line_default = intersectLine;</span><span class="s3">\n\n</span><span class="s1">// src/dagre-wrapper/intersect/intersect-polygon.js</span><span class="s3">\n</span><span class="s1">var intersect_polygon_default = intersectPolygon;</span><span class="s3">\n</span><span class="s1">function intersectPolygon(node, polyPoints, point2) {</span><span class="s3">\n  </span><span class="s1">var x1 = node.x;</span><span class="s3">\n  </span><span class="s1">var y1 = node.y;</span><span class="s3">\n  </span><span class="s1">var intersections = [];</span><span class="s3">\n  </span><span class="s1">var minX = Number.POSITIVE_INFINITY;</span><span class="s3">\n  </span><span class="s1">var minY = Number.POSITIVE_INFINITY;</span><span class="s3">\n  </span><span class="s1">if (typeof polyPoints.forEach === </span><span class="s3">\&quot;</span><span class="s1">function</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">polyPoints.forEach(function(entry) {</span><span class="s3">\n      </span><span class="s1">minX = Math.min(minX, entry.x);</span><span class="s3">\n      </span><span class="s1">minY = Math.min(minY, entry.y);</span><span class="s3">\n    </span><span class="s1">});</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">minX = Math.min(minX, polyPoints.x);</span><span class="s3">\n    </span><span class="s1">minY = Math.min(minY, polyPoints.y);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">var left = x1 - node.width / 2 - minX;</span><span class="s3">\n  </span><span class="s1">var top = y1 - node.height / 2 - minY;</span><span class="s3">\n  </span><span class="s1">for (var i = 0; i &lt; polyPoints.length; i++) {</span><span class="s3">\n    </span><span class="s1">var p1 = polyPoints[i];</span><span class="s3">\n    </span><span class="s1">var p2 = polyPoints[i &lt; polyPoints.length - 1 ? i + 1 : 0];</span><span class="s3">\n    </span><span class="s1">var intersect = intersect_line_default(</span><span class="s3">\n      </span><span class="s1">node,</span><span class="s3">\n      </span><span class="s1">point2,</span><span class="s3">\n      </span><span class="s1">{ x: left + p1.x, y: top + p1.y },</span><span class="s3">\n      </span><span class="s1">{ x: left + p2.x, y: top + p2.y }</span><span class="s3">\n    </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">if (intersect) {</span><span class="s3">\n      </span><span class="s1">intersections.push(intersect);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (!intersections.length) {</span><span class="s3">\n    </span><span class="s1">return node;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (intersections.length &gt; 1) {</span><span class="s3">\n    </span><span class="s1">intersections.sort(function(p, q) {</span><span class="s3">\n      </span><span class="s1">var pdx = p.x - point2.x;</span><span class="s3">\n      </span><span class="s1">var pdy = p.y - point2.y;</span><span class="s3">\n      </span><span class="s1">var distp = Math.sqrt(pdx * pdx + pdy * pdy);</span><span class="s3">\n      </span><span class="s1">var qdx = q.x - point2.x;</span><span class="s3">\n      </span><span class="s1">var qdy = q.y - point2.y;</span><span class="s3">\n      </span><span class="s1">var distq = Math.sqrt(qdx * qdx + qdy * qdy);</span><span class="s3">\n      </span><span class="s1">return distp &lt; distq ? -1 : distp === distq ? 0 : 1;</span><span class="s3">\n    </span><span class="s1">});</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return intersections[0];</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">__name(intersectPolygon, </span><span class="s3">\&quot;</span><span class="s1">intersectPolygon</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n\n</span><span class="s1">// src/dagre-wrapper/intersect/intersect-rect.js</span><span class="s3">\n</span><span class="s1">var intersectRect = /* @__PURE__ */ __name((node, point2) =&gt; {</span><span class="s3">\n  </span><span class="s1">var x = node.x;</span><span class="s3">\n  </span><span class="s1">var y = node.y;</span><span class="s3">\n  </span><span class="s1">var dx = point2.x - x;</span><span class="s3">\n  </span><span class="s1">var dy = point2.y - y;</span><span class="s3">\n  </span><span class="s1">var w = node.width / 2;</span><span class="s3">\n  </span><span class="s1">var h = node.height / 2;</span><span class="s3">\n  </span><span class="s1">var sx, sy;</span><span class="s3">\n  </span><span class="s1">if (Math.abs(dy) * w &gt; Math.abs(dx) * h) {</span><span class="s3">\n    </span><span class="s1">if (dy &lt; 0) {</span><span class="s3">\n      </span><span class="s1">h = -h;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">sx = dy === 0 ? 0 : h * dx / dy;</span><span class="s3">\n    </span><span class="s1">sy = h;</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">if (dx &lt; 0) {</span><span class="s3">\n      </span><span class="s1">w = -w;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">sx = w;</span><span class="s3">\n    </span><span class="s1">sy = dx === 0 ? 0 : w * dy / dx;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return { x: x + sx, y: y + sy };</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">intersectRect</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var intersect_rect_default = intersectRect;</span><span class="s3">\n\n</span><span class="s1">// src/dagre-wrapper/intersect/index.js</span><span class="s3">\n</span><span class="s1">var intersect_default = {</span><span class="s3">\n  </span><span class="s1">node: intersect_node_default,</span><span class="s3">\n  </span><span class="s1">circle: intersect_circle_default,</span><span class="s3">\n  </span><span class="s1">ellipse: intersect_ellipse_default,</span><span class="s3">\n  </span><span class="s1">polygon: intersect_polygon_default,</span><span class="s3">\n  </span><span class="s1">rect: intersect_rect_default</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n\n</span><span class="s1">// src/dagre-wrapper/shapes/util.js</span><span class="s3">\n</span><span class="s1">import { select as select3 } from </span><span class="s3">\&quot;</span><span class="s1">d3</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">var labelHelper = /* @__PURE__ */ __name(async (parent, node, _classes, isNode) =&gt; {</span><span class="s3">\n  </span><span class="s1">const config2 = getConfig2();</span><span class="s3">\n  </span><span class="s1">let classes2;</span><span class="s3">\n  </span><span class="s1">const useHtmlLabels = node.useHtmlLabels || evaluate(config2.flowchart.htmlLabels);</span><span class="s3">\n  </span><span class="s1">if (!_classes) {</span><span class="s3">\n    </span><span class="s1">classes2 = </span><span class="s3">\&quot;</span><span class="s1">node default</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">classes2 = _classes;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">const shapeSvg = parent.insert(</span><span class="s3">\&quot;</span><span class="s1">g</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, classes2).attr(</span><span class="s3">\&quot;</span><span class="s1">id</span><span class="s3">\&quot;</span><span class="s1">, node.domId || node.id);</span><span class="s3">\n  </span><span class="s1">const label = shapeSvg.insert(</span><span class="s3">\&quot;</span><span class="s1">g</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">label</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">style</span><span class="s3">\&quot;</span><span class="s1">, node.labelStyle);</span><span class="s3">\n  </span><span class="s1">let labelText;</span><span class="s3">\n  </span><span class="s1">if (node.labelText === void 0) {</span><span class="s3">\n    </span><span class="s1">labelText = </span><span class="s3">\&quot;\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">labelText = typeof node.labelText === </span><span class="s3">\&quot;</span><span class="s1">string</span><span class="s3">\&quot; </span><span class="s1">? node.labelText : node.labelText[0];</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">const textNode = label.node();</span><span class="s3">\n  </span><span class="s1">let text;</span><span class="s3">\n  </span><span class="s1">if (node.labelType === </span><span class="s3">\&quot;</span><span class="s1">markdown</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">text = createText(</span><span class="s3">\n      </span><span class="s1">label,</span><span class="s3">\n      </span><span class="s1">sanitizeText(decodeEntities(labelText), config2),</span><span class="s3">\n      </span><span class="s1">{</span><span class="s3">\n        </span><span class="s1">useHtmlLabels,</span><span class="s3">\n        </span><span class="s1">width: node.width || config2.flowchart.wrappingWidth,</span><span class="s3">\n        </span><span class="s1">classes: </span><span class="s3">\&quot;</span><span class="s1">markdown-node-label</span><span class="s3">\&quot;\n      </span><span class="s1">},</span><span class="s3">\n      </span><span class="s1">config2</span><span class="s3">\n    </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">text = textNode.appendChild(</span><span class="s3">\n      </span><span class="s1">createLabel_default(sanitizeText(decodeEntities(labelText), config2), node.labelStyle, false, isNode)</span><span class="s3">\n    </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">let bbox = text.getBBox();</span><span class="s3">\n  </span><span class="s1">const halfPadding = node.padding / 2;</span><span class="s3">\n  </span><span class="s1">if (evaluate(config2.flowchart.htmlLabels)) {</span><span class="s3">\n    </span><span class="s1">const div = text.children[0];</span><span class="s3">\n    </span><span class="s1">const dv = select3(text);</span><span class="s3">\n    </span><span class="s1">const images = div.getElementsByTagName(</span><span class="s3">\&quot;</span><span class="s1">img</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">if (images) {</span><span class="s3">\n      </span><span class="s1">const noImgText = labelText.replace(/&lt;img[^&gt;]*&gt;/g, </span><span class="s3">\&quot;\&quot;</span><span class="s1">).trim() === </span><span class="s3">\&quot;\&quot;</span><span class="s1">;</span><span class="s3">\n      </span><span class="s1">await Promise.all(</span><span class="s3">\n        </span><span class="s1">[...images].map(</span><span class="s3">\n          </span><span class="s1">(img) =&gt; new Promise((res) =&gt; {</span><span class="s3">\n            </span><span class="s1">function setupImage() {</span><span class="s3">\n              </span><span class="s1">img.style.display = </span><span class="s3">\&quot;</span><span class="s1">flex</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n              </span><span class="s1">img.style.flexDirection = </span><span class="s3">\&quot;</span><span class="s1">column</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n              </span><span class="s1">if (noImgText) {</span><span class="s3">\n                </span><span class="s1">const bodyFontSize = config2.fontSize ? config2.fontSize : window.getComputedStyle(document.body).fontSize;</span><span class="s3">\n                </span><span class="s1">const enlargingFactor = 5;</span><span class="s3">\n                </span><span class="s1">const width = parseInt(bodyFontSize, 10) * enlargingFactor + </span><span class="s3">\&quot;</span><span class="s1">px</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n                </span><span class="s1">img.style.minWidth = width;</span><span class="s3">\n                </span><span class="s1">img.style.maxWidth = width;</span><span class="s3">\n              </span><span class="s1">} else {</span><span class="s3">\n                </span><span class="s1">img.style.width = </span><span class="s3">\&quot;</span><span class="s1">100%</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n              </span><span class="s1">res(img);</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">__name(setupImage, </span><span class="s3">\&quot;</span><span class="s1">setupImage</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">setTimeout(() =&gt; {</span><span class="s3">\n              </span><span class="s1">if (img.complete) {</span><span class="s3">\n                </span><span class="s1">setupImage();</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">});</span><span class="s3">\n            </span><span class="s1">img.addEventListener(</span><span class="s3">\&quot;</span><span class="s1">error</span><span class="s3">\&quot;</span><span class="s1">, setupImage);</span><span class="s3">\n            </span><span class="s1">img.addEventListener(</span><span class="s3">\&quot;</span><span class="s1">load</span><span class="s3">\&quot;</span><span class="s1">, setupImage);</span><span class="s3">\n          </span><span class="s1">})</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">bbox = div.getBoundingClientRect();</span><span class="s3">\n    </span><span class="s1">dv.attr(</span><span class="s3">\&quot;</span><span class="s1">width</span><span class="s3">\&quot;</span><span class="s1">, bbox.width);</span><span class="s3">\n    </span><span class="s1">dv.attr(</span><span class="s3">\&quot;</span><span class="s1">height</span><span class="s3">\&quot;</span><span class="s1">, bbox.height);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (useHtmlLabels) {</span><span class="s3">\n    </span><span class="s1">label.attr(</span><span class="s3">\&quot;</span><span class="s1">transform</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">translate(</span><span class="s3">\&quot; </span><span class="s1">+ -bbox.width / 2 + </span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot; </span><span class="s1">+ -bbox.height / 2 + </span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">label.attr(</span><span class="s3">\&quot;</span><span class="s1">transform</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">translate(0, </span><span class="s3">\&quot; </span><span class="s1">+ -bbox.height / 2 + </span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (node.centerLabel) {</span><span class="s3">\n    </span><span class="s1">label.attr(</span><span class="s3">\&quot;</span><span class="s1">transform</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">translate(</span><span class="s3">\&quot; </span><span class="s1">+ -bbox.width / 2 + </span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot; </span><span class="s1">+ -bbox.height / 2 + </span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">label.insert(</span><span class="s3">\&quot;</span><span class="s1">rect</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">:first-child</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">return { shapeSvg, bbox, halfPadding, label };</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">labelHelper</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var updateNodeBounds = /* @__PURE__ */ __name((node, element) =&gt; {</span><span class="s3">\n  </span><span class="s1">const bbox = element.node().getBBox();</span><span class="s3">\n  </span><span class="s1">node.width = bbox.width;</span><span class="s3">\n  </span><span class="s1">node.height = bbox.height;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">updateNodeBounds</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">function insertPolygonShape(parent, w, h, points) {</span><span class="s3">\n  </span><span class="s1">return parent.insert(</span><span class="s3">\&quot;</span><span class="s1">polygon</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">:first-child</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\n    \&quot;</span><span class="s1">points</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n    </span><span class="s1">points.map(function(d) {</span><span class="s3">\n      </span><span class="s1">return d.x + </span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot; </span><span class="s1">+ d.y;</span><span class="s3">\n    </span><span class="s1">}).join(</span><span class="s3">\&quot; \&quot;</span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">label-container</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">transform</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">translate(</span><span class="s3">\&quot; </span><span class="s1">+ -w / 2 + </span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot; </span><span class="s1">+ h / 2 + </span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">__name(insertPolygonShape, </span><span class="s3">\&quot;</span><span class="s1">insertPolygonShape</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n\n</span><span class="s1">// src/dagre-wrapper/shapes/note.js</span><span class="s3">\n</span><span class="s1">var note = /* @__PURE__ */ __name(async (parent, node) =&gt; {</span><span class="s3">\n  </span><span class="s1">const useHtmlLabels = node.useHtmlLabels || getConfig2().flowchart.htmlLabels;</span><span class="s3">\n  </span><span class="s1">if (!useHtmlLabels) {</span><span class="s3">\n    </span><span class="s1">node.centerLabel = true;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">const { shapeSvg, bbox, halfPadding } = await labelHelper(</span><span class="s3">\n    </span><span class="s1">parent,</span><span class="s3">\n    </span><span class="s1">node,</span><span class="s3">\n    \&quot;</span><span class="s1">node </span><span class="s3">\&quot; </span><span class="s1">+ node.classes,</span><span class="s3">\n    </span><span class="s1">true</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">log.info(</span><span class="s3">\&quot;</span><span class="s1">Classes = </span><span class="s3">\&quot;</span><span class="s1">, node.classes);</span><span class="s3">\n  </span><span class="s1">const rect2 = shapeSvg.insert(</span><span class="s3">\&quot;</span><span class="s1">rect</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">:first-child</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">rect2.attr(</span><span class="s3">\&quot;</span><span class="s1">rx</span><span class="s3">\&quot;</span><span class="s1">, node.rx).attr(</span><span class="s3">\&quot;</span><span class="s1">ry</span><span class="s3">\&quot;</span><span class="s1">, node.ry).attr(</span><span class="s3">\&quot;</span><span class="s1">x</span><span class="s3">\&quot;</span><span class="s1">, -bbox.width / 2 - halfPadding).attr(</span><span class="s3">\&quot;</span><span class="s1">y</span><span class="s3">\&quot;</span><span class="s1">, -bbox.height / 2 - halfPadding).attr(</span><span class="s3">\&quot;</span><span class="s1">width</span><span class="s3">\&quot;</span><span class="s1">, bbox.width + node.padding).attr(</span><span class="s3">\&quot;</span><span class="s1">height</span><span class="s3">\&quot;</span><span class="s1">, bbox.height + node.padding);</span><span class="s3">\n  </span><span class="s1">updateNodeBounds(node, rect2);</span><span class="s3">\n  </span><span class="s1">node.intersect = function(point2) {</span><span class="s3">\n    </span><span class="s1">return intersect_default.rect(node, point2);</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">return shapeSvg;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">note</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var note_default = note;</span><span class="s3">\n\n</span><span class="s1">// src/dagre-wrapper/nodes.js</span><span class="s3">\n</span><span class="s1">var formatClass = /* @__PURE__ */ __name((str) =&gt; {</span><span class="s3">\n  </span><span class="s1">if (str) {</span><span class="s3">\n    </span><span class="s1">return </span><span class="s3">\&quot; \&quot; </span><span class="s1">+ str;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return </span><span class="s3">\&quot;\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">formatClass</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var getClassesFromNode = /* @__PURE__ */ __name((node, otherClasses) =&gt; {</span><span class="s3">\n  </span><span class="s1">return `${otherClasses ? otherClasses : </span><span class="s3">\&quot;</span><span class="s1">node default</span><span class="s3">\&quot;</span><span class="s1">}${formatClass(node.classes)} ${formatClass(</span><span class="s3">\n    </span><span class="s1">node.class</span><span class="s3">\n  </span><span class="s1">)}`;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">getClassesFromNode</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var question = /* @__PURE__ */ __name(async (parent, node) =&gt; {</span><span class="s3">\n  </span><span class="s1">const { shapeSvg, bbox } = await labelHelper(</span><span class="s3">\n    </span><span class="s1">parent,</span><span class="s3">\n    </span><span class="s1">node,</span><span class="s3">\n    </span><span class="s1">getClassesFromNode(node, void 0),</span><span class="s3">\n    </span><span class="s1">true</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const w = bbox.width + node.padding;</span><span class="s3">\n  </span><span class="s1">const h = bbox.height + node.padding;</span><span class="s3">\n  </span><span class="s1">const s = w + h;</span><span class="s3">\n  </span><span class="s1">const points = [</span><span class="s3">\n    </span><span class="s1">{ x: s / 2, y: 0 },</span><span class="s3">\n    </span><span class="s1">{ x: s, y: -s / 2 },</span><span class="s3">\n    </span><span class="s1">{ x: s / 2, y: -s },</span><span class="s3">\n    </span><span class="s1">{ x: 0, y: -s / 2 }</span><span class="s3">\n  </span><span class="s1">];</span><span class="s3">\n  </span><span class="s1">log.info(</span><span class="s3">\&quot;</span><span class="s1">Question main (Circle)</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const questionElem = insertPolygonShape(shapeSvg, s, s, points);</span><span class="s3">\n  </span><span class="s1">questionElem.attr(</span><span class="s3">\&quot;</span><span class="s1">style</span><span class="s3">\&quot;</span><span class="s1">, node.style);</span><span class="s3">\n  </span><span class="s1">updateNodeBounds(node, questionElem);</span><span class="s3">\n  </span><span class="s1">node.intersect = function(point2) {</span><span class="s3">\n    </span><span class="s1">log.warn(</span><span class="s3">\&quot;</span><span class="s1">Intersect called</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">return intersect_default.polygon(node, points, point2);</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">return shapeSvg;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">question</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var choice = /* @__PURE__ */ __name((parent, node) =&gt; {</span><span class="s3">\n  </span><span class="s1">const shapeSvg = parent.insert(</span><span class="s3">\&quot;</span><span class="s1">g</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">node default</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">id</span><span class="s3">\&quot;</span><span class="s1">, node.domId || node.id);</span><span class="s3">\n  </span><span class="s1">const s = 28;</span><span class="s3">\n  </span><span class="s1">const points = [</span><span class="s3">\n    </span><span class="s1">{ x: 0, y: s / 2 },</span><span class="s3">\n    </span><span class="s1">{ x: s / 2, y: 0 },</span><span class="s3">\n    </span><span class="s1">{ x: 0, y: -s / 2 },</span><span class="s3">\n    </span><span class="s1">{ x: -s / 2, y: 0 }</span><span class="s3">\n  </span><span class="s1">];</span><span class="s3">\n  </span><span class="s1">const choice2 = shapeSvg.insert(</span><span class="s3">\&quot;</span><span class="s1">polygon</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">:first-child</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\n    \&quot;</span><span class="s1">points</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n    </span><span class="s1">points.map(function(d) {</span><span class="s3">\n      </span><span class="s1">return d.x + </span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot; </span><span class="s1">+ d.y;</span><span class="s3">\n    </span><span class="s1">}).join(</span><span class="s3">\&quot; \&quot;</span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">choice2.attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">state-start</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">r</span><span class="s3">\&quot;</span><span class="s1">, 7).attr(</span><span class="s3">\&quot;</span><span class="s1">width</span><span class="s3">\&quot;</span><span class="s1">, 28).attr(</span><span class="s3">\&quot;</span><span class="s1">height</span><span class="s3">\&quot;</span><span class="s1">, 28);</span><span class="s3">\n  </span><span class="s1">node.width = 28;</span><span class="s3">\n  </span><span class="s1">node.height = 28;</span><span class="s3">\n  </span><span class="s1">node.intersect = function(point2) {</span><span class="s3">\n    </span><span class="s1">return intersect_default.circle(node, 14, point2);</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">return shapeSvg;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">choice</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var hexagon = /* @__PURE__ */ __name(async (parent, node) =&gt; {</span><span class="s3">\n  </span><span class="s1">const { shapeSvg, bbox } = await labelHelper(</span><span class="s3">\n    </span><span class="s1">parent,</span><span class="s3">\n    </span><span class="s1">node,</span><span class="s3">\n    </span><span class="s1">getClassesFromNode(node, void 0),</span><span class="s3">\n    </span><span class="s1">true</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const f = 4;</span><span class="s3">\n  </span><span class="s1">const h = bbox.height + node.padding;</span><span class="s3">\n  </span><span class="s1">const m = h / f;</span><span class="s3">\n  </span><span class="s1">const w = bbox.width + 2 * m + node.padding;</span><span class="s3">\n  </span><span class="s1">const points = [</span><span class="s3">\n    </span><span class="s1">{ x: m, y: 0 },</span><span class="s3">\n    </span><span class="s1">{ x: w - m, y: 0 },</span><span class="s3">\n    </span><span class="s1">{ x: w, y: -h / 2 },</span><span class="s3">\n    </span><span class="s1">{ x: w - m, y: -h },</span><span class="s3">\n    </span><span class="s1">{ x: m, y: -h },</span><span class="s3">\n    </span><span class="s1">{ x: 0, y: -h / 2 }</span><span class="s3">\n  </span><span class="s1">];</span><span class="s3">\n  </span><span class="s1">const hex = insertPolygonShape(shapeSvg, w, h, points);</span><span class="s3">\n  </span><span class="s1">hex.attr(</span><span class="s3">\&quot;</span><span class="s1">style</span><span class="s3">\&quot;</span><span class="s1">, node.style);</span><span class="s3">\n  </span><span class="s1">updateNodeBounds(node, hex);</span><span class="s3">\n  </span><span class="s1">node.intersect = function(point2) {</span><span class="s3">\n    </span><span class="s1">return intersect_default.polygon(node, points, point2);</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">return shapeSvg;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">hexagon</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var block_arrow = /* @__PURE__ */ __name(async (parent, node) =&gt; {</span><span class="s3">\n  </span><span class="s1">const { shapeSvg, bbox } = await labelHelper(parent, node, void 0, true);</span><span class="s3">\n  </span><span class="s1">const f = 2;</span><span class="s3">\n  </span><span class="s1">const h = bbox.height + 2 * node.padding;</span><span class="s3">\n  </span><span class="s1">const m = h / f;</span><span class="s3">\n  </span><span class="s1">const w = bbox.width + 2 * m + node.padding;</span><span class="s3">\n  </span><span class="s1">const points = getArrowPoints(node.directions, bbox, node);</span><span class="s3">\n  </span><span class="s1">const blockArrow = insertPolygonShape(shapeSvg, w, h, points);</span><span class="s3">\n  </span><span class="s1">blockArrow.attr(</span><span class="s3">\&quot;</span><span class="s1">style</span><span class="s3">\&quot;</span><span class="s1">, node.style);</span><span class="s3">\n  </span><span class="s1">updateNodeBounds(node, blockArrow);</span><span class="s3">\n  </span><span class="s1">node.intersect = function(point2) {</span><span class="s3">\n    </span><span class="s1">return intersect_default.polygon(node, points, point2);</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">return shapeSvg;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">block_arrow</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var rect_left_inv_arrow = /* @__PURE__ */ __name(async (parent, node) =&gt; {</span><span class="s3">\n  </span><span class="s1">const { shapeSvg, bbox } = await labelHelper(</span><span class="s3">\n    </span><span class="s1">parent,</span><span class="s3">\n    </span><span class="s1">node,</span><span class="s3">\n    </span><span class="s1">getClassesFromNode(node, void 0),</span><span class="s3">\n    </span><span class="s1">true</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const w = bbox.width + node.padding;</span><span class="s3">\n  </span><span class="s1">const h = bbox.height + node.padding;</span><span class="s3">\n  </span><span class="s1">const points = [</span><span class="s3">\n    </span><span class="s1">{ x: -h / 2, y: 0 },</span><span class="s3">\n    </span><span class="s1">{ x: w, y: 0 },</span><span class="s3">\n    </span><span class="s1">{ x: w, y: -h },</span><span class="s3">\n    </span><span class="s1">{ x: -h / 2, y: -h },</span><span class="s3">\n    </span><span class="s1">{ x: 0, y: -h / 2 }</span><span class="s3">\n  </span><span class="s1">];</span><span class="s3">\n  </span><span class="s1">const el = insertPolygonShape(shapeSvg, w, h, points);</span><span class="s3">\n  </span><span class="s1">el.attr(</span><span class="s3">\&quot;</span><span class="s1">style</span><span class="s3">\&quot;</span><span class="s1">, node.style);</span><span class="s3">\n  </span><span class="s1">node.width = w + h;</span><span class="s3">\n  </span><span class="s1">node.height = h;</span><span class="s3">\n  </span><span class="s1">node.intersect = function(point2) {</span><span class="s3">\n    </span><span class="s1">return intersect_default.polygon(node, points, point2);</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">return shapeSvg;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">rect_left_inv_arrow</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var lean_right = /* @__PURE__ */ __name(async (parent, node) =&gt; {</span><span class="s3">\n  </span><span class="s1">const { shapeSvg, bbox } = await labelHelper(parent, node, getClassesFromNode(node), true);</span><span class="s3">\n  </span><span class="s1">const w = bbox.width + node.padding;</span><span class="s3">\n  </span><span class="s1">const h = bbox.height + node.padding;</span><span class="s3">\n  </span><span class="s1">const points = [</span><span class="s3">\n    </span><span class="s1">{ x: -2 * h / 6, y: 0 },</span><span class="s3">\n    </span><span class="s1">{ x: w - h / 6, y: 0 },</span><span class="s3">\n    </span><span class="s1">{ x: w + 2 * h / 6, y: -h },</span><span class="s3">\n    </span><span class="s1">{ x: h / 6, y: -h }</span><span class="s3">\n  </span><span class="s1">];</span><span class="s3">\n  </span><span class="s1">const el = insertPolygonShape(shapeSvg, w, h, points);</span><span class="s3">\n  </span><span class="s1">el.attr(</span><span class="s3">\&quot;</span><span class="s1">style</span><span class="s3">\&quot;</span><span class="s1">, node.style);</span><span class="s3">\n  </span><span class="s1">updateNodeBounds(node, el);</span><span class="s3">\n  </span><span class="s1">node.intersect = function(point2) {</span><span class="s3">\n    </span><span class="s1">return intersect_default.polygon(node, points, point2);</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">return shapeSvg;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">lean_right</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var lean_left = /* @__PURE__ */ __name(async (parent, node) =&gt; {</span><span class="s3">\n  </span><span class="s1">const { shapeSvg, bbox } = await labelHelper(</span><span class="s3">\n    </span><span class="s1">parent,</span><span class="s3">\n    </span><span class="s1">node,</span><span class="s3">\n    </span><span class="s1">getClassesFromNode(node, void 0),</span><span class="s3">\n    </span><span class="s1">true</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const w = bbox.width + node.padding;</span><span class="s3">\n  </span><span class="s1">const h = bbox.height + node.padding;</span><span class="s3">\n  </span><span class="s1">const points = [</span><span class="s3">\n    </span><span class="s1">{ x: 2 * h / 6, y: 0 },</span><span class="s3">\n    </span><span class="s1">{ x: w + h / 6, y: 0 },</span><span class="s3">\n    </span><span class="s1">{ x: w - 2 * h / 6, y: -h },</span><span class="s3">\n    </span><span class="s1">{ x: -h / 6, y: -h }</span><span class="s3">\n  </span><span class="s1">];</span><span class="s3">\n  </span><span class="s1">const el = insertPolygonShape(shapeSvg, w, h, points);</span><span class="s3">\n  </span><span class="s1">el.attr(</span><span class="s3">\&quot;</span><span class="s1">style</span><span class="s3">\&quot;</span><span class="s1">, node.style);</span><span class="s3">\n  </span><span class="s1">updateNodeBounds(node, el);</span><span class="s3">\n  </span><span class="s1">node.intersect = function(point2) {</span><span class="s3">\n    </span><span class="s1">return intersect_default.polygon(node, points, point2);</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">return shapeSvg;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">lean_left</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var trapezoid = /* @__PURE__ */ __name(async (parent, node) =&gt; {</span><span class="s3">\n  </span><span class="s1">const { shapeSvg, bbox } = await labelHelper(</span><span class="s3">\n    </span><span class="s1">parent,</span><span class="s3">\n    </span><span class="s1">node,</span><span class="s3">\n    </span><span class="s1">getClassesFromNode(node, void 0),</span><span class="s3">\n    </span><span class="s1">true</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const w = bbox.width + node.padding;</span><span class="s3">\n  </span><span class="s1">const h = bbox.height + node.padding;</span><span class="s3">\n  </span><span class="s1">const points = [</span><span class="s3">\n    </span><span class="s1">{ x: -2 * h / 6, y: 0 },</span><span class="s3">\n    </span><span class="s1">{ x: w + 2 * h / 6, y: 0 },</span><span class="s3">\n    </span><span class="s1">{ x: w - h / 6, y: -h },</span><span class="s3">\n    </span><span class="s1">{ x: h / 6, y: -h }</span><span class="s3">\n  </span><span class="s1">];</span><span class="s3">\n  </span><span class="s1">const el = insertPolygonShape(shapeSvg, w, h, points);</span><span class="s3">\n  </span><span class="s1">el.attr(</span><span class="s3">\&quot;</span><span class="s1">style</span><span class="s3">\&quot;</span><span class="s1">, node.style);</span><span class="s3">\n  </span><span class="s1">updateNodeBounds(node, el);</span><span class="s3">\n  </span><span class="s1">node.intersect = function(point2) {</span><span class="s3">\n    </span><span class="s1">return intersect_default.polygon(node, points, point2);</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">return shapeSvg;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">trapezoid</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var inv_trapezoid = /* @__PURE__ */ __name(async (parent, node) =&gt; {</span><span class="s3">\n  </span><span class="s1">const { shapeSvg, bbox } = await labelHelper(</span><span class="s3">\n    </span><span class="s1">parent,</span><span class="s3">\n    </span><span class="s1">node,</span><span class="s3">\n    </span><span class="s1">getClassesFromNode(node, void 0),</span><span class="s3">\n    </span><span class="s1">true</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const w = bbox.width + node.padding;</span><span class="s3">\n  </span><span class="s1">const h = bbox.height + node.padding;</span><span class="s3">\n  </span><span class="s1">const points = [</span><span class="s3">\n    </span><span class="s1">{ x: h / 6, y: 0 },</span><span class="s3">\n    </span><span class="s1">{ x: w - h / 6, y: 0 },</span><span class="s3">\n    </span><span class="s1">{ x: w + 2 * h / 6, y: -h },</span><span class="s3">\n    </span><span class="s1">{ x: -2 * h / 6, y: -h }</span><span class="s3">\n  </span><span class="s1">];</span><span class="s3">\n  </span><span class="s1">const el = insertPolygonShape(shapeSvg, w, h, points);</span><span class="s3">\n  </span><span class="s1">el.attr(</span><span class="s3">\&quot;</span><span class="s1">style</span><span class="s3">\&quot;</span><span class="s1">, node.style);</span><span class="s3">\n  </span><span class="s1">updateNodeBounds(node, el);</span><span class="s3">\n  </span><span class="s1">node.intersect = function(point2) {</span><span class="s3">\n    </span><span class="s1">return intersect_default.polygon(node, points, point2);</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">return shapeSvg;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">inv_trapezoid</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var rect_right_inv_arrow = /* @__PURE__ */ __name(async (parent, node) =&gt; {</span><span class="s3">\n  </span><span class="s1">const { shapeSvg, bbox } = await labelHelper(</span><span class="s3">\n    </span><span class="s1">parent,</span><span class="s3">\n    </span><span class="s1">node,</span><span class="s3">\n    </span><span class="s1">getClassesFromNode(node, void 0),</span><span class="s3">\n    </span><span class="s1">true</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const w = bbox.width + node.padding;</span><span class="s3">\n  </span><span class="s1">const h = bbox.height + node.padding;</span><span class="s3">\n  </span><span class="s1">const points = [</span><span class="s3">\n    </span><span class="s1">{ x: 0, y: 0 },</span><span class="s3">\n    </span><span class="s1">{ x: w + h / 2, y: 0 },</span><span class="s3">\n    </span><span class="s1">{ x: w, y: -h / 2 },</span><span class="s3">\n    </span><span class="s1">{ x: w + h / 2, y: -h },</span><span class="s3">\n    </span><span class="s1">{ x: 0, y: -h }</span><span class="s3">\n  </span><span class="s1">];</span><span class="s3">\n  </span><span class="s1">const el = insertPolygonShape(shapeSvg, w, h, points);</span><span class="s3">\n  </span><span class="s1">el.attr(</span><span class="s3">\&quot;</span><span class="s1">style</span><span class="s3">\&quot;</span><span class="s1">, node.style);</span><span class="s3">\n  </span><span class="s1">updateNodeBounds(node, el);</span><span class="s3">\n  </span><span class="s1">node.intersect = function(point2) {</span><span class="s3">\n    </span><span class="s1">return intersect_default.polygon(node, points, point2);</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">return shapeSvg;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">rect_right_inv_arrow</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var cylinder = /* @__PURE__ */ __name(async (parent, node) =&gt; {</span><span class="s3">\n  </span><span class="s1">const { shapeSvg, bbox } = await labelHelper(</span><span class="s3">\n    </span><span class="s1">parent,</span><span class="s3">\n    </span><span class="s1">node,</span><span class="s3">\n    </span><span class="s1">getClassesFromNode(node, void 0),</span><span class="s3">\n    </span><span class="s1">true</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const w = bbox.width + node.padding;</span><span class="s3">\n  </span><span class="s1">const rx = w / 2;</span><span class="s3">\n  </span><span class="s1">const ry = rx / (2.5 + w / 50);</span><span class="s3">\n  </span><span class="s1">const h = bbox.height + ry + node.padding;</span><span class="s3">\n  </span><span class="s1">const shape = </span><span class="s3">\&quot;</span><span class="s1">M 0,</span><span class="s3">\&quot; </span><span class="s1">+ ry + </span><span class="s3">\&quot; </span><span class="s1">a </span><span class="s3">\&quot; </span><span class="s1">+ rx + </span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot; </span><span class="s1">+ ry + </span><span class="s3">\&quot; </span><span class="s1">0,0,0 </span><span class="s3">\&quot; </span><span class="s1">+ w + </span><span class="s3">\&quot; </span><span class="s1">0 a </span><span class="s3">\&quot; </span><span class="s1">+ rx + </span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot; </span><span class="s1">+ ry + </span><span class="s3">\&quot; </span><span class="s1">0,0,0 </span><span class="s3">\&quot; </span><span class="s1">+ -w + </span><span class="s3">\&quot; </span><span class="s1">0 l 0,</span><span class="s3">\&quot; </span><span class="s1">+ h + </span><span class="s3">\&quot; </span><span class="s1">a </span><span class="s3">\&quot; </span><span class="s1">+ rx + </span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot; </span><span class="s1">+ ry + </span><span class="s3">\&quot; </span><span class="s1">0,0,0 </span><span class="s3">\&quot; </span><span class="s1">+ w + </span><span class="s3">\&quot; </span><span class="s1">0 l 0,</span><span class="s3">\&quot; </span><span class="s1">+ -h;</span><span class="s3">\n  </span><span class="s1">const el = shapeSvg.attr(</span><span class="s3">\&quot;</span><span class="s1">label-offset-y</span><span class="s3">\&quot;</span><span class="s1">, ry).insert(</span><span class="s3">\&quot;</span><span class="s1">path</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">:first-child</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">style</span><span class="s3">\&quot;</span><span class="s1">, node.style).attr(</span><span class="s3">\&quot;</span><span class="s1">d</span><span class="s3">\&quot;</span><span class="s1">, shape).attr(</span><span class="s3">\&quot;</span><span class="s1">transform</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">translate(</span><span class="s3">\&quot; </span><span class="s1">+ -w / 2 + </span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot; </span><span class="s1">+ -(h / 2 + ry) + </span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">updateNodeBounds(node, el);</span><span class="s3">\n  </span><span class="s1">node.intersect = function(point2) {</span><span class="s3">\n    </span><span class="s1">const pos = intersect_default.rect(node, point2);</span><span class="s3">\n    </span><span class="s1">const x = pos.x - node.x;</span><span class="s3">\n    </span><span class="s1">if (rx != 0 &amp;&amp; (Math.abs(x) &lt; node.width / 2 || Math.abs(x) == node.width / 2 &amp;&amp; Math.abs(pos.y - node.y) &gt; node.height / 2 - ry)) {</span><span class="s3">\n      </span><span class="s1">let y = ry * ry * (1 - x * x / (rx * rx));</span><span class="s3">\n      </span><span class="s1">if (y != 0) {</span><span class="s3">\n        </span><span class="s1">y = Math.sqrt(y);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">y = ry - y;</span><span class="s3">\n      </span><span class="s1">if (point2.y - node.y &gt; 0) {</span><span class="s3">\n        </span><span class="s1">y = -y;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">pos.y += y;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">return pos;</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">return shapeSvg;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">cylinder</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var rect = /* @__PURE__ */ __name(async (parent, node) =&gt; {</span><span class="s3">\n  </span><span class="s1">const { shapeSvg, bbox, halfPadding } = await labelHelper(</span><span class="s3">\n    </span><span class="s1">parent,</span><span class="s3">\n    </span><span class="s1">node,</span><span class="s3">\n    \&quot;</span><span class="s1">node </span><span class="s3">\&quot; </span><span class="s1">+ node.classes + </span><span class="s3">\&quot; \&quot; </span><span class="s1">+ node.class,</span><span class="s3">\n    </span><span class="s1">true</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const rect2 = shapeSvg.insert(</span><span class="s3">\&quot;</span><span class="s1">rect</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">:first-child</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const totalWidth = node.positioned ? node.width : bbox.width + node.padding;</span><span class="s3">\n  </span><span class="s1">const totalHeight = node.positioned ? node.height : bbox.height + node.padding;</span><span class="s3">\n  </span><span class="s1">const x = node.positioned ? -totalWidth / 2 : -bbox.width / 2 - halfPadding;</span><span class="s3">\n  </span><span class="s1">const y = node.positioned ? -totalHeight / 2 : -bbox.height / 2 - halfPadding;</span><span class="s3">\n  </span><span class="s1">rect2.attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">basic label-container</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">style</span><span class="s3">\&quot;</span><span class="s1">, node.style).attr(</span><span class="s3">\&quot;</span><span class="s1">rx</span><span class="s3">\&quot;</span><span class="s1">, node.rx).attr(</span><span class="s3">\&quot;</span><span class="s1">ry</span><span class="s3">\&quot;</span><span class="s1">, node.ry).attr(</span><span class="s3">\&quot;</span><span class="s1">x</span><span class="s3">\&quot;</span><span class="s1">, x).attr(</span><span class="s3">\&quot;</span><span class="s1">y</span><span class="s3">\&quot;</span><span class="s1">, y).attr(</span><span class="s3">\&quot;</span><span class="s1">width</span><span class="s3">\&quot;</span><span class="s1">, totalWidth).attr(</span><span class="s3">\&quot;</span><span class="s1">height</span><span class="s3">\&quot;</span><span class="s1">, totalHeight);</span><span class="s3">\n  </span><span class="s1">if (node.props) {</span><span class="s3">\n    </span><span class="s1">const propKeys = new Set(Object.keys(node.props));</span><span class="s3">\n    </span><span class="s1">if (node.props.borders) {</span><span class="s3">\n      </span><span class="s1">applyNodePropertyBorders(rect2, node.props.borders, totalWidth, totalHeight);</span><span class="s3">\n      </span><span class="s1">propKeys.delete(</span><span class="s3">\&quot;</span><span class="s1">borders</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">propKeys.forEach((propKey) =&gt; {</span><span class="s3">\n      </span><span class="s1">log.warn(`Unknown node property ${propKey}`);</span><span class="s3">\n    </span><span class="s1">});</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">updateNodeBounds(node, rect2);</span><span class="s3">\n  </span><span class="s1">node.intersect = function(point2) {</span><span class="s3">\n    </span><span class="s1">return intersect_default.rect(node, point2);</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">return shapeSvg;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">rect</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var composite = /* @__PURE__ */ __name(async (parent, node) =&gt; {</span><span class="s3">\n  </span><span class="s1">const { shapeSvg, bbox, halfPadding } = await labelHelper(</span><span class="s3">\n    </span><span class="s1">parent,</span><span class="s3">\n    </span><span class="s1">node,</span><span class="s3">\n    \&quot;</span><span class="s1">node </span><span class="s3">\&quot; </span><span class="s1">+ node.classes,</span><span class="s3">\n    </span><span class="s1">true</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const rect2 = shapeSvg.insert(</span><span class="s3">\&quot;</span><span class="s1">rect</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">:first-child</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const totalWidth = node.positioned ? node.width : bbox.width + node.padding;</span><span class="s3">\n  </span><span class="s1">const totalHeight = node.positioned ? node.height : bbox.height + node.padding;</span><span class="s3">\n  </span><span class="s1">const x = node.positioned ? -totalWidth / 2 : -bbox.width / 2 - halfPadding;</span><span class="s3">\n  </span><span class="s1">const y = node.positioned ? -totalHeight / 2 : -bbox.height / 2 - halfPadding;</span><span class="s3">\n  </span><span class="s1">rect2.attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">basic cluster composite label-container</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">style</span><span class="s3">\&quot;</span><span class="s1">, node.style).attr(</span><span class="s3">\&quot;</span><span class="s1">rx</span><span class="s3">\&quot;</span><span class="s1">, node.rx).attr(</span><span class="s3">\&quot;</span><span class="s1">ry</span><span class="s3">\&quot;</span><span class="s1">, node.ry).attr(</span><span class="s3">\&quot;</span><span class="s1">x</span><span class="s3">\&quot;</span><span class="s1">, x).attr(</span><span class="s3">\&quot;</span><span class="s1">y</span><span class="s3">\&quot;</span><span class="s1">, y).attr(</span><span class="s3">\&quot;</span><span class="s1">width</span><span class="s3">\&quot;</span><span class="s1">, totalWidth).attr(</span><span class="s3">\&quot;</span><span class="s1">height</span><span class="s3">\&quot;</span><span class="s1">, totalHeight);</span><span class="s3">\n  </span><span class="s1">if (node.props) {</span><span class="s3">\n    </span><span class="s1">const propKeys = new Set(Object.keys(node.props));</span><span class="s3">\n    </span><span class="s1">if (node.props.borders) {</span><span class="s3">\n      </span><span class="s1">applyNodePropertyBorders(rect2, node.props.borders, totalWidth, totalHeight);</span><span class="s3">\n      </span><span class="s1">propKeys.delete(</span><span class="s3">\&quot;</span><span class="s1">borders</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">propKeys.forEach((propKey) =&gt; {</span><span class="s3">\n      </span><span class="s1">log.warn(`Unknown node property ${propKey}`);</span><span class="s3">\n    </span><span class="s1">});</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">updateNodeBounds(node, rect2);</span><span class="s3">\n  </span><span class="s1">node.intersect = function(point2) {</span><span class="s3">\n    </span><span class="s1">return intersect_default.rect(node, point2);</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">return shapeSvg;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">composite</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var labelRect = /* @__PURE__ */ __name(async (parent, node) =&gt; {</span><span class="s3">\n  </span><span class="s1">const { shapeSvg } = await labelHelper(parent, node, </span><span class="s3">\&quot;</span><span class="s1">label</span><span class="s3">\&quot;</span><span class="s1">, true);</span><span class="s3">\n  </span><span class="s1">log.trace(</span><span class="s3">\&quot;</span><span class="s1">Classes = </span><span class="s3">\&quot;</span><span class="s1">, node.class);</span><span class="s3">\n  </span><span class="s1">const rect2 = shapeSvg.insert(</span><span class="s3">\&quot;</span><span class="s1">rect</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">:first-child</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const totalWidth = 0;</span><span class="s3">\n  </span><span class="s1">const totalHeight = 0;</span><span class="s3">\n  </span><span class="s1">rect2.attr(</span><span class="s3">\&quot;</span><span class="s1">width</span><span class="s3">\&quot;</span><span class="s1">, totalWidth).attr(</span><span class="s3">\&quot;</span><span class="s1">height</span><span class="s3">\&quot;</span><span class="s1">, totalHeight);</span><span class="s3">\n  </span><span class="s1">shapeSvg.attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">label edgeLabel</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">if (node.props) {</span><span class="s3">\n    </span><span class="s1">const propKeys = new Set(Object.keys(node.props));</span><span class="s3">\n    </span><span class="s1">if (node.props.borders) {</span><span class="s3">\n      </span><span class="s1">applyNodePropertyBorders(rect2, node.props.borders, totalWidth, totalHeight);</span><span class="s3">\n      </span><span class="s1">propKeys.delete(</span><span class="s3">\&quot;</span><span class="s1">borders</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">propKeys.forEach((propKey) =&gt; {</span><span class="s3">\n      </span><span class="s1">log.warn(`Unknown node property ${propKey}`);</span><span class="s3">\n    </span><span class="s1">});</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">updateNodeBounds(node, rect2);</span><span class="s3">\n  </span><span class="s1">node.intersect = function(point2) {</span><span class="s3">\n    </span><span class="s1">return intersect_default.rect(node, point2);</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">return shapeSvg;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">labelRect</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">function applyNodePropertyBorders(rect2, borders, totalWidth, totalHeight) {</span><span class="s3">\n  </span><span class="s1">const strokeDashArray = [];</span><span class="s3">\n  </span><span class="s1">const addBorder = /* @__PURE__ */ __name((length) =&gt; {</span><span class="s3">\n    </span><span class="s1">strokeDashArray.push(length, 0);</span><span class="s3">\n  </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">addBorder</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const skipBorder = /* @__PURE__ */ __name((length) =&gt; {</span><span class="s3">\n    </span><span class="s1">strokeDashArray.push(0, length);</span><span class="s3">\n  </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">skipBorder</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">if (borders.includes(</span><span class="s3">\&quot;</span><span class="s1">t</span><span class="s3">\&quot;</span><span class="s1">)) {</span><span class="s3">\n    </span><span class="s1">log.debug(</span><span class="s3">\&quot;</span><span class="s1">add top border</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">addBorder(totalWidth);</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">skipBorder(totalWidth);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (borders.includes(</span><span class="s3">\&quot;</span><span class="s1">r</span><span class="s3">\&quot;</span><span class="s1">)) {</span><span class="s3">\n    </span><span class="s1">log.debug(</span><span class="s3">\&quot;</span><span class="s1">add right border</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">addBorder(totalHeight);</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">skipBorder(totalHeight);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (borders.includes(</span><span class="s3">\&quot;</span><span class="s1">b</span><span class="s3">\&quot;</span><span class="s1">)) {</span><span class="s3">\n    </span><span class="s1">log.debug(</span><span class="s3">\&quot;</span><span class="s1">add bottom border</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">addBorder(totalWidth);</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">skipBorder(totalWidth);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (borders.includes(</span><span class="s3">\&quot;</span><span class="s1">l</span><span class="s3">\&quot;</span><span class="s1">)) {</span><span class="s3">\n    </span><span class="s1">log.debug(</span><span class="s3">\&quot;</span><span class="s1">add left border</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">addBorder(totalHeight);</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">skipBorder(totalHeight);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">rect2.attr(</span><span class="s3">\&quot;</span><span class="s1">stroke-dasharray</span><span class="s3">\&quot;</span><span class="s1">, strokeDashArray.join(</span><span class="s3">\&quot; \&quot;</span><span class="s1">));</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">__name(applyNodePropertyBorders, </span><span class="s3">\&quot;</span><span class="s1">applyNodePropertyBorders</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var rectWithTitle = /* @__PURE__ */ __name((parent, node) =&gt; {</span><span class="s3">\n  </span><span class="s1">let classes2;</span><span class="s3">\n  </span><span class="s1">if (!node.classes) {</span><span class="s3">\n    </span><span class="s1">classes2 = </span><span class="s3">\&quot;</span><span class="s1">node default</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">classes2 = </span><span class="s3">\&quot;</span><span class="s1">node </span><span class="s3">\&quot; </span><span class="s1">+ node.classes;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">const shapeSvg = parent.insert(</span><span class="s3">\&quot;</span><span class="s1">g</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, classes2).attr(</span><span class="s3">\&quot;</span><span class="s1">id</span><span class="s3">\&quot;</span><span class="s1">, node.domId || node.id);</span><span class="s3">\n  </span><span class="s1">const rect2 = shapeSvg.insert(</span><span class="s3">\&quot;</span><span class="s1">rect</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">:first-child</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const innerLine = shapeSvg.insert(</span><span class="s3">\&quot;</span><span class="s1">line</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const label = shapeSvg.insert(</span><span class="s3">\&quot;</span><span class="s1">g</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">label</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const text2 = node.labelText.flat ? node.labelText.flat() : node.labelText;</span><span class="s3">\n  </span><span class="s1">let title = </span><span class="s3">\&quot;\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">if (typeof text2 === </span><span class="s3">\&quot;</span><span class="s1">object</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">title = text2[0];</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">title = text2;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">log.info(</span><span class="s3">\&quot;</span><span class="s1">Label text abc79</span><span class="s3">\&quot;</span><span class="s1">, title, text2, typeof text2 === </span><span class="s3">\&quot;</span><span class="s1">object</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const text = label.node().appendChild(createLabel_default(title, node.labelStyle, true, true));</span><span class="s3">\n  </span><span class="s1">let bbox = { width: 0, height: 0 };</span><span class="s3">\n  </span><span class="s1">if (evaluate(getConfig2().flowchart.htmlLabels)) {</span><span class="s3">\n    </span><span class="s1">const div = text.children[0];</span><span class="s3">\n    </span><span class="s1">const dv = select4(text);</span><span class="s3">\n    </span><span class="s1">bbox = div.getBoundingClientRect();</span><span class="s3">\n    </span><span class="s1">dv.attr(</span><span class="s3">\&quot;</span><span class="s1">width</span><span class="s3">\&quot;</span><span class="s1">, bbox.width);</span><span class="s3">\n    </span><span class="s1">dv.attr(</span><span class="s3">\&quot;</span><span class="s1">height</span><span class="s3">\&quot;</span><span class="s1">, bbox.height);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">log.info(</span><span class="s3">\&quot;</span><span class="s1">Text 2</span><span class="s3">\&quot;</span><span class="s1">, text2);</span><span class="s3">\n  </span><span class="s1">const textRows = text2.slice(1, text2.length);</span><span class="s3">\n  </span><span class="s1">let titleBox = text.getBBox();</span><span class="s3">\n  </span><span class="s1">const descr = label.node().appendChild(</span><span class="s3">\n    </span><span class="s1">createLabel_default(textRows.join ? textRows.join(</span><span class="s3">\&quot;</span><span class="s1">&lt;br/&gt;</span><span class="s3">\&quot;</span><span class="s1">) : textRows, node.labelStyle, true, true)</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">if (evaluate(getConfig2().flowchart.htmlLabels)) {</span><span class="s3">\n    </span><span class="s1">const div = descr.children[0];</span><span class="s3">\n    </span><span class="s1">const dv = select4(descr);</span><span class="s3">\n    </span><span class="s1">bbox = div.getBoundingClientRect();</span><span class="s3">\n    </span><span class="s1">dv.attr(</span><span class="s3">\&quot;</span><span class="s1">width</span><span class="s3">\&quot;</span><span class="s1">, bbox.width);</span><span class="s3">\n    </span><span class="s1">dv.attr(</span><span class="s3">\&quot;</span><span class="s1">height</span><span class="s3">\&quot;</span><span class="s1">, bbox.height);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">const halfPadding = node.padding / 2;</span><span class="s3">\n  </span><span class="s1">select4(descr).attr(</span><span class="s3">\n    \&quot;</span><span class="s1">transform</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n    \&quot;</span><span class="s1">translate( </span><span class="s3">\&quot; </span><span class="s1">+ // (titleBox.width - bbox.width) / 2 +</span><span class="s3">\n    </span><span class="s1">(bbox.width &gt; titleBox.width ? 0 : (titleBox.width - bbox.width) / 2) + </span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot; </span><span class="s1">+ (titleBox.height + halfPadding + 5) + </span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\&quot;\n  </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">select4(text).attr(</span><span class="s3">\n    \&quot;</span><span class="s1">transform</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n    \&quot;</span><span class="s1">translate( </span><span class="s3">\&quot; </span><span class="s1">+ // (titleBox.width - bbox.width) / 2 +</span><span class="s3">\n    </span><span class="s1">(bbox.width &lt; titleBox.width ? 0 : -(titleBox.width - bbox.width) / 2) + </span><span class="s3">\&quot;</span><span class="s1">, 0)</span><span class="s3">\&quot;\n  </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">bbox = label.node().getBBox();</span><span class="s3">\n  </span><span class="s1">label.attr(</span><span class="s3">\n    \&quot;</span><span class="s1">transform</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n    \&quot;</span><span class="s1">translate(</span><span class="s3">\&quot; </span><span class="s1">+ -bbox.width / 2 + </span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot; </span><span class="s1">+ (-bbox.height / 2 - halfPadding + 3) + </span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\&quot;\n  </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">rect2.attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">outer title-state</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">x</span><span class="s3">\&quot;</span><span class="s1">, -bbox.width / 2 - halfPadding).attr(</span><span class="s3">\&quot;</span><span class="s1">y</span><span class="s3">\&quot;</span><span class="s1">, -bbox.height / 2 - halfPadding).attr(</span><span class="s3">\&quot;</span><span class="s1">width</span><span class="s3">\&quot;</span><span class="s1">, bbox.width + node.padding).attr(</span><span class="s3">\&quot;</span><span class="s1">height</span><span class="s3">\&quot;</span><span class="s1">, bbox.height + node.padding);</span><span class="s3">\n  </span><span class="s1">innerLine.attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">divider</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">x1</span><span class="s3">\&quot;</span><span class="s1">, -bbox.width / 2 - halfPadding).attr(</span><span class="s3">\&quot;</span><span class="s1">x2</span><span class="s3">\&quot;</span><span class="s1">, bbox.width / 2 + halfPadding).attr(</span><span class="s3">\&quot;</span><span class="s1">y1</span><span class="s3">\&quot;</span><span class="s1">, -bbox.height / 2 - halfPadding + titleBox.height + halfPadding).attr(</span><span class="s3">\&quot;</span><span class="s1">y2</span><span class="s3">\&quot;</span><span class="s1">, -bbox.height / 2 - halfPadding + titleBox.height + halfPadding);</span><span class="s3">\n  </span><span class="s1">updateNodeBounds(node, rect2);</span><span class="s3">\n  </span><span class="s1">node.intersect = function(point2) {</span><span class="s3">\n    </span><span class="s1">return intersect_default.rect(node, point2);</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">return shapeSvg;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">rectWithTitle</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var stadium = /* @__PURE__ */ __name(async (parent, node) =&gt; {</span><span class="s3">\n  </span><span class="s1">const { shapeSvg, bbox } = await labelHelper(</span><span class="s3">\n    </span><span class="s1">parent,</span><span class="s3">\n    </span><span class="s1">node,</span><span class="s3">\n    </span><span class="s1">getClassesFromNode(node, void 0),</span><span class="s3">\n    </span><span class="s1">true</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const h = bbox.height + node.padding;</span><span class="s3">\n  </span><span class="s1">const w = bbox.width + h / 4 + node.padding;</span><span class="s3">\n  </span><span class="s1">const rect2 = shapeSvg.insert(</span><span class="s3">\&quot;</span><span class="s1">rect</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">:first-child</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">style</span><span class="s3">\&quot;</span><span class="s1">, node.style).attr(</span><span class="s3">\&quot;</span><span class="s1">rx</span><span class="s3">\&quot;</span><span class="s1">, h / 2).attr(</span><span class="s3">\&quot;</span><span class="s1">ry</span><span class="s3">\&quot;</span><span class="s1">, h / 2).attr(</span><span class="s3">\&quot;</span><span class="s1">x</span><span class="s3">\&quot;</span><span class="s1">, -w / 2).attr(</span><span class="s3">\&quot;</span><span class="s1">y</span><span class="s3">\&quot;</span><span class="s1">, -h / 2).attr(</span><span class="s3">\&quot;</span><span class="s1">width</span><span class="s3">\&quot;</span><span class="s1">, w).attr(</span><span class="s3">\&quot;</span><span class="s1">height</span><span class="s3">\&quot;</span><span class="s1">, h);</span><span class="s3">\n  </span><span class="s1">updateNodeBounds(node, rect2);</span><span class="s3">\n  </span><span class="s1">node.intersect = function(point2) {</span><span class="s3">\n    </span><span class="s1">return intersect_default.rect(node, point2);</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">return shapeSvg;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">stadium</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var circle2 = /* @__PURE__ */ __name(async (parent, node) =&gt; {</span><span class="s3">\n  </span><span class="s1">const { shapeSvg, bbox, halfPadding } = await labelHelper(</span><span class="s3">\n    </span><span class="s1">parent,</span><span class="s3">\n    </span><span class="s1">node,</span><span class="s3">\n    </span><span class="s1">getClassesFromNode(node, void 0),</span><span class="s3">\n    </span><span class="s1">true</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const circle3 = shapeSvg.insert(</span><span class="s3">\&quot;</span><span class="s1">circle</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">:first-child</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">circle3.attr(</span><span class="s3">\&quot;</span><span class="s1">style</span><span class="s3">\&quot;</span><span class="s1">, node.style).attr(</span><span class="s3">\&quot;</span><span class="s1">rx</span><span class="s3">\&quot;</span><span class="s1">, node.rx).attr(</span><span class="s3">\&quot;</span><span class="s1">ry</span><span class="s3">\&quot;</span><span class="s1">, node.ry).attr(</span><span class="s3">\&quot;</span><span class="s1">r</span><span class="s3">\&quot;</span><span class="s1">, bbox.width / 2 + halfPadding).attr(</span><span class="s3">\&quot;</span><span class="s1">width</span><span class="s3">\&quot;</span><span class="s1">, bbox.width + node.padding).attr(</span><span class="s3">\&quot;</span><span class="s1">height</span><span class="s3">\&quot;</span><span class="s1">, bbox.height + node.padding);</span><span class="s3">\n  </span><span class="s1">log.info(</span><span class="s3">\&quot;</span><span class="s1">Circle main</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">updateNodeBounds(node, circle3);</span><span class="s3">\n  </span><span class="s1">node.intersect = function(point2) {</span><span class="s3">\n    </span><span class="s1">log.info(</span><span class="s3">\&quot;</span><span class="s1">Circle intersect</span><span class="s3">\&quot;</span><span class="s1">, node, bbox.width / 2 + halfPadding, point2);</span><span class="s3">\n    </span><span class="s1">return intersect_default.circle(node, bbox.width / 2 + halfPadding, point2);</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">return shapeSvg;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">circle</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var doublecircle = /* @__PURE__ */ __name(async (parent, node) =&gt; {</span><span class="s3">\n  </span><span class="s1">const { shapeSvg, bbox, halfPadding } = await labelHelper(</span><span class="s3">\n    </span><span class="s1">parent,</span><span class="s3">\n    </span><span class="s1">node,</span><span class="s3">\n    </span><span class="s1">getClassesFromNode(node, void 0),</span><span class="s3">\n    </span><span class="s1">true</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const gap = 5;</span><span class="s3">\n  </span><span class="s1">const circleGroup = shapeSvg.insert(</span><span class="s3">\&quot;</span><span class="s1">g</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">:first-child</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const outerCircle = circleGroup.insert(</span><span class="s3">\&quot;</span><span class="s1">circle</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const innerCircle = circleGroup.insert(</span><span class="s3">\&quot;</span><span class="s1">circle</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">circleGroup.attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, node.class);</span><span class="s3">\n  </span><span class="s1">outerCircle.attr(</span><span class="s3">\&quot;</span><span class="s1">style</span><span class="s3">\&quot;</span><span class="s1">, node.style).attr(</span><span class="s3">\&quot;</span><span class="s1">rx</span><span class="s3">\&quot;</span><span class="s1">, node.rx).attr(</span><span class="s3">\&quot;</span><span class="s1">ry</span><span class="s3">\&quot;</span><span class="s1">, node.ry).attr(</span><span class="s3">\&quot;</span><span class="s1">r</span><span class="s3">\&quot;</span><span class="s1">, bbox.width / 2 + halfPadding + gap).attr(</span><span class="s3">\&quot;</span><span class="s1">width</span><span class="s3">\&quot;</span><span class="s1">, bbox.width + node.padding + gap * 2).attr(</span><span class="s3">\&quot;</span><span class="s1">height</span><span class="s3">\&quot;</span><span class="s1">, bbox.height + node.padding + gap * 2);</span><span class="s3">\n  </span><span class="s1">innerCircle.attr(</span><span class="s3">\&quot;</span><span class="s1">style</span><span class="s3">\&quot;</span><span class="s1">, node.style).attr(</span><span class="s3">\&quot;</span><span class="s1">rx</span><span class="s3">\&quot;</span><span class="s1">, node.rx).attr(</span><span class="s3">\&quot;</span><span class="s1">ry</span><span class="s3">\&quot;</span><span class="s1">, node.ry).attr(</span><span class="s3">\&quot;</span><span class="s1">r</span><span class="s3">\&quot;</span><span class="s1">, bbox.width / 2 + halfPadding).attr(</span><span class="s3">\&quot;</span><span class="s1">width</span><span class="s3">\&quot;</span><span class="s1">, bbox.width + node.padding).attr(</span><span class="s3">\&quot;</span><span class="s1">height</span><span class="s3">\&quot;</span><span class="s1">, bbox.height + node.padding);</span><span class="s3">\n  </span><span class="s1">log.info(</span><span class="s3">\&quot;</span><span class="s1">DoubleCircle main</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">updateNodeBounds(node, outerCircle);</span><span class="s3">\n  </span><span class="s1">node.intersect = function(point2) {</span><span class="s3">\n    </span><span class="s1">log.info(</span><span class="s3">\&quot;</span><span class="s1">DoubleCircle intersect</span><span class="s3">\&quot;</span><span class="s1">, node, bbox.width / 2 + halfPadding + gap, point2);</span><span class="s3">\n    </span><span class="s1">return intersect_default.circle(node, bbox.width / 2 + halfPadding + gap, point2);</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">return shapeSvg;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">doublecircle</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var subroutine = /* @__PURE__ */ __name(async (parent, node) =&gt; {</span><span class="s3">\n  </span><span class="s1">const { shapeSvg, bbox } = await labelHelper(</span><span class="s3">\n    </span><span class="s1">parent,</span><span class="s3">\n    </span><span class="s1">node,</span><span class="s3">\n    </span><span class="s1">getClassesFromNode(node, void 0),</span><span class="s3">\n    </span><span class="s1">true</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const w = bbox.width + node.padding;</span><span class="s3">\n  </span><span class="s1">const h = bbox.height + node.padding;</span><span class="s3">\n  </span><span class="s1">const points = [</span><span class="s3">\n    </span><span class="s1">{ x: 0, y: 0 },</span><span class="s3">\n    </span><span class="s1">{ x: w, y: 0 },</span><span class="s3">\n    </span><span class="s1">{ x: w, y: -h },</span><span class="s3">\n    </span><span class="s1">{ x: 0, y: -h },</span><span class="s3">\n    </span><span class="s1">{ x: 0, y: 0 },</span><span class="s3">\n    </span><span class="s1">{ x: -8, y: 0 },</span><span class="s3">\n    </span><span class="s1">{ x: w + 8, y: 0 },</span><span class="s3">\n    </span><span class="s1">{ x: w + 8, y: -h },</span><span class="s3">\n    </span><span class="s1">{ x: -8, y: -h },</span><span class="s3">\n    </span><span class="s1">{ x: -8, y: 0 }</span><span class="s3">\n  </span><span class="s1">];</span><span class="s3">\n  </span><span class="s1">const el = insertPolygonShape(shapeSvg, w, h, points);</span><span class="s3">\n  </span><span class="s1">el.attr(</span><span class="s3">\&quot;</span><span class="s1">style</span><span class="s3">\&quot;</span><span class="s1">, node.style);</span><span class="s3">\n  </span><span class="s1">updateNodeBounds(node, el);</span><span class="s3">\n  </span><span class="s1">node.intersect = function(point2) {</span><span class="s3">\n    </span><span class="s1">return intersect_default.polygon(node, points, point2);</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">return shapeSvg;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">subroutine</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var start = /* @__PURE__ */ __name((parent, node) =&gt; {</span><span class="s3">\n  </span><span class="s1">const shapeSvg = parent.insert(</span><span class="s3">\&quot;</span><span class="s1">g</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">node default</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">id</span><span class="s3">\&quot;</span><span class="s1">, node.domId || node.id);</span><span class="s3">\n  </span><span class="s1">const circle3 = shapeSvg.insert(</span><span class="s3">\&quot;</span><span class="s1">circle</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">:first-child</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">circle3.attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">state-start</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">r</span><span class="s3">\&quot;</span><span class="s1">, 7).attr(</span><span class="s3">\&quot;</span><span class="s1">width</span><span class="s3">\&quot;</span><span class="s1">, 14).attr(</span><span class="s3">\&quot;</span><span class="s1">height</span><span class="s3">\&quot;</span><span class="s1">, 14);</span><span class="s3">\n  </span><span class="s1">updateNodeBounds(node, circle3);</span><span class="s3">\n  </span><span class="s1">node.intersect = function(point2) {</span><span class="s3">\n    </span><span class="s1">return intersect_default.circle(node, 7, point2);</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">return shapeSvg;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">start</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var forkJoin = /* @__PURE__ */ __name((parent, node, dir) =&gt; {</span><span class="s3">\n  </span><span class="s1">const shapeSvg = parent.insert(</span><span class="s3">\&quot;</span><span class="s1">g</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">node default</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">id</span><span class="s3">\&quot;</span><span class="s1">, node.domId || node.id);</span><span class="s3">\n  </span><span class="s1">let width = 70;</span><span class="s3">\n  </span><span class="s1">let height = 10;</span><span class="s3">\n  </span><span class="s1">if (dir === </span><span class="s3">\&quot;</span><span class="s1">LR</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">width = 10;</span><span class="s3">\n    </span><span class="s1">height = 70;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">const shape = shapeSvg.append(</span><span class="s3">\&quot;</span><span class="s1">rect</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">x</span><span class="s3">\&quot;</span><span class="s1">, -1 * width / 2).attr(</span><span class="s3">\&quot;</span><span class="s1">y</span><span class="s3">\&quot;</span><span class="s1">, -1 * height / 2).attr(</span><span class="s3">\&quot;</span><span class="s1">width</span><span class="s3">\&quot;</span><span class="s1">, width).attr(</span><span class="s3">\&quot;</span><span class="s1">height</span><span class="s3">\&quot;</span><span class="s1">, height).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">fork-join</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">updateNodeBounds(node, shape);</span><span class="s3">\n  </span><span class="s1">node.height = node.height + node.padding / 2;</span><span class="s3">\n  </span><span class="s1">node.width = node.width + node.padding / 2;</span><span class="s3">\n  </span><span class="s1">node.intersect = function(point2) {</span><span class="s3">\n    </span><span class="s1">return intersect_default.rect(node, point2);</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">return shapeSvg;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">forkJoin</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var end = /* @__PURE__ */ __name((parent, node) =&gt; {</span><span class="s3">\n  </span><span class="s1">const shapeSvg = parent.insert(</span><span class="s3">\&quot;</span><span class="s1">g</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">node default</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">id</span><span class="s3">\&quot;</span><span class="s1">, node.domId || node.id);</span><span class="s3">\n  </span><span class="s1">const innerCircle = shapeSvg.insert(</span><span class="s3">\&quot;</span><span class="s1">circle</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">:first-child</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const circle3 = shapeSvg.insert(</span><span class="s3">\&quot;</span><span class="s1">circle</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">:first-child</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">circle3.attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">state-start</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">r</span><span class="s3">\&quot;</span><span class="s1">, 7).attr(</span><span class="s3">\&quot;</span><span class="s1">width</span><span class="s3">\&quot;</span><span class="s1">, 14).attr(</span><span class="s3">\&quot;</span><span class="s1">height</span><span class="s3">\&quot;</span><span class="s1">, 14);</span><span class="s3">\n  </span><span class="s1">innerCircle.attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">state-end</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">r</span><span class="s3">\&quot;</span><span class="s1">, 5).attr(</span><span class="s3">\&quot;</span><span class="s1">width</span><span class="s3">\&quot;</span><span class="s1">, 10).attr(</span><span class="s3">\&quot;</span><span class="s1">height</span><span class="s3">\&quot;</span><span class="s1">, 10);</span><span class="s3">\n  </span><span class="s1">updateNodeBounds(node, circle3);</span><span class="s3">\n  </span><span class="s1">node.intersect = function(point2) {</span><span class="s3">\n    </span><span class="s1">return intersect_default.circle(node, 7, point2);</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">return shapeSvg;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">end</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var class_box = /* @__PURE__ */ __name((parent, node) =&gt; {</span><span class="s3">\n  </span><span class="s1">const halfPadding = node.padding / 2;</span><span class="s3">\n  </span><span class="s1">const rowPadding = 4;</span><span class="s3">\n  </span><span class="s1">const lineHeight = 8;</span><span class="s3">\n  </span><span class="s1">let classes2;</span><span class="s3">\n  </span><span class="s1">if (!node.classes) {</span><span class="s3">\n    </span><span class="s1">classes2 = </span><span class="s3">\&quot;</span><span class="s1">node default</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">classes2 = </span><span class="s3">\&quot;</span><span class="s1">node </span><span class="s3">\&quot; </span><span class="s1">+ node.classes;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">const shapeSvg = parent.insert(</span><span class="s3">\&quot;</span><span class="s1">g</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, classes2).attr(</span><span class="s3">\&quot;</span><span class="s1">id</span><span class="s3">\&quot;</span><span class="s1">, node.domId || node.id);</span><span class="s3">\n  </span><span class="s1">const rect2 = shapeSvg.insert(</span><span class="s3">\&quot;</span><span class="s1">rect</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">:first-child</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const topLine = shapeSvg.insert(</span><span class="s3">\&quot;</span><span class="s1">line</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const bottomLine = shapeSvg.insert(</span><span class="s3">\&quot;</span><span class="s1">line</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">let maxWidth = 0;</span><span class="s3">\n  </span><span class="s1">let maxHeight = rowPadding;</span><span class="s3">\n  </span><span class="s1">const labelContainer = shapeSvg.insert(</span><span class="s3">\&quot;</span><span class="s1">g</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">label</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">let verticalPos = 0;</span><span class="s3">\n  </span><span class="s1">const hasInterface = node.classData.annotations?.[0];</span><span class="s3">\n  </span><span class="s1">const interfaceLabelText = node.classData.annotations[0] ? </span><span class="s3">\&quot;\\</span><span class="s1">xAB</span><span class="s3">\&quot; </span><span class="s1">+ node.classData.annotations[0] + </span><span class="s3">\&quot;\\</span><span class="s1">xBB</span><span class="s3">\&quot; </span><span class="s1">: </span><span class="s3">\&quot;\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">const interfaceLabel = labelContainer.node().appendChild(createLabel_default(interfaceLabelText, node.labelStyle, true, true));</span><span class="s3">\n  </span><span class="s1">let interfaceBBox = interfaceLabel.getBBox();</span><span class="s3">\n  </span><span class="s1">if (evaluate(getConfig2().flowchart.htmlLabels)) {</span><span class="s3">\n    </span><span class="s1">const div = interfaceLabel.children[0];</span><span class="s3">\n    </span><span class="s1">const dv = select4(interfaceLabel);</span><span class="s3">\n    </span><span class="s1">interfaceBBox = div.getBoundingClientRect();</span><span class="s3">\n    </span><span class="s1">dv.attr(</span><span class="s3">\&quot;</span><span class="s1">width</span><span class="s3">\&quot;</span><span class="s1">, interfaceBBox.width);</span><span class="s3">\n    </span><span class="s1">dv.attr(</span><span class="s3">\&quot;</span><span class="s1">height</span><span class="s3">\&quot;</span><span class="s1">, interfaceBBox.height);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (node.classData.annotations[0]) {</span><span class="s3">\n    </span><span class="s1">maxHeight += interfaceBBox.height + rowPadding;</span><span class="s3">\n    </span><span class="s1">maxWidth += interfaceBBox.width;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">let classTitleString = node.classData.label;</span><span class="s3">\n  </span><span class="s1">if (node.classData.type !== void 0 &amp;&amp; node.classData.type !== </span><span class="s3">\&quot;\&quot;</span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">if (getConfig2().flowchart.htmlLabels) {</span><span class="s3">\n      </span><span class="s1">classTitleString += </span><span class="s3">\&quot;</span><span class="s1">&amp;lt;</span><span class="s3">\&quot; </span><span class="s1">+ node.classData.type + </span><span class="s3">\&quot;</span><span class="s1">&amp;gt;</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">classTitleString += </span><span class="s3">\&quot;</span><span class="s1">&lt;</span><span class="s3">\&quot; </span><span class="s1">+ node.classData.type + </span><span class="s3">\&quot;</span><span class="s1">&gt;</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">const classTitleLabel = labelContainer.node().appendChild(createLabel_default(classTitleString, node.labelStyle, true, true));</span><span class="s3">\n  </span><span class="s1">select4(classTitleLabel).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">classTitle</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">let classTitleBBox = classTitleLabel.getBBox();</span><span class="s3">\n  </span><span class="s1">if (evaluate(getConfig2().flowchart.htmlLabels)) {</span><span class="s3">\n    </span><span class="s1">const div = classTitleLabel.children[0];</span><span class="s3">\n    </span><span class="s1">const dv = select4(classTitleLabel);</span><span class="s3">\n    </span><span class="s1">classTitleBBox = div.getBoundingClientRect();</span><span class="s3">\n    </span><span class="s1">dv.attr(</span><span class="s3">\&quot;</span><span class="s1">width</span><span class="s3">\&quot;</span><span class="s1">, classTitleBBox.width);</span><span class="s3">\n    </span><span class="s1">dv.attr(</span><span class="s3">\&quot;</span><span class="s1">height</span><span class="s3">\&quot;</span><span class="s1">, classTitleBBox.height);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">maxHeight += classTitleBBox.height + rowPadding;</span><span class="s3">\n  </span><span class="s1">if (classTitleBBox.width &gt; maxWidth) {</span><span class="s3">\n    </span><span class="s1">maxWidth = classTitleBBox.width;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">const classAttributes = [];</span><span class="s3">\n  </span><span class="s1">node.classData.members.forEach((member) =&gt; {</span><span class="s3">\n    </span><span class="s1">const parsedInfo = member.getDisplayDetails();</span><span class="s3">\n    </span><span class="s1">let parsedText = parsedInfo.displayText;</span><span class="s3">\n    </span><span class="s1">if (getConfig2().flowchart.htmlLabels) {</span><span class="s3">\n      </span><span class="s1">parsedText = parsedText.replace(/&lt;/g, </span><span class="s3">\&quot;</span><span class="s1">&amp;lt;</span><span class="s3">\&quot;</span><span class="s1">).replace(/&gt;/g, </span><span class="s3">\&quot;</span><span class="s1">&amp;gt;</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">const lbl = labelContainer.node().appendChild(</span><span class="s3">\n      </span><span class="s1">createLabel_default(</span><span class="s3">\n        </span><span class="s1">parsedText,</span><span class="s3">\n        </span><span class="s1">parsedInfo.cssStyle ? parsedInfo.cssStyle : node.labelStyle,</span><span class="s3">\n        </span><span class="s1">true,</span><span class="s3">\n        </span><span class="s1">true</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">let bbox = lbl.getBBox();</span><span class="s3">\n    </span><span class="s1">if (evaluate(getConfig2().flowchart.htmlLabels)) {</span><span class="s3">\n      </span><span class="s1">const div = lbl.children[0];</span><span class="s3">\n      </span><span class="s1">const dv = select4(lbl);</span><span class="s3">\n      </span><span class="s1">bbox = div.getBoundingClientRect();</span><span class="s3">\n      </span><span class="s1">dv.attr(</span><span class="s3">\&quot;</span><span class="s1">width</span><span class="s3">\&quot;</span><span class="s1">, bbox.width);</span><span class="s3">\n      </span><span class="s1">dv.attr(</span><span class="s3">\&quot;</span><span class="s1">height</span><span class="s3">\&quot;</span><span class="s1">, bbox.height);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">if (bbox.width &gt; maxWidth) {</span><span class="s3">\n      </span><span class="s1">maxWidth = bbox.width;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">maxHeight += bbox.height + rowPadding;</span><span class="s3">\n    </span><span class="s1">classAttributes.push(lbl);</span><span class="s3">\n  </span><span class="s1">});</span><span class="s3">\n  </span><span class="s1">maxHeight += lineHeight;</span><span class="s3">\n  </span><span class="s1">const classMethods = [];</span><span class="s3">\n  </span><span class="s1">node.classData.methods.forEach((member) =&gt; {</span><span class="s3">\n    </span><span class="s1">const parsedInfo = member.getDisplayDetails();</span><span class="s3">\n    </span><span class="s1">let displayText = parsedInfo.displayText;</span><span class="s3">\n    </span><span class="s1">if (getConfig2().flowchart.htmlLabels) {</span><span class="s3">\n      </span><span class="s1">displayText = displayText.replace(/&lt;/g, </span><span class="s3">\&quot;</span><span class="s1">&amp;lt;</span><span class="s3">\&quot;</span><span class="s1">).replace(/&gt;/g, </span><span class="s3">\&quot;</span><span class="s1">&amp;gt;</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">const lbl = labelContainer.node().appendChild(</span><span class="s3">\n      </span><span class="s1">createLabel_default(</span><span class="s3">\n        </span><span class="s1">displayText,</span><span class="s3">\n        </span><span class="s1">parsedInfo.cssStyle ? parsedInfo.cssStyle : node.labelStyle,</span><span class="s3">\n        </span><span class="s1">true,</span><span class="s3">\n        </span><span class="s1">true</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">let bbox = lbl.getBBox();</span><span class="s3">\n    </span><span class="s1">if (evaluate(getConfig2().flowchart.htmlLabels)) {</span><span class="s3">\n      </span><span class="s1">const div = lbl.children[0];</span><span class="s3">\n      </span><span class="s1">const dv = select4(lbl);</span><span class="s3">\n      </span><span class="s1">bbox = div.getBoundingClientRect();</span><span class="s3">\n      </span><span class="s1">dv.attr(</span><span class="s3">\&quot;</span><span class="s1">width</span><span class="s3">\&quot;</span><span class="s1">, bbox.width);</span><span class="s3">\n      </span><span class="s1">dv.attr(</span><span class="s3">\&quot;</span><span class="s1">height</span><span class="s3">\&quot;</span><span class="s1">, bbox.height);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">if (bbox.width &gt; maxWidth) {</span><span class="s3">\n      </span><span class="s1">maxWidth = bbox.width;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">maxHeight += bbox.height + rowPadding;</span><span class="s3">\n    </span><span class="s1">classMethods.push(lbl);</span><span class="s3">\n  </span><span class="s1">});</span><span class="s3">\n  </span><span class="s1">maxHeight += lineHeight;</span><span class="s3">\n  </span><span class="s1">if (hasInterface) {</span><span class="s3">\n    </span><span class="s1">let diffX2 = (maxWidth - interfaceBBox.width) / 2;</span><span class="s3">\n    </span><span class="s1">select4(interfaceLabel).attr(</span><span class="s3">\n      \&quot;</span><span class="s1">transform</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n      \&quot;</span><span class="s1">translate( </span><span class="s3">\&quot; </span><span class="s1">+ (-1 * maxWidth / 2 + diffX2) + </span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot; </span><span class="s1">+ -1 * maxHeight / 2 + </span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\&quot;\n    </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">verticalPos = interfaceBBox.height + rowPadding;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">let diffX = (maxWidth - classTitleBBox.width) / 2;</span><span class="s3">\n  </span><span class="s1">select4(classTitleLabel).attr(</span><span class="s3">\n    \&quot;</span><span class="s1">transform</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n    \&quot;</span><span class="s1">translate( </span><span class="s3">\&quot; </span><span class="s1">+ (-1 * maxWidth / 2 + diffX) + </span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot; </span><span class="s1">+ (-1 * maxHeight / 2 + verticalPos) + </span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\&quot;\n  </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">verticalPos += classTitleBBox.height + rowPadding;</span><span class="s3">\n  </span><span class="s1">topLine.attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">divider</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">x1</span><span class="s3">\&quot;</span><span class="s1">, -maxWidth / 2 - halfPadding).attr(</span><span class="s3">\&quot;</span><span class="s1">x2</span><span class="s3">\&quot;</span><span class="s1">, maxWidth / 2 + halfPadding).attr(</span><span class="s3">\&quot;</span><span class="s1">y1</span><span class="s3">\&quot;</span><span class="s1">, -maxHeight / 2 - halfPadding + lineHeight + verticalPos).attr(</span><span class="s3">\&quot;</span><span class="s1">y2</span><span class="s3">\&quot;</span><span class="s1">, -maxHeight / 2 - halfPadding + lineHeight + verticalPos);</span><span class="s3">\n  </span><span class="s1">verticalPos += lineHeight;</span><span class="s3">\n  </span><span class="s1">classAttributes.forEach((lbl) =&gt; {</span><span class="s3">\n    </span><span class="s1">select4(lbl).attr(</span><span class="s3">\n      \&quot;</span><span class="s1">transform</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n      \&quot;</span><span class="s1">translate( </span><span class="s3">\&quot; </span><span class="s1">+ -maxWidth / 2 + </span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot; </span><span class="s1">+ (-1 * maxHeight / 2 + verticalPos + lineHeight / 2) + </span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\&quot;\n    </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">const memberBBox = lbl?.getBBox();</span><span class="s3">\n    </span><span class="s1">verticalPos += (memberBBox?.height ?? 0) + rowPadding;</span><span class="s3">\n  </span><span class="s1">});</span><span class="s3">\n  </span><span class="s1">verticalPos += lineHeight;</span><span class="s3">\n  </span><span class="s1">bottomLine.attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">divider</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">x1</span><span class="s3">\&quot;</span><span class="s1">, -maxWidth / 2 - halfPadding).attr(</span><span class="s3">\&quot;</span><span class="s1">x2</span><span class="s3">\&quot;</span><span class="s1">, maxWidth / 2 + halfPadding).attr(</span><span class="s3">\&quot;</span><span class="s1">y1</span><span class="s3">\&quot;</span><span class="s1">, -maxHeight / 2 - halfPadding + lineHeight + verticalPos).attr(</span><span class="s3">\&quot;</span><span class="s1">y2</span><span class="s3">\&quot;</span><span class="s1">, -maxHeight / 2 - halfPadding + lineHeight + verticalPos);</span><span class="s3">\n  </span><span class="s1">verticalPos += lineHeight;</span><span class="s3">\n  </span><span class="s1">classMethods.forEach((lbl) =&gt; {</span><span class="s3">\n    </span><span class="s1">select4(lbl).attr(</span><span class="s3">\n      \&quot;</span><span class="s1">transform</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n      \&quot;</span><span class="s1">translate( </span><span class="s3">\&quot; </span><span class="s1">+ -maxWidth / 2 + </span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot; </span><span class="s1">+ (-1 * maxHeight / 2 + verticalPos) + </span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\&quot;\n    </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">const memberBBox = lbl?.getBBox();</span><span class="s3">\n    </span><span class="s1">verticalPos += (memberBBox?.height ?? 0) + rowPadding;</span><span class="s3">\n  </span><span class="s1">});</span><span class="s3">\n  </span><span class="s1">rect2.attr(</span><span class="s3">\&quot;</span><span class="s1">style</span><span class="s3">\&quot;</span><span class="s1">, node.style).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">outer title-state</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">x</span><span class="s3">\&quot;</span><span class="s1">, -maxWidth / 2 - halfPadding).attr(</span><span class="s3">\&quot;</span><span class="s1">y</span><span class="s3">\&quot;</span><span class="s1">, -(maxHeight / 2) - halfPadding).attr(</span><span class="s3">\&quot;</span><span class="s1">width</span><span class="s3">\&quot;</span><span class="s1">, maxWidth + node.padding).attr(</span><span class="s3">\&quot;</span><span class="s1">height</span><span class="s3">\&quot;</span><span class="s1">, maxHeight + node.padding);</span><span class="s3">\n  </span><span class="s1">updateNodeBounds(node, rect2);</span><span class="s3">\n  </span><span class="s1">node.intersect = function(point2) {</span><span class="s3">\n    </span><span class="s1">return intersect_default.rect(node, point2);</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">return shapeSvg;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">class_box</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var shapes = {</span><span class="s3">\n  </span><span class="s1">rhombus: question,</span><span class="s3">\n  </span><span class="s1">composite,</span><span class="s3">\n  </span><span class="s1">question,</span><span class="s3">\n  </span><span class="s1">rect,</span><span class="s3">\n  </span><span class="s1">labelRect,</span><span class="s3">\n  </span><span class="s1">rectWithTitle,</span><span class="s3">\n  </span><span class="s1">choice,</span><span class="s3">\n  </span><span class="s1">circle: circle2,</span><span class="s3">\n  </span><span class="s1">doublecircle,</span><span class="s3">\n  </span><span class="s1">stadium,</span><span class="s3">\n  </span><span class="s1">hexagon,</span><span class="s3">\n  </span><span class="s1">block_arrow,</span><span class="s3">\n  </span><span class="s1">rect_left_inv_arrow,</span><span class="s3">\n  </span><span class="s1">lean_right,</span><span class="s3">\n  </span><span class="s1">lean_left,</span><span class="s3">\n  </span><span class="s1">trapezoid,</span><span class="s3">\n  </span><span class="s1">inv_trapezoid,</span><span class="s3">\n  </span><span class="s1">rect_right_inv_arrow,</span><span class="s3">\n  </span><span class="s1">cylinder,</span><span class="s3">\n  </span><span class="s1">start,</span><span class="s3">\n  </span><span class="s1">end,</span><span class="s3">\n  </span><span class="s1">note: note_default,</span><span class="s3">\n  </span><span class="s1">subroutine,</span><span class="s3">\n  </span><span class="s1">fork: forkJoin,</span><span class="s3">\n  </span><span class="s1">join: forkJoin,</span><span class="s3">\n  </span><span class="s1">class_box</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n</span><span class="s1">var nodeElems = {};</span><span class="s3">\n</span><span class="s1">var insertNode = /* @__PURE__ */ __name(async (elem, node, renderOptions) =&gt; {</span><span class="s3">\n  </span><span class="s1">let newEl;</span><span class="s3">\n  </span><span class="s1">let el;</span><span class="s3">\n  </span><span class="s1">if (node.link) {</span><span class="s3">\n    </span><span class="s1">let target;</span><span class="s3">\n    </span><span class="s1">if (getConfig2().securityLevel === </span><span class="s3">\&quot;</span><span class="s1">sandbox</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">target = </span><span class="s3">\&quot;</span><span class="s1">_top</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n    </span><span class="s1">} else if (node.linkTarget) {</span><span class="s3">\n      </span><span class="s1">target = node.linkTarget || </span><span class="s3">\&quot;</span><span class="s1">_blank</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">newEl = elem.insert(</span><span class="s3">\&quot;</span><span class="s1">svg:a</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">xlink:href</span><span class="s3">\&quot;</span><span class="s1">, node.link).attr(</span><span class="s3">\&quot;</span><span class="s1">target</span><span class="s3">\&quot;</span><span class="s1">, target);</span><span class="s3">\n    </span><span class="s1">el = await shapes[node.shape](newEl, node, renderOptions);</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">el = await shapes[node.shape](elem, node, renderOptions);</span><span class="s3">\n    </span><span class="s1">newEl = el;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (node.tooltip) {</span><span class="s3">\n    </span><span class="s1">el.attr(</span><span class="s3">\&quot;</span><span class="s1">title</span><span class="s3">\&quot;</span><span class="s1">, node.tooltip);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (node.class) {</span><span class="s3">\n    </span><span class="s1">el.attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">node default </span><span class="s3">\&quot; </span><span class="s1">+ node.class);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">nodeElems[node.id] = newEl;</span><span class="s3">\n  </span><span class="s1">if (node.haveCallback) {</span><span class="s3">\n    </span><span class="s1">nodeElems[node.id].attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, nodeElems[node.id].attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">) + </span><span class="s3">\&quot; </span><span class="s1">clickable</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return newEl;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">insertNode</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var positionNode = /* @__PURE__ */ __name((node) =&gt; {</span><span class="s3">\n  </span><span class="s1">const el = nodeElems[node.id];</span><span class="s3">\n  </span><span class="s1">log.trace(</span><span class="s3">\n    \&quot;</span><span class="s1">Transforming node</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n    </span><span class="s1">node.diff,</span><span class="s3">\n    </span><span class="s1">node,</span><span class="s3">\n    \&quot;</span><span class="s1">translate(</span><span class="s3">\&quot; </span><span class="s1">+ (node.x - node.width / 2 - 5) + </span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot; </span><span class="s1">+ node.width / 2 + </span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\&quot;\n  </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const padding2 = 8;</span><span class="s3">\n  </span><span class="s1">const diff = node.diff || 0;</span><span class="s3">\n  </span><span class="s1">if (node.clusterNode) {</span><span class="s3">\n    </span><span class="s1">el.attr(</span><span class="s3">\n      \&quot;</span><span class="s1">transform</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n      \&quot;</span><span class="s1">translate(</span><span class="s3">\&quot; </span><span class="s1">+ (node.x + diff - node.width / 2) + </span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot; </span><span class="s1">+ (node.y - node.height / 2 - padding2) + </span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\&quot;\n    </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">el.attr(</span><span class="s3">\&quot;</span><span class="s1">transform</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">translate(</span><span class="s3">\&quot; </span><span class="s1">+ node.x + </span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot; </span><span class="s1">+ node.y + </span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return diff;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">positionNode</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n\n</span><span class="s1">// src/diagrams/block/renderHelpers.ts</span><span class="s3">\n</span><span class="s1">function getNodeFromBlock(block, db2, positioned = false) {</span><span class="s3">\n  </span><span class="s1">const vertex = block;</span><span class="s3">\n  </span><span class="s1">let classStr = </span><span class="s3">\&quot;</span><span class="s1">default</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">if ((vertex?.classes?.length || 0) &gt; 0) {</span><span class="s3">\n    </span><span class="s1">classStr = (vertex?.classes ?? []).join(</span><span class="s3">\&quot; \&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">classStr = classStr + </span><span class="s3">\&quot; </span><span class="s1">flowchart-label</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">let radius = 0;</span><span class="s3">\n  </span><span class="s1">let shape = </span><span class="s3">\&quot;\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">let padding2;</span><span class="s3">\n  </span><span class="s1">switch (vertex.type) {</span><span class="s3">\n    </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">round</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n      </span><span class="s1">radius = 5;</span><span class="s3">\n      </span><span class="s1">shape = </span><span class="s3">\&quot;</span><span class="s1">rect</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n      </span><span class="s1">break;</span><span class="s3">\n    </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">composite</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n      </span><span class="s1">radius = 0;</span><span class="s3">\n      </span><span class="s1">shape = </span><span class="s3">\&quot;</span><span class="s1">composite</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n      </span><span class="s1">padding2 = 0;</span><span class="s3">\n      </span><span class="s1">break;</span><span class="s3">\n    </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">square</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n      </span><span class="s1">shape = </span><span class="s3">\&quot;</span><span class="s1">rect</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n      </span><span class="s1">break;</span><span class="s3">\n    </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">diamond</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n      </span><span class="s1">shape = </span><span class="s3">\&quot;</span><span class="s1">question</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n      </span><span class="s1">break;</span><span class="s3">\n    </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">hexagon</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n      </span><span class="s1">shape = </span><span class="s3">\&quot;</span><span class="s1">hexagon</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n      </span><span class="s1">break;</span><span class="s3">\n    </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">block_arrow</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n      </span><span class="s1">shape = </span><span class="s3">\&quot;</span><span class="s1">block_arrow</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n      </span><span class="s1">break;</span><span class="s3">\n    </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">odd</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n      </span><span class="s1">shape = </span><span class="s3">\&quot;</span><span class="s1">rect_left_inv_arrow</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n      </span><span class="s1">break;</span><span class="s3">\n    </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">lean_right</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n      </span><span class="s1">shape = </span><span class="s3">\&quot;</span><span class="s1">lean_right</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n      </span><span class="s1">break;</span><span class="s3">\n    </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">lean_left</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n      </span><span class="s1">shape = </span><span class="s3">\&quot;</span><span class="s1">lean_left</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n      </span><span class="s1">break;</span><span class="s3">\n    </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">trapezoid</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n      </span><span class="s1">shape = </span><span class="s3">\&quot;</span><span class="s1">trapezoid</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n      </span><span class="s1">break;</span><span class="s3">\n    </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">inv_trapezoid</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n      </span><span class="s1">shape = </span><span class="s3">\&quot;</span><span class="s1">inv_trapezoid</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n      </span><span class="s1">break;</span><span class="s3">\n    </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">rect_left_inv_arrow</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n      </span><span class="s1">shape = </span><span class="s3">\&quot;</span><span class="s1">rect_left_inv_arrow</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n      </span><span class="s1">break;</span><span class="s3">\n    </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">circle</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n      </span><span class="s1">shape = </span><span class="s3">\&quot;</span><span class="s1">circle</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n      </span><span class="s1">break;</span><span class="s3">\n    </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">ellipse</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n      </span><span class="s1">shape = </span><span class="s3">\&quot;</span><span class="s1">ellipse</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n      </span><span class="s1">break;</span><span class="s3">\n    </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">stadium</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n      </span><span class="s1">shape = </span><span class="s3">\&quot;</span><span class="s1">stadium</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n      </span><span class="s1">break;</span><span class="s3">\n    </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">subroutine</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n      </span><span class="s1">shape = </span><span class="s3">\&quot;</span><span class="s1">subroutine</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n      </span><span class="s1">break;</span><span class="s3">\n    </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">cylinder</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n      </span><span class="s1">shape = </span><span class="s3">\&quot;</span><span class="s1">cylinder</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n      </span><span class="s1">break;</span><span class="s3">\n    </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">group</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n      </span><span class="s1">shape = </span><span class="s3">\&quot;</span><span class="s1">rect</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n      </span><span class="s1">break;</span><span class="s3">\n    </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">doublecircle</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n      </span><span class="s1">shape = </span><span class="s3">\&quot;</span><span class="s1">doublecircle</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n      </span><span class="s1">break;</span><span class="s3">\n    </span><span class="s1">default:</span><span class="s3">\n      </span><span class="s1">shape = </span><span class="s3">\&quot;</span><span class="s1">rect</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">const styles = getStylesFromArray(vertex?.styles ?? []);</span><span class="s3">\n  </span><span class="s1">const vertexText = vertex.label;</span><span class="s3">\n  </span><span class="s1">const bounds = vertex.size ?? { width: 0, height: 0, x: 0, y: 0 };</span><span class="s3">\n  </span><span class="s1">const node = {</span><span class="s3">\n    </span><span class="s1">labelStyle: styles.labelStyle,</span><span class="s3">\n    </span><span class="s1">shape,</span><span class="s3">\n    </span><span class="s1">labelText: vertexText,</span><span class="s3">\n    </span><span class="s1">rx: radius,</span><span class="s3">\n    </span><span class="s1">ry: radius,</span><span class="s3">\n    </span><span class="s1">class: classStr,</span><span class="s3">\n    </span><span class="s1">style: styles.style,</span><span class="s3">\n    </span><span class="s1">id: vertex.id,</span><span class="s3">\n    </span><span class="s1">directions: vertex.directions,</span><span class="s3">\n    </span><span class="s1">width: bounds.width,</span><span class="s3">\n    </span><span class="s1">height: bounds.height,</span><span class="s3">\n    </span><span class="s1">x: bounds.x,</span><span class="s3">\n    </span><span class="s1">y: bounds.y,</span><span class="s3">\n    </span><span class="s1">positioned,</span><span class="s3">\n    </span><span class="s1">intersect: void 0,</span><span class="s3">\n    </span><span class="s1">type: vertex.type,</span><span class="s3">\n    </span><span class="s1">padding: padding2 ?? getConfig()?.block?.padding ?? 0</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">return node;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">__name(getNodeFromBlock, </span><span class="s3">\&quot;</span><span class="s1">getNodeFromBlock</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">async function calculateBlockSize(elem, block, db2) {</span><span class="s3">\n  </span><span class="s1">const node = getNodeFromBlock(block, db2, false);</span><span class="s3">\n  </span><span class="s1">if (node.type === </span><span class="s3">\&quot;</span><span class="s1">group</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">return;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">const config2 = getConfig();</span><span class="s3">\n  </span><span class="s1">const nodeEl = await insertNode(elem, node, { config: config2 });</span><span class="s3">\n  </span><span class="s1">const boundingBox = nodeEl.node().getBBox();</span><span class="s3">\n  </span><span class="s1">const obj = db2.getBlock(node.id);</span><span class="s3">\n  </span><span class="s1">obj.size = { width: boundingBox.width, height: boundingBox.height, x: 0, y: 0, node: nodeEl };</span><span class="s3">\n  </span><span class="s1">db2.setBlock(obj);</span><span class="s3">\n  </span><span class="s1">nodeEl.remove();</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">__name(calculateBlockSize, </span><span class="s3">\&quot;</span><span class="s1">calculateBlockSize</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">async function insertBlockPositioned(elem, block, db2) {</span><span class="s3">\n  </span><span class="s1">const node = getNodeFromBlock(block, db2, true);</span><span class="s3">\n  </span><span class="s1">const obj = db2.getBlock(node.id);</span><span class="s3">\n  </span><span class="s1">if (obj.type !== </span><span class="s3">\&quot;</span><span class="s1">space</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">const config2 = getConfig();</span><span class="s3">\n    </span><span class="s1">await insertNode(elem, node, { config: config2 });</span><span class="s3">\n    </span><span class="s1">block.intersect = node?.intersect;</span><span class="s3">\n    </span><span class="s1">positionNode(node);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">__name(insertBlockPositioned, </span><span class="s3">\&quot;</span><span class="s1">insertBlockPositioned</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">async function performOperations(elem, blocks2, db2, operation) {</span><span class="s3">\n  </span><span class="s1">for (const block of blocks2) {</span><span class="s3">\n    </span><span class="s1">await operation(elem, block, db2);</span><span class="s3">\n    </span><span class="s1">if (block.children) {</span><span class="s3">\n      </span><span class="s1">await performOperations(elem, block.children, db2, operation);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">__name(performOperations, </span><span class="s3">\&quot;</span><span class="s1">performOperations</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">async function calculateBlockSizes(elem, blocks2, db2) {</span><span class="s3">\n  </span><span class="s1">await performOperations(elem, blocks2, db2, calculateBlockSize);</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">__name(calculateBlockSizes, </span><span class="s3">\&quot;</span><span class="s1">calculateBlockSizes</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">async function insertBlocks(elem, blocks2, db2) {</span><span class="s3">\n  </span><span class="s1">await performOperations(elem, blocks2, db2, insertBlockPositioned);</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">__name(insertBlocks, </span><span class="s3">\&quot;</span><span class="s1">insertBlocks</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">async function insertEdges(elem, edges, blocks2, db2, id) {</span><span class="s3">\n  </span><span class="s1">const g = new graphlib.Graph({</span><span class="s3">\n    </span><span class="s1">multigraph: true,</span><span class="s3">\n    </span><span class="s1">compound: true</span><span class="s3">\n  </span><span class="s1">});</span><span class="s3">\n  </span><span class="s1">g.setGraph({</span><span class="s3">\n    </span><span class="s1">rankdir: </span><span class="s3">\&quot;</span><span class="s1">TB</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n    </span><span class="s1">nodesep: 10,</span><span class="s3">\n    </span><span class="s1">ranksep: 10,</span><span class="s3">\n    </span><span class="s1">marginx: 8,</span><span class="s3">\n    </span><span class="s1">marginy: 8</span><span class="s3">\n  </span><span class="s1">});</span><span class="s3">\n  </span><span class="s1">for (const block of blocks2) {</span><span class="s3">\n    </span><span class="s1">if (block.size) {</span><span class="s3">\n      </span><span class="s1">g.setNode(block.id, {</span><span class="s3">\n        </span><span class="s1">width: block.size.width,</span><span class="s3">\n        </span><span class="s1">height: block.size.height,</span><span class="s3">\n        </span><span class="s1">intersect: block.intersect</span><span class="s3">\n      </span><span class="s1">});</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">for (const edge of edges) {</span><span class="s3">\n    </span><span class="s1">if (edge.start &amp;&amp; edge.end) {</span><span class="s3">\n      </span><span class="s1">const startBlock = db2.getBlock(edge.start);</span><span class="s3">\n      </span><span class="s1">const endBlock = db2.getBlock(edge.end);</span><span class="s3">\n      </span><span class="s1">if (startBlock?.size &amp;&amp; endBlock?.size) {</span><span class="s3">\n        </span><span class="s1">const start2 = startBlock.size;</span><span class="s3">\n        </span><span class="s1">const end2 = endBlock.size;</span><span class="s3">\n        </span><span class="s1">const points = [</span><span class="s3">\n          </span><span class="s1">{ x: start2.x, y: start2.y },</span><span class="s3">\n          </span><span class="s1">{ x: start2.x + (end2.x - start2.x) / 2, y: start2.y + (end2.y - start2.y) / 2 },</span><span class="s3">\n          </span><span class="s1">{ x: end2.x, y: end2.y }</span><span class="s3">\n        </span><span class="s1">];</span><span class="s3">\n        </span><span class="s1">insertEdge(</span><span class="s3">\n          </span><span class="s1">elem,</span><span class="s3">\n          </span><span class="s1">{ v: edge.start, w: edge.end, name: edge.id },</span><span class="s3">\n          </span><span class="s1">{</span><span class="s3">\n            </span><span class="s1">...edge,</span><span class="s3">\n            </span><span class="s1">arrowTypeEnd: edge.arrowTypeEnd,</span><span class="s3">\n            </span><span class="s1">arrowTypeStart: edge.arrowTypeStart,</span><span class="s3">\n            </span><span class="s1">points,</span><span class="s3">\n            </span><span class="s1">classes: </span><span class="s3">\&quot;</span><span class="s1">edge-thickness-normal edge-pattern-solid flowchart-link LS-a1 LE-b1</span><span class="s3">\&quot;\n          </span><span class="s1">},</span><span class="s3">\n          </span><span class="s1">void 0,</span><span class="s3">\n          \&quot;</span><span class="s1">block</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n          </span><span class="s1">g,</span><span class="s3">\n          </span><span class="s1">id</span><span class="s3">\n        </span><span class="s1">);</span><span class="s3">\n        </span><span class="s1">if (edge.label) {</span><span class="s3">\n          </span><span class="s1">await insertEdgeLabel(elem, {</span><span class="s3">\n            </span><span class="s1">...edge,</span><span class="s3">\n            </span><span class="s1">label: edge.label,</span><span class="s3">\n            </span><span class="s1">labelStyle: </span><span class="s3">\&quot;</span><span class="s1">stroke: #333; stroke-width: 1.5px;fill:none;</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n            </span><span class="s1">arrowTypeEnd: edge.arrowTypeEnd,</span><span class="s3">\n            </span><span class="s1">arrowTypeStart: edge.arrowTypeStart,</span><span class="s3">\n            </span><span class="s1">points,</span><span class="s3">\n            </span><span class="s1">classes: </span><span class="s3">\&quot;</span><span class="s1">edge-thickness-normal edge-pattern-solid flowchart-link LS-a1 LE-b1</span><span class="s3">\&quot;\n          </span><span class="s1">});</span><span class="s3">\n          </span><span class="s1">positionEdgeLabel(</span><span class="s3">\n            </span><span class="s1">{ ...edge, x: points[1].x, y: points[1].y },</span><span class="s3">\n            </span><span class="s1">{</span><span class="s3">\n              </span><span class="s1">originalPath: points</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">);</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">__name(insertEdges, </span><span class="s3">\&quot;</span><span class="s1">insertEdges</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n\n</span><span class="s1">// src/diagrams/block/blockRenderer.ts</span><span class="s3">\n</span><span class="s1">var getClasses2 = /* @__PURE__ */ __name(function(text, diagObj) {</span><span class="s3">\n  </span><span class="s1">return diagObj.db.getClasses();</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">getClasses</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var draw = /* @__PURE__ */ __name(async function(text, id, _version, diagObj) {</span><span class="s3">\n  </span><span class="s1">const { securityLevel, block: conf } = getConfig();</span><span class="s3">\n  </span><span class="s1">const db2 = diagObj.db;</span><span class="s3">\n  </span><span class="s1">let sandboxElement;</span><span class="s3">\n  </span><span class="s1">if (securityLevel === </span><span class="s3">\&quot;</span><span class="s1">sandbox</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">sandboxElement = d3select(</span><span class="s3">\&quot;</span><span class="s1">#i</span><span class="s3">\&quot; </span><span class="s1">+ id);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">const root = securityLevel === </span><span class="s3">\&quot;</span><span class="s1">sandbox</span><span class="s3">\&quot; </span><span class="s1">? d3select(sandboxElement.nodes()[0].contentDocument.body) : d3select(</span><span class="s3">\&quot;</span><span class="s1">body</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const svg = securityLevel === </span><span class="s3">\&quot;</span><span class="s1">sandbox</span><span class="s3">\&quot; </span><span class="s1">? root.select(`[id=</span><span class="s3">\&quot;</span><span class="s1">${id}</span><span class="s3">\&quot;</span><span class="s1">]`) : d3select(`[id=</span><span class="s3">\&quot;</span><span class="s1">${id}</span><span class="s3">\&quot;</span><span class="s1">]`);</span><span class="s3">\n  </span><span class="s1">const markers2 = [</span><span class="s3">\&quot;</span><span class="s1">point</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">circle</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">cross</span><span class="s3">\&quot;</span><span class="s1">];</span><span class="s3">\n  </span><span class="s1">markers_default(svg, markers2, diagObj.type, id);</span><span class="s3">\n  </span><span class="s1">const bl = db2.getBlocks();</span><span class="s3">\n  </span><span class="s1">const blArr = db2.getBlocksFlat();</span><span class="s3">\n  </span><span class="s1">const edges = db2.getEdges();</span><span class="s3">\n  </span><span class="s1">const nodes = svg.insert(</span><span class="s3">\&quot;</span><span class="s1">g</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">block</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">await calculateBlockSizes(nodes, bl, db2);</span><span class="s3">\n  </span><span class="s1">const bounds = layout(db2);</span><span class="s3">\n  </span><span class="s1">await insertBlocks(nodes, bl, db2);</span><span class="s3">\n  </span><span class="s1">await insertEdges(nodes, edges, blArr, db2, id);</span><span class="s3">\n  </span><span class="s1">if (bounds) {</span><span class="s3">\n    </span><span class="s1">const bounds2 = bounds;</span><span class="s3">\n    </span><span class="s1">const magicFactor = Math.max(1, Math.round(0.125 * (bounds2.width / bounds2.height)));</span><span class="s3">\n    </span><span class="s1">const height = bounds2.height + magicFactor + 10;</span><span class="s3">\n    </span><span class="s1">const width = bounds2.width + 10;</span><span class="s3">\n    </span><span class="s1">const { useMaxWidth } = conf;</span><span class="s3">\n    </span><span class="s1">configureSvgSize(svg, height, width, !!useMaxWidth);</span><span class="s3">\n    </span><span class="s1">log.debug(</span><span class="s3">\&quot;</span><span class="s1">Here Bounds</span><span class="s3">\&quot;</span><span class="s1">, bounds, bounds2);</span><span class="s3">\n    </span><span class="s1">svg.attr(</span><span class="s3">\n      \&quot;</span><span class="s1">viewBox</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n      </span><span class="s1">`${bounds2.x - 5} ${bounds2.y - 5} ${bounds2.width + 10} ${bounds2.height + 10}`</span><span class="s3">\n    </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">draw</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var blockRenderer_default = {</span><span class="s3">\n  </span><span class="s1">draw,</span><span class="s3">\n  </span><span class="s1">getClasses: getClasses2</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n\n</span><span class="s1">// src/diagrams/block/blockDiagram.ts</span><span class="s3">\n</span><span class="s1">var diagram = {</span><span class="s3">\n  </span><span class="s1">parser: block_default,</span><span class="s3">\n  </span><span class="s1">db: blockDB_default,</span><span class="s3">\n  </span><span class="s1">renderer: blockRenderer_default,</span><span class="s3">\n  </span><span class="s1">styles: styles_default</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n</span><span class="s1">export {</span><span class="s3">\n  </span><span class="s1">diagram</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[],</span><span class="s1">&quot;sourceRoot&quot;</span><span class="s0">:</span><span class="s1">&quot;&quot;</span><span class="s0">}</span></pre>
</body>
</html>