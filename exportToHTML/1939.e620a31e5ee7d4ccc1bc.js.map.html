<html>
<head>
<title>1939.e620a31e5ee7d4ccc1bc.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #bcbec4;}
.s1 { color: #6aab73;}
.s2 { color: #2aacb8;}
.s3 { color: #cf8e6d;}
.ln { color: #4b5059; font-weight: normal; font-style: normal; }
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
1939.e620a31e5ee7d4ccc1bc.js.map</font>
</center></td></tr></table>
<pre><a name="l1"><span class="ln">1    </span></a><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;file&quot;</span><span class="s0">:</span><span class="s1">&quot;1939.e620a31e5ee7d4ccc1bc.js?v=e620a31e5ee7d4ccc1bc&quot;</span><span class="s0">,</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;;;;;;;;;;;;AAG8B;;AAE9B;AACsD;AACtD,+BAA+B,qEAAM;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,yCAAyC,qEAAM;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,+BAA+B,qEAAM;AACrC,sCAAsC,yEAAc;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,gCAAgC,qEAAM;AACtC;AACA;AACA;AACA,wBAAwB,6EAAW;AACnC;AACA,CAAC;AACD,wCAAwC,qEAAM;AAC9C;AACA;AACA;AACA,wBAAwB,6EAAW;AACnC,sCAAsC,cAAc;AACpD,CAAC;AACD,kCAAkC,qEAAM;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,iCAAiC,qEAAM;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAUC;;;;;;;;;;;;;;AC7G4B;AAYA;;AAE9B;AACA;AACA,0BAA0B,qEAAM;AAChC,sBAAsB,gBAAgB,KAAK;AAC3C;AACA,GAAG;AACH;AACA,2BAA2B,qEAAM;AACjC,KAAK;AACL,UAAU;AACV,gBAAgB,2TAA2T;AAC3U,kBAAkB,4OAA4O;AAC9P;AACA,mCAAmC,qEAAM;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,cAAc,iBAAiB,IAAI,QAAQ,mBAAmB,MAAM,KAAK,oGAAoG,mBAAmB,WAAW,qBAAqB,6DAA6D,oDAAoD,aAAa,IAAI,aAAa,sCAAsC,aAAa;AACla,sBAAsB;AACtB,gCAAgC,qEAAM;AACtC;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA,KAAK;AACL,2BAA2B,qEAAM;AACjC;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,qEAAM;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,qEAAM;AACZ,iEAAiE;AACjE;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,kCAAkC,qEAAM;AACxC;AACA;AACA,UAAU;AACV;AACA;AACA,OAAO;AACP;AACA,gCAAgC,qEAAM;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,6BAA6B,qEAAM;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,6BAA6B,qEAAM;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,4BAA4B,qEAAM;AAClC;AACA;AACA,OAAO;AACP;AACA,8BAA8B,qEAAM;AACpC;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,OAAO;AACP;AACA,4BAA4B,qEAAM;AAClC;AACA,OAAO;AACP;AACA,iCAAiC,qEAAM;AACvC;AACA;AACA,OAAO;AACP;AACA,qCAAqC,qEAAM;AAC3C;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,oCAAoC,qEAAM;AAC1C;AACA;AACA;AACA,OAAO;AACP;AACA,kCAAkC,qEAAM;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,4BAA4B,qEAAM;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,kBAAkB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA,gBAAgB;AAChB;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,OAAO;AACP;AACA,2BAA2B,qEAAM;AACjC;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,OAAO;AACP;AACA,6BAA6B,qEAAM;AACnC;AACA,OAAO;AACP;AACA,gCAAgC,qEAAM;AACtC;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,OAAO;AACP;AACA,qCAAqC,qEAAM;AAC3C;AACA;AACA,UAAU;AACV;AACA;AACA,OAAO;AACP,4DAA4D;AAC5D,gCAAgC,qEAAM;AACtC;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,OAAO;AACP;AACA,iCAAiC,qEAAM;AACvC;AACA,OAAO;AACP;AACA,sCAAsC,qEAAM;AAC5C;AACA,OAAO;AACP,iBAAiB,0BAA0B;AAC3C,qCAAqC,qEAAM;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,yBAAyB,qBAAqB,gGAAgG,6HAA6H,gBAAgB,eAAe,4BAA4B,mBAAmB,mBAAmB;AAC5W,oBAAoB,yBAAyB,uCAAuC,iBAAiB,mCAAmC,iBAAiB,kCAAkC,eAAe;AAC1M;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,EAAE,qEAAM;AACR;AACA;AACA;AACA,CAAC;AACD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,6BAA6B,qEAAM;AACnC;AACA;AACA;AACA;AACA,EAAE,oEAAK;AACP,CAAC;AACD,iCAAiC,qEAAM;AACvC;AACA;AACA,CAAC;AACD,kCAAkC,qEAAM;AACxC;AACA,CAAC;AACD,+BAA+B,qEAAM;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,mCAAmC,qEAAM;AACzC;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,CAAC;AACD,8BAA8B,qEAAM;AACpC;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,iCAAiC,qEAAM;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,mCAAmC,qEAAM;AACzC,sCAAsC,qEAAM;AAC5C;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,gCAAgC,qEAAM;AACtC;AACA,CAAC;AACD;AACA,6BAA6B,qEAAM,OAAO,yEAAS;AACnD;AACA,iBAAiB;AACjB,iBAAiB;AACjB,aAAa;AACb,aAAa;AACb,mBAAmB;AACnB,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gCAAgC,qEAAM;AACtC,mBAAmB;AACnB,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA,cAAc;AACd;;AAEA;AACA,YAAY;AACZ,mBAAmB;AACnB;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA,MAAM,6BAA6B,kBAAkB;AACrD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,YAAY;AACZ;;AAEA;AACA,cAAc;AACd;AACA;;AAEA;AACA,cAAc;AACd;AACA;;AAEA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,YAAY;AACZ;;AAEA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA,kBAAkB;AAClB,wBAAwB;AACxB;AACA;AACA;AACA;;AAEA;AACA,MAAM,6BAA6B,kBAAkB;AACrD;AACA;AACA,MAAM,6BAA6B,kBAAkB;AACrD;AACA;AACA,MAAM,6BAA6B,kBAAkB;AACrD;AACA;AACA,MAAM,6BAA6B,kBAAkB;AACrD;AACA;AACA,MAAM,6BAA6B,kBAAkB;AACrD;AACA;AACA,MAAM,6BAA6B,kBAAkB;AACrD;AACA;AACA,MAAM,6BAA6B,kBAAkB;AACrD;AACA;AACA,MAAM,6BAA6B,kBAAkB;AACrD;;AAEA;AACA,MAAM,0BAA0B,eAAe;AAC/C;AACA;AACA,MAAM,0BAA0B,eAAe;AAC/C;AACA;AACA,MAAM,0BAA0B,eAAe;AAC/C;AACA;AACA,MAAM,0BAA0B,eAAe;AAC/C;AACA;AACA,MAAM,0BAA0B,eAAe;AAC/C;AACA;AACA,MAAM,0BAA0B,eAAe;AAC/C;AACA;AACA;;AAEA;AAC4B;;AAE5B;AACkC;AAClC,gCAAgC,qEAAM;AACtC,SAAS,uEAAQ;AACjB,CAAC;AACD,+BAA+B,qEAAM;AACrC;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,kDAAK;AACrB;AACA;AACA,EAAE,qEAAM;AACR;AACA,gBAAgB,kDAAK;AACrB;AACA;AACA,EAAE,qEAAM;AACR;AACA;AACA;AACA,EAAE,qEAAM;AACR;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA;AACA,CAAC;AACD,iCAAiC,qEAAM;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,gCAAgC,qEAAM;AACtC,SAAS,uEAAQ;AACjB,CAAC;AACD,gCAAgC,qEAAM;AACtC;AACA;AACA;AACA,EAAE,qEAAM;AACR;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,kCAAkC,qEAAM;AACxC;AACA,eAAe,0EAAW;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,sDAAsD;AAC5D;AACA;AACA;AACA,CAAC;AACD;AACA,+BAA+B,qEAAM;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,eAAe,0EAAW;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,eAAe;AACrB;AACA;AACA;AACA,CAAC;AACD,0CAA0C,qEAAM;AAChD,EAAE,gFAAkB;AACpB,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,EAAE,qEAAM;AACR;AACA,YAAY,+BAA+B;AAC3C;AACA,oBAAoB,kBAAkB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,qEAAM;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,qEAAM;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,qEAAM;AACR;AACA;AACA;AACA,CAAC;AACD,mCAAmC,qEAAM;AACzC;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,8BAA8B,qEAAM;AACpC;AACA;AACA;AACA,GAAG;AACH,CAAC;AACD;AACA;AACA,gBAAgB,yEAAS;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,qEAAM;AACN,WAAW,yEAAS;AACpB;AACA,2BAA2B,qEAAM;AACjC,gBAAgB,yEAAS;AACzB,wBAAwB,yEAAS;AACjC;AACA;AACA,qBAAqB,oDAAM;AAC3B;AACA,6CAA6C,oDAAM,mDAAmD,oDAAM;AAC5G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,+EAAgB;AAClB;AACA;AACA,8BAA8B,YAAY,MAAM,OAAO,EAAE,2BAA2B;AACpF;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,wBAAwB,qEAAM;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,6BAA6B,qEAAM;AACnC;AACA;AACA,MAAM;AACN;AACA;AACA,GAAG;AACH,gCAAgC,qEAAM;AACtC,kBAAkB,yEAAS;AAC3B;AACA;AACA;AACA,6BAA6B,qEAAM;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,IAAI,qEAAM;AACV;AACA,GAAG;AACH,0BAA0B,qEAAM;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,mCAAmC,qEAAM;AACzC;AACA;AACA,GAAG;AACH,kCAAkC,qEAAM;AACxC;AACA,GAAG;AACH,6BAA6B,qEAAM;AACnC;AACA,GAAG;AACH;AACA;AACA;AACA,gCAAgC,qEAAM;AACtC,gBAAgB,yEAAS;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,2BAA2B;AACzD;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,IAAI;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,qEAAM;AAC9B;AACA;AACA,GAAG;AACH;AAGE&quot;</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/mermaid/dist/chunks/mermaid.core/chunk-D6G4REZN.mjs&quot;</span><span class="s0">,</span><span class="s1">&quot;webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/mermaid/dist/chunks/mermaid.core/journeyDiagram-U35MCT3I.mjs&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import {</span><span class="s3">\n  </span><span class="s1">__name,</span><span class="s3">\n  </span><span class="s1">lineBreakRegex</span><span class="s3">\n</span><span class="s1">} from </span><span class="s3">\&quot;</span><span class="s1">./chunk-YTJNT7DU.mjs</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n\n</span><span class="s1">// src/diagrams/common/svgDrawCommon.ts</span><span class="s3">\n</span><span class="s1">import { sanitizeUrl } from </span><span class="s3">\&quot;</span><span class="s1">@braintree/sanitize-url</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">var drawRect = /* @__PURE__ */ __name((element, rectData) =&gt; {</span><span class="s3">\n  </span><span class="s1">const rectElement = element.append(</span><span class="s3">\&quot;</span><span class="s1">rect</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">rectElement.attr(</span><span class="s3">\&quot;</span><span class="s1">x</span><span class="s3">\&quot;</span><span class="s1">, rectData.x);</span><span class="s3">\n  </span><span class="s1">rectElement.attr(</span><span class="s3">\&quot;</span><span class="s1">y</span><span class="s3">\&quot;</span><span class="s1">, rectData.y);</span><span class="s3">\n  </span><span class="s1">rectElement.attr(</span><span class="s3">\&quot;</span><span class="s1">fill</span><span class="s3">\&quot;</span><span class="s1">, rectData.fill);</span><span class="s3">\n  </span><span class="s1">rectElement.attr(</span><span class="s3">\&quot;</span><span class="s1">stroke</span><span class="s3">\&quot;</span><span class="s1">, rectData.stroke);</span><span class="s3">\n  </span><span class="s1">rectElement.attr(</span><span class="s3">\&quot;</span><span class="s1">width</span><span class="s3">\&quot;</span><span class="s1">, rectData.width);</span><span class="s3">\n  </span><span class="s1">rectElement.attr(</span><span class="s3">\&quot;</span><span class="s1">height</span><span class="s3">\&quot;</span><span class="s1">, rectData.height);</span><span class="s3">\n  </span><span class="s1">if (rectData.name) {</span><span class="s3">\n    </span><span class="s1">rectElement.attr(</span><span class="s3">\&quot;</span><span class="s1">name</span><span class="s3">\&quot;</span><span class="s1">, rectData.name);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (rectData.rx) {</span><span class="s3">\n    </span><span class="s1">rectElement.attr(</span><span class="s3">\&quot;</span><span class="s1">rx</span><span class="s3">\&quot;</span><span class="s1">, rectData.rx);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (rectData.ry) {</span><span class="s3">\n    </span><span class="s1">rectElement.attr(</span><span class="s3">\&quot;</span><span class="s1">ry</span><span class="s3">\&quot;</span><span class="s1">, rectData.ry);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (rectData.attrs !== void 0) {</span><span class="s3">\n    </span><span class="s1">for (const attrKey in rectData.attrs) {</span><span class="s3">\n      </span><span class="s1">rectElement.attr(attrKey, rectData.attrs[attrKey]);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (rectData.class) {</span><span class="s3">\n    </span><span class="s1">rectElement.attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, rectData.class);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return rectElement;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">drawRect</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var drawBackgroundRect = /* @__PURE__ */ __name((element, bounds) =&gt; {</span><span class="s3">\n  </span><span class="s1">const rectData = {</span><span class="s3">\n    </span><span class="s1">x: bounds.startx,</span><span class="s3">\n    </span><span class="s1">y: bounds.starty,</span><span class="s3">\n    </span><span class="s1">width: bounds.stopx - bounds.startx,</span><span class="s3">\n    </span><span class="s1">height: bounds.stopy - bounds.starty,</span><span class="s3">\n    </span><span class="s1">fill: bounds.fill,</span><span class="s3">\n    </span><span class="s1">stroke: bounds.stroke,</span><span class="s3">\n    </span><span class="s1">class: </span><span class="s3">\&quot;</span><span class="s1">rect</span><span class="s3">\&quot;\n  </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">const rectElement = drawRect(element, rectData);</span><span class="s3">\n  </span><span class="s1">rectElement.lower();</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">drawBackgroundRect</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var drawText = /* @__PURE__ */ __name((element, textData) =&gt; {</span><span class="s3">\n  </span><span class="s1">const nText = textData.text.replace(lineBreakRegex, </span><span class="s3">\&quot; \&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const textElem = element.append(</span><span class="s3">\&quot;</span><span class="s1">text</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">textElem.attr(</span><span class="s3">\&quot;</span><span class="s1">x</span><span class="s3">\&quot;</span><span class="s1">, textData.x);</span><span class="s3">\n  </span><span class="s1">textElem.attr(</span><span class="s3">\&quot;</span><span class="s1">y</span><span class="s3">\&quot;</span><span class="s1">, textData.y);</span><span class="s3">\n  </span><span class="s1">textElem.attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">legend</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">textElem.style(</span><span class="s3">\&quot;</span><span class="s1">text-anchor</span><span class="s3">\&quot;</span><span class="s1">, textData.anchor);</span><span class="s3">\n  </span><span class="s1">if (textData.class) {</span><span class="s3">\n    </span><span class="s1">textElem.attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, textData.class);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">const tspan = textElem.append(</span><span class="s3">\&quot;</span><span class="s1">tspan</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">tspan.attr(</span><span class="s3">\&quot;</span><span class="s1">x</span><span class="s3">\&quot;</span><span class="s1">, textData.x + textData.textMargin * 2);</span><span class="s3">\n  </span><span class="s1">tspan.text(nText);</span><span class="s3">\n  </span><span class="s1">return textElem;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">drawText</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var drawImage = /* @__PURE__ */ __name((elem, x, y, link) =&gt; {</span><span class="s3">\n  </span><span class="s1">const imageElement = elem.append(</span><span class="s3">\&quot;</span><span class="s1">image</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">imageElement.attr(</span><span class="s3">\&quot;</span><span class="s1">x</span><span class="s3">\&quot;</span><span class="s1">, x);</span><span class="s3">\n  </span><span class="s1">imageElement.attr(</span><span class="s3">\&quot;</span><span class="s1">y</span><span class="s3">\&quot;</span><span class="s1">, y);</span><span class="s3">\n  </span><span class="s1">const sanitizedLink = sanitizeUrl(link);</span><span class="s3">\n  </span><span class="s1">imageElement.attr(</span><span class="s3">\&quot;</span><span class="s1">xlink:href</span><span class="s3">\&quot;</span><span class="s1">, sanitizedLink);</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">drawImage</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var drawEmbeddedImage = /* @__PURE__ */ __name((element, x, y, link) =&gt; {</span><span class="s3">\n  </span><span class="s1">const imageElement = element.append(</span><span class="s3">\&quot;</span><span class="s1">use</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">imageElement.attr(</span><span class="s3">\&quot;</span><span class="s1">x</span><span class="s3">\&quot;</span><span class="s1">, x);</span><span class="s3">\n  </span><span class="s1">imageElement.attr(</span><span class="s3">\&quot;</span><span class="s1">y</span><span class="s3">\&quot;</span><span class="s1">, y);</span><span class="s3">\n  </span><span class="s1">const sanitizedLink = sanitizeUrl(link);</span><span class="s3">\n  </span><span class="s1">imageElement.attr(</span><span class="s3">\&quot;</span><span class="s1">xlink:href</span><span class="s3">\&quot;</span><span class="s1">, `#${sanitizedLink}`);</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">drawEmbeddedImage</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var getNoteRect = /* @__PURE__ */ __name(() =&gt; {</span><span class="s3">\n  </span><span class="s1">const noteRectData = {</span><span class="s3">\n    </span><span class="s1">x: 0,</span><span class="s3">\n    </span><span class="s1">y: 0,</span><span class="s3">\n    </span><span class="s1">width: 100,</span><span class="s3">\n    </span><span class="s1">height: 100,</span><span class="s3">\n    </span><span class="s1">fill: </span><span class="s3">\&quot;</span><span class="s1">#EDF2AE</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n    </span><span class="s1">stroke: </span><span class="s3">\&quot;</span><span class="s1">#666</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n    </span><span class="s1">anchor: </span><span class="s3">\&quot;</span><span class="s1">start</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n    </span><span class="s1">rx: 0,</span><span class="s3">\n    </span><span class="s1">ry: 0</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">return noteRectData;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">getNoteRect</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var getTextObj = /* @__PURE__ */ __name(() =&gt; {</span><span class="s3">\n  </span><span class="s1">const testObject = {</span><span class="s3">\n    </span><span class="s1">x: 0,</span><span class="s3">\n    </span><span class="s1">y: 0,</span><span class="s3">\n    </span><span class="s1">width: 100,</span><span class="s3">\n    </span><span class="s1">height: 100,</span><span class="s3">\n    \&quot;</span><span class="s1">text-anchor</span><span class="s3">\&quot;</span><span class="s1">: </span><span class="s3">\&quot;</span><span class="s1">start</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n    </span><span class="s1">style: </span><span class="s3">\&quot;</span><span class="s1">#666</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n    </span><span class="s1">textMargin: 0,</span><span class="s3">\n    </span><span class="s1">rx: 0,</span><span class="s3">\n    </span><span class="s1">ry: 0,</span><span class="s3">\n    </span><span class="s1">tspan: true</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">return testObject;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">getTextObj</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n\n</span><span class="s1">export {</span><span class="s3">\n  </span><span class="s1">drawRect,</span><span class="s3">\n  </span><span class="s1">drawBackgroundRect,</span><span class="s3">\n  </span><span class="s1">drawText,</span><span class="s3">\n  </span><span class="s1">drawImage,</span><span class="s3">\n  </span><span class="s1">drawEmbeddedImage,</span><span class="s3">\n  </span><span class="s1">getNoteRect,</span><span class="s3">\n  </span><span class="s1">getTextObj</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">,</span><span class="s1">&quot;import {</span><span class="s3">\n  </span><span class="s1">drawBackgroundRect,</span><span class="s3">\n  </span><span class="s1">drawRect,</span><span class="s3">\n  </span><span class="s1">drawText,</span><span class="s3">\n  </span><span class="s1">getNoteRect</span><span class="s3">\n</span><span class="s1">} from </span><span class="s3">\&quot;</span><span class="s1">./chunk-D6G4REZN.mjs</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">__name,</span><span class="s3">\n  </span><span class="s1">clear,</span><span class="s3">\n  </span><span class="s1">configureSvgSize,</span><span class="s3">\n  </span><span class="s1">getAccDescription,</span><span class="s3">\n  </span><span class="s1">getAccTitle,</span><span class="s3">\n  </span><span class="s1">getConfig2 as getConfig,</span><span class="s3">\n  </span><span class="s1">getDiagramTitle,</span><span class="s3">\n  </span><span class="s1">setAccDescription,</span><span class="s3">\n  </span><span class="s1">setAccTitle,</span><span class="s3">\n  </span><span class="s1">setDiagramTitle</span><span class="s3">\n</span><span class="s1">} from </span><span class="s3">\&quot;</span><span class="s1">./chunk-YTJNT7DU.mjs</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n\n</span><span class="s1">// src/diagrams/user-journey/parser/journey.jison</span><span class="s3">\n</span><span class="s1">var parser = function() {</span><span class="s3">\n  </span><span class="s1">var o = /* @__PURE__ */ __name(function(k, v, o2, l) {</span><span class="s3">\n    </span><span class="s1">for (o2 = o2 || {}, l = k.length; l--; o2[k[l]] = v) ;</span><span class="s3">\n    </span><span class="s1">return o2;</span><span class="s3">\n  </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">o</span><span class="s3">\&quot;</span><span class="s1">), $V0 = [6, 8, 10, 11, 12, 14, 16, 17, 18], $V1 = [1, 9], $V2 = [1, 10], $V3 = [1, 11], $V4 = [1, 12], $V5 = [1, 13], $V6 = [1, 14];</span><span class="s3">\n  </span><span class="s1">var parser2 = {</span><span class="s3">\n    </span><span class="s1">trace: /* @__PURE__ */ __name(function trace() {</span><span class="s3">\n    </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">trace</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n    </span><span class="s1">yy: {},</span><span class="s3">\n    </span><span class="s1">symbols_: { </span><span class="s3">\&quot;</span><span class="s1">error</span><span class="s3">\&quot;</span><span class="s1">: 2, </span><span class="s3">\&quot;</span><span class="s1">start</span><span class="s3">\&quot;</span><span class="s1">: 3, </span><span class="s3">\&quot;</span><span class="s1">journey</span><span class="s3">\&quot;</span><span class="s1">: 4, </span><span class="s3">\&quot;</span><span class="s1">document</span><span class="s3">\&quot;</span><span class="s1">: 5, </span><span class="s3">\&quot;</span><span class="s1">EOF</span><span class="s3">\&quot;</span><span class="s1">: 6, </span><span class="s3">\&quot;</span><span class="s1">line</span><span class="s3">\&quot;</span><span class="s1">: 7, </span><span class="s3">\&quot;</span><span class="s1">SPACE</span><span class="s3">\&quot;</span><span class="s1">: 8, </span><span class="s3">\&quot;</span><span class="s1">statement</span><span class="s3">\&quot;</span><span class="s1">: 9, </span><span class="s3">\&quot;</span><span class="s1">NEWLINE</span><span class="s3">\&quot;</span><span class="s1">: 10, </span><span class="s3">\&quot;</span><span class="s1">title</span><span class="s3">\&quot;</span><span class="s1">: 11, </span><span class="s3">\&quot;</span><span class="s1">acc_title</span><span class="s3">\&quot;</span><span class="s1">: 12, </span><span class="s3">\&quot;</span><span class="s1">acc_title_value</span><span class="s3">\&quot;</span><span class="s1">: 13, </span><span class="s3">\&quot;</span><span class="s1">acc_descr</span><span class="s3">\&quot;</span><span class="s1">: 14, </span><span class="s3">\&quot;</span><span class="s1">acc_descr_value</span><span class="s3">\&quot;</span><span class="s1">: 15, </span><span class="s3">\&quot;</span><span class="s1">acc_descr_multiline_value</span><span class="s3">\&quot;</span><span class="s1">: 16, </span><span class="s3">\&quot;</span><span class="s1">section</span><span class="s3">\&quot;</span><span class="s1">: 17, </span><span class="s3">\&quot;</span><span class="s1">taskName</span><span class="s3">\&quot;</span><span class="s1">: 18, </span><span class="s3">\&quot;</span><span class="s1">taskData</span><span class="s3">\&quot;</span><span class="s1">: 19, </span><span class="s3">\&quot;</span><span class="s1">$accept</span><span class="s3">\&quot;</span><span class="s1">: 0, </span><span class="s3">\&quot;</span><span class="s1">$end</span><span class="s3">\&quot;</span><span class="s1">: 1 },</span><span class="s3">\n    </span><span class="s1">terminals_: { 2: </span><span class="s3">\&quot;</span><span class="s1">error</span><span class="s3">\&quot;</span><span class="s1">, 4: </span><span class="s3">\&quot;</span><span class="s1">journey</span><span class="s3">\&quot;</span><span class="s1">, 6: </span><span class="s3">\&quot;</span><span class="s1">EOF</span><span class="s3">\&quot;</span><span class="s1">, 8: </span><span class="s3">\&quot;</span><span class="s1">SPACE</span><span class="s3">\&quot;</span><span class="s1">, 10: </span><span class="s3">\&quot;</span><span class="s1">NEWLINE</span><span class="s3">\&quot;</span><span class="s1">, 11: </span><span class="s3">\&quot;</span><span class="s1">title</span><span class="s3">\&quot;</span><span class="s1">, 12: </span><span class="s3">\&quot;</span><span class="s1">acc_title</span><span class="s3">\&quot;</span><span class="s1">, 13: </span><span class="s3">\&quot;</span><span class="s1">acc_title_value</span><span class="s3">\&quot;</span><span class="s1">, 14: </span><span class="s3">\&quot;</span><span class="s1">acc_descr</span><span class="s3">\&quot;</span><span class="s1">, 15: </span><span class="s3">\&quot;</span><span class="s1">acc_descr_value</span><span class="s3">\&quot;</span><span class="s1">, 16: </span><span class="s3">\&quot;</span><span class="s1">acc_descr_multiline_value</span><span class="s3">\&quot;</span><span class="s1">, 17: </span><span class="s3">\&quot;</span><span class="s1">section</span><span class="s3">\&quot;</span><span class="s1">, 18: </span><span class="s3">\&quot;</span><span class="s1">taskName</span><span class="s3">\&quot;</span><span class="s1">, 19: </span><span class="s3">\&quot;</span><span class="s1">taskData</span><span class="s3">\&quot; </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">productions_: [0, [3, 3], [5, 0], [5, 2], [7, 2], [7, 1], [7, 1], [7, 1], [9, 1], [9, 2], [9, 2], [9, 1], [9, 1], [9, 2]],</span><span class="s3">\n    </span><span class="s1">performAction: /* @__PURE__ */ __name(function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$) {</span><span class="s3">\n      </span><span class="s1">var $0 = $$.length - 1;</span><span class="s3">\n      </span><span class="s1">switch (yystate) {</span><span class="s3">\n        </span><span class="s1">case 1:</span><span class="s3">\n          </span><span class="s1">return $$[$0 - 1];</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 2:</span><span class="s3">\n          </span><span class="s1">this.$ = [];</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 3:</span><span class="s3">\n          </span><span class="s1">$$[$0 - 1].push($$[$0]);</span><span class="s3">\n          </span><span class="s1">this.$ = $$[$0 - 1];</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 4:</span><span class="s3">\n        </span><span class="s1">case 5:</span><span class="s3">\n          </span><span class="s1">this.$ = $$[$0];</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 6:</span><span class="s3">\n        </span><span class="s1">case 7:</span><span class="s3">\n          </span><span class="s1">this.$ = [];</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 8:</span><span class="s3">\n          </span><span class="s1">yy.setDiagramTitle($$[$0].substr(6));</span><span class="s3">\n          </span><span class="s1">this.$ = $$[$0].substr(6);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 9:</span><span class="s3">\n          </span><span class="s1">this.$ = $$[$0].trim();</span><span class="s3">\n          </span><span class="s1">yy.setAccTitle(this.$);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 10:</span><span class="s3">\n        </span><span class="s1">case 11:</span><span class="s3">\n          </span><span class="s1">this.$ = $$[$0].trim();</span><span class="s3">\n          </span><span class="s1">yy.setAccDescription(this.$);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 12:</span><span class="s3">\n          </span><span class="s1">yy.addSection($$[$0].substr(8));</span><span class="s3">\n          </span><span class="s1">this.$ = $$[$0].substr(8);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 13:</span><span class="s3">\n          </span><span class="s1">yy.addTask($$[$0 - 1], $$[$0]);</span><span class="s3">\n          </span><span class="s1">this.$ = </span><span class="s3">\&quot;</span><span class="s1">task</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">anonymous</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n    </span><span class="s1">table: [{ 3: 1, 4: [1, 2] }, { 1: [3] }, o($V0, [2, 2], { 5: 3 }), { 6: [1, 4], 7: 5, 8: [1, 6], 9: 7, 10: [1, 8], 11: $V1, 12: $V2, 14: $V3, 16: $V4, 17: $V5, 18: $V6 }, o($V0, [2, 7], { 1: [2, 1] }), o($V0, [2, 3]), { 9: 15, 11: $V1, 12: $V2, 14: $V3, 16: $V4, 17: $V5, 18: $V6 }, o($V0, [2, 5]), o($V0, [2, 6]), o($V0, [2, 8]), { 13: [1, 16] }, { 15: [1, 17] }, o($V0, [2, 11]), o($V0, [2, 12]), { 19: [1, 18] }, o($V0, [2, 4]), o($V0, [2, 9]), o($V0, [2, 10]), o($V0, [2, 13])],</span><span class="s3">\n    </span><span class="s1">defaultActions: {},</span><span class="s3">\n    </span><span class="s1">parseError: /* @__PURE__ */ __name(function parseError(str, hash) {</span><span class="s3">\n      </span><span class="s1">if (hash.recoverable) {</span><span class="s3">\n        </span><span class="s1">this.trace(str);</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">var error = new Error(str);</span><span class="s3">\n        </span><span class="s1">error.hash = hash;</span><span class="s3">\n        </span><span class="s1">throw error;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">parseError</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n    </span><span class="s1">parse: /* @__PURE__ */ __name(function parse(input) {</span><span class="s3">\n      </span><span class="s1">var self = this, stack = [0], tstack = [], vstack = [null], lstack = [], table = this.table, yytext = </span><span class="s3">\&quot;\&quot;</span><span class="s1">, yylineno = 0, yyleng = 0, recovering = 0, TERROR = 2, EOF = 1;</span><span class="s3">\n      </span><span class="s1">var args = lstack.slice.call(arguments, 1);</span><span class="s3">\n      </span><span class="s1">var lexer2 = Object.create(this.lexer);</span><span class="s3">\n      </span><span class="s1">var sharedState = { yy: {} };</span><span class="s3">\n      </span><span class="s1">for (var k in this.yy) {</span><span class="s3">\n        </span><span class="s1">if (Object.prototype.hasOwnProperty.call(this.yy, k)) {</span><span class="s3">\n          </span><span class="s1">sharedState.yy[k] = this.yy[k];</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">lexer2.setInput(input, sharedState.yy);</span><span class="s3">\n      </span><span class="s1">sharedState.yy.lexer = lexer2;</span><span class="s3">\n      </span><span class="s1">sharedState.yy.parser = this;</span><span class="s3">\n      </span><span class="s1">if (typeof lexer2.yylloc == </span><span class="s3">\&quot;</span><span class="s1">undefined</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n        </span><span class="s1">lexer2.yylloc = {};</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">var yyloc = lexer2.yylloc;</span><span class="s3">\n      </span><span class="s1">lstack.push(yyloc);</span><span class="s3">\n      </span><span class="s1">var ranges = lexer2.options &amp;&amp; lexer2.options.ranges;</span><span class="s3">\n      </span><span class="s1">if (typeof sharedState.yy.parseError === </span><span class="s3">\&quot;</span><span class="s1">function</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n        </span><span class="s1">this.parseError = sharedState.yy.parseError;</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">this.parseError = Object.getPrototypeOf(this).parseError;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">function popStack(n) {</span><span class="s3">\n        </span><span class="s1">stack.length = stack.length - 2 * n;</span><span class="s3">\n        </span><span class="s1">vstack.length = vstack.length - n;</span><span class="s3">\n        </span><span class="s1">lstack.length = lstack.length - n;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">__name(popStack, </span><span class="s3">\&quot;</span><span class="s1">popStack</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">function lex() {</span><span class="s3">\n        </span><span class="s1">var token;</span><span class="s3">\n        </span><span class="s1">token = tstack.pop() || lexer2.lex() || EOF;</span><span class="s3">\n        </span><span class="s1">if (typeof token !== </span><span class="s3">\&quot;</span><span class="s1">number</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n          </span><span class="s1">if (token instanceof Array) {</span><span class="s3">\n            </span><span class="s1">tstack = token;</span><span class="s3">\n            </span><span class="s1">token = tstack.pop();</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">token = self.symbols_[token] || token;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">return token;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">__name(lex, </span><span class="s3">\&quot;</span><span class="s1">lex</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">var symbol, preErrorSymbol, state, action, a, r, yyval = {}, p, len, newState, expected;</span><span class="s3">\n      </span><span class="s1">while (true) {</span><span class="s3">\n        </span><span class="s1">state = stack[stack.length - 1];</span><span class="s3">\n        </span><span class="s1">if (this.defaultActions[state]) {</span><span class="s3">\n          </span><span class="s1">action = this.defaultActions[state];</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">if (symbol === null || typeof symbol == </span><span class="s3">\&quot;</span><span class="s1">undefined</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n            </span><span class="s1">symbol = lex();</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">action = table[state] &amp;&amp; table[state][symbol];</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">if (typeof action === </span><span class="s3">\&quot;</span><span class="s1">undefined</span><span class="s3">\&quot; </span><span class="s1">|| !action.length || !action[0]) {</span><span class="s3">\n          </span><span class="s1">var errStr = </span><span class="s3">\&quot;\&quot;</span><span class="s1">;</span><span class="s3">\n          </span><span class="s1">expected = [];</span><span class="s3">\n          </span><span class="s1">for (p in table[state]) {</span><span class="s3">\n            </span><span class="s1">if (this.terminals_[p] &amp;&amp; p &gt; TERROR) {</span><span class="s3">\n              </span><span class="s1">expected.push(</span><span class="s3">\&quot;</span><span class="s1">'</span><span class="s3">\&quot; </span><span class="s1">+ this.terminals_[p] + </span><span class="s3">\&quot;</span><span class="s1">'</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">if (lexer2.showPosition) {</span><span class="s3">\n            </span><span class="s1">errStr = </span><span class="s3">\&quot;</span><span class="s1">Parse error on line </span><span class="s3">\&quot; </span><span class="s1">+ (yylineno + 1) + </span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\\</span><span class="s1">n</span><span class="s3">\&quot; </span><span class="s1">+ lexer2.showPosition() + </span><span class="s3">\&quot;\\</span><span class="s1">nExpecting </span><span class="s3">\&quot; </span><span class="s1">+ expected.join(</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">) + </span><span class="s3">\&quot;</span><span class="s1">, got '</span><span class="s3">\&quot; </span><span class="s1">+ (this.terminals_[symbol] || symbol) + </span><span class="s3">\&quot;</span><span class="s1">'</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n          </span><span class="s1">} else {</span><span class="s3">\n            </span><span class="s1">errStr = </span><span class="s3">\&quot;</span><span class="s1">Parse error on line </span><span class="s3">\&quot; </span><span class="s1">+ (yylineno + 1) + </span><span class="s3">\&quot;</span><span class="s1">: Unexpected </span><span class="s3">\&quot; </span><span class="s1">+ (symbol == EOF ? </span><span class="s3">\&quot;</span><span class="s1">end of input</span><span class="s3">\&quot; </span><span class="s1">: </span><span class="s3">\&quot;</span><span class="s1">'</span><span class="s3">\&quot; </span><span class="s1">+ (this.terminals_[symbol] || symbol) + </span><span class="s3">\&quot;</span><span class="s1">'</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">this.parseError(errStr, {</span><span class="s3">\n            </span><span class="s1">text: lexer2.match,</span><span class="s3">\n            </span><span class="s1">token: this.terminals_[symbol] || symbol,</span><span class="s3">\n            </span><span class="s1">line: lexer2.yylineno,</span><span class="s3">\n            </span><span class="s1">loc: yyloc,</span><span class="s3">\n            </span><span class="s1">expected</span><span class="s3">\n          </span><span class="s1">});</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">if (action[0] instanceof Array &amp;&amp; action.length &gt; 1) {</span><span class="s3">\n          </span><span class="s1">throw new Error(</span><span class="s3">\&quot;</span><span class="s1">Parse Error: multiple actions possible at state: </span><span class="s3">\&quot; </span><span class="s1">+ state + </span><span class="s3">\&quot;</span><span class="s1">, token: </span><span class="s3">\&quot; </span><span class="s1">+ symbol);</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">switch (action[0]) {</span><span class="s3">\n          </span><span class="s1">case 1:</span><span class="s3">\n            </span><span class="s1">stack.push(symbol);</span><span class="s3">\n            </span><span class="s1">vstack.push(lexer2.yytext);</span><span class="s3">\n            </span><span class="s1">lstack.push(lexer2.yylloc);</span><span class="s3">\n            </span><span class="s1">stack.push(action[1]);</span><span class="s3">\n            </span><span class="s1">symbol = null;</span><span class="s3">\n            </span><span class="s1">if (!preErrorSymbol) {</span><span class="s3">\n              </span><span class="s1">yyleng = lexer2.yyleng;</span><span class="s3">\n              </span><span class="s1">yytext = lexer2.yytext;</span><span class="s3">\n              </span><span class="s1">yylineno = lexer2.yylineno;</span><span class="s3">\n              </span><span class="s1">yyloc = lexer2.yylloc;</span><span class="s3">\n              </span><span class="s1">if (recovering &gt; 0) {</span><span class="s3">\n                </span><span class="s1">recovering--;</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">} else {</span><span class="s3">\n              </span><span class="s1">symbol = preErrorSymbol;</span><span class="s3">\n              </span><span class="s1">preErrorSymbol = null;</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 2:</span><span class="s3">\n            </span><span class="s1">len = this.productions_[action[1]][1];</span><span class="s3">\n            </span><span class="s1">yyval.$ = vstack[vstack.length - len];</span><span class="s3">\n            </span><span class="s1">yyval._$ = {</span><span class="s3">\n              </span><span class="s1">first_line: lstack[lstack.length - (len || 1)].first_line,</span><span class="s3">\n              </span><span class="s1">last_line: lstack[lstack.length - 1].last_line,</span><span class="s3">\n              </span><span class="s1">first_column: lstack[lstack.length - (len || 1)].first_column,</span><span class="s3">\n              </span><span class="s1">last_column: lstack[lstack.length - 1].last_column</span><span class="s3">\n            </span><span class="s1">};</span><span class="s3">\n            </span><span class="s1">if (ranges) {</span><span class="s3">\n              </span><span class="s1">yyval._$.range = [</span><span class="s3">\n                </span><span class="s1">lstack[lstack.length - (len || 1)].range[0],</span><span class="s3">\n                </span><span class="s1">lstack[lstack.length - 1].range[1]</span><span class="s3">\n              </span><span class="s1">];</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">r = this.performAction.apply(yyval, [</span><span class="s3">\n              </span><span class="s1">yytext,</span><span class="s3">\n              </span><span class="s1">yyleng,</span><span class="s3">\n              </span><span class="s1">yylineno,</span><span class="s3">\n              </span><span class="s1">sharedState.yy,</span><span class="s3">\n              </span><span class="s1">action[1],</span><span class="s3">\n              </span><span class="s1">vstack,</span><span class="s3">\n              </span><span class="s1">lstack</span><span class="s3">\n            </span><span class="s1">].concat(args));</span><span class="s3">\n            </span><span class="s1">if (typeof r !== </span><span class="s3">\&quot;</span><span class="s1">undefined</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n              </span><span class="s1">return r;</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">if (len) {</span><span class="s3">\n              </span><span class="s1">stack = stack.slice(0, -1 * len * 2);</span><span class="s3">\n              </span><span class="s1">vstack = vstack.slice(0, -1 * len);</span><span class="s3">\n              </span><span class="s1">lstack = lstack.slice(0, -1 * len);</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">stack.push(this.productions_[action[1]][0]);</span><span class="s3">\n            </span><span class="s1">vstack.push(yyval.$);</span><span class="s3">\n            </span><span class="s1">lstack.push(yyval._$);</span><span class="s3">\n            </span><span class="s1">newState = table[stack[stack.length - 2]][stack[stack.length - 1]];</span><span class="s3">\n            </span><span class="s1">stack.push(newState);</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 3:</span><span class="s3">\n            </span><span class="s1">return true;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">return true;</span><span class="s3">\n    </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">parse</span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">var lexer = /* @__PURE__ */ function() {</span><span class="s3">\n    </span><span class="s1">var lexer2 = {</span><span class="s3">\n      </span><span class="s1">EOF: 1,</span><span class="s3">\n      </span><span class="s1">parseError: /* @__PURE__ */ __name(function parseError(str, hash) {</span><span class="s3">\n        </span><span class="s1">if (this.yy.parser) {</span><span class="s3">\n          </span><span class="s1">this.yy.parser.parseError(str, hash);</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">throw new Error(str);</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">parseError</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">// resets the lexer, sets new input</span><span class="s3">\n      </span><span class="s1">setInput: /* @__PURE__ */ __name(function(input, yy) {</span><span class="s3">\n        </span><span class="s1">this.yy = yy || this.yy || {};</span><span class="s3">\n        </span><span class="s1">this._input = input;</span><span class="s3">\n        </span><span class="s1">this._more = this._backtrack = this.done = false;</span><span class="s3">\n        </span><span class="s1">this.yylineno = this.yyleng = 0;</span><span class="s3">\n        </span><span class="s1">this.yytext = this.matched = this.match = </span><span class="s3">\&quot;\&quot;</span><span class="s1">;</span><span class="s3">\n        </span><span class="s1">this.conditionStack = [</span><span class="s3">\&quot;</span><span class="s1">INITIAL</span><span class="s3">\&quot;</span><span class="s1">];</span><span class="s3">\n        </span><span class="s1">this.yylloc = {</span><span class="s3">\n          </span><span class="s1">first_line: 1,</span><span class="s3">\n          </span><span class="s1">first_column: 0,</span><span class="s3">\n          </span><span class="s1">last_line: 1,</span><span class="s3">\n          </span><span class="s1">last_column: 0</span><span class="s3">\n        </span><span class="s1">};</span><span class="s3">\n        </span><span class="s1">if (this.options.ranges) {</span><span class="s3">\n          </span><span class="s1">this.yylloc.range = [0, 0];</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">this.offset = 0;</span><span class="s3">\n        </span><span class="s1">return this;</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">setInput</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">// consumes and returns one char from the input</span><span class="s3">\n      </span><span class="s1">input: /* @__PURE__ */ __name(function() {</span><span class="s3">\n        </span><span class="s1">var ch = this._input[0];</span><span class="s3">\n        </span><span class="s1">this.yytext += ch;</span><span class="s3">\n        </span><span class="s1">this.yyleng++;</span><span class="s3">\n        </span><span class="s1">this.offset++;</span><span class="s3">\n        </span><span class="s1">this.match += ch;</span><span class="s3">\n        </span><span class="s1">this.matched += ch;</span><span class="s3">\n        </span><span class="s1">var lines = ch.match(/(?:</span><span class="s3">\\</span><span class="s1">r</span><span class="s3">\\</span><span class="s1">n?|</span><span class="s3">\\</span><span class="s1">n).*/g);</span><span class="s3">\n        </span><span class="s1">if (lines) {</span><span class="s3">\n          </span><span class="s1">this.yylineno++;</span><span class="s3">\n          </span><span class="s1">this.yylloc.last_line++;</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">this.yylloc.last_column++;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">if (this.options.ranges) {</span><span class="s3">\n          </span><span class="s1">this.yylloc.range[1]++;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">this._input = this._input.slice(1);</span><span class="s3">\n        </span><span class="s1">return ch;</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">input</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">// unshifts one char (or a string) into the input</span><span class="s3">\n      </span><span class="s1">unput: /* @__PURE__ */ __name(function(ch) {</span><span class="s3">\n        </span><span class="s1">var len = ch.length;</span><span class="s3">\n        </span><span class="s1">var lines = ch.split(/(?:</span><span class="s3">\\</span><span class="s1">r</span><span class="s3">\\</span><span class="s1">n?|</span><span class="s3">\\</span><span class="s1">n)/g);</span><span class="s3">\n        </span><span class="s1">this._input = ch + this._input;</span><span class="s3">\n        </span><span class="s1">this.yytext = this.yytext.substr(0, this.yytext.length - len);</span><span class="s3">\n        </span><span class="s1">this.offset -= len;</span><span class="s3">\n        </span><span class="s1">var oldLines = this.match.split(/(?:</span><span class="s3">\\</span><span class="s1">r</span><span class="s3">\\</span><span class="s1">n?|</span><span class="s3">\\</span><span class="s1">n)/g);</span><span class="s3">\n        </span><span class="s1">this.match = this.match.substr(0, this.match.length - 1);</span><span class="s3">\n        </span><span class="s1">this.matched = this.matched.substr(0, this.matched.length - 1);</span><span class="s3">\n        </span><span class="s1">if (lines.length - 1) {</span><span class="s3">\n          </span><span class="s1">this.yylineno -= lines.length - 1;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">var r = this.yylloc.range;</span><span class="s3">\n        </span><span class="s1">this.yylloc = {</span><span class="s3">\n          </span><span class="s1">first_line: this.yylloc.first_line,</span><span class="s3">\n          </span><span class="s1">last_line: this.yylineno + 1,</span><span class="s3">\n          </span><span class="s1">first_column: this.yylloc.first_column,</span><span class="s3">\n          </span><span class="s1">last_column: lines ? (lines.length === oldLines.length ? this.yylloc.first_column : 0) + oldLines[oldLines.length - lines.length].length - lines[0].length : this.yylloc.first_column - len</span><span class="s3">\n        </span><span class="s1">};</span><span class="s3">\n        </span><span class="s1">if (this.options.ranges) {</span><span class="s3">\n          </span><span class="s1">this.yylloc.range = [r[0], r[0] + this.yyleng - len];</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">this.yyleng = this.yytext.length;</span><span class="s3">\n        </span><span class="s1">return this;</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">unput</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">// When called from action, caches matched text and appends it on next action</span><span class="s3">\n      </span><span class="s1">more: /* @__PURE__ */ __name(function() {</span><span class="s3">\n        </span><span class="s1">this._more = true;</span><span class="s3">\n        </span><span class="s1">return this;</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">more</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">// When called from action, signals the lexer that this rule fails to match the input, so the next matching rule (regex) should be tested instead.</span><span class="s3">\n      </span><span class="s1">reject: /* @__PURE__ */ __name(function() {</span><span class="s3">\n        </span><span class="s1">if (this.options.backtrack_lexer) {</span><span class="s3">\n          </span><span class="s1">this._backtrack = true;</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">return this.parseError(</span><span class="s3">\&quot;</span><span class="s1">Lexical error on line </span><span class="s3">\&quot; </span><span class="s1">+ (this.yylineno + 1) + </span><span class="s3">\&quot;</span><span class="s1">. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).</span><span class="s3">\\</span><span class="s1">n</span><span class="s3">\&quot; </span><span class="s1">+ this.showPosition(), {</span><span class="s3">\n            </span><span class="s1">text: </span><span class="s3">\&quot;\&quot;</span><span class="s1">,</span><span class="s3">\n            </span><span class="s1">token: null,</span><span class="s3">\n            </span><span class="s1">line: this.yylineno</span><span class="s3">\n          </span><span class="s1">});</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">return this;</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">reject</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">// retain first n characters of the match</span><span class="s3">\n      </span><span class="s1">less: /* @__PURE__ */ __name(function(n) {</span><span class="s3">\n        </span><span class="s1">this.unput(this.match.slice(n));</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">less</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">// displays already matched input, i.e. for error messages</span><span class="s3">\n      </span><span class="s1">pastInput: /* @__PURE__ */ __name(function() {</span><span class="s3">\n        </span><span class="s1">var past = this.matched.substr(0, this.matched.length - this.match.length);</span><span class="s3">\n        </span><span class="s1">return (past.length &gt; 20 ? </span><span class="s3">\&quot;</span><span class="s1">...</span><span class="s3">\&quot; </span><span class="s1">: </span><span class="s3">\&quot;\&quot;</span><span class="s1">) + past.substr(-20).replace(/</span><span class="s3">\\</span><span class="s1">n/g, </span><span class="s3">\&quot;\&quot;</span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">pastInput</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">// displays upcoming input, i.e. for error messages</span><span class="s3">\n      </span><span class="s1">upcomingInput: /* @__PURE__ */ __name(function() {</span><span class="s3">\n        </span><span class="s1">var next = this.match;</span><span class="s3">\n        </span><span class="s1">if (next.length &lt; 20) {</span><span class="s3">\n          </span><span class="s1">next += this._input.substr(0, 20 - next.length);</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">return (next.substr(0, 20) + (next.length &gt; 20 ? </span><span class="s3">\&quot;</span><span class="s1">...</span><span class="s3">\&quot; </span><span class="s1">: </span><span class="s3">\&quot;\&quot;</span><span class="s1">)).replace(/</span><span class="s3">\\</span><span class="s1">n/g, </span><span class="s3">\&quot;\&quot;</span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">upcomingInput</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">// displays the character position where the lexing error occurred, i.e. for error messages</span><span class="s3">\n      </span><span class="s1">showPosition: /* @__PURE__ */ __name(function() {</span><span class="s3">\n        </span><span class="s1">var pre = this.pastInput();</span><span class="s3">\n        </span><span class="s1">var c = new Array(pre.length + 1).join(</span><span class="s3">\&quot;</span><span class="s1">-</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n        </span><span class="s1">return pre + this.upcomingInput() + </span><span class="s3">\&quot;\\</span><span class="s1">n</span><span class="s3">\&quot; </span><span class="s1">+ c + </span><span class="s3">\&quot;</span><span class="s1">^</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">showPosition</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">// test the lexed token: return FALSE when not a match, otherwise return token</span><span class="s3">\n      </span><span class="s1">test_match: /* @__PURE__ */ __name(function(match, indexed_rule) {</span><span class="s3">\n        </span><span class="s1">var token, lines, backup;</span><span class="s3">\n        </span><span class="s1">if (this.options.backtrack_lexer) {</span><span class="s3">\n          </span><span class="s1">backup = {</span><span class="s3">\n            </span><span class="s1">yylineno: this.yylineno,</span><span class="s3">\n            </span><span class="s1">yylloc: {</span><span class="s3">\n              </span><span class="s1">first_line: this.yylloc.first_line,</span><span class="s3">\n              </span><span class="s1">last_line: this.last_line,</span><span class="s3">\n              </span><span class="s1">first_column: this.yylloc.first_column,</span><span class="s3">\n              </span><span class="s1">last_column: this.yylloc.last_column</span><span class="s3">\n            </span><span class="s1">},</span><span class="s3">\n            </span><span class="s1">yytext: this.yytext,</span><span class="s3">\n            </span><span class="s1">match: this.match,</span><span class="s3">\n            </span><span class="s1">matches: this.matches,</span><span class="s3">\n            </span><span class="s1">matched: this.matched,</span><span class="s3">\n            </span><span class="s1">yyleng: this.yyleng,</span><span class="s3">\n            </span><span class="s1">offset: this.offset,</span><span class="s3">\n            </span><span class="s1">_more: this._more,</span><span class="s3">\n            </span><span class="s1">_input: this._input,</span><span class="s3">\n            </span><span class="s1">yy: this.yy,</span><span class="s3">\n            </span><span class="s1">conditionStack: this.conditionStack.slice(0),</span><span class="s3">\n            </span><span class="s1">done: this.done</span><span class="s3">\n          </span><span class="s1">};</span><span class="s3">\n          </span><span class="s1">if (this.options.ranges) {</span><span class="s3">\n            </span><span class="s1">backup.yylloc.range = this.yylloc.range.slice(0);</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">lines = match[0].match(/(?:</span><span class="s3">\\</span><span class="s1">r</span><span class="s3">\\</span><span class="s1">n?|</span><span class="s3">\\</span><span class="s1">n).*/g);</span><span class="s3">\n        </span><span class="s1">if (lines) {</span><span class="s3">\n          </span><span class="s1">this.yylineno += lines.length;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">this.yylloc = {</span><span class="s3">\n          </span><span class="s1">first_line: this.yylloc.last_line,</span><span class="s3">\n          </span><span class="s1">last_line: this.yylineno + 1,</span><span class="s3">\n          </span><span class="s1">first_column: this.yylloc.last_column,</span><span class="s3">\n          </span><span class="s1">last_column: lines ? lines[lines.length - 1].length - lines[lines.length - 1].match(/</span><span class="s3">\\</span><span class="s1">r?</span><span class="s3">\\</span><span class="s1">n?/)[0].length : this.yylloc.last_column + match[0].length</span><span class="s3">\n        </span><span class="s1">};</span><span class="s3">\n        </span><span class="s1">this.yytext += match[0];</span><span class="s3">\n        </span><span class="s1">this.match += match[0];</span><span class="s3">\n        </span><span class="s1">this.matches = match;</span><span class="s3">\n        </span><span class="s1">this.yyleng = this.yytext.length;</span><span class="s3">\n        </span><span class="s1">if (this.options.ranges) {</span><span class="s3">\n          </span><span class="s1">this.yylloc.range = [this.offset, this.offset += this.yyleng];</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">this._more = false;</span><span class="s3">\n        </span><span class="s1">this._backtrack = false;</span><span class="s3">\n        </span><span class="s1">this._input = this._input.slice(match[0].length);</span><span class="s3">\n        </span><span class="s1">this.matched += match[0];</span><span class="s3">\n        </span><span class="s1">token = this.performAction.call(this, this.yy, this, indexed_rule, this.conditionStack[this.conditionStack.length - 1]);</span><span class="s3">\n        </span><span class="s1">if (this.done &amp;&amp; this._input) {</span><span class="s3">\n          </span><span class="s1">this.done = false;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">if (token) {</span><span class="s3">\n          </span><span class="s1">return token;</span><span class="s3">\n        </span><span class="s1">} else if (this._backtrack) {</span><span class="s3">\n          </span><span class="s1">for (var k in backup) {</span><span class="s3">\n            </span><span class="s1">this[k] = backup[k];</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">return false;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">return false;</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">test_match</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">// return next match in input</span><span class="s3">\n      </span><span class="s1">next: /* @__PURE__ */ __name(function() {</span><span class="s3">\n        </span><span class="s1">if (this.done) {</span><span class="s3">\n          </span><span class="s1">return this.EOF;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">if (!this._input) {</span><span class="s3">\n          </span><span class="s1">this.done = true;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">var token, match, tempMatch, index;</span><span class="s3">\n        </span><span class="s1">if (!this._more) {</span><span class="s3">\n          </span><span class="s1">this.yytext = </span><span class="s3">\&quot;\&quot;</span><span class="s1">;</span><span class="s3">\n          </span><span class="s1">this.match = </span><span class="s3">\&quot;\&quot;</span><span class="s1">;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">var rules = this._currentRules();</span><span class="s3">\n        </span><span class="s1">for (var i = 0; i &lt; rules.length; i++) {</span><span class="s3">\n          </span><span class="s1">tempMatch = this._input.match(this.rules[rules[i]]);</span><span class="s3">\n          </span><span class="s1">if (tempMatch &amp;&amp; (!match || tempMatch[0].length &gt; match[0].length)) {</span><span class="s3">\n            </span><span class="s1">match = tempMatch;</span><span class="s3">\n            </span><span class="s1">index = i;</span><span class="s3">\n            </span><span class="s1">if (this.options.backtrack_lexer) {</span><span class="s3">\n              </span><span class="s1">token = this.test_match(tempMatch, rules[i]);</span><span class="s3">\n              </span><span class="s1">if (token !== false) {</span><span class="s3">\n                </span><span class="s1">return token;</span><span class="s3">\n              </span><span class="s1">} else if (this._backtrack) {</span><span class="s3">\n                </span><span class="s1">match = false;</span><span class="s3">\n                </span><span class="s1">continue;</span><span class="s3">\n              </span><span class="s1">} else {</span><span class="s3">\n                </span><span class="s1">return false;</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">} else if (!this.options.flex) {</span><span class="s3">\n              </span><span class="s1">break;</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">if (match) {</span><span class="s3">\n          </span><span class="s1">token = this.test_match(match, rules[index]);</span><span class="s3">\n          </span><span class="s1">if (token !== false) {</span><span class="s3">\n            </span><span class="s1">return token;</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">return false;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">if (this._input === </span><span class="s3">\&quot;\&quot;</span><span class="s1">) {</span><span class="s3">\n          </span><span class="s1">return this.EOF;</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">return this.parseError(</span><span class="s3">\&quot;</span><span class="s1">Lexical error on line </span><span class="s3">\&quot; </span><span class="s1">+ (this.yylineno + 1) + </span><span class="s3">\&quot;</span><span class="s1">. Unrecognized text.</span><span class="s3">\\</span><span class="s1">n</span><span class="s3">\&quot; </span><span class="s1">+ this.showPosition(), {</span><span class="s3">\n            </span><span class="s1">text: </span><span class="s3">\&quot;\&quot;</span><span class="s1">,</span><span class="s3">\n            </span><span class="s1">token: null,</span><span class="s3">\n            </span><span class="s1">line: this.yylineno</span><span class="s3">\n          </span><span class="s1">});</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">next</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">// return next match that has a token</span><span class="s3">\n      </span><span class="s1">lex: /* @__PURE__ */ __name(function lex() {</span><span class="s3">\n        </span><span class="s1">var r = this.next();</span><span class="s3">\n        </span><span class="s1">if (r) {</span><span class="s3">\n          </span><span class="s1">return r;</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">return this.lex();</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">lex</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">// activates a new lexer condition state (pushes the new lexer condition state onto the condition stack)</span><span class="s3">\n      </span><span class="s1">begin: /* @__PURE__ */ __name(function begin(condition) {</span><span class="s3">\n        </span><span class="s1">this.conditionStack.push(condition);</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">begin</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">// pop the previously active lexer condition state off the condition stack</span><span class="s3">\n      </span><span class="s1">popState: /* @__PURE__ */ __name(function popState() {</span><span class="s3">\n        </span><span class="s1">var n = this.conditionStack.length - 1;</span><span class="s3">\n        </span><span class="s1">if (n &gt; 0) {</span><span class="s3">\n          </span><span class="s1">return this.conditionStack.pop();</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">return this.conditionStack[0];</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">popState</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">// produce the lexer rule set which is active for the currently active lexer condition state</span><span class="s3">\n      </span><span class="s1">_currentRules: /* @__PURE__ */ __name(function _currentRules() {</span><span class="s3">\n        </span><span class="s1">if (this.conditionStack.length &amp;&amp; this.conditionStack[this.conditionStack.length - 1]) {</span><span class="s3">\n          </span><span class="s1">return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">return this.conditions[</span><span class="s3">\&quot;</span><span class="s1">INITIAL</span><span class="s3">\&quot;</span><span class="s1">].rules;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">_currentRules</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">// return the currently active lexer condition state; when an index argument is provided it produces the N-th previous condition state, if available</span><span class="s3">\n      </span><span class="s1">topState: /* @__PURE__ */ __name(function topState(n) {</span><span class="s3">\n        </span><span class="s1">n = this.conditionStack.length - 1 - Math.abs(n || 0);</span><span class="s3">\n        </span><span class="s1">if (n &gt;= 0) {</span><span class="s3">\n          </span><span class="s1">return this.conditionStack[n];</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">INITIAL</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">topState</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">// alias for begin(condition)</span><span class="s3">\n      </span><span class="s1">pushState: /* @__PURE__ */ __name(function pushState(condition) {</span><span class="s3">\n        </span><span class="s1">this.begin(condition);</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">pushState</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">// return the number of states currently on the stack</span><span class="s3">\n      </span><span class="s1">stateStackSize: /* @__PURE__ */ __name(function stateStackSize() {</span><span class="s3">\n        </span><span class="s1">return this.conditionStack.length;</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">stateStackSize</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">options: { </span><span class="s3">\&quot;</span><span class="s1">case-insensitive</span><span class="s3">\&quot;</span><span class="s1">: true },</span><span class="s3">\n      </span><span class="s1">performAction: /* @__PURE__ */ __name(function anonymous(yy, yy_, $avoiding_name_collisions, YY_START) {</span><span class="s3">\n        </span><span class="s1">var YYSTATE = YY_START;</span><span class="s3">\n        </span><span class="s1">switch ($avoiding_name_collisions) {</span><span class="s3">\n          </span><span class="s1">case 0:</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 1:</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 2:</span><span class="s3">\n            </span><span class="s1">return 10;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 3:</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 4:</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 5:</span><span class="s3">\n            </span><span class="s1">return 4;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 6:</span><span class="s3">\n            </span><span class="s1">return 11;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 7:</span><span class="s3">\n            </span><span class="s1">this.begin(</span><span class="s3">\&quot;</span><span class="s1">acc_title</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 12;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 8:</span><span class="s3">\n            </span><span class="s1">this.popState();</span><span class="s3">\n            </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">acc_title_value</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 9:</span><span class="s3">\n            </span><span class="s1">this.begin(</span><span class="s3">\&quot;</span><span class="s1">acc_descr</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return 14;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 10:</span><span class="s3">\n            </span><span class="s1">this.popState();</span><span class="s3">\n            </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">acc_descr_value</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 11:</span><span class="s3">\n            </span><span class="s1">this.begin(</span><span class="s3">\&quot;</span><span class="s1">acc_descr_multiline</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 12:</span><span class="s3">\n            </span><span class="s1">this.popState();</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 13:</span><span class="s3">\n            </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">acc_descr_multiline_value</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 14:</span><span class="s3">\n            </span><span class="s1">return 17;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 15:</span><span class="s3">\n            </span><span class="s1">return 18;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 16:</span><span class="s3">\n            </span><span class="s1">return 19;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 17:</span><span class="s3">\n            </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 18:</span><span class="s3">\n            </span><span class="s1">return 6;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case 19:</span><span class="s3">\n            </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">INVALID</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">anonymous</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">rules: [/^(?:%(?!</span><span class="s3">\\</span><span class="s1">{)[^</span><span class="s3">\\</span><span class="s1">n]*)/i, /^(?:[^</span><span class="s3">\\</span><span class="s1">}]%%[^</span><span class="s3">\\</span><span class="s1">n]*)/i, /^(?:[</span><span class="s3">\\</span><span class="s1">n]+)/i, /^(?:</span><span class="s3">\\</span><span class="s1">s+)/i, /^(?:#[^</span><span class="s3">\\</span><span class="s1">n]*)/i, /^(?:journey</span><span class="s3">\\</span><span class="s1">b)/i, /^(?:title</span><span class="s3">\\</span><span class="s1">s[^#</span><span class="s3">\\</span><span class="s1">n;]+)/i, /^(?:accTitle</span><span class="s3">\\</span><span class="s1">s*:</span><span class="s3">\\</span><span class="s1">s*)/i, /^(?:(?!</span><span class="s3">\\</span><span class="s1">n||)*[^</span><span class="s3">\\</span><span class="s1">n]*)/i, /^(?:accDescr</span><span class="s3">\\</span><span class="s1">s*:</span><span class="s3">\\</span><span class="s1">s*)/i, /^(?:(?!</span><span class="s3">\\</span><span class="s1">n||)*[^</span><span class="s3">\\</span><span class="s1">n]*)/i, /^(?:accDescr</span><span class="s3">\\</span><span class="s1">s*</span><span class="s3">\\</span><span class="s1">{</span><span class="s3">\\</span><span class="s1">s*)/i, /^(?:[</span><span class="s3">\\</span><span class="s1">}])/i, /^(?:[^</span><span class="s3">\\</span><span class="s1">}]*)/i, /^(?:section</span><span class="s3">\\</span><span class="s1">s[^#:</span><span class="s3">\\</span><span class="s1">n;]+)/i, /^(?:[^#:</span><span class="s3">\\</span><span class="s1">n;]+)/i, /^(?::[^#</span><span class="s3">\\</span><span class="s1">n;]+)/i, /^(?::)/i, /^(?:$)/i, /^(?:.)/i],</span><span class="s3">\n      </span><span class="s1">conditions: { </span><span class="s3">\&quot;</span><span class="s1">acc_descr_multiline</span><span class="s3">\&quot;</span><span class="s1">: { </span><span class="s3">\&quot;</span><span class="s1">rules</span><span class="s3">\&quot;</span><span class="s1">: [12, 13], </span><span class="s3">\&quot;</span><span class="s1">inclusive</span><span class="s3">\&quot;</span><span class="s1">: false }, </span><span class="s3">\&quot;</span><span class="s1">acc_descr</span><span class="s3">\&quot;</span><span class="s1">: { </span><span class="s3">\&quot;</span><span class="s1">rules</span><span class="s3">\&quot;</span><span class="s1">: [10], </span><span class="s3">\&quot;</span><span class="s1">inclusive</span><span class="s3">\&quot;</span><span class="s1">: false }, </span><span class="s3">\&quot;</span><span class="s1">acc_title</span><span class="s3">\&quot;</span><span class="s1">: { </span><span class="s3">\&quot;</span><span class="s1">rules</span><span class="s3">\&quot;</span><span class="s1">: [8], </span><span class="s3">\&quot;</span><span class="s1">inclusive</span><span class="s3">\&quot;</span><span class="s1">: false }, </span><span class="s3">\&quot;</span><span class="s1">INITIAL</span><span class="s3">\&quot;</span><span class="s1">: { </span><span class="s3">\&quot;</span><span class="s1">rules</span><span class="s3">\&quot;</span><span class="s1">: [0, 1, 2, 3, 4, 5, 6, 7, 9, 11, 14, 15, 16, 17, 18, 19], </span><span class="s3">\&quot;</span><span class="s1">inclusive</span><span class="s3">\&quot;</span><span class="s1">: true } }</span><span class="s3">\n    </span><span class="s1">};</span><span class="s3">\n    </span><span class="s1">return lexer2;</span><span class="s3">\n  </span><span class="s1">}();</span><span class="s3">\n  </span><span class="s1">parser2.lexer = lexer;</span><span class="s3">\n  </span><span class="s1">function Parser() {</span><span class="s3">\n    </span><span class="s1">this.yy = {};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">__name(Parser, </span><span class="s3">\&quot;</span><span class="s1">Parser</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">Parser.prototype = parser2;</span><span class="s3">\n  </span><span class="s1">parser2.Parser = Parser;</span><span class="s3">\n  </span><span class="s1">return new Parser();</span><span class="s3">\n</span><span class="s1">}();</span><span class="s3">\n</span><span class="s1">parser.parser = parser;</span><span class="s3">\n</span><span class="s1">var journey_default = parser;</span><span class="s3">\n\n</span><span class="s1">// src/diagrams/user-journey/journeyDb.js</span><span class="s3">\n</span><span class="s1">var currentSection = </span><span class="s3">\&quot;\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">var sections = [];</span><span class="s3">\n</span><span class="s1">var tasks = [];</span><span class="s3">\n</span><span class="s1">var rawTasks = [];</span><span class="s3">\n</span><span class="s1">var clear2 = /* @__PURE__ */ __name(function() {</span><span class="s3">\n  </span><span class="s1">sections.length = 0;</span><span class="s3">\n  </span><span class="s1">tasks.length = 0;</span><span class="s3">\n  </span><span class="s1">currentSection = </span><span class="s3">\&quot;\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">rawTasks.length = 0;</span><span class="s3">\n  </span><span class="s1">clear();</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">clear</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var addSection = /* @__PURE__ */ __name(function(txt) {</span><span class="s3">\n  </span><span class="s1">currentSection = txt;</span><span class="s3">\n  </span><span class="s1">sections.push(txt);</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">addSection</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var getSections = /* @__PURE__ */ __name(function() {</span><span class="s3">\n  </span><span class="s1">return sections;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">getSections</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var getTasks = /* @__PURE__ */ __name(function() {</span><span class="s3">\n  </span><span class="s1">let allItemsProcessed = compileTasks();</span><span class="s3">\n  </span><span class="s1">const maxDepth = 100;</span><span class="s3">\n  </span><span class="s1">let iterationCount = 0;</span><span class="s3">\n  </span><span class="s1">while (!allItemsProcessed &amp;&amp; iterationCount &lt; maxDepth) {</span><span class="s3">\n    </span><span class="s1">allItemsProcessed = compileTasks();</span><span class="s3">\n    </span><span class="s1">iterationCount++;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">tasks.push(...rawTasks);</span><span class="s3">\n  </span><span class="s1">return tasks;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">getTasks</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var updateActors = /* @__PURE__ */ __name(function() {</span><span class="s3">\n  </span><span class="s1">const tempActors = [];</span><span class="s3">\n  </span><span class="s1">tasks.forEach((task) =&gt; {</span><span class="s3">\n    </span><span class="s1">if (task.people) {</span><span class="s3">\n      </span><span class="s1">tempActors.push(...task.people);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">});</span><span class="s3">\n  </span><span class="s1">const unique = new Set(tempActors);</span><span class="s3">\n  </span><span class="s1">return [...unique].sort();</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">updateActors</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var addTask = /* @__PURE__ */ __name(function(descr, taskData) {</span><span class="s3">\n  </span><span class="s1">const pieces = taskData.substr(1).split(</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">let score = 0;</span><span class="s3">\n  </span><span class="s1">let peeps = [];</span><span class="s3">\n  </span><span class="s1">if (pieces.length === 1) {</span><span class="s3">\n    </span><span class="s1">score = Number(pieces[0]);</span><span class="s3">\n    </span><span class="s1">peeps = [];</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">score = Number(pieces[0]);</span><span class="s3">\n    </span><span class="s1">peeps = pieces[1].split(</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">const peopleList = peeps.map((s) =&gt; s.trim());</span><span class="s3">\n  </span><span class="s1">const rawTask = {</span><span class="s3">\n    </span><span class="s1">section: currentSection,</span><span class="s3">\n    </span><span class="s1">type: currentSection,</span><span class="s3">\n    </span><span class="s1">people: peopleList,</span><span class="s3">\n    </span><span class="s1">task: descr,</span><span class="s3">\n    </span><span class="s1">score</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">rawTasks.push(rawTask);</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">addTask</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var addTaskOrg = /* @__PURE__ */ __name(function(descr) {</span><span class="s3">\n  </span><span class="s1">const newTask = {</span><span class="s3">\n    </span><span class="s1">section: currentSection,</span><span class="s3">\n    </span><span class="s1">type: currentSection,</span><span class="s3">\n    </span><span class="s1">description: descr,</span><span class="s3">\n    </span><span class="s1">task: descr,</span><span class="s3">\n    </span><span class="s1">classes: []</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">tasks.push(newTask);</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">addTaskOrg</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var compileTasks = /* @__PURE__ */ __name(function() {</span><span class="s3">\n  </span><span class="s1">const compileTask = /* @__PURE__ */ __name(function(pos) {</span><span class="s3">\n    </span><span class="s1">return rawTasks[pos].processed;</span><span class="s3">\n  </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">compileTask</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">let allProcessed = true;</span><span class="s3">\n  </span><span class="s1">for (const [i, rawTask] of rawTasks.entries()) {</span><span class="s3">\n    </span><span class="s1">compileTask(i);</span><span class="s3">\n    </span><span class="s1">allProcessed = allProcessed &amp;&amp; rawTask.processed;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return allProcessed;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">compileTasks</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var getActors = /* @__PURE__ */ __name(function() {</span><span class="s3">\n  </span><span class="s1">return updateActors();</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">getActors</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var journeyDb_default = {</span><span class="s3">\n  </span><span class="s1">getConfig: /* @__PURE__ */ __name(() =&gt; getConfig().journey, </span><span class="s3">\&quot;</span><span class="s1">getConfig</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n  </span><span class="s1">clear: clear2,</span><span class="s3">\n  </span><span class="s1">setDiagramTitle,</span><span class="s3">\n  </span><span class="s1">getDiagramTitle,</span><span class="s3">\n  </span><span class="s1">setAccTitle,</span><span class="s3">\n  </span><span class="s1">getAccTitle,</span><span class="s3">\n  </span><span class="s1">setAccDescription,</span><span class="s3">\n  </span><span class="s1">getAccDescription,</span><span class="s3">\n  </span><span class="s1">addSection,</span><span class="s3">\n  </span><span class="s1">getSections,</span><span class="s3">\n  </span><span class="s1">getTasks,</span><span class="s3">\n  </span><span class="s1">addTask,</span><span class="s3">\n  </span><span class="s1">addTaskOrg,</span><span class="s3">\n  </span><span class="s1">getActors</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n\n</span><span class="s1">// src/diagrams/user-journey/styles.js</span><span class="s3">\n</span><span class="s1">var getStyles = /* @__PURE__ */ __name((options) =&gt; `.label {</span><span class="s3">\n    </span><span class="s1">font-family: ${options.fontFamily};</span><span class="s3">\n    </span><span class="s1">color: ${options.textColor};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">.mouth {</span><span class="s3">\n    </span><span class="s1">stroke: #666;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">line {</span><span class="s3">\n    </span><span class="s1">stroke: ${options.textColor}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">.legend {</span><span class="s3">\n    </span><span class="s1">fill: ${options.textColor};</span><span class="s3">\n    </span><span class="s1">font-family: ${options.fontFamily};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">.label text {</span><span class="s3">\n    </span><span class="s1">fill: #333;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">.label {</span><span class="s3">\n    </span><span class="s1">color: ${options.textColor}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">.face {</span><span class="s3">\n    </span><span class="s1">${options.faceColor ? `fill: ${options.faceColor}` : </span><span class="s3">\&quot;</span><span class="s1">fill: #FFF8DC</span><span class="s3">\&quot;</span><span class="s1">};</span><span class="s3">\n    </span><span class="s1">stroke: #999;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">.node rect,</span><span class="s3">\n  </span><span class="s1">.node circle,</span><span class="s3">\n  </span><span class="s1">.node ellipse,</span><span class="s3">\n  </span><span class="s1">.node polygon,</span><span class="s3">\n  </span><span class="s1">.node path {</span><span class="s3">\n    </span><span class="s1">fill: ${options.mainBkg};</span><span class="s3">\n    </span><span class="s1">stroke: ${options.nodeBorder};</span><span class="s3">\n    </span><span class="s1">stroke-width: 1px;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">.node .label {</span><span class="s3">\n    </span><span class="s1">text-align: center;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">.node.clickable {</span><span class="s3">\n    </span><span class="s1">cursor: pointer;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">.arrowheadPath {</span><span class="s3">\n    </span><span class="s1">fill: ${options.arrowheadColor};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">.edgePath .path {</span><span class="s3">\n    </span><span class="s1">stroke: ${options.lineColor};</span><span class="s3">\n    </span><span class="s1">stroke-width: 1.5px;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">.flowchart-link {</span><span class="s3">\n    </span><span class="s1">stroke: ${options.lineColor};</span><span class="s3">\n    </span><span class="s1">fill: none;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">.edgeLabel {</span><span class="s3">\n    </span><span class="s1">background-color: ${options.edgeLabelBackground};</span><span class="s3">\n    </span><span class="s1">rect {</span><span class="s3">\n      </span><span class="s1">opacity: 0.5;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">text-align: center;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">.cluster rect {</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">.cluster text {</span><span class="s3">\n    </span><span class="s1">fill: ${options.titleColor};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">div.mermaidTooltip {</span><span class="s3">\n    </span><span class="s1">position: absolute;</span><span class="s3">\n    </span><span class="s1">text-align: center;</span><span class="s3">\n    </span><span class="s1">max-width: 200px;</span><span class="s3">\n    </span><span class="s1">padding: 2px;</span><span class="s3">\n    </span><span class="s1">font-family: ${options.fontFamily};</span><span class="s3">\n    </span><span class="s1">font-size: 12px;</span><span class="s3">\n    </span><span class="s1">background: ${options.tertiaryColor};</span><span class="s3">\n    </span><span class="s1">border: 1px solid ${options.border2};</span><span class="s3">\n    </span><span class="s1">border-radius: 2px;</span><span class="s3">\n    </span><span class="s1">pointer-events: none;</span><span class="s3">\n    </span><span class="s1">z-index: 100;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">.task-type-0, .section-type-0  {</span><span class="s3">\n    </span><span class="s1">${options.fillType0 ? `fill: ${options.fillType0}` : </span><span class="s3">\&quot;\&quot;</span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">.task-type-1, .section-type-1  {</span><span class="s3">\n    </span><span class="s1">${options.fillType0 ? `fill: ${options.fillType1}` : </span><span class="s3">\&quot;\&quot;</span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">.task-type-2, .section-type-2  {</span><span class="s3">\n    </span><span class="s1">${options.fillType0 ? `fill: ${options.fillType2}` : </span><span class="s3">\&quot;\&quot;</span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">.task-type-3, .section-type-3  {</span><span class="s3">\n    </span><span class="s1">${options.fillType0 ? `fill: ${options.fillType3}` : </span><span class="s3">\&quot;\&quot;</span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">.task-type-4, .section-type-4  {</span><span class="s3">\n    </span><span class="s1">${options.fillType0 ? `fill: ${options.fillType4}` : </span><span class="s3">\&quot;\&quot;</span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">.task-type-5, .section-type-5  {</span><span class="s3">\n    </span><span class="s1">${options.fillType0 ? `fill: ${options.fillType5}` : </span><span class="s3">\&quot;\&quot;</span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">.task-type-6, .section-type-6  {</span><span class="s3">\n    </span><span class="s1">${options.fillType0 ? `fill: ${options.fillType6}` : </span><span class="s3">\&quot;\&quot;</span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">.task-type-7, .section-type-7  {</span><span class="s3">\n    </span><span class="s1">${options.fillType0 ? `fill: ${options.fillType7}` : </span><span class="s3">\&quot;\&quot;</span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">.actor-0 {</span><span class="s3">\n    </span><span class="s1">${options.actor0 ? `fill: ${options.actor0}` : </span><span class="s3">\&quot;\&quot;</span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">.actor-1 {</span><span class="s3">\n    </span><span class="s1">${options.actor1 ? `fill: ${options.actor1}` : </span><span class="s3">\&quot;\&quot;</span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">.actor-2 {</span><span class="s3">\n    </span><span class="s1">${options.actor2 ? `fill: ${options.actor2}` : </span><span class="s3">\&quot;\&quot;</span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">.actor-3 {</span><span class="s3">\n    </span><span class="s1">${options.actor3 ? `fill: ${options.actor3}` : </span><span class="s3">\&quot;\&quot;</span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">.actor-4 {</span><span class="s3">\n    </span><span class="s1">${options.actor4 ? `fill: ${options.actor4}` : </span><span class="s3">\&quot;\&quot;</span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">.actor-5 {</span><span class="s3">\n    </span><span class="s1">${options.actor5 ? `fill: ${options.actor5}` : </span><span class="s3">\&quot;\&quot;</span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">`, </span><span class="s3">\&quot;</span><span class="s1">getStyles</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var styles_default = getStyles;</span><span class="s3">\n\n</span><span class="s1">// src/diagrams/user-journey/journeyRenderer.ts</span><span class="s3">\n</span><span class="s1">import { select } from </span><span class="s3">\&quot;</span><span class="s1">d3</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n\n</span><span class="s1">// src/diagrams/user-journey/svgDraw.js</span><span class="s3">\n</span><span class="s1">import { arc as d3arc } from </span><span class="s3">\&quot;</span><span class="s1">d3</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">var drawRect2 = /* @__PURE__ */ __name(function(elem, rectData) {</span><span class="s3">\n  </span><span class="s1">return drawRect(elem, rectData);</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">drawRect</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var drawFace = /* @__PURE__ */ __name(function(element, faceData) {</span><span class="s3">\n  </span><span class="s1">const radius = 15;</span><span class="s3">\n  </span><span class="s1">const circleElement = element.append(</span><span class="s3">\&quot;</span><span class="s1">circle</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">cx</span><span class="s3">\&quot;</span><span class="s1">, faceData.cx).attr(</span><span class="s3">\&quot;</span><span class="s1">cy</span><span class="s3">\&quot;</span><span class="s1">, faceData.cy).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">face</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">r</span><span class="s3">\&quot;</span><span class="s1">, radius).attr(</span><span class="s3">\&quot;</span><span class="s1">stroke-width</span><span class="s3">\&quot;</span><span class="s1">, 2).attr(</span><span class="s3">\&quot;</span><span class="s1">overflow</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">visible</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const face = element.append(</span><span class="s3">\&quot;</span><span class="s1">g</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">face.append(</span><span class="s3">\&quot;</span><span class="s1">circle</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">cx</span><span class="s3">\&quot;</span><span class="s1">, faceData.cx - radius / 3).attr(</span><span class="s3">\&quot;</span><span class="s1">cy</span><span class="s3">\&quot;</span><span class="s1">, faceData.cy - radius / 3).attr(</span><span class="s3">\&quot;</span><span class="s1">r</span><span class="s3">\&quot;</span><span class="s1">, 1.5).attr(</span><span class="s3">\&quot;</span><span class="s1">stroke-width</span><span class="s3">\&quot;</span><span class="s1">, 2).attr(</span><span class="s3">\&quot;</span><span class="s1">fill</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">#666</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">stroke</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">#666</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">face.append(</span><span class="s3">\&quot;</span><span class="s1">circle</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">cx</span><span class="s3">\&quot;</span><span class="s1">, faceData.cx + radius / 3).attr(</span><span class="s3">\&quot;</span><span class="s1">cy</span><span class="s3">\&quot;</span><span class="s1">, faceData.cy - radius / 3).attr(</span><span class="s3">\&quot;</span><span class="s1">r</span><span class="s3">\&quot;</span><span class="s1">, 1.5).attr(</span><span class="s3">\&quot;</span><span class="s1">stroke-width</span><span class="s3">\&quot;</span><span class="s1">, 2).attr(</span><span class="s3">\&quot;</span><span class="s1">fill</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">#666</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">stroke</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">#666</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">function smile(face2) {</span><span class="s3">\n    </span><span class="s1">const arc = d3arc().startAngle(Math.PI / 2).endAngle(3 * (Math.PI / 2)).innerRadius(radius / 2).outerRadius(radius / 2.2);</span><span class="s3">\n    </span><span class="s1">face2.append(</span><span class="s3">\&quot;</span><span class="s1">path</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">mouth</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">d</span><span class="s3">\&quot;</span><span class="s1">, arc).attr(</span><span class="s3">\&quot;</span><span class="s1">transform</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">translate(</span><span class="s3">\&quot; </span><span class="s1">+ faceData.cx + </span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot; </span><span class="s1">+ (faceData.cy + 2) + </span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">__name(smile, </span><span class="s3">\&quot;</span><span class="s1">smile</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">function sad(face2) {</span><span class="s3">\n    </span><span class="s1">const arc = d3arc().startAngle(3 * Math.PI / 2).endAngle(5 * (Math.PI / 2)).innerRadius(radius / 2).outerRadius(radius / 2.2);</span><span class="s3">\n    </span><span class="s1">face2.append(</span><span class="s3">\&quot;</span><span class="s1">path</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">mouth</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">d</span><span class="s3">\&quot;</span><span class="s1">, arc).attr(</span><span class="s3">\&quot;</span><span class="s1">transform</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">translate(</span><span class="s3">\&quot; </span><span class="s1">+ faceData.cx + </span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot; </span><span class="s1">+ (faceData.cy + 7) + </span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">__name(sad, </span><span class="s3">\&quot;</span><span class="s1">sad</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">function ambivalent(face2) {</span><span class="s3">\n    </span><span class="s1">face2.append(</span><span class="s3">\&quot;</span><span class="s1">line</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">mouth</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">stroke</span><span class="s3">\&quot;</span><span class="s1">, 2).attr(</span><span class="s3">\&quot;</span><span class="s1">x1</span><span class="s3">\&quot;</span><span class="s1">, faceData.cx - 5).attr(</span><span class="s3">\&quot;</span><span class="s1">y1</span><span class="s3">\&quot;</span><span class="s1">, faceData.cy + 7).attr(</span><span class="s3">\&quot;</span><span class="s1">x2</span><span class="s3">\&quot;</span><span class="s1">, faceData.cx + 5).attr(</span><span class="s3">\&quot;</span><span class="s1">y2</span><span class="s3">\&quot;</span><span class="s1">, faceData.cy + 7).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">mouth</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">stroke-width</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">1px</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">stroke</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">#666</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">__name(ambivalent, </span><span class="s3">\&quot;</span><span class="s1">ambivalent</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">if (faceData.score &gt; 3) {</span><span class="s3">\n    </span><span class="s1">smile(face);</span><span class="s3">\n  </span><span class="s1">} else if (faceData.score &lt; 3) {</span><span class="s3">\n    </span><span class="s1">sad(face);</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">ambivalent(face);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return circleElement;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">drawFace</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var drawCircle = /* @__PURE__ */ __name(function(element, circleData) {</span><span class="s3">\n  </span><span class="s1">const circleElement = element.append(</span><span class="s3">\&quot;</span><span class="s1">circle</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">circleElement.attr(</span><span class="s3">\&quot;</span><span class="s1">cx</span><span class="s3">\&quot;</span><span class="s1">, circleData.cx);</span><span class="s3">\n  </span><span class="s1">circleElement.attr(</span><span class="s3">\&quot;</span><span class="s1">cy</span><span class="s3">\&quot;</span><span class="s1">, circleData.cy);</span><span class="s3">\n  </span><span class="s1">circleElement.attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">actor-</span><span class="s3">\&quot; </span><span class="s1">+ circleData.pos);</span><span class="s3">\n  </span><span class="s1">circleElement.attr(</span><span class="s3">\&quot;</span><span class="s1">fill</span><span class="s3">\&quot;</span><span class="s1">, circleData.fill);</span><span class="s3">\n  </span><span class="s1">circleElement.attr(</span><span class="s3">\&quot;</span><span class="s1">stroke</span><span class="s3">\&quot;</span><span class="s1">, circleData.stroke);</span><span class="s3">\n  </span><span class="s1">circleElement.attr(</span><span class="s3">\&quot;</span><span class="s1">r</span><span class="s3">\&quot;</span><span class="s1">, circleData.r);</span><span class="s3">\n  </span><span class="s1">if (circleElement.class !== void 0) {</span><span class="s3">\n    </span><span class="s1">circleElement.attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, circleElement.class);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (circleData.title !== void 0) {</span><span class="s3">\n    </span><span class="s1">circleElement.append(</span><span class="s3">\&quot;</span><span class="s1">title</span><span class="s3">\&quot;</span><span class="s1">).text(circleData.title);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return circleElement;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">drawCircle</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var drawText2 = /* @__PURE__ */ __name(function(elem, textData) {</span><span class="s3">\n  </span><span class="s1">return drawText(elem, textData);</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">drawText</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var drawLabel = /* @__PURE__ */ __name(function(elem, txtObject) {</span><span class="s3">\n  </span><span class="s1">function genPoints(x, y, width, height, cut) {</span><span class="s3">\n    </span><span class="s1">return x + </span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot; </span><span class="s1">+ y + </span><span class="s3">\&quot; \&quot; </span><span class="s1">+ (x + width) + </span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot; </span><span class="s1">+ y + </span><span class="s3">\&quot; \&quot; </span><span class="s1">+ (x + width) + </span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot; </span><span class="s1">+ (y + height - cut) + </span><span class="s3">\&quot; \&quot; </span><span class="s1">+ (x + width - cut * 1.2) + </span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot; </span><span class="s1">+ (y + height) + </span><span class="s3">\&quot; \&quot; </span><span class="s1">+ x + </span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot; </span><span class="s1">+ (y + height);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">__name(genPoints, </span><span class="s3">\&quot;</span><span class="s1">genPoints</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const polygon = elem.append(</span><span class="s3">\&quot;</span><span class="s1">polygon</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">polygon.attr(</span><span class="s3">\&quot;</span><span class="s1">points</span><span class="s3">\&quot;</span><span class="s1">, genPoints(txtObject.x, txtObject.y, 50, 20, 7));</span><span class="s3">\n  </span><span class="s1">polygon.attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">labelBox</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">txtObject.y = txtObject.y + txtObject.labelMargin;</span><span class="s3">\n  </span><span class="s1">txtObject.x = txtObject.x + 0.5 * txtObject.labelMargin;</span><span class="s3">\n  </span><span class="s1">drawText2(elem, txtObject);</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">drawLabel</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var drawSection = /* @__PURE__ */ __name(function(elem, section, conf2) {</span><span class="s3">\n  </span><span class="s1">const g = elem.append(</span><span class="s3">\&quot;</span><span class="s1">g</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const rect = getNoteRect();</span><span class="s3">\n  </span><span class="s1">rect.x = section.x;</span><span class="s3">\n  </span><span class="s1">rect.y = section.y;</span><span class="s3">\n  </span><span class="s1">rect.fill = section.fill;</span><span class="s3">\n  </span><span class="s1">rect.width = conf2.width * section.taskCount + // width of the tasks</span><span class="s3">\n  </span><span class="s1">conf2.diagramMarginX * (section.taskCount - 1);</span><span class="s3">\n  </span><span class="s1">rect.height = conf2.height;</span><span class="s3">\n  </span><span class="s1">rect.class = </span><span class="s3">\&quot;</span><span class="s1">journey-section section-type-</span><span class="s3">\&quot; </span><span class="s1">+ section.num;</span><span class="s3">\n  </span><span class="s1">rect.rx = 3;</span><span class="s3">\n  </span><span class="s1">rect.ry = 3;</span><span class="s3">\n  </span><span class="s1">drawRect2(g, rect);</span><span class="s3">\n  </span><span class="s1">_drawTextCandidateFunc(conf2)(</span><span class="s3">\n    </span><span class="s1">section.text,</span><span class="s3">\n    </span><span class="s1">g,</span><span class="s3">\n    </span><span class="s1">rect.x,</span><span class="s3">\n    </span><span class="s1">rect.y,</span><span class="s3">\n    </span><span class="s1">rect.width,</span><span class="s3">\n    </span><span class="s1">rect.height,</span><span class="s3">\n    </span><span class="s1">{ class: </span><span class="s3">\&quot;</span><span class="s1">journey-section section-type-</span><span class="s3">\&quot; </span><span class="s1">+ section.num },</span><span class="s3">\n    </span><span class="s1">conf2,</span><span class="s3">\n    </span><span class="s1">section.colour</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">drawSection</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var taskCount = -1;</span><span class="s3">\n</span><span class="s1">var drawTask = /* @__PURE__ */ __name(function(elem, task, conf2) {</span><span class="s3">\n  </span><span class="s1">const center = task.x + conf2.width / 2;</span><span class="s3">\n  </span><span class="s1">const g = elem.append(</span><span class="s3">\&quot;</span><span class="s1">g</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">taskCount++;</span><span class="s3">\n  </span><span class="s1">const maxHeight = 300 + 5 * 30;</span><span class="s3">\n  </span><span class="s1">g.append(</span><span class="s3">\&quot;</span><span class="s1">line</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">id</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">task</span><span class="s3">\&quot; </span><span class="s1">+ taskCount).attr(</span><span class="s3">\&quot;</span><span class="s1">x1</span><span class="s3">\&quot;</span><span class="s1">, center).attr(</span><span class="s3">\&quot;</span><span class="s1">y1</span><span class="s3">\&quot;</span><span class="s1">, task.y).attr(</span><span class="s3">\&quot;</span><span class="s1">x2</span><span class="s3">\&quot;</span><span class="s1">, center).attr(</span><span class="s3">\&quot;</span><span class="s1">y2</span><span class="s3">\&quot;</span><span class="s1">, maxHeight).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">task-line</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">stroke-width</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">1px</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">stroke-dasharray</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">4 2</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">stroke</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">#666</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">drawFace(g, {</span><span class="s3">\n    </span><span class="s1">cx: center,</span><span class="s3">\n    </span><span class="s1">cy: 300 + (5 - task.score) * 30,</span><span class="s3">\n    </span><span class="s1">score: task.score</span><span class="s3">\n  </span><span class="s1">});</span><span class="s3">\n  </span><span class="s1">const rect = getNoteRect();</span><span class="s3">\n  </span><span class="s1">rect.x = task.x;</span><span class="s3">\n  </span><span class="s1">rect.y = task.y;</span><span class="s3">\n  </span><span class="s1">rect.fill = task.fill;</span><span class="s3">\n  </span><span class="s1">rect.width = conf2.width;</span><span class="s3">\n  </span><span class="s1">rect.height = conf2.height;</span><span class="s3">\n  </span><span class="s1">rect.class = </span><span class="s3">\&quot;</span><span class="s1">task task-type-</span><span class="s3">\&quot; </span><span class="s1">+ task.num;</span><span class="s3">\n  </span><span class="s1">rect.rx = 3;</span><span class="s3">\n  </span><span class="s1">rect.ry = 3;</span><span class="s3">\n  </span><span class="s1">drawRect2(g, rect);</span><span class="s3">\n  </span><span class="s1">let xPos = task.x + 14;</span><span class="s3">\n  </span><span class="s1">task.people.forEach((person) =&gt; {</span><span class="s3">\n    </span><span class="s1">const colour = task.actors[person].color;</span><span class="s3">\n    </span><span class="s1">const circle = {</span><span class="s3">\n      </span><span class="s1">cx: xPos,</span><span class="s3">\n      </span><span class="s1">cy: task.y,</span><span class="s3">\n      </span><span class="s1">r: 7,</span><span class="s3">\n      </span><span class="s1">fill: colour,</span><span class="s3">\n      </span><span class="s1">stroke: </span><span class="s3">\&quot;</span><span class="s1">#000</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n      </span><span class="s1">title: person,</span><span class="s3">\n      </span><span class="s1">pos: task.actors[person].position</span><span class="s3">\n    </span><span class="s1">};</span><span class="s3">\n    </span><span class="s1">drawCircle(g, circle);</span><span class="s3">\n    </span><span class="s1">xPos += 10;</span><span class="s3">\n  </span><span class="s1">});</span><span class="s3">\n  </span><span class="s1">_drawTextCandidateFunc(conf2)(</span><span class="s3">\n    </span><span class="s1">task.task,</span><span class="s3">\n    </span><span class="s1">g,</span><span class="s3">\n    </span><span class="s1">rect.x,</span><span class="s3">\n    </span><span class="s1">rect.y,</span><span class="s3">\n    </span><span class="s1">rect.width,</span><span class="s3">\n    </span><span class="s1">rect.height,</span><span class="s3">\n    </span><span class="s1">{ class: </span><span class="s3">\&quot;</span><span class="s1">task</span><span class="s3">\&quot; </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">conf2,</span><span class="s3">\n    </span><span class="s1">task.colour</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">drawTask</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var drawBackgroundRect2 = /* @__PURE__ */ __name(function(elem, bounds2) {</span><span class="s3">\n  </span><span class="s1">drawBackgroundRect(elem, bounds2);</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">drawBackgroundRect</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var _drawTextCandidateFunc = /* @__PURE__ */ function() {</span><span class="s3">\n  </span><span class="s1">function byText(content, g, x, y, width, height, textAttrs, colour) {</span><span class="s3">\n    </span><span class="s1">const text = g.append(</span><span class="s3">\&quot;</span><span class="s1">text</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">x</span><span class="s3">\&quot;</span><span class="s1">, x + width / 2).attr(</span><span class="s3">\&quot;</span><span class="s1">y</span><span class="s3">\&quot;</span><span class="s1">, y + height / 2 + 5).style(</span><span class="s3">\&quot;</span><span class="s1">font-color</span><span class="s3">\&quot;</span><span class="s1">, colour).style(</span><span class="s3">\&quot;</span><span class="s1">text-anchor</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">middle</span><span class="s3">\&quot;</span><span class="s1">).text(content);</span><span class="s3">\n    </span><span class="s1">_setTextAttrs(text, textAttrs);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">__name(byText, </span><span class="s3">\&quot;</span><span class="s1">byText</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">function byTspan(content, g, x, y, width, height, textAttrs, conf2, colour) {</span><span class="s3">\n    </span><span class="s1">const { taskFontSize, taskFontFamily } = conf2;</span><span class="s3">\n    </span><span class="s1">const lines = content.split(/&lt;br</span><span class="s3">\\</span><span class="s1">s*</span><span class="s3">\\</span><span class="s1">/?&gt;/gi);</span><span class="s3">\n    </span><span class="s1">for (let i = 0; i &lt; lines.length; i++) {</span><span class="s3">\n      </span><span class="s1">const dy = i * taskFontSize - taskFontSize * (lines.length - 1) / 2;</span><span class="s3">\n      </span><span class="s1">const text = g.append(</span><span class="s3">\&quot;</span><span class="s1">text</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">x</span><span class="s3">\&quot;</span><span class="s1">, x + width / 2).attr(</span><span class="s3">\&quot;</span><span class="s1">y</span><span class="s3">\&quot;</span><span class="s1">, y).attr(</span><span class="s3">\&quot;</span><span class="s1">fill</span><span class="s3">\&quot;</span><span class="s1">, colour).style(</span><span class="s3">\&quot;</span><span class="s1">text-anchor</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">middle</span><span class="s3">\&quot;</span><span class="s1">).style(</span><span class="s3">\&quot;</span><span class="s1">font-size</span><span class="s3">\&quot;</span><span class="s1">, taskFontSize).style(</span><span class="s3">\&quot;</span><span class="s1">font-family</span><span class="s3">\&quot;</span><span class="s1">, taskFontFamily);</span><span class="s3">\n      </span><span class="s1">text.append(</span><span class="s3">\&quot;</span><span class="s1">tspan</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">x</span><span class="s3">\&quot;</span><span class="s1">, x + width / 2).attr(</span><span class="s3">\&quot;</span><span class="s1">dy</span><span class="s3">\&quot;</span><span class="s1">, dy).text(lines[i]);</span><span class="s3">\n      </span><span class="s1">text.attr(</span><span class="s3">\&quot;</span><span class="s1">y</span><span class="s3">\&quot;</span><span class="s1">, y + height / 2).attr(</span><span class="s3">\&quot;</span><span class="s1">dominant-baseline</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">central</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">alignment-baseline</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">central</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">_setTextAttrs(text, textAttrs);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">__name(byTspan, </span><span class="s3">\&quot;</span><span class="s1">byTspan</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">function byFo(content, g, x, y, width, height, textAttrs, conf2) {</span><span class="s3">\n    </span><span class="s1">const body = g.append(</span><span class="s3">\&quot;</span><span class="s1">switch</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">const f = body.append(</span><span class="s3">\&quot;</span><span class="s1">foreignObject</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">x</span><span class="s3">\&quot;</span><span class="s1">, x).attr(</span><span class="s3">\&quot;</span><span class="s1">y</span><span class="s3">\&quot;</span><span class="s1">, y).attr(</span><span class="s3">\&quot;</span><span class="s1">width</span><span class="s3">\&quot;</span><span class="s1">, width).attr(</span><span class="s3">\&quot;</span><span class="s1">height</span><span class="s3">\&quot;</span><span class="s1">, height).attr(</span><span class="s3">\&quot;</span><span class="s1">position</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">fixed</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">const text = f.append(</span><span class="s3">\&quot;</span><span class="s1">xhtml:div</span><span class="s3">\&quot;</span><span class="s1">).style(</span><span class="s3">\&quot;</span><span class="s1">display</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">table</span><span class="s3">\&quot;</span><span class="s1">).style(</span><span class="s3">\&quot;</span><span class="s1">height</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">100%</span><span class="s3">\&quot;</span><span class="s1">).style(</span><span class="s3">\&quot;</span><span class="s1">width</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">100%</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">text.append(</span><span class="s3">\&quot;</span><span class="s1">div</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">label</span><span class="s3">\&quot;</span><span class="s1">).style(</span><span class="s3">\&quot;</span><span class="s1">display</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">table-cell</span><span class="s3">\&quot;</span><span class="s1">).style(</span><span class="s3">\&quot;</span><span class="s1">text-align</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">center</span><span class="s3">\&quot;</span><span class="s1">).style(</span><span class="s3">\&quot;</span><span class="s1">vertical-align</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">middle</span><span class="s3">\&quot;</span><span class="s1">).text(content);</span><span class="s3">\n    </span><span class="s1">byTspan(content, body, x, y, width, height, textAttrs, conf2);</span><span class="s3">\n    </span><span class="s1">_setTextAttrs(text, textAttrs);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">__name(byFo, </span><span class="s3">\&quot;</span><span class="s1">byFo</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">function _setTextAttrs(toText, fromTextAttrsDict) {</span><span class="s3">\n    </span><span class="s1">for (const key in fromTextAttrsDict) {</span><span class="s3">\n      </span><span class="s1">if (key in fromTextAttrsDict) {</span><span class="s3">\n        </span><span class="s1">toText.attr(key, fromTextAttrsDict[key]);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">__name(_setTextAttrs, </span><span class="s3">\&quot;</span><span class="s1">_setTextAttrs</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">return function(conf2) {</span><span class="s3">\n    </span><span class="s1">return conf2.textPlacement === </span><span class="s3">\&quot;</span><span class="s1">fo</span><span class="s3">\&quot; </span><span class="s1">? byFo : conf2.textPlacement === </span><span class="s3">\&quot;</span><span class="s1">old</span><span class="s3">\&quot; </span><span class="s1">? byText : byTspan;</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n</span><span class="s1">}();</span><span class="s3">\n</span><span class="s1">var initGraphics = /* @__PURE__ */ __name(function(graphics) {</span><span class="s3">\n  </span><span class="s1">graphics.append(</span><span class="s3">\&quot;</span><span class="s1">defs</span><span class="s3">\&quot;</span><span class="s1">).append(</span><span class="s3">\&quot;</span><span class="s1">marker</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">id</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">arrowhead</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">refX</span><span class="s3">\&quot;</span><span class="s1">, 5).attr(</span><span class="s3">\&quot;</span><span class="s1">refY</span><span class="s3">\&quot;</span><span class="s1">, 2).attr(</span><span class="s3">\&quot;</span><span class="s1">markerWidth</span><span class="s3">\&quot;</span><span class="s1">, 6).attr(</span><span class="s3">\&quot;</span><span class="s1">markerHeight</span><span class="s3">\&quot;</span><span class="s1">, 4).attr(</span><span class="s3">\&quot;</span><span class="s1">orient</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">auto</span><span class="s3">\&quot;</span><span class="s1">).append(</span><span class="s3">\&quot;</span><span class="s1">path</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">d</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">M 0,0 V 4 L6,2 Z</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">initGraphics</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var svgDraw_default = {</span><span class="s3">\n  </span><span class="s1">drawRect: drawRect2,</span><span class="s3">\n  </span><span class="s1">drawCircle,</span><span class="s3">\n  </span><span class="s1">drawSection,</span><span class="s3">\n  </span><span class="s1">drawText: drawText2,</span><span class="s3">\n  </span><span class="s1">drawLabel,</span><span class="s3">\n  </span><span class="s1">drawTask,</span><span class="s3">\n  </span><span class="s1">drawBackgroundRect: drawBackgroundRect2,</span><span class="s3">\n  </span><span class="s1">initGraphics</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n\n</span><span class="s1">// src/diagrams/user-journey/journeyRenderer.ts</span><span class="s3">\n</span><span class="s1">var setConf = /* @__PURE__ */ __name(function(cnf) {</span><span class="s3">\n  </span><span class="s1">const keys = Object.keys(cnf);</span><span class="s3">\n  </span><span class="s1">keys.forEach(function(key) {</span><span class="s3">\n    </span><span class="s1">conf[key] = cnf[key];</span><span class="s3">\n  </span><span class="s1">});</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">setConf</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var actors = {};</span><span class="s3">\n</span><span class="s1">function drawActorLegend(diagram2) {</span><span class="s3">\n  </span><span class="s1">const conf2 = getConfig().journey;</span><span class="s3">\n  </span><span class="s1">let yPos = 60;</span><span class="s3">\n  </span><span class="s1">Object.keys(actors).forEach((person) =&gt; {</span><span class="s3">\n    </span><span class="s1">const colour = actors[person].color;</span><span class="s3">\n    </span><span class="s1">const circleData = {</span><span class="s3">\n      </span><span class="s1">cx: 20,</span><span class="s3">\n      </span><span class="s1">cy: yPos,</span><span class="s3">\n      </span><span class="s1">r: 7,</span><span class="s3">\n      </span><span class="s1">fill: colour,</span><span class="s3">\n      </span><span class="s1">stroke: </span><span class="s3">\&quot;</span><span class="s1">#000</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n      </span><span class="s1">pos: actors[person].position</span><span class="s3">\n    </span><span class="s1">};</span><span class="s3">\n    </span><span class="s1">svgDraw_default.drawCircle(diagram2, circleData);</span><span class="s3">\n    </span><span class="s1">const labelData = {</span><span class="s3">\n      </span><span class="s1">x: 40,</span><span class="s3">\n      </span><span class="s1">y: yPos + 7,</span><span class="s3">\n      </span><span class="s1">fill: </span><span class="s3">\&quot;</span><span class="s1">#666</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n      </span><span class="s1">text: person,</span><span class="s3">\n      </span><span class="s1">textMargin: conf2.boxTextMargin | 5</span><span class="s3">\n    </span><span class="s1">};</span><span class="s3">\n    </span><span class="s1">svgDraw_default.drawText(diagram2, labelData);</span><span class="s3">\n    </span><span class="s1">yPos += 20;</span><span class="s3">\n  </span><span class="s1">});</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">__name(drawActorLegend, </span><span class="s3">\&quot;</span><span class="s1">drawActorLegend</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var conf = getConfig().journey;</span><span class="s3">\n</span><span class="s1">var LEFT_MARGIN = conf.leftMargin;</span><span class="s3">\n</span><span class="s1">var draw = /* @__PURE__ */ __name(function(text, id, version, diagObj) {</span><span class="s3">\n  </span><span class="s1">const conf2 = getConfig().journey;</span><span class="s3">\n  </span><span class="s1">const securityLevel = getConfig().securityLevel;</span><span class="s3">\n  </span><span class="s1">let sandboxElement;</span><span class="s3">\n  </span><span class="s1">if (securityLevel === </span><span class="s3">\&quot;</span><span class="s1">sandbox</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">sandboxElement = select(</span><span class="s3">\&quot;</span><span class="s1">#i</span><span class="s3">\&quot; </span><span class="s1">+ id);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">const root = securityLevel === </span><span class="s3">\&quot;</span><span class="s1">sandbox</span><span class="s3">\&quot; </span><span class="s1">? select(sandboxElement.nodes()[0].contentDocument.body) : select(</span><span class="s3">\&quot;</span><span class="s1">body</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">bounds.init();</span><span class="s3">\n  </span><span class="s1">const diagram2 = root.select(</span><span class="s3">\&quot;</span><span class="s1">#</span><span class="s3">\&quot; </span><span class="s1">+ id);</span><span class="s3">\n  </span><span class="s1">svgDraw_default.initGraphics(diagram2);</span><span class="s3">\n  </span><span class="s1">const tasks2 = diagObj.db.getTasks();</span><span class="s3">\n  </span><span class="s1">const title = diagObj.db.getDiagramTitle();</span><span class="s3">\n  </span><span class="s1">const actorNames = diagObj.db.getActors();</span><span class="s3">\n  </span><span class="s1">for (const member in actors) {</span><span class="s3">\n    </span><span class="s1">delete actors[member];</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">let actorPos = 0;</span><span class="s3">\n  </span><span class="s1">actorNames.forEach((actorName) =&gt; {</span><span class="s3">\n    </span><span class="s1">actors[actorName] = {</span><span class="s3">\n      </span><span class="s1">color: conf2.actorColours[actorPos % conf2.actorColours.length],</span><span class="s3">\n      </span><span class="s1">position: actorPos</span><span class="s3">\n    </span><span class="s1">};</span><span class="s3">\n    </span><span class="s1">actorPos++;</span><span class="s3">\n  </span><span class="s1">});</span><span class="s3">\n  </span><span class="s1">drawActorLegend(diagram2);</span><span class="s3">\n  </span><span class="s1">bounds.insert(0, 0, LEFT_MARGIN, Object.keys(actors).length * 50);</span><span class="s3">\n  </span><span class="s1">drawTasks(diagram2, tasks2, 0);</span><span class="s3">\n  </span><span class="s1">const box = bounds.getBounds();</span><span class="s3">\n  </span><span class="s1">if (title) {</span><span class="s3">\n    </span><span class="s1">diagram2.append(</span><span class="s3">\&quot;</span><span class="s1">text</span><span class="s3">\&quot;</span><span class="s1">).text(title).attr(</span><span class="s3">\&quot;</span><span class="s1">x</span><span class="s3">\&quot;</span><span class="s1">, LEFT_MARGIN).attr(</span><span class="s3">\&quot;</span><span class="s1">font-size</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">4ex</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">font-weight</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">bold</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">y</span><span class="s3">\&quot;</span><span class="s1">, 25);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">const height = box.stopy - box.starty + 2 * conf2.diagramMarginY;</span><span class="s3">\n  </span><span class="s1">const width = LEFT_MARGIN + box.stopx + 2 * conf2.diagramMarginX;</span><span class="s3">\n  </span><span class="s1">configureSvgSize(diagram2, height, width, conf2.useMaxWidth);</span><span class="s3">\n  </span><span class="s1">diagram2.append(</span><span class="s3">\&quot;</span><span class="s1">line</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">x1</span><span class="s3">\&quot;</span><span class="s1">, LEFT_MARGIN).attr(</span><span class="s3">\&quot;</span><span class="s1">y1</span><span class="s3">\&quot;</span><span class="s1">, conf2.height * 4).attr(</span><span class="s3">\&quot;</span><span class="s1">x2</span><span class="s3">\&quot;</span><span class="s1">, width - LEFT_MARGIN - 4).attr(</span><span class="s3">\&quot;</span><span class="s1">y2</span><span class="s3">\&quot;</span><span class="s1">, conf2.height * 4).attr(</span><span class="s3">\&quot;</span><span class="s1">stroke-width</span><span class="s3">\&quot;</span><span class="s1">, 4).attr(</span><span class="s3">\&quot;</span><span class="s1">stroke</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">black</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">marker-end</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">url(#arrowhead)</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const extraVertForTitle = title ? 70 : 0;</span><span class="s3">\n  </span><span class="s1">diagram2.attr(</span><span class="s3">\&quot;</span><span class="s1">viewBox</span><span class="s3">\&quot;</span><span class="s1">, `${box.startx} -25 ${width} ${height + extraVertForTitle}`);</span><span class="s3">\n  </span><span class="s1">diagram2.attr(</span><span class="s3">\&quot;</span><span class="s1">preserveAspectRatio</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">xMinYMin meet</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">diagram2.attr(</span><span class="s3">\&quot;</span><span class="s1">height</span><span class="s3">\&quot;</span><span class="s1">, height + extraVertForTitle + 25);</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">draw</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var bounds = {</span><span class="s3">\n  </span><span class="s1">data: {</span><span class="s3">\n    </span><span class="s1">startx: void 0,</span><span class="s3">\n    </span><span class="s1">stopx: void 0,</span><span class="s3">\n    </span><span class="s1">starty: void 0,</span><span class="s3">\n    </span><span class="s1">stopy: void 0</span><span class="s3">\n  </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">verticalPos: 0,</span><span class="s3">\n  </span><span class="s1">sequenceItems: [],</span><span class="s3">\n  </span><span class="s1">init: /* @__PURE__ */ __name(function() {</span><span class="s3">\n    </span><span class="s1">this.sequenceItems = [];</span><span class="s3">\n    </span><span class="s1">this.data = {</span><span class="s3">\n      </span><span class="s1">startx: void 0,</span><span class="s3">\n      </span><span class="s1">stopx: void 0,</span><span class="s3">\n      </span><span class="s1">starty: void 0,</span><span class="s3">\n      </span><span class="s1">stopy: void 0</span><span class="s3">\n    </span><span class="s1">};</span><span class="s3">\n    </span><span class="s1">this.verticalPos = 0;</span><span class="s3">\n  </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">init</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n  </span><span class="s1">updateVal: /* @__PURE__ */ __name(function(obj, key, val, fun) {</span><span class="s3">\n    </span><span class="s1">if (obj[key] === void 0) {</span><span class="s3">\n      </span><span class="s1">obj[key] = val;</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">obj[key] = fun(val, obj[key]);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">updateVal</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n  </span><span class="s1">updateBounds: /* @__PURE__ */ __name(function(startx, starty, stopx, stopy) {</span><span class="s3">\n    </span><span class="s1">const conf2 = getConfig().journey;</span><span class="s3">\n    </span><span class="s1">const _self = this;</span><span class="s3">\n    </span><span class="s1">let cnt = 0;</span><span class="s3">\n    </span><span class="s1">function updateFn(type) {</span><span class="s3">\n      </span><span class="s1">return /* @__PURE__ */ __name(function updateItemBounds(item) {</span><span class="s3">\n        </span><span class="s1">cnt++;</span><span class="s3">\n        </span><span class="s1">const n = _self.sequenceItems.length - cnt + 1;</span><span class="s3">\n        </span><span class="s1">_self.updateVal(item, </span><span class="s3">\&quot;</span><span class="s1">starty</span><span class="s3">\&quot;</span><span class="s1">, starty - n * conf2.boxMargin, Math.min);</span><span class="s3">\n        </span><span class="s1">_self.updateVal(item, </span><span class="s3">\&quot;</span><span class="s1">stopy</span><span class="s3">\&quot;</span><span class="s1">, stopy + n * conf2.boxMargin, Math.max);</span><span class="s3">\n        </span><span class="s1">_self.updateVal(bounds.data, </span><span class="s3">\&quot;</span><span class="s1">startx</span><span class="s3">\&quot;</span><span class="s1">, startx - n * conf2.boxMargin, Math.min);</span><span class="s3">\n        </span><span class="s1">_self.updateVal(bounds.data, </span><span class="s3">\&quot;</span><span class="s1">stopx</span><span class="s3">\&quot;</span><span class="s1">, stopx + n * conf2.boxMargin, Math.max);</span><span class="s3">\n        </span><span class="s1">if (!(type === </span><span class="s3">\&quot;</span><span class="s1">activation</span><span class="s3">\&quot;</span><span class="s1">)) {</span><span class="s3">\n          </span><span class="s1">_self.updateVal(item, </span><span class="s3">\&quot;</span><span class="s1">startx</span><span class="s3">\&quot;</span><span class="s1">, startx - n * conf2.boxMargin, Math.min);</span><span class="s3">\n          </span><span class="s1">_self.updateVal(item, </span><span class="s3">\&quot;</span><span class="s1">stopx</span><span class="s3">\&quot;</span><span class="s1">, stopx + n * conf2.boxMargin, Math.max);</span><span class="s3">\n          </span><span class="s1">_self.updateVal(bounds.data, </span><span class="s3">\&quot;</span><span class="s1">starty</span><span class="s3">\&quot;</span><span class="s1">, starty - n * conf2.boxMargin, Math.min);</span><span class="s3">\n          </span><span class="s1">_self.updateVal(bounds.data, </span><span class="s3">\&quot;</span><span class="s1">stopy</span><span class="s3">\&quot;</span><span class="s1">, stopy + n * conf2.boxMargin, Math.max);</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">updateItemBounds</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">__name(updateFn, </span><span class="s3">\&quot;</span><span class="s1">updateFn</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">this.sequenceItems.forEach(updateFn());</span><span class="s3">\n  </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">updateBounds</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n  </span><span class="s1">insert: /* @__PURE__ */ __name(function(startx, starty, stopx, stopy) {</span><span class="s3">\n    </span><span class="s1">const _startx = Math.min(startx, stopx);</span><span class="s3">\n    </span><span class="s1">const _stopx = Math.max(startx, stopx);</span><span class="s3">\n    </span><span class="s1">const _starty = Math.min(starty, stopy);</span><span class="s3">\n    </span><span class="s1">const _stopy = Math.max(starty, stopy);</span><span class="s3">\n    </span><span class="s1">this.updateVal(bounds.data, </span><span class="s3">\&quot;</span><span class="s1">startx</span><span class="s3">\&quot;</span><span class="s1">, _startx, Math.min);</span><span class="s3">\n    </span><span class="s1">this.updateVal(bounds.data, </span><span class="s3">\&quot;</span><span class="s1">starty</span><span class="s3">\&quot;</span><span class="s1">, _starty, Math.min);</span><span class="s3">\n    </span><span class="s1">this.updateVal(bounds.data, </span><span class="s3">\&quot;</span><span class="s1">stopx</span><span class="s3">\&quot;</span><span class="s1">, _stopx, Math.max);</span><span class="s3">\n    </span><span class="s1">this.updateVal(bounds.data, </span><span class="s3">\&quot;</span><span class="s1">stopy</span><span class="s3">\&quot;</span><span class="s1">, _stopy, Math.max);</span><span class="s3">\n    </span><span class="s1">this.updateBounds(_startx, _starty, _stopx, _stopy);</span><span class="s3">\n  </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">insert</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n  </span><span class="s1">bumpVerticalPos: /* @__PURE__ */ __name(function(bump) {</span><span class="s3">\n    </span><span class="s1">this.verticalPos = this.verticalPos + bump;</span><span class="s3">\n    </span><span class="s1">this.data.stopy = this.verticalPos;</span><span class="s3">\n  </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">bumpVerticalPos</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n  </span><span class="s1">getVerticalPos: /* @__PURE__ */ __name(function() {</span><span class="s3">\n    </span><span class="s1">return this.verticalPos;</span><span class="s3">\n  </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">getVerticalPos</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n  </span><span class="s1">getBounds: /* @__PURE__ */ __name(function() {</span><span class="s3">\n    </span><span class="s1">return this.data;</span><span class="s3">\n  </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">getBounds</span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n</span><span class="s1">var fills = conf.sectionFills;</span><span class="s3">\n</span><span class="s1">var textColours = conf.sectionColours;</span><span class="s3">\n</span><span class="s1">var drawTasks = /* @__PURE__ */ __name(function(diagram2, tasks2, verticalPos) {</span><span class="s3">\n  </span><span class="s1">const conf2 = getConfig().journey;</span><span class="s3">\n  </span><span class="s1">let lastSection = </span><span class="s3">\&quot;\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">const sectionVHeight = conf2.height * 2 + conf2.diagramMarginY;</span><span class="s3">\n  </span><span class="s1">const taskPos = verticalPos + sectionVHeight;</span><span class="s3">\n  </span><span class="s1">let sectionNumber = 0;</span><span class="s3">\n  </span><span class="s1">let fill = </span><span class="s3">\&quot;</span><span class="s1">#CCC</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">let colour = </span><span class="s3">\&quot;</span><span class="s1">black</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">let num = 0;</span><span class="s3">\n  </span><span class="s1">for (const [i, task] of tasks2.entries()) {</span><span class="s3">\n    </span><span class="s1">if (lastSection !== task.section) {</span><span class="s3">\n      </span><span class="s1">fill = fills[sectionNumber % fills.length];</span><span class="s3">\n      </span><span class="s1">num = sectionNumber % fills.length;</span><span class="s3">\n      </span><span class="s1">colour = textColours[sectionNumber % textColours.length];</span><span class="s3">\n      </span><span class="s1">let taskInSectionCount = 0;</span><span class="s3">\n      </span><span class="s1">const currentSection2 = task.section;</span><span class="s3">\n      </span><span class="s1">for (let taskIndex = i; taskIndex &lt; tasks2.length; taskIndex++) {</span><span class="s3">\n        </span><span class="s1">if (tasks2[taskIndex].section == currentSection2) {</span><span class="s3">\n          </span><span class="s1">taskInSectionCount = taskInSectionCount + 1;</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">const section = {</span><span class="s3">\n        </span><span class="s1">x: i * conf2.taskMargin + i * conf2.width + LEFT_MARGIN,</span><span class="s3">\n        </span><span class="s1">y: 50,</span><span class="s3">\n        </span><span class="s1">text: task.section,</span><span class="s3">\n        </span><span class="s1">fill,</span><span class="s3">\n        </span><span class="s1">num,</span><span class="s3">\n        </span><span class="s1">colour,</span><span class="s3">\n        </span><span class="s1">taskCount: taskInSectionCount</span><span class="s3">\n      </span><span class="s1">};</span><span class="s3">\n      </span><span class="s1">svgDraw_default.drawSection(diagram2, section, conf2);</span><span class="s3">\n      </span><span class="s1">lastSection = task.section;</span><span class="s3">\n      </span><span class="s1">sectionNumber++;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">const taskActors = task.people.reduce((acc, actorName) =&gt; {</span><span class="s3">\n      </span><span class="s1">if (actors[actorName]) {</span><span class="s3">\n        </span><span class="s1">acc[actorName] = actors[actorName];</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">return acc;</span><span class="s3">\n    </span><span class="s1">}, {});</span><span class="s3">\n    </span><span class="s1">task.x = i * conf2.taskMargin + i * conf2.width + LEFT_MARGIN;</span><span class="s3">\n    </span><span class="s1">task.y = taskPos;</span><span class="s3">\n    </span><span class="s1">task.width = conf2.diagramMarginX;</span><span class="s3">\n    </span><span class="s1">task.height = conf2.diagramMarginY;</span><span class="s3">\n    </span><span class="s1">task.colour = colour;</span><span class="s3">\n    </span><span class="s1">task.fill = fill;</span><span class="s3">\n    </span><span class="s1">task.num = num;</span><span class="s3">\n    </span><span class="s1">task.actors = taskActors;</span><span class="s3">\n    </span><span class="s1">svgDraw_default.drawTask(diagram2, task, conf2);</span><span class="s3">\n    </span><span class="s1">bounds.insert(task.x, task.y, task.x + task.width + conf2.taskMargin, 300 + 5 * 30);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">drawTasks</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var journeyRenderer_default = {</span><span class="s3">\n  </span><span class="s1">setConf,</span><span class="s3">\n  </span><span class="s1">draw</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n\n</span><span class="s1">// src/diagrams/user-journey/journeyDiagram.ts</span><span class="s3">\n</span><span class="s1">var diagram = {</span><span class="s3">\n  </span><span class="s1">parser: journey_default,</span><span class="s3">\n  </span><span class="s1">db: journeyDb_default,</span><span class="s3">\n  </span><span class="s1">renderer: journeyRenderer_default,</span><span class="s3">\n  </span><span class="s1">styles: styles_default,</span><span class="s3">\n  </span><span class="s1">init: /* @__PURE__ */ __name((cnf) =&gt; {</span><span class="s3">\n    </span><span class="s1">journeyRenderer_default.setConf(cnf.journey);</span><span class="s3">\n    </span><span class="s1">journeyDb_default.clear();</span><span class="s3">\n  </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">init</span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n</span><span class="s1">export {</span><span class="s3">\n  </span><span class="s1">diagram</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[],</span><span class="s1">&quot;sourceRoot&quot;</span><span class="s0">:</span><span class="s1">&quot;&quot;</span><span class="s0">}</span></pre>
</body>
</html>