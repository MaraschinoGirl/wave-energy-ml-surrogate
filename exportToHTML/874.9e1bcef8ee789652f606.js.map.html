<html>
<head>
<title>874.9e1bcef8ee789652f606.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #bcbec4;}
.s1 { color: #6aab73;}
.s2 { color: #2aacb8;}
.s3 { color: #cf8e6d;}
.ln { color: #4b5059; font-weight: normal; font-style: normal; }
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
874.9e1bcef8ee789652f606.js.map</font>
</center></td></tr></table>
<pre><a name="l1"><span class="ln">1    </span></a><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;file&quot;</span><span class="s0">:</span><span class="s1">&quot;874.9e1bcef8ee789652f606.js?v=9e1bcef8ee789652f606&quot;</span><span class="s0">,</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;;;;;AAE8B;;AAE9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAM;;AAIJ;;;;;;;;;;;;;;;;;AClB4B;AAIA;AAGA;AAcA;;AAE9B;AAC2C;;AAE3C;AACA,yBAAyB,gFAAqB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,qEAAM;AACvC,6BAA6B,qEAAM;AACnC;AACA;AACA,EAAE,oEAAK;AACP,CAAC;AACD,iCAAiC,qEAAM,IAAI,cAAc;AACzD;AACA;AACA,IAAI,8DAAG,6BAA6B,MAAM,gBAAgB,MAAM;AAChE;AACA,CAAC;AACD,kCAAkC,qEAAM;AACxC,kCAAkC,qEAAM;AACxC;AACA,CAAC;AACD,kCAAkC,qEAAM;AACxC;AACA;AACA;AACA,iBAAiB;AACjB,iBAAiB;AACjB,aAAa;AACb,aAAa;AACb,mBAAmB;AACnB,mBAAmB;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA,iCAAiC,qEAAM;AACvC,EAAE,8EAAgB;AAClB;AACA;AACA,CAAC;AACD;AACA,yBAAyB,qEAAM;AAC/B,sBAAsB,mEAAK;AAC3B,IAAI,8DAAG;AACP;AACA,GAAG;AACH;;AAEA;AACA,gCAAgC,qEAAM;AACtC;AACA,cAAc;AACd,qBAAqB;AACrB,gBAAgB;AAChB;AACA;AACA,cAAc;AACd,oBAAoB;AACpB;AACA;AACA;AACA;AACA,iBAAiB;AACjB,YAAY;AACZ,mBAAmB;AACnB;AACA;AACA,mBAAmB;AACnB,YAAY;AACZ,gBAAgB;AAChB;AACA;AACA;AACA,YAAY;AACZ,mBAAmB;AACnB,iBAAiB;AACjB;AACA;AACA;;AAEA;AACqD;AACrD,oCAAoC,qEAAM;AAC1C;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH,cAAc,kDAAK;AACnB;AACA;AACA;AACA,CAAC;AACD,2BAA2B,qEAAM;AACjC,EAAE,8DAAG;AACL;AACA,uBAAuB,yEAAS;AAChC,oBAAoB,4EAAa;AACjC;AACA;AACA;AACA;AACA;AACA,cAAc,8EAAgB;AAC9B;AACA;AACA,UAAU,iBAAiB;AAC3B,2BAA2B,4EAAa;AACxC;AACA;AACA;AACA,uBAAuB,kDAAG;AAC1B,4BAA4B,kDAAG;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,2DAAY;AAC5B;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,YAAY,eAAe;AAC3B;AACA,gBAAgB,OAAO,GAAG,MAAM;AAChC;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,6BAA6B,YAAY,EAAE,OAAO;AAClD,EAAE,+EAAgB;AAClB,CAAC;AACD,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA;AACA;AACA;AAGE&quot;</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/mermaid/dist/chunks/mermaid.core/chunk-4BMEZGHF.mjs&quot;</span><span class="s0">,</span><span class="s1">&quot;webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/mermaid/dist/chunks/mermaid.core/pieDiagram-IB7DONF6.mjs&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import {</span><span class="s3">\n  </span><span class="s1">__name</span><span class="s3">\n</span><span class="s1">} from </span><span class="s3">\&quot;</span><span class="s1">./chunk-YTJNT7DU.mjs</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n\n</span><span class="s1">// src/diagrams/common/populateCommonDb.ts</span><span class="s3">\n</span><span class="s1">function populateCommonDb(ast, db) {</span><span class="s3">\n  </span><span class="s1">if (ast.accDescr) {</span><span class="s3">\n    </span><span class="s1">db.setAccDescription?.(ast.accDescr);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (ast.accTitle) {</span><span class="s3">\n    </span><span class="s1">db.setAccTitle?.(ast.accTitle);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (ast.title) {</span><span class="s3">\n    </span><span class="s1">db.setDiagramTitle?.(ast.title);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">__name(populateCommonDb, </span><span class="s3">\&quot;</span><span class="s1">populateCommonDb</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n\n</span><span class="s1">export {</span><span class="s3">\n  </span><span class="s1">populateCommonDb</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">,</span><span class="s1">&quot;import {</span><span class="s3">\n  </span><span class="s1">populateCommonDb</span><span class="s3">\n</span><span class="s1">} from </span><span class="s3">\&quot;</span><span class="s1">./chunk-4BMEZGHF.mjs</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">cleanAndMerge,</span><span class="s3">\n  </span><span class="s1">parseFontSize</span><span class="s3">\n</span><span class="s1">} from </span><span class="s3">\&quot;</span><span class="s1">./chunk-O4NI6UNU.mjs</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">selectSvgElement</span><span class="s3">\n</span><span class="s1">} from </span><span class="s3">\&quot;</span><span class="s1">./chunk-7B677QYD.mjs</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">__name,</span><span class="s3">\n  </span><span class="s1">clear,</span><span class="s3">\n  </span><span class="s1">configureSvgSize,</span><span class="s3">\n  </span><span class="s1">defaultConfig_default,</span><span class="s3">\n  </span><span class="s1">getAccDescription,</span><span class="s3">\n  </span><span class="s1">getAccTitle,</span><span class="s3">\n  </span><span class="s1">getConfig2 as getConfig,</span><span class="s3">\n  </span><span class="s1">getDiagramTitle,</span><span class="s3">\n  </span><span class="s1">log,</span><span class="s3">\n  </span><span class="s1">setAccDescription,</span><span class="s3">\n  </span><span class="s1">setAccTitle,</span><span class="s3">\n  </span><span class="s1">setDiagramTitle</span><span class="s3">\n</span><span class="s1">} from </span><span class="s3">\&quot;</span><span class="s1">./chunk-YTJNT7DU.mjs</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n\n</span><span class="s1">// src/diagrams/pie/pieParser.ts</span><span class="s3">\n</span><span class="s1">import { parse } from </span><span class="s3">\&quot;</span><span class="s1">@mermaid-js/parser</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n\n</span><span class="s1">// src/diagrams/pie/pieDb.ts</span><span class="s3">\n</span><span class="s1">var DEFAULT_PIE_CONFIG = defaultConfig_default.pie;</span><span class="s3">\n</span><span class="s1">var DEFAULT_PIE_DB = {</span><span class="s3">\n  </span><span class="s1">sections: /* @__PURE__ */ new Map(),</span><span class="s3">\n  </span><span class="s1">showData: false,</span><span class="s3">\n  </span><span class="s1">config: DEFAULT_PIE_CONFIG</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n</span><span class="s1">var sections = DEFAULT_PIE_DB.sections;</span><span class="s3">\n</span><span class="s1">var showData = DEFAULT_PIE_DB.showData;</span><span class="s3">\n</span><span class="s1">var config = structuredClone(DEFAULT_PIE_CONFIG);</span><span class="s3">\n</span><span class="s1">var getConfig2 = /* @__PURE__ */ __name(() =&gt; structuredClone(config), </span><span class="s3">\&quot;</span><span class="s1">getConfig</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var clear2 = /* @__PURE__ */ __name(() =&gt; {</span><span class="s3">\n  </span><span class="s1">sections = /* @__PURE__ */ new Map();</span><span class="s3">\n  </span><span class="s1">showData = DEFAULT_PIE_DB.showData;</span><span class="s3">\n  </span><span class="s1">clear();</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">clear</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var addSection = /* @__PURE__ */ __name(({ label, value }) =&gt; {</span><span class="s3">\n  </span><span class="s1">if (!sections.has(label)) {</span><span class="s3">\n    </span><span class="s1">sections.set(label, value);</span><span class="s3">\n    </span><span class="s1">log.debug(`added new section: ${label}, with value: ${value}`);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">addSection</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var getSections = /* @__PURE__ */ __name(() =&gt; sections, </span><span class="s3">\&quot;</span><span class="s1">getSections</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var setShowData = /* @__PURE__ */ __name((toggle) =&gt; {</span><span class="s3">\n  </span><span class="s1">showData = toggle;</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">setShowData</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var getShowData = /* @__PURE__ */ __name(() =&gt; showData, </span><span class="s3">\&quot;</span><span class="s1">getShowData</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var db = {</span><span class="s3">\n  </span><span class="s1">getConfig: getConfig2,</span><span class="s3">\n  </span><span class="s1">clear: clear2,</span><span class="s3">\n  </span><span class="s1">setDiagramTitle,</span><span class="s3">\n  </span><span class="s1">getDiagramTitle,</span><span class="s3">\n  </span><span class="s1">setAccTitle,</span><span class="s3">\n  </span><span class="s1">getAccTitle,</span><span class="s3">\n  </span><span class="s1">setAccDescription,</span><span class="s3">\n  </span><span class="s1">getAccDescription,</span><span class="s3">\n  </span><span class="s1">addSection,</span><span class="s3">\n  </span><span class="s1">getSections,</span><span class="s3">\n  </span><span class="s1">setShowData,</span><span class="s3">\n  </span><span class="s1">getShowData</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n\n</span><span class="s1">// src/diagrams/pie/pieParser.ts</span><span class="s3">\n</span><span class="s1">var populateDb = /* @__PURE__ */ __name((ast, db2) =&gt; {</span><span class="s3">\n  </span><span class="s1">populateCommonDb(ast, db2);</span><span class="s3">\n  </span><span class="s1">db2.setShowData(ast.showData);</span><span class="s3">\n  </span><span class="s1">ast.sections.map(db2.addSection);</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">populateDb</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var parser = {</span><span class="s3">\n  </span><span class="s1">parse: /* @__PURE__ */ __name(async (input) =&gt; {</span><span class="s3">\n    </span><span class="s1">const ast = await parse(</span><span class="s3">\&quot;</span><span class="s1">pie</span><span class="s3">\&quot;</span><span class="s1">, input);</span><span class="s3">\n    </span><span class="s1">log.debug(ast);</span><span class="s3">\n    </span><span class="s1">populateDb(ast, db);</span><span class="s3">\n  </span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">parse</span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n\n</span><span class="s1">// src/diagrams/pie/pieStyles.ts</span><span class="s3">\n</span><span class="s1">var getStyles = /* @__PURE__ */ __name((options) =&gt; `</span><span class="s3">\n  </span><span class="s1">.pieCircle{</span><span class="s3">\n    </span><span class="s1">stroke: ${options.pieStrokeColor};</span><span class="s3">\n    </span><span class="s1">stroke-width : ${options.pieStrokeWidth};</span><span class="s3">\n    </span><span class="s1">opacity : ${options.pieOpacity};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">.pieOuterCircle{</span><span class="s3">\n    </span><span class="s1">stroke: ${options.pieOuterStrokeColor};</span><span class="s3">\n    </span><span class="s1">stroke-width: ${options.pieOuterStrokeWidth};</span><span class="s3">\n    </span><span class="s1">fill: none;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">.pieTitleText {</span><span class="s3">\n    </span><span class="s1">text-anchor: middle;</span><span class="s3">\n    </span><span class="s1">font-size: ${options.pieTitleTextSize};</span><span class="s3">\n    </span><span class="s1">fill: ${options.pieTitleTextColor};</span><span class="s3">\n    </span><span class="s1">font-family: ${options.fontFamily};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">.slice {</span><span class="s3">\n    </span><span class="s1">font-family: ${options.fontFamily};</span><span class="s3">\n    </span><span class="s1">fill: ${options.pieSectionTextColor};</span><span class="s3">\n    </span><span class="s1">font-size:${options.pieSectionTextSize};</span><span class="s3">\n    </span><span class="s1">// fill: white;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">.legend text {</span><span class="s3">\n    </span><span class="s1">fill: ${options.pieLegendTextColor};</span><span class="s3">\n    </span><span class="s1">font-family: ${options.fontFamily};</span><span class="s3">\n    </span><span class="s1">font-size: ${options.pieLegendTextSize};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">`, </span><span class="s3">\&quot;</span><span class="s1">getStyles</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var pieStyles_default = getStyles;</span><span class="s3">\n\n</span><span class="s1">// src/diagrams/pie/pieRenderer.ts</span><span class="s3">\n</span><span class="s1">import { arc, pie as d3pie, scaleOrdinal } from </span><span class="s3">\&quot;</span><span class="s1">d3</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">var createPieArcs = /* @__PURE__ */ __name((sections2) =&gt; {</span><span class="s3">\n  </span><span class="s1">const pieData = [...sections2.entries()].map((element) =&gt; {</span><span class="s3">\n    </span><span class="s1">return {</span><span class="s3">\n      </span><span class="s1">label: element[0],</span><span class="s3">\n      </span><span class="s1">value: element[1]</span><span class="s3">\n    </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">}).sort((a, b) =&gt; {</span><span class="s3">\n    </span><span class="s1">return b.value - a.value;</span><span class="s3">\n  </span><span class="s1">});</span><span class="s3">\n  </span><span class="s1">const pie = d3pie().value(</span><span class="s3">\n    </span><span class="s1">(d3Section) =&gt; d3Section.value</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">return pie(pieData);</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">createPieArcs</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var draw = /* @__PURE__ */ __name((text, id, _version, diagObj) =&gt; {</span><span class="s3">\n  </span><span class="s1">log.debug(</span><span class="s3">\&quot;</span><span class="s1">rendering pie chart</span><span class="s3">\\</span><span class="s1">n</span><span class="s3">\&quot; </span><span class="s1">+ text);</span><span class="s3">\n  </span><span class="s1">const db2 = diagObj.db;</span><span class="s3">\n  </span><span class="s1">const globalConfig = getConfig();</span><span class="s3">\n  </span><span class="s1">const pieConfig = cleanAndMerge(db2.getConfig(), globalConfig.pie);</span><span class="s3">\n  </span><span class="s1">const MARGIN = 40;</span><span class="s3">\n  </span><span class="s1">const LEGEND_RECT_SIZE = 18;</span><span class="s3">\n  </span><span class="s1">const LEGEND_SPACING = 4;</span><span class="s3">\n  </span><span class="s1">const height = 450;</span><span class="s3">\n  </span><span class="s1">const pieWidth = height;</span><span class="s3">\n  </span><span class="s1">const svg = selectSvgElement(id);</span><span class="s3">\n  </span><span class="s1">const group = svg.append(</span><span class="s3">\&quot;</span><span class="s1">g</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">group.attr(</span><span class="s3">\&quot;</span><span class="s1">transform</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">translate(</span><span class="s3">\&quot; </span><span class="s1">+ pieWidth / 2 + </span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot; </span><span class="s1">+ height / 2 + </span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const { themeVariables } = globalConfig;</span><span class="s3">\n  </span><span class="s1">let [outerStrokeWidth] = parseFontSize(themeVariables.pieOuterStrokeWidth);</span><span class="s3">\n  </span><span class="s1">outerStrokeWidth ??= 2;</span><span class="s3">\n  </span><span class="s1">const textPosition = pieConfig.textPosition;</span><span class="s3">\n  </span><span class="s1">const radius = Math.min(pieWidth, height) / 2 - MARGIN;</span><span class="s3">\n  </span><span class="s1">const arcGenerator = arc().innerRadius(0).outerRadius(radius);</span><span class="s3">\n  </span><span class="s1">const labelArcGenerator = arc().innerRadius(radius * textPosition).outerRadius(radius * textPosition);</span><span class="s3">\n  </span><span class="s1">group.append(</span><span class="s3">\&quot;</span><span class="s1">circle</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">cx</span><span class="s3">\&quot;</span><span class="s1">, 0).attr(</span><span class="s3">\&quot;</span><span class="s1">cy</span><span class="s3">\&quot;</span><span class="s1">, 0).attr(</span><span class="s3">\&quot;</span><span class="s1">r</span><span class="s3">\&quot;</span><span class="s1">, radius + outerStrokeWidth / 2).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">pieOuterCircle</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const sections2 = db2.getSections();</span><span class="s3">\n  </span><span class="s1">const arcs = createPieArcs(sections2);</span><span class="s3">\n  </span><span class="s1">const myGeneratedColors = [</span><span class="s3">\n    </span><span class="s1">themeVariables.pie1,</span><span class="s3">\n    </span><span class="s1">themeVariables.pie2,</span><span class="s3">\n    </span><span class="s1">themeVariables.pie3,</span><span class="s3">\n    </span><span class="s1">themeVariables.pie4,</span><span class="s3">\n    </span><span class="s1">themeVariables.pie5,</span><span class="s3">\n    </span><span class="s1">themeVariables.pie6,</span><span class="s3">\n    </span><span class="s1">themeVariables.pie7,</span><span class="s3">\n    </span><span class="s1">themeVariables.pie8,</span><span class="s3">\n    </span><span class="s1">themeVariables.pie9,</span><span class="s3">\n    </span><span class="s1">themeVariables.pie10,</span><span class="s3">\n    </span><span class="s1">themeVariables.pie11,</span><span class="s3">\n    </span><span class="s1">themeVariables.pie12</span><span class="s3">\n  </span><span class="s1">];</span><span class="s3">\n  </span><span class="s1">const color = scaleOrdinal(myGeneratedColors);</span><span class="s3">\n  </span><span class="s1">group.selectAll(</span><span class="s3">\&quot;</span><span class="s1">mySlices</span><span class="s3">\&quot;</span><span class="s1">).data(arcs).enter().append(</span><span class="s3">\&quot;</span><span class="s1">path</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">d</span><span class="s3">\&quot;</span><span class="s1">, arcGenerator).attr(</span><span class="s3">\&quot;</span><span class="s1">fill</span><span class="s3">\&quot;</span><span class="s1">, (datum) =&gt; {</span><span class="s3">\n    </span><span class="s1">return color(datum.data.label);</span><span class="s3">\n  </span><span class="s1">}).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">pieCircle</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">let sum = 0;</span><span class="s3">\n  </span><span class="s1">sections2.forEach((section) =&gt; {</span><span class="s3">\n    </span><span class="s1">sum += section;</span><span class="s3">\n  </span><span class="s1">});</span><span class="s3">\n  </span><span class="s1">group.selectAll(</span><span class="s3">\&quot;</span><span class="s1">mySlices</span><span class="s3">\&quot;</span><span class="s1">).data(arcs).enter().append(</span><span class="s3">\&quot;</span><span class="s1">text</span><span class="s3">\&quot;</span><span class="s1">).text((datum) =&gt; {</span><span class="s3">\n    </span><span class="s1">return (datum.data.value / sum * 100).toFixed(0) + </span><span class="s3">\&quot;</span><span class="s1">%</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">}).attr(</span><span class="s3">\&quot;</span><span class="s1">transform</span><span class="s3">\&quot;</span><span class="s1">, (datum) =&gt; {</span><span class="s3">\n    </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">translate(</span><span class="s3">\&quot; </span><span class="s1">+ labelArcGenerator.centroid(datum) + </span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">}).style(</span><span class="s3">\&quot;</span><span class="s1">text-anchor</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">middle</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">slice</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">group.append(</span><span class="s3">\&quot;</span><span class="s1">text</span><span class="s3">\&quot;</span><span class="s1">).text(db2.getDiagramTitle()).attr(</span><span class="s3">\&quot;</span><span class="s1">x</span><span class="s3">\&quot;</span><span class="s1">, 0).attr(</span><span class="s3">\&quot;</span><span class="s1">y</span><span class="s3">\&quot;</span><span class="s1">, -(height - 50) / 2).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">pieTitleText</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const legend = group.selectAll(</span><span class="s3">\&quot;</span><span class="s1">.legend</span><span class="s3">\&quot;</span><span class="s1">).data(color.domain()).enter().append(</span><span class="s3">\&quot;</span><span class="s1">g</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">legend</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">transform</span><span class="s3">\&quot;</span><span class="s1">, (_datum, index) =&gt; {</span><span class="s3">\n    </span><span class="s1">const height2 = LEGEND_RECT_SIZE + LEGEND_SPACING;</span><span class="s3">\n    </span><span class="s1">const offset = height2 * color.domain().length / 2;</span><span class="s3">\n    </span><span class="s1">const horizontal = 12 * LEGEND_RECT_SIZE;</span><span class="s3">\n    </span><span class="s1">const vertical = index * height2 - offset;</span><span class="s3">\n    </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">translate(</span><span class="s3">\&quot; </span><span class="s1">+ horizontal + </span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot; </span><span class="s1">+ vertical + </span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">});</span><span class="s3">\n  </span><span class="s1">legend.append(</span><span class="s3">\&quot;</span><span class="s1">rect</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">width</span><span class="s3">\&quot;</span><span class="s1">, LEGEND_RECT_SIZE).attr(</span><span class="s3">\&quot;</span><span class="s1">height</span><span class="s3">\&quot;</span><span class="s1">, LEGEND_RECT_SIZE).style(</span><span class="s3">\&quot;</span><span class="s1">fill</span><span class="s3">\&quot;</span><span class="s1">, color).style(</span><span class="s3">\&quot;</span><span class="s1">stroke</span><span class="s3">\&quot;</span><span class="s1">, color);</span><span class="s3">\n  </span><span class="s1">legend.data(arcs).append(</span><span class="s3">\&quot;</span><span class="s1">text</span><span class="s3">\&quot;</span><span class="s1">).attr(</span><span class="s3">\&quot;</span><span class="s1">x</span><span class="s3">\&quot;</span><span class="s1">, LEGEND_RECT_SIZE + LEGEND_SPACING).attr(</span><span class="s3">\&quot;</span><span class="s1">y</span><span class="s3">\&quot;</span><span class="s1">, LEGEND_RECT_SIZE - LEGEND_SPACING).text((datum) =&gt; {</span><span class="s3">\n    </span><span class="s1">const { label, value } = datum.data;</span><span class="s3">\n    </span><span class="s1">if (db2.getShowData()) {</span><span class="s3">\n      </span><span class="s1">return `${label} [${value}]`;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">return label;</span><span class="s3">\n  </span><span class="s1">});</span><span class="s3">\n  </span><span class="s1">const longestTextWidth = Math.max(</span><span class="s3">\n    </span><span class="s1">...legend.selectAll(</span><span class="s3">\&quot;</span><span class="s1">text</span><span class="s3">\&quot;</span><span class="s1">).nodes().map((node) =&gt; node?.getBoundingClientRect().width ?? 0)</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const totalWidth = pieWidth + MARGIN + LEGEND_RECT_SIZE + LEGEND_SPACING + longestTextWidth;</span><span class="s3">\n  </span><span class="s1">svg.attr(</span><span class="s3">\&quot;</span><span class="s1">viewBox</span><span class="s3">\&quot;</span><span class="s1">, `0 0 ${totalWidth} ${height}`);</span><span class="s3">\n  </span><span class="s1">configureSvgSize(svg, height, totalWidth, pieConfig.useMaxWidth);</span><span class="s3">\n</span><span class="s1">}, </span><span class="s3">\&quot;</span><span class="s1">draw</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">var renderer = { draw };</span><span class="s3">\n\n</span><span class="s1">// src/diagrams/pie/pieDiagram.ts</span><span class="s3">\n</span><span class="s1">var diagram = {</span><span class="s3">\n  </span><span class="s1">parser,</span><span class="s3">\n  </span><span class="s1">db,</span><span class="s3">\n  </span><span class="s1">renderer,</span><span class="s3">\n  </span><span class="s1">styles: pieStyles_default</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n</span><span class="s1">export {</span><span class="s3">\n  </span><span class="s1">diagram</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[],</span><span class="s1">&quot;sourceRoot&quot;</span><span class="s0">:</span><span class="s1">&quot;&quot;</span><span class="s0">}</span></pre>
</body>
</html>